var XV=Object.defineProperty;var Pk=e=>{throw TypeError(e)};var YV=(e,t,r)=>t in e?XV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $r=(e,t,r)=>YV(e,typeof t!="symbol"?t+"":t,r),oS=(e,t,r)=>t.has(e)||Pk("Cannot "+r);var Ue=(e,t,r)=>(oS(e,t,"read from private field"),r?r.call(e):t.get(e)),Dr=(e,t,r)=>t.has(e)?Pk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),fr=(e,t,r,n)=>(oS(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),an=(e,t,r)=>(oS(e,t,"access private method"),r);var Y0=(e,t,r,n)=>({set _(l){fr(e,t,l,r)},get _(){return Ue(e,t,n)}});function QV(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(n,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}})();function Ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sS={exports:{}},Iv={},lS={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek;function JV(){if(Ek)return pn;Ek=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),M=Symbol.iterator;function O(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=M&&Oe[M]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function L(Oe,et,Mt){this.props=Oe,this.context=et,this.refs=F,this.updater=Mt||z}L.prototype.isReactComponent={},L.prototype.setState=function(Oe,et){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,et,"setState")},L.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function K(){}K.prototype=L.prototype;function Q(Oe,et,Mt){this.props=Oe,this.context=et,this.refs=F,this.updater=Mt||z}var re=Q.prototype=new K;re.constructor=Q,B(re,L.prototype),re.isPureReactComponent=!0;var te=Array.isArray,ae=Object.prototype.hasOwnProperty,he={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function be(Oe,et,Mt){var Dt,Ke={},tr=null,Ft=null;if(et!=null)for(Dt in et.ref!==void 0&&(Ft=et.ref),et.key!==void 0&&(tr=""+et.key),et)ae.call(et,Dt)&&!ne.hasOwnProperty(Dt)&&(Ke[Dt]=et[Dt]);var $t=arguments.length-2;if($t===1)Ke.children=Mt;else if(1<$t){for(var ct=Array($t),Lt=0;Lt<$t;Lt++)ct[Lt]=arguments[Lt+2];Ke.children=ct}if(Oe&&Oe.defaultProps)for(Dt in $t=Oe.defaultProps,$t)Ke[Dt]===void 0&&(Ke[Dt]=$t[Dt]);return{$$typeof:e,type:Oe,key:tr,ref:Ft,props:Ke,_owner:he.current}}function xe(Oe,et){return{$$typeof:e,type:Oe.type,key:et,ref:Oe.ref,props:Oe.props,_owner:Oe._owner}}function $e(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===e}function Ee(Oe){var et={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(Mt){return et[Mt]})}var Ne=/\/+/g;function Xe(Oe,et){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?Ee(""+Oe.key):et.toString(36)}function ut(Oe,et,Mt,Dt,Ke){var tr=typeof Oe;(tr==="undefined"||tr==="boolean")&&(Oe=null);var Ft=!1;if(Oe===null)Ft=!0;else switch(tr){case"string":case"number":Ft=!0;break;case"object":switch(Oe.$$typeof){case e:case t:Ft=!0}}if(Ft)return Ft=Oe,Ke=Ke(Ft),Oe=Dt===""?"."+Xe(Ft,0):Dt,te(Ke)?(Mt="",Oe!=null&&(Mt=Oe.replace(Ne,"$&/")+"/"),ut(Ke,et,Mt,"",function(Lt){return Lt})):Ke!=null&&($e(Ke)&&(Ke=xe(Ke,Mt+(!Ke.key||Ft&&Ft.key===Ke.key?"":(""+Ke.key).replace(Ne,"$&/")+"/")+Oe)),et.push(Ke)),1;if(Ft=0,Dt=Dt===""?".":Dt+":",te(Oe))for(var $t=0;$t<Oe.length;$t++){tr=Oe[$t];var ct=Dt+Xe(tr,$t);Ft+=ut(tr,et,Mt,ct,Ke)}else if(ct=O(Oe),typeof ct=="function")for(Oe=ct.call(Oe),$t=0;!(tr=Oe.next()).done;)tr=tr.value,ct=Dt+Xe(tr,$t++),Ft+=ut(tr,et,Mt,ct,Ke);else if(tr==="object")throw et=String(Oe),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return Ft}function pt(Oe,et,Mt){if(Oe==null)return Oe;var Dt=[],Ke=0;return ut(Oe,Dt,"","",function(tr){return et.call(Mt,tr,Ke++)}),Dt}function gt(Oe){if(Oe._status===-1){var et=Oe._result;et=et(),et.then(function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=Mt)},function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=Mt)}),Oe._status===-1&&(Oe._status=0,Oe._result=et)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var wt={current:null},je={transition:null},Qe={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:je,ReactCurrentOwner:he};function yt(){throw Error("act(...) is not supported in production builds of React.")}return pn.Children={map:pt,forEach:function(Oe,et,Mt){pt(Oe,function(){et.apply(this,arguments)},Mt)},count:function(Oe){var et=0;return pt(Oe,function(){et++}),et},toArray:function(Oe){return pt(Oe,function(et){return et})||[]},only:function(Oe){if(!$e(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}},pn.Component=L,pn.Fragment=r,pn.Profiler=l,pn.PureComponent=Q,pn.StrictMode=n,pn.Suspense=_,pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qe,pn.act=yt,pn.cloneElement=function(Oe,et,Mt){if(Oe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Oe+".");var Dt=B({},Oe.props),Ke=Oe.key,tr=Oe.ref,Ft=Oe._owner;if(et!=null){if(et.ref!==void 0&&(tr=et.ref,Ft=he.current),et.key!==void 0&&(Ke=""+et.key),Oe.type&&Oe.type.defaultProps)var $t=Oe.type.defaultProps;for(ct in et)ae.call(et,ct)&&!ne.hasOwnProperty(ct)&&(Dt[ct]=et[ct]===void 0&&$t!==void 0?$t[ct]:et[ct])}var ct=arguments.length-2;if(ct===1)Dt.children=Mt;else if(1<ct){$t=Array(ct);for(var Lt=0;Lt<ct;Lt++)$t[Lt]=arguments[Lt+2];Dt.children=$t}return{$$typeof:e,type:Oe.type,key:Ke,ref:tr,props:Dt,_owner:Ft}},pn.createContext=function(Oe){return Oe={$$typeof:d,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Oe.Provider={$$typeof:h,_context:Oe},Oe.Consumer=Oe},pn.createElement=be,pn.createFactory=function(Oe){var et=be.bind(null,Oe);return et.type=Oe,et},pn.createRef=function(){return{current:null}},pn.forwardRef=function(Oe){return{$$typeof:o,render:Oe}},pn.isValidElement=$e,pn.lazy=function(Oe){return{$$typeof:P,_payload:{_status:-1,_result:Oe},_init:gt}},pn.memo=function(Oe,et){return{$$typeof:S,type:Oe,compare:et===void 0?null:et}},pn.startTransition=function(Oe){var et=je.transition;je.transition={};try{Oe()}finally{je.transition=et}},pn.unstable_act=yt,pn.useCallback=function(Oe,et){return wt.current.useCallback(Oe,et)},pn.useContext=function(Oe){return wt.current.useContext(Oe)},pn.useDebugValue=function(){},pn.useDeferredValue=function(Oe){return wt.current.useDeferredValue(Oe)},pn.useEffect=function(Oe,et){return wt.current.useEffect(Oe,et)},pn.useId=function(){return wt.current.useId()},pn.useImperativeHandle=function(Oe,et,Mt){return wt.current.useImperativeHandle(Oe,et,Mt)},pn.useInsertionEffect=function(Oe,et){return wt.current.useInsertionEffect(Oe,et)},pn.useLayoutEffect=function(Oe,et){return wt.current.useLayoutEffect(Oe,et)},pn.useMemo=function(Oe,et){return wt.current.useMemo(Oe,et)},pn.useReducer=function(Oe,et,Mt){return wt.current.useReducer(Oe,et,Mt)},pn.useRef=function(Oe){return wt.current.useRef(Oe)},pn.useState=function(Oe){return wt.current.useState(Oe)},pn.useSyncExternalStore=function(Oe,et,Mt){return wt.current.useSyncExternalStore(Oe,et,Mt)},pn.useTransition=function(){return wt.current.useTransition()},pn.version="18.3.1",pn}var Ck;function Dy(){return Ck||(Ck=1,lS.exports=JV()),lS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function e$(){if(Tk)return Iv;Tk=1;var e=Dy(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function d(o,_,S){var P,M={},O=null,z=null;S!==void 0&&(O=""+S),_.key!==void 0&&(O=""+_.key),_.ref!==void 0&&(z=_.ref);for(P in _)n.call(_,P)&&!h.hasOwnProperty(P)&&(M[P]=_[P]);if(o&&o.defaultProps)for(P in _=o.defaultProps,_)M[P]===void 0&&(M[P]=_[P]);return{$$typeof:t,type:o,key:O,ref:z,props:M,_owner:l.current}}return Iv.Fragment=r,Iv.jsx=d,Iv.jsxs=d,Iv}var Mk;function t$(){return Mk||(Mk=1,sS.exports=e$()),sS.exports}var $=t$(),A=Dy();const ui=Ph(A),aw=QV({__proto__:null,default:ui},[A]);var Q0={},uS={exports:{}},Ws={},cS={exports:{}},hS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function r$(){return kk||(kk=1,(function(e){function t(je,Qe){var yt=je.length;je.push(Qe);e:for(;0<yt;){var Oe=yt-1>>>1,et=je[Oe];if(0<l(et,Qe))je[Oe]=Qe,je[yt]=et,yt=Oe;else break e}}function r(je){return je.length===0?null:je[0]}function n(je){if(je.length===0)return null;var Qe=je[0],yt=je.pop();if(yt!==Qe){je[0]=yt;e:for(var Oe=0,et=je.length,Mt=et>>>1;Oe<Mt;){var Dt=2*(Oe+1)-1,Ke=je[Dt],tr=Dt+1,Ft=je[tr];if(0>l(Ke,yt))tr<et&&0>l(Ft,Ke)?(je[Oe]=Ft,je[tr]=yt,Oe=tr):(je[Oe]=Ke,je[Dt]=yt,Oe=Dt);else if(tr<et&&0>l(Ft,yt))je[Oe]=Ft,je[tr]=yt,Oe=tr;else break e}}return Qe}function l(je,Qe){var yt=je.sortIndex-Qe.sortIndex;return yt!==0?yt:je.id-Qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,o=d.now();e.unstable_now=function(){return d.now()-o}}var _=[],S=[],P=1,M=null,O=3,z=!1,B=!1,F=!1,L=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(je){for(var Qe=r(S);Qe!==null;){if(Qe.callback===null)n(S);else if(Qe.startTime<=je)n(S),Qe.sortIndex=Qe.expirationTime,t(_,Qe);else break;Qe=r(S)}}function te(je){if(F=!1,re(je),!B)if(r(_)!==null)B=!0,gt(ae);else{var Qe=r(S);Qe!==null&&wt(te,Qe.startTime-je)}}function ae(je,Qe){B=!1,F&&(F=!1,K(be),be=-1),z=!0;var yt=O;try{for(re(Qe),M=r(_);M!==null&&(!(M.expirationTime>Qe)||je&&!Ee());){var Oe=M.callback;if(typeof Oe=="function"){M.callback=null,O=M.priorityLevel;var et=Oe(M.expirationTime<=Qe);Qe=e.unstable_now(),typeof et=="function"?M.callback=et:M===r(_)&&n(_),re(Qe)}else n(_);M=r(_)}if(M!==null)var Mt=!0;else{var Dt=r(S);Dt!==null&&wt(te,Dt.startTime-Qe),Mt=!1}return Mt}finally{M=null,O=yt,z=!1}}var he=!1,ne=null,be=-1,xe=5,$e=-1;function Ee(){return!(e.unstable_now()-$e<xe)}function Ne(){if(ne!==null){var je=e.unstable_now();$e=je;var Qe=!0;try{Qe=ne(!0,je)}finally{Qe?Xe():(he=!1,ne=null)}}else he=!1}var Xe;if(typeof Q=="function")Xe=function(){Q(Ne)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,pt=ut.port2;ut.port1.onmessage=Ne,Xe=function(){pt.postMessage(null)}}else Xe=function(){L(Ne,0)};function gt(je){ne=je,he||(he=!0,Xe())}function wt(je,Qe){be=L(function(){je(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(je){je.callback=null},e.unstable_continueExecution=function(){B||z||(B=!0,gt(ae))},e.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<je?Math.floor(1e3/je):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(je){switch(O){case 1:case 2:case 3:var Qe=3;break;default:Qe=O}var yt=O;O=Qe;try{return je()}finally{O=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(je,Qe){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var yt=O;O=je;try{return Qe()}finally{O=yt}},e.unstable_scheduleCallback=function(je,Qe,yt){var Oe=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Oe+yt:Oe):yt=Oe,je){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=yt+et,je={id:P++,callback:Qe,priorityLevel:je,startTime:yt,expirationTime:et,sortIndex:-1},yt>Oe?(je.sortIndex=yt,t(S,je),r(_)===null&&je===r(S)&&(F?(K(be),be=-1):F=!0,wt(te,yt-Oe))):(je.sortIndex=et,t(_,je),B||z||(B=!0,gt(ae))),je},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(je){var Qe=O;return function(){var yt=O;O=Qe;try{return je.apply(this,arguments)}finally{O=yt}}}})(hS)),hS}var Ak;function n$(){return Ak||(Ak=1,cS.exports=r$()),cS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik;function i$(){if(Ik)return Ws;Ik=1;var e=Dy(),t=n$();function r(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,T=1;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,l={};function h(p,y){d(p,y),d(p+"Capture",y)}function d(p,y){for(l[p]=y,p=0;p<y.length;p++)n.add(y[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},M={};function O(p){return _.call(M,p)?!0:_.call(P,p)?!1:S.test(p)?M[p]=!0:(P[p]=!0,!1)}function z(p,y,T,R){if(T!==null&&T.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return R?!1:T!==null?!T.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function B(p,y,T,R){if(y===null||typeof y>"u"||z(p,y,T,R))return!0;if(R)return!1;if(T!==null)switch(T.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function F(p,y,T,R,q,Z,de){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=R,this.attributeNamespace=q,this.mustUseProperty=T,this.propertyName=p,this.type=y,this.sanitizeURL=Z,this.removeEmptyString=de}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){L[p]=new F(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var y=p[0];L[y]=new F(y,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){L[p]=new F(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){L[p]=new F(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){L[p]=new F(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){L[p]=new F(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){L[p]=new F(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){L[p]=new F(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){L[p]=new F(p,5,!1,p.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function Q(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var y=p.replace(K,Q);L[y]=new F(y,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var y=p.replace(K,Q);L[y]=new F(y,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var y=p.replace(K,Q);L[y]=new F(y,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){L[p]=new F(p,1,!1,p.toLowerCase(),null,!1,!1)}),L.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){L[p]=new F(p,1,!1,p.toLowerCase(),null,!0,!0)});function re(p,y,T,R){var q=L.hasOwnProperty(y)?L[y]:null;(q!==null?q.type!==0:R||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(B(y,T,q,R)&&(T=null),R||q===null?O(y)&&(T===null?p.removeAttribute(y):p.setAttribute(y,""+T)):q.mustUseProperty?p[q.propertyName]=T===null?q.type===3?!1:"":T:(y=q.attributeName,R=q.attributeNamespace,T===null?p.removeAttribute(y):(q=q.type,T=q===3||q===4&&T===!0?"":""+T,R?p.setAttributeNS(R,y,T):p.setAttribute(y,T))))}var te=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),he=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),be=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),$e=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Xe=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),wt=Symbol.for("react.offscreen"),je=Symbol.iterator;function Qe(p){return p===null||typeof p!="object"?null:(p=je&&p[je]||p["@@iterator"],typeof p=="function"?p:null)}var yt=Object.assign,Oe;function et(p){if(Oe===void 0)try{throw Error()}catch(T){var y=T.stack.trim().match(/\n( *(at )?)/);Oe=y&&y[1]||""}return`
`+Oe+p}var Mt=!1;function Dt(p,y){if(!p||Mt)return"";Mt=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(vt){var R=vt}Reflect.construct(p,[],y)}else{try{y.call()}catch(vt){R=vt}p.call(y.prototype)}else{try{throw Error()}catch(vt){R=vt}p()}}catch(vt){if(vt&&R&&typeof vt.stack=="string"){for(var q=vt.stack.split(`
`),Z=R.stack.split(`
`),de=q.length-1,De=Z.length-1;1<=de&&0<=De&&q[de]!==Z[De];)De--;for(;1<=de&&0<=De;de--,De--)if(q[de]!==Z[De]){if(de!==1||De!==1)do if(de--,De--,0>De||q[de]!==Z[De]){var qe=`
`+q[de].replace(" at new "," at ");return p.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",p.displayName)),qe}while(1<=de&&0<=De);break}}}finally{Mt=!1,Error.prepareStackTrace=T}return(p=p?p.displayName||p.name:"")?et(p):""}function Ke(p){switch(p.tag){case 5:return et(p.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return p=Dt(p.type,!1),p;case 11:return p=Dt(p.type.render,!1),p;case 1:return p=Dt(p.type,!0),p;default:return""}}function tr(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case ne:return"Fragment";case he:return"Portal";case xe:return"Profiler";case be:return"StrictMode";case Xe:return"Suspense";case ut:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Ee:return(p.displayName||"Context")+".Consumer";case $e:return(p._context.displayName||"Context")+".Provider";case Ne:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case pt:return y=p.displayName||null,y!==null?y:tr(p.type)||"Memo";case gt:y=p._payload,p=p._init;try{return tr(p(y))}catch{}}return null}function Ft(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tr(y);case 8:return y===be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function $t(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function ct(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Lt(p){var y=ct(p)?"checked":"value",T=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),R=""+p[y];if(!p.hasOwnProperty(y)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var q=T.get,Z=T.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return q.call(this)},set:function(de){R=""+de,Z.call(this,de)}}),Object.defineProperty(p,y,{enumerable:T.enumerable}),{getValue:function(){return R},setValue:function(de){R=""+de},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function ir(p){p._valueTracker||(p._valueTracker=Lt(p))}function St(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var T=y.getValue(),R="";return p&&(R=ct(p)?p.checked?"true":"false":p.value),p=R,p!==T?(y.setValue(p),!0):!1}function Gr(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Tr(p,y){var T=y.checked;return yt({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:T??p._wrapperState.initialChecked})}function wr(p,y){var T=y.defaultValue==null?"":y.defaultValue,R=y.checked!=null?y.checked:y.defaultChecked;T=$t(y.value!=null?y.value:T),p._wrapperState={initialChecked:R,initialValue:T,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function tn(p,y){y=y.checked,y!=null&&re(p,"checked",y,!1)}function Wr(p,y){tn(p,y);var T=$t(y.value),R=y.type;if(T!=null)R==="number"?(T===0&&p.value===""||p.value!=T)&&(p.value=""+T):p.value!==""+T&&(p.value=""+T);else if(R==="submit"||R==="reset"){p.removeAttribute("value");return}y.hasOwnProperty("value")?Ii(p,y.type,T):y.hasOwnProperty("defaultValue")&&Ii(p,y.type,$t(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(p.defaultChecked=!!y.defaultChecked)}function Xi(p,y,T){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var R=y.type;if(!(R!=="submit"&&R!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+p._wrapperState.initialValue,T||y===p.value||(p.value=y),p.defaultValue=y}T=p.name,T!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,T!==""&&(p.name=T)}function Ii(p,y,T){(y!=="number"||Gr(p.ownerDocument)!==p)&&(T==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+T&&(p.defaultValue=""+T))}var Be=Array.isArray;function rt(p,y,T,R){if(p=p.options,y){y={};for(var q=0;q<T.length;q++)y["$"+T[q]]=!0;for(T=0;T<p.length;T++)q=y.hasOwnProperty("$"+p[T].value),p[T].selected!==q&&(p[T].selected=q),q&&R&&(p[T].defaultSelected=!0)}else{for(T=""+$t(T),y=null,q=0;q<p.length;q++){if(p[q].value===T){p[q].selected=!0,R&&(p[q].defaultSelected=!0);return}y!==null||p[q].disabled||(y=p[q])}y!==null&&(y.selected=!0)}}function bt(p,y){if(y.dangerouslySetInnerHTML!=null)throw Error(r(91));return yt({},y,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function rr(p,y){var T=y.value;if(T==null){if(T=y.children,y=y.defaultValue,T!=null){if(y!=null)throw Error(r(92));if(Be(T)){if(1<T.length)throw Error(r(93));T=T[0]}y=T}y==null&&(y=""),T=y}p._wrapperState={initialValue:$t(T)}}function Wt(p,y){var T=$t(y.value),R=$t(y.defaultValue);T!=null&&(T=""+T,T!==p.value&&(p.value=T),y.defaultValue==null&&p.defaultValue!==T&&(p.defaultValue=T)),R!=null&&(p.defaultValue=""+R)}function zt(p){var y=p.textContent;y===p._wrapperState.initialValue&&y!==""&&y!==null&&(p.value=y)}function ze(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(p,y){return p==null||p==="http://www.w3.org/1999/xhtml"?ze(y):p==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var le,pe=(function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,T,R,q){MSApp.execUnsafeLocalFunction(function(){return p(y,T,R,q)})}:p})(function(p,y){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=y;else{for(le=le||document.createElement("div"),le.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=le.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;y.firstChild;)p.appendChild(y.firstChild)}});function Me(p,y){if(y){var T=p.firstChild;if(T&&T===p.lastChild&&T.nodeType===3){T.nodeValue=y;return}}p.textContent=y}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Je=["Webkit","ms","Moz","O"];Object.keys(Ae).forEach(function(p){Je.forEach(function(y){y=y+p.charAt(0).toUpperCase()+p.substring(1),Ae[y]=Ae[p]})});function Ze(p,y,T){return y==null||typeof y=="boolean"||y===""?"":T||typeof y!="number"||y===0||Ae.hasOwnProperty(p)&&Ae[p]?(""+y).trim():y+"px"}function Ve(p,y){p=p.style;for(var T in y)if(y.hasOwnProperty(T)){var R=T.indexOf("--")===0,q=Ze(T,y[T],R);T==="float"&&(T="cssFloat"),R?p.setProperty(T,q):p[T]=q}}var it=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function At(p,y){if(y){if(it[p]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(r(137,p));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(r(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(r(61))}if(y.style!=null&&typeof y.style!="object")throw Error(r(62))}}function Pt(p,y){if(p.indexOf("-")===-1)return typeof y.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function or(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Mr=null,Kr=null,Ur=null;function tt(p){if(p=os(p)){if(typeof Mr!="function")throw Error(r(280));var y=p.stateNode;y&&(y=Wh(y),Mr(p.stateNode,p.type,y))}}function sn(p){Kr?Ur?Ur.push(p):Ur=[p]:Kr=p}function ti(){if(Kr){var p=Kr,y=Ur;if(Ur=Kr=null,tt(p),y)for(p=0;p<y.length;p++)tt(y[p])}}function Ir(p,y){return p(y)}function Zr(){}var Vn=!1;function yn(p,y,T){if(Vn)return p(y,T);Vn=!0;try{return Ir(p,y,T)}finally{Vn=!1,(Kr!==null||Ur!==null)&&(Zr(),ti())}}function ln(p,y){var T=p.stateNode;if(T===null)return null;var R=Wh(T);if(R===null)return null;T=R[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(p=p.type,R=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!R;break e;default:p=!1}if(p)return null;if(T&&typeof T!="function")throw Error(r(231,y,typeof T));return T}var ur=!1;if(o)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){ur=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch{ur=!1}function Ye(p,y,T,R,q,Z,de,De,qe){var vt=Array.prototype.slice.call(arguments,3);try{y.apply(T,vt)}catch(qt){this.onError(qt)}}var mt=!1,We=null,Gt=!1,cr=null,Sr={onError:function(p){mt=!0,We=p}};function hr(p,y,T,R,q,Z,de,De,qe){mt=!1,We=null,Ye.apply(Sr,arguments)}function xt(p,y,T,R,q,Z,de,De,qe){if(hr.apply(this,arguments),mt){if(mt){var vt=We;mt=!1,We=null}else throw Error(r(198));Gt||(Gt=!0,cr=vt)}}function Bt(p){var y=p,T=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(T=y.return),p=y.return;while(p)}return y.tag===3?T:null}function Zt(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function dr(p){if(Bt(p)!==p)throw Error(r(188))}function Fr(p){var y=p.alternate;if(!y){if(y=Bt(p),y===null)throw Error(r(188));return y!==p?null:p}for(var T=p,R=y;;){var q=T.return;if(q===null)break;var Z=q.alternate;if(Z===null){if(R=q.return,R!==null){T=R;continue}break}if(q.child===Z.child){for(Z=q.child;Z;){if(Z===T)return dr(q),p;if(Z===R)return dr(q),y;Z=Z.sibling}throw Error(r(188))}if(T.return!==R.return)T=q,R=Z;else{for(var de=!1,De=q.child;De;){if(De===T){de=!0,T=q,R=Z;break}if(De===R){de=!0,R=q,T=Z;break}De=De.sibling}if(!de){for(De=Z.child;De;){if(De===T){de=!0,T=Z,R=q;break}if(De===R){de=!0,R=Z,T=q;break}De=De.sibling}if(!de)throw Error(r(189))}}if(T.alternate!==R)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?p:y}function Yr(p){return p=Fr(p),p!==null?mr(p):null}function mr(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=mr(p);if(y!==null)return y;p=p.sibling}return null}var ri=t.unstable_scheduleCallback,vn=t.unstable_cancelCallback,Tn=t.unstable_shouldYield,Ja=t.unstable_requestPaint,bn=t.unstable_now,La=t.unstable_getCurrentPriorityLevel,Yi=t.unstable_ImmediatePriority,Oi=t.unstable_UserBlockingPriority,Qr=t.unstable_NormalPriority,Io=t.unstable_LowPriority,Oo=t.unstable_IdlePriority,So=null,jr=null;function Rn(p){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(So,p,void 0,(p.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:jn,Da=Math.log,$n=Math.LN2;function jn(p){return p>>>=0,p===0?32:31-(Da(p)/$n|0)|0}var Ol=64,Pu=4194304;function rl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Eh(p,y){var T=p.pendingLanes;if(T===0)return 0;var R=0,q=p.suspendedLanes,Z=p.pingedLanes,de=T&268435455;if(de!==0){var De=de&~q;De!==0?R=rl(De):(Z&=de,Z!==0&&(R=rl(Z)))}else de=T&~q,de!==0?R=rl(de):Z!==0&&(R=rl(Z));if(R===0)return 0;if(y!==0&&y!==R&&(y&q)===0&&(q=R&-R,Z=y&-y,q>=Z||q===16&&(Z&4194240)!==0))return y;if((R&4)!==0&&(R|=T&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=R;0<y;)T=31-$i(y),q=1<<T,R|=p[T],y&=~q;return R}function sg(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lg(p,y){for(var T=p.suspendedLanes,R=p.pingedLanes,q=p.expirationTimes,Z=p.pendingLanes;0<Z;){var de=31-$i(Z),De=1<<de,qe=q[de];qe===-1?((De&T)===0||(De&R)!==0)&&(q[de]=sg(De,y)):qe<=y&&(p.expiredLanes|=De),Z&=~De}}function Ac(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function qd(){var p=Ol;return Ol<<=1,(Ol&4194240)===0&&(Ol=64),p}function Ch(p){for(var y=[],T=0;31>T;T++)y.push(p);return y}function Eu(p,y,T){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-$i(y),p[y]=T}function Mp(p,y){var T=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var R=p.eventTimes;for(p=p.expirationTimes;0<T;){var q=31-$i(T),Z=1<<q;y[q]=0,R[q]=-1,p[q]=-1,T&=~Z}}function kp(p,y){var T=p.entangledLanes|=y;for(p=p.entanglements;T;){var R=31-$i(T),q=1<<R;q&y|p[R]&y&&(p[R]|=y),T&=~q}}var mn=0;function Th(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var Ap,Ll,Gd,Ic,nl,Dl=!1,Br=[],Ts=null,Rl=null,Ms=null,Qi=new Map,Li=new Map,wn=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function In(p,y){switch(p){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Qi.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(y.pointerId)}}function Lo(p,y,T,R,q,Z){return p===null||p.nativeEvent!==Z?(p={blockedOn:y,domEventName:T,eventSystemFlags:R,nativeEvent:Z,targetContainers:[q]},y!==null&&(y=os(y),y!==null&&Ll(y)),p):(p.eventSystemFlags|=R,y=p.targetContainers,q!==null&&y.indexOf(q)===-1&&y.push(q),p)}function Ra(p,y,T,R,q){switch(y){case"focusin":return Ts=Lo(Ts,p,y,T,R,q),!0;case"dragenter":return Rl=Lo(Rl,p,y,T,R,q),!0;case"mouseover":return Ms=Lo(Ms,p,y,T,R,q),!0;case"pointerover":var Z=q.pointerId;return Qi.set(Z,Lo(Qi.get(Z)||null,p,y,T,R,q)),!0;case"gotpointercapture":return Z=q.pointerId,Li.set(Z,Lo(Li.get(Z)||null,p,y,T,R,q)),!0}return!1}function eo(p){var y=as(p.target);if(y!==null){var T=Bt(y);if(T!==null){if(y=T.tag,y===13){if(y=Zt(T),y!==null){p.blockedOn=y,nl(p.priority,function(){Gd(T)});return}}else if(y===3&&T.stateNode.current.memoizedState.isDehydrated){p.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Ji(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var T=kh(p.domEventName,p.eventSystemFlags,y[0],p.nativeEvent);if(T===null){T=p.nativeEvent;var R=new T.constructor(T.type,T);Xt=R,T.target.dispatchEvent(R),Xt=null}else return y=os(T),y!==null&&Ll(y),p.blockedOn=T,!1;y.shift()}return!0}function Cu(p,y,T){Ji(p)&&T.delete(y)}function jl(){Dl=!1,Ts!==null&&Ji(Ts)&&(Ts=null),Rl!==null&&Ji(Rl)&&(Rl=null),Ms!==null&&Ji(Ms)&&(Ms=null),Qi.forEach(Cu),Li.forEach(Cu)}function Zn(p,y){p.blockedOn===y&&(p.blockedOn=null,Dl||(Dl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jl)))}function Jo(p){function y(q){return Zn(q,p)}if(0<Br.length){Zn(Br[0],p);for(var T=1;T<Br.length;T++){var R=Br[T];R.blockedOn===p&&(R.blockedOn=null)}}for(Ts!==null&&Zn(Ts,p),Rl!==null&&Zn(Rl,p),Ms!==null&&Zn(Ms,p),Qi.forEach(y),Li.forEach(y),T=0;T<wn.length;T++)R=wn[T],R.blockedOn===p&&(R.blockedOn=null);for(;0<wn.length&&(T=wn[0],T.blockedOn===null);)eo(T),T.blockedOn===null&&wn.shift()}var ja=te.ReactCurrentBatchConfig,Tu=!0;function to(p,y,T,R){var q=mn,Z=ja.transition;ja.transition=null;try{mn=1,es(p,y,T,R)}finally{mn=q,ja.transition=Z}}function Mu(p,y,T,R){var q=mn,Z=ja.transition;ja.transition=null;try{mn=4,es(p,y,T,R)}finally{mn=q,ja.transition=Z}}function es(p,y,T,R){if(Tu){var q=kh(p,y,T,R);if(q===null)Vu(p,y,R,Mh,T),In(p,R);else if(Ra(q,p,y,T,R))R.stopPropagation();else if(In(p,R),y&4&&-1<Lr.indexOf(p)){for(;q!==null;){var Z=os(q);if(Z!==null&&Ap(Z),Z=kh(p,y,T,R),Z===null&&Vu(p,y,R,Mh,T),Z===q)break;q=Z}q!==null&&R.stopPropagation()}else Vu(p,y,R,null,T)}}var Mh=null;function kh(p,y,T,R){if(Mh=null,p=or(R),p=as(p),p!==null)if(y=Bt(p),y===null)p=null;else if(T=y.tag,T===13){if(p=Zt(y),p!==null)return p;p=null}else if(T===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null);return Mh=p,null}function zl(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(La()){case Yi:return 1;case Oi:return 4;case Qr:case Io:return 16;case Oo:return 536870912;default:return 16}default:return 16}}var un=null,Nl=null,Xr=null;function Vr(){if(Xr)return Xr;var p,y=Nl,T=y.length,R,q="value"in un?un.value:un.textContent,Z=q.length;for(p=0;p<T&&y[p]===q[p];p++);var de=T-p;for(R=1;R<=de&&y[T-R]===q[Z-R];R++);return Xr=q.slice(p,1<R?1-R:void 0)}function il(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function Jr(){return!0}function Oc(){return!1}function hi(p){function y(T,R,q,Z,de){this._reactName=T,this._targetInst=q,this.type=R,this.nativeEvent=Z,this.target=de,this.currentTarget=null;for(var De in p)p.hasOwnProperty(De)&&(T=p[De],this[De]=T?T(Z):Z[De]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Jr:Oc,this.isPropagationStopped=Oc,this}return yt(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),y}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=hi(ts),Lc=yt({},ts,{view:0,detail:0}),Ah=hi(Lc),Ih,Ip,Dc,ea=yt({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Dc&&(Dc&&p.type==="mousemove"?(Ih=p.screenX-Dc.screenX,Ip=p.screenY-Dc.screenY):Ip=Ih=0,Dc=p),Ih)},movementY:function(p){return"movementY"in p?p.movementY:Ip}}),rs=hi(ea),ni=yt({},ea,{dataTransfer:0}),ku=hi(ni),Op=yt({},Lc,{relatedTarget:0}),Au=hi(Op),pi=yt({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),ug=hi(pi),Lp=yt({},ts,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),cg=hi(Lp),ev=yt({},ts,{data:0}),Iu=hi(ev),Wd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oh(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Dp[p])?!!y[p]:!1}function Fl(){return Oh}var jc=yt({},Lc,{key:function(p){if(p.key){var y=Wd[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=il(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Rc[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(p){return p.type==="keypress"?il(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?il(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Di=hi(jc),hg=yt({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ou=hi(hg),Lh=yt({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),Lu=hi(Lh),tv=yt({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hd=hi(tv),rv=yt({},ea,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),zc=hi(rv),Zd=[9,13,27,32],Kd=o&&"CompositionEvent"in window,Nc=null;o&&"documentMode"in document&&(Nc=document.documentMode);var Rp=o&&"TextEvent"in window&&!Nc,Xd=o&&(!Kd||Nc&&8<Nc&&11>=Nc),Yd=" ",jp=!1;function zp(p,y){switch(p){case"keyup":return Zd.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Do=!1;function dg(p,y){switch(p){case"compositionend":return Np(y);case"keypress":return y.which!==32?null:(jp=!0,Yd);case"textInput":return p=y.data,p===Yd&&jp?null:p;default:return null}}function Fp(p,y){if(Do)return p==="compositionend"||!Kd&&zp(p,y)?(p=Vr(),Xr=Nl=un=null,Do=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Xd&&y.locale!=="ko"?null:y.data;default:return null}}var Fc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!Fc[p.type]:y==="textarea"}function Dh(p,y,T,R){sn(R),y=qc(y,"onChange"),0<y.length&&(T=new ks("onChange","change",null,T,R),p.push({event:T,listeners:y}))}var Rh=null,jh=null;function fg(p){_g(p,0)}function Bl(p){var y=ss(p);if(St(y))return p}function pg(p,y){if(p==="change")return y}var Qd=!1;if(o){var Jd;if(o){var Bc="oninput"in document;if(!Bc){var Ro=document.createElement("div");Ro.setAttribute("oninput","return;"),Bc=typeof Ro.oninput=="function"}Jd=Bc}else Jd=!1;Qd=Jd&&(!document.documentMode||9<document.documentMode)}function zh(){Rh&&(Rh.detachEvent("onpropertychange",ef),jh=Rh=null)}function ef(p){if(p.propertyName==="value"&&Bl(jh)){var y=[];Dh(y,jh,p,or(p)),yn(fg,y)}}function Vp(p,y,T){p==="focusin"?(zh(),Rh=y,jh=T,Rh.attachEvent("onpropertychange",ef)):p==="focusout"&&zh()}function $p(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Bl(jh)}function tf(p,y){if(p==="click")return Bl(y)}function Du(p,y){if(p==="input"||p==="change")return Bl(y)}function Up(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var ns=typeof Object.is=="function"?Object.is:Up;function Vc(p,y){if(ns(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var T=Object.keys(p),R=Object.keys(y);if(T.length!==R.length)return!1;for(R=0;R<T.length;R++){var q=T[R];if(!_.call(y,q)||!ns(p[q],y[q]))return!1}return!0}function mg(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function gg(p,y){var T=mg(p);p=0;for(var R;T;){if(T.nodeType===3){if(R=p+T.textContent.length,p<=y&&R>=y)return{node:T,offset:y-p};p=R}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=mg(T)}}function qp(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?qp(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function yg(){for(var p=window,y=Gr();y instanceof p.HTMLIFrameElement;){try{var T=typeof y.contentWindow.location.href=="string"}catch{T=!1}if(T)p=y.contentWindow;else break;y=Gr(p.document)}return y}function cn(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}function rf(p){var y=yg(),T=p.focusedElem,R=p.selectionRange;if(y!==T&&T&&T.ownerDocument&&qp(T.ownerDocument.documentElement,T)){if(R!==null&&cn(T)){if(y=R.start,p=R.end,p===void 0&&(p=y),"selectionStart"in T)T.selectionStart=y,T.selectionEnd=Math.min(p,T.value.length);else if(p=(y=T.ownerDocument||document)&&y.defaultView||window,p.getSelection){p=p.getSelection();var q=T.textContent.length,Z=Math.min(R.start,q);R=R.end===void 0?Z:Math.min(R.end,q),!p.extend&&Z>R&&(q=R,R=Z,Z=q),q=gg(T,Z);var de=gg(T,R);q&&de&&(p.rangeCount!==1||p.anchorNode!==q.node||p.anchorOffset!==q.offset||p.focusNode!==de.node||p.focusOffset!==de.offset)&&(y=y.createRange(),y.setStart(q.node,q.offset),p.removeAllRanges(),Z>R?(p.addRange(y),p.extend(de.node,de.offset)):(y.setEnd(de.node,de.offset),p.addRange(y)))}}for(y=[],p=T;p=p.parentNode;)p.nodeType===1&&y.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<y.length;T++)p=y[T],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var nf=o&&"documentMode"in document&&11>=document.documentMode,al=null,Nh=null,is=null,Ru=!1;function ju(p,y,T){var R=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Ru||al==null||al!==Gr(R)||(R=al,"selectionStart"in R&&cn(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),is&&Vc(is,R)||(is=R,R=qc(Nh,"onSelect"),0<R.length&&(y=new ks("onSelect","select",null,y,T),p.push({event:y,listeners:R}),y.target=al)))}function za(p,y){var T={};return T[p.toLowerCase()]=y.toLowerCase(),T["Webkit"+p]="webkit"+y,T["Moz"+p]="moz"+y,T}var zu={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},af={},of={};o&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function As(p){if(af[p])return af[p];if(!zu[p])return p;var y=zu[p],T;for(T in y)if(y.hasOwnProperty(T)&&T in of)return af[p]=y[T];return p}var Fh=As("animationend"),Bh=As("animationiteration"),$c=As("animationstart"),Vh=As("transitionend"),Gp=new Map,Nu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(p,y){Gp.set(p,y),h(y,[p])}for(var sf=0;sf<Nu.length;sf++){var $h=Nu[sf],Hr=$h.toLowerCase(),lf=$h[0].toUpperCase()+$h.slice(1);Po(Hr,"on"+lf)}Po(Fh,"onAnimationEnd"),Po(Bh,"onAnimationIteration"),Po($c,"onAnimationStart"),Po("dblclick","onDoubleClick"),Po("focusin","onFocus"),Po("focusout","onBlur"),Po(Vh,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uh));function Uc(p,y,T){var R=p.type||"unknown-event";p.currentTarget=T,xt(R,y,void 0,p),p.currentTarget=null}function _g(p,y){y=(y&4)!==0;for(var T=0;T<p.length;T++){var R=p[T],q=R.event;R=R.listeners;e:{var Z=void 0;if(y)for(var de=R.length-1;0<=de;de--){var De=R[de],qe=De.instance,vt=De.currentTarget;if(De=De.listener,qe!==Z&&q.isPropagationStopped())break e;Uc(q,De,vt),Z=qe}else for(de=0;de<R.length;de++){if(De=R[de],qe=De.instance,vt=De.currentTarget,De=De.listener,qe!==Z&&q.isPropagationStopped())break e;Uc(q,De,vt),Z=qe}}}if(Gt)throw p=cr,Gt=!1,cr=null,p}function ii(p,y){var T=y[qu];T===void 0&&(T=y[qu]=new Set);var R=p+"__bubble";T.has(R)||(Bu(y,p,2,!1),T.add(R))}function uf(p,y,T){var R=0;y&&(R|=4),Bu(T,p,R,y)}var cf="_reactListening"+Math.random().toString(36).slice(2);function Fu(p){if(!p[cf]){p[cf]=!0,n.forEach(function(T){T!=="selectionchange"&&(vg.has(T)||uf(T,!1,p),uf(T,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[cf]||(y[cf]=!0,uf("selectionchange",!1,y))}}function Bu(p,y,T,R){switch(zl(y)){case 1:var q=to;break;case 4:q=Mu;break;default:q=es}T=q.bind(null,y,T,p),q=void 0,!ur||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(q=!0),R?q!==void 0?p.addEventListener(y,T,{capture:!0,passive:q}):p.addEventListener(y,T,!0):q!==void 0?p.addEventListener(y,T,{passive:q}):p.addEventListener(y,T,!1)}function Vu(p,y,T,R,q){var Z=R;if((y&1)===0&&(y&2)===0&&R!==null)e:for(;;){if(R===null)return;var de=R.tag;if(de===3||de===4){var De=R.stateNode.containerInfo;if(De===q||De.nodeType===8&&De.parentNode===q)break;if(de===4)for(de=R.return;de!==null;){var qe=de.tag;if((qe===3||qe===4)&&(qe=de.stateNode.containerInfo,qe===q||qe.nodeType===8&&qe.parentNode===q))return;de=de.return}for(;De!==null;){if(de=as(De),de===null)return;if(qe=de.tag,qe===5||qe===6){R=Z=de;continue e}De=De.parentNode}}R=R.return}yn(function(){var vt=Z,qt=or(T),Ht=[];e:{var Ut=Gp.get(p);if(Ut!==void 0){var pr=ks,xr=p;switch(p){case"keypress":if(il(T)===0)break e;case"keydown":case"keyup":pr=Di;break;case"focusin":xr="focus",pr=Au;break;case"focusout":xr="blur",pr=Au;break;case"beforeblur":case"afterblur":pr=Au;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pr=rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pr=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pr=Lu;break;case Fh:case Bh:case $c:pr=ug;break;case Vh:pr=Hd;break;case"scroll":pr=Ah;break;case"wheel":pr=zc;break;case"copy":case"cut":case"paste":pr=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pr=Ou}var Pr=(y&4)!==0,Ei=!Pr&&p==="scroll",lt=Pr?Ut!==null?Ut+"Capture":null:Ut;Pr=[];for(var He=vt,ft;He!==null;){ft=He;var Qt=ft.stateNode;if(ft.tag===5&&Qt!==null&&(ft=Qt,lt!==null&&(Qt=ln(He,lt),Qt!=null&&Pr.push(Vl(He,Qt,ft)))),Ei)break;He=He.return}0<Pr.length&&(Ut=new pr(Ut,xr,null,T,qt),Ht.push({event:Ut,listeners:Pr}))}}if((y&7)===0){e:{if(Ut=p==="mouseover"||p==="pointerover",pr=p==="mouseout"||p==="pointerout",Ut&&T!==Xt&&(xr=T.relatedTarget||T.fromElement)&&(as(xr)||xr[jo]))break e;if((pr||Ut)&&(Ut=qt.window===qt?qt:(Ut=qt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,pr?(xr=T.relatedTarget||T.toElement,pr=vt,xr=xr?as(xr):null,xr!==null&&(Ei=Bt(xr),xr!==Ei||xr.tag!==5&&xr.tag!==6)&&(xr=null)):(pr=null,xr=vt),pr!==xr)){if(Pr=rs,Qt="onMouseLeave",lt="onMouseEnter",He="mouse",(p==="pointerout"||p==="pointerover")&&(Pr=Ou,Qt="onPointerLeave",lt="onPointerEnter",He="pointer"),Ei=pr==null?Ut:ss(pr),ft=xr==null?Ut:ss(xr),Ut=new Pr(Qt,He+"leave",pr,T,qt),Ut.target=Ei,Ut.relatedTarget=ft,Qt=null,as(qt)===vt&&(Pr=new Pr(lt,He+"enter",xr,T,qt),Pr.target=ft,Pr.relatedTarget=Ei,Qt=Pr),Ei=Qt,pr&&xr)t:{for(Pr=pr,lt=xr,He=0,ft=Pr;ft;ft=$l(ft))He++;for(ft=0,Qt=lt;Qt;Qt=$l(Qt))ft++;for(;0<He-ft;)Pr=$l(Pr),He--;for(;0<ft-He;)lt=$l(lt),ft--;for(;He--;){if(Pr===lt||lt!==null&&Pr===lt.alternate)break t;Pr=$l(Pr),lt=$l(lt)}Pr=null}else Pr=null;pr!==null&&qh(Ht,Ut,pr,Pr,!1),xr!==null&&Ei!==null&&qh(Ht,Ei,xr,Pr,!0)}}e:{if(Ut=vt?ss(vt):window,pr=Ut.nodeName&&Ut.nodeName.toLowerCase(),pr==="select"||pr==="input"&&Ut.type==="file")var kr=pg;else if(Bp(Ut))if(Qd)kr=Du;else{kr=$p;var Rr=Vp}else(pr=Ut.nodeName)&&pr.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(kr=tf);if(kr&&(kr=kr(p,vt))){Dh(Ht,kr,T,qt);break e}Rr&&Rr(p,Ut,vt),p==="focusout"&&(Rr=Ut._wrapperState)&&Rr.controlled&&Ut.type==="number"&&Ii(Ut,"number",Ut.value)}switch(Rr=vt?ss(vt):window,p){case"focusin":(Bp(Rr)||Rr.contentEditable==="true")&&(al=Rr,Nh=vt,is=null);break;case"focusout":is=Nh=al=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,ju(Ht,T,qt);break;case"selectionchange":if(nf)break;case"keydown":case"keyup":ju(Ht,T,qt)}var Nr;if(Kd)e:{switch(p){case"compositionstart":var qr="onCompositionStart";break e;case"compositionend":qr="onCompositionEnd";break e;case"compositionupdate":qr="onCompositionUpdate";break e}qr=void 0}else Do?zp(p,T)&&(qr="onCompositionEnd"):p==="keydown"&&T.keyCode===229&&(qr="onCompositionStart");qr&&(Xd&&T.locale!=="ko"&&(Do||qr!=="onCompositionStart"?qr==="onCompositionEnd"&&Do&&(Nr=Vr()):(un=qt,Nl="value"in un?un.value:un.textContent,Do=!0)),Rr=qc(vt,qr),0<Rr.length&&(qr=new Iu(qr,p,null,T,qt),Ht.push({event:qr,listeners:Rr}),Nr?qr.data=Nr:(Nr=Np(T),Nr!==null&&(qr.data=Nr)))),(Nr=Rp?dg(p,T):Fp(p,T))&&(vt=qc(vt,"onBeforeInput"),0<vt.length&&(qt=new Iu("onBeforeInput","beforeinput",null,T,qt),Ht.push({event:qt,listeners:vt}),qt.data=Nr))}_g(Ht,y)})}function Vl(p,y,T){return{instance:p,listener:y,currentTarget:T}}function qc(p,y){for(var T=y+"Capture",R=[];p!==null;){var q=p,Z=q.stateNode;q.tag===5&&Z!==null&&(q=Z,Z=ln(p,T),Z!=null&&R.unshift(Vl(p,Z,q)),Z=ln(p,y),Z!=null&&R.push(Vl(p,Z,q))),p=p.return}return R}function $l(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function qh(p,y,T,R,q){for(var Z=y._reactName,de=[];T!==null&&T!==R;){var De=T,qe=De.alternate,vt=De.stateNode;if(qe!==null&&qe===R)break;De.tag===5&&vt!==null&&(De=vt,q?(qe=ln(T,Z),qe!=null&&de.unshift(Vl(T,qe,De))):q||(qe=ln(T,Z),qe!=null&&de.push(Vl(T,qe,De)))),T=T.return}de.length!==0&&p.push({event:y,listeners:de})}var hf=/\r\n?/g,Ul=/\u0000|\uFFFD/g;function ql(p){return(typeof p=="string"?p:""+p).replace(hf,`
`).replace(Ul,"")}function Gc(p,y,T){if(y=ql(y),ql(p)!==y&&T)throw Error(r(425))}function df(){}var $u=null,Wp=null;function ff(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(p){return Hp.resolve(null).then(p).catch(Gh)}:Uu;function Gh(p){setTimeout(function(){throw p})}function Wc(p,y){var T=y,R=0;do{var q=T.nextSibling;if(p.removeChild(T),q&&q.nodeType===8)if(T=q.data,T==="/$"){if(R===0){p.removeChild(q),Jo(y);return}R--}else T!=="$"&&T!=="$?"&&T!=="$!"||R++;T=q}while(T);Jo(y)}function ol(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return p}function Zp(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="$"||T==="$!"||T==="$?"){if(y===0)return p;y--}else T==="/$"&&y++}p=p.previousSibling}return null}var Un=Math.random().toString(36).slice(2),_a="__reactFiber$"+Un,fa="__reactProps$"+Un,jo="__reactContainer$"+Un,qu="__reactEvents$"+Un,mf="__reactListeners$"+Un,Gl="__reactHandles$"+Un;function as(p){var y=p[_a];if(y)return y;for(var T=p.parentNode;T;){if(y=T[jo]||T[_a]){if(T=y.alternate,y.child!==null||T!==null&&T.child!==null)for(p=Zp(p);p!==null;){if(T=p[_a])return T;p=Zp(p)}return y}p=T,T=p.parentNode}return null}function os(p){return p=p[_a]||p[jo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function ss(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(r(33))}function Wh(p){return p[fa]||null}var gf=[],Gu=-1;function sl(p){return{current:p}}function Kn(p){0>Gu||(p.current=gf[Gu],gf[Gu]=null,Gu--)}function gn(p,y){Gu++,gf[Gu]=p.current,p.current=y}var Is={},ta=sl(Is),ra=sl(!1),Wl=Is;function Hl(p,y){var T=p.type.contextTypes;if(!T)return Is;var R=p.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===y)return R.__reactInternalMemoizedMaskedChildContext;var q={},Z;for(Z in T)q[Z]=y[Z];return R&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=q),q}function xa(p){return p=p.childContextTypes,p!=null}function Hh(){Kn(ra),Kn(ta)}function yf(p,y,T){if(ta.current!==Is)throw Error(r(168));gn(ta,y),gn(ra,T)}function vf(p,y,T){var R=p.stateNode;if(y=y.childContextTypes,typeof R.getChildContext!="function")return T;R=R.getChildContext();for(var q in R)if(!(q in y))throw Error(r(108,Ft(p)||"Unknown",q));return yt({},T,R)}function ls(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Is,Wl=ta.current,gn(ta,p),gn(ra,ra.current),!0}function Kp(p,y,T){var R=p.stateNode;if(!R)throw Error(r(169));T?(p=vf(p,y,Wl),R.__reactInternalMemoizedMergedChildContext=p,Kn(ra),Kn(ta),gn(ta,p)):Kn(ra),gn(ra,T)}var Ri=null,ro=!1,_f=!1;function zo(p){Ri===null?Ri=[p]:Ri.push(p)}function nv(p){ro=!0,zo(p)}function No(){if(!_f&&Ri!==null){_f=!0;var p=0,y=mn;try{var T=Ri;for(mn=1;p<T.length;p++){var R=T[p];do R=R(!0);while(R!==null)}Ri=null,ro=!1}catch(q){throw Ri!==null&&(Ri=Ri.slice(p+1)),ri(Yi,No),q}finally{mn=y,_f=!1}}return null}var Os=[],mi=0,Zl=null,Zh=0,Fo=[],Bo=0,Vo=null,no=1,Ui="";function Jt(p,y){Os[mi++]=Zh,Os[mi++]=Zl,Zl=p,Zh=y}function Kh(p,y,T){Fo[Bo++]=no,Fo[Bo++]=Ui,Fo[Bo++]=Vo,Vo=p;var R=no;p=Ui;var q=32-$i(R)-1;R&=~(1<<q),T+=1;var Z=32-$i(y)+q;if(30<Z){var de=q-q%5;Z=(R&(1<<de)-1).toString(32),R>>=de,q-=de,no=1<<32-$i(y)+q|T<<q|R,Ui=Z+p}else no=1<<Z|T<<q|R,Ui=p}function Xh(p){p.return!==null&&(Jt(p,1),Kh(p,1,0))}function Kl(p){for(;p===Zl;)Zl=Os[--mi],Os[mi]=null,Zh=Os[--mi],Os[mi]=null;for(;p===Vo;)Vo=Fo[--Bo],Fo[Bo]=null,Ui=Fo[--Bo],Fo[Bo]=null,no=Fo[--Bo],Fo[Bo]=null}var pa=null,ma=null,Xn=!1,Na=null;function xf(p,y){var T=qs(5,null,null,0);T.elementType="DELETED",T.stateNode=y,T.return=p,y=p.deletions,y===null?(p.deletions=[T],p.flags|=16):y.push(T)}function Xp(p,y){switch(p.tag){case 5:var T=p.type;return y=y.nodeType!==1||T.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(p.stateNode=y,pa=p,ma=ol(y.firstChild),!0):!1;case 6:return y=p.pendingProps===""||y.nodeType!==3?null:y,y!==null?(p.stateNode=y,pa=p,ma=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(T=Vo!==null?{id:no,overflow:Ui}:null,p.memoizedState={dehydrated:y,treeContext:T,retryLane:1073741824},T=qs(18,null,null,0),T.stateNode=y,T.return=p,p.child=T,pa=p,ma=null,!0):!1;default:return!1}}function Xl(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Yp(p){if(Xn){var y=ma;if(y){var T=y;if(!Xp(p,y)){if(Xl(p))throw Error(r(418));y=ol(T.nextSibling);var R=pa;y&&Xp(p,y)?xf(R,T):(p.flags=p.flags&-4097|2,Xn=!1,pa=p)}}else{if(Xl(p))throw Error(r(418));p.flags=p.flags&-4097|2,Xn=!1,pa=p}}}function Yh(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;pa=p}function Wu(p){if(p!==pa)return!1;if(!Xn)return Yh(p),Xn=!0,!1;var y;if((y=p.tag!==3)&&!(y=p.tag!==5)&&(y=p.type,y=y!=="head"&&y!=="body"&&!ff(p.type,p.memoizedProps)),y&&(y=ma)){if(Xl(p))throw Qp(),Error(r(418));for(;y;)xf(p,y),y=ol(y.nextSibling)}if(Yh(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="/$"){if(y===0){ma=ol(p.nextSibling);break e}y--}else T!=="$"&&T!=="$!"&&T!=="$?"||y++}p=p.nextSibling}ma=null}}else ma=pa?ol(p.stateNode.nextSibling):null;return!0}function Qp(){for(var p=ma;p;)p=ol(p.nextSibling)}function Yl(){ma=pa=null,Xn=!1}function bf(p){Na===null?Na=[p]:Na.push(p)}var Jp=te.ReactCurrentBatchConfig;function Hu(p,y,T){if(p=T.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(r(309));var R=T.stateNode}if(!R)throw Error(r(147,p));var q=R,Z=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===Z?y.ref:(y=function(de){var De=q.refs;de===null?delete De[Z]:De[Z]=de},y._stringRef=Z,y)}if(typeof p!="string")throw Error(r(284));if(!T._owner)throw Error(r(290,p))}return p}function Qh(p,y){throw p=Object.prototype.toString.call(y),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function ll(p){var y=p._init;return y(p._payload)}function Mn(p){function y(lt,He){if(p){var ft=lt.deletions;ft===null?(lt.deletions=[He],lt.flags|=16):ft.push(He)}}function T(lt,He){if(!p)return null;for(;He!==null;)y(lt,He),He=He.sibling;return null}function R(lt,He){for(lt=new Map;He!==null;)He.key!==null?lt.set(He.key,He):lt.set(He.index,He),He=He.sibling;return lt}function q(lt,He){return lt=sc(lt,He),lt.index=0,lt.sibling=null,lt}function Z(lt,He,ft){return lt.index=ft,p?(ft=lt.alternate,ft!==null?(ft=ft.index,ft<He?(lt.flags|=2,He):ft):(lt.flags|=2,He)):(lt.flags|=1048576,He)}function de(lt){return p&&lt.alternate===null&&(lt.flags|=2),lt}function De(lt,He,ft,Qt){return He===null||He.tag!==6?(He=Og(ft,lt.mode,Qt),He.return=lt,He):(He=q(He,ft),He.return=lt,He)}function qe(lt,He,ft,Qt){var kr=ft.type;return kr===ne?qt(lt,He,ft.props.children,Qt,ft.key):He!==null&&(He.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===gt&&ll(kr)===He.type)?(Qt=q(He,ft.props),Qt.ref=Hu(lt,He,ft),Qt.return=lt,Qt):(Qt=Ff(ft.type,ft.key,ft.props,null,lt.mode,Qt),Qt.ref=Hu(lt,He,ft),Qt.return=lt,Qt)}function vt(lt,He,ft,Qt){return He===null||He.tag!==4||He.stateNode.containerInfo!==ft.containerInfo||He.stateNode.implementation!==ft.implementation?(He=xv(ft,lt.mode,Qt),He.return=lt,He):(He=q(He,ft.children||[]),He.return=lt,He)}function qt(lt,He,ft,Qt,kr){return He===null||He.tag!==7?(He=sh(ft,lt.mode,Qt,kr),He.return=lt,He):(He=q(He,ft),He.return=lt,He)}function Ht(lt,He,ft){if(typeof He=="string"&&He!==""||typeof He=="number")return He=Og(""+He,lt.mode,ft),He.return=lt,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case ae:return ft=Ff(He.type,He.key,He.props,null,lt.mode,ft),ft.ref=Hu(lt,null,He),ft.return=lt,ft;case he:return He=xv(He,lt.mode,ft),He.return=lt,He;case gt:var Qt=He._init;return Ht(lt,Qt(He._payload),ft)}if(Be(He)||Qe(He))return He=sh(He,lt.mode,ft,null),He.return=lt,He;Qh(lt,He)}return null}function Ut(lt,He,ft,Qt){var kr=He!==null?He.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return kr!==null?null:De(lt,He,""+ft,Qt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ae:return ft.key===kr?qe(lt,He,ft,Qt):null;case he:return ft.key===kr?vt(lt,He,ft,Qt):null;case gt:return kr=ft._init,Ut(lt,He,kr(ft._payload),Qt)}if(Be(ft)||Qe(ft))return kr!==null?null:qt(lt,He,ft,Qt,null);Qh(lt,ft)}return null}function pr(lt,He,ft,Qt,kr){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return lt=lt.get(ft)||null,De(He,lt,""+Qt,kr);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case ae:return lt=lt.get(Qt.key===null?ft:Qt.key)||null,qe(He,lt,Qt,kr);case he:return lt=lt.get(Qt.key===null?ft:Qt.key)||null,vt(He,lt,Qt,kr);case gt:var Rr=Qt._init;return pr(lt,He,ft,Rr(Qt._payload),kr)}if(Be(Qt)||Qe(Qt))return lt=lt.get(ft)||null,qt(He,lt,Qt,kr,null);Qh(He,Qt)}return null}function xr(lt,He,ft,Qt){for(var kr=null,Rr=null,Nr=He,qr=He=0,Pa=null;Nr!==null&&qr<ft.length;qr++){Nr.index>qr?(Pa=Nr,Nr=null):Pa=Nr.sibling;var kn=Ut(lt,Nr,ft[qr],Qt);if(kn===null){Nr===null&&(Nr=Pa);break}p&&Nr&&kn.alternate===null&&y(lt,Nr),He=Z(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn,Nr=Pa}if(qr===ft.length)return T(lt,Nr),Xn&&Jt(lt,qr),kr;if(Nr===null){for(;qr<ft.length;qr++)Nr=Ht(lt,ft[qr],Qt),Nr!==null&&(He=Z(Nr,He,qr),Rr===null?kr=Nr:Rr.sibling=Nr,Rr=Nr);return Xn&&Jt(lt,qr),kr}for(Nr=R(lt,Nr);qr<ft.length;qr++)Pa=pr(Nr,lt,qr,ft[qr],Qt),Pa!==null&&(p&&Pa.alternate!==null&&Nr.delete(Pa.key===null?qr:Pa.key),He=Z(Pa,He,qr),Rr===null?kr=Pa:Rr.sibling=Pa,Rr=Pa);return p&&Nr.forEach(function(lh){return y(lt,lh)}),Xn&&Jt(lt,qr),kr}function Pr(lt,He,ft,Qt){var kr=Qe(ft);if(typeof kr!="function")throw Error(r(150));if(ft=kr.call(ft),ft==null)throw Error(r(151));for(var Rr=kr=null,Nr=He,qr=He=0,Pa=null,kn=ft.next();Nr!==null&&!kn.done;qr++,kn=ft.next()){Nr.index>qr?(Pa=Nr,Nr=null):Pa=Nr.sibling;var lh=Ut(lt,Nr,kn.value,Qt);if(lh===null){Nr===null&&(Nr=Pa);break}p&&Nr&&lh.alternate===null&&y(lt,Nr),He=Z(lh,He,qr),Rr===null?kr=lh:Rr.sibling=lh,Rr=lh,Nr=Pa}if(kn.done)return T(lt,Nr),Xn&&Jt(lt,qr),kr;if(Nr===null){for(;!kn.done;qr++,kn=ft.next())kn=Ht(lt,kn.value,Qt),kn!==null&&(He=Z(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn);return Xn&&Jt(lt,qr),kr}for(Nr=R(lt,Nr);!kn.done;qr++,kn=ft.next())kn=pr(Nr,lt,qr,kn.value,Qt),kn!==null&&(p&&kn.alternate!==null&&Nr.delete(kn.key===null?qr:kn.key),He=Z(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn);return p&&Nr.forEach(function(D0){return y(lt,D0)}),Xn&&Jt(lt,qr),kr}function Ei(lt,He,ft,Qt){if(typeof ft=="object"&&ft!==null&&ft.type===ne&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ae:e:{for(var kr=ft.key,Rr=He;Rr!==null;){if(Rr.key===kr){if(kr=ft.type,kr===ne){if(Rr.tag===7){T(lt,Rr.sibling),He=q(Rr,ft.props.children),He.return=lt,lt=He;break e}}else if(Rr.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===gt&&ll(kr)===Rr.type){T(lt,Rr.sibling),He=q(Rr,ft.props),He.ref=Hu(lt,Rr,ft),He.return=lt,lt=He;break e}T(lt,Rr);break}else y(lt,Rr);Rr=Rr.sibling}ft.type===ne?(He=sh(ft.props.children,lt.mode,Qt,ft.key),He.return=lt,lt=He):(Qt=Ff(ft.type,ft.key,ft.props,null,lt.mode,Qt),Qt.ref=Hu(lt,He,ft),Qt.return=lt,lt=Qt)}return de(lt);case he:e:{for(Rr=ft.key;He!==null;){if(He.key===Rr)if(He.tag===4&&He.stateNode.containerInfo===ft.containerInfo&&He.stateNode.implementation===ft.implementation){T(lt,He.sibling),He=q(He,ft.children||[]),He.return=lt,lt=He;break e}else{T(lt,He);break}else y(lt,He);He=He.sibling}He=xv(ft,lt.mode,Qt),He.return=lt,lt=He}return de(lt);case gt:return Rr=ft._init,Ei(lt,He,Rr(ft._payload),Qt)}if(Be(ft))return xr(lt,He,ft,Qt);if(Qe(ft))return Pr(lt,He,ft,Qt);Qh(lt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,He!==null&&He.tag===6?(T(lt,He.sibling),He=q(He,ft),He.return=lt,lt=He):(T(lt,He),He=Og(ft,lt.mode,Qt),He.return=lt,lt=He),de(lt)):T(lt,He)}return Ei}var Hc=Mn(!0),Zc=Mn(!1),Zu=sl(null),Ku=null,Ql=null,wf=null;function Sf(){wf=Ql=Ku=null}function Pf(p){var y=Zu.current;Kn(Zu),p._currentValue=y}function Eo(p,y,T){for(;p!==null;){var R=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,R!==null&&(R.childLanes|=y)):R!==null&&(R.childLanes&y)!==y&&(R.childLanes|=y),p===T)break;p=p.return}}function Ls(p,y){Ku=p,wf=Ql=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(Ba=!0),p.firstContext=null)}function ar(p){var y=p._currentValue;if(wf!==p)if(p={context:p,memoizedValue:y,next:null},Ql===null){if(Ku===null)throw Error(r(308));Ql=p,Ku.dependencies={lanes:0,firstContext:p}}else Ql=Ql.next=p;return y}var gr=null;function Xu(p){gr===null?gr=[p]:gr.push(p)}function Jh(p,y,T,R){var q=y.interleaved;return q===null?(T.next=T,Xu(y)):(T.next=q.next,q.next=T),y.interleaved=T,$o(p,R)}function $o(p,y){p.lanes|=y;var T=p.alternate;for(T!==null&&(T.lanes|=y),T=p,p=p.return;p!==null;)p.childLanes|=y,T=p.alternate,T!==null&&(T.childLanes|=y),T=p,p=p.return;return T.tag===3?T.stateNode:null}var xi=!1;function io(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ef(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Ds(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function Jl(p,y,T){var R=p.updateQueue;if(R===null)return null;if(R=R.shared,(Pn&2)!==0){var q=R.pending;return q===null?y.next=y:(y.next=q.next,q.next=y),R.pending=y,$o(p,T)}return q=R.interleaved,q===null?(y.next=y,Xu(R)):(y.next=q.next,q.next=y),R.interleaved=y,$o(p,T)}function Cf(p,y,T){if(y=y.updateQueue,y!==null&&(y=y.shared,(T&4194240)!==0)){var R=y.lanes;R&=p.pendingLanes,T|=R,y.lanes=T,kp(p,T)}}function Kc(p,y){var T=p.updateQueue,R=p.alternate;if(R!==null&&(R=R.updateQueue,T===R)){var q=null,Z=null;if(T=T.firstBaseUpdate,T!==null){do{var de={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};Z===null?q=Z=de:Z=Z.next=de,T=T.next}while(T!==null);Z===null?q=Z=y:Z=Z.next=y}else q=Z=y;T={baseState:R.baseState,firstBaseUpdate:q,lastBaseUpdate:Z,shared:R.shared,effects:R.effects},p.updateQueue=T;return}p=T.lastBaseUpdate,p===null?T.firstBaseUpdate=y:p.next=y,T.lastBaseUpdate=y}function qn(p,y,T,R){var q=p.updateQueue;xi=!1;var Z=q.firstBaseUpdate,de=q.lastBaseUpdate,De=q.shared.pending;if(De!==null){q.shared.pending=null;var qe=De,vt=qe.next;qe.next=null,de===null?Z=vt:de.next=vt,de=qe;var qt=p.alternate;qt!==null&&(qt=qt.updateQueue,De=qt.lastBaseUpdate,De!==de&&(De===null?qt.firstBaseUpdate=vt:De.next=vt,qt.lastBaseUpdate=qe))}if(Z!==null){var Ht=q.baseState;de=0,qt=vt=qe=null,De=Z;do{var Ut=De.lane,pr=De.eventTime;if((R&Ut)===Ut){qt!==null&&(qt=qt.next={eventTime:pr,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var xr=p,Pr=De;switch(Ut=y,pr=T,Pr.tag){case 1:if(xr=Pr.payload,typeof xr=="function"){Ht=xr.call(pr,Ht,Ut);break e}Ht=xr;break e;case 3:xr.flags=xr.flags&-65537|128;case 0:if(xr=Pr.payload,Ut=typeof xr=="function"?xr.call(pr,Ht,Ut):xr,Ut==null)break e;Ht=yt({},Ht,Ut);break e;case 2:xi=!0}}De.callback!==null&&De.lane!==0&&(p.flags|=64,Ut=q.effects,Ut===null?q.effects=[De]:Ut.push(De))}else pr={eventTime:pr,lane:Ut,tag:De.tag,payload:De.payload,callback:De.callback,next:null},qt===null?(vt=qt=pr,qe=Ht):qt=qt.next=pr,de|=Ut;if(De=De.next,De===null){if(De=q.shared.pending,De===null)break;Ut=De,De=Ut.next,Ut.next=null,q.lastBaseUpdate=Ut,q.shared.pending=null}}while(!0);if(qt===null&&(qe=Ht),q.baseState=qe,q.firstBaseUpdate=vt,q.lastBaseUpdate=qt,y=q.shared.interleaved,y!==null){q=y;do de|=q.lane,q=q.next;while(q!==y)}else Z===null&&(q.shared.lanes=0);Jc|=de,p.lanes=de,p.memoizedState=Ht}}function gi(p,y,T){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var R=p[y],q=R.callback;if(q!==null){if(R.callback=null,R=T,typeof q!="function")throw Error(r(191,q));q.call(R)}}}var us={},ao=sl(us),eu=sl(us),Yu=sl(us);function Rs(p){if(p===us)throw Error(r(174));return p}function ed(p,y){switch(gn(Yu,y),gn(eu,p),gn(ao,us),p=y.nodeType,p){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:ue(null,"");break;default:p=p===8?y.parentNode:y,y=p.namespaceURI||null,p=p.tagName,y=ue(y,p)}Kn(ao),gn(ao,y)}function js(){Kn(ao),Kn(eu),Kn(Yu)}function zs(p){Rs(Yu.current);var y=Rs(ao.current),T=ue(y,p.type);y!==T&&(gn(eu,p),gn(ao,T))}function Xc(p){eu.current===p&&(Kn(ao),Kn(eu))}var Gn=sl(0);function Qu(p){for(var y=p;y!==null;){if(y.tag===13){var T=y.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Ju=[];function td(){for(var p=0;p<Ju.length;p++)Ju[p]._workInProgressVersionPrimary=null;Ju.length=0}var ul=te.ReactCurrentDispatcher,cl=te.ReactCurrentBatchConfig,hl=0,Wn=null,ai=null,ji=null,ec=!1,tu=!1,tc=0,w=0;function i(){throw Error(r(321))}function c(p,y){if(y===null)return!1;for(var T=0;T<y.length&&T<p.length;T++)if(!ns(p[T],y[T]))return!1;return!0}function m(p,y,T,R,q,Z){if(hl=Z,Wn=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,ul.current=p===null||p.memoizedState===null?oi:na,p=T(R,q),tu){Z=0;do{if(tu=!1,tc=0,25<=Z)throw Error(r(301));Z+=1,ji=ai=null,y.updateQueue=null,ul.current=Si,p=T(R,q)}while(tu)}if(ul.current=Jn,y=ai!==null&&ai.next!==null,hl=0,ji=ai=Wn=null,ec=!1,y)throw Error(r(300));return p}function v(){var p=tc!==0;return tc=0,p}function E(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?Wn.memoizedState=ji=p:ji=ji.next=p,ji}function k(){if(ai===null){var p=Wn.alternate;p=p!==null?p.memoizedState:null}else p=ai.next;var y=ji===null?Wn.memoizedState:ji.next;if(y!==null)ji=y,ai=p;else{if(p===null)throw Error(r(310));ai=p,p={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},ji===null?Wn.memoizedState=ji=p:ji=ji.next=p}return ji}function D(p,y){return typeof y=="function"?y(p):y}function N(p){var y=k(),T=y.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=p;var R=ai,q=R.baseQueue,Z=T.pending;if(Z!==null){if(q!==null){var de=q.next;q.next=Z.next,Z.next=de}R.baseQueue=q=Z,T.pending=null}if(q!==null){Z=q.next,R=R.baseState;var De=de=null,qe=null,vt=Z;do{var qt=vt.lane;if((hl&qt)===qt)qe!==null&&(qe=qe.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),R=vt.hasEagerState?vt.eagerState:p(R,vt.action);else{var Ht={lane:qt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};qe===null?(De=qe=Ht,de=R):qe=qe.next=Ht,Wn.lanes|=qt,Jc|=qt}vt=vt.next}while(vt!==null&&vt!==Z);qe===null?de=R:qe.next=De,ns(R,y.memoizedState)||(Ba=!0),y.memoizedState=R,y.baseState=de,y.baseQueue=qe,T.lastRenderedState=R}if(p=T.interleaved,p!==null){q=p;do Z=q.lane,Wn.lanes|=Z,Jc|=Z,q=q.next;while(q!==p)}else q===null&&(T.lanes=0);return[y.memoizedState,T.dispatch]}function U(p){var y=k(),T=y.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=p;var R=T.dispatch,q=T.pending,Z=y.memoizedState;if(q!==null){T.pending=null;var de=q=q.next;do Z=p(Z,de.action),de=de.next;while(de!==q);ns(Z,y.memoizedState)||(Ba=!0),y.memoizedState=Z,y.baseQueue===null&&(y.baseState=Z),T.lastRenderedState=Z}return[Z,R]}function W(){}function J(p,y){var T=Wn,R=k(),q=y(),Z=!ns(R.memoizedState,q);if(Z&&(R.memoizedState=q,Ba=!0),R=R.queue,Te(ce.bind(null,T,R,p),[p]),R.getSnapshot!==y||Z||ji!==null&&ji.memoizedState.tag&1){if(T.flags|=2048,we(9,oe.bind(null,T,R,q,y),void 0,null),Sa===null)throw Error(r(349));(hl&30)!==0||Y(T,y,q)}return q}function Y(p,y,T){p.flags|=16384,p={getSnapshot:y,value:T},y=Wn.updateQueue,y===null?(y={lastEffect:null,stores:null},Wn.updateQueue=y,y.stores=[p]):(T=y.stores,T===null?y.stores=[p]:T.push(p))}function oe(p,y,T,R){y.value=T,y.getSnapshot=R,ye(y)&&_e(p)}function ce(p,y,T){return T(function(){ye(y)&&_e(p)})}function ye(p){var y=p.getSnapshot;p=p.value;try{var T=y();return!ns(p,T)}catch{return!0}}function _e(p){var y=$o(p,1);y!==null&&vl(y,p,1,-1)}function ve(p){var y=E();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:p},y.queue=p,p=p.dispatch=Yn.bind(null,Wn,p),[y.memoizedState,p]}function we(p,y,T,R){return p={tag:p,create:y,destroy:T,deps:R,next:null},y=Wn.updateQueue,y===null?(y={lastEffect:null,stores:null},Wn.updateQueue=y,y.lastEffect=p.next=p):(T=y.lastEffect,T===null?y.lastEffect=p.next=p:(R=T.next,T.next=p,p.next=R,y.lastEffect=p)),p}function Le(){return k().memoizedState}function Se(p,y,T,R){var q=E();Wn.flags|=p,q.memoizedState=we(1|y,T,void 0,R===void 0?null:R)}function ke(p,y,T,R){var q=k();R=R===void 0?null:R;var Z=void 0;if(ai!==null){var de=ai.memoizedState;if(Z=de.destroy,R!==null&&c(R,de.deps)){q.memoizedState=we(y,T,Z,R);return}}Wn.flags|=p,q.memoizedState=we(1|y,T,Z,R)}function Fe(p,y){return Se(8390656,8,p,y)}function Te(p,y){return ke(2048,8,p,y)}function Ge(p,y){return ke(4,2,p,y)}function ht(p,y){return ke(4,4,p,y)}function at(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function ot(p,y,T){return T=T!=null?T.concat([p]):null,ke(4,4,at.bind(null,y,p),T)}function st(){}function Nt(p,y){var T=k();y=y===void 0?null:y;var R=T.memoizedState;return R!==null&&y!==null&&c(y,R[1])?R[0]:(T.memoizedState=[p,y],p)}function Vt(p,y){var T=k();y=y===void 0?null:y;var R=T.memoizedState;return R!==null&&y!==null&&c(y,R[1])?R[0]:(p=p(),T.memoizedState=[p,y],p)}function It(p,y,T){return(hl&21)===0?(p.baseState&&(p.baseState=!1,Ba=!0),p.memoizedState=T):(ns(T,y)||(T=qd(),Wn.lanes|=T,Jc|=T,p.baseState=!0),y)}function Yt(p,y){var T=mn;mn=T!==0&&4>T?T:4,p(!0);var R=cl.transition;cl.transition={};try{p(!1),y()}finally{mn=T,cl.transition=R}}function zr(){return k().memoizedState}function Sn(p,y,T){var R=Go(p);if(T={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null},On(p))Qn(y,T);else if(T=Jh(p,y,T,R),T!==null){var q=uo();vl(T,p,R,q),Ln(T,y,R)}}function Yn(p,y,T){var R=Go(p),q={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null};if(On(p))Qn(y,q);else{var Z=p.alternate;if(p.lanes===0&&(Z===null||Z.lanes===0)&&(Z=y.lastRenderedReducer,Z!==null))try{var de=y.lastRenderedState,De=Z(de,T);if(q.hasEagerState=!0,q.eagerState=De,ns(De,de)){var qe=y.interleaved;qe===null?(q.next=q,Xu(y)):(q.next=qe.next,qe.next=q),y.interleaved=q;return}}catch{}finally{}T=Jh(p,y,q,R),T!==null&&(q=uo(),vl(T,p,R,q),Ln(T,y,R))}}function On(p){var y=p.alternate;return p===Wn||y!==null&&y===Wn}function Qn(p,y){tu=ec=!0;var T=p.pending;T===null?y.next=y:(y.next=T.next,T.next=y),p.pending=y}function Ln(p,y,T){if((T&4194240)!==0){var R=y.lanes;R&=p.pendingLanes,T|=R,y.lanes=T,kp(p,T)}}var Jn={readContext:ar,useCallback:i,useContext:i,useEffect:i,useImperativeHandle:i,useInsertionEffect:i,useLayoutEffect:i,useMemo:i,useReducer:i,useRef:i,useState:i,useDebugValue:i,useDeferredValue:i,useTransition:i,useMutableSource:i,useSyncExternalStore:i,useId:i,unstable_isNewReconciler:!1},oi={readContext:ar,useCallback:function(p,y){return E().memoizedState=[p,y===void 0?null:y],p},useContext:ar,useEffect:Fe,useImperativeHandle:function(p,y,T){return T=T!=null?T.concat([p]):null,Se(4194308,4,at.bind(null,y,p),T)},useLayoutEffect:function(p,y){return Se(4194308,4,p,y)},useInsertionEffect:function(p,y){return Se(4,2,p,y)},useMemo:function(p,y){var T=E();return y=y===void 0?null:y,p=p(),T.memoizedState=[p,y],p},useReducer:function(p,y,T){var R=E();return y=T!==void 0?T(y):y,R.memoizedState=R.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},R.queue=p,p=p.dispatch=Sn.bind(null,Wn,p),[R.memoizedState,p]},useRef:function(p){var y=E();return p={current:p},y.memoizedState=p},useState:ve,useDebugValue:st,useDeferredValue:function(p){return E().memoizedState=p},useTransition:function(){var p=ve(!1),y=p[0];return p=Yt.bind(null,p[1]),E().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,T){var R=Wn,q=E();if(Xn){if(T===void 0)throw Error(r(407));T=T()}else{if(T=y(),Sa===null)throw Error(r(349));(hl&30)!==0||Y(R,y,T)}q.memoizedState=T;var Z={value:T,getSnapshot:y};return q.queue=Z,Fe(ce.bind(null,R,Z,p),[p]),R.flags|=2048,we(9,oe.bind(null,R,Z,T,y),void 0,null),T},useId:function(){var p=E(),y=Sa.identifierPrefix;if(Xn){var T=Ui,R=no;T=(R&~(1<<32-$i(R)-1)).toString(32)+T,y=":"+y+"R"+T,T=tc++,0<T&&(y+="H"+T.toString(32)),y+=":"}else T=w++,y=":"+y+"r"+T.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},na={readContext:ar,useCallback:Nt,useContext:ar,useEffect:Te,useImperativeHandle:ot,useInsertionEffect:Ge,useLayoutEffect:ht,useMemo:Vt,useReducer:N,useRef:Le,useState:function(){return N(D)},useDebugValue:st,useDeferredValue:function(p){var y=k();return It(y,ai.memoizedState,p)},useTransition:function(){var p=N(D)[0],y=k().memoizedState;return[p,y]},useMutableSource:W,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1},Si={readContext:ar,useCallback:Nt,useContext:ar,useEffect:Te,useImperativeHandle:ot,useInsertionEffect:Ge,useLayoutEffect:ht,useMemo:Vt,useReducer:U,useRef:Le,useState:function(){return U(D)},useDebugValue:st,useDeferredValue:function(p){var y=k();return ai===null?y.memoizedState=p:It(y,ai.memoizedState,p)},useTransition:function(){var p=U(D)[0],y=k().memoizedState;return[p,y]},useMutableSource:W,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1};function _n(p,y){if(p&&p.defaultProps){y=yt({},y),p=p.defaultProps;for(var T in p)y[T]===void 0&&(y[T]=p[T]);return y}return y}function qi(p,y,T,R){y=p.memoizedState,T=T(R,y),T=T==null?y:yt({},y,T),p.memoizedState=T,p.lanes===0&&(p.updateQueue.baseState=T)}var cs={isMounted:function(p){return(p=p._reactInternals)?Bt(p)===p:!1},enqueueSetState:function(p,y,T){p=p._reactInternals;var R=uo(),q=Go(p),Z=Ds(R,q);Z.payload=y,T!=null&&(Z.callback=T),y=Jl(p,Z,q),y!==null&&(vl(y,p,q,R),Cf(y,p,q))},enqueueReplaceState:function(p,y,T){p=p._reactInternals;var R=uo(),q=Go(p),Z=Ds(R,q);Z.tag=1,Z.payload=y,T!=null&&(Z.callback=T),y=Jl(p,Z,q),y!==null&&(vl(y,p,q,R),Cf(y,p,q))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var T=uo(),R=Go(p),q=Ds(T,R);q.tag=2,y!=null&&(q.callback=y),y=Jl(p,q,R),y!==null&&(vl(y,p,R,T),Cf(y,p,R))}};function Ns(p,y,T,R,q,Z,de){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(R,Z,de):y.prototype&&y.prototype.isPureReactComponent?!Vc(T,R)||!Vc(q,Z):!0}function hs(p,y,T){var R=!1,q=Is,Z=y.contextType;return typeof Z=="object"&&Z!==null?Z=ar(Z):(q=xa(y)?Wl:ta.current,R=y.contextTypes,Z=(R=R!=null)?Hl(p,q):Is),y=new y(T,Z),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=cs,p.stateNode=y,y._reactInternals=p,R&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=q,p.__reactInternalMemoizedMaskedChildContext=Z),y}function Fa(p,y,T,R){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(T,R),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(T,R),y.state!==p&&cs.enqueueReplaceState(y,y.state,null)}function dl(p,y,T,R){var q=p.stateNode;q.props=T,q.state=p.memoizedState,q.refs={},io(p);var Z=y.contextType;typeof Z=="object"&&Z!==null?q.context=ar(Z):(Z=xa(y)?Wl:ta.current,q.context=Hl(p,Z)),q.state=p.memoizedState,Z=y.getDerivedStateFromProps,typeof Z=="function"&&(qi(p,y,Z,T),q.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(y=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),y!==q.state&&cs.enqueueReplaceState(q,q.state,null),qn(p,T,q,R),q.state=p.memoizedState),typeof q.componentDidMount=="function"&&(p.flags|=4194308)}function Fs(p,y){try{var T="",R=y;do T+=Ke(R),R=R.return;while(R);var q=T}catch(Z){q=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:p,source:y,stack:q,digest:null}}function fl(p,y,T){return{value:p,source:null,stack:T??null,digest:y??null}}function oo(p,y){try{console.error(y.value)}catch(T){setTimeout(function(){throw T})}}var Bs=typeof WeakMap=="function"?WeakMap:Map;function Uo(p,y,T){T=Ds(-1,T),T.tag=3,T.payload={element:null};var R=y.value;return T.callback=function(){th||(th=!0,Tg=R),oo(p,y)},T}function qo(p,y,T){T=Ds(-1,T),T.tag=3;var R=p.type.getDerivedStateFromError;if(typeof R=="function"){var q=y.value;T.payload=function(){return R(q)},T.callback=function(){oo(p,y)}}var Z=p.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(T.callback=function(){oo(p,y),typeof R!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var de=y.stack;this.componentDidCatch(y.value,{componentStack:de!==null?de:""})}),T}function zn(p,y,T){var R=p.pingCache;if(R===null){R=p.pingCache=new Bs;var q=new Set;R.set(y,q)}else q=R.get(y),q===void 0&&(q=new Set,R.set(y,q));q.has(T)||(q.add(T),p=P0.bind(null,p,y,T),y.then(p,p))}function Dn(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function zi(p,y,T,R,q){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(y=Ds(-1,1),y.tag=2,Jl(T,y,1))),T.lanes|=1),p):(p.flags|=65536,p.lanes=q,p)}var Gi=te.ReactCurrentOwner,Ba=!1;function ba(p,y,T,R){y.child=p===null?Zc(y,null,T,R):Hc(y,p.child,T,R)}function ru(p,y,T,R,q){T=T.render;var Z=y.ref;return Ls(y,q),R=m(p,y,T,R,Z,q),T=v(),p!==null&&!Ba?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~q,nc(p,y,q)):(Xn&&T&&Xh(y),y.flags|=1,ba(p,y,R,q),y.child)}function bg(p,y,T,R,q){if(p===null){var Z=T.type;return typeof Z=="function"&&!_v(Z)&&Z.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(y.tag=15,y.type=Z,em(p,y,Z,R,q)):(p=Ff(T.type,null,R,y,y.mode,q),p.ref=y.ref,p.return=y,y.child=p)}if(Z=p.child,(p.lanes&q)===0){var de=Z.memoizedProps;if(T=T.compare,T=T!==null?T:Vc,T(de,R)&&p.ref===y.ref)return nc(p,y,q)}return y.flags|=1,p=sc(Z,R),p.ref=y.ref,p.return=y,y.child=p}function em(p,y,T,R,q){if(p!==null){var Z=p.memoizedProps;if(Vc(Z,R)&&p.ref===y.ref)if(Ba=!1,y.pendingProps=R=Z,(p.lanes&q)!==0)(p.flags&131072)!==0&&(Ba=!0);else return y.lanes=p.lanes,nc(p,y,q)}return Vs(p,y,T,R,q)}function Tf(p,y,T){var R=y.pendingProps,q=R.children,Z=p!==null?p.memoizedState:null;if(R.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(jf,fs),fs|=T;else{if((T&1073741824)===0)return p=Z!==null?Z.baseLanes|T:T,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,gn(jf,fs),fs|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=Z!==null?Z.baseLanes:T,gn(jf,fs),fs|=R}else Z!==null?(R=Z.baseLanes|T,y.memoizedState=null):R=T,gn(jf,fs),fs|=R;return ba(p,y,q,T),y.child}function pl(p,y){var T=y.ref;(p===null&&T!==null||p!==null&&p.ref!==T)&&(y.flags|=512,y.flags|=2097152)}function Vs(p,y,T,R,q){var Z=xa(T)?Wl:ta.current;return Z=Hl(y,Z),Ls(y,q),T=m(p,y,T,R,Z,q),R=v(),p!==null&&!Ba?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~q,nc(p,y,q)):(Xn&&R&&Xh(y),y.flags|=1,ba(p,y,T,q),y.child)}function ml(p,y,T,R,q){if(xa(T)){var Z=!0;ls(y)}else Z=!1;if(Ls(y,q),y.stateNode===null)rc(p,y),hs(y,T,R),dl(y,T,R,q),R=!0;else if(p===null){var de=y.stateNode,De=y.memoizedProps;de.props=De;var qe=de.context,vt=T.contextType;typeof vt=="object"&&vt!==null?vt=ar(vt):(vt=xa(T)?Wl:ta.current,vt=Hl(y,vt));var qt=T.getDerivedStateFromProps,Ht=typeof qt=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ht||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(De!==R||qe!==vt)&&Fa(y,de,R,vt),xi=!1;var Ut=y.memoizedState;de.state=Ut,qn(y,R,de,q),qe=y.memoizedState,De!==R||Ut!==qe||ra.current||xi?(typeof qt=="function"&&(qi(y,T,qt,R),qe=y.memoizedState),(De=xi||Ns(y,T,De,R,Ut,qe,vt))?(Ht||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(y.flags|=4194308)):(typeof de.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=R,y.memoizedState=qe),de.props=R,de.state=qe,de.context=vt,R=De):(typeof de.componentDidMount=="function"&&(y.flags|=4194308),R=!1)}else{de=y.stateNode,Ef(p,y),De=y.memoizedProps,vt=y.type===y.elementType?De:_n(y.type,De),de.props=vt,Ht=y.pendingProps,Ut=de.context,qe=T.contextType,typeof qe=="object"&&qe!==null?qe=ar(qe):(qe=xa(T)?Wl:ta.current,qe=Hl(y,qe));var pr=T.getDerivedStateFromProps;(qt=typeof pr=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(De!==Ht||Ut!==qe)&&Fa(y,de,R,qe),xi=!1,Ut=y.memoizedState,de.state=Ut,qn(y,R,de,q);var xr=y.memoizedState;De!==Ht||Ut!==xr||ra.current||xi?(typeof pr=="function"&&(qi(y,T,pr,R),xr=y.memoizedState),(vt=xi||Ns(y,T,vt,R,Ut,xr,qe)||!1)?(qt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(R,xr,qe),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(R,xr,qe)),typeof de.componentDidUpdate=="function"&&(y.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof de.componentDidUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=1024),y.memoizedProps=R,y.memoizedState=xr),de.props=R,de.state=xr,de.context=qe,R=vt):(typeof de.componentDidUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=1024),R=!1)}return rd(p,y,T,R,Z,q)}function rd(p,y,T,R,q,Z){pl(p,y);var de=(y.flags&128)!==0;if(!R&&!de)return q&&Kp(y,T,!1),nc(p,y,Z);R=y.stateNode,Gi.current=y;var De=de&&typeof T.getDerivedStateFromError!="function"?null:R.render();return y.flags|=1,p!==null&&de?(y.child=Hc(y,p.child,null,Z),y.child=Hc(y,null,De,Z)):ba(p,y,De,Z),y.memoizedState=R.state,q&&Kp(y,T,!0),y.child}function Mf(p){var y=p.stateNode;y.pendingContext?yf(p,y.pendingContext,y.pendingContext!==y.context):y.context&&yf(p,y.context,!1),ed(p,y.containerInfo)}function nd(p,y,T,R,q){return Yl(),bf(q),y.flags|=256,ba(p,y,T,R),y.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function kf(p){return{baseLanes:p,cachePool:null,transitions:null}}function iv(p,y,T){var R=y.pendingProps,q=Gn.current,Z=!1,de=(y.flags&128)!==0,De;if((De=de)||(De=p!==null&&p.memoizedState===null?!1:(q&2)!==0),De?(Z=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(q|=1),gn(Gn,q&1),p===null)return Yp(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:p.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(de=R.children,p=R.fallback,Z?(R=y.mode,Z=y.child,de={mode:"hidden",children:de},(R&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=de):Z=cm(de,R,0,null),p=sh(p,R,T,null),Z.return=y,p.return=y,Z.sibling=p,y.child=Z,y.child.memoizedState=kf(T),y.memoizedState=Yc,p):av(y,de));if(q=p.memoizedState,q!==null&&(De=q.dehydrated,De!==null))return y1(p,y,de,R,De,q,T);if(Z){Z=R.fallback,de=y.mode,q=p.child,De=q.sibling;var qe={mode:"hidden",children:R.children};return(de&1)===0&&y.child!==q?(R=y.child,R.childLanes=0,R.pendingProps=qe,y.deletions=null):(R=sc(q,qe),R.subtreeFlags=q.subtreeFlags&14680064),De!==null?Z=sc(De,Z):(Z=sh(Z,de,T,null),Z.flags|=2),Z.return=y,R.return=y,R.sibling=Z,y.child=R,R=Z,Z=y.child,de=p.child.memoizedState,de=de===null?kf(T):{baseLanes:de.baseLanes|T,cachePool:null,transitions:de.transitions},Z.memoizedState=de,Z.childLanes=p.childLanes&~T,y.memoizedState=Yc,R}return Z=p.child,p=Z.sibling,R=sc(Z,{mode:"visible",children:R.children}),(y.mode&1)===0&&(R.lanes=T),R.return=y,R.sibling=null,p!==null&&(T=y.deletions,T===null?(y.deletions=[p],y.flags|=16):T.push(p)),y.child=R,y.memoizedState=null,R}function av(p,y){return y=cm({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function Af(p,y,T,R){return R!==null&&bf(R),Hc(y,p.child,null,T),p=av(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function y1(p,y,T,R,q,Z,de){if(T)return y.flags&256?(y.flags&=-257,R=fl(Error(r(422))),Af(p,y,de,R)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(Z=R.fallback,q=y.mode,R=cm({mode:"visible",children:R.children},q,0,null),Z=sh(Z,q,de,null),Z.flags|=2,R.return=y,Z.return=y,R.sibling=Z,y.child=R,(y.mode&1)!==0&&Hc(y,p.child,null,de),y.child.memoizedState=kf(de),y.memoizedState=Yc,Z);if((y.mode&1)===0)return Af(p,y,de,null);if(q.data==="$!"){if(R=q.nextSibling&&q.nextSibling.dataset,R)var De=R.dgst;return R=De,Z=Error(r(419)),R=fl(Z,R,void 0),Af(p,y,de,R)}if(De=(de&p.childLanes)!==0,Ba||De){if(R=Sa,R!==null){switch(de&-de){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(R.suspendedLanes|de))!==0?0:q,q!==0&&q!==Z.retryLane&&(Z.retryLane=q,$o(p,q),vl(R,p,q,-1))}return gv(),R=fl(Error(r(421))),Af(p,y,de,R)}return q.data==="$?"?(y.flags|=128,y.child=p.child,y=w1.bind(null,p),q._reactRetry=y,null):(p=Z.treeContext,ma=ol(q.nextSibling),pa=y,Xn=!0,Na=null,p!==null&&(Fo[Bo++]=no,Fo[Bo++]=Ui,Fo[Bo++]=Vo,no=p.id,Ui=p.overflow,Vo=y),y=av(y,R.children),y.flags|=4096,y)}function wg(p,y,T){p.lanes|=y;var R=p.alternate;R!==null&&(R.lanes|=y),Eo(p.return,y,T)}function Sg(p,y,T,R,q){var Z=p.memoizedState;Z===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:R,tail:T,tailMode:q}:(Z.isBackwards=y,Z.rendering=null,Z.renderingStartTime=0,Z.last=R,Z.tail=T,Z.tailMode=q)}function ov(p,y,T){var R=y.pendingProps,q=R.revealOrder,Z=R.tail;if(ba(p,y,R.children,T),R=Gn.current,(R&2)!==0)R=R&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&wg(p,T,y);else if(p.tag===19)wg(p,T,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}R&=1}if(gn(Gn,R),(y.mode&1)===0)y.memoizedState=null;else switch(q){case"forwards":for(T=y.child,q=null;T!==null;)p=T.alternate,p!==null&&Qu(p)===null&&(q=T),T=T.sibling;T=q,T===null?(q=y.child,y.child=null):(q=T.sibling,T.sibling=null),Sg(y,!1,q,T,Z);break;case"backwards":for(T=null,q=y.child,y.child=null;q!==null;){if(p=q.alternate,p!==null&&Qu(p)===null){y.child=q;break}p=q.sibling,q.sibling=T,T=q,q=p}Sg(y,!0,T,null,Z);break;case"together":Sg(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function rc(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function nc(p,y,T){if(p!==null&&(y.dependencies=p.dependencies),Jc|=y.lanes,(T&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(r(153));if(y.child!==null){for(p=y.child,T=sc(p,p.pendingProps),y.child=T,T.return=y;p.sibling!==null;)p=p.sibling,T=T.sibling=sc(p,p.pendingProps),T.return=y;T.sibling=null}return y.child}function If(p,y,T){switch(y.tag){case 3:Mf(y),Yl();break;case 5:zs(y);break;case 1:xa(y.type)&&ls(y);break;case 4:ed(y,y.stateNode.containerInfo);break;case 10:var R=y.type._context,q=y.memoizedProps.value;gn(Zu,R._currentValue),R._currentValue=q;break;case 13:if(R=y.memoizedState,R!==null)return R.dehydrated!==null?(gn(Gn,Gn.current&1),y.flags|=128,null):(T&y.child.childLanes)!==0?iv(p,y,T):(gn(Gn,Gn.current&1),p=nc(p,y,T),p!==null?p.sibling:null);gn(Gn,Gn.current&1);break;case 19:if(R=(T&y.childLanes)!==0,(p.flags&128)!==0){if(R)return ov(p,y,T);y.flags|=128}if(q=y.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),gn(Gn,Gn.current),R)break;return null;case 22:case 23:return y.lanes=0,Tf(p,y,T)}return nc(p,y,T)}var tm,Of,c0,h0;tm=function(p,y){for(var T=y.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},Of=function(){},c0=function(p,y,T,R){var q=p.memoizedProps;if(q!==R){p=y.stateNode,Rs(ao.current);var Z=null;switch(T){case"input":q=Tr(p,q),R=Tr(p,R),Z=[];break;case"select":q=yt({},q,{value:void 0}),R=yt({},R,{value:void 0}),Z=[];break;case"textarea":q=bt(p,q),R=bt(p,R),Z=[];break;default:typeof q.onClick!="function"&&typeof R.onClick=="function"&&(p.onclick=df)}At(T,R);var de;T=null;for(vt in q)if(!R.hasOwnProperty(vt)&&q.hasOwnProperty(vt)&&q[vt]!=null)if(vt==="style"){var De=q[vt];for(de in De)De.hasOwnProperty(de)&&(T||(T={}),T[de]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(l.hasOwnProperty(vt)?Z||(Z=[]):(Z=Z||[]).push(vt,null));for(vt in R){var qe=R[vt];if(De=q!=null?q[vt]:void 0,R.hasOwnProperty(vt)&&qe!==De&&(qe!=null||De!=null))if(vt==="style")if(De){for(de in De)!De.hasOwnProperty(de)||qe&&qe.hasOwnProperty(de)||(T||(T={}),T[de]="");for(de in qe)qe.hasOwnProperty(de)&&De[de]!==qe[de]&&(T||(T={}),T[de]=qe[de])}else T||(Z||(Z=[]),Z.push(vt,T)),T=qe;else vt==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,De=De?De.__html:void 0,qe!=null&&De!==qe&&(Z=Z||[]).push(vt,qe)):vt==="children"?typeof qe!="string"&&typeof qe!="number"||(Z=Z||[]).push(vt,""+qe):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(l.hasOwnProperty(vt)?(qe!=null&&vt==="onScroll"&&ii("scroll",p),Z||De===qe||(Z=[])):(Z=Z||[]).push(vt,qe))}T&&(Z=Z||[]).push("style",T);var vt=Z;(y.updateQueue=vt)&&(y.flags|=4)}},h0=function(p,y,T,R){T!==R&&(y.flags|=4)};function rm(p,y){if(!Xn)switch(p.tailMode){case"hidden":y=p.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?p.tail=null:T.sibling=null;break;case"collapsed":T=p.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:R.sibling=null}}function so(p){var y=p.alternate!==null&&p.alternate.child===p.child,T=0,R=0;if(y)for(var q=p.child;q!==null;)T|=q.lanes|q.childLanes,R|=q.subtreeFlags&14680064,R|=q.flags&14680064,q.return=p,q=q.sibling;else for(q=p.child;q!==null;)T|=q.lanes|q.childLanes,R|=q.subtreeFlags,R|=q.flags,q.return=p,q=q.sibling;return p.subtreeFlags|=R,p.childLanes=T,y}function v1(p,y,T){var R=y.pendingProps;switch(Kl(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(y),null;case 1:return xa(y.type)&&Hh(),so(y),null;case 3:return R=y.stateNode,js(),Kn(ra),Kn(ta),td(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(p===null||p.child===null)&&(Wu(y)?y.flags|=4:p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Na!==null&&(kg(Na),Na=null))),Of(p,y),so(y),null;case 5:Xc(y);var q=Rs(Yu.current);if(T=y.type,p!==null&&y.stateNode!=null)c0(p,y,T,R,q),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!R){if(y.stateNode===null)throw Error(r(166));return so(y),null}if(p=Rs(ao.current),Wu(y)){R=y.stateNode,T=y.type;var Z=y.memoizedProps;switch(R[_a]=y,R[fa]=Z,p=(y.mode&1)!==0,T){case"dialog":ii("cancel",R),ii("close",R);break;case"iframe":case"object":case"embed":ii("load",R);break;case"video":case"audio":for(q=0;q<Uh.length;q++)ii(Uh[q],R);break;case"source":ii("error",R);break;case"img":case"image":case"link":ii("error",R),ii("load",R);break;case"details":ii("toggle",R);break;case"input":wr(R,Z),ii("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!Z.multiple},ii("invalid",R);break;case"textarea":rr(R,Z),ii("invalid",R)}At(T,Z),q=null;for(var de in Z)if(Z.hasOwnProperty(de)){var De=Z[de];de==="children"?typeof De=="string"?R.textContent!==De&&(Z.suppressHydrationWarning!==!0&&Gc(R.textContent,De,p),q=["children",De]):typeof De=="number"&&R.textContent!==""+De&&(Z.suppressHydrationWarning!==!0&&Gc(R.textContent,De,p),q=["children",""+De]):l.hasOwnProperty(de)&&De!=null&&de==="onScroll"&&ii("scroll",R)}switch(T){case"input":ir(R),Xi(R,Z,!0);break;case"textarea":ir(R),zt(R);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(R.onclick=df)}R=q,y.updateQueue=R,R!==null&&(y.flags|=4)}else{de=q.nodeType===9?q:q.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=ze(T)),p==="http://www.w3.org/1999/xhtml"?T==="script"?(p=de.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof R.is=="string"?p=de.createElement(T,{is:R.is}):(p=de.createElement(T),T==="select"&&(de=p,R.multiple?de.multiple=!0:R.size&&(de.size=R.size))):p=de.createElementNS(p,T),p[_a]=y,p[fa]=R,tm(p,y,!1,!1),y.stateNode=p;e:{switch(de=Pt(T,R),T){case"dialog":ii("cancel",p),ii("close",p),q=R;break;case"iframe":case"object":case"embed":ii("load",p),q=R;break;case"video":case"audio":for(q=0;q<Uh.length;q++)ii(Uh[q],p);q=R;break;case"source":ii("error",p),q=R;break;case"img":case"image":case"link":ii("error",p),ii("load",p),q=R;break;case"details":ii("toggle",p),q=R;break;case"input":wr(p,R),q=Tr(p,R),ii("invalid",p);break;case"option":q=R;break;case"select":p._wrapperState={wasMultiple:!!R.multiple},q=yt({},R,{value:void 0}),ii("invalid",p);break;case"textarea":rr(p,R),q=bt(p,R),ii("invalid",p);break;default:q=R}At(T,q),De=q;for(Z in De)if(De.hasOwnProperty(Z)){var qe=De[Z];Z==="style"?Ve(p,qe):Z==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,qe!=null&&pe(p,qe)):Z==="children"?typeof qe=="string"?(T!=="textarea"||qe!=="")&&Me(p,qe):typeof qe=="number"&&Me(p,""+qe):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(l.hasOwnProperty(Z)?qe!=null&&Z==="onScroll"&&ii("scroll",p):qe!=null&&re(p,Z,qe,de))}switch(T){case"input":ir(p),Xi(p,R,!1);break;case"textarea":ir(p),zt(p);break;case"option":R.value!=null&&p.setAttribute("value",""+$t(R.value));break;case"select":p.multiple=!!R.multiple,Z=R.value,Z!=null?rt(p,!!R.multiple,Z,!1):R.defaultValue!=null&&rt(p,!!R.multiple,R.defaultValue,!0);break;default:typeof q.onClick=="function"&&(p.onclick=df)}switch(T){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return so(y),null;case 6:if(p&&y.stateNode!=null)h0(p,y,p.memoizedProps,R);else{if(typeof R!="string"&&y.stateNode===null)throw Error(r(166));if(T=Rs(Yu.current),Rs(ao.current),Wu(y)){if(R=y.stateNode,T=y.memoizedProps,R[_a]=y,(Z=R.nodeValue!==T)&&(p=pa,p!==null))switch(p.tag){case 3:Gc(R.nodeValue,T,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Gc(R.nodeValue,T,(p.mode&1)!==0)}Z&&(y.flags|=4)}else R=(T.nodeType===9?T:T.ownerDocument).createTextNode(R),R[_a]=y,y.stateNode=R}return so(y),null;case 13:if(Kn(Gn),R=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Xn&&ma!==null&&(y.mode&1)!==0&&(y.flags&128)===0)Qp(),Yl(),y.flags|=98560,Z=!1;else if(Z=Wu(y),R!==null&&R.dehydrated!==null){if(p===null){if(!Z)throw Error(r(318));if(Z=y.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(r(317));Z[_a]=y}else Yl(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;so(y),Z=!1}else Na!==null&&(kg(Na),Na=null),Z=!0;if(!Z)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=T,y):(R=R!==null,R!==(p!==null&&p.memoizedState!==null)&&R&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(Gn.current&1)!==0?Wi===0&&(Wi=3):gv())),y.updateQueue!==null&&(y.flags|=4),so(y),null);case 4:return js(),Of(p,y),p===null&&Fu(y.stateNode.containerInfo),so(y),null;case 10:return Pf(y.type._context),so(y),null;case 17:return xa(y.type)&&Hh(),so(y),null;case 19:if(Kn(Gn),Z=y.memoizedState,Z===null)return so(y),null;if(R=(y.flags&128)!==0,de=Z.rendering,de===null)if(R)rm(Z,!1);else{if(Wi!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(de=Qu(p),de!==null){for(y.flags|=128,rm(Z,!1),R=de.updateQueue,R!==null&&(y.updateQueue=R,y.flags|=4),y.subtreeFlags=0,R=T,T=y.child;T!==null;)Z=T,p=R,Z.flags&=14680066,de=Z.alternate,de===null?(Z.childLanes=0,Z.lanes=p,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=de.childLanes,Z.lanes=de.lanes,Z.child=de.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=de.memoizedProps,Z.memoizedState=de.memoizedState,Z.updateQueue=de.updateQueue,Z.type=de.type,p=de.dependencies,Z.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),T=T.sibling;return gn(Gn,Gn.current&1|2),y.child}p=p.sibling}Z.tail!==null&&bn()>ic&&(y.flags|=128,R=!0,rm(Z,!1),y.lanes=4194304)}else{if(!R)if(p=Qu(de),p!==null){if(y.flags|=128,R=!0,T=p.updateQueue,T!==null&&(y.updateQueue=T,y.flags|=4),rm(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!de.alternate&&!Xn)return so(y),null}else 2*bn()-Z.renderingStartTime>ic&&T!==1073741824&&(y.flags|=128,R=!0,rm(Z,!1),y.lanes=4194304);Z.isBackwards?(de.sibling=y.child,y.child=de):(T=Z.last,T!==null?T.sibling=de:y.child=de,Z.last=de)}return Z.tail!==null?(y=Z.tail,Z.rendering=y,Z.tail=y.sibling,Z.renderingStartTime=bn(),y.sibling=null,T=Gn.current,gn(Gn,R?T&1|2:T&1),y):(so(y),null);case 22:case 23:return pv(),R=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==R&&(y.flags|=8192),R&&(y.mode&1)!==0?(fs&1073741824)!==0&&(so(y),y.subtreeFlags&6&&(y.flags|=8192)):so(y),null;case 24:return null;case 25:return null}throw Error(r(156,y.tag))}function d0(p,y){switch(Kl(y),y.tag){case 1:return xa(y.type)&&Hh(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return js(),Kn(ra),Kn(ta),td(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return Xc(y),null;case 13:if(Kn(Gn),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Yl()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Kn(Gn),null;case 4:return js(),null;case 10:return Pf(y.type._context),null;case 22:case 23:return pv(),null;case 24:return null;default:return null}}var Lf=!1,Va=!1,f0=typeof WeakSet=="function"?WeakSet:Set,yr=null;function Df(p,y){var T=p.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(R){Pi(p,y,R)}else T.current=null}function Pg(p,y,T){try{T()}catch(R){Pi(p,y,R)}}var sv=!1;function _1(p,y){if($u=Tu,p=yg(),cn(p)){if("selectionStart"in p)var T={start:p.selectionStart,end:p.selectionEnd};else e:{T=(T=p.ownerDocument)&&T.defaultView||window;var R=T.getSelection&&T.getSelection();if(R&&R.rangeCount!==0){T=R.anchorNode;var q=R.anchorOffset,Z=R.focusNode;R=R.focusOffset;try{T.nodeType,Z.nodeType}catch{T=null;break e}var de=0,De=-1,qe=-1,vt=0,qt=0,Ht=p,Ut=null;t:for(;;){for(var pr;Ht!==T||q!==0&&Ht.nodeType!==3||(De=de+q),Ht!==Z||R!==0&&Ht.nodeType!==3||(qe=de+R),Ht.nodeType===3&&(de+=Ht.nodeValue.length),(pr=Ht.firstChild)!==null;)Ut=Ht,Ht=pr;for(;;){if(Ht===p)break t;if(Ut===T&&++vt===q&&(De=de),Ut===Z&&++qt===R&&(qe=de),(pr=Ht.nextSibling)!==null)break;Ht=Ut,Ut=Ht.parentNode}Ht=pr}T=De===-1||qe===-1?null:{start:De,end:qe}}else T=null}T=T||{start:0,end:0}}else T=null;for(Wp={focusedElem:p,selectionRange:T},Tu=!1,yr=y;yr!==null;)if(y=yr,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,yr=p;else for(;yr!==null;){y=yr;try{var xr=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(xr!==null){var Pr=xr.memoizedProps,Ei=xr.memoizedState,lt=y.stateNode,He=lt.getSnapshotBeforeUpdate(y.elementType===y.type?Pr:_n(y.type,Pr),Ei);lt.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var ft=y.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Qt){Pi(y,y.return,Qt)}if(p=y.sibling,p!==null){p.return=y.return,yr=p;break}yr=y.return}return xr=sv,sv=!1,xr}function id(p,y,T){var R=y.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var q=R=R.next;do{if((q.tag&p)===p){var Z=q.destroy;q.destroy=void 0,Z!==void 0&&Pg(y,T,Z)}q=q.next}while(q!==R)}}function nm(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&p)===p){var R=T.create;T.destroy=R()}T=T.next}while(T!==y)}}function im(p){var y=p.ref;if(y!==null){var T=p.stateNode;switch(p.tag){case 5:p=T;break;default:p=T}typeof y=="function"?y(p):y.current=p}}function Rf(p){var y=p.alternate;y!==null&&(p.alternate=null,Rf(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&(delete y[_a],delete y[fa],delete y[qu],delete y[mf],delete y[Gl])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function lo(p){return p.tag===5||p.tag===3||p.tag===4}function lv(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||lo(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function am(p,y,T){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?T.nodeType===8?T.parentNode.insertBefore(p,y):T.insertBefore(p,y):(T.nodeType===8?(y=T.parentNode,y.insertBefore(p,T)):(y=T,y.appendChild(p)),T=T._reactRootContainer,T!=null||y.onclick!==null||(y.onclick=df));else if(R!==4&&(p=p.child,p!==null))for(am(p,y,T),p=p.sibling;p!==null;)am(p,y,T),p=p.sibling}function uv(p,y,T){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?T.insertBefore(p,y):T.appendChild(p);else if(R!==4&&(p=p.child,p!==null))for(uv(p,y,T),p=p.sibling;p!==null;)uv(p,y,T),p=p.sibling}var wa=null,gl=!1;function Qc(p,y,T){for(T=T.child;T!==null;)cv(p,y,T),T=T.sibling}function cv(p,y,T){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(So,T)}catch{}switch(T.tag){case 5:Va||Df(T,y);case 6:var R=wa,q=gl;wa=null,Qc(p,y,T),wa=R,gl=q,wa!==null&&(gl?(p=wa,T=T.stateNode,p.nodeType===8?p.parentNode.removeChild(T):p.removeChild(T)):wa.removeChild(T.stateNode));break;case 18:wa!==null&&(gl?(p=wa,T=T.stateNode,p.nodeType===8?Wc(p.parentNode,T):p.nodeType===1&&Wc(p,T),Jo(p)):Wc(wa,T.stateNode));break;case 4:R=wa,q=gl,wa=T.stateNode.containerInfo,gl=!0,Qc(p,y,T),wa=R,gl=q;break;case 0:case 11:case 14:case 15:if(!Va&&(R=T.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){q=R=R.next;do{var Z=q,de=Z.destroy;Z=Z.tag,de!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Pg(T,y,de),q=q.next}while(q!==R)}Qc(p,y,T);break;case 1:if(!Va&&(Df(T,y),R=T.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=T.memoizedProps,R.state=T.memoizedState,R.componentWillUnmount()}catch(De){Pi(T,y,De)}Qc(p,y,T);break;case 21:Qc(p,y,T);break;case 22:T.mode&1?(Va=(R=Va)||T.memoizedState!==null,Qc(p,y,T),Va=R):Qc(p,y,T);break;default:Qc(p,y,T)}}function p0(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var T=p.stateNode;T===null&&(T=p.stateNode=new f0),y.forEach(function(R){var q=um.bind(null,p,R);T.has(R)||(T.add(R),R.then(q,q))})}}function ds(p,y){var T=y.deletions;if(T!==null)for(var R=0;R<T.length;R++){var q=T[R];try{var Z=p,de=y,De=de;e:for(;De!==null;){switch(De.tag){case 5:wa=De.stateNode,gl=!1;break e;case 3:wa=De.stateNode.containerInfo,gl=!0;break e;case 4:wa=De.stateNode.containerInfo,gl=!0;break e}De=De.return}if(wa===null)throw Error(r(160));cv(Z,de,q),wa=null,gl=!1;var qe=q.alternate;qe!==null&&(qe.return=null),q.return=null}catch(vt){Pi(q,y,vt)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)hv(y,p),y=y.sibling}function hv(p,y){var T=p.alternate,R=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ds(y,p),yl(p),R&4){try{id(3,p,p.return),nm(3,p)}catch(Pr){Pi(p,p.return,Pr)}try{id(5,p,p.return)}catch(Pr){Pi(p,p.return,Pr)}}break;case 1:ds(y,p),yl(p),R&512&&T!==null&&Df(T,T.return);break;case 5:if(ds(y,p),yl(p),R&512&&T!==null&&Df(T,T.return),p.flags&32){var q=p.stateNode;try{Me(q,"")}catch(Pr){Pi(p,p.return,Pr)}}if(R&4&&(q=p.stateNode,q!=null)){var Z=p.memoizedProps,de=T!==null?T.memoizedProps:Z,De=p.type,qe=p.updateQueue;if(p.updateQueue=null,qe!==null)try{De==="input"&&Z.type==="radio"&&Z.name!=null&&tn(q,Z),Pt(De,de);var vt=Pt(De,Z);for(de=0;de<qe.length;de+=2){var qt=qe[de],Ht=qe[de+1];qt==="style"?Ve(q,Ht):qt==="dangerouslySetInnerHTML"?pe(q,Ht):qt==="children"?Me(q,Ht):re(q,qt,Ht,vt)}switch(De){case"input":Wr(q,Z);break;case"textarea":Wt(q,Z);break;case"select":var Ut=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!Z.multiple;var pr=Z.value;pr!=null?rt(q,!!Z.multiple,pr,!1):Ut!==!!Z.multiple&&(Z.defaultValue!=null?rt(q,!!Z.multiple,Z.defaultValue,!0):rt(q,!!Z.multiple,Z.multiple?[]:"",!1))}q[fa]=Z}catch(Pr){Pi(p,p.return,Pr)}}break;case 6:if(ds(y,p),yl(p),R&4){if(p.stateNode===null)throw Error(r(162));q=p.stateNode,Z=p.memoizedProps;try{q.nodeValue=Z}catch(Pr){Pi(p,p.return,Pr)}}break;case 3:if(ds(y,p),yl(p),R&4&&T!==null&&T.memoizedState.isDehydrated)try{Jo(y.containerInfo)}catch(Pr){Pi(p,p.return,Pr)}break;case 4:ds(y,p),yl(p);break;case 13:ds(y,p),yl(p),q=p.child,q.flags&8192&&(Z=q.memoizedState!==null,q.stateNode.isHidden=Z,!Z||q.alternate!==null&&q.alternate.memoizedState!==null||(Cg=bn())),R&4&&p0(p);break;case 22:if(qt=T!==null&&T.memoizedState!==null,p.mode&1?(Va=(vt=Va)||qt,ds(y,p),Va=vt):ds(y,p),yl(p),R&8192){if(vt=p.memoizedState!==null,(p.stateNode.isHidden=vt)&&!qt&&(p.mode&1)!==0)for(yr=p,qt=p.child;qt!==null;){for(Ht=yr=qt;yr!==null;){switch(Ut=yr,pr=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:id(4,Ut,Ut.return);break;case 1:Df(Ut,Ut.return);var xr=Ut.stateNode;if(typeof xr.componentWillUnmount=="function"){R=Ut,T=Ut.return;try{y=R,xr.props=y.memoizedProps,xr.state=y.memoizedState,xr.componentWillUnmount()}catch(Pr){Pi(R,T,Pr)}}break;case 5:Df(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){om(Ht);continue}}pr!==null?(pr.return=Ut,yr=pr):om(Ht)}qt=qt.sibling}e:for(qt=null,Ht=p;;){if(Ht.tag===5){if(qt===null){qt=Ht;try{q=Ht.stateNode,vt?(Z=q.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(De=Ht.stateNode,qe=Ht.memoizedProps.style,de=qe!=null&&qe.hasOwnProperty("display")?qe.display:null,De.style.display=Ze("display",de))}catch(Pr){Pi(p,p.return,Pr)}}}else if(Ht.tag===6){if(qt===null)try{Ht.stateNode.nodeValue=vt?"":Ht.memoizedProps}catch(Pr){Pi(p,p.return,Pr)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===p)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===p)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===p)break e;qt===Ht&&(qt=null),Ht=Ht.return}qt===Ht&&(qt=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:ds(y,p),yl(p),R&4&&p0(p);break;case 21:break;default:ds(y,p),yl(p)}}function yl(p){var y=p.flags;if(y&2){try{e:{for(var T=p.return;T!==null;){if(lo(T)){var R=T;break e}T=T.return}throw Error(r(160))}switch(R.tag){case 5:var q=R.stateNode;R.flags&32&&(Me(q,""),R.flags&=-33);var Z=lv(p);uv(p,Z,q);break;case 3:case 4:var de=R.stateNode.containerInfo,De=lv(p);am(p,De,de);break;default:throw Error(r(161))}}catch(qe){Pi(p,p.return,qe)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function x1(p,y,T){yr=p,m0(p)}function m0(p,y,T){for(var R=(p.mode&1)!==0;yr!==null;){var q=yr,Z=q.child;if(q.tag===22&&R){var de=q.memoizedState!==null||Lf;if(!de){var De=q.alternate,qe=De!==null&&De.memoizedState!==null||Va;De=Lf;var vt=Va;if(Lf=de,(Va=qe)&&!vt)for(yr=q;yr!==null;)de=yr,qe=de.child,de.tag===22&&de.memoizedState!==null?Eg(q):qe!==null?(qe.return=de,yr=qe):Eg(q);for(;Z!==null;)yr=Z,m0(Z),Z=Z.sibling;yr=q,Lf=De,Va=vt}g0(p)}else(q.subtreeFlags&8772)!==0&&Z!==null?(Z.return=q,yr=Z):g0(p)}}function g0(p){for(;yr!==null;){var y=yr;if((y.flags&8772)!==0){var T=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Va||nm(5,y);break;case 1:var R=y.stateNode;if(y.flags&4&&!Va)if(T===null)R.componentDidMount();else{var q=y.elementType===y.type?T.memoizedProps:_n(y.type,T.memoizedProps);R.componentDidUpdate(q,T.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var Z=y.updateQueue;Z!==null&&gi(y,Z,R);break;case 3:var de=y.updateQueue;if(de!==null){if(T=null,y.child!==null)switch(y.child.tag){case 5:T=y.child.stateNode;break;case 1:T=y.child.stateNode}gi(y,de,T)}break;case 5:var De=y.stateNode;if(T===null&&y.flags&4){T=De;var qe=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":qe.autoFocus&&T.focus();break;case"img":qe.src&&(T.src=qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var vt=y.alternate;if(vt!==null){var qt=vt.memoizedState;if(qt!==null){var Ht=qt.dehydrated;Ht!==null&&Jo(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Va||y.flags&512&&im(y)}catch(Ut){Pi(y,y.return,Ut)}}if(y===p){yr=null;break}if(T=y.sibling,T!==null){T.return=y.return,yr=T;break}yr=y.return}}function om(p){for(;yr!==null;){var y=yr;if(y===p){yr=null;break}var T=y.sibling;if(T!==null){T.return=y.return,yr=T;break}yr=y.return}}function Eg(p){for(;yr!==null;){var y=yr;try{switch(y.tag){case 0:case 11:case 15:var T=y.return;try{nm(4,y)}catch(qe){Pi(y,T,qe)}break;case 1:var R=y.stateNode;if(typeof R.componentDidMount=="function"){var q=y.return;try{R.componentDidMount()}catch(qe){Pi(y,q,qe)}}var Z=y.return;try{im(y)}catch(qe){Pi(y,Z,qe)}break;case 5:var de=y.return;try{im(y)}catch(qe){Pi(y,de,qe)}}}catch(qe){Pi(y,y.return,qe)}if(y===p){yr=null;break}var De=y.sibling;if(De!==null){De.return=y.return,yr=De;break}yr=y.return}}var y0=Math.ceil,nu=te.ReactCurrentDispatcher,ad=te.ReactCurrentOwner,$s=te.ReactCurrentBatchConfig,Pn=0,Sa=null,ia=null,$a=0,fs=0,jf=sl(0),Wi=0,sm=null,Jc=0,eh=0,dv=0,si=null,ga=null,Cg=0,ic=1/0,Us=null,th=!1,Tg=null,ac=null,rh=!1,iu=null,oc=0,nh=0,ih=null,ah=-1,Mg=0;function uo(){return(Pn&6)!==0?bn():ah!==-1?ah:ah=bn()}function Go(p){return(p.mode&1)===0?1:(Pn&2)!==0&&$a!==0?$a&-$a:Jp.transition!==null?(Mg===0&&(Mg=qd()),Mg):(p=mn,p!==0||(p=window.event,p=p===void 0?16:zl(p.type)),p)}function vl(p,y,T,R){if(50<nh)throw nh=0,ih=null,Error(r(185));Eu(p,T,R),((Pn&2)===0||p!==Sa)&&(p===Sa&&((Pn&2)===0&&(eh|=T),Wi===4&&oh(p,$a)),Co(p,R),T===1&&Pn===0&&(y.mode&1)===0&&(ic=bn()+500,ro&&No()))}function Co(p,y){var T=p.callbackNode;lg(p,y);var R=Eh(p,p===Sa?$a:0);if(R===0)T!==null&&vn(T),p.callbackNode=null,p.callbackPriority=0;else if(y=R&-R,p.callbackPriority!==y){if(T!=null&&vn(T),y===1)p.tag===0?nv(_0.bind(null,p)):zo(_0.bind(null,p)),xg(function(){(Pn&6)===0&&No()}),T=null;else{switch(Th(R)){case 1:T=Yi;break;case 4:T=Oi;break;case 16:T=Qr;break;case 536870912:T=Oo;break;default:T=Qr}T=C0(T,zf.bind(null,p))}p.callbackPriority=y,p.callbackNode=T}}function zf(p,y){if(ah=-1,Mg=0,(Pn&6)!==0)throw Error(r(327));var T=p.callbackNode;if(Nf()&&p.callbackNode!==T)return null;var R=Eh(p,p===Sa?$a:0);if(R===0)return null;if((R&30)!==0||(R&p.expiredLanes)!==0||y)y=Ag(p,R);else{y=R;var q=Pn;Pn|=2;var Z=mv();(Sa!==p||$a!==y)&&(Us=null,ic=bn()+500,_l(p,y));do try{b0();break}catch(De){x0(p,De)}while(!0);Sf(),nu.current=Z,Pn=q,ia!==null?y=0:(Sa=null,$a=0,y=Wi)}if(y!==0){if(y===2&&(q=Ac(p),q!==0&&(R=q,y=lm(p,q))),y===1)throw T=sm,_l(p,0),oh(p,R),Co(p,bn()),T;if(y===6)oh(p,R);else{if(q=p.current.alternate,(R&30)===0&&!v0(q)&&(y=Ag(p,R),y===2&&(Z=Ac(p),Z!==0&&(R=Z,y=lm(p,Z))),y===1))throw T=sm,_l(p,0),oh(p,R),Co(p,bn()),T;switch(p.finishedWork=q,p.finishedLanes=R,y){case 0:case 1:throw Error(r(345));case 2:xl(p,ga,Us);break;case 3:if(oh(p,R),(R&130023424)===R&&(y=Cg+500-bn(),10<y)){if(Eh(p,0)!==0)break;if(q=p.suspendedLanes,(q&R)!==R){uo(),p.pingedLanes|=p.suspendedLanes&q;break}p.timeoutHandle=Uu(xl.bind(null,p,ga,Us),y);break}xl(p,ga,Us);break;case 4:if(oh(p,R),(R&4194240)===R)break;for(y=p.eventTimes,q=-1;0<R;){var de=31-$i(R);Z=1<<de,de=y[de],de>q&&(q=de),R&=~Z}if(R=q,R=bn()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*y0(R/1960))-R,10<R){p.timeoutHandle=Uu(xl.bind(null,p,ga,Us),R);break}xl(p,ga,Us);break;case 5:xl(p,ga,Us);break;default:throw Error(r(329))}}}return Co(p,bn()),p.callbackNode===T?zf.bind(null,p):null}function lm(p,y){var T=si;return p.current.memoizedState.isDehydrated&&(_l(p,y).flags|=256),p=Ag(p,y),p!==2&&(y=ga,ga=T,y!==null&&kg(y)),p}function kg(p){ga===null?ga=p:ga.push.apply(ga,p)}function v0(p){for(var y=p;;){if(y.flags&16384){var T=y.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var R=0;R<T.length;R++){var q=T[R],Z=q.getSnapshot;q=q.value;try{if(!ns(Z(),q))return!1}catch{return!1}}}if(T=y.child,y.subtreeFlags&16384&&T!==null)T.return=y,y=T;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function oh(p,y){for(y&=~dv,y&=~eh,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var T=31-$i(y),R=1<<T;p[T]=-1,y&=~R}}function _0(p){if((Pn&6)!==0)throw Error(r(327));Nf();var y=Eh(p,0);if((y&1)===0)return Co(p,bn()),null;var T=Ag(p,y);if(p.tag!==0&&T===2){var R=Ac(p);R!==0&&(y=R,T=lm(p,R))}if(T===1)throw T=sm,_l(p,0),oh(p,y),Co(p,bn()),T;if(T===6)throw Error(r(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,xl(p,ga,Us),Co(p,bn()),null}function fv(p,y){var T=Pn;Pn|=1;try{return p(y)}finally{Pn=T,Pn===0&&(ic=bn()+500,ro&&No())}}function od(p){iu!==null&&iu.tag===0&&(Pn&6)===0&&Nf();var y=Pn;Pn|=1;var T=$s.transition,R=mn;try{if($s.transition=null,mn=1,p)return p()}finally{mn=R,$s.transition=T,Pn=y,(Pn&6)===0&&No()}}function pv(){fs=jf.current,Kn(jf)}function _l(p,y){p.finishedWork=null,p.finishedLanes=0;var T=p.timeoutHandle;if(T!==-1&&(p.timeoutHandle=-1,pf(T)),ia!==null)for(T=ia.return;T!==null;){var R=T;switch(Kl(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Hh();break;case 3:js(),Kn(ra),Kn(ta),td();break;case 5:Xc(R);break;case 4:js();break;case 13:Kn(Gn);break;case 19:Kn(Gn);break;case 10:Pf(R.type._context);break;case 22:case 23:pv()}T=T.return}if(Sa=p,ia=p=sc(p.current,null),$a=fs=y,Wi=0,sm=null,dv=eh=Jc=0,ga=si=null,gr!==null){for(y=0;y<gr.length;y++)if(T=gr[y],R=T.interleaved,R!==null){T.interleaved=null;var q=R.next,Z=T.pending;if(Z!==null){var de=Z.next;Z.next=q,R.next=de}T.pending=R}gr=null}return p}function x0(p,y){do{var T=ia;try{if(Sf(),ul.current=Jn,ec){for(var R=Wn.memoizedState;R!==null;){var q=R.queue;q!==null&&(q.pending=null),R=R.next}ec=!1}if(hl=0,ji=ai=Wn=null,tu=!1,tc=0,ad.current=null,T===null||T.return===null){Wi=1,sm=y,ia=null;break}e:{var Z=p,de=T.return,De=T,qe=y;if(y=$a,De.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var vt=qe,qt=De,Ht=qt.tag;if((qt.mode&1)===0&&(Ht===0||Ht===11||Ht===15)){var Ut=qt.alternate;Ut?(qt.updateQueue=Ut.updateQueue,qt.memoizedState=Ut.memoizedState,qt.lanes=Ut.lanes):(qt.updateQueue=null,qt.memoizedState=null)}var pr=Dn(de);if(pr!==null){pr.flags&=-257,zi(pr,de,De,Z,y),pr.mode&1&&zn(Z,vt,y),y=pr,qe=vt;var xr=y.updateQueue;if(xr===null){var Pr=new Set;Pr.add(qe),y.updateQueue=Pr}else xr.add(qe);break e}else{if((y&1)===0){zn(Z,vt,y),gv();break e}qe=Error(r(426))}}else if(Xn&&De.mode&1){var Ei=Dn(de);if(Ei!==null){(Ei.flags&65536)===0&&(Ei.flags|=256),zi(Ei,de,De,Z,y),bf(Fs(qe,De));break e}}Z=qe=Fs(qe,De),Wi!==4&&(Wi=2),si===null?si=[Z]:si.push(Z),Z=de;do{switch(Z.tag){case 3:Z.flags|=65536,y&=-y,Z.lanes|=y;var lt=Uo(Z,qe,y);Kc(Z,lt);break e;case 1:De=qe;var He=Z.type,ft=Z.stateNode;if((Z.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(ac===null||!ac.has(ft)))){Z.flags|=65536,y&=-y,Z.lanes|=y;var Qt=qo(Z,De,y);Kc(Z,Qt);break e}}Z=Z.return}while(Z!==null)}Ig(T)}catch(kr){y=kr,ia===T&&T!==null&&(ia=T=T.return);continue}break}while(!0)}function mv(){var p=nu.current;return nu.current=Jn,p===null?Jn:p}function gv(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),Sa===null||(Jc&268435455)===0&&(eh&268435455)===0||oh(Sa,$a)}function Ag(p,y){var T=Pn;Pn|=2;var R=mv();(Sa!==p||$a!==y)&&(Us=null,_l(p,y));do try{b1();break}catch(q){x0(p,q)}while(!0);if(Sf(),Pn=T,nu.current=R,ia!==null)throw Error(r(261));return Sa=null,$a=0,Wi}function b1(){for(;ia!==null;)w0(ia)}function b0(){for(;ia!==null&&!Tn();)w0(ia)}function w0(p){var y=vv(p.alternate,p,fs);p.memoizedProps=p.pendingProps,y===null?Ig(p):ia=y,ad.current=null}function Ig(p){var y=p;do{var T=y.alternate;if(p=y.return,(y.flags&32768)===0){if(T=v1(T,y,fs),T!==null){ia=T;return}}else{if(T=d0(T,y),T!==null){T.flags&=32767,ia=T;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Wi=6,ia=null;return}}if(y=y.sibling,y!==null){ia=y;return}ia=y=p}while(y!==null);Wi===0&&(Wi=5)}function xl(p,y,T){var R=mn,q=$s.transition;try{$s.transition=null,mn=1,yv(p,y,T,R)}finally{$s.transition=q,mn=R}return null}function yv(p,y,T,R){do Nf();while(iu!==null);if((Pn&6)!==0)throw Error(r(327));T=p.finishedWork;var q=p.finishedLanes;if(T===null)return null;if(p.finishedWork=null,p.finishedLanes=0,T===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0;var Z=T.lanes|T.childLanes;if(Mp(p,Z),p===Sa&&(ia=Sa=null,$a=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||rh||(rh=!0,C0(Qr,function(){return Nf(),null})),Z=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||Z){Z=$s.transition,$s.transition=null;var de=mn;mn=1;var De=Pn;Pn|=4,ad.current=null,_1(p,T),hv(T,p),rf(Wp),Tu=!!$u,Wp=$u=null,p.current=T,x1(T),Ja(),Pn=De,mn=de,$s.transition=Z}else p.current=T;if(rh&&(rh=!1,iu=p,oc=q),Z=p.pendingLanes,Z===0&&(ac=null),Rn(T.stateNode),Co(p,bn()),y!==null)for(R=p.onRecoverableError,T=0;T<y.length;T++)q=y[T],R(q.value,{componentStack:q.stack,digest:q.digest});if(th)throw th=!1,p=Tg,Tg=null,p;return(oc&1)!==0&&p.tag!==0&&Nf(),Z=p.pendingLanes,(Z&1)!==0?p===ih?nh++:(nh=0,ih=p):nh=0,No(),null}function Nf(){if(iu!==null){var p=Th(oc),y=$s.transition,T=mn;try{if($s.transition=null,mn=16>p?16:p,iu===null)var R=!1;else{if(p=iu,iu=null,oc=0,(Pn&6)!==0)throw Error(r(331));var q=Pn;for(Pn|=4,yr=p.current;yr!==null;){var Z=yr,de=Z.child;if((yr.flags&16)!==0){var De=Z.deletions;if(De!==null){for(var qe=0;qe<De.length;qe++){var vt=De[qe];for(yr=vt;yr!==null;){var qt=yr;switch(qt.tag){case 0:case 11:case 15:id(8,qt,Z)}var Ht=qt.child;if(Ht!==null)Ht.return=qt,yr=Ht;else for(;yr!==null;){qt=yr;var Ut=qt.sibling,pr=qt.return;if(Rf(qt),qt===vt){yr=null;break}if(Ut!==null){Ut.return=pr,yr=Ut;break}yr=pr}}}var xr=Z.alternate;if(xr!==null){var Pr=xr.child;if(Pr!==null){xr.child=null;do{var Ei=Pr.sibling;Pr.sibling=null,Pr=Ei}while(Pr!==null)}}yr=Z}}if((Z.subtreeFlags&2064)!==0&&de!==null)de.return=Z,yr=de;else e:for(;yr!==null;){if(Z=yr,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:id(9,Z,Z.return)}var lt=Z.sibling;if(lt!==null){lt.return=Z.return,yr=lt;break e}yr=Z.return}}var He=p.current;for(yr=He;yr!==null;){de=yr;var ft=de.child;if((de.subtreeFlags&2064)!==0&&ft!==null)ft.return=de,yr=ft;else e:for(de=He;yr!==null;){if(De=yr,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:nm(9,De)}}catch(kr){Pi(De,De.return,kr)}if(De===de){yr=null;break e}var Qt=De.sibling;if(Qt!==null){Qt.return=De.return,yr=Qt;break e}yr=De.return}}if(Pn=q,No(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(So,p)}catch{}R=!0}return R}finally{mn=T,$s.transition=y}}return!1}function S0(p,y,T){y=Fs(T,y),y=Uo(p,y,1),p=Jl(p,y,1),y=uo(),p!==null&&(Eu(p,1,y),Co(p,y))}function Pi(p,y,T){if(p.tag===3)S0(p,p,T);else for(;y!==null;){if(y.tag===3){S0(y,p,T);break}else if(y.tag===1){var R=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(ac===null||!ac.has(R))){p=Fs(T,p),p=qo(y,p,1),y=Jl(y,p,1),p=uo(),y!==null&&(Eu(y,1,p),Co(y,p));break}}y=y.return}}function P0(p,y,T){var R=p.pingCache;R!==null&&R.delete(y),y=uo(),p.pingedLanes|=p.suspendedLanes&T,Sa===p&&($a&T)===T&&(Wi===4||Wi===3&&($a&130023424)===$a&&500>bn()-Cg?_l(p,0):dv|=T),Co(p,y)}function E0(p,y){y===0&&((p.mode&1)===0?y=1:(y=Pu,Pu<<=1,(Pu&130023424)===0&&(Pu=4194304)));var T=uo();p=$o(p,y),p!==null&&(Eu(p,y,T),Co(p,T))}function w1(p){var y=p.memoizedState,T=0;y!==null&&(T=y.retryLane),E0(p,T)}function um(p,y){var T=0;switch(p.tag){case 13:var R=p.stateNode,q=p.memoizedState;q!==null&&(T=q.retryLane);break;case 19:R=p.stateNode;break;default:throw Error(r(314))}R!==null&&R.delete(y),E0(p,T)}var vv;vv=function(p,y,T){if(p!==null)if(p.memoizedProps!==y.pendingProps||ra.current)Ba=!0;else{if((p.lanes&T)===0&&(y.flags&128)===0)return Ba=!1,If(p,y,T);Ba=(p.flags&131072)!==0}else Ba=!1,Xn&&(y.flags&1048576)!==0&&Kh(y,Zh,y.index);switch(y.lanes=0,y.tag){case 2:var R=y.type;rc(p,y),p=y.pendingProps;var q=Hl(y,ta.current);Ls(y,T),q=m(null,y,R,p,q,T);var Z=v();return y.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,xa(R)?(Z=!0,ls(y)):Z=!1,y.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,io(y),q.updater=cs,y.stateNode=q,q._reactInternals=y,dl(y,R,p,T),y=rd(null,y,R,!0,Z,T)):(y.tag=0,Xn&&Z&&Xh(y),ba(null,y,q,T),y=y.child),y;case 16:R=y.elementType;e:{switch(rc(p,y),p=y.pendingProps,q=R._init,R=q(R._payload),y.type=R,q=y.tag=P1(R),p=_n(R,p),q){case 0:y=Vs(null,y,R,p,T);break e;case 1:y=ml(null,y,R,p,T);break e;case 11:y=ru(null,y,R,p,T);break e;case 14:y=bg(null,y,R,_n(R.type,p),T);break e}throw Error(r(306,R,""))}return y;case 0:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),Vs(p,y,R,q,T);case 1:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),ml(p,y,R,q,T);case 3:e:{if(Mf(y),p===null)throw Error(r(387));R=y.pendingProps,Z=y.memoizedState,q=Z.element,Ef(p,y),qn(y,R,null,T);var de=y.memoizedState;if(R=de.element,Z.isDehydrated)if(Z={element:R,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},y.updateQueue.baseState=Z,y.memoizedState=Z,y.flags&256){q=Fs(Error(r(423)),y),y=nd(p,y,R,T,q);break e}else if(R!==q){q=Fs(Error(r(424)),y),y=nd(p,y,R,T,q);break e}else for(ma=ol(y.stateNode.containerInfo.firstChild),pa=y,Xn=!0,Na=null,T=Zc(y,null,R,T),y.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Yl(),R===q){y=nc(p,y,T);break e}ba(p,y,R,T)}y=y.child}return y;case 5:return zs(y),p===null&&Yp(y),R=y.type,q=y.pendingProps,Z=p!==null?p.memoizedProps:null,de=q.children,ff(R,q)?de=null:Z!==null&&ff(R,Z)&&(y.flags|=32),pl(p,y),ba(p,y,de,T),y.child;case 6:return p===null&&Yp(y),null;case 13:return iv(p,y,T);case 4:return ed(y,y.stateNode.containerInfo),R=y.pendingProps,p===null?y.child=Hc(y,null,R,T):ba(p,y,R,T),y.child;case 11:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),ru(p,y,R,q,T);case 7:return ba(p,y,y.pendingProps,T),y.child;case 8:return ba(p,y,y.pendingProps.children,T),y.child;case 12:return ba(p,y,y.pendingProps.children,T),y.child;case 10:e:{if(R=y.type._context,q=y.pendingProps,Z=y.memoizedProps,de=q.value,gn(Zu,R._currentValue),R._currentValue=de,Z!==null)if(ns(Z.value,de)){if(Z.children===q.children&&!ra.current){y=nc(p,y,T);break e}}else for(Z=y.child,Z!==null&&(Z.return=y);Z!==null;){var De=Z.dependencies;if(De!==null){de=Z.child;for(var qe=De.firstContext;qe!==null;){if(qe.context===R){if(Z.tag===1){qe=Ds(-1,T&-T),qe.tag=2;var vt=Z.updateQueue;if(vt!==null){vt=vt.shared;var qt=vt.pending;qt===null?qe.next=qe:(qe.next=qt.next,qt.next=qe),vt.pending=qe}}Z.lanes|=T,qe=Z.alternate,qe!==null&&(qe.lanes|=T),Eo(Z.return,T,y),De.lanes|=T;break}qe=qe.next}}else if(Z.tag===10)de=Z.type===y.type?null:Z.child;else if(Z.tag===18){if(de=Z.return,de===null)throw Error(r(341));de.lanes|=T,De=de.alternate,De!==null&&(De.lanes|=T),Eo(de,T,y),de=Z.sibling}else de=Z.child;if(de!==null)de.return=Z;else for(de=Z;de!==null;){if(de===y){de=null;break}if(Z=de.sibling,Z!==null){Z.return=de.return,de=Z;break}de=de.return}Z=de}ba(p,y,q.children,T),y=y.child}return y;case 9:return q=y.type,R=y.pendingProps.children,Ls(y,T),q=ar(q),R=R(q),y.flags|=1,ba(p,y,R,T),y.child;case 14:return R=y.type,q=_n(R,y.pendingProps),q=_n(R.type,q),bg(p,y,R,q,T);case 15:return em(p,y,y.type,y.pendingProps,T);case 17:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),rc(p,y),y.tag=1,xa(R)?(p=!0,ls(y)):p=!1,Ls(y,T),hs(y,R,q),dl(y,R,q,T),rd(null,y,R,!0,p,T);case 19:return ov(p,y,T);case 22:return Tf(p,y,T)}throw Error(r(156,y.tag))};function C0(p,y){return ri(p,y)}function S1(p,y,T,R){this.tag=p,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(p,y,T,R){return new S1(p,y,T,R)}function _v(p){return p=p.prototype,!(!p||!p.isReactComponent)}function P1(p){if(typeof p=="function")return _v(p)?1:0;if(p!=null){if(p=p.$$typeof,p===Ne)return 11;if(p===pt)return 14}return 2}function sc(p,y){var T=p.alternate;return T===null?(T=qs(p.tag,y,p.key,p.mode),T.elementType=p.elementType,T.type=p.type,T.stateNode=p.stateNode,T.alternate=p,p.alternate=T):(T.pendingProps=y,T.type=p.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=p.flags&14680064,T.childLanes=p.childLanes,T.lanes=p.lanes,T.child=p.child,T.memoizedProps=p.memoizedProps,T.memoizedState=p.memoizedState,T.updateQueue=p.updateQueue,y=p.dependencies,T.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},T.sibling=p.sibling,T.index=p.index,T.ref=p.ref,T}function Ff(p,y,T,R,q,Z){var de=2;if(R=p,typeof p=="function")_v(p)&&(de=1);else if(typeof p=="string")de=5;else e:switch(p){case ne:return sh(T.children,q,Z,y);case be:de=8,q|=8;break;case xe:return p=qs(12,T,y,q|2),p.elementType=xe,p.lanes=Z,p;case Xe:return p=qs(13,T,y,q),p.elementType=Xe,p.lanes=Z,p;case ut:return p=qs(19,T,y,q),p.elementType=ut,p.lanes=Z,p;case wt:return cm(T,q,Z,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case $e:de=10;break e;case Ee:de=9;break e;case Ne:de=11;break e;case pt:de=14;break e;case gt:de=16,R=null;break e}throw Error(r(130,p==null?p:typeof p,""))}return y=qs(de,T,y,q),y.elementType=p,y.type=R,y.lanes=Z,y}function sh(p,y,T,R){return p=qs(7,p,R,y),p.lanes=T,p}function cm(p,y,T,R){return p=qs(22,p,R,y),p.elementType=wt,p.lanes=T,p.stateNode={isHidden:!1},p}function Og(p,y,T){return p=qs(6,p,null,y),p.lanes=T,p}function xv(p,y,T){return y=qs(4,p.children!==null?p.children:[],p.key,y),y.lanes=T,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function Lg(p,y,T,R,q){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=R,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function bv(p,y,T,R,q,Z,de,De,qe){return p=new Lg(p,y,T,De,qe),y===1?(y=1,Z===!0&&(y|=8)):y=0,Z=qs(3,null,null,y),p.current=Z,Z.stateNode=p,Z.memoizedState={element:R,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},io(Z),p}function T0(p,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:R==null?null:""+R,children:p,containerInfo:y,implementation:T}}function M0(p){if(!p)return Is;p=p._reactInternals;e:{if(Bt(p)!==p||p.tag!==1)throw Error(r(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(xa(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(r(171))}if(p.tag===1){var T=p.type;if(xa(T))return vf(p,T,y)}return y}function k0(p,y,T,R,q,Z,de,De,qe){return p=bv(T,R,!0,p,q,Z,de,De,qe),p.context=M0(null),T=p.current,R=uo(),q=Go(T),Z=Ds(R,q),Z.callback=y??null,Jl(T,Z,q),p.current.lanes=q,Eu(p,q,R),Co(p,R),p}function Dg(p,y,T,R){var q=y.current,Z=uo(),de=Go(q);return T=M0(T),y.context===null?y.context=T:y.pendingContext=T,y=Ds(Z,de),y.payload={element:p},R=R===void 0?null:R,R!==null&&(y.callback=R),p=Jl(q,y,de),p!==null&&(vl(p,q,de,Z),Cf(p,q,de)),de}function hm(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function A0(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var T=p.retryLane;p.retryLane=T!==0&&T<y?T:y}}function wv(p,y){A0(p,y),(p=p.alternate)&&A0(p,y)}function aa(){return null}var Bf=typeof reportError=="function"?reportError:function(p){console.error(p)};function Sv(p){this._internalRoot=p}Rg.prototype.render=Sv.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(r(409));Dg(p,y,null,null)},Rg.prototype.unmount=Sv.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;od(function(){Dg(null,p,null,null)}),y[jo]=null}};function Rg(p){this._internalRoot=p}Rg.prototype.unstable_scheduleHydration=function(p){if(p){var y=Ic();p={blockedOn:null,target:p,priority:y};for(var T=0;T<wn.length&&y!==0&&y<wn[T].priority;T++);wn.splice(T,0,p),T===0&&eo(p)}};function jg(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function dm(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function I0(){}function O0(p,y,T,R,q){if(q){if(typeof R=="function"){var Z=R;R=function(){var vt=hm(de);Z.call(vt)}}var de=k0(y,R,p,0,null,!1,!1,"",I0);return p._reactRootContainer=de,p[jo]=de.current,Fu(p.nodeType===8?p.parentNode:p),od(),de}for(;q=p.lastChild;)p.removeChild(q);if(typeof R=="function"){var De=R;R=function(){var vt=hm(qe);De.call(vt)}}var qe=bv(p,0,!1,null,null,!1,!1,"",I0);return p._reactRootContainer=qe,p[jo]=qe.current,Fu(p.nodeType===8?p.parentNode:p),od(function(){Dg(y,qe,T,R)}),qe}function fm(p,y,T,R,q){var Z=T._reactRootContainer;if(Z){var de=Z;if(typeof q=="function"){var De=q;q=function(){var qe=hm(de);De.call(qe)}}Dg(y,de,p,q)}else de=O0(T,y,p,q,R);return hm(de)}Ap=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var T=rl(y.pendingLanes);T!==0&&(kp(y,T|1),Co(y,bn()),(Pn&6)===0&&(ic=bn()+500,No()))}break;case 13:od(function(){var R=$o(p,1);if(R!==null){var q=uo();vl(R,p,1,q)}}),wv(p,1)}},Ll=function(p){if(p.tag===13){var y=$o(p,134217728);if(y!==null){var T=uo();vl(y,p,134217728,T)}wv(p,134217728)}},Gd=function(p){if(p.tag===13){var y=Go(p),T=$o(p,y);if(T!==null){var R=uo();vl(T,p,y,R)}wv(p,y)}},Ic=function(){return mn},nl=function(p,y){var T=mn;try{return mn=p,y()}finally{mn=T}},Mr=function(p,y,T){switch(y){case"input":if(Wr(p,T),y=T.name,T.type==="radio"&&y!=null){for(T=p;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<T.length;y++){var R=T[y];if(R!==p&&R.form===p.form){var q=Wh(R);if(!q)throw Error(r(90));St(R),Wr(R,q)}}}break;case"textarea":Wt(p,T);break;case"select":y=T.value,y!=null&&rt(p,!!T.multiple,y,!1)}},Ir=fv,Zr=od;var Vf={usingClientEntryPoint:!1,Events:[os,ss,Wh,sn,ti,fv]},sd={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L0={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Yr(p),p===null?null:p.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||aa,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{So=pm.inject(L0),jr=pm}catch{}}return Ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vf,Ws.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jg(y))throw Error(r(200));return T0(p,y,null,T)},Ws.createRoot=function(p,y){if(!jg(p))throw Error(r(299));var T=!1,R="",q=Bf;return y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onRecoverableError!==void 0&&(q=y.onRecoverableError)),y=bv(p,1,!1,null,null,T,!1,R,q),p[jo]=y.current,Fu(p.nodeType===8?p.parentNode:p),new Sv(y)},Ws.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=Yr(y),p=p===null?null:p.stateNode,p},Ws.flushSync=function(p){return od(p)},Ws.hydrate=function(p,y,T){if(!dm(y))throw Error(r(200));return fm(null,p,y,!0,T)},Ws.hydrateRoot=function(p,y,T){if(!jg(p))throw Error(r(405));var R=T!=null&&T.hydratedSources||null,q=!1,Z="",de=Bf;if(T!=null&&(T.unstable_strictMode===!0&&(q=!0),T.identifierPrefix!==void 0&&(Z=T.identifierPrefix),T.onRecoverableError!==void 0&&(de=T.onRecoverableError)),y=k0(y,null,p,1,T??null,q,!1,Z,de),p[jo]=y.current,Fu(p),R)for(p=0;p<R.length;p++)T=R[p],q=T._getVersion,q=q(T._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[T,q]:y.mutableSourceEagerHydrationData.push(T,q);return new Rg(y)},Ws.render=function(p,y,T){if(!dm(y))throw Error(r(200));return fm(null,p,y,!1,T)},Ws.unmountComponentAtNode=function(p){if(!dm(p))throw Error(r(40));return p._reactRootContainer?(od(function(){fm(null,null,p,!1,function(){p._reactRootContainer=null,p[jo]=null})}),!0):!1},Ws.unstable_batchedUpdates=fv,Ws.unstable_renderSubtreeIntoContainer=function(p,y,T,R){if(!dm(T))throw Error(r(200));if(p==null||p._reactInternals===void 0)throw Error(r(38));return fm(p,y,T,!1,R)},Ws.version="18.3.1-next-f1338f8080-20240426",Ws}var Ok;function iz(){if(Ok)return uS.exports;Ok=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uS.exports=i$(),uS.exports}var Lk;function a$(){if(Lk)return Q0;Lk=1;var e=iz();return Q0.createRoot=e.createRoot,Q0.hydrateRoot=e.hydrateRoot,Q0}var o$=a$();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var az=e=>{throw TypeError(e)},s$=(e,t,r)=>t.has(e)||az("Cannot "+r),dS=(e,t,r)=>(s$(e,t,"read from private field"),r?r.call(e):t.get(e)),l$=(e,t,r)=>t.has(e)?az("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Dk="popstate";function u$(e={}){function t(n,l){let{pathname:h,search:d,hash:o}=n.location;return a_("",{pathname:h,search:d,hash:o},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:xh(l)}return h$(t,r,null,e)}function dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ca(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c$(){return Math.random().toString(36).substring(2,10)}function Rk(e,t){return{usr:e.state,key:e.key,idx:t}}function a_(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wp(t):t,state:r,key:t&&t.key||n||c$()}}function xh({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function h$(e,t,r,n={}){let{window:l=document.defaultView,v5Compat:h=!1}=n,d=l.history,o="POP",_=null,S=P();S==null&&(S=0,d.replaceState({...d.state,idx:S},""));function P(){return(d.state||{idx:null}).idx}function M(){o="POP";let L=P(),K=L==null?null:L-S;S=L,_&&_({action:o,location:F.location,delta:K})}function O(L,K){o="PUSH";let Q=a_(F.location,L,K);S=P()+1;let re=Rk(Q,S),te=F.createHref(Q);try{d.pushState(re,"",te)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;l.location.assign(te)}h&&_&&_({action:o,location:F.location,delta:1})}function z(L,K){o="REPLACE";let Q=a_(F.location,L,K);S=P();let re=Rk(Q,S),te=F.createHref(Q);d.replaceState(re,"",te),h&&_&&_({action:o,location:F.location,delta:0})}function B(L){return oz(L)}let F={get action(){return o},get location(){return e(l,d)},listen(L){if(_)throw new Error("A history only accepts one active listener");return l.addEventListener(Dk,M),_=L,()=>{l.removeEventListener(Dk,M),_=null}},createHref(L){return t(l,L)},createURL:B,encodeLocation(L){let K=B(L);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:O,replace:z,go(L){return d.go(L)}};return F}function oz(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),dn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xh(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var Kv,jk=class{constructor(e){if(l$(this,Kv,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(dS(this,Kv).has(e))return dS(this,Kv).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){dS(this,Kv).set(e,t)}};Kv=new WeakMap;var d$=new Set(["lazy","caseSensitive","path","id","index","children"]);function f$(e){return d$.has(e)}var p$=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function m$(e){return p$.has(e)}function g$(e){return e.index===!0}function o_(e,t,r=[],n={},l=!1){return e.map((h,d)=>{let o=[...r,String(d)],_=typeof h.id=="string"?h.id:o.join("-");if(dn(h.index!==!0||!h.children,"Cannot specify children on an index route"),dn(l||!n[_],`Found a route id collision on id "${_}".  Route id's must be globally unique within Data Router usages`),g$(h)){let S={...h,id:_};return n[_]=zk(S,t(S)),S}else{let S={...h,id:_,children:void 0};return n[_]=zk(S,t(S)),h.children&&(S.children=o_(h.children,t,o,n,l)),S}})}function zk(e,t){return Object.assign(e,{...t,...typeof t.lazy=="object"&&t.lazy!=null?{lazy:{...e.lazy,...t.lazy}}:{}})}function Jf(e,t,r="/"){return Xv(e,t,r,!1)}function Xv(e,t,r,n){let l=typeof t=="string"?wp(t):t,h=gu(l.pathname||"/",r);if(h==null)return null;let d=sz(e);v$(d);let o=null;for(let _=0;o==null&&_<d.length;++_){let S=k$(h);o=T$(d[_],S,n)}return o}function y$(e,t){let{route:r,pathname:n,params:l}=e;return{id:r.id,pathname:n,params:l,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function sz(e,t=[],r=[],n="",l=!1){let h=(d,o,_=l,S)=>{let P={relativePath:S===void 0?d.path||"":S,caseSensitive:d.caseSensitive===!0,childrenIndex:o,route:d};if(P.relativePath.startsWith("/")){if(!P.relativePath.startsWith(n)&&_)return;dn(P.relativePath.startsWith(n),`Absolute route path "${P.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),P.relativePath=P.relativePath.slice(n.length)}let M=yh([n,P.relativePath]),O=r.concat(P);d.children&&d.children.length>0&&(dn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),sz(d.children,t,O,M,_)),!(d.path==null&&!d.index)&&t.push({path:M,score:E$(M,d.index),routesMeta:O})};return e.forEach((d,o)=>{var _;if(d.path===""||!((_=d.path)!=null&&_.includes("?")))h(d,o);else for(let S of lz(d.path))h(d,o,!0,S)}),t}function lz(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,l=r.endsWith("?"),h=r.replace(/\?$/,"");if(n.length===0)return l?[h,""]:[h];let d=lz(n.join("/")),o=[];return o.push(...d.map(_=>_===""?h:[h,_].join("/"))),l&&o.push(...d),o.map(_=>e.startsWith("/")&&_===""?"/":_)}function v$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:C$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var _$=/^:[\w-]+$/,x$=3,b$=2,w$=1,S$=10,P$=-2,Nk=e=>e==="*";function E$(e,t){let r=e.split("/"),n=r.length;return r.some(Nk)&&(n+=P$),t&&(n+=b$),r.filter(l=>!Nk(l)).reduce((l,h)=>l+(_$.test(h)?x$:h===""?w$:S$),n)}function C$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function T$(e,t,r=!1){let{routesMeta:n}=e,l={},h="/",d=[];for(let o=0;o<n.length;++o){let _=n[o],S=o===n.length-1,P=h==="/"?t:t.slice(h.length)||"/",M=Ux({path:_.relativePath,caseSensitive:_.caseSensitive,end:S},P),O=_.route;if(!M&&S&&r&&!n[n.length-1].route.index&&(M=Ux({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},P)),!M)return null;Object.assign(l,M.params),d.push({params:l,pathname:yh([h,M.pathname]),pathnameBase:L$(yh([h,M.pathnameBase])),route:O}),M.pathnameBase!=="/"&&(h=yh([h,M.pathnameBase]))}return d}function Ux(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=M$(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let h=l[0],d=h.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:n.reduce((S,{paramName:P,isOptional:M},O)=>{if(P==="*"){let B=o[O]||"";d=h.slice(0,h.length-B.length).replace(/(.)\/+$/,"$1")}const z=o[O];return M&&!z?S[P]=void 0:S[P]=(z||"").replace(/%2F/g,"/"),S},{}),pathname:h,pathnameBase:d,pattern:e}}function M$(e,t=!1,r=!0){ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,o,_)=>(n.push({paramName:o,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function k$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function A$({basename:e,pathname:t}){return t==="/"?e:yh([e,t])}var I$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ow=e=>I$.test(e);function O$(e,t="/"){let{pathname:r,search:n="",hash:l=""}=typeof e=="string"?wp(e):e,h;if(r)if(ow(r))h=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),ca(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${r}`)}r.startsWith("/")?h=Fk(r.substring(1),"/"):h=Fk(r,t)}else h=t;return{pathname:h,search:D$(n),hash:R$(l)}}function Fk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function fS(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function sw(e){let t=uz(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function lw(e,t,r,n=!1){let l;typeof e=="string"?l=wp(e):(l={...e},dn(!l.pathname||!l.pathname.includes("?"),fS("?","pathname","search",l)),dn(!l.pathname||!l.pathname.includes("#"),fS("#","pathname","hash",l)),dn(!l.search||!l.search.includes("#"),fS("#","search","hash",l)));let h=e===""||l.pathname==="",d=h?"/":l.pathname,o;if(d==null)o=r;else{let M=t.length-1;if(!n&&d.startsWith("..")){let O=d.split("/");for(;O[0]==="..";)O.shift(),M-=1;l.pathname=O.join("/")}o=M>=0?t[M]:"/"}let _=O$(l,o),S=d&&d!=="/"&&d.endsWith("/"),P=(h||d===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(S||P)&&(_.pathname+="/"),_}var yh=e=>e.join("/").replace(/\/\/+/g,"/"),L$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,R$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,uw=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function s_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function I_(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fp=Symbol("Uninstrumented");function j$(e,t){let r={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(l=>l({id:t.id,index:t.index,path:t.path,instrument(h){let d=Object.keys(r);for(let o of d)h[o]&&r[o].push(h[o])}}));let n={};if(typeof t.lazy=="function"&&r.lazy.length>0){let l=ty(r.lazy,t.lazy,()=>{});l&&(n.lazy=l)}if(typeof t.lazy=="object"){let l=t.lazy;["middleware","loader","action"].forEach(h=>{let d=l[h],o=r[`lazy.${h}`];if(typeof d=="function"&&o.length>0){let _=ty(o,d,()=>{});_&&(n.lazy=Object.assign(n.lazy||{},{[h]:_}))}})}return["loader","action"].forEach(l=>{let h=t[l];if(typeof h=="function"&&r[l].length>0){let d=h[fp]??h,o=ty(r[l],d,(..._)=>Bk(_[0]));o&&(o[fp]=d,n[l]=o)}}),t.middleware&&t.middleware.length>0&&r.middleware.length>0&&(n.middleware=t.middleware.map(l=>{let h=l[fp]??l,d=ty(r.middleware,h,(...o)=>Bk(o[0]));return d?(d[fp]=h,d):l})),n}function z$(e,t){let r={navigate:[],fetch:[]};if(t.forEach(n=>n({instrument(l){let h=Object.keys(l);for(let d of h)l[d]&&r[d].push(l[d])}})),r.navigate.length>0){let n=e.navigate[fp]??e.navigate,l=ty(r.navigate,n,(...h)=>{let[d,o]=h;return{to:typeof d=="number"||typeof d=="string"?d:d?xh(d):".",...Vk(e,o??{})}});l&&(l[fp]=n,e.navigate=l)}if(r.fetch.length>0){let n=e.fetch[fp]??e.fetch,l=ty(r.fetch,n,(...h)=>{let[d,,o,_]=h;return{href:o??".",fetcherKey:d,...Vk(e,_??{})}});l&&(l[fp]=n,e.fetch=l)}return e}function ty(e,t,r){return e.length===0?null:async(...n)=>{let l=await cz(e,r(...n),()=>t(...n),e.length-1);if(l.type==="error")throw l.value;return l.value}}async function cz(e,t,r,n){let l=e[n],h;if(l){let d,o=async()=>(d?console.error("You cannot call instrumented handlers more than once"):d=cz(e,t,r,n-1),h=await d,dn(h,"Expected a result"),h.type==="error"&&h.value instanceof Error?{status:"error",error:h.value}:{status:"success",error:void 0});try{await l(o,t)}catch(_){console.error("An instrumentation function threw an error:",_)}d||await o(),await d}else try{h={type:"success",value:await r()}}catch(d){h={type:"error",value:d}}return h||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Bk(e){let{request:t,context:r,params:n,unstable_pattern:l}=e;return{request:N$(t),params:{...n},unstable_pattern:l,context:F$(r)}}function Vk(e,t){return{currentUrl:xh(e.state.location),..."formMethod"in t?{formMethod:t.formMethod}:{},..."formEncType"in t?{formEncType:t.formEncType}:{},..."formData"in t?{formData:t.formData}:{},..."body"in t?{body:t.body}:{}}}function N$(e){return{method:e.method,url:e.url,headers:{get:(...t)=>e.headers.get(...t)}}}function F$(e){if(V$(e)){let t={...e};return Object.freeze(t),t}else return{get:t=>e.get(t)}}var B$=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function V$(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===B$}var hz=["POST","PUT","PATCH","DELETE"],$$=new Set(hz),U$=["GET",...hz],q$=new Set(U$),G$=new Set([301,302,303,307,308]),W$=new Set([307,308]),pS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},H$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ov={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Z$=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),dz="remix-router-transitions",fz=Symbol("ResetLoaderData");function K$(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";dn(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],l=e.mapRouteProperties||Z$,h=l;if(e.unstable_instrumentations){let Ie=e.unstable_instrumentations;h=Ye=>({...l(Ye),...j$(Ie.map(mt=>mt.route).filter(Boolean),Ye)})}let d={},o=o_(e.routes,h,void 0,d),_,S=e.basename||"/";S.startsWith("/")||(S=`/${S}`);let P=e.dataStrategy||eU,M={...e.future},O=null,z=new Set,B=null,F=null,L=null,K=e.hydrationData!=null,Q=Jf(o,e.history.location,S),re=!1,te=null,ae;if(Q==null&&!e.patchRoutesOnNavigation){let Ie=du(404,{pathname:e.history.location.pathname}),{matches:Ye,route:mt}=J0(o);ae=!0,Q=Ye,te={[mt.id]:Ie}}else if(Q&&!e.hydrationData&&Zr(Q,o,e.history.location.pathname).active&&(Q=null),Q)if(Q.some(Ie=>Ie.route.lazy))ae=!1;else if(!Q.some(Ie=>ZE(Ie.route)))ae=!0;else{let Ie=e.hydrationData?e.hydrationData.loaderData:null,Ye=e.hydrationData?e.hydrationData.errors:null;if(Ye){let mt=Q.findIndex(We=>Ye[We.route.id]!==void 0);ae=Q.slice(0,mt+1).every(We=>!p2(We.route,Ie,Ye))}else ae=Q.every(mt=>!p2(mt.route,Ie,Ye))}else{ae=!1,Q=[];let Ie=Zr(null,o,e.history.location.pathname);Ie.active&&Ie.matches&&(re=!0,Q=Ie.matches)}let he,ne={historyAction:e.history.action,location:e.history.location,matches:Q,initialized:ae,navigation:pS,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||te,fetchers:new Map,blockers:new Map},be="POP",xe=null,$e=!1,Ee,Ne=!1,Xe=new Map,ut=null,pt=!1,gt=!1,wt=new Set,je=new Map,Qe=0,yt=-1,Oe=new Map,et=new Set,Mt=new Map,Dt=new Map,Ke=new Set,tr=new Map,Ft,$t=null;function ct(){if(O=e.history.listen(({action:Ie,location:Ye,delta:mt})=>{if(Ft){Ft(),Ft=void 0;return}ca(tr.size===0||mt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let We=Kr({currentLocation:ne.location,nextLocation:Ye,historyAction:Ie});if(We&&mt!=null){let Gt=new Promise(cr=>{Ft=cr});e.history.go(mt*-1),Mr(We,{state:"blocked",location:Ye,proceed(){Mr(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ye}),Gt.then(()=>e.history.go(mt))},reset(){let cr=new Map(ne.blockers);cr.set(We,Ov),St({blockers:cr})}}),xe==null||xe.resolve(),xe=null;return}return tn(Ie,Ye)}),r){gU(t,Xe);let Ie=()=>yU(t,Xe);t.addEventListener("pagehide",Ie),ut=()=>t.removeEventListener("pagehide",Ie)}return ne.initialized||tn("POP",ne.location,{initialHydration:!0}),he}function Lt(){O&&O(),ut&&ut(),z.clear(),Ee&&Ee.abort(),ne.fetchers.forEach((Ie,Ye)=>Je(Ye)),ne.blockers.forEach((Ie,Ye)=>or(Ye))}function ir(Ie){return z.add(Ie),()=>z.delete(Ie)}function St(Ie,Ye={}){Ie.matches&&(Ie.matches=Ie.matches.map(Gt=>{let cr=d[Gt.route.id],Sr=Gt.route;return Sr.element!==cr.element||Sr.errorElement!==cr.errorElement||Sr.hydrateFallbackElement!==cr.hydrateFallbackElement?{...Gt,route:cr}:Gt})),ne={...ne,...Ie};let mt=[],We=[];ne.fetchers.forEach((Gt,cr)=>{Gt.state==="idle"&&(Ke.has(cr)?mt.push(cr):We.push(cr))}),Ke.forEach(Gt=>{!ne.fetchers.has(Gt)&&!je.has(Gt)&&mt.push(Gt)}),[...z].forEach(Gt=>Gt(ne,{deletedFetchers:mt,newErrors:Ie.errors??null,viewTransitionOpts:Ye.viewTransitionOpts,flushSync:Ye.flushSync===!0})),mt.forEach(Gt=>Je(Gt)),We.forEach(Gt=>ne.fetchers.delete(Gt))}function Gr(Ie,Ye,{flushSync:mt}={}){var Zt,dr;let We=ne.actionData!=null&&ne.navigation.formMethod!=null&&xs(ne.navigation.formMethod)&&ne.navigation.state==="loading"&&((Zt=Ie.state)==null?void 0:Zt._isRedirect)!==!0,Gt;Ye.actionData?Object.keys(Ye.actionData).length>0?Gt=Ye.actionData:Gt=null:We?Gt=ne.actionData:Gt=null;let cr=Ye.loaderData?Yk(ne.loaderData,Ye.loaderData,Ye.matches||[],Ye.errors):ne.loaderData,Sr=ne.blockers;Sr.size>0&&(Sr=new Map(Sr),Sr.forEach((Fr,Yr)=>Sr.set(Yr,Ov)));let hr=pt?!1:Ir(Ie,Ye.matches||ne.matches),xt=$e===!0||ne.navigation.formMethod!=null&&xs(ne.navigation.formMethod)&&((dr=Ie.state)==null?void 0:dr._isRedirect)!==!0;_&&(o=_,_=void 0),pt||be==="POP"||(be==="PUSH"?e.history.push(Ie,Ie.state):be==="REPLACE"&&e.history.replace(Ie,Ie.state));let Bt;if(be==="POP"){let Fr=Xe.get(ne.location.pathname);Fr&&Fr.has(Ie.pathname)?Bt={currentLocation:ne.location,nextLocation:Ie}:Xe.has(Ie.pathname)&&(Bt={currentLocation:Ie,nextLocation:ne.location})}else if(Ne){let Fr=Xe.get(ne.location.pathname);Fr?Fr.add(Ie.pathname):(Fr=new Set([Ie.pathname]),Xe.set(ne.location.pathname,Fr)),Bt={currentLocation:ne.location,nextLocation:Ie}}St({...Ye,actionData:Gt,loaderData:cr,historyAction:be,location:Ie,initialized:!0,navigation:pS,revalidation:"idle",restoreScrollPosition:hr,preventScrollReset:xt,blockers:Sr},{viewTransitionOpts:Bt,flushSync:mt===!0}),be="POP",$e=!1,Ne=!1,pt=!1,gt=!1,xe==null||xe.resolve(),xe=null,$t==null||$t.resolve(),$t=null}async function Tr(Ie,Ye){if(xe==null||xe.resolve(),xe=null,typeof Ie=="number"){xe||(xe=tA());let Yr=xe.promise;return e.history.go(Ie),Yr}let mt=f2(ne.location,ne.matches,S,Ie,Ye==null?void 0:Ye.fromRouteId,Ye==null?void 0:Ye.relative),{path:We,submission:Gt,error:cr}=$k(!1,mt,Ye),Sr=ne.location,hr=a_(ne.location,We,Ye&&Ye.state);hr={...hr,...e.history.encodeLocation(hr)};let xt=Ye&&Ye.replace!=null?Ye.replace:void 0,Bt="PUSH";xt===!0?Bt="REPLACE":xt===!1||Gt!=null&&xs(Gt.formMethod)&&Gt.formAction===ne.location.pathname+ne.location.search&&(Bt="REPLACE");let Zt=Ye&&"preventScrollReset"in Ye?Ye.preventScrollReset===!0:void 0,dr=(Ye&&Ye.flushSync)===!0,Fr=Kr({currentLocation:Sr,nextLocation:hr,historyAction:Bt});if(Fr){Mr(Fr,{state:"blocked",location:hr,proceed(){Mr(Fr,{state:"proceeding",proceed:void 0,reset:void 0,location:hr}),Tr(Ie,Ye)},reset(){let Yr=new Map(ne.blockers);Yr.set(Fr,Ov),St({blockers:Yr})}});return}await tn(Bt,hr,{submission:Gt,pendingError:cr,preventScrollReset:Zt,replace:Ye&&Ye.replace,enableViewTransition:Ye&&Ye.viewTransition,flushSync:dr})}function wr(){$t||($t=tA()),ue(),St({revalidation:"loading"});let Ie=$t.promise;return ne.navigation.state==="submitting"?Ie:ne.navigation.state==="idle"?(tn(ne.historyAction,ne.location,{startUninterruptedRevalidation:!0}),Ie):(tn(be||ne.historyAction,ne.navigation.location,{overrideNavigation:ne.navigation,enableViewTransition:Ne===!0}),Ie)}async function tn(Ie,Ye,mt){Ee&&Ee.abort(),Ee=null,be=Ie,pt=(mt&&mt.startUninterruptedRevalidation)===!0,ti(ne.location,ne.matches),$e=(mt&&mt.preventScrollReset)===!0,Ne=(mt&&mt.enableViewTransition)===!0;let We=_||o,Gt=mt&&mt.overrideNavigation,cr=mt!=null&&mt.initialHydration&&ne.matches&&ne.matches.length>0&&!re?ne.matches:Jf(We,Ye,S),Sr=(mt&&mt.flushSync)===!0;if(cr&&ne.initialized&&!gt&&lU(ne.location,Ye)&&!(mt&&mt.submission&&xs(mt.submission.formMethod))){Gr(Ye,{matches:cr},{flushSync:Sr});return}let hr=Zr(cr,We,Ye.pathname);if(hr.active&&hr.matches&&(cr=hr.matches),!cr){let{error:ri,notFoundMatches:vn,route:Tn}=Ur(Ye.pathname);Gr(Ye,{matches:vn,loaderData:{},errors:{[Tn.id]:ri}},{flushSync:Sr});return}Ee=new AbortController;let xt=Qg(e.history,Ye,Ee.signal,mt&&mt.submission),Bt=e.getContext?await e.getContext():new jk,Zt;if(mt&&mt.pendingError)Zt=[ep(cr).route.id,{type:"error",error:mt.pendingError}];else if(mt&&mt.submission&&xs(mt.submission.formMethod)){let ri=await Wr(xt,Ye,mt.submission,cr,Bt,hr.active,mt&&mt.initialHydration===!0,{replace:mt.replace,flushSync:Sr});if(ri.shortCircuited)return;if(ri.pendingActionResult){let[vn,Tn]=ri.pendingActionResult;if(Pl(Tn)&&s_(Tn.error)&&Tn.error.status===404){Ee=null,Gr(Ye,{matches:ri.matches,loaderData:{},errors:{[vn]:Tn.error}});return}}cr=ri.matches||cr,Zt=ri.pendingActionResult,Gt=mS(Ye,mt.submission),Sr=!1,hr.active=!1,xt=Qg(e.history,xt.url,xt.signal)}let{shortCircuited:dr,matches:Fr,loaderData:Yr,errors:mr}=await Xi(xt,Ye,cr,Bt,hr.active,Gt,mt&&mt.submission,mt&&mt.fetcherSubmission,mt&&mt.replace,mt&&mt.initialHydration===!0,Sr,Zt);dr||(Ee=null,Gr(Ye,{matches:Fr||cr,...Qk(Zt),loaderData:Yr,errors:mr}))}async function Wr(Ie,Ye,mt,We,Gt,cr,Sr,hr={}){ue();let xt=pU(Ye,mt);if(St({navigation:xt},{flushSync:hr.flushSync===!0}),cr){let dr=await Vn(We,Ye.pathname,Ie.signal);if(dr.type==="aborted")return{shortCircuited:!0};if(dr.type==="error"){if(dr.partialMatches.length===0){let{matches:Yr,route:mr}=J0(o);return{matches:Yr,pendingActionResult:[mr.id,{type:"error",error:dr.error}]}}let Fr=ep(dr.partialMatches).route.id;return{matches:dr.partialMatches,pendingActionResult:[Fr,{type:"error",error:dr.error}]}}else if(dr.matches)We=dr.matches;else{let{notFoundMatches:Fr,error:Yr,route:mr}=Ur(Ye.pathname);return{matches:Fr,pendingActionResult:[mr.id,{type:"error",error:Yr}]}}}let Bt,Zt=Tx(We,Ye);if(!Zt.route.action&&!Zt.route.lazy)Bt={type:"error",error:du(405,{method:Ie.method,pathname:Ye.pathname,routeId:Zt.route.id})};else{let dr=oy(h,d,Ie,We,Zt,Sr?[]:n,Gt),Fr=await zt(Ie,dr,Gt,null);if(Bt=Fr[Zt.route.id],!Bt){for(let Yr of We)if(Fr[Yr.route.id]){Bt=Fr[Yr.route.id];break}}if(Ie.signal.aborted)return{shortCircuited:!0}}if(Cm(Bt)){let dr;return hr&&hr.replace!=null?dr=hr.replace:dr=Zk(Bt.response.headers.get("Location"),new URL(Ie.url),S)===ne.location.pathname+ne.location.search,await Wt(Ie,Bt,!0,{submission:mt,replace:dr}),{shortCircuited:!0}}if(Pl(Bt)){let dr=ep(We,Zt.route.id);return(hr&&hr.replace)!==!0&&(be="PUSH"),{matches:We,pendingActionResult:[dr.route.id,Bt,Zt.route.id]}}return{matches:We,pendingActionResult:[Zt.route.id,Bt]}}async function Xi(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt,Bt,Zt,dr){let Fr=cr||mS(Ye,Sr),Yr=Sr||hr||eA(Fr),mr=!pt&&!Bt;if(Gt){if(mr){let Rn=Ii(dr);St({navigation:Fr,...Rn!==void 0?{actionData:Rn}:{}},{flushSync:Zt})}let jr=await Vn(mt,Ye.pathname,Ie.signal);if(jr.type==="aborted")return{shortCircuited:!0};if(jr.type==="error"){if(jr.partialMatches.length===0){let{matches:$i,route:Da}=J0(o);return{matches:$i,loaderData:{},errors:{[Da.id]:jr.error}}}let Rn=ep(jr.partialMatches).route.id;return{matches:jr.partialMatches,loaderData:{},errors:{[Rn]:jr.error}}}else if(jr.matches)mt=jr.matches;else{let{error:Rn,notFoundMatches:$i,route:Da}=Ur(Ye.pathname);return{matches:$i,loaderData:{},errors:{[Da.id]:Rn}}}}let ri=_||o,{dsMatches:vn,revalidatingFetchers:Tn}=Uk(Ie,We,h,d,e.history,ne,mt,Yr,Ye,Bt?[]:n,Bt===!0,gt,wt,Ke,Mt,et,ri,S,e.patchRoutesOnNavigation!=null,dr);if(yt=++Qe,!e.dataStrategy&&!vn.some(jr=>jr.shouldLoad)&&!vn.some(jr=>jr.route.middleware&&jr.route.middleware.length>0)&&Tn.length===0){let jr=At();return Gr(Ye,{matches:mt,loaderData:{},errors:dr&&Pl(dr[1])?{[dr[0]]:dr[1].error}:null,...Qk(dr),...jr?{fetchers:new Map(ne.fetchers)}:{}},{flushSync:Zt}),{shortCircuited:!0}}if(mr){let jr={};if(!Gt){jr.navigation=Fr;let Rn=Ii(dr);Rn!==void 0&&(jr.actionData=Rn)}Tn.length>0&&(jr.fetchers=Be(Tn)),St(jr,{flushSync:Zt})}Tn.forEach(jr=>{Ve(jr.key),jr.controller&&je.set(jr.key,jr.controller)});let Ja=()=>Tn.forEach(jr=>Ve(jr.key));Ee&&Ee.signal.addEventListener("abort",Ja);let{loaderResults:bn,fetcherResults:La}=await ze(vn,Tn,Ie,We);if(Ie.signal.aborted)return{shortCircuited:!0};Ee&&Ee.signal.removeEventListener("abort",Ja),Tn.forEach(jr=>je.delete(jr.key));let Yi=ex(bn);if(Yi)return await Wt(Ie,Yi.result,!0,{replace:xt}),{shortCircuited:!0};if(Yi=ex(La),Yi)return et.add(Yi.key),await Wt(Ie,Yi.result,!0,{replace:xt}),{shortCircuited:!0};let{loaderData:Oi,errors:Qr}=Xk(ne,mt,bn,dr,Tn,La);Bt&&ne.errors&&(Qr={...ne.errors,...Qr});let Io=At(),Oo=Pt(yt),So=Io||Oo||Tn.length>0;return{matches:mt,loaderData:Oi,errors:Qr,...So?{fetchers:new Map(ne.fetchers)}:{}}}function Ii(Ie){if(Ie&&!Pl(Ie[1]))return{[Ie[0]]:Ie[1].data};if(ne.actionData)return Object.keys(ne.actionData).length===0?null:ne.actionData}function Be(Ie){return Ie.forEach(Ye=>{let mt=ne.fetchers.get(Ye.key),We=Lv(void 0,mt?mt.data:void 0);ne.fetchers.set(Ye.key,We)}),new Map(ne.fetchers)}async function rt(Ie,Ye,mt,We){Ve(Ie);let Gt=(We&&We.flushSync)===!0,cr=_||o,Sr=f2(ne.location,ne.matches,S,mt,Ye,We==null?void 0:We.relative),hr=Jf(cr,Sr,S),xt=Zr(hr,cr,Sr);if(xt.active&&xt.matches&&(hr=xt.matches),!hr){pe(Ie,Ye,du(404,{pathname:Sr}),{flushSync:Gt});return}let{path:Bt,submission:Zt,error:dr}=$k(!0,Sr,We);if(dr){pe(Ie,Ye,dr,{flushSync:Gt});return}let Fr=e.getContext?await e.getContext():new jk,Yr=(We&&We.preventScrollReset)===!0;if(Zt&&xs(Zt.formMethod)){await bt(Ie,Ye,Bt,hr,Fr,xt.active,Gt,Yr,Zt);return}Mt.set(Ie,{routeId:Ye,path:Bt}),await rr(Ie,Ye,Bt,hr,Fr,xt.active,Gt,Yr,Zt)}async function bt(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt){ue(),Mt.delete(Ie);let Bt=ne.fetchers.get(Ie);le(Ie,mU(xt,Bt),{flushSync:Sr});let Zt=new AbortController,dr=Qg(e.history,mt,Zt.signal,xt);if(cr){let $n=await Vn(We,new URL(dr.url).pathname,dr.signal,Ie);if($n.type==="aborted")return;if($n.type==="error"){pe(Ie,Ye,$n.error,{flushSync:Sr});return}else if($n.matches)We=$n.matches;else{pe(Ie,Ye,du(404,{pathname:mt}),{flushSync:Sr});return}}let Fr=Tx(We,mt);if(!Fr.route.action&&!Fr.route.lazy){let $n=du(405,{method:xt.formMethod,pathname:mt,routeId:Ye});pe(Ie,Ye,$n,{flushSync:Sr});return}je.set(Ie,Zt);let Yr=Qe,mr=oy(h,d,dr,We,Fr,n,Gt),ri=await zt(dr,mr,Gt,Ie),vn=ri[Fr.route.id];if(!vn){for(let $n of mr)if(ri[$n.route.id]){vn=ri[$n.route.id];break}}if(dr.signal.aborted){je.get(Ie)===Zt&&je.delete(Ie);return}if(Ke.has(Ie)){if(Cm(vn)||Pl(vn)){le(Ie,md(void 0));return}}else{if(Cm(vn))if(je.delete(Ie),yt>Yr){le(Ie,md(void 0));return}else return et.add(Ie),le(Ie,Lv(xt)),Wt(dr,vn,!1,{fetcherSubmission:xt,preventScrollReset:hr});if(Pl(vn)){pe(Ie,Ye,vn.error);return}}let Tn=ne.navigation.location||ne.location,Ja=Qg(e.history,Tn,Zt.signal),bn=_||o,La=ne.navigation.state!=="idle"?Jf(bn,ne.navigation.location,S):ne.matches;dn(La,"Didn't find any matches after fetcher action");let Yi=++Qe;Oe.set(Ie,Yi);let Oi=Lv(xt,vn.data);ne.fetchers.set(Ie,Oi);let{dsMatches:Qr,revalidatingFetchers:Io}=Uk(Ja,Gt,h,d,e.history,ne,La,xt,Tn,n,!1,gt,wt,Ke,Mt,et,bn,S,e.patchRoutesOnNavigation!=null,[Fr.route.id,vn]);Io.filter($n=>$n.key!==Ie).forEach($n=>{let jn=$n.key,Ol=ne.fetchers.get(jn),Pu=Lv(void 0,Ol?Ol.data:void 0);ne.fetchers.set(jn,Pu),Ve(jn),$n.controller&&je.set(jn,$n.controller)}),St({fetchers:new Map(ne.fetchers)});let Oo=()=>Io.forEach($n=>Ve($n.key));Zt.signal.addEventListener("abort",Oo);let{loaderResults:So,fetcherResults:jr}=await ze(Qr,Io,Ja,Gt);if(Zt.signal.aborted)return;if(Zt.signal.removeEventListener("abort",Oo),Oe.delete(Ie),je.delete(Ie),Io.forEach($n=>je.delete($n.key)),ne.fetchers.has(Ie)){let $n=md(vn.data);ne.fetchers.set(Ie,$n)}let Rn=ex(So);if(Rn)return Wt(Ja,Rn.result,!1,{preventScrollReset:hr});if(Rn=ex(jr),Rn)return et.add(Rn.key),Wt(Ja,Rn.result,!1,{preventScrollReset:hr});let{loaderData:$i,errors:Da}=Xk(ne,La,So,void 0,Io,jr);Pt(Yi),ne.navigation.state==="loading"&&Yi>yt?(dn(be,"Expected pending action"),Ee&&Ee.abort(),Gr(ne.navigation.location,{matches:La,loaderData:$i,errors:Da,fetchers:new Map(ne.fetchers)})):(St({errors:Da,loaderData:Yk(ne.loaderData,$i,La,Da),fetchers:new Map(ne.fetchers)}),gt=!1)}async function rr(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt){let Bt=ne.fetchers.get(Ie);le(Ie,Lv(xt,Bt?Bt.data:void 0),{flushSync:Sr});let Zt=new AbortController,dr=Qg(e.history,mt,Zt.signal);if(cr){let Tn=await Vn(We,new URL(dr.url).pathname,dr.signal,Ie);if(Tn.type==="aborted")return;if(Tn.type==="error"){pe(Ie,Ye,Tn.error,{flushSync:Sr});return}else if(Tn.matches)We=Tn.matches;else{pe(Ie,Ye,du(404,{pathname:mt}),{flushSync:Sr});return}}let Fr=Tx(We,mt);je.set(Ie,Zt);let Yr=Qe,mr=oy(h,d,dr,We,Fr,n,Gt),vn=(await zt(dr,mr,Gt,Ie))[Fr.route.id];if(je.get(Ie)===Zt&&je.delete(Ie),!dr.signal.aborted){if(Ke.has(Ie)){le(Ie,md(void 0));return}if(Cm(vn))if(yt>Yr){le(Ie,md(void 0));return}else{et.add(Ie),await Wt(dr,vn,!1,{preventScrollReset:hr});return}if(Pl(vn)){pe(Ie,Ye,vn.error);return}le(Ie,md(vn.data))}}async function Wt(Ie,Ye,mt,{submission:We,fetcherSubmission:Gt,preventScrollReset:cr,replace:Sr}={}){mt||(xe==null||xe.resolve(),xe=null),Ye.response.headers.has("X-Remix-Revalidate")&&(gt=!0);let hr=Ye.response.headers.get("Location");dn(hr,"Expected a Location header on the redirect Response"),hr=Zk(hr,new URL(Ie.url),S);let xt=a_(ne.location,hr,{_isRedirect:!0});if(r){let mr=!1;if(Ye.response.headers.has("X-Remix-Reload-Document"))mr=!0;else if(ow(hr)){const ri=oz(hr,!0);mr=ri.origin!==t.location.origin||gu(ri.pathname,S)==null}if(mr){Sr?t.location.replace(hr):t.location.assign(hr);return}}Ee=null;let Bt=Sr===!0||Ye.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Zt,formAction:dr,formEncType:Fr}=ne.navigation;!We&&!Gt&&Zt&&dr&&Fr&&(We=eA(ne.navigation));let Yr=We||Gt;if(W$.has(Ye.response.status)&&Yr&&xs(Yr.formMethod))await tn(Bt,xt,{submission:{...Yr,formAction:hr},preventScrollReset:cr||$e,enableViewTransition:mt?Ne:void 0});else{let mr=mS(xt,We);await tn(Bt,xt,{overrideNavigation:mr,fetcherSubmission:Gt,preventScrollReset:cr||$e,enableViewTransition:mt?Ne:void 0})}}async function zt(Ie,Ye,mt,We){let Gt,cr={};try{Gt=await rU(P,Ie,Ye,We,mt,!1)}catch(Sr){return Ye.filter(hr=>hr.shouldLoad).forEach(hr=>{cr[hr.route.id]={type:"error",error:Sr}}),cr}if(Ie.signal.aborted)return cr;for(let[Sr,hr]of Object.entries(Gt))if(dU(hr)){let xt=hr.result;cr[Sr]={type:"redirect",response:oU(xt,Ie,Sr,Ye,S)}}else cr[Sr]=await aU(hr);return cr}async function ze(Ie,Ye,mt,We){let Gt=zt(mt,Ie,We,null),cr=Promise.all(Ye.map(async xt=>{if(xt.matches&&xt.match&&xt.request&&xt.controller){let Zt=(await zt(xt.request,xt.matches,We,xt.key))[xt.match.route.id];return{[xt.key]:Zt}}else return Promise.resolve({[xt.key]:{type:"error",error:du(404,{pathname:xt.path})}})})),Sr=await Gt,hr=(await cr).reduce((xt,Bt)=>Object.assign(xt,Bt),{});return{loaderResults:Sr,fetcherResults:hr}}function ue(){gt=!0,Mt.forEach((Ie,Ye)=>{je.has(Ye)&&wt.add(Ye),Ve(Ye)})}function le(Ie,Ye,mt={}){ne.fetchers.set(Ie,Ye),St({fetchers:new Map(ne.fetchers)},{flushSync:(mt&&mt.flushSync)===!0})}function pe(Ie,Ye,mt,We={}){let Gt=ep(ne.matches,Ye);Je(Ie),St({errors:{[Gt.route.id]:mt},fetchers:new Map(ne.fetchers)},{flushSync:(We&&We.flushSync)===!0})}function Me(Ie){return Dt.set(Ie,(Dt.get(Ie)||0)+1),Ke.has(Ie)&&Ke.delete(Ie),ne.fetchers.get(Ie)||H$}function Ae(Ie,Ye){Ve(Ie,Ye==null?void 0:Ye.reason),le(Ie,md(null))}function Je(Ie){let Ye=ne.fetchers.get(Ie);je.has(Ie)&&!(Ye&&Ye.state==="loading"&&Oe.has(Ie))&&Ve(Ie),Mt.delete(Ie),Oe.delete(Ie),et.delete(Ie),Ke.delete(Ie),wt.delete(Ie),ne.fetchers.delete(Ie)}function Ze(Ie){let Ye=(Dt.get(Ie)||0)-1;Ye<=0?(Dt.delete(Ie),Ke.add(Ie)):Dt.set(Ie,Ye),St({fetchers:new Map(ne.fetchers)})}function Ve(Ie,Ye){let mt=je.get(Ie);mt&&(mt.abort(Ye),je.delete(Ie))}function it(Ie){for(let Ye of Ie){let mt=Me(Ye),We=md(mt.data);ne.fetchers.set(Ye,We)}}function At(){let Ie=[],Ye=!1;for(let mt of et){let We=ne.fetchers.get(mt);dn(We,`Expected fetcher: ${mt}`),We.state==="loading"&&(et.delete(mt),Ie.push(mt),Ye=!0)}return it(Ie),Ye}function Pt(Ie){let Ye=[];for(let[mt,We]of Oe)if(We<Ie){let Gt=ne.fetchers.get(mt);dn(Gt,`Expected fetcher: ${mt}`),Gt.state==="loading"&&(Ve(mt),Oe.delete(mt),Ye.push(mt))}return it(Ye),Ye.length>0}function Xt(Ie,Ye){let mt=ne.blockers.get(Ie)||Ov;return tr.get(Ie)!==Ye&&tr.set(Ie,Ye),mt}function or(Ie){ne.blockers.delete(Ie),tr.delete(Ie)}function Mr(Ie,Ye){let mt=ne.blockers.get(Ie)||Ov;dn(mt.state==="unblocked"&&Ye.state==="blocked"||mt.state==="blocked"&&Ye.state==="blocked"||mt.state==="blocked"&&Ye.state==="proceeding"||mt.state==="blocked"&&Ye.state==="unblocked"||mt.state==="proceeding"&&Ye.state==="unblocked",`Invalid blocker state transition: ${mt.state} -> ${Ye.state}`);let We=new Map(ne.blockers);We.set(Ie,Ye),St({blockers:We})}function Kr({currentLocation:Ie,nextLocation:Ye,historyAction:mt}){if(tr.size===0)return;tr.size>1&&ca(!1,"A router only supports one blocker at a time");let We=Array.from(tr.entries()),[Gt,cr]=We[We.length-1],Sr=ne.blockers.get(Gt);if(!(Sr&&Sr.state==="proceeding")&&cr({currentLocation:Ie,nextLocation:Ye,historyAction:mt}))return Gt}function Ur(Ie){let Ye=du(404,{pathname:Ie}),mt=_||o,{matches:We,route:Gt}=J0(mt);return{notFoundMatches:We,route:Gt,error:Ye}}function tt(Ie,Ye,mt){if(B=Ie,L=Ye,F=mt||null,!K&&ne.navigation===pS){K=!0;let We=Ir(ne.location,ne.matches);We!=null&&St({restoreScrollPosition:We})}return()=>{B=null,L=null,F=null}}function sn(Ie,Ye){return F&&F(Ie,Ye.map(We=>y$(We,ne.loaderData)))||Ie.key}function ti(Ie,Ye){if(B&&L){let mt=sn(Ie,Ye);B[mt]=L()}}function Ir(Ie,Ye){if(B){let mt=sn(Ie,Ye),We=B[mt];if(typeof We=="number")return We}return null}function Zr(Ie,Ye,mt){if(e.patchRoutesOnNavigation)if(Ie){if(Object.keys(Ie[0].params).length>0)return{active:!0,matches:Xv(Ye,mt,S,!0)}}else return{active:!0,matches:Xv(Ye,mt,S,!0)||[]};return{active:!1,matches:null}}async function Vn(Ie,Ye,mt,We){if(!e.patchRoutesOnNavigation)return{type:"success",matches:Ie};let Gt=Ie;for(;;){let cr=_==null,Sr=_||o,hr=d;try{await e.patchRoutesOnNavigation({signal:mt,path:Ye,matches:Gt,fetcherKey:We,patch:(Zt,dr)=>{mt.aborted||qk(Zt,dr,Sr,hr,h,!1)}})}catch(Zt){return{type:"error",error:Zt,partialMatches:Gt}}finally{cr&&!mt.aborted&&(o=[...o])}if(mt.aborted)return{type:"aborted"};let xt=Jf(Sr,Ye,S),Bt=null;if(xt){if(Object.keys(xt[0].params).length===0)return{type:"success",matches:xt};if(Bt=Xv(Sr,Ye,S,!0),!(Bt&&Gt.length<Bt.length&&yn(Gt,Bt.slice(0,Gt.length))))return{type:"success",matches:xt}}if(Bt||(Bt=Xv(Sr,Ye,S,!0)),!Bt||yn(Gt,Bt))return{type:"success",matches:null};Gt=Bt}}function yn(Ie,Ye){return Ie.length===Ye.length&&Ie.every((mt,We)=>mt.route.id===Ye[We].route.id)}function ln(Ie){d={},_=o_(Ie,h,void 0,d)}function ur(Ie,Ye,mt=!1){let We=_==null;qk(Ie,Ye,_||o,d,h,mt),We&&(o=[...o],St({}))}return he={get basename(){return S},get future(){return M},get state(){return ne},get routes(){return o},get window(){return t},initialize:ct,subscribe:ir,enableScrollRestoration:tt,navigate:Tr,fetch:rt,revalidate:wr,createHref:Ie=>e.history.createHref(Ie),encodeLocation:Ie=>e.history.encodeLocation(Ie),getFetcher:Me,resetFetcher:Ae,deleteFetcher:Ze,dispose:Lt,getBlocker:Xt,deleteBlocker:or,patchRoutes:ur,_internalFetchControllers:je,_internalSetRoutes:ln,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ie){St(Ie)}},e.unstable_instrumentations&&(he=z$(he,e.unstable_instrumentations.map(Ie=>Ie.router).filter(Boolean))),he}function X$(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function f2(e,t,r,n,l,h){let d,o;if(l){d=[];for(let S of t)if(d.push(S),S.route.id===l){o=S;break}}else d=t,o=t[t.length-1];let _=lw(n||".",sw(d),gu(e.pathname,r)||e.pathname,h==="path");if(n==null&&(_.search=e.search,_.hash=e.hash),(n==null||n===""||n===".")&&o){let S=KE(_.search);if(o.route.index&&!S)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&S){let P=new URLSearchParams(_.search),M=P.getAll("index");P.delete("index"),M.filter(z=>z).forEach(z=>P.append("index",z));let O=P.toString();_.search=O?`?${O}`:""}}return r!=="/"&&(_.pathname=A$({basename:r,pathname:_.pathname})),xh(_)}function $k(e,t,r){if(!r||!X$(r))return{path:t};if(r.formMethod&&!fU(r.formMethod))return{path:t,error:du(405,{method:r.formMethod})};let n=()=>({path:t,error:du(400,{type:"invalid-body"})}),h=(r.formMethod||"get").toUpperCase(),d=_z(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!xs(h))return n();let M=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((O,[z,B])=>`${O}${z}=${B}
`,""):String(r.body);return{path:t,submission:{formMethod:h,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:M}}}else if(r.formEncType==="application/json"){if(!xs(h))return n();try{let M=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:h,formAction:d,formEncType:r.formEncType,formData:void 0,json:M,text:void 0}}}catch{return n()}}}dn(typeof FormData=="function","FormData is not available in this environment");let o,_;if(r.formData)o=g2(r.formData),_=r.formData;else if(r.body instanceof FormData)o=g2(r.body),_=r.body;else if(r.body instanceof URLSearchParams)o=r.body,_=Kk(o);else if(r.body==null)o=new URLSearchParams,_=new FormData;else try{o=new URLSearchParams(r.body),_=Kk(o)}catch{return n()}let S={formMethod:h,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:_,json:void 0,text:void 0};if(xs(S.formMethod))return{path:t,submission:S};let P=wp(t);return e&&P.search&&KE(P.search)&&o.append("index",""),P.search=`?${o}`,{path:xh(P),submission:S}}function Uk(e,t,r,n,l,h,d,o,_,S,P,M,O,z,B,F,L,K,Q,re){var ut;let te=re?Pl(re[1])?re[1].error:re[1].data:void 0,ae=l.createURL(h.location),he=l.createURL(_),ne;if(P&&h.errors){let pt=Object.keys(h.errors)[0];ne=d.findIndex(gt=>gt.route.id===pt)}else if(re&&Pl(re[1])){let pt=re[0];ne=d.findIndex(gt=>gt.route.id===pt)-1}let be=re?re[1].statusCode:void 0,xe=be&&be>=400,$e={currentUrl:ae,currentParams:((ut=h.matches[0])==null?void 0:ut.params)||{},nextUrl:he,nextParams:d[0].params,...o,actionResult:te,actionStatus:be},Ee=I_(d),Ne=d.map((pt,gt)=>{let{route:wt}=pt,je=null;if(ne!=null&&gt>ne?je=!1:wt.lazy?je=!0:ZE(wt)?P?je=p2(wt,h.loaderData,h.errors):Y$(h.loaderData,h.matches[gt],pt)&&(je=!0):je=!1,je!==null)return m2(r,n,e,Ee,pt,S,t,je);let Qe=xe?!1:M||ae.pathname+ae.search===he.pathname+he.search||ae.search!==he.search||Q$(h.matches[gt],pt),yt={...$e,defaultShouldRevalidate:Qe},Oe=qx(pt,yt);return m2(r,n,e,Ee,pt,S,t,Oe,yt)}),Xe=[];return B.forEach((pt,gt)=>{if(P||!d.some(Dt=>Dt.route.id===pt.routeId)||z.has(gt))return;let wt=h.fetchers.get(gt),je=wt&&wt.state!=="idle"&&wt.data===void 0,Qe=Jf(L,pt.path,K);if(!Qe){if(Q&&je)return;Xe.push({key:gt,routeId:pt.routeId,path:pt.path,matches:null,match:null,request:null,controller:null});return}if(F.has(gt))return;let yt=Tx(Qe,pt.path),Oe=new AbortController,et=Qg(l,pt.path,Oe.signal),Mt=null;if(O.has(gt))O.delete(gt),Mt=oy(r,n,et,Qe,yt,S,t);else if(je)M&&(Mt=oy(r,n,et,Qe,yt,S,t));else{let Dt={...$e,defaultShouldRevalidate:xe?!1:M};qx(yt,Dt)&&(Mt=oy(r,n,et,Qe,yt,S,t,Dt))}Mt&&Xe.push({key:gt,routeId:pt.routeId,path:pt.path,matches:Mt,match:yt,request:et,controller:Oe})}),{dsMatches:Ne,revalidatingFetchers:Xe}}function ZE(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function p2(e,t,r){if(e.lazy)return!0;if(!ZE(e))return!1;let n=t!=null&&e.id in t,l=r!=null&&r[e.id]!==void 0;return!n&&l?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!l}function Y$(e,t,r){let n=!t||r.route.id!==t.route.id,l=!e.hasOwnProperty(r.route.id);return n||l}function Q$(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function qx(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function qk(e,t,r,n,l,h){let d;if(e){let S=n[e];dn(S,`No route found to patch children into: routeId = ${e}`),S.children||(S.children=[]),d=S.children}else d=r;let o=[],_=[];if(t.forEach(S=>{let P=d.find(M=>pz(S,M));P?_.push({existingRoute:P,newRoute:S}):o.push(S)}),o.length>0){let S=o_(o,l,[e||"_","patch",String((d==null?void 0:d.length)||"0")],n);d.push(...S)}if(h&&_.length>0)for(let S=0;S<_.length;S++){let{existingRoute:P,newRoute:M}=_[S],O=P,[z]=o_([M],l,[],{},!0);Object.assign(O,{element:z.element?z.element:O.element,errorElement:z.errorElement?z.errorElement:O.errorElement,hydrateFallbackElement:z.hydrateFallbackElement?z.hydrateFallbackElement:O.hydrateFallbackElement})}}function pz(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var l;return(l=t.children)==null?void 0:l.some(h=>pz(r,h))}):!1}var Gk=new WeakMap,mz=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let l=r[t.id];if(dn(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let h=l.lazy[e];if(!h)return;let d=Gk.get(l);d||(d={},Gk.set(l,d));let o=d[e];if(o)return o;let _=(async()=>{let S=f$(e),M=l[e]!==void 0&&e!=="hasErrorBoundary";if(S)ca(!S,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),d[e]=Promise.resolve();else if(M)ca(!1,`Route "${l.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let O=await h();O!=null&&(Object.assign(l,{[e]:O}),Object.assign(l,n(l)))}typeof l.lazy=="object"&&(l.lazy[e]=void 0,Object.values(l.lazy).every(O=>O===void 0)&&(l.lazy=void 0))})();return d[e]=_,_},Wk=new WeakMap;function J$(e,t,r,n,l){let h=r[e.id];if(dn(h,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let P=Wk.get(h);if(P)return{lazyRoutePromise:P,lazyHandlerPromise:P};let M=(async()=>{dn(typeof e.lazy=="function","No lazy route function found");let O=await e.lazy(),z={};for(let B in O){let F=O[B];if(F===void 0)continue;let L=m$(B),Q=h[B]!==void 0&&B!=="hasErrorBoundary";L?ca(!L,"Route property "+B+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Q?ca(!Q,`Route "${h.id}" has a static property "${B}" defined but its lazy function is also returning a value for this property. The lazy route property "${B}" will be ignored.`):z[B]=F}Object.assign(h,z),Object.assign(h,{...n(h),lazy:void 0})})();return Wk.set(h,M),M.catch(()=>{}),{lazyRoutePromise:M,lazyHandlerPromise:M}}let d=Object.keys(e.lazy),o=[],_;for(let P of d){if(l&&l.includes(P))continue;let M=mz({key:P,route:e,manifest:r,mapRouteProperties:n});M&&(o.push(M),P===t&&(_=M))}let S=o.length>0?Promise.all(o).then(()=>{}):void 0;return S==null||S.catch(()=>{}),_==null||_.catch(()=>{}),{lazyRoutePromise:S,lazyHandlerPromise:_}}async function Hk(e){let t=e.matches.filter(l=>l.shouldLoad),r={};return(await Promise.all(t.map(l=>l.resolve()))).forEach((l,h)=>{r[t[h].route.id]=l}),r}async function eU(e){return e.matches.some(t=>t.route.middleware)?gz(e,()=>Hk(e)):Hk(e)}function gz(e,t){return tU(e,t,n=>n,cU,r);function r(n,l,h){if(h)return Promise.resolve(Object.assign(h.value,{[l]:{type:"error",result:n}}));{let{matches:d}=e,o=Math.min(Math.max(d.findIndex(S=>S.route.id===l),0),Math.max(d.findIndex(S=>S.shouldCallHandler()),0)),_=ep(d,d[o].route.id).route.id;return Promise.resolve({[_]:{type:"error",result:n}})}}}async function tU(e,t,r,n,l){let{matches:h,request:d,params:o,context:_,unstable_pattern:S}=e,P=h.flatMap(O=>O.route.middleware?O.route.middleware.map(z=>[O.route.id,z]):[]);return await yz({request:d,params:o,context:_,unstable_pattern:S},P,t,r,n,l)}async function yz(e,t,r,n,l,h,d=0){let{request:o}=e;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let _=t[d];if(!_)return await r();let[S,P]=_,M,O=async()=>{if(M)throw new Error("You may only call `next()` once per middleware");try{return M={value:await yz(e,t,r,n,l,h,d+1)},M.value}catch(z){return M={value:await h(z,S,M)},M.value}};try{let z=await P(e,O),B=z!=null?n(z):void 0;return l(B)?B:M?B??M.value:(M={value:await O()},M.value)}catch(z){return await h(z,S,M)}}function vz(e,t,r,n,l){let h=mz({key:"middleware",route:n.route,manifest:t,mapRouteProperties:e}),d=J$(n.route,xs(r.method)?"action":"loader",t,e,l);return{middleware:h,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function m2(e,t,r,n,l,h,d,o,_=null){let S=!1,P=vz(e,t,r,l,h);return{...l,_lazyPromises:P,shouldLoad:o,shouldRevalidateArgs:_,shouldCallHandler(M){return S=!0,_?typeof M=="boolean"?qx(l,{..._,defaultShouldRevalidate:M}):qx(l,_):o},resolve(M){let{lazy:O,loader:z,middleware:B}=l.route,F=S||o||M&&!xs(r.method)&&(O||z),L=B&&B.length>0&&!z&&!O;return F&&(xs(r.method)||!L)?nU({request:r,unstable_pattern:n,match:l,lazyHandlerPromise:P==null?void 0:P.handler,lazyRoutePromise:P==null?void 0:P.route,handlerOverride:M,scopedContext:d}):Promise.resolve({type:"data",result:void 0})}}}function oy(e,t,r,n,l,h,d,o=null){return n.map(_=>_.route.id!==l.route.id?{..._,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:vz(e,t,r,_,h),resolve:()=>Promise.resolve({type:"data",result:void 0})}:m2(e,t,r,I_(n),_,h,d,!0,o))}async function rU(e,t,r,n,l,h){r.some(S=>{var P;return(P=S._lazyPromises)==null?void 0:P.middleware})&&await Promise.all(r.map(S=>{var P;return(P=S._lazyPromises)==null?void 0:P.middleware}));let d={request:t,unstable_pattern:I_(r),params:r[0].params,context:l,matches:r},_=await e({...d,fetcherKey:n,runClientMiddleware:S=>{let P=d;return gz(P,()=>S({...P,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(S=>{var P,M;return[(P=S._lazyPromises)==null?void 0:P.handler,(M=S._lazyPromises)==null?void 0:M.route]}))}catch{}return _}async function nU({request:e,unstable_pattern:t,match:r,lazyHandlerPromise:n,lazyRoutePromise:l,handlerOverride:h,scopedContext:d}){let o,_,S=xs(e.method),P=S?"action":"loader",M=O=>{let z,B=new Promise((K,Q)=>z=Q);_=()=>z(),e.signal.addEventListener("abort",_);let F=K=>typeof O!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${P}" [routeId: ${r.route.id}]`)):O({request:e,unstable_pattern:t,params:r.params,context:d},...K!==void 0?[K]:[]),L=(async()=>{try{return{type:"data",result:await(h?h(Q=>F(Q)):F())}}catch(K){return{type:"error",result:K}}})();return Promise.race([L,B])};try{let O=S?r.route.action:r.route.loader;if(n||l)if(O){let z,[B]=await Promise.all([M(O).catch(F=>{z=F}),n,l]);if(z!==void 0)throw z;o=B}else{await n;let z=S?r.route.action:r.route.loader;if(z)[o]=await Promise.all([M(z),l]);else if(P==="action"){let B=new URL(e.url),F=B.pathname+B.search;throw du(405,{method:e.method,pathname:F,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(O)o=await M(O);else{let z=new URL(e.url),B=z.pathname+z.search;throw du(404,{pathname:B})}}catch(O){return{type:"error",result:O}}finally{_&&e.signal.removeEventListener("abort",_)}return o}async function iU(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function aU(e){var n,l,h,d,o;let{result:t,type:r}=e;if(xz(t)){let _;try{_=await iU(t)}catch(S){return{type:"error",error:S}}return r==="error"?{type:"error",error:new uw(t.status,t.statusText,_),statusCode:t.status,headers:t.headers}:{type:"data",data:_,statusCode:t.status,headers:t.headers}}return r==="error"?Jk(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"error",error:uU(t),statusCode:s_(t)?t.status:void 0,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:s_(t)?t.status:void 0}:Jk(t)?{type:"data",data:t.data,statusCode:(d=t.init)==null?void 0:d.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function oU(e,t,r,n,l){let h=e.headers.get("Location");if(dn(h,"Redirects returned/thrown from loaders/actions must have a Location header"),!ow(h)){let d=n.slice(0,n.findIndex(o=>o.route.id===r)+1);h=f2(new URL(t.url),d,l,h),e.headers.set("Location",h)}return e}function Zk(e,t,r){if(ow(e)){let n=e,l=n.startsWith("//")?new URL(t.protocol+n):new URL(n),h=gu(l.pathname,r)!=null;if(l.origin===t.origin&&h)return l.pathname+l.search+l.hash}return e}function Qg(e,t,r,n){let l=e.createURL(_z(t)).toString(),h={signal:r};if(n&&xs(n.formMethod)){let{formMethod:d,formEncType:o}=n;h.method=d.toUpperCase(),o==="application/json"?(h.headers=new Headers({"Content-Type":o}),h.body=JSON.stringify(n.json)):o==="text/plain"?h.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?h.body=g2(n.formData):h.body=n.formData}return new Request(l,h)}function g2(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Kk(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function sU(e,t,r,n=!1,l=!1){let h={},d=null,o,_=!1,S={},P=r&&Pl(r[1])?r[1].error:void 0;return e.forEach(M=>{if(!(M.route.id in t))return;let O=M.route.id,z=t[O];if(dn(!Cm(z),"Cannot handle redirect results in processLoaderData"),Pl(z)){let B=z.error;if(P!==void 0&&(B=P,P=void 0),d=d||{},l)d[O]=B;else{let F=ep(e,O);d[F.route.id]==null&&(d[F.route.id]=B)}n||(h[O]=fz),_||(_=!0,o=s_(z.error)?z.error.status:500),z.headers&&(S[O]=z.headers)}else h[O]=z.data,z.statusCode&&z.statusCode!==200&&!_&&(o=z.statusCode),z.headers&&(S[O]=z.headers)}),P!==void 0&&r&&(d={[r[0]]:P},r[2]&&(h[r[2]]=void 0)),{loaderData:h,errors:d,statusCode:o||200,loaderHeaders:S}}function Xk(e,t,r,n,l,h){let{loaderData:d,errors:o}=sU(t,r,n);return l.filter(_=>!_.matches||_.matches.some(S=>S.shouldLoad)).forEach(_=>{let{key:S,match:P,controller:M}=_;if(M&&M.signal.aborted)return;let O=h[S];if(dn(O,"Did not find corresponding fetcher result"),Pl(O)){let z=ep(e.matches,P==null?void 0:P.route.id);o&&o[z.route.id]||(o={...o,[z.route.id]:O.error}),e.fetchers.delete(S)}else if(Cm(O))dn(!1,"Unhandled fetcher revalidation redirect");else{let z=md(O.data);e.fetchers.set(S,z)}}),{loaderData:d,errors:o}}function Yk(e,t,r,n){let l=Object.entries(t).filter(([,h])=>h!==fz).reduce((h,[d,o])=>(h[d]=o,h),{});for(let h of r){let d=h.route.id;if(!t.hasOwnProperty(d)&&e.hasOwnProperty(d)&&h.route.loader&&(l[d]=e[d]),n&&n.hasOwnProperty(d))break}return l}function Qk(e){return e?Pl(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function ep(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function J0(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function du(e,{pathname:t,routeId:r,method:n,type:l,message:h}={}){let d="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(d="Bad Request",n&&t&&r?o=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:l==="invalid-body"&&(o="Unable to encode submission body")):e===403?(d="Forbidden",o=`Route "${r}" does not match URL "${t}"`):e===404?(d="Not Found",o=`No route matches URL "${t}"`):e===405&&(d="Method Not Allowed",n&&t&&r?o=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new uw(e||500,d,new Error(o),!0)}function ex(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,l]=t[r];if(Cm(l))return{key:n,result:l}}}function _z(e){let t=typeof e=="string"?wp(e):e;return xh({...t,hash:""})}function lU(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function uU(e){var t,r;return new uw(((t=e.init)==null?void 0:t.status)??500,((r=e.init)==null?void 0:r.statusText)??"Internal Server Error",e.data)}function cU(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&hU(r))}function hU(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function dU(e){return xz(e.result)&&G$.has(e.result.status)}function Pl(e){return e.type==="error"}function Cm(e){return(e&&e.type)==="redirect"}function Jk(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function xz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function fU(e){return q$.has(e.toUpperCase())}function xs(e){return $$.has(e.toUpperCase())}function KE(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Tx(e,t){let r=typeof t=="string"?wp(t).search:t.search;if(e[e.length-1].route.index&&KE(r||""))return e[e.length-1];let n=uz(e);return n[n.length-1]}function eA(e){let{formMethod:t,formAction:r,formEncType:n,text:l,formData:h,json:d}=e;if(!(!t||!r||!n)){if(l!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:l};if(h!=null)return{formMethod:t,formAction:r,formEncType:n,formData:h,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function mS(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function pU(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Lv(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mU(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function md(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function gU(e,t){try{let r=e.sessionStorage.getItem(dz);if(r){let n=JSON.parse(r);for(let[l,h]of Object.entries(n||{}))h&&Array.isArray(h)&&t.set(l,new Set(h||[]))}}catch{}}function yU(e,t){if(t.size>0){let r={};for(let[n,l]of t)r[n]=[...l];try{e.sessionStorage.setItem(dz,JSON.stringify(r))}catch(n){ca(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function tA(){let e,t,r=new Promise((n,l)=>{e=async h=>{n(h);try{await r}catch{}},t=async h=>{l(h);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var ng=A.createContext(null);ng.displayName="DataRouter";var O_=A.createContext(null);O_.displayName="DataRouterState";A.createContext(!1);var XE=A.createContext({isTransitioning:!1});XE.displayName="ViewTransition";var bz=A.createContext(new Map);bz.displayName="Fetchers";var vU=A.createContext(null);vU.displayName="Await";var bu=A.createContext(null);bu.displayName="Navigation";var cw=A.createContext(null);cw.displayName="Location";var Ec=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ec.displayName="Route";var YE=A.createContext(null);YE.displayName="RouteError";function _U(e,{relative:t}={}){dn(Ry(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=A.useContext(bu),{hash:l,pathname:h,search:d}=L_(e,{relative:t}),o=h;return r!=="/"&&(o=h==="/"?r:yh([r,h])),n.createHref({pathname:o,search:d,hash:l})}function Ry(){return A.useContext(cw)!=null}function tl(){return dn(Ry(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(cw).location}var wz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sz(e){A.useContext(bu).static||A.useLayoutEffect(e)}function Sp(){let{isDataRoute:e}=A.useContext(Ec);return e?DU():xU()}function xU(){dn(Ry(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(ng),{basename:t,navigator:r}=A.useContext(bu),{matches:n}=A.useContext(Ec),{pathname:l}=tl(),h=JSON.stringify(sw(n)),d=A.useRef(!1);return Sz(()=>{d.current=!0}),A.useCallback((_,S={})=>{if(ca(d.current,wz),!d.current)return;if(typeof _=="number"){r.go(_);return}let P=lw(_,JSON.parse(h),l,S.relative==="path");e==null&&t!=="/"&&(P.pathname=P.pathname==="/"?t:yh([t,P.pathname])),(S.replace?r.replace:r.push)(P,S.state,S)},[t,r,h,l,e])}var bU=A.createContext(null);function wU(e){let t=A.useContext(Ec).outlet;return A.useMemo(()=>t&&A.createElement(bU.Provider,{value:e},t),[t,e])}function L_(e,{relative:t}={}){let{matches:r}=A.useContext(Ec),{pathname:n}=tl(),l=JSON.stringify(sw(r));return A.useMemo(()=>lw(e,JSON.parse(l),n,t==="path"),[e,l,n,t])}function SU(e,t,r,n,l){dn(Ry(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=A.useContext(bu),{matches:d}=A.useContext(Ec),o=d[d.length-1],_=o?o.params:{},S=o?o.pathname:"/",P=o?o.pathnameBase:"/",M=o&&o.route;{let Q=M&&M.path||"";Pz(S,!M||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${S}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let O=tl(),z;z=O;let B=z.pathname||"/",F=B;if(P!=="/"){let Q=P.replace(/^\//,"").split("/");F="/"+B.replace(/^\//,"").split("/").slice(Q.length).join("/")}let L=Jf(e,{pathname:F});return ca(M||L!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),ca(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),MU(L&&L.map(Q=>Object.assign({},Q,{params:Object.assign({},_,Q.params),pathname:yh([P,h.encodeLocation?h.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?P:yh([P,h.encodeLocation?h.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),d,r,n,l)}function PU(){let e=LU(),t=s_(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},h={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:h},"ErrorBoundary")," or"," ",A.createElement("code",{style:h},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:l},r):null,d)}var EU=A.createElement(PU,null),CU=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?A.createElement(Ec.Provider,{value:this.props.routeContext},A.createElement(YE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TU({routeContext:e,match:t,children:r}){let n=A.useContext(ng);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Ec.Provider,{value:e},r)}function MU(e,t=[],r=null,n=null,l=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,d=r==null?void 0:r.errors;if(d!=null){let P=h.findIndex(M=>M.route.id&&(d==null?void 0:d[M.route.id])!==void 0);dn(P>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),h=h.slice(0,Math.min(h.length,P+1))}let o=!1,_=-1;if(r)for(let P=0;P<h.length;P++){let M=h[P];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(_=P),M.route.id){let{loaderData:O,errors:z}=r,B=M.route.loader&&!O.hasOwnProperty(M.route.id)&&(!z||z[M.route.id]===void 0);if(M.route.lazy||B){o=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}let S=r&&n?(P,M)=>{var O,z;n(P,{location:r.location,params:((z=(O=r.matches)==null?void 0:O[0])==null?void 0:z.params)??{},unstable_pattern:I_(r.matches),errorInfo:M})}:void 0;return h.reduceRight((P,M,O)=>{let z,B=!1,F=null,L=null;r&&(z=d&&M.route.id?d[M.route.id]:void 0,F=M.route.errorElement||EU,o&&(_<0&&O===0?(Pz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,L=null):_===O&&(B=!0,L=M.route.hydrateFallbackElement||null)));let K=t.concat(h.slice(0,O+1)),Q=()=>{let re;return z?re=F:B?re=L:M.route.Component?re=A.createElement(M.route.Component,null):M.route.element?re=M.route.element:re=P,A.createElement(TU,{match:M,routeContext:{outlet:P,matches:K,isDataRoute:r!=null},children:re})};return r&&(M.route.ErrorBoundary||M.route.errorElement||O===0)?A.createElement(CU,{location:r.location,revalidation:r.revalidation,component:F,error:z,children:Q(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:S}):Q()},null)}function QE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kU(e){let t=A.useContext(ng);return dn(t,QE(e)),t}function AU(e){let t=A.useContext(O_);return dn(t,QE(e)),t}function IU(e){let t=A.useContext(Ec);return dn(t,QE(e)),t}function JE(e){let t=IU(e),r=t.matches[t.matches.length-1];return dn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function OU(){return JE("useRouteId")}function LU(){var n;let e=A.useContext(YE),t=AU("useRouteError"),r=JE("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function DU(){let{router:e}=kU("useNavigate"),t=JE("useNavigate"),r=A.useRef(!1);return Sz(()=>{r.current=!0}),A.useCallback(async(l,h={})=>{ca(r.current,wz),r.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...h}))},[e,t])}var rA={};function Pz(e,t,r){!t&&!rA[e]&&(rA[e]=!0,ca(!1,r))}var nA={};function iA(e,t){!e&&!nA[t]&&(nA[t]=!0,console.warn(t))}var RU="useOptimistic",aA=aw[RU],jU=()=>{};function zU(e){return aA?aA(e):[e,jU]}function NU(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&ca(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:A.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&ca(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:A.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&ca(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:A.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var FU=["HydrateFallback","hydrateFallbackElement"],BU=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function VU({router:e,flushSync:t,unstable_onError:r,unstable_useTransitions:n}){let[l,h]=A.useState(e.state),[d,o]=zU(l),[_,S]=A.useState(),[P,M]=A.useState({isTransitioning:!1}),[O,z]=A.useState(),[B,F]=A.useState(),[L,K]=A.useState(),Q=A.useRef(new Map),re=A.useCallback((ne,{deletedFetchers:be,newErrors:xe,flushSync:$e,viewTransitionOpts:Ee})=>{xe&&r&&Object.values(xe).forEach(Xe=>{var ut;return r(Xe,{location:ne.location,params:((ut=ne.matches[0])==null?void 0:ut.params)??{},unstable_pattern:I_(ne.matches)})}),ne.fetchers.forEach((Xe,ut)=>{Xe.data!==void 0&&Q.current.set(ut,Xe.data)}),be.forEach(Xe=>Q.current.delete(Xe)),iA($e===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Ne=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(iA(Ee==null||Ne,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!Ee||!Ne){t&&$e?t(()=>h(ne)):n===!1?h(ne):A.startTransition(()=>{n===!0&&o(Xe=>oA(Xe,ne)),h(ne)});return}if(t&&$e){t(()=>{B&&(O==null||O.resolve(),B.skipTransition()),M({isTransitioning:!0,flushSync:!0,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})});let Xe=e.window.document.startViewTransition(()=>{t(()=>h(ne))});Xe.finished.finally(()=>{t(()=>{z(void 0),F(void 0),S(void 0),M({isTransitioning:!1})})}),t(()=>F(Xe));return}B?(O==null||O.resolve(),B.skipTransition(),K({state:ne,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})):(S(ne),M({isTransitioning:!0,flushSync:!1,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation}))},[e.window,t,B,O,n,o,r]);A.useLayoutEffect(()=>e.subscribe(re),[e,re]),A.useEffect(()=>{P.isTransitioning&&!P.flushSync&&z(new BU)},[P]),A.useEffect(()=>{if(O&&_&&e.window){let ne=_,be=O.promise,xe=e.window.document.startViewTransition(async()=>{n===!1?h(ne):A.startTransition(()=>{n===!0&&o($e=>oA($e,ne)),h(ne)}),await be});xe.finished.finally(()=>{z(void 0),F(void 0),S(void 0),M({isTransitioning:!1})}),F(xe)}},[_,O,e.window,n,o]),A.useEffect(()=>{O&&_&&d.location.key===_.location.key&&O.resolve()},[O,B,d.location,_]),A.useEffect(()=>{!P.isTransitioning&&L&&(S(L.state),M({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),K(void 0))},[P.isTransitioning,L]);let te=A.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:ne=>e.navigate(ne),push:(ne,be,xe)=>e.navigate(ne,{state:be,preventScrollReset:xe==null?void 0:xe.preventScrollReset}),replace:(ne,be,xe)=>e.navigate(ne,{replace:!0,state:be,preventScrollReset:xe==null?void 0:xe.preventScrollReset})}),[e]),ae=e.basename||"/",he=A.useMemo(()=>({router:e,navigator:te,static:!1,basename:ae,unstable_onError:r}),[e,te,ae,r]);return A.createElement(A.Fragment,null,A.createElement(ng.Provider,{value:he},A.createElement(O_.Provider,{value:d},A.createElement(bz.Provider,{value:Q.current},A.createElement(XE.Provider,{value:P},A.createElement(qU,{basename:ae,location:d.location,navigationType:d.historyAction,navigator:te,unstable_useTransitions:n===!0},A.createElement($U,{routes:e.routes,future:e.future,state:d,unstable_onError:r})))))),null)}function oA(e,t){return{...e,navigation:t.navigation.state!=="idle"?t.navigation:e.navigation,revalidation:t.revalidation!=="idle"?t.revalidation:e.revalidation,actionData:t.navigation.state!=="submitting"?t.actionData:e.actionData,fetchers:t.fetchers}}var $U=A.memo(UU);function UU({routes:e,future:t,state:r,unstable_onError:n}){return SU(e,void 0,r,n,t)}function eC({to:e,replace:t,state:r,relative:n}){dn(Ry(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=A.useContext(bu);ca(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=A.useContext(Ec),{pathname:d}=tl(),o=Sp(),_=lw(e,sw(h),d,n==="path"),S=JSON.stringify(_);return A.useEffect(()=>{o(JSON.parse(S),{replace:t,state:r,relative:n})},[o,S,n,t,r]),null}function Ez(e){return wU(e.context)}function qU({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:l,static:h=!1,unstable_useTransitions:d}){dn(!Ry(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),_=A.useMemo(()=>({basename:o,navigator:l,static:h,unstable_useTransitions:d,future:{}}),[o,l,h,d]);typeof r=="string"&&(r=wp(r));let{pathname:S="/",search:P="",hash:M="",state:O=null,key:z="default"}=r,B=A.useMemo(()=>{let F=gu(S,o);return F==null?null:{location:{pathname:F,search:P,hash:M,state:O,key:z},navigationType:n}},[o,S,P,M,O,z,n]);return ca(B!=null,`<Router basename="${o}"> is not able to match the URL "${S}${P}${M}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:A.createElement(bu.Provider,{value:_},A.createElement(cw.Provider,{children:t,value:B}))}var Mx="get",kx="application/x-www-form-urlencoded";function hw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function GU(e){return hw(e)&&e.tagName.toLowerCase()==="button"}function WU(e){return hw(e)&&e.tagName.toLowerCase()==="form"}function HU(e){return hw(e)&&e.tagName.toLowerCase()==="input"}function ZU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function KU(e,t){return e.button===0&&(!t||t==="_self")&&!ZU(e)}var tx=null;function XU(){if(tx===null)try{new FormData(document.createElement("form"),0),tx=!1}catch{tx=!0}return tx}var YU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gS(e){return e!=null&&!YU.has(e)?(ca(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kx}"`),null):e}function QU(e,t){let r,n,l,h,d;if(WU(e)){let o=e.getAttribute("action");n=o?gu(o,t):null,r=e.getAttribute("method")||Mx,l=gS(e.getAttribute("enctype"))||kx,h=new FormData(e)}else if(GU(e)||HU(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=e.getAttribute("formaction")||o.getAttribute("action");if(n=_?gu(_,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Mx,l=gS(e.getAttribute("formenctype"))||gS(o.getAttribute("enctype"))||kx,h=new FormData(o,e),!XU()){let{name:S,type:P,value:M}=e;if(P==="image"){let O=S?`${S}.`:"";h.append(`${O}x`,"0"),h.append(`${O}y`,"0")}else S&&h.append(S,M)}}else{if(hw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Mx,n=null,l=kx,d=e}return h&&l==="text/plain"&&(d=h,h=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:h,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tC(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function JU(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&gu(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function e8(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function r8(e,t,r){let n=await Promise.all(e.map(async l=>{let h=t.routes[l.route.id];if(h){let d=await e8(h,r);return d.links?d.links():[]}return[]}));return o8(n.flat(1).filter(t8).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function sA(e,t,r,n,l,h){let d=(_,S)=>r[S]?_.route.id!==r[S].route.id:!0,o=(_,S)=>{var P;return r[S].pathname!==_.pathname||((P=r[S].route.path)==null?void 0:P.endsWith("*"))&&r[S].params["*"]!==_.params["*"]};return h==="assets"?t.filter((_,S)=>d(_,S)||o(_,S)):h==="data"?t.filter((_,S)=>{var M;let P=n.routes[_.route.id];if(!P||!P.hasLoader)return!1;if(d(_,S)||o(_,S))return!0;if(_.route.shouldRevalidate){let O=_.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((M=r[0])==null?void 0:M.params)||{},nextUrl:new URL(e,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function n8(e,t,{includeHydrateFallback:r}={}){return i8(e.map(n=>{let l=t.routes[n.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function i8(e){return[...new Set(e)]}function a8(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function o8(e,t){let r=new Set;return new Set(t),e.reduce((n,l)=>{let h=JSON.stringify(a8(l));return r.has(h)||(r.add(h),n.push({key:h,link:l})),n},[])}function Cz(){let e=A.useContext(ng);return tC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function s8(){let e=A.useContext(O_);return tC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rC=A.createContext(void 0);rC.displayName="FrameworkContext";function Tz(){let e=A.useContext(rC);return tC(e,"You must render this element inside a <HydratedRouter> element"),e}function l8(e,t){let r=A.useContext(rC),[n,l]=A.useState(!1),[h,d]=A.useState(!1),{onFocus:o,onBlur:_,onMouseEnter:S,onMouseLeave:P,onTouchStart:M}=t,O=A.useRef(null);A.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let F=K=>{K.forEach(Q=>{d(Q.isIntersecting)})},L=new IntersectionObserver(F,{threshold:.5});return O.current&&L.observe(O.current),()=>{L.disconnect()}}},[e]),A.useEffect(()=>{if(n){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[n]);let z=()=>{l(!0)},B=()=>{l(!1),d(!1)};return r?e!=="intent"?[h,O,{}]:[h,O,{onFocus:Dv(o,z),onBlur:Dv(_,B),onMouseEnter:Dv(S,z),onMouseLeave:Dv(P,B),onTouchStart:Dv(M,z)}]:[!1,O,{}]}function Dv(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function u8({page:e,...t}){let{router:r}=Cz(),n=A.useMemo(()=>Jf(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?A.createElement(h8,{page:e,matches:n,...t}):null}function c8(e){let{manifest:t,routeModules:r}=Tz(),[n,l]=A.useState([]);return A.useEffect(()=>{let h=!1;return r8(e,t,r).then(d=>{h||l(d)}),()=>{h=!0}},[e,t,r]),n}function h8({page:e,matches:t,...r}){let n=tl(),{manifest:l,routeModules:h}=Tz(),{basename:d}=Cz(),{loaderData:o,matches:_}=s8(),S=A.useMemo(()=>sA(e,t,_,l,n,"data"),[e,t,_,l,n]),P=A.useMemo(()=>sA(e,t,_,l,n,"assets"),[e,t,_,l,n]),M=A.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let B=new Set,F=!1;if(t.forEach(K=>{var re;let Q=l.routes[K.route.id];!Q||!Q.hasLoader||(!S.some(te=>te.route.id===K.route.id)&&K.route.id in o&&((re=h[K.route.id])!=null&&re.shouldRevalidate)||Q.hasClientLoader?F=!0:B.add(K.route.id))}),B.size===0)return[];let L=JU(e,d,"data");return F&&B.size>0&&L.searchParams.set("_routes",t.filter(K=>B.has(K.route.id)).map(K=>K.route.id).join(",")),[L.pathname+L.search]},[d,o,n,l,S,t,e,h]),O=A.useMemo(()=>n8(P,l),[P,l]),z=c8(P);return A.createElement(A.Fragment,null,M.map(B=>A.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...r})),O.map(B=>A.createElement("link",{key:B,rel:"modulepreload",href:B,...r})),z.map(({key:B,link:F})=>A.createElement("link",{key:B,nonce:r.nonce,...F})))}function d8(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Mz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mz&&(window.__reactRouterVersion="7.10.1")}catch{}function f8(e,t){return K$({basename:t==null?void 0:t.basename,getContext:t==null?void 0:t.getContext,future:t==null?void 0:t.future,history:u$({window:t==null?void 0:t.window}),hydrationData:p8(),routes:e,mapRouteProperties:NU,hydrationRouteProperties:FU,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window,unstable_instrumentations:t==null?void 0:t.unstable_instrumentations}).initialize()}function p8(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:m8(e.errors)}),e}function m8(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,l]of t)if(l&&l.__type==="RouteErrorResponse")r[n]=new uw(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let h=window[l.__subType];if(typeof h=="function")try{let d=new h(l.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let h=new Error(l.message);h.stack="",r[n]=h}}else r[n]=l;return r}var kz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wc=A.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:l,reloadDocument:h,replace:d,state:o,target:_,to:S,preventScrollReset:P,viewTransition:M,...O},z){let{basename:B,unstable_useTransitions:F}=A.useContext(bu),L=typeof S=="string"&&kz.test(S),K,Q=!1;if(typeof S=="string"&&L&&(K=S,Mz))try{let $e=new URL(window.location.href),Ee=S.startsWith("//")?new URL($e.protocol+S):new URL(S),Ne=gu(Ee.pathname,B);Ee.origin===$e.origin&&Ne!=null?S=Ne+Ee.search+Ee.hash:Q=!0}catch{ca(!1,`<Link to="${S}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=_U(S,{relative:l}),[te,ae,he]=l8(n,O),ne=v8(S,{replace:d,state:o,target:_,preventScrollReset:P,relative:l,viewTransition:M,unstable_useTransitions:F});function be($e){t&&t($e),$e.defaultPrevented||ne($e)}let xe=A.createElement("a",{...O,...he,href:K||re,onClick:Q||h?t:be,ref:d8(z,ae),target:_,"data-discover":!L&&r==="render"?"true":void 0});return te&&!L?A.createElement(A.Fragment,null,xe,A.createElement(u8,{page:re})):xe});wc.displayName="Link";var Ax=A.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:l=!1,style:h,to:d,viewTransition:o,children:_,...S},P){let M=L_(d,{relative:S.relative}),O=tl(),z=A.useContext(O_),{navigator:B,basename:F}=A.useContext(bu),L=z!=null&&S8(M)&&o===!0,K=B.encodeLocation?B.encodeLocation(M).pathname:M.pathname,Q=O.pathname,re=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;r||(Q=Q.toLowerCase(),re=re?re.toLowerCase():null,K=K.toLowerCase()),re&&F&&(re=gu(re,F)||re);const te=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ae=Q===K||!l&&Q.startsWith(K)&&Q.charAt(te)==="/",he=re!=null&&(re===K||!l&&re.startsWith(K)&&re.charAt(K.length)==="/"),ne={isActive:ae,isPending:he,isTransitioning:L},be=ae?t:void 0,xe;typeof n=="function"?xe=n(ne):xe=[n,ae?"active":null,he?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let $e=typeof h=="function"?h(ne):h;return A.createElement(wc,{...S,"aria-current":be,className:xe,ref:P,style:$e,to:d,viewTransition:o},typeof _=="function"?_(ne):_)});Ax.displayName="NavLink";var g8=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:l,state:h,method:d=Mx,action:o,onSubmit:_,relative:S,preventScrollReset:P,viewTransition:M,...O},z)=>{let{unstable_useTransitions:B}=A.useContext(bu),F=b8(),L=w8(o,{relative:S}),K=d.toLowerCase()==="get"?"get":"post",Q=typeof o=="string"&&kz.test(o),re=te=>{if(_&&_(te),te.defaultPrevented)return;te.preventDefault();let ae=te.nativeEvent.submitter,he=(ae==null?void 0:ae.getAttribute("formmethod"))||d,ne=()=>F(ae||te.currentTarget,{fetcherKey:t,method:he,navigate:r,replace:l,state:h,relative:S,preventScrollReset:P,viewTransition:M});B&&r!==!1?A.startTransition(()=>ne()):ne()};return A.createElement("form",{ref:z,method:K,action:L,onSubmit:n?_:re,...O,"data-discover":!Q&&e==="render"?"true":void 0})});g8.displayName="Form";function y8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Az(e){let t=A.useContext(ng);return dn(t,y8(e)),t}function v8(e,{target:t,replace:r,state:n,preventScrollReset:l,relative:h,viewTransition:d,unstable_useTransitions:o}={}){let _=Sp(),S=tl(),P=L_(e,{relative:h});return A.useCallback(M=>{if(KU(M,t)){M.preventDefault();let O=r!==void 0?r:xh(S)===xh(P),z=()=>_(e,{replace:O,state:n,preventScrollReset:l,relative:h,viewTransition:d});o?A.startTransition(()=>z()):z()}},[S,_,P,r,n,t,e,l,h,d,o])}var _8=0,x8=()=>`__${String(++_8)}__`;function b8(){let{router:e}=Az("useSubmit"),{basename:t}=A.useContext(bu),r=OU(),n=e.fetch,l=e.navigate;return A.useCallback(async(h,d={})=>{let{action:o,method:_,encType:S,formData:P,body:M}=QU(h,t);if(d.navigate===!1){let O=d.fetcherKey||x8();await n(O,r,d.action||o,{preventScrollReset:d.preventScrollReset,formData:P,body:M,formMethod:d.method||_,formEncType:d.encType||S,flushSync:d.flushSync})}else await l(d.action||o,{preventScrollReset:d.preventScrollReset,formData:P,body:M,formMethod:d.method||_,formEncType:d.encType||S,replace:d.replace,state:d.state,fromRouteId:r,flushSync:d.flushSync,viewTransition:d.viewTransition})},[n,l,t,r])}function w8(e,{relative:t}={}){let{basename:r}=A.useContext(bu),n=A.useContext(Ec);dn(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),h={...L_(e||".",{relative:t})},d=tl();if(e==null){h.search=d.search;let o=new URLSearchParams(h.search),_=o.getAll("index");if(_.some(P=>P==="")){o.delete("index"),_.filter(M=>M).forEach(M=>o.append("index",M));let P=o.toString();h.search=P?`?${P}`:""}}return(!e||e===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(h.pathname=h.pathname==="/"?r:yh([r,h.pathname])),xh(h)}function S8(e,{relative:t}={}){let r=A.useContext(XE);dn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Az("useViewTransitionState"),l=L_(e,{relative:t});if(!r.isTransitioning)return!1;let h=gu(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=gu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ux(l.pathname,d)!=null||Ux(l.pathname,h)!=null}var Cc=iz();function P8(e){return A.createElement(VU,{flushSync:Cc.flushSync,...e})}const E8="/assets/logo-C5NOI3_5.png";function C8(){const t=tl().pathname==="/";return $.jsx("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:$.jsx("path",{d:"M15.9993 15C13.7893 16.333 10.2073 16.333 7.99927 15M18.9993 8.71001L13.6663 4.56201C13.1983 4.19792 12.6223 4.00024 12.0293 4.00024C11.4363 4.00024 10.8603 4.19792 10.3923 4.56201L5.0583 8.71001C4.73774 8.9593 4.47839 9.27854 4.30005 9.64336C4.12171 10.0082 4.02911 10.4089 4.0293 10.815V18.015C4.0293 18.5454 4.24001 19.0542 4.61508 19.4292C4.99016 19.8043 5.49886 20.015 6.0293 20.015H18.0293C18.5597 20.015 19.0684 19.8043 19.4435 19.4292C19.8186 19.0542 20.0293 18.5454 20.0293 18.015V10.815C20.0293 9.99201 19.6493 9.21501 18.9993 8.71001Z",stroke:t?"#fff":"#637381",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function T8(){const t=tl().pathname==="/vechile";return $.jsxs("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[$.jsx("path",{d:"M8.49 2.82996H15.51C18 2.82996 18.55 4.06996 18.87 5.58996L20 11H4L5.13 5.58996C5.45 4.06996 6 2.82996 8.49 2.82996Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M2.00929 19.82C1.89929 20.99 2.83929 22 4.03929 22H5.91929C6.99929 22 7.14929 21.54 7.33929 20.97L7.53929 20.37C7.81929 19.55 7.99929 19 9.43929 19H14.5593C15.9993 19 16.2093 19.62 16.4593 20.37L16.6593 20.97C16.8493 21.54 16.9993 22 18.0793 22H19.9593C21.1593 22 22.0993 20.99 21.9893 19.82L21.4293 13.73C21.2893 12.23 20.9993 11 18.3793 11H5.61929C2.99929 11 2.70929 12.23 2.56929 13.73L2.00929 19.82Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M20 8H21",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M3 8H4",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M12 3V5",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M13.5 5H10.5",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M18 15H15",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M9 15H6",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function M8(){const t=tl().pathname==="/result";return $.jsx("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:$.jsx("path",{d:"M13.45 11.55L15.5 9.5M10 13C10 13.5304 10.2107 14.0391 10.5858 14.4142C10.9609 14.7893 11.4696 15 12 15C12.5304 15 13.0391 14.7893 13.4142 14.4142C13.7893 14.0391 14 13.5304 14 13C14 12.4696 13.7893 11.9609 13.4142 11.5858C13.0391 11.2107 12.5304 11 12 11C11.4696 11 10.9609 11.2107 10.5858 11.5858C10.2107 11.9609 10 12.4696 10 13ZM6.4 19.9999C4.93815 18.838 3.87391 17.2501 3.35478 15.4564C2.83564 13.6626 2.88732 11.7518 3.50265 9.98872C4.11797 8.22564 5.26647 6.69762 6.78899 5.61641C8.3115 4.5352 10.1326 3.95435 12 3.95435C13.8674 3.95435 15.6885 4.5352 17.211 5.61641C18.7335 6.69762 19.882 8.22564 20.4974 9.98872C21.1127 11.7518 21.1644 13.6626 20.6452 15.4564C20.1261 17.2501 19.0619 18.838 17.6 19.9999H6.4Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function k8(){const e="w-full px-5 py-3 rounded-lg flex items-center gap-2 bg-white text-[#637381] text-base font-medium font-roboto inline-flex items-center gap-3 capitalize",t="w-full px-5 py-3 rounded-lg flex items-center gap-2 bg-primary text-white text-base font-medium font-roboto inline-flex items-center gap-3 capitalize";return $.jsxs("div",{className:"w-full h-full flex flex-col gap-10",children:[$.jsx("div",{className:"w-full flex justify-center items-center",children:$.jsx("img",{src:E8,alt:"Logo",className:"w-auto max-w-[200px] object-contain"})}),$.jsxs("div",{className:"flex flex-col gap-5",children:[$.jsxs(Ax,{to:"/",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(C8,{})}),"Home"]}),$.jsxs(Ax,{to:"/vechile",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(T8,{})}),"Vehicle"]}),$.jsxs(Ax,{to:"/result",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(M8,{})}),"result"]})]})]})}function wy({children:e,className:t="",onClick:r,type:n="button",disabled:l,to:h,variant:d="light",state:o,..._}){const S=`
    ${t}
    ${d==="fill"?"bg-black text-white":"bg-primary text-white"}
    inline-flex items-center gap-3 px-7 py-3 rounded-xl 
    text-lg hover:scale-101 transition-all cursor-pointer
    ${l?"opacity-50 cursor-not-allowed":""}
  `;return h?$.jsx(wc,{to:h,state:{data:o},className:S,..._,children:e}):$.jsx("button",{className:S,onClick:r,disabled:l,type:n,..._,children:e})}function gp(){return $.jsx("div",{className:"fixed top-0 left-0 w-full h-screen flex items-center justify-center z-99 backdrop-blur-[10px]",children:$.jsxs("div",{class:"loading-wave",children:[$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"})]})})}var jy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},A8={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ip,HE,Hj,I8=(Hj=class{constructor(){Dr(this,ip,A8);Dr(this,HE,!1)}setTimeoutProvider(e){fr(this,ip,e)}setTimeout(e,t){return Ue(this,ip).setTimeout(e,t)}clearTimeout(e){Ue(this,ip).clearTimeout(e)}setInterval(e,t){return Ue(this,ip).setInterval(e,t)}clearInterval(e){Ue(this,ip).clearInterval(e)}},ip=new WeakMap,HE=new WeakMap,Hj),Tm=new I8;function O8(e){setTimeout(e,0)}var Zm=typeof window>"u"||"Deno"in globalThis;function _s(){}function L8(e,t){return typeof e=="function"?e(t):e}function y2(e){return typeof e=="number"&&e>=0&&e!==1/0}function Iz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function pp(e,t){return typeof e=="function"?e(t):e}function fu(e,t){return typeof e=="function"?e(t):e}function lA(e,t){const{type:r="all",exact:n,fetchStatus:l,predicate:h,queryKey:d,stale:o}=e;if(d){if(n){if(t.queryHash!==nC(d,t.options))return!1}else if(!l_(t.queryKey,d))return!1}if(r!=="all"){const _=t.isActive();if(r==="active"&&!_||r==="inactive"&&_)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||l&&l!==t.state.fetchStatus||h&&!h(t))}function uA(e,t){const{exact:r,status:n,predicate:l,mutationKey:h}=e;if(h){if(!t.options.mutationKey)return!1;if(r){if(Km(t.options.mutationKey)!==Km(h))return!1}else if(!l_(t.options.mutationKey,h))return!1}return!(n&&t.state.status!==n||l&&!l(t))}function nC(e,t){return((t==null?void 0:t.queryKeyHashFn)||Km)(e)}function Km(e){return JSON.stringify(e,(t,r)=>v2(r)?Object.keys(r).sort().reduce((n,l)=>(n[l]=r[l],n),{}):r)}function l_(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>l_(e[r],t[r])):!1}var D8=Object.prototype.hasOwnProperty;function Oz(e,t){if(e===t)return e;const r=cA(e)&&cA(t);if(!r&&!(v2(e)&&v2(t)))return t;const l=(r?e:Object.keys(e)).length,h=r?t:Object.keys(t),d=h.length,o=r?new Array(d):{};let _=0;for(let S=0;S<d;S++){const P=r?S:h[S],M=e[P],O=t[P];if(M===O){o[P]=M,(r?S<l:D8.call(e,P))&&_++;continue}if(M===null||O===null||typeof M!="object"||typeof O!="object"){o[P]=O;continue}const z=Oz(M,O);o[P]=z,z===M&&_++}return l===d&&_===l?e:o}function Gx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function cA(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function v2(e){if(!hA(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hA(e){return Object.prototype.toString.call(e)==="[object Object]"}function R8(e){return new Promise(t=>{Tm.setTimeout(t,e)})}function _2(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Oz(e,t):t}function j8(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function z8(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var iC=Symbol();function Lz(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===iC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Dz(e,t){return typeof e=="function"?e(...t):!!e}var Dm,ap,cy,Zj,N8=(Zj=class extends jy{constructor(){super();Dr(this,Dm);Dr(this,ap);Dr(this,cy);fr(this,cy,t=>{if(!Zm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ue(this,ap)||this.setEventListener(Ue(this,cy))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,ap))==null||t.call(this),fr(this,ap,void 0))}setEventListener(t){var r;fr(this,cy,t),(r=Ue(this,ap))==null||r.call(this),fr(this,ap,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ue(this,Dm)!==t&&(fr(this,Dm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ue(this,Dm)=="boolean"?Ue(this,Dm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dm=new WeakMap,ap=new WeakMap,cy=new WeakMap,Zj),aC=new N8;function x2(){let e,t;const r=new Promise((l,h)=>{e=l,t=h});r.status="pending",r.catch(()=>{});function n(l){Object.assign(r,l),delete r.resolve,delete r.reject}return r.resolve=l=>{n({status:"fulfilled",value:l}),e(l)},r.reject=l=>{n({status:"rejected",reason:l}),t(l)},r}var F8=O8;function B8(){let e=[],t=0,r=o=>{o()},n=o=>{o()},l=F8;const h=o=>{t?e.push(o):l(()=>{r(o)})},d=()=>{const o=e;e=[],o.length&&l(()=>{n(()=>{o.forEach(_=>{r(_)})})})};return{batch:o=>{let _;t++;try{_=o()}finally{t--,t||d()}return _},batchCalls:o=>(..._)=>{h(()=>{o(..._)})},schedule:h,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{l=o}}}var Wa=B8(),hy,op,dy,Kj,V8=(Kj=class extends jy{constructor(){super();Dr(this,hy,!0);Dr(this,op);Dr(this,dy);fr(this,dy,t=>{if(!Zm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ue(this,op)||this.setEventListener(Ue(this,dy))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,op))==null||t.call(this),fr(this,op,void 0))}setEventListener(t){var r;fr(this,dy,t),(r=Ue(this,op))==null||r.call(this),fr(this,op,t(this.setOnline.bind(this)))}setOnline(t){Ue(this,hy)!==t&&(fr(this,hy,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ue(this,hy)}},hy=new WeakMap,op=new WeakMap,dy=new WeakMap,Kj),Wx=new V8;function $8(e){return Math.min(1e3*2**e,3e4)}function Rz(e){return(e??"online")==="online"?Wx.isOnline():!0}var b2=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function jz(e){let t=!1,r=0,n;const l=x2(),h=()=>l.status!=="pending",d=F=>{var L;if(!h()){const K=new b2(F);O(K),(L=e.onCancel)==null||L.call(e,K)}},o=()=>{t=!0},_=()=>{t=!1},S=()=>aC.isFocused()&&(e.networkMode==="always"||Wx.isOnline())&&e.canRun(),P=()=>Rz(e.networkMode)&&e.canRun(),M=F=>{h()||(n==null||n(),l.resolve(F))},O=F=>{h()||(n==null||n(),l.reject(F))},z=()=>new Promise(F=>{var L;n=K=>{(h()||S())&&F(K)},(L=e.onPause)==null||L.call(e)}).then(()=>{var F;n=void 0,h()||(F=e.onContinue)==null||F.call(e)}),B=()=>{if(h())return;let F;const L=r===0?e.initialPromise:void 0;try{F=L??e.fn()}catch(K){F=Promise.reject(K)}Promise.resolve(F).then(M).catch(K=>{var he;if(h())return;const Q=e.retry??(Zm?0:3),re=e.retryDelay??$8,te=typeof re=="function"?re(r,K):re,ae=Q===!0||typeof Q=="number"&&r<Q||typeof Q=="function"&&Q(r,K);if(t||!ae){O(K);return}r++,(he=e.onFail)==null||he.call(e,r,K),R8(te).then(()=>S()?void 0:z()).then(()=>{t?O(K):B()})})};return{promise:l,status:()=>l.status,cancel:d,continue:()=>(n==null||n(),l),cancelRetry:o,continueRetry:_,canStart:P,start:()=>(P()?B():z().then(B),l)}}var Rm,Xj,zz=(Xj=class{constructor(){Dr(this,Rm)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),y2(this.gcTime)&&fr(this,Rm,Tm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zm?1/0:300*1e3))}clearGcTimeout(){Ue(this,Rm)&&(Tm.clearTimeout(Ue(this,Rm)),fr(this,Rm,void 0))}},Rm=new WeakMap,Xj),jm,fy,hu,zm,vo,C_,Nm,pc,gd,Yj,U8=(Yj=class extends zz{constructor(t){super();Dr(this,pc);Dr(this,jm);Dr(this,fy);Dr(this,hu);Dr(this,zm);Dr(this,vo);Dr(this,C_);Dr(this,Nm);fr(this,Nm,!1),fr(this,C_,t.defaultOptions),this.setOptions(t.options),this.observers=[],fr(this,zm,t.client),fr(this,hu,Ue(this,zm).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fr(this,jm,fA(this.options)),this.state=t.state??Ue(this,jm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ue(this,vo))==null?void 0:t.promise}setOptions(t){if(this.options={...Ue(this,C_),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=fA(this.options);r.data!==void 0&&(this.setState(dA(r.data,r.dataUpdatedAt)),fr(this,jm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ue(this,hu).remove(this)}setData(t,r){const n=_2(this.state.data,t,this.options);return an(this,pc,gd).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){an(this,pc,gd).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,l;const r=(n=Ue(this,vo))==null?void 0:n.promise;return(l=Ue(this,vo))==null||l.cancel(t),r?r.then(_s).catch(_s):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ue(this,jm))}isActive(){return this.observers.some(t=>fu(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===iC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>pp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Iz(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,vo))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,vo))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ue(this,hu).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ue(this,vo)&&(Ue(this,Nm)?Ue(this,vo).cancel({revert:!0}):Ue(this,vo).cancelRetry()),this.scheduleGc()),Ue(this,hu).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||an(this,pc,gd).call(this,{type:"invalidate"})}async fetch(t,r){var _,S,P,M,O,z,B,F,L,K,Q,re;if(this.state.fetchStatus!=="idle"&&((_=Ue(this,vo))==null?void 0:_.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ue(this,vo))return Ue(this,vo).continueRetry(),Ue(this,vo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const te=this.observers.find(ae=>ae.options.queryFn);te&&this.setOptions(te.options)}const n=new AbortController,l=te=>{Object.defineProperty(te,"signal",{enumerable:!0,get:()=>(fr(this,Nm,!0),n.signal)})},h=()=>{const te=Lz(this.options,r),he=(()=>{const ne={client:Ue(this,zm),queryKey:this.queryKey,meta:this.meta};return l(ne),ne})();return fr(this,Nm,!1),this.options.persister?this.options.persister(te,he,this):te(he)},o=(()=>{const te={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ue(this,zm),state:this.state,fetchFn:h};return l(te),te})();(S=this.options.behavior)==null||S.onFetch(o,this),fr(this,fy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((P=o.fetchOptions)==null?void 0:P.meta))&&an(this,pc,gd).call(this,{type:"fetch",meta:(M=o.fetchOptions)==null?void 0:M.meta}),fr(this,vo,jz({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:te=>{te instanceof b2&&te.revert&&this.setState({...Ue(this,fy),fetchStatus:"idle"}),n.abort()},onFail:(te,ae)=>{an(this,pc,gd).call(this,{type:"failed",failureCount:te,error:ae})},onPause:()=>{an(this,pc,gd).call(this,{type:"pause"})},onContinue:()=>{an(this,pc,gd).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const te=await Ue(this,vo).start();if(te===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(te),(z=(O=Ue(this,hu).config).onSuccess)==null||z.call(O,te,this),(F=(B=Ue(this,hu).config).onSettled)==null||F.call(B,te,this.state.error,this),te}catch(te){if(te instanceof b2){if(te.silent)return Ue(this,vo).promise;if(te.revert){if(this.state.data===void 0)throw te;return this.state.data}}throw an(this,pc,gd).call(this,{type:"error",error:te}),(K=(L=Ue(this,hu).config).onError)==null||K.call(L,te,this),(re=(Q=Ue(this,hu).config).onSettled)==null||re.call(Q,this.state.data,te,this),te}finally{this.scheduleGc()}}},jm=new WeakMap,fy=new WeakMap,hu=new WeakMap,zm=new WeakMap,vo=new WeakMap,C_=new WeakMap,Nm=new WeakMap,pc=new WeakSet,gd=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Nz(n.data,this.options),fetchMeta:t.meta??null};case"success":const l={...n,...dA(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fr(this,fy,t.manual?l:void 0),l;case"error":const h=t.error;return{...n,error:h,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Wa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ue(this,hu).notify({query:this,type:"updated",action:t})})},Yj);function Nz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Rz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dA(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function fA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hs,En,T_,gs,Fm,py,vd,sp,M_,my,gy,Bm,Vm,lp,yy,ei,Yv,w2,S2,P2,E2,C2,T2,M2,Fz,Qj,q8=(Qj=class extends jy{constructor(t,r){super();Dr(this,ei);Dr(this,Hs);Dr(this,En);Dr(this,T_);Dr(this,gs);Dr(this,Fm);Dr(this,py);Dr(this,vd);Dr(this,sp);Dr(this,M_);Dr(this,my);Dr(this,gy);Dr(this,Bm);Dr(this,Vm);Dr(this,lp);Dr(this,yy,new Set);this.options=r,fr(this,Hs,t),fr(this,sp,null),fr(this,vd,x2()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ue(this,En).addObserver(this),pA(Ue(this,En),this.options)?an(this,ei,Yv).call(this):this.updateResult(),an(this,ei,E2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return k2(Ue(this,En),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return k2(Ue(this,En),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,an(this,ei,C2).call(this),an(this,ei,T2).call(this),Ue(this,En).removeObserver(this)}setOptions(t){const r=this.options,n=Ue(this,En);if(this.options=Ue(this,Hs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fu(this.options.enabled,Ue(this,En))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");an(this,ei,M2).call(this),Ue(this,En).setOptions(this.options),r._defaulted&&!Gx(this.options,r)&&Ue(this,Hs).getQueryCache().notify({type:"observerOptionsUpdated",query:Ue(this,En),observer:this});const l=this.hasListeners();l&&mA(Ue(this,En),n,this.options,r)&&an(this,ei,Yv).call(this),this.updateResult(),l&&(Ue(this,En)!==n||fu(this.options.enabled,Ue(this,En))!==fu(r.enabled,Ue(this,En))||pp(this.options.staleTime,Ue(this,En))!==pp(r.staleTime,Ue(this,En)))&&an(this,ei,w2).call(this);const h=an(this,ei,S2).call(this);l&&(Ue(this,En)!==n||fu(this.options.enabled,Ue(this,En))!==fu(r.enabled,Ue(this,En))||h!==Ue(this,lp))&&an(this,ei,P2).call(this,h)}getOptimisticResult(t){const r=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),t),n=this.createResult(r,t);return W8(this,n)&&(fr(this,gs,n),fr(this,py,this.options),fr(this,Fm,Ue(this,En).state)),n}getCurrentResult(){return Ue(this,gs)}trackResult(t,r){return new Proxy(t,{get:(n,l)=>(this.trackProp(l),r==null||r(l),l==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ue(this,vd).status==="pending"&&Ue(this,vd).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,l))})}trackProp(t){Ue(this,yy).add(t)}getCurrentQuery(){return Ue(this,En)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Ue(this,Hs).defaultQueryOptions(t),n=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return an(this,ei,Yv).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ue(this,gs)))}createResult(t,r){var xe;const n=Ue(this,En),l=this.options,h=Ue(this,gs),d=Ue(this,Fm),o=Ue(this,py),S=t!==n?t.state:Ue(this,T_),{state:P}=t;let M={...P},O=!1,z;if(r._optimisticResults){const $e=this.hasListeners(),Ee=!$e&&pA(t,r),Ne=$e&&mA(t,n,r,l);(Ee||Ne)&&(M={...M,...Nz(P.data,t.options)}),r._optimisticResults==="isRestoring"&&(M.fetchStatus="idle")}let{error:B,errorUpdatedAt:F,status:L}=M;z=M.data;let K=!1;if(r.placeholderData!==void 0&&z===void 0&&L==="pending"){let $e;h!=null&&h.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?($e=h.data,K=!0):$e=typeof r.placeholderData=="function"?r.placeholderData((xe=Ue(this,gy))==null?void 0:xe.state.data,Ue(this,gy)):r.placeholderData,$e!==void 0&&(L="success",z=_2(h==null?void 0:h.data,$e,r),O=!0)}if(r.select&&z!==void 0&&!K)if(h&&z===(d==null?void 0:d.data)&&r.select===Ue(this,M_))z=Ue(this,my);else try{fr(this,M_,r.select),z=r.select(z),z=_2(h==null?void 0:h.data,z,r),fr(this,my,z),fr(this,sp,null)}catch($e){fr(this,sp,$e)}Ue(this,sp)&&(B=Ue(this,sp),z=Ue(this,my),F=Date.now(),L="error");const Q=M.fetchStatus==="fetching",re=L==="pending",te=L==="error",ae=re&&Q,he=z!==void 0,be={status:L,fetchStatus:M.fetchStatus,isPending:re,isSuccess:L==="success",isError:te,isInitialLoading:ae,isLoading:ae,data:z,dataUpdatedAt:M.dataUpdatedAt,error:B,errorUpdatedAt:F,failureCount:M.fetchFailureCount,failureReason:M.fetchFailureReason,errorUpdateCount:M.errorUpdateCount,isFetched:M.dataUpdateCount>0||M.errorUpdateCount>0,isFetchedAfterMount:M.dataUpdateCount>S.dataUpdateCount||M.errorUpdateCount>S.errorUpdateCount,isFetching:Q,isRefetching:Q&&!re,isLoadingError:te&&!he,isPaused:M.fetchStatus==="paused",isPlaceholderData:O,isRefetchError:te&&he,isStale:oC(t,r),refetch:this.refetch,promise:Ue(this,vd),isEnabled:fu(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $e=Xe=>{be.status==="error"?Xe.reject(be.error):be.data!==void 0&&Xe.resolve(be.data)},Ee=()=>{const Xe=fr(this,vd,be.promise=x2());$e(Xe)},Ne=Ue(this,vd);switch(Ne.status){case"pending":t.queryHash===n.queryHash&&$e(Ne);break;case"fulfilled":(be.status==="error"||be.data!==Ne.value)&&Ee();break;case"rejected":(be.status!=="error"||be.error!==Ne.reason)&&Ee();break}}return be}updateResult(){const t=Ue(this,gs),r=this.createResult(Ue(this,En),this.options);if(fr(this,Fm,Ue(this,En).state),fr(this,py,this.options),Ue(this,Fm).data!==void 0&&fr(this,gy,Ue(this,En)),Gx(r,t))return;fr(this,gs,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,h=typeof l=="function"?l():l;if(h==="all"||!h&&!Ue(this,yy).size)return!0;const d=new Set(h??Ue(this,yy));return this.options.throwOnError&&d.add("error"),Object.keys(Ue(this,gs)).some(o=>{const _=o;return Ue(this,gs)[_]!==t[_]&&d.has(_)})};an(this,ei,Fz).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&an(this,ei,E2).call(this)}},Hs=new WeakMap,En=new WeakMap,T_=new WeakMap,gs=new WeakMap,Fm=new WeakMap,py=new WeakMap,vd=new WeakMap,sp=new WeakMap,M_=new WeakMap,my=new WeakMap,gy=new WeakMap,Bm=new WeakMap,Vm=new WeakMap,lp=new WeakMap,yy=new WeakMap,ei=new WeakSet,Yv=function(t){an(this,ei,M2).call(this);let r=Ue(this,En).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(_s)),r},w2=function(){an(this,ei,C2).call(this);const t=pp(this.options.staleTime,Ue(this,En));if(Zm||Ue(this,gs).isStale||!y2(t))return;const n=Iz(Ue(this,gs).dataUpdatedAt,t)+1;fr(this,Bm,Tm.setTimeout(()=>{Ue(this,gs).isStale||this.updateResult()},n))},S2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ue(this,En)):this.options.refetchInterval)??!1},P2=function(t){an(this,ei,T2).call(this),fr(this,lp,t),!(Zm||fu(this.options.enabled,Ue(this,En))===!1||!y2(Ue(this,lp))||Ue(this,lp)===0)&&fr(this,Vm,Tm.setInterval(()=>{(this.options.refetchIntervalInBackground||aC.isFocused())&&an(this,ei,Yv).call(this)},Ue(this,lp)))},E2=function(){an(this,ei,w2).call(this),an(this,ei,P2).call(this,an(this,ei,S2).call(this))},C2=function(){Ue(this,Bm)&&(Tm.clearTimeout(Ue(this,Bm)),fr(this,Bm,void 0))},T2=function(){Ue(this,Vm)&&(Tm.clearInterval(Ue(this,Vm)),fr(this,Vm,void 0))},M2=function(){const t=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),this.options);if(t===Ue(this,En))return;const r=Ue(this,En);fr(this,En,t),fr(this,T_,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Fz=function(t){Wa.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Ue(this,gs))}),Ue(this,Hs).getQueryCache().notify({query:Ue(this,En),type:"observerResultsUpdated"})})},Qj);function G8(e,t){return fu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pA(e,t){return G8(e,t)||e.state.data!==void 0&&k2(e,t,t.refetchOnMount)}function k2(e,t,r){if(fu(t.enabled,e)!==!1&&pp(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&oC(e,t)}return!1}function mA(e,t,r,n){return(e!==t||fu(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&oC(e,r)}function oC(e,t){return fu(t.enabled,e)!==!1&&e.isStaleByTime(pp(t.staleTime,e))}function W8(e,t){return!Gx(e.getCurrentResult(),t)}function gA(e){return{onFetch:(t,r)=>{var P,M,O,z,B;const n=t.options,l=(O=(M=(P=t.fetchOptions)==null?void 0:P.meta)==null?void 0:M.fetchMore)==null?void 0:O.direction,h=((z=t.state.data)==null?void 0:z.pages)||[],d=((B=t.state.data)==null?void 0:B.pageParams)||[];let o={pages:[],pageParams:[]},_=0;const S=async()=>{let F=!1;const L=re=>{Object.defineProperty(re,"signal",{enumerable:!0,get:()=>(t.signal.aborted?F=!0:t.signal.addEventListener("abort",()=>{F=!0}),t.signal)})},K=Lz(t.options,t.fetchOptions),Q=async(re,te,ae)=>{if(F)return Promise.reject();if(te==null&&re.pages.length)return Promise.resolve(re);const ne=(()=>{const Ee={client:t.client,queryKey:t.queryKey,pageParam:te,direction:ae?"backward":"forward",meta:t.options.meta};return L(Ee),Ee})(),be=await K(ne),{maxPages:xe}=t.options,$e=ae?z8:j8;return{pages:$e(re.pages,be,xe),pageParams:$e(re.pageParams,te,xe)}};if(l&&h.length){const re=l==="backward",te=re?H8:yA,ae={pages:h,pageParams:d},he=te(n,ae);o=await Q(ae,he,re)}else{const re=e??h.length;do{const te=_===0?d[0]??n.initialPageParam:yA(n,o);if(_>0&&te==null)break;o=await Q(o,te),_++}while(_<re)}return o};t.options.persister?t.fetchFn=()=>{var F,L;return(L=(F=t.options).persister)==null?void 0:L.call(F,S,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=S}}}function yA(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function H8(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var k_,dh,ys,$m,fh,Zf,Jj,Z8=(Jj=class extends zz{constructor(t){super();Dr(this,fh);Dr(this,k_);Dr(this,dh);Dr(this,ys);Dr(this,$m);fr(this,k_,t.client),this.mutationId=t.mutationId,fr(this,ys,t.mutationCache),fr(this,dh,[]),this.state=t.state||Bz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ue(this,dh).includes(t)||(Ue(this,dh).push(t),this.clearGcTimeout(),Ue(this,ys).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fr(this,dh,Ue(this,dh).filter(r=>r!==t)),this.scheduleGc(),Ue(this,ys).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ue(this,dh).length||(this.state.status==="pending"?this.scheduleGc():Ue(this,ys).remove(this))}continue(){var t;return((t=Ue(this,$m))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var d,o,_,S,P,M,O,z,B,F,L,K,Q,re,te,ae,he,ne,be,xe;const r=()=>{an(this,fh,Zf).call(this,{type:"continue"})},n={client:Ue(this,k_),meta:this.options.meta,mutationKey:this.options.mutationKey};fr(this,$m,jz({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:($e,Ee)=>{an(this,fh,Zf).call(this,{type:"failed",failureCount:$e,error:Ee})},onPause:()=>{an(this,fh,Zf).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ue(this,ys).canRun(this)}));const l=this.state.status==="pending",h=!Ue(this,$m).canStart();try{if(l)r();else{an(this,fh,Zf).call(this,{type:"pending",variables:t,isPaused:h}),await((o=(d=Ue(this,ys).config).onMutate)==null?void 0:o.call(d,t,this,n));const Ee=await((S=(_=this.options).onMutate)==null?void 0:S.call(_,t,n));Ee!==this.state.context&&an(this,fh,Zf).call(this,{type:"pending",context:Ee,variables:t,isPaused:h})}const $e=await Ue(this,$m).start();return await((M=(P=Ue(this,ys).config).onSuccess)==null?void 0:M.call(P,$e,t,this.state.context,this,n)),await((z=(O=this.options).onSuccess)==null?void 0:z.call(O,$e,t,this.state.context,n)),await((F=(B=Ue(this,ys).config).onSettled)==null?void 0:F.call(B,$e,null,this.state.variables,this.state.context,this,n)),await((K=(L=this.options).onSettled)==null?void 0:K.call(L,$e,null,t,this.state.context,n)),an(this,fh,Zf).call(this,{type:"success",data:$e}),$e}catch($e){try{throw await((re=(Q=Ue(this,ys).config).onError)==null?void 0:re.call(Q,$e,t,this.state.context,this,n)),await((ae=(te=this.options).onError)==null?void 0:ae.call(te,$e,t,this.state.context,n)),await((ne=(he=Ue(this,ys).config).onSettled)==null?void 0:ne.call(he,void 0,$e,this.state.variables,this.state.context,this,n)),await((xe=(be=this.options).onSettled)==null?void 0:xe.call(be,void 0,$e,t,this.state.context,n)),$e}finally{an(this,fh,Zf).call(this,{type:"error",error:$e})}}finally{Ue(this,ys).runNext(this)}}},k_=new WeakMap,dh=new WeakMap,ys=new WeakMap,$m=new WeakMap,fh=new WeakSet,Zf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Wa.batch(()=>{Ue(this,dh).forEach(n=>{n.onMutationUpdate(t)}),Ue(this,ys).notify({mutation:this,type:"updated",action:t})})},Jj);function Bz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _d,mc,A_,ez,K8=(ez=class extends jy{constructor(t={}){super();Dr(this,_d);Dr(this,mc);Dr(this,A_);this.config=t,fr(this,_d,new Set),fr(this,mc,new Map),fr(this,A_,0)}build(t,r,n){const l=new Z8({client:t,mutationCache:this,mutationId:++Y0(this,A_)._,options:t.defaultMutationOptions(r),state:n});return this.add(l),l}add(t){Ue(this,_d).add(t);const r=rx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r);n?n.push(t):Ue(this,mc).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ue(this,_d).delete(t)){const r=rx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r);if(n)if(n.length>1){const l=n.indexOf(t);l!==-1&&n.splice(l,1)}else n[0]===t&&Ue(this,mc).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=rx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r),l=n==null?void 0:n.find(h=>h.state.status==="pending");return!l||l===t}else return!0}runNext(t){var n;const r=rx(t);if(typeof r=="string"){const l=(n=Ue(this,mc).get(r))==null?void 0:n.find(h=>h!==t&&h.state.isPaused);return(l==null?void 0:l.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wa.batch(()=>{Ue(this,_d).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ue(this,_d).clear(),Ue(this,mc).clear()})}getAll(){return Array.from(Ue(this,_d))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>uA(r,n))}findAll(t={}){return this.getAll().filter(r=>uA(t,r))}notify(t){Wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Wa.batch(()=>Promise.all(t.map(r=>r.continue().catch(_s))))}},_d=new WeakMap,mc=new WeakMap,A_=new WeakMap,ez);function rx(e){var t;return(t=e.options.scope)==null?void 0:t.id}var xd,up,Zs,bd,Md,Ix,A2,tz,X8=(tz=class extends jy{constructor(r,n){super();Dr(this,Md);Dr(this,xd);Dr(this,up);Dr(this,Zs);Dr(this,bd);fr(this,xd,r),this.setOptions(n),this.bindMethods(),an(this,Md,Ix).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var l;const n=this.options;this.options=Ue(this,xd).defaultMutationOptions(r),Gx(this.options,n)||Ue(this,xd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ue(this,Zs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Km(n.mutationKey)!==Km(this.options.mutationKey)?this.reset():((l=Ue(this,Zs))==null?void 0:l.state.status)==="pending"&&Ue(this,Zs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ue(this,Zs))==null||r.removeObserver(this)}onMutationUpdate(r){an(this,Md,Ix).call(this),an(this,Md,A2).call(this,r)}getCurrentResult(){return Ue(this,up)}reset(){var r;(r=Ue(this,Zs))==null||r.removeObserver(this),fr(this,Zs,void 0),an(this,Md,Ix).call(this),an(this,Md,A2).call(this)}mutate(r,n){var l;return fr(this,bd,n),(l=Ue(this,Zs))==null||l.removeObserver(this),fr(this,Zs,Ue(this,xd).getMutationCache().build(Ue(this,xd),this.options)),Ue(this,Zs).addObserver(this),Ue(this,Zs).execute(r)}},xd=new WeakMap,up=new WeakMap,Zs=new WeakMap,bd=new WeakMap,Md=new WeakSet,Ix=function(){var n;const r=((n=Ue(this,Zs))==null?void 0:n.state)??Bz();fr(this,up,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},A2=function(r){Wa.batch(()=>{var n,l,h,d,o,_,S,P;if(Ue(this,bd)&&this.hasListeners()){const M=Ue(this,up).variables,O=Ue(this,up).context,z={client:Ue(this,xd),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((l=(n=Ue(this,bd)).onSuccess)==null||l.call(n,r.data,M,O,z),(d=(h=Ue(this,bd)).onSettled)==null||d.call(h,r.data,null,M,O,z)):(r==null?void 0:r.type)==="error"&&((_=(o=Ue(this,bd)).onError)==null||_.call(o,r.error,M,O,z),(P=(S=Ue(this,bd)).onSettled)==null||P.call(S,void 0,r.error,M,O,z))}this.listeners.forEach(M=>{M(Ue(this,up))})})},tz),ph,rz,Y8=(rz=class extends jy{constructor(t={}){super();Dr(this,ph);this.config=t,fr(this,ph,new Map)}build(t,r,n){const l=r.queryKey,h=r.queryHash??nC(l,r);let d=this.get(h);return d||(d=new U8({client:t,queryKey:l,queryHash:h,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(l)}),this.add(d)),d}add(t){Ue(this,ph).has(t.queryHash)||(Ue(this,ph).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ue(this,ph).get(t.queryHash);r&&(t.destroy(),r===t&&Ue(this,ph).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Wa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ue(this,ph).get(t)}getAll(){return[...Ue(this,ph).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>lA(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>lA(t,n)):r}notify(t){Wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Wa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Wa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ph=new WeakMap,rz),ua,cp,hp,vy,_y,dp,xy,by,nz,Q8=(nz=class{constructor(e={}){Dr(this,ua);Dr(this,cp);Dr(this,hp);Dr(this,vy);Dr(this,_y);Dr(this,dp);Dr(this,xy);Dr(this,by);fr(this,ua,e.queryCache||new Y8),fr(this,cp,e.mutationCache||new K8),fr(this,hp,e.defaultOptions||{}),fr(this,vy,new Map),fr(this,_y,new Map),fr(this,dp,0)}mount(){Y0(this,dp)._++,Ue(this,dp)===1&&(fr(this,xy,aC.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,ua).onFocus())})),fr(this,by,Wx.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,ua).onOnline())})))}unmount(){var e,t;Y0(this,dp)._--,Ue(this,dp)===0&&((e=Ue(this,xy))==null||e.call(this),fr(this,xy,void 0),(t=Ue(this,by))==null||t.call(this),fr(this,by,void 0))}isFetching(e){return Ue(this,ua).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ue(this,cp).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,ua).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ue(this,ua).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(pp(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ue(this,ua).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),l=Ue(this,ua).get(n.queryHash),h=l==null?void 0:l.state.data,d=L8(t,h);if(d!==void 0)return Ue(this,ua).build(this,n).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return Wa.batch(()=>Ue(this,ua).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,ua).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ue(this,ua);Wa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ue(this,ua);return Wa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Wa.batch(()=>Ue(this,ua).findAll(e).map(l=>l.cancel(r)));return Promise.all(n).then(_s).catch(_s)}invalidateQueries(e,t={}){return Wa.batch(()=>(Ue(this,ua).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Wa.batch(()=>Ue(this,ua).findAll(e).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let h=l.fetch(void 0,r);return r.throwOnError||(h=h.catch(_s)),l.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(n).then(_s)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ue(this,ua).build(this,t);return r.isStaleByTime(pp(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_s).catch(_s)}fetchInfiniteQuery(e){return e.behavior=gA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_s).catch(_s)}ensureInfiniteQueryData(e){return e.behavior=gA(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wx.isOnline()?Ue(this,cp).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ue(this,ua)}getMutationCache(){return Ue(this,cp)}getDefaultOptions(){return Ue(this,hp)}setDefaultOptions(e){fr(this,hp,e)}setQueryDefaults(e,t){Ue(this,vy).set(Km(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ue(this,vy).values()],r={};return t.forEach(n=>{l_(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ue(this,_y).set(Km(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ue(this,_y).values()],r={};return t.forEach(n=>{l_(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ue(this,hp).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=nC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===iC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ue(this,hp).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ue(this,ua).clear(),Ue(this,cp).clear()}},ua=new WeakMap,cp=new WeakMap,hp=new WeakMap,vy=new WeakMap,_y=new WeakMap,dp=new WeakMap,xy=new WeakMap,by=new WeakMap,nz),Vz=A.createContext(void 0),dw=e=>{const t=A.useContext(Vz);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},J8=({client:e,children:t})=>(A.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),$.jsx(Vz.Provider,{value:e,children:t})),$z=A.createContext(!1),eq=()=>A.useContext($z);$z.Provider;function tq(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var rq=A.createContext(tq()),nq=()=>A.useContext(rq),iq=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},aq=e=>{A.useEffect(()=>{e.clearReset()},[e])},oq=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:l})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(l&&e.data===void 0||Dz(r,[e.error,n])),sq=e=>{if(e.suspense){const r=l=>l==="static"?l:Math.max(l??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...l)=>r(n(...l)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},lq=(e,t)=>e.isLoading&&e.isFetching&&!t,uq=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,vA=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function cq(e,t,r){var M,O,z,B,F;const n=eq(),l=nq(),h=dw(),d=h.defaultQueryOptions(e);(O=(M=h.getDefaultOptions().queries)==null?void 0:M._experimental_beforeQuery)==null||O.call(M,d),d._optimisticResults=n?"isRestoring":"optimistic",sq(d),iq(d,l),aq(l);const o=!h.getQueryCache().get(d.queryHash),[_]=A.useState(()=>new t(h,d)),S=_.getOptimisticResult(d),P=!n&&e.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(L=>{const K=P?_.subscribe(Wa.batchCalls(L)):_s;return _.updateResult(),K},[_,P]),()=>_.getCurrentResult(),()=>_.getCurrentResult()),A.useEffect(()=>{_.setOptions(d)},[d,_]),uq(d,S))throw vA(d,_,l);if(oq({result:S,errorResetBoundary:l,throwOnError:d.throwOnError,query:h.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw S.error;if((B=(z=h.getDefaultOptions().queries)==null?void 0:z._experimental_afterQuery)==null||B.call(z,d,S),d.experimental_prefetchInRender&&!Zm&&lq(S,n)){const L=o?vA(d,_,l):(F=h.getQueryCache().get(d.queryHash))==null?void 0:F.promise;L==null||L.catch(_s).finally(()=>{_.updateResult()})}return d.notifyOnChangeProps?S:_.trackResult(S)}function zy(e,t){return cq(e,q8)}function ig(e,t){const r=dw(),[n]=A.useState(()=>new X8(r,e));A.useEffect(()=>{n.setOptions(e)},[n,e]);const l=A.useSyncExternalStore(A.useCallback(d=>n.subscribe(Wa.batchCalls(d)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),h=A.useCallback((d,o)=>{n.mutate(d,o).catch(_s)},[n]);if(l.error&&Dz(n.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:h,mutateAsync:l.mutate}}function Mo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hq=typeof Symbol=="function"&&Symbol.observable||"@@observable",_A=hq,yS=()=>Math.random().toString(36).substring(7).split("").join("."),dq={INIT:`@@redux/INIT${yS()}`,REPLACE:`@@redux/REPLACE${yS()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yS()}`},Hx=dq;function sC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Uz(e,t,r){if(typeof e!="function")throw new Error(Mo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Mo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Mo(1));return r(Uz)(e,t)}let n=e,l=t,h=new Map,d=h,o=0,_=!1;function S(){d===h&&(d=new Map,h.forEach((L,K)=>{d.set(K,L)}))}function P(){if(_)throw new Error(Mo(3));return l}function M(L){if(typeof L!="function")throw new Error(Mo(4));if(_)throw new Error(Mo(5));let K=!0;S();const Q=o++;return d.set(Q,L),function(){if(K){if(_)throw new Error(Mo(6));K=!1,S(),d.delete(Q),h=null}}}function O(L){if(!sC(L))throw new Error(Mo(7));if(typeof L.type>"u")throw new Error(Mo(8));if(typeof L.type!="string")throw new Error(Mo(17));if(_)throw new Error(Mo(9));try{_=!0,l=n(l,L)}finally{_=!1}return(h=d).forEach(Q=>{Q()}),L}function z(L){if(typeof L!="function")throw new Error(Mo(10));n=L,O({type:Hx.REPLACE})}function B(){const L=M;return{subscribe(K){if(typeof K!="object"||K===null)throw new Error(Mo(11));function Q(){const te=K;te.next&&te.next(P())}return Q(),{unsubscribe:L(Q)}},[_A](){return this}}}return O({type:Hx.INIT}),{dispatch:O,subscribe:M,getState:P,replaceReducer:z,[_A]:B}}function fq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Hx.INIT})>"u")throw new Error(Mo(12));if(typeof r(void 0,{type:Hx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mo(13))})}function qz(e){const t=Object.keys(e),r={};for(let h=0;h<t.length;h++){const d=t[h];typeof e[d]=="function"&&(r[d]=e[d])}const n=Object.keys(r);let l;try{fq(r)}catch(h){l=h}return function(d={},o){if(l)throw l;let _=!1;const S={};for(let P=0;P<n.length;P++){const M=n[P],O=r[M],z=d[M],B=O(z,o);if(typeof B>"u")throw o&&o.type,new Error(Mo(14));S[M]=B,_=_||B!==z}return _=_||n.length!==Object.keys(d).length,_?S:d}}function Zx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function pq(...e){return t=>(r,n)=>{const l=t(r,n);let h=()=>{throw new Error(Mo(15))};const d={getState:l.getState,dispatch:(_,...S)=>h(_,...S)},o=e.map(_=>_(d));return h=Zx(...o)(l.dispatch),{...l,dispatch:h}}}function Gz(e){return sC(e)&&"type"in e&&typeof e.type=="string"}var Wz=Symbol.for("immer-nothing"),xA=Symbol.for("immer-draftable"),Ss=Symbol.for("immer-state");function gc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kl=Object,Sy=kl.getPrototypeOf,Kx="constructor",fw="prototype",I2="configurable",Xx="enumerable",Ox="writable",u_="value",kd=e=>!!e&&!!e[Ss];function Sc(e){var t;return e?Hz(e)||pw(e)||!!e[xA]||!!((t=e[Kx])!=null&&t[xA])||mw(e)||gw(e):!1}var mq=kl[fw][Kx].toString(),bA=new WeakMap;function Hz(e){if(!e||!lC(e))return!1;const t=Sy(e);if(t===null||t===kl[fw])return!0;const r=kl.hasOwnProperty.call(t,Kx)&&t[Kx];if(r===Object)return!0;if(!Jg(r))return!1;let n=bA.get(r);return n===void 0&&(n=Function.toString.call(r),bA.set(r,n)),n===mq}function D_(e,t,r=!0){R_(e)===0?(r?Reflect.ownKeys(e):kl.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function R_(e){const t=e[Ss];return t?t.type_:pw(e)?1:mw(e)?2:gw(e)?3:0}var wA=(e,t,r=R_(e))=>r===2?e.has(t):kl[fw].hasOwnProperty.call(e,t),O2=(e,t,r=R_(e))=>r===2?e.get(t):e[t],Yx=(e,t,r,n=R_(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function gq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var pw=Array.isArray,mw=e=>e instanceof Map,gw=e=>e instanceof Set,lC=e=>typeof e=="object",Jg=e=>typeof e=="function",vS=e=>typeof e=="boolean",yd=e=>e.copy_||e.base_,uC=e=>e.modified_?e.copy_:e.base_;function L2(e,t){if(mw(e))return new Map(e);if(gw(e))return new Set(e);if(pw(e))return Array[fw].slice.call(e);const r=Hz(e);if(t===!0||t==="class_only"&&!r){const n=kl.getOwnPropertyDescriptors(e);delete n[Ss];let l=Reflect.ownKeys(n);for(let h=0;h<l.length;h++){const d=l[h],o=n[d];o[Ox]===!1&&(o[Ox]=!0,o[I2]=!0),(o.get||o.set)&&(n[d]={[I2]:!0,[Ox]:!0,[Xx]:o[Xx],[u_]:e[d]})}return kl.create(Sy(e),n)}else{const n=Sy(e);if(n!==null&&r)return{...e};const l=kl.create(n);return kl.assign(l,e)}}function cC(e,t=!1){return yw(e)||kd(e)||!Sc(e)||(R_(e)>1&&kl.defineProperties(e,{set:nx,add:nx,clear:nx,delete:nx}),kl.freeze(e),t&&D_(e,(r,n)=>{cC(n,!0)},!1)),e}function yq(){gc(2)}var nx={[u_]:yq};function yw(e){return e===null||!lC(e)?!0:kl.isFrozen(e)}var Qx="MapSet",D2="Patches",Zz={};function Py(e){const t=Zz[e];return t||gc(0,e),t}var vq=e=>!!Zz[e],c_,Kz=()=>c_,_q=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:vq(Qx)?Py(Qx):void 0});function SA(e,t){t&&(e.patchPlugin_=Py(D2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function R2(e){j2(e),e.drafts_.forEach(xq),e.drafts_=null}function j2(e){e===c_&&(c_=e.parent_)}var PA=e=>c_=_q(c_,e);function xq(e){const t=e[Ss];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function EA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ss].modified_&&(R2(t),gc(4)),Sc(e)&&(e=CA(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(r[Ss].base_,e,t)}else e=CA(t,r);return bq(t,e,!0),R2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Wz?e:void 0}function CA(e,t){if(yw(t))return t;const r=t[Ss];if(!r)return hC(t,e.handledSet_,e);if(!vw(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Qz(r,e)}return r.copy_}function bq(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cC(t,r)}function Xz(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var vw=(e,t)=>e.scope_===t,wq=[];function Yz(e,t,r,n){const l=yd(e),h=e.type_;if(n!==void 0&&O2(l,n,h)===t){Yx(l,n,r,h);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;D_(l,(_,S)=>{if(kd(S)){const P=o.get(S)||[];P.push(_),o.set(S,P)}})}const d=e.draftLocations_.get(t)??wq;for(const o of d)Yx(l,o,r,h)}function Sq(e,t,r){e.callbacks_.push(function(l){var o;const h=t;if(!h||!vw(h,l))return;(o=l.mapSetPlugin_)==null||o.fixSetContents(h);const d=uC(h);Yz(e,h.draft_??h,d,r),Qz(h,l)})}function Qz(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:l}=t;if(l){const h=l.getPath(e);h&&l.generatePatches_(e,h,t)}Xz(e)}}function Pq(e,t,r){const{scope_:n}=e;if(kd(r)){const l=r[Ss];vw(l,n)&&l.callbacks_.push(function(){Lx(e);const d=uC(l);Yz(e,r,d,t)})}else Sc(r)&&e.callbacks_.push(function(){const h=yd(e);O2(h,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&hC(O2(e.copy_,t,e.type_),n.handledSet_,n)})}function hC(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||kd(e)||t.has(e)||!Sc(e)||yw(e)||(t.add(e),D_(e,(n,l)=>{if(kd(l)){const h=l[Ss];if(vw(h,r)){const d=uC(h);Yx(e,n,d,e.type_),Xz(h)}}else Sc(l)&&hC(l,t,r)})),e}function Eq(e,t){const r=pw(e),n={type_:r?1:0,scope_:t?t.scope_:Kz(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=n,h=dC;r&&(l=[n],h=h_);const{revoke:d,proxy:o}=Proxy.revocable(l,h);return n.draft_=o,n.revoke_=d,[o,n]}var dC={get(e,t){if(t===Ss)return e;const r=yd(e);if(!wA(r,t,e.type_))return Cq(e,r,t);const n=r[t];if(e.finalized_||!Sc(n))return n;if(n===_S(e.base_,t)){Lx(e);const l=e.type_===1?+t:t,h=N2(e.scope_,n,e,l);return e.copy_[l]=h}return n},has(e,t){return t in yd(e)},ownKeys(e){return Reflect.ownKeys(yd(e))},set(e,t,r){const n=Jz(yd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=_S(yd(e),t),h=l==null?void 0:l[Ss];if(h&&h.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(gq(r,l)&&(r!==void 0||wA(e.base_,t,e.type_)))return!0;Lx(e),z2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Pq(e,t,r)),!0},deleteProperty(e,t){return Lx(e),_S(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),z2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=yd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Ox]:!0,[I2]:e.type_!==1||t!=="length",[Xx]:n[Xx],[u_]:r[t]}},defineProperty(){gc(11)},getPrototypeOf(e){return Sy(e.base_)},setPrototypeOf(){gc(12)}},h_={};D_(dC,(e,t)=>{h_[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});h_.deleteProperty=function(e,t){return h_.set.call(this,e,t,void 0)};h_.set=function(e,t,r){return dC.set.call(this,e[0],t,r,e[0])};function _S(e,t){const r=e[Ss];return(r?yd(r):e)[t]}function Cq(e,t,r){var l;const n=Jz(t,r);return n?u_ in n?n[u_]:(l=n.get)==null?void 0:l.call(e.draft_):void 0}function Jz(e,t){if(!(t in e))return;let r=Sy(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Sy(r)}}function z2(e){e.modified_||(e.modified_=!0,e.parent_&&z2(e.parent_))}function Lx(e){e.copy_||(e.assigned_=new Map,e.copy_=L2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Tq=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,l)=>{if(Jg(r)&&!Jg(n)){const d=n;n=r;const o=this;return function(S=d,...P){return o.produce(S,M=>n.call(this,M,...P))}}Jg(n)||gc(6),l!==void 0&&!Jg(l)&&gc(7);let h;if(Sc(r)){const d=PA(this),o=N2(d,r,void 0);let _=!0;try{h=n(o),_=!1}finally{_?R2(d):j2(d)}return SA(d,l),EA(h,d)}else if(!r||!lC(r)){if(h=n(r),h===void 0&&(h=r),h===Wz&&(h=void 0),this.autoFreeze_&&cC(h,!0),l){const d=[],o=[];Py(D2).generateReplacementPatches_(r,h,{patches_:d,inversePatches_:o}),l(d,o)}return h}else gc(1,r)},this.produceWithPatches=(r,n)=>{if(Jg(r))return(o,..._)=>this.produceWithPatches(o,S=>r(S,..._));let l,h;return[this.produce(r,n,(o,_)=>{l=o,h=_}),l,h]},vS(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),vS(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),vS(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Sc(t)||gc(8),kd(t)&&(t=bc(t));const r=PA(this),n=N2(r,t,void 0);return n[Ss].isManual_=!0,j2(r),n}finishDraft(t,r){const n=t&&t[Ss];(!n||!n.isManual_)&&gc(9);const{scope_:l}=n;return SA(l,r),EA(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const h=r[n];if(h.path.length===0&&h.op==="replace"){t=h.value;break}}n>-1&&(r=r.slice(n+1));const l=Py(D2).applyPatches_;return kd(t)?l(t,r):this.produce(t,h=>l(h,r))}};function N2(e,t,r,n){const[l,h]=mw(t)?Py(Qx).proxyMap_(t,r):gw(t)?Py(Qx).proxySet_(t,r):Eq(t,r);return((r==null?void 0:r.scope_)??Kz()).drafts_.push(l),h.callbacks_=(r==null?void 0:r.callbacks_)??[],h.key_=n,r&&n!==void 0?Sq(r,h,n):h.callbacks_.push(function(_){var P;(P=_.mapSetPlugin_)==null||P.fixSetContents(h);const{patchPlugin_:S}=_;h.modified_&&S&&S.generatePatches_(h,[],_)}),l}function bc(e){return kd(e)||gc(10,e),e3(e)}function e3(e){if(!Sc(e)||yw(e))return e;const t=e[Ss];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=L2(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=L2(e,!0);return D_(r,(l,h)=>{Yx(r,l,e3(h))},n),t&&(t.finalized_=!1),r}var Mq=new Tq,t3=Mq.produce;function kq(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Aq(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Iq(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var TA=e=>Array.isArray(e)?e:[e];function Oq(e){const t=Array.isArray(e[0])?e[0]:e;return Iq(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Lq(e,t){const r=[],{length:n}=e;for(let l=0;l<n;l++)r.push(e[l].apply(null,t));return r}var Dq=class{constructor(e){this.value=e}deref(){return this.value}},Rq=typeof WeakRef<"u"?WeakRef:Dq,jq=0,MA=1;function ix(){return{s:jq,v:void 0,o:null,p:null}}function r3(e,t={}){let r=ix();const{resultEqualityCheck:n}=t;let l,h=0;function d(){var M;let o=r;const{length:_}=arguments;for(let O=0,z=_;O<z;O++){const B=arguments[O];if(typeof B=="function"||typeof B=="object"&&B!==null){let F=o.o;F===null&&(o.o=F=new WeakMap);const L=F.get(B);L===void 0?(o=ix(),F.set(B,o)):o=L}else{let F=o.p;F===null&&(o.p=F=new Map);const L=F.get(B);L===void 0?(o=ix(),F.set(B,o)):o=L}}const S=o;let P;if(o.s===MA)P=o.v;else if(P=e.apply(null,arguments),h++,n){const O=((M=l==null?void 0:l.deref)==null?void 0:M.call(l))??l;O!=null&&n(O,P)&&(P=O,h!==0&&h--),l=typeof P=="object"&&P!==null||typeof P=="function"?new Rq(P):P}return S.s=MA,S.v=P,P}return d.clearCache=()=>{r=ix(),d.resetResultsCount()},d.resultsCount=()=>h,d.resetResultsCount=()=>{h=0},d}function zq(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...l)=>{let h=0,d=0,o,_={},S=l.pop();typeof S=="object"&&(_=S,S=l.pop()),kq(S,`createSelector expects an output function after the inputs, but received: [${typeof S}]`);const P={...r,..._},{memoize:M,memoizeOptions:O=[],argsMemoize:z=r3,argsMemoizeOptions:B=[]}=P,F=TA(O),L=TA(B),K=Oq(l),Q=M(function(){return h++,S.apply(null,arguments)},...F),re=z(function(){d++;const ae=Lq(K,arguments);return o=Q.apply(null,ae),o},...L);return Object.assign(re,{resultFunc:S,memoizedResultFunc:Q,dependencies:K,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>o,recomputations:()=>h,resetRecomputations:()=>{h=0},memoize:M,argsMemoize:z})};return Object.assign(n,{withTypes:()=>n}),n}var Tt=zq(r3),Nq=Object.assign((e,t=Tt)=>{Aq(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(h=>e[h]);return t(n,(...h)=>h.reduce((d,o,_)=>(d[r[_]]=o,d),{}))},{withTypes:()=>Nq});function n3(e){return({dispatch:r,getState:n})=>l=>h=>typeof h=="function"?h(r,n,e):l(h)}var Fq=n3(),Bq=n3,Vq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zx:Zx.apply(null,arguments)};function yu(e,t){function r(...n){if(t){let l=t(...n);if(!l)throw new Error(Al(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Gz(n)&&n.type===e,r}var i3=class Qv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Qv.prototype)}static get[Symbol.species](){return Qv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Qv(...t[0].concat(this)):new Qv(...t.concat(this))}};function kA(e){return Sc(e)?t3(e,()=>{}):e}function ax(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function $q(e){return typeof e=="boolean"}var Uq=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:l=!0,actionCreatorCheck:h=!0}=t??{};let d=new i3;return r&&($q(r)?d.push(Fq):d.push(Bq(r.extraArgument))),d},a3="RTK_autoBatch",Bi=()=>e=>({payload:e,meta:{[a3]:!0}}),AA=e=>t=>{setTimeout(t,e)},o3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let l=!0,h=!1,d=!1;const o=new Set,_=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:AA(10):e.type==="callback"?e.queueNotification:AA(e.timeout),S=()=>{d=!1,h&&(h=!1,o.forEach(P=>P()))};return Object.assign({},n,{subscribe(P){const M=()=>l&&P(),O=n.subscribe(M);return o.add(P),()=>{O(),o.delete(P)}},dispatch(P){var M;try{return l=!((M=P==null?void 0:P.meta)!=null&&M[a3]),h=!l,h&&(d||(d=!0,_(S))),n.dispatch(P)}finally{l=!0}}})},qq=e=>function(r){const{autoBatch:n=!0}=r??{};let l=new i3(e);return n&&l.push(o3(typeof n=="object"?n:void 0)),l};function s3(e){const t=Uq(),{reducer:r=void 0,middleware:n,devTools:l=!0,duplicateMiddlewareCheck:h=!0,preloadedState:d=void 0,enhancers:o=void 0}=e||{};let _;if(typeof r=="function")_=r;else if(sC(r))_=qz(r);else throw new Error(Al(1));let S;typeof n=="function"?S=n(t):S=t();let P=Zx;l&&(P=Vq({trace:!1,...typeof l=="object"&&l}));const M=pq(...S),O=qq(M);let z=typeof o=="function"?o(O):O();const B=P(...z);return Uz(_,d,B)}function l3(e){const t={},r=[];let n;const l={addCase(h,d){const o=typeof h=="string"?h:h.type;if(!o)throw new Error(Al(28));if(o in t)throw new Error(Al(29));return t[o]=d,l},addAsyncThunk(h,d){return d.pending&&(t[h.pending.type]=d.pending),d.rejected&&(t[h.rejected.type]=d.rejected),d.fulfilled&&(t[h.fulfilled.type]=d.fulfilled),d.settled&&r.push({matcher:h.settled,reducer:d.settled}),l},addMatcher(h,d){return r.push({matcher:h,reducer:d}),l},addDefaultCase(h){return n=h,l}};return e(l),[t,r,n]}function Gq(e){return typeof e=="function"}function Wq(e,t){let[r,n,l]=l3(t),h;if(Gq(e))h=()=>kA(e());else{const o=kA(e);h=()=>o}function d(o=h(),_){let S=[r[_.type],...n.filter(({matcher:P})=>P(_)).map(({reducer:P})=>P)];return S.filter(P=>!!P).length===0&&(S=[l]),S.reduce((P,M)=>{if(M)if(kd(P)){const z=M(P,_);return z===void 0?P:z}else{if(Sc(P))return t3(P,O=>M(O,_));{const O=M(P,_);if(O===void 0){if(P===null)return P;throw Error("A case reducer on a non-draftable value must not return undefined")}return O}}return P},o)}return d.getInitialState=h,d}var Hq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Zq=(e=21)=>{let t="",r=e;for(;r--;)t+=Hq[Math.random()*64|0];return t},Kq=Symbol.for("rtk-slice-createasyncthunk");function Xq(e,t){return`${e}/${t}`}function Yq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Kq];return function(l){const{name:h,reducerPath:d=h}=l;if(!h)throw new Error(Al(11));const o=(typeof l.reducers=="function"?l.reducers(Jq()):l.reducers)||{},_=Object.keys(o),S={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},P={addCase(te,ae){const he=typeof te=="string"?te:te.type;if(!he)throw new Error(Al(12));if(he in S.sliceCaseReducersByType)throw new Error(Al(13));return S.sliceCaseReducersByType[he]=ae,P},addMatcher(te,ae){return S.sliceMatchers.push({matcher:te,reducer:ae}),P},exposeAction(te,ae){return S.actionCreators[te]=ae,P},exposeCaseReducer(te,ae){return S.sliceCaseReducersByName[te]=ae,P}};_.forEach(te=>{const ae=o[te],he={reducerName:te,type:Xq(h,te),createNotation:typeof l.reducers=="function"};t9(ae)?n9(he,ae,P,t):e9(he,ae,P)});function M(){const[te={},ae=[],he=void 0]=typeof l.extraReducers=="function"?l3(l.extraReducers):[l.extraReducers],ne={...te,...S.sliceCaseReducersByType};return Wq(l.initialState,be=>{for(let xe in ne)be.addCase(xe,ne[xe]);for(let xe of S.sliceMatchers)be.addMatcher(xe.matcher,xe.reducer);for(let xe of ae)be.addMatcher(xe.matcher,xe.reducer);he&&be.addDefaultCase(he)})}const O=te=>te,z=new Map,B=new WeakMap;let F;function L(te,ae){return F||(F=M()),F(te,ae)}function K(){return F||(F=M()),F.getInitialState()}function Q(te,ae=!1){function he(be){let xe=be[te];return typeof xe>"u"&&ae&&(xe=ax(B,he,K)),xe}function ne(be=O){const xe=ax(z,ae,()=>new WeakMap);return ax(xe,be,()=>{const $e={};for(const[Ee,Ne]of Object.entries(l.selectors??{}))$e[Ee]=Qq(Ne,be,()=>ax(B,be,K),ae);return $e})}return{reducerPath:te,getSelectors:ne,get selectors(){return ne(he)},selectSlice:he}}const re={name:h,reducer:L,actions:S.actionCreators,caseReducers:S.sliceCaseReducersByName,getInitialState:K,...Q(d),injectInto(te,{reducerPath:ae,...he}={}){const ne=ae??d;return te.inject({reducerPath:ne,reducer:L},he),{...re,...Q(ne,!0)}}};return re}}function Qq(e,t,r,n){function l(h,...d){let o=t(h);return typeof o>"u"&&n&&(o=r()),e(o,...d)}return l.unwrapped=e,l}var Yo=Yq();function Jq(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function e9({type:e,reducerName:t,createNotation:r},n,l){let h,d;if("reducer"in n){if(r&&!r9(n))throw new Error(Al(17));h=n.reducer,d=n.prepare}else h=n;l.addCase(e,h).exposeCaseReducer(t,h).exposeAction(t,d?yu(e,d):yu(e))}function t9(e){return e._reducerDefinitionType==="asyncThunk"}function r9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function n9({type:e,reducerName:t},r,n,l){if(!l)throw new Error(Al(18));const{payloadCreator:h,fulfilled:d,pending:o,rejected:_,settled:S,options:P}=r,M=l(e,h,P);n.exposeAction(t,M),d&&n.addCase(M.fulfilled,d),o&&n.addCase(M.pending,o),_&&n.addCase(M.rejected,_),S&&n.addMatcher(M.settled,S),n.exposeCaseReducer(t,{fulfilled:d||ox,pending:o||ox,rejected:_||ox,settled:S||ox})}function ox(){}var i9="task",u3="listener",c3="completed",fC="cancelled",a9=`task-${fC}`,o9=`task-${c3}`,F2=`${u3}-${fC}`,s9=`${u3}-${c3}`,_w=class{constructor(e){$r(this,"name","TaskAbortError");$r(this,"message");this.code=e,this.message=`${i9} ${fC} (reason: ${e})`}},pC=(e,t)=>{if(typeof e!="function")throw new TypeError(Al(32))},Jx=()=>{},h3=(e,t=Jx)=>(e.catch(t),e),d3=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Um=e=>{if(e.aborted)throw new _w(e.reason)};function f3(e,t){let r=Jx;return new Promise((n,l)=>{const h=()=>l(new _w(e.reason));if(e.aborted){h();return}r=d3(e,h),t.finally(()=>r()).then(n,l)}).finally(()=>{r=Jx})}var l9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof _w?"cancelled":"rejected",error:r}}finally{t==null||t()}},eb=e=>t=>h3(f3(e,t).then(r=>(Um(e),r))),p3=e=>{const t=eb(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:sy}=Object,IA={},xw="listenerMiddleware",u9=(e,t)=>{const r=n=>d3(e,()=>n.abort(e.reason));return(n,l)=>{pC(n);const h=new AbortController;r(h);const d=l9(async()=>{Um(e),Um(h.signal);const o=await n({pause:eb(h.signal),delay:p3(h.signal),signal:h.signal});return Um(h.signal),o},()=>h.abort(o9));return l!=null&&l.autoJoin&&t.push(d.catch(Jx)),{result:eb(e)(d),cancel(){h.abort(a9)}}}},c9=(e,t)=>{const r=async(n,l)=>{Um(t);let h=()=>{};const o=[new Promise((_,S)=>{let P=e({predicate:n,effect:(M,O)=>{O.unsubscribe(),_([M,O.getState(),O.getOriginalState()])}});h=()=>{P(),S()}})];l!=null&&o.push(new Promise(_=>setTimeout(_,l,null)));try{const _=await f3(t,Promise.race(o));return Um(t),_}finally{h()}};return(n,l)=>h3(r(n,l))},m3=e=>{let{type:t,actionCreator:r,matcher:n,predicate:l,effect:h}=e;if(t)l=yu(t).match;else if(r)t=r.type,l=r.match;else if(n)l=n;else if(!l)throw new Error(Al(21));return pC(h),{predicate:l,type:t,effect:h}},g3=sy(e=>{const{type:t,predicate:r,effect:n}=m3(e);return{id:Zq(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Al(22))}}},{withTypes:()=>g3}),OA=(e,t)=>{const{type:r,effect:n,predicate:l}=m3(t);return Array.from(e.values()).find(h=>(typeof r=="string"?h.type===r:h.predicate===l)&&h.effect===n)},B2=e=>{e.pending.forEach(t=>{t.abort(F2)})},h9=(e,t)=>()=>{for(const r of t.keys())B2(r);e.clear()},LA=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},y3=sy(yu(`${xw}/add`),{withTypes:()=>y3}),d9=yu(`${xw}/removeAll`),v3=sy(yu(`${xw}/remove`),{withTypes:()=>v3}),f9=(...e)=>{console.error(`${xw}/error`,...e)},j_=(e={})=>{const t=new Map,r=new Map,n=z=>{const B=r.get(z)??0;r.set(z,B+1)},l=z=>{const B=r.get(z)??1;B===1?r.delete(z):r.set(z,B-1)},{extra:h,onError:d=f9}=e;pC(d);const o=z=>(z.unsubscribe=()=>t.delete(z.id),t.set(z.id,z),B=>{z.unsubscribe(),B!=null&&B.cancelActive&&B2(z)}),_=z=>{const B=OA(t,z)??g3(z);return o(B)};sy(_,{withTypes:()=>_});const S=z=>{const B=OA(t,z);return B&&(B.unsubscribe(),z.cancelActive&&B2(B)),!!B};sy(S,{withTypes:()=>S});const P=async(z,B,F,L)=>{const K=new AbortController,Q=c9(_,K.signal),re=[];try{z.pending.add(K),n(z),await Promise.resolve(z.effect(B,sy({},F,{getOriginalState:L,condition:(te,ae)=>Q(te,ae).then(Boolean),take:Q,delay:p3(K.signal),pause:eb(K.signal),extra:h,signal:K.signal,fork:u9(K.signal,re),unsubscribe:z.unsubscribe,subscribe:()=>{t.set(z.id,z)},cancelActiveListeners:()=>{z.pending.forEach((te,ae,he)=>{te!==K&&(te.abort(F2),he.delete(te))})},cancel:()=>{K.abort(F2),z.pending.delete(K)},throwIfCancelled:()=>{Um(K.signal)}})))}catch(te){te instanceof _w||LA(d,te,{raisedBy:"effect"})}finally{await Promise.all(re),K.abort(s9),l(z),z.pending.delete(K)}},M=h9(t,r);return{middleware:z=>B=>F=>{if(!Gz(F))return B(F);if(y3.match(F))return _(F.payload);if(d9.match(F)){M();return}if(v3.match(F))return S(F.payload);let L=z.getState();const K=()=>{if(L===IA)throw new Error(Al(23));return L};let Q;try{if(Q=B(F),t.size>0){const re=z.getState(),te=Array.from(t.values());for(const ae of te){let he=!1;try{he=ae.predicate(F,re,L)}catch(ne){he=!1,LA(d,ne,{raisedBy:"predicate"})}he&&P(ae,F,z,K)}}}finally{L=IA}return Q},startListening:_,stopListening:S,clearListeners:M}};function Al(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const p9=localStorage.getItem("raaul_userData")?JSON.parse(localStorage==null?void 0:localStorage.getItem("raaul_userData")):null,_3=Yo({name:"user",initialState:p9,reducers:{userData:(e,t)=>{t.payload,localStorage.setItem("raaul_userData",JSON.stringify(t==null?void 0:t.payload))}}}),{userData:V2}=_3.actions,m9=localStorage.getItem("raaul_TokenData")?JSON.parse(localStorage.getItem("raaul_TokenData")):null,x3=Yo({name:"userToken",initialState:m9,reducers:{userToken:(e,t)=>(localStorage.setItem("raaul_TokenData",JSON.stringify(t.payload)),t.payload)}}),{userToken:tb}=x3.actions;function b3(e,t){return function(){return e.apply(t,arguments)}}const{toString:g9}=Object.prototype,{getPrototypeOf:mC}=Object,{iterator:bw,toStringTag:w3}=Symbol,ww=(e=>t=>{const r=g9.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Tc=e=>(e=e.toLowerCase(),t=>ww(t)===e),Sw=e=>t=>typeof t===e,{isArray:Ny}=Array,Ey=Sw("undefined");function z_(e){return e!==null&&!Ey(e)&&e.constructor!==null&&!Ey(e.constructor)&&Js(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const S3=Tc("ArrayBuffer");function y9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&S3(e.buffer),t}const v9=Sw("string"),Js=Sw("function"),P3=Sw("number"),N_=e=>e!==null&&typeof e=="object",_9=e=>e===!0||e===!1,Dx=e=>{if(ww(e)!=="object")return!1;const t=mC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(w3 in e)&&!(bw in e)},x9=e=>{if(!N_(e)||z_(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},b9=Tc("Date"),w9=Tc("File"),S9=Tc("Blob"),P9=Tc("FileList"),E9=e=>N_(e)&&Js(e.pipe),C9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Js(e.append)&&((t=ww(e))==="formdata"||t==="object"&&Js(e.toString)&&e.toString()==="[object FormData]"))},T9=Tc("URLSearchParams"),[M9,k9,A9,I9]=["ReadableStream","Request","Response","Headers"].map(Tc),O9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function F_(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,l;if(typeof e!="object"&&(e=[e]),Ny(e))for(n=0,l=e.length;n<l;n++)t.call(null,e[n],n,e);else{if(z_(e))return;const h=r?Object.getOwnPropertyNames(e):Object.keys(e),d=h.length;let o;for(n=0;n<d;n++)o=h[n],t.call(null,e[o],o,e)}}function E3(e,t){if(z_(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,l;for(;n-- >0;)if(l=r[n],t===l.toLowerCase())return l;return null}const Mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,C3=e=>!Ey(e)&&e!==Mm;function $2(){const{caseless:e,skipUndefined:t}=C3(this)&&this||{},r={},n=(l,h)=>{const d=e&&E3(r,h)||h;Dx(r[d])&&Dx(l)?r[d]=$2(r[d],l):Dx(l)?r[d]=$2({},l):Ny(l)?r[d]=l.slice():(!t||!Ey(l))&&(r[d]=l)};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&F_(arguments[l],n);return r}const L9=(e,t,r,{allOwnKeys:n}={})=>(F_(t,(l,h)=>{r&&Js(l)?e[h]=b3(l,r):e[h]=l},{allOwnKeys:n}),e),D9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),R9=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},j9=(e,t,r,n)=>{let l,h,d;const o={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),h=l.length;h-- >0;)d=l[h],(!n||n(d,e,t))&&!o[d]&&(t[d]=e[d],o[d]=!0);e=r!==!1&&mC(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},z9=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},N9=e=>{if(!e)return null;if(Ny(e))return e;let t=e.length;if(!P3(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},F9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&mC(Uint8Array)),B9=(e,t)=>{const n=(e&&e[bw]).call(e);let l;for(;(l=n.next())&&!l.done;){const h=l.value;t.call(e,h[0],h[1])}},V9=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},$9=Tc("HTMLFormElement"),U9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,l){return n.toUpperCase()+l}),DA=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),q9=Tc("RegExp"),T3=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};F_(r,(l,h)=>{let d;(d=t(l,h,e))!==!1&&(n[h]=d||l)}),Object.defineProperties(e,n)},G9=e=>{T3(e,(t,r)=>{if(Js(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Js(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},W9=(e,t)=>{const r={},n=l=>{l.forEach(h=>{r[h]=!0})};return Ny(e)?n(e):n(String(e).split(t)),r},H9=()=>{},Z9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function K9(e){return!!(e&&Js(e.append)&&e[w3]==="FormData"&&e[bw])}const X9=e=>{const t=new Array(10),r=(n,l)=>{if(N_(n)){if(t.indexOf(n)>=0)return;if(z_(n))return n;if(!("toJSON"in n)){t[l]=n;const h=Ny(n)?[]:{};return F_(n,(d,o)=>{const _=r(d,l+1);!Ey(_)&&(h[o]=_)}),t[l]=void 0,h}}return n};return r(e,0)},Y9=Tc("AsyncFunction"),Q9=e=>e&&(N_(e)||Js(e))&&Js(e.then)&&Js(e.catch),M3=((e,t)=>e?setImmediate:t?((r,n)=>(Mm.addEventListener("message",({source:l,data:h})=>{l===Mm&&h===r&&n.length&&n.shift()()},!1),l=>{n.push(l),Mm.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Js(Mm.postMessage)),J9=typeof queueMicrotask<"u"?queueMicrotask.bind(Mm):typeof process<"u"&&process.nextTick||M3,eG=e=>e!=null&&Js(e[bw]),Et={isArray:Ny,isArrayBuffer:S3,isBuffer:z_,isFormData:C9,isArrayBufferView:y9,isString:v9,isNumber:P3,isBoolean:_9,isObject:N_,isPlainObject:Dx,isEmptyObject:x9,isReadableStream:M9,isRequest:k9,isResponse:A9,isHeaders:I9,isUndefined:Ey,isDate:b9,isFile:w9,isBlob:S9,isRegExp:q9,isFunction:Js,isStream:E9,isURLSearchParams:T9,isTypedArray:F9,isFileList:P9,forEach:F_,merge:$2,extend:L9,trim:O9,stripBOM:D9,inherits:R9,toFlatObject:j9,kindOf:ww,kindOfTest:Tc,endsWith:z9,toArray:N9,forEachEntry:B9,matchAll:V9,isHTMLForm:$9,hasOwnProperty:DA,hasOwnProp:DA,reduceDescriptors:T3,freezeMethods:G9,toObjectSet:W9,toCamelCase:U9,noop:H9,toFiniteNumber:Z9,findKey:E3,global:Mm,isContextDefined:C3,isSpecCompliantForm:K9,toJSONObject:X9,isAsyncFn:Y9,isThenable:Q9,setImmediate:M3,asap:J9,isIterable:eG};function nn(e,t,r,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),l&&(this.response=l,this.status=l.status?l.status:null)}Et.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.status}}});const k3=nn.prototype,A3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{A3[e]={value:e}});Object.defineProperties(nn,A3);Object.defineProperty(k3,"isAxiosError",{value:!0});nn.from=(e,t,r,n,l,h)=>{const d=Object.create(k3);Et.toFlatObject(e,d,function(P){return P!==Error.prototype},S=>S!=="isAxiosError");const o=e&&e.message?e.message:"Error",_=t==null&&e?e.code:t;return nn.call(d,o,_,r,n,l),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",h&&Object.assign(d,h),d};const tG=null;function U2(e){return Et.isPlainObject(e)||Et.isArray(e)}function I3(e){return Et.endsWith(e,"[]")?e.slice(0,-2):e}function RA(e,t,r){return e?e.concat(t).map(function(l,h){return l=I3(l),!r&&h?"["+l+"]":l}).join(r?".":""):t}function rG(e){return Et.isArray(e)&&!e.some(U2)}const nG=Et.toFlatObject(Et,{},null,function(t){return/^is[A-Z]/.test(t)});function Pw(e,t,r){if(!Et.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,L){return!Et.isUndefined(L[F])});const n=r.metaTokens,l=r.visitor||P,h=r.dots,d=r.indexes,_=(r.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(t);if(!Et.isFunction(l))throw new TypeError("visitor must be a function");function S(B){if(B===null)return"";if(Et.isDate(B))return B.toISOString();if(Et.isBoolean(B))return B.toString();if(!_&&Et.isBlob(B))throw new nn("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(B)||Et.isTypedArray(B)?_&&typeof Blob=="function"?new Blob([B]):Buffer.from(B):B}function P(B,F,L){let K=B;if(B&&!L&&typeof B=="object"){if(Et.endsWith(F,"{}"))F=n?F:F.slice(0,-2),B=JSON.stringify(B);else if(Et.isArray(B)&&rG(B)||(Et.isFileList(B)||Et.endsWith(F,"[]"))&&(K=Et.toArray(B)))return F=I3(F),K.forEach(function(re,te){!(Et.isUndefined(re)||re===null)&&t.append(d===!0?RA([F],te,h):d===null?F:F+"[]",S(re))}),!1}return U2(B)?!0:(t.append(RA(L,F,h),S(B)),!1)}const M=[],O=Object.assign(nG,{defaultVisitor:P,convertValue:S,isVisitable:U2});function z(B,F){if(!Et.isUndefined(B)){if(M.indexOf(B)!==-1)throw Error("Circular reference detected in "+F.join("."));M.push(B),Et.forEach(B,function(K,Q){(!(Et.isUndefined(K)||K===null)&&l.call(t,K,Et.isString(Q)?Q.trim():Q,F,O))===!0&&z(K,F?F.concat(Q):[Q])}),M.pop()}}if(!Et.isObject(e))throw new TypeError("data must be an object");return z(e),t}function jA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function gC(e,t){this._pairs=[],e&&Pw(e,this,t)}const O3=gC.prototype;O3.append=function(t,r){this._pairs.push([t,r])};O3.toString=function(t){const r=t?function(n){return t.call(this,n,jA)}:jA;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function iG(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function L3(e,t,r){if(!t)return e;const n=r&&r.encode||iG;Et.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let h;if(l?h=l(t,r):h=Et.isURLSearchParams(t)?t.toString():new gC(t,r).toString(n),h){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class zA{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Et.forEach(this.handlers,function(n){n!==null&&t(n)})}}const D3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aG=typeof URLSearchParams<"u"?URLSearchParams:gC,oG=typeof FormData<"u"?FormData:null,sG=typeof Blob<"u"?Blob:null,lG={isBrowser:!0,classes:{URLSearchParams:aG,FormData:oG,Blob:sG},protocols:["http","https","file","blob","url","data"]},yC=typeof window<"u"&&typeof document<"u",q2=typeof navigator=="object"&&navigator||void 0,uG=yC&&(!q2||["ReactNative","NativeScript","NS"].indexOf(q2.product)<0),cG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hG=yC&&window.location.href||"http://localhost",dG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yC,hasStandardBrowserEnv:uG,hasStandardBrowserWebWorkerEnv:cG,navigator:q2,origin:hG},Symbol.toStringTag,{value:"Module"})),Xo={...dG,...lG};function fG(e,t){return Pw(e,new Xo.classes.URLSearchParams,{visitor:function(r,n,l,h){return Xo.isNode&&Et.isBuffer(r)?(this.append(n,r.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...t})}function pG(e){return Et.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mG(e){const t={},r=Object.keys(e);let n;const l=r.length;let h;for(n=0;n<l;n++)h=r[n],t[h]=e[h];return t}function R3(e){function t(r,n,l,h){let d=r[h++];if(d==="__proto__")return!0;const o=Number.isFinite(+d),_=h>=r.length;return d=!d&&Et.isArray(l)?l.length:d,_?(Et.hasOwnProp(l,d)?l[d]=[l[d],n]:l[d]=n,!o):((!l[d]||!Et.isObject(l[d]))&&(l[d]=[]),t(r,n,l[d],h)&&Et.isArray(l[d])&&(l[d]=mG(l[d])),!o)}if(Et.isFormData(e)&&Et.isFunction(e.entries)){const r={};return Et.forEachEntry(e,(n,l)=>{t(pG(n),l,r,0)}),r}return null}function gG(e,t,r){if(Et.isString(e))try{return(t||JSON.parse)(e),Et.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const B_={transitional:D3,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",l=n.indexOf("application/json")>-1,h=Et.isObject(t);if(h&&Et.isHTMLForm(t)&&(t=new FormData(t)),Et.isFormData(t))return l?JSON.stringify(R3(t)):t;if(Et.isArrayBuffer(t)||Et.isBuffer(t)||Et.isStream(t)||Et.isFile(t)||Et.isBlob(t)||Et.isReadableStream(t))return t;if(Et.isArrayBufferView(t))return t.buffer;if(Et.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(h){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fG(t,this.formSerializer).toString();if((o=Et.isFileList(t))||n.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return Pw(o?{"files[]":t}:t,_&&new _,this.formSerializer)}}return h||l?(r.setContentType("application/json",!1),gG(t)):t}],transformResponse:[function(t){const r=this.transitional||B_.transitional,n=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Et.isResponse(t)||Et.isReadableStream(t))return t;if(t&&Et.isString(t)&&(n&&!this.responseType||l)){const d=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(o){if(d)throw o.name==="SyntaxError"?nn.from(o,nn.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xo.classes.FormData,Blob:Xo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],e=>{B_.headers[e]={}});const yG=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vG=e=>{const t={};let r,n,l;return e&&e.split(`
`).forEach(function(d){l=d.indexOf(":"),r=d.substring(0,l).trim().toLowerCase(),n=d.substring(l+1).trim(),!(!r||t[r]&&yG[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},NA=Symbol("internals");function Rv(e){return e&&String(e).trim().toLowerCase()}function Rx(e){return e===!1||e==null?e:Et.isArray(e)?e.map(Rx):String(e)}function _G(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const xG=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xS(e,t,r,n,l){if(Et.isFunction(n))return n.call(this,t,r);if(l&&(t=r),!!Et.isString(t)){if(Et.isString(n))return t.indexOf(n)!==-1;if(Et.isRegExp(n))return n.test(t)}}function bG(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function wG(e,t){const r=Et.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(l,h,d){return this[n].call(this,t,l,h,d)},configurable:!0})})}let el=class{constructor(t){t&&this.set(t)}set(t,r,n){const l=this;function h(o,_,S){const P=Rv(_);if(!P)throw new Error("header name must be a non-empty string");const M=Et.findKey(l,P);(!M||l[M]===void 0||S===!0||S===void 0&&l[M]!==!1)&&(l[M||_]=Rx(o))}const d=(o,_)=>Et.forEach(o,(S,P)=>h(S,P,_));if(Et.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Et.isString(t)&&(t=t.trim())&&!xG(t))d(vG(t),r);else if(Et.isObject(t)&&Et.isIterable(t)){let o={},_,S;for(const P of t){if(!Et.isArray(P))throw TypeError("Object iterator must return a key-value pair");o[S=P[0]]=(_=o[S])?Et.isArray(_)?[..._,P[1]]:[_,P[1]]:P[1]}d(o,r)}else t!=null&&h(r,t,n);return this}get(t,r){if(t=Rv(t),t){const n=Et.findKey(this,t);if(n){const l=this[n];if(!r)return l;if(r===!0)return _G(l);if(Et.isFunction(r))return r.call(this,l,n);if(Et.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Rv(t),t){const n=Et.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||xS(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let l=!1;function h(d){if(d=Rv(d),d){const o=Et.findKey(n,d);o&&(!r||xS(n,n[o],o,r))&&(delete n[o],l=!0)}}return Et.isArray(t)?t.forEach(h):h(t),l}clear(t){const r=Object.keys(this);let n=r.length,l=!1;for(;n--;){const h=r[n];(!t||xS(this,this[h],h,t,!0))&&(delete this[h],l=!0)}return l}normalize(t){const r=this,n={};return Et.forEach(this,(l,h)=>{const d=Et.findKey(n,h);if(d){r[d]=Rx(l),delete r[h];return}const o=t?bG(h):String(h).trim();o!==h&&delete r[h],r[o]=Rx(l),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Et.forEach(this,(n,l)=>{n!=null&&n!==!1&&(r[l]=t&&Et.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(l=>n.set(l)),n}static accessor(t){const n=(this[NA]=this[NA]={accessors:{}}).accessors,l=this.prototype;function h(d){const o=Rv(d);n[o]||(wG(l,d),n[o]=!0)}return Et.isArray(t)?t.forEach(h):h(t),this}};el.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(el.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Et.freezeMethods(el);function bS(e,t){const r=this||B_,n=t||r,l=el.from(n.headers);let h=n.data;return Et.forEach(e,function(o){h=o.call(r,h,l.normalize(),t?t.status:void 0)}),l.normalize(),h}function j3(e){return!!(e&&e.__CANCEL__)}function Fy(e,t,r){nn.call(this,e??"canceled",nn.ERR_CANCELED,t,r),this.name="CanceledError"}Et.inherits(Fy,nn,{__CANCEL__:!0});function z3(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new nn("Request failed with status code "+r.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function SG(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function PG(e,t){e=e||10;const r=new Array(e),n=new Array(e);let l=0,h=0,d;return t=t!==void 0?t:1e3,function(_){const S=Date.now(),P=n[h];d||(d=S),r[l]=_,n[l]=S;let M=h,O=0;for(;M!==l;)O+=r[M++],M=M%e;if(l=(l+1)%e,l===h&&(h=(h+1)%e),S-d<t)return;const z=P&&S-P;return z?Math.round(O*1e3/z):void 0}}function EG(e,t){let r=0,n=1e3/t,l,h;const d=(S,P=Date.now())=>{r=P,l=null,h&&(clearTimeout(h),h=null),e(...S)};return[(...S)=>{const P=Date.now(),M=P-r;M>=n?d(S,P):(l=S,h||(h=setTimeout(()=>{h=null,d(l)},n-M)))},()=>l&&d(l)]}const rb=(e,t,r=3)=>{let n=0;const l=PG(50,250);return EG(h=>{const d=h.loaded,o=h.lengthComputable?h.total:void 0,_=d-n,S=l(_),P=d<=o;n=d;const M={loaded:d,total:o,progress:o?d/o:void 0,bytes:_,rate:S||void 0,estimated:S&&o&&P?(o-d)/S:void 0,event:h,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(M)},r)},FA=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},BA=e=>(...t)=>Et.asap(()=>e(...t)),CG=Xo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Xo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Xo.origin),Xo.navigator&&/(msie|trident)/i.test(Xo.navigator.userAgent)):()=>!0,TG=Xo.hasStandardBrowserEnv?{write(e,t,r,n,l,h,d){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];Et.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),Et.isString(n)&&o.push(`path=${n}`),Et.isString(l)&&o.push(`domain=${l}`),h===!0&&o.push("secure"),Et.isString(d)&&o.push(`SameSite=${d}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function MG(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function kG(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function N3(e,t,r){let n=!MG(t);return e&&(n||r==!1)?kG(e,t):t}const VA=e=>e instanceof el?{...e}:e;function Xm(e,t){t=t||{};const r={};function n(S,P,M,O){return Et.isPlainObject(S)&&Et.isPlainObject(P)?Et.merge.call({caseless:O},S,P):Et.isPlainObject(P)?Et.merge({},P):Et.isArray(P)?P.slice():P}function l(S,P,M,O){if(Et.isUndefined(P)){if(!Et.isUndefined(S))return n(void 0,S,M,O)}else return n(S,P,M,O)}function h(S,P){if(!Et.isUndefined(P))return n(void 0,P)}function d(S,P){if(Et.isUndefined(P)){if(!Et.isUndefined(S))return n(void 0,S)}else return n(void 0,P)}function o(S,P,M){if(M in t)return n(S,P);if(M in e)return n(void 0,S)}const _={url:h,method:h,data:h,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:o,headers:(S,P,M)=>l(VA(S),VA(P),M,!0)};return Et.forEach(Object.keys({...e,...t}),function(P){const M=_[P]||l,O=M(e[P],t[P],P);Et.isUndefined(O)&&M!==o||(r[P]=O)}),r}const F3=e=>{const t=Xm({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:h,headers:d,auth:o}=t;if(t.headers=d=el.from(d),t.url=L3(N3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&d.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Et.isFormData(r)){if(Xo.hasStandardBrowserEnv||Xo.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Et.isFunction(r.getHeaders)){const _=r.getHeaders(),S=["content-type","content-length"];Object.entries(_).forEach(([P,M])=>{S.includes(P.toLowerCase())&&d.set(P,M)})}}if(Xo.hasStandardBrowserEnv&&(n&&Et.isFunction(n)&&(n=n(t)),n||n!==!1&&CG(t.url))){const _=l&&h&&TG.read(h);_&&d.set(l,_)}return t},AG=typeof XMLHttpRequest<"u",IG=AG&&function(e){return new Promise(function(r,n){const l=F3(e);let h=l.data;const d=el.from(l.headers).normalize();let{responseType:o,onUploadProgress:_,onDownloadProgress:S}=l,P,M,O,z,B;function F(){z&&z(),B&&B(),l.cancelToken&&l.cancelToken.unsubscribe(P),l.signal&&l.signal.removeEventListener("abort",P)}let L=new XMLHttpRequest;L.open(l.method.toUpperCase(),l.url,!0),L.timeout=l.timeout;function K(){if(!L)return;const re=el.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),ae={data:!o||o==="text"||o==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:re,config:e,request:L};z3(function(ne){r(ne),F()},function(ne){n(ne),F()},ae),L=null}"onloadend"in L?L.onloadend=K:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(K)},L.onabort=function(){L&&(n(new nn("Request aborted",nn.ECONNABORTED,e,L)),L=null)},L.onerror=function(te){const ae=te&&te.message?te.message:"Network Error",he=new nn(ae,nn.ERR_NETWORK,e,L);he.event=te||null,n(he),L=null},L.ontimeout=function(){let te=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ae=l.transitional||D3;l.timeoutErrorMessage&&(te=l.timeoutErrorMessage),n(new nn(te,ae.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,L)),L=null},h===void 0&&d.setContentType(null),"setRequestHeader"in L&&Et.forEach(d.toJSON(),function(te,ae){L.setRequestHeader(ae,te)}),Et.isUndefined(l.withCredentials)||(L.withCredentials=!!l.withCredentials),o&&o!=="json"&&(L.responseType=l.responseType),S&&([O,B]=rb(S,!0),L.addEventListener("progress",O)),_&&L.upload&&([M,z]=rb(_),L.upload.addEventListener("progress",M),L.upload.addEventListener("loadend",z)),(l.cancelToken||l.signal)&&(P=re=>{L&&(n(!re||re.type?new Fy(null,e,L):re),L.abort(),L=null)},l.cancelToken&&l.cancelToken.subscribe(P),l.signal&&(l.signal.aborted?P():l.signal.addEventListener("abort",P)));const Q=SG(l.url);if(Q&&Xo.protocols.indexOf(Q)===-1){n(new nn("Unsupported protocol "+Q+":",nn.ERR_BAD_REQUEST,e));return}L.send(h||null)})},OG=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,l;const h=function(S){if(!l){l=!0,o();const P=S instanceof Error?S:this.reason;n.abort(P instanceof nn?P:new Fy(P instanceof Error?P.message:P))}};let d=t&&setTimeout(()=>{d=null,h(new nn(`timeout ${t} of ms exceeded`,nn.ETIMEDOUT))},t);const o=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(S=>{S.unsubscribe?S.unsubscribe(h):S.removeEventListener("abort",h)}),e=null)};e.forEach(S=>S.addEventListener("abort",h));const{signal:_}=n;return _.unsubscribe=()=>Et.asap(o),_}},LG=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,l;for(;n<r;)l=n+t,yield e.slice(n,l),n=l},DG=async function*(e,t){for await(const r of RG(e))yield*LG(r,t)},RG=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},$A=(e,t,r,n)=>{const l=DG(e,t);let h=0,d,o=_=>{d||(d=!0,n&&n(_))};return new ReadableStream({async pull(_){try{const{done:S,value:P}=await l.next();if(S){o(),_.close();return}let M=P.byteLength;if(r){let O=h+=M;r(O)}_.enqueue(new Uint8Array(P))}catch(S){throw o(S),S}},cancel(_){return o(_),l.return()}},{highWaterMark:2})},UA=64*1024,{isFunction:sx}=Et,jG=(({Request:e,Response:t})=>({Request:e,Response:t}))(Et.global),{ReadableStream:qA,TextEncoder:GA}=Et.global,WA=(e,...t)=>{try{return!!e(...t)}catch{return!1}},zG=e=>{e=Et.merge.call({skipUndefined:!0},jG,e);const{fetch:t,Request:r,Response:n}=e,l=t?sx(t):typeof fetch=="function",h=sx(r),d=sx(n);if(!l)return!1;const o=l&&sx(qA),_=l&&(typeof GA=="function"?(B=>F=>B.encode(F))(new GA):async B=>new Uint8Array(await new r(B).arrayBuffer())),S=h&&o&&WA(()=>{let B=!1;const F=new r(Xo.origin,{body:new qA,method:"POST",get duplex(){return B=!0,"half"}}).headers.has("Content-Type");return B&&!F}),P=d&&o&&WA(()=>Et.isReadableStream(new n("").body)),M={stream:P&&(B=>B.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(B=>{!M[B]&&(M[B]=(F,L)=>{let K=F&&F[B];if(K)return K.call(F);throw new nn(`Response type '${B}' is not supported`,nn.ERR_NOT_SUPPORT,L)})});const O=async B=>{if(B==null)return 0;if(Et.isBlob(B))return B.size;if(Et.isSpecCompliantForm(B))return(await new r(Xo.origin,{method:"POST",body:B}).arrayBuffer()).byteLength;if(Et.isArrayBufferView(B)||Et.isArrayBuffer(B))return B.byteLength;if(Et.isURLSearchParams(B)&&(B=B+""),Et.isString(B))return(await _(B)).byteLength},z=async(B,F)=>{const L=Et.toFiniteNumber(B.getContentLength());return L??O(F)};return async B=>{let{url:F,method:L,data:K,signal:Q,cancelToken:re,timeout:te,onDownloadProgress:ae,onUploadProgress:he,responseType:ne,headers:be,withCredentials:xe="same-origin",fetchOptions:$e}=F3(B),Ee=t||fetch;ne=ne?(ne+"").toLowerCase():"text";let Ne=OG([Q,re&&re.toAbortSignal()],te),Xe=null;const ut=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()});let pt;try{if(he&&S&&L!=="get"&&L!=="head"&&(pt=await z(be,K))!==0){let Oe=new r(F,{method:"POST",body:K,duplex:"half"}),et;if(Et.isFormData(K)&&(et=Oe.headers.get("content-type"))&&be.setContentType(et),Oe.body){const[Mt,Dt]=FA(pt,rb(BA(he)));K=$A(Oe.body,UA,Mt,Dt)}}Et.isString(xe)||(xe=xe?"include":"omit");const gt=h&&"credentials"in r.prototype,wt={...$e,signal:Ne,method:L.toUpperCase(),headers:be.normalize().toJSON(),body:K,duplex:"half",credentials:gt?xe:void 0};Xe=h&&new r(F,wt);let je=await(h?Ee(Xe,$e):Ee(F,wt));const Qe=P&&(ne==="stream"||ne==="response");if(P&&(ae||Qe&&ut)){const Oe={};["status","statusText","headers"].forEach(Ke=>{Oe[Ke]=je[Ke]});const et=Et.toFiniteNumber(je.headers.get("content-length")),[Mt,Dt]=ae&&FA(et,rb(BA(ae),!0))||[];je=new n($A(je.body,UA,Mt,()=>{Dt&&Dt(),ut&&ut()}),Oe)}ne=ne||"text";let yt=await M[Et.findKey(M,ne)||"text"](je,B);return!Qe&&ut&&ut(),await new Promise((Oe,et)=>{z3(Oe,et,{data:yt,headers:el.from(je.headers),status:je.status,statusText:je.statusText,config:B,request:Xe})})}catch(gt){throw ut&&ut(),gt&&gt.name==="TypeError"&&/Load failed|fetch/i.test(gt.message)?Object.assign(new nn("Network Error",nn.ERR_NETWORK,B,Xe),{cause:gt.cause||gt}):nn.from(gt,gt&&gt.code,B,Xe)}}},NG=new Map,B3=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:l}=t,h=[n,l,r];let d=h.length,o=d,_,S,P=NG;for(;o--;)_=h[o],S=P.get(_),S===void 0&&P.set(_,S=o?new Map:zG(t)),P=S;return S};B3();const vC={http:tG,xhr:IG,fetch:{get:B3}};Et.forEach(vC,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const HA=e=>`- ${e}`,FG=e=>Et.isFunction(e)||e===null||e===!1;function BG(e,t){e=Et.isArray(e)?e:[e];const{length:r}=e;let n,l;const h={};for(let d=0;d<r;d++){n=e[d];let o;if(l=n,!FG(n)&&(l=vC[(o=String(n)).toLowerCase()],l===void 0))throw new nn(`Unknown adapter '${o}'`);if(l&&(Et.isFunction(l)||(l=l.get(t))))break;h[o||"#"+d]=l}if(!l){const d=Object.entries(h).map(([_,S])=>`adapter ${_} `+(S===!1?"is not supported by the environment":"is not available in the build"));let o=r?d.length>1?`since :
`+d.map(HA).join(`
`):" "+HA(d[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return l}const V3={getAdapter:BG,adapters:vC};function wS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fy(null,e)}function ZA(e){return wS(e),e.headers=el.from(e.headers),e.data=bS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),V3.getAdapter(e.adapter||B_.adapter,e)(e).then(function(n){return wS(e),n.data=bS.call(e,e.transformResponse,n),n.headers=el.from(n.headers),n},function(n){return j3(n)||(wS(e),n&&n.response&&(n.response.data=bS.call(e,e.transformResponse,n.response),n.response.headers=el.from(n.response.headers))),Promise.reject(n)})}const $3="1.13.2",Ew={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ew[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const KA={};Ew.transitional=function(t,r,n){function l(h,d){return"[Axios v"+$3+"] Transitional option '"+h+"'"+d+(n?". "+n:"")}return(h,d,o)=>{if(t===!1)throw new nn(l(d," has been removed"+(r?" in "+r:"")),nn.ERR_DEPRECATED);return r&&!KA[d]&&(KA[d]=!0,console.warn(l(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(h,d,o):!0}};Ew.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function VG(e,t,r){if(typeof e!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let l=n.length;for(;l-- >0;){const h=n[l],d=t[h];if(d){const o=e[h],_=o===void 0||d(o,h,e);if(_!==!0)throw new nn("option "+h+" must be "+_,nn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new nn("Unknown option "+h,nn.ERR_BAD_OPTION)}}const jx={assertOptions:VG,validators:Ew},ch=jx.validators;let qm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zA,response:new zA}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const h=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?h&&!String(n.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+h):n.stack=h}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Xm(this.defaults,r);const{transitional:n,paramsSerializer:l,headers:h}=r;n!==void 0&&jx.assertOptions(n,{silentJSONParsing:ch.transitional(ch.boolean),forcedJSONParsing:ch.transitional(ch.boolean),clarifyTimeoutError:ch.transitional(ch.boolean)},!1),l!=null&&(Et.isFunction(l)?r.paramsSerializer={serialize:l}:jx.assertOptions(l,{encode:ch.function,serialize:ch.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),jx.assertOptions(r,{baseUrl:ch.spelling("baseURL"),withXsrfToken:ch.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=h&&Et.merge(h.common,h[r.method]);h&&Et.forEach(["delete","get","head","post","put","patch","common"],B=>{delete h[B]}),r.headers=el.concat(d,h);const o=[];let _=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(r)===!1||(_=_&&F.synchronous,o.unshift(F.fulfilled,F.rejected))});const S=[];this.interceptors.response.forEach(function(F){S.push(F.fulfilled,F.rejected)});let P,M=0,O;if(!_){const B=[ZA.bind(this),void 0];for(B.unshift(...o),B.push(...S),O=B.length,P=Promise.resolve(r);M<O;)P=P.then(B[M++],B[M++]);return P}O=o.length;let z=r;for(;M<O;){const B=o[M++],F=o[M++];try{z=B(z)}catch(L){F.call(this,L);break}}try{P=ZA.call(this,z)}catch(B){return Promise.reject(B)}for(M=0,O=S.length;M<O;)P=P.then(S[M++],S[M++]);return P}getUri(t){t=Xm(this.defaults,t);const r=N3(t.baseURL,t.url,t.allowAbsoluteUrls);return L3(r,t.params,t.paramsSerializer)}};Et.forEach(["delete","get","head","options"],function(t){qm.prototype[t]=function(r,n){return this.request(Xm(n||{},{method:t,url:r,data:(n||{}).data}))}});Et.forEach(["post","put","patch"],function(t){function r(n){return function(h,d,o){return this.request(Xm(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:h,data:d}))}}qm.prototype[t]=r(),qm.prototype[t+"Form"]=r(!0)});let $G=class U3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(h){r=h});const n=this;this.promise.then(l=>{if(!n._listeners)return;let h=n._listeners.length;for(;h-- >0;)n._listeners[h](l);n._listeners=null}),this.promise.then=l=>{let h;const d=new Promise(o=>{n.subscribe(o),h=o}).then(l);return d.cancel=function(){n.unsubscribe(h)},d},t(function(h,d,o){n.reason||(n.reason=new Fy(h,d,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new U3(function(l){t=l}),cancel:t}}};function UG(e){return function(r){return e.apply(null,r)}}function qG(e){return Et.isObject(e)&&e.isAxiosError===!0}const G2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(G2).forEach(([e,t])=>{G2[t]=e});function q3(e){const t=new qm(e),r=b3(qm.prototype.request,t);return Et.extend(r,qm.prototype,t,{allOwnKeys:!0}),Et.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return q3(Xm(e,l))},r}const ha=q3(B_);ha.Axios=qm;ha.CanceledError=Fy;ha.CancelToken=$G;ha.isCancel=j3;ha.VERSION=$3;ha.toFormData=Pw;ha.AxiosError=nn;ha.Cancel=ha.CanceledError;ha.all=function(t){return Promise.all(t)};ha.spread=UG;ha.isAxiosError=qG;ha.mergeConfig=Xm;ha.AxiosHeaders=el;ha.formToJSON=e=>R3(Et.isHTMLForm(e)?new FormData(e):e);ha.getAdapter=V3.getAdapter;ha.HttpStatusCode=G2;ha.default=ha;const{Axios:ume,AxiosError:cme,CanceledError:hme,isCancel:dme,CancelToken:fme,VERSION:pme,all:mme,Cancel:gme,isAxiosError:yme,spread:vme,toFormData:_me,AxiosHeaders:xme,HttpStatusCode:bme,formToJSON:wme,getAdapter:Sme,mergeConfig:Pme}=ha;let GG={data:""},WG=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||GG},HG=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ZG=/\/\*[^]*?\*\/|  +/g,XA=/\n+/g,tp=(e,t)=>{let r="",n="",l="";for(let h in e){let d=e[h];h[0]=="@"?h[1]=="i"?r=h+" "+d+";":n+=h[1]=="f"?tp(d,h):h+"{"+tp(d,h[1]=="k"?"":t)+"}":typeof d=="object"?n+=tp(d,t?t.replace(/([^,])+/g,o=>h.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,o):o?o+" "+_:_)):h):d!=null&&(h=/^--/.test(h)?h:h.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=tp.p?tp.p(h,d):h+":"+d+";")}return r+(t&&l?t+"{"+l+"}":l)+n},dd={},G3=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+G3(e[r]);return t}return e},KG=(e,t,r,n,l)=>{let h=G3(e),d=dd[h]||(dd[h]=(_=>{let S=0,P=11;for(;S<_.length;)P=101*P+_.charCodeAt(S++)>>>0;return"go"+P})(h));if(!dd[d]){let _=h!==e?e:(S=>{let P,M,O=[{}];for(;P=HG.exec(S.replace(ZG,""));)P[4]?O.shift():P[3]?(M=P[3].replace(XA," ").trim(),O.unshift(O[0][M]=O[0][M]||{})):O[0][P[1]]=P[2].replace(XA," ").trim();return O[0]})(e);dd[d]=tp(l?{["@keyframes "+d]:_}:_,r?"":"."+d)}let o=r&&dd.g?dd.g:null;return r&&(dd.g=dd[d]),((_,S,P,M)=>{M?S.data=S.data.replace(M,_):S.data.indexOf(_)===-1&&(S.data=P?_+S.data:S.data+_)})(dd[d],t,n,o),d},XG=(e,t,r)=>e.reduce((n,l,h)=>{let d=t[h];if(d&&d.call){let o=d(r),_=o&&o.props&&o.props.className||/^go/.test(o)&&o;d=_?"."+_:o&&typeof o=="object"?o.props?"":tp(o,""):o===!1?"":o}return n+l+(d??"")},"");function Cw(e){let t=this||{},r=e.call?e(t.p):e;return KG(r.unshift?r.raw?XG(r,[].slice.call(arguments,1),t.p):r.reduce((n,l)=>Object.assign(n,l&&l.call?l(t.p):l),{}):r,WG(t.target),t.g,t.o,t.k)}let W3,W2,H2;Cw.bind({g:1});let Ad=Cw.bind({k:1});function YG(e,t,r,n){tp.p=t,W3=e,W2=r,H2=n}function Pp(e,t){let r=this||{};return function(){let n=arguments;function l(h,d){let o=Object.assign({},h),_=o.className||l.className;r.p=Object.assign({theme:W2&&W2()},o),r.o=/ *go\d+/.test(_),o.className=Cw.apply(r,n)+(_?" "+_:"");let S=e;return e[0]&&(S=o.as||e,delete o.as),H2&&S[0]&&H2(o),W3(S,o)}return l}}var QG=e=>typeof e=="function",nb=(e,t)=>QG(e)?e(t):e,JG=(()=>{let e=0;return()=>(++e).toString()})(),H3=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),eW=20,_C="default",Z3=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(d=>d.id===t.toast.id?{...d,...t.toast}:d)};case 2:let{toast:n}=t;return Z3(e,{type:e.toasts.find(d=>d.id===n.id)?1:0,toast:n});case 3:let{toastId:l}=t;return{...e,toasts:e.toasts.map(d=>d.id===l||l===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(d=>d.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let h=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+h}))}}},zx=[],K3={toasts:[],pausedAt:void 0,settings:{toastLimit:eW}},mh={},X3=(e,t=_C)=>{mh[t]=Z3(mh[t]||K3,e),zx.forEach(([r,n])=>{r===t&&n(mh[t])})},Y3=e=>Object.keys(mh).forEach(t=>X3(e,t)),tW=e=>Object.keys(mh).find(t=>mh[t].toasts.some(r=>r.id===e)),Tw=(e=_C)=>t=>{X3(t,e)},rW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},nW=(e={},t=_C)=>{let[r,n]=A.useState(mh[t]||K3),l=A.useRef(mh[t]);A.useEffect(()=>(l.current!==mh[t]&&n(mh[t]),zx.push([t,n]),()=>{let d=zx.findIndex(([o])=>o===t);d>-1&&zx.splice(d,1)}),[t]);let h=r.toasts.map(d=>{var o,_,S;return{...e,...e[d.type],...d,removeDelay:d.removeDelay||((o=e[d.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:d.duration||((_=e[d.type])==null?void 0:_.duration)||(e==null?void 0:e.duration)||rW[d.type],style:{...e.style,...(S=e[d.type])==null?void 0:S.style,...d.style}}});return{...r,toasts:h}},iW=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||JG()}),V_=e=>(t,r)=>{let n=iW(t,e,r);return Tw(n.toasterId||tW(n.id))({type:2,toast:n}),n.id},ki=(e,t)=>V_("blank")(e,t);ki.error=V_("error");ki.success=V_("success");ki.loading=V_("loading");ki.custom=V_("custom");ki.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Tw(t)(r):Y3(r)};ki.dismissAll=e=>ki.dismiss(void 0,e);ki.remove=(e,t)=>{let r={type:4,toastId:e};t?Tw(t)(r):Y3(r)};ki.removeAll=e=>ki.remove(void 0,e);ki.promise=(e,t,r)=>{let n=ki.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(l=>{let h=t.success?nb(t.success,l):void 0;return h?ki.success(h,{id:n,...r,...r==null?void 0:r.success}):ki.dismiss(n),l}).catch(l=>{let h=t.error?nb(t.error,l):void 0;h?ki.error(h,{id:n,...r,...r==null?void 0:r.error}):ki.dismiss(n)}),e};var aW=1e3,oW=(e,t="default")=>{let{toasts:r,pausedAt:n}=nW(e,t),l=A.useRef(new Map).current,h=A.useCallback((M,O=aW)=>{if(l.has(M))return;let z=setTimeout(()=>{l.delete(M),d({type:4,toastId:M})},O);l.set(M,z)},[]);A.useEffect(()=>{if(n)return;let M=Date.now(),O=r.map(z=>{if(z.duration===1/0)return;let B=(z.duration||0)+z.pauseDuration-(M-z.createdAt);if(B<0){z.visible&&ki.dismiss(z.id);return}return setTimeout(()=>ki.dismiss(z.id,t),B)});return()=>{O.forEach(z=>z&&clearTimeout(z))}},[r,n,t]);let d=A.useCallback(Tw(t),[t]),o=A.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=A.useCallback((M,O)=>{d({type:1,toast:{id:M,height:O}})},[d]),S=A.useCallback(()=>{n&&d({type:6,time:Date.now()})},[n,d]),P=A.useCallback((M,O)=>{let{reverseOrder:z=!1,gutter:B=8,defaultPosition:F}=O||{},L=r.filter(re=>(re.position||F)===(M.position||F)&&re.height),K=L.findIndex(re=>re.id===M.id),Q=L.filter((re,te)=>te<K&&re.visible).length;return L.filter(re=>re.visible).slice(...z?[Q+1]:[0,Q]).reduce((re,te)=>re+(te.height||0)+B,0)},[r]);return A.useEffect(()=>{r.forEach(M=>{if(M.dismissed)h(M.id,M.removeDelay);else{let O=l.get(M.id);O&&(clearTimeout(O),l.delete(M.id))}})},[r,h]),{toasts:r,handlers:{updateHeight:_,startPause:o,endPause:S,calculateOffset:P}}},sW=Ad`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,lW=Ad`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uW=Ad`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,cW=Pp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${lW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hW=Ad`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,dW=Pp("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${hW} 1s linear infinite;
`,fW=Ad`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,pW=Ad`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,mW=Pp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${pW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,gW=Pp("div")`
  position: absolute;
`,yW=Pp("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,vW=Ad`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_W=Pp("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${vW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,xW=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?A.createElement(_W,null,t):t:r==="blank"?null:A.createElement(yW,null,A.createElement(dW,{...n}),r!=="loading"&&A.createElement(gW,null,r==="error"?A.createElement(cW,{...n}):A.createElement(mW,{...n})))},bW=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,wW=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,SW="0%{opacity:0;} 100%{opacity:1;}",PW="0%{opacity:1;} 100%{opacity:0;}",EW=Pp("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,CW=Pp("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,TW=(e,t)=>{let r=e.includes("top")?1:-1,[n,l]=H3()?[SW,PW]:[bW(r),wW(r)];return{animation:t?`${Ad(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ad(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},MW=A.memo(({toast:e,position:t,style:r,children:n})=>{let l=e.height?TW(e.position||t||"top-center",e.visible):{opacity:0},h=A.createElement(xW,{toast:e}),d=A.createElement(CW,{...e.ariaProps},nb(e.message,e));return A.createElement(EW,{className:e.className,style:{...l,...r,...e.style}},typeof n=="function"?n({icon:h,message:d}):A.createElement(A.Fragment,null,h,d))});YG(A.createElement);var kW=({id:e,className:t,style:r,onHeightUpdate:n,children:l})=>{let h=A.useCallback(d=>{if(d){let o=()=>{let _=d.getBoundingClientRect().height;n(e,_)};o(),new MutationObserver(o).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return A.createElement("div",{ref:h,className:t,style:r},l)},AW=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},l=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:H3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...l}},IW=Cw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lx=16,OW=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:l,toasterId:h,containerStyle:d,containerClassName:o})=>{let{toasts:_,handlers:S}=oW(r,h);return A.createElement("div",{"data-rht-toaster":h||"",style:{position:"fixed",zIndex:9999,top:lx,left:lx,right:lx,bottom:lx,pointerEvents:"none",...d},className:o,onMouseEnter:S.startPause,onMouseLeave:S.endPause},_.map(P=>{let M=P.position||t,O=S.calculateOffset(P,{reverseOrder:e,gutter:n,defaultPosition:t}),z=AW(M,O);return A.createElement(kW,{id:P.id,key:P.id,onHeightUpdate:S.updateHeight,className:P.visible?IW:"",style:z},P.type==="custom"?nb(P.message,P):l?l(P):A.createElement(MW,{toast:P,position:M}))}))},pu=ki,SS={exports:{}},PS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function LW(){if(YA)return PS;YA=1;var e=Dy();function t(_,S){return _===S&&(_!==0||1/_===1/S)||_!==_&&S!==S}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,l=e.useRef,h=e.useEffect,d=e.useMemo,o=e.useDebugValue;return PS.useSyncExternalStoreWithSelector=function(_,S,P,M,O){var z=l(null);if(z.current===null){var B={hasValue:!1,value:null};z.current=B}else B=z.current;z=d(function(){function L(ae){if(!K){if(K=!0,Q=ae,ae=M(ae),O!==void 0&&B.hasValue){var he=B.value;if(O(he,ae))return re=he}return re=ae}if(he=re,r(Q,ae))return he;var ne=M(ae);return O!==void 0&&O(he,ne)?(Q=ae,he):(Q=ae,re=ne)}var K=!1,Q,re,te=P===void 0?null:P;return[function(){return L(S())},te===null?void 0:function(){return L(te())}]},[S,P,M,O]);var F=n(_,z[0],z[1]);return h(function(){B.hasValue=!0,B.value=F},[F]),o(F),F},PS}var QA;function DW(){return QA||(QA=1,SS.exports=LW()),SS.exports}var RW=DW();function jW(e){e()}function zW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){jW(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!n||e===null||(n=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var JA={notify(){},get:()=>[]};function NW(e,t){let r,n=JA,l=0,h=!1;function d(F){P();const L=n.subscribe(F);let K=!1;return()=>{K||(K=!0,L(),M())}}function o(){n.notify()}function _(){B.onStateChange&&B.onStateChange()}function S(){return h}function P(){l++,r||(r=e.subscribe(_),n=zW())}function M(){l--,r&&l===0&&(r(),r=void 0,n.clear(),n=JA)}function O(){h||(h=!0,P())}function z(){h&&(h=!1,M())}const B={addNestedSub:d,notifyNestedSubs:o,handleChangeWrapper:_,isSubscribed:S,trySubscribe:O,tryUnsubscribe:z,getListeners:()=>n};return B}var FW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BW=FW(),VW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$W=VW(),UW=()=>BW||$W?A.useLayoutEffect:A.useEffect,qW=UW();function eI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function GW(e,t){if(eI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!eI(e[r[l]],t[r[l]]))return!1;return!0}var ES=Symbol.for("react-redux-context"),CS=typeof globalThis<"u"?globalThis:{};function WW(){if(!A.createContext)return{};const e=CS[ES]??(CS[ES]=new Map);let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var yp=WW();function HW(e){const{children:t,context:r,serverState:n,store:l}=e,h=A.useMemo(()=>{const _=NW(l);return{store:l,subscription:_,getServerState:n?()=>n:void 0}},[l,n]),d=A.useMemo(()=>l.getState(),[l]);qW(()=>{const{subscription:_}=h;return _.onStateChange=_.notifyNestedSubs,_.trySubscribe(),d!==l.getState()&&_.notifyNestedSubs(),()=>{_.tryUnsubscribe(),_.onStateChange=void 0}},[h,d]);const o=r||yp;return A.createElement(o.Provider,{value:h},t)}var Q3=HW;function xC(e=yp){return function(){return A.useContext(e)}}var J3=xC();function eN(e=yp){const t=e===yp?J3:xC(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var ZW=eN();function KW(e=yp){const t=e===yp?ZW:eN(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var bC=KW(),XW=(e,t)=>e===t;function YW(e=yp){const t=e===yp?J3:xC(e),r=(n,l={})=>{const{equalityFn:h=XW}=typeof l=="function"?{equalityFn:l}:l,d=t(),{store:o,subscription:_,getServerState:S}=d;A.useRef(!0);const P=A.useCallback({[n.name](O){return n(O)}}[n.name],[n]),M=RW.useSyncExternalStoreWithSelector(_.addNestedSub,o.getState,S||o.getState,P,h);return A.useDebugValue(M),M};return Object.assign(r,{withTypes:()=>r}),r}var Mw=YW();const Mc=()=>{const e="https://electric-vehicle-route-energy-calculation.onrender.com/api/v1",t=Mw(h=>{var d,o;return(o=(d=h==null?void 0:h.userToken)==null?void 0:d.tokens)==null?void 0:o.access}),r=bC(),n=Sp(),l=ha.create({baseURL:e,timeout:3e4,headers:{Authorization:`Bearer ${t}`}});return l.interceptors.response.use(h=>h,h=>{let d="Something went wrong!!!";return h.response?h.response.status===401||h.response.status===403?(d="Session expired. Please log in again.",ki.error(d),r(tb(null)),r(V2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),n("/auth/login")):h.response.status===500&&(d="Internal server error, try again.",ki.error(d)):h.request?(d="Network issue, try again.",ki.error(d)):(d="Request failed.",ki.error(d)),Promise.reject(h)}),l};function QW(){const e=Mc(),t=bC(),r=Sp();return ig({mutationKey:["userLogout"],mutationFn:async n=>{const l=await e.post("/logout/",n);return l==null?void 0:l.data},onSuccess:n=>{pu.success("Logout Successful!"),t(tb(null)),t(V2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),r("/auth")},onError:n=>{pu.success("Something went wrong! But you have been logged out."),t(tb(null)),t(V2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),r("/auth")}})}function JW(){const e=Mw(S=>{var P;return(P=S==null?void 0:S.userToken)==null?void 0:P.tokens}),t=tl().pathname,[r,n]=A.useState(""),[l,h]=A.useState("");A.useEffect(()=>{t==="/"?(n("EV Calculation"),h("Welcome back")):t==="/vechile"?(n("EV Route Calculate Tools"),h("Vehicle")):t==="/route"?(n("EV Route Planner"),h("Calculate optimal routes with charging stops based on vehicle specifications")):t==="/result"||t==="/route-analysis-results"?(n("EV Result Simulation"),h("Plan your journey and calculate battery consumption")):t==="/notification"&&(n("Notification"),h("Show the Notification"))},[t]);const{mutate:d,isPending:o}=QW(),_=()=>{const S={refresh:e==null?void 0:e.refresh};d(S)};return $.jsxs("div",{className:"w-full h-full flex items-center justify-between gap-10 px-10 relative",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-secondary-black text-2xl font-bold font-roboto",children:r}),$.jsx("h6",{className:"text-[#637381] text-base font-roboto mt-2",children:l})]}),$.jsx("div",{className:"flex items-center gap-5",children:$.jsx(wy,{children:"Logout",onClick:_})}),$.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-95/100 border-b border-[#637381]/20"}),o&&$.jsx(gp,{})]})}function e7(){return Mw(t=>{var r;return(r=t==null?void 0:t.userToken)==null?void 0:r.tokens})?$.jsxs("main",{className:"w-full h-screen flex",children:[$.jsx("div",{className:"w-full max-w-[300px] h-screen px-5 py-8",children:$.jsx(k8,{})}),$.jsxs("div",{className:"w-full max-w-[calc(100%-300px)] h-screen bg-[#f5f6f7]",children:[$.jsx("div",{className:"w-full h-[110px]",children:$.jsx(JW,{})}),$.jsx("div",{className:"w-full h-[calc(100vh-110px)] overflow-y-scroll custom-scrollbar",children:$.jsx(Ez,{})})]})]}):$.jsx(eC,{to:"/auth/login"})}var tN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tI=ui.createContext&&ui.createContext(tN),t7=["attr","size","title"];function r7(e,t){if(e==null)return{};var r=n7(e,t),n,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)n=h[l],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function n7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ib.apply(this,arguments)}function rI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ab(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(r),!0).forEach(function(n){i7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i7(e,t,r){return t=a7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a7(e){var t=o7(e,"string");return typeof t=="symbol"?t:t+""}function o7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rN(e){return e&&e.map((t,r)=>ui.createElement(t.tag,ab({key:r},t.attr),rN(t.child)))}function kw(e){return t=>ui.createElement(s7,ib({attr:ab({},e.attr)},t),rN(e.child))}function s7(e){var t=r=>{var{attr:n,size:l,title:h}=e,d=r7(e,t7),o=l||r.size||"1em",_;return r.className&&(_=r.className),e.className&&(_=(_?_+" ":"")+e.className),ui.createElement("svg",ib({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,d,{className:_,style:ab(ab({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),h&&ui.createElement("title",null,h),e.children)};return tI!==void 0?ui.createElement(tI.Consumer,null,r=>t(r)):t(tN)}function l7(e){return kw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"},child:[]}]})(e)}function u7(){return $.jsx("div",{className:"bg-black ",children:$.jsxs("div",{className:"flex flex-col items-center justify-center text-sm max-md:px-4 py-20 h-screen",children:[$.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-linear-to-r from-white to-gray-500 bg-clip-text text-transparent",children:"404 Not Found"}),$.jsx("div",{className:"h-px w-80 rounded bg-linear-to-r from-gray-400 to-gray-800 my-5 md:my-7"}),$.jsx("p",{className:"md:text-xl text-gray-400 max-w-lg text-center",children:"The page you are looking for does not exist or has been moved."}),$.jsxs("a",{href:"/",className:"group flex items-center gap-1 bg-white hover:bg-gray-200 px-7 py-2.5 text-gray-800 rounded-full mt-10 font-medium active:scale-95 transition-all",children:["Back to Home",$.jsx(l7,{size:24,className:"group-hover:translate-x-1 transition-all text-[#1E1E1E]"})]})]})})}const c7="/assets/home-car-Bz9tbx5y.png";function h7(){return $.jsxs("div",{className:" w-full  relative p-10",children:[$.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`
            linear-gradient(to right, #FFFFFF 1px, transparent 1px),
            linear-gradient(to bottom, #FFFFFF 1px, transparent 1px),
            radial-gradient(circle 800px at 50% 100%, #bbe5c8, transparent)
          `,backgroundSize:"96px 64px, 96px 64px, 100% 100%"}}),$.jsxs("div",{className:"relative z-0 w-full max-w-[750px] mx-auto text-center",children:[$.jsx("div",{className:"inline-flex items-center gap-5 px-5 py-2 rounded-full bg-[#1CA9A6]/12 mb-5",children:$.jsx("span",{className:"text-[#1CA9A6] text-sm font-medium",children:"Advanced EV Calculation Tool"})}),$.jsx("h1",{className:"text-primary text-5xl font-semibold leading-[120%]",children:"Calculate route plans for using electric vehicles"}),$.jsx("p",{className:"text-secondary-black text-lg leading-[150%] mt-6",children:"Plan your electric vehicle journey with precision. Calculate battery consumption, optimize routes, and find charging stations along the way."}),$.jsx(wy,{className:"mt-6",to:"/vechile",children:"Start New Calculation"})]}),$.jsx("div",{className:"relative z-10 w-full flex items-center justify-center",children:$.jsx("img",{src:c7,alt:"",className:"w-auto max-w-[1200px] object-contain"})})]})}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),nI=e=>{const t=f7(e);return t.charAt(0).toUpperCase()+t.slice(1)},nN=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),p7=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:h,iconNode:d,...o},_)=>A.createElement("svg",{ref:_,...m7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:nN("lucide",l),...!h&&!p7(o)&&{"aria-hidden":"true"},...o},[...d.map(([S,P])=>A.createElement(S,P)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=(e,t)=>{const r=A.forwardRef(({className:n,...l},h)=>A.createElement(g7,{ref:h,iconNode:t,className:nN(`lucide-${d7(nI(e))}`,`lucide-${e}`,n),...l}));return r.displayName=nI(e),r};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["path",{d:"M14.856 6H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.935",key:"lre1cr"}],["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M5.14 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2.936",key:"13q5k0"}]],iN=da("battery-charging",y7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M10 10v4",key:"1mb2ec"}],["path",{d:"M14 10v4",key:"1nt88p"}],["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M6 10v4",key:"1n77qd"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],_7=da("battery-full",v7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],b7=da("battery",x7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],S7=da("calendar",w7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],aN=da("car",P7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C7=da("circle-check-big",E7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],d_=da("clock",T7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],k7=da("download",M7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I7=da("eye",A7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],oN=da("gauge",O7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],D7=da("loader-circle",L7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sN=da("map-pin",R7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],z7=da("move-right",j7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],F7=da("navigation",N7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],V7=da("pin",B7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],U7=da("plus",$7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],lN=da("route",q7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],W7=da("search",G7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Z7=da("send",H7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],uN=da("trending-up",K7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Y7=da("wrench",X7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],J7=da("x",Q7);function eH(e){return kw({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M271.653 1023.192c-8.685 0-17.573-3.432-24.238-10.097-13.33-13.33-13.33-35.144 0-48.474L703.67 508.163 254.08 58.573c-13.33-13.331-13.33-35.145 0-48.475 13.33-13.33 35.143-13.33 48.473 0L776.38 483.925c13.33 13.33 13.33 35.143 0 48.473l-480.492 480.694c-6.665 6.665-15.551 10.099-24.236 10.099z"},child:[]}]})(e)}function tH({onSuccess:e,onError:t}){const r=Mc();return ig({mutationKey:["createVehicle"],mutationFn:async n=>{const l=await r.post("/vehicles/",n);return l==null?void 0:l.data},onSuccess:e,onError:t})}var $_=e=>e.type==="checkbox",km=e=>e instanceof Date,Xs=e=>e==null;const cN=e=>typeof e=="object";var Ia=e=>!Xs(e)&&!Array.isArray(e)&&cN(e)&&!km(e),rH=e=>Ia(e)&&e.target?$_(e.target)?e.target.checked:e.target.value:e,nH=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,iH=(e,t)=>e.has(nH(t)),aH=e=>{const t=e.constructor&&e.constructor.prototype;return Ia(t)&&t.hasOwnProperty("isPrototypeOf")},wC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function mo(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(wC&&(e instanceof Blob||n))&&(r||Ia(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!aH(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=mo(e[l]));else return e;return t}var Aw=e=>/^\w*$/.test(e),va=e=>e===void 0,SC=e=>Array.isArray(e)?e.filter(Boolean):[],PC=e=>SC(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ar=(e,t,r)=>{if(!t||!Ia(e))return r;const n=(Aw(t)?[t]:PC(t)).reduce((l,h)=>Xs(l)?l:l[h],e);return va(n)||n===e?va(e[t])?r:e[t]:n},hh=e=>typeof e=="boolean",Fi=(e,t,r)=>{let n=-1;const l=Aw(t)?[t]:PC(t),h=l.length,d=h-1;for(;++n<h;){const o=l[n];let _=r;if(n!==d){const S=e[o];_=Ia(S)||Array.isArray(S)?S:isNaN(+l[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=_,e=e[o]}};const iI={BLUR:"blur",FOCUS_OUT:"focusout"},yc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fd={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},oH=ui.createContext(null);oH.displayName="HookFormContext";var sH=(e,t,r,n=!0)=>{const l={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(l,h,{get:()=>{const d=h;return t._proxyFormState[d]!==yc.all&&(t._proxyFormState[d]=!n||yc.all),e[d]}});return l};const lH=typeof window<"u"?ui.useLayoutEffect:ui.useEffect;var Tl=e=>typeof e=="string",uH=(e,t,r,n,l)=>Tl(e)?(n&&t.watch.add(e),Ar(r,e,l)):Array.isArray(e)?e.map(h=>(n&&t.watch.add(h),Ar(r,h))):(n&&(t.watchAll=!0),r),Z2=e=>Xs(e)||!cN(e);function rp(e,t,r=new WeakSet){if(Z2(e)||Z2(t))return Object.is(e,t);if(km(e)&&km(t))return e.getTime()===t.getTime();const n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const h of n){const d=e[h];if(!l.includes(h))return!1;if(h!=="ref"){const o=t[h];if(km(d)&&km(o)||Ia(d)&&Ia(o)||Array.isArray(d)&&Array.isArray(o)?!rp(d,o,r):!Object.is(d,o))return!1}}return!0}var cH=(e,t,r,n,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:l||!0}}:{},e_=e=>Array.isArray(e)?e:[e],aI=()=>{let e=[];return{get observers(){return e},next:l=>{for(const h of e)h.next&&h.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(h=>h!==l)}}),unsubscribe:()=>{e=[]}}};function hN(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const l=e[n],h=t[n];if(l&&Ia(l)&&h){const d=hN(l,h);Ia(d)&&(r[n]=d)}else e[n]&&(r[n]=h)}return r}var vs=e=>Ia(e)&&!Object.keys(e).length,EC=e=>e.type==="file",vc=e=>typeof e=="function",ob=e=>{if(!wC)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},dN=e=>e.type==="select-multiple",CC=e=>e.type==="radio",hH=e=>CC(e)||$_(e),TS=e=>ob(e)&&e.isConnected;function dH(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=va(e)?n++:e[t[n++]];return e}function fH(e){for(const t in e)if(e.hasOwnProperty(t)&&!va(e[t]))return!1;return!0}function ka(e,t){const r=Array.isArray(t)?t:Aw(t)?[t]:PC(t),n=r.length===1?e:dH(e,r),l=r.length-1,h=r[l];return n&&delete n[h],l!==0&&(Ia(n)&&vs(n)||Array.isArray(n)&&fH(n))&&ka(e,r.slice(0,-1)),e}var pH=e=>{for(const t in e)if(vc(e[t]))return!0;return!1};function fN(e){return Array.isArray(e)||Ia(e)&&!pH(e)}function K2(e,t={}){for(const r in e){const n=e[r];fN(n)?(t[r]=Array.isArray(n)?[]:{},K2(n,t[r])):va(n)||(t[r]=!0)}return t}function ey(e,t,r){r||(r=K2(t));for(const n in e){const l=e[n];if(fN(l))va(t)||Z2(r[n])?r[n]=K2(l,Array.isArray(l)?[]:{}):ey(l,Xs(t)?{}:t[n],r[n]);else{const h=t[n];r[n]=!rp(l,h)}}return r}const oI={value:!1,isValid:!1},sI={value:!0,isValid:!0};var pN=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!va(e[0].attributes.value)?va(e[0].value)||e[0].value===""?sI:{value:e[0].value,isValid:!0}:sI:oI}return oI},mN=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>va(e)?e:t?e===""?NaN:e&&+e:r&&Tl(e)?new Date(e):n?n(e):e;const lI={isValid:!1,value:null};var gN=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,lI):lI;function uI(e){const t=e.ref;return EC(t)?t.files:CC(t)?gN(e.refs).value:dN(t)?[...t.selectedOptions].map(({value:r})=>r):$_(t)?pN(e.refs).value:mN(va(t.value)?e.ref.value:t.value,e)}var mH=(e,t,r,n)=>{const l={};for(const h of e){const d=Ar(t,h);d&&Fi(l,h,d._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:n}},sb=e=>e instanceof RegExp,jv=e=>va(e)?e:sb(e)?e.source:Ia(e)?sb(e.value)?e.value.source:e.value:e,cI=e=>({isOnSubmit:!e||e===yc.onSubmit,isOnBlur:e===yc.onBlur,isOnChange:e===yc.onChange,isOnAll:e===yc.all,isOnTouch:e===yc.onTouched});const hI="AsyncFunction";var gH=e=>!!e&&!!e.validate&&!!(vc(e.validate)&&e.validate.constructor.name===hI||Ia(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===hI)),yH=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),dI=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const t_=(e,t,r,n)=>{for(const l of r||Object.keys(e)){const h=Ar(e,l);if(h){const{_f:d,...o}=h;if(d){if(d.refs&&d.refs[0]&&t(d.refs[0],l)&&!n)return!0;if(d.ref&&t(d.ref,d.name)&&!n)return!0;if(t_(o,t))break}else if(Ia(o)&&t_(o,t))break}}};function fI(e,t,r){const n=Ar(e,r);if(n||Aw(r))return{error:n,name:r};const l=r.split(".");for(;l.length;){const h=l.join("."),d=Ar(t,h),o=Ar(e,h);if(d&&!Array.isArray(d)&&r!==h)return{name:r};if(o&&o.type)return{name:h,error:o};if(o&&o.root&&o.root.type)return{name:`${h}.root`,error:o.root};l.pop()}return{name:r}}var vH=(e,t,r,n)=>{r(e);const{name:l,...h}=e;return vs(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(d=>t[d]===(!n||yc.all))},_H=(e,t,r)=>!e||!t||e===t||e_(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),xH=(e,t,r,n,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?n.isOnBlur:l.isOnBlur)?!e:(r?n.isOnChange:l.isOnChange)?e:!0,bH=(e,t)=>!SC(Ar(e,t)).length&&ka(e,t),wH=(e,t,r)=>{const n=e_(Ar(e,r));return Fi(n,"root",t[r]),Fi(e,r,n),e};function pI(e,t,r="validate"){if(Tl(e)||Array.isArray(e)&&e.every(Tl)||hh(e)&&!e)return{type:r,message:Tl(e)?e:"",ref:t}}var Hg=e=>Ia(e)&&!sb(e)?e:{value:e,message:""},mI=async(e,t,r,n,l,h)=>{const{ref:d,refs:o,required:_,maxLength:S,minLength:P,min:M,max:O,pattern:z,validate:B,name:F,valueAsNumber:L,mount:K}=e._f,Q=Ar(r,F);if(!K||t.has(F))return{};const re=o?o[0]:d,te=Ne=>{l&&re.reportValidity&&(re.setCustomValidity(hh(Ne)?"":Ne||""),re.reportValidity())},ae={},he=CC(d),ne=$_(d),be=he||ne,xe=(L||EC(d))&&va(d.value)&&va(Q)||ob(d)&&d.value===""||Q===""||Array.isArray(Q)&&!Q.length,$e=cH.bind(null,F,n,ae),Ee=(Ne,Xe,ut,pt=fd.maxLength,gt=fd.minLength)=>{const wt=Ne?Xe:ut;ae[F]={type:Ne?pt:gt,message:wt,ref:d,...$e(Ne?pt:gt,wt)}};if(h?!Array.isArray(Q)||!Q.length:_&&(!be&&(xe||Xs(Q))||hh(Q)&&!Q||ne&&!pN(o).isValid||he&&!gN(o).isValid)){const{value:Ne,message:Xe}=Tl(_)?{value:!!_,message:_}:Hg(_);if(Ne&&(ae[F]={type:fd.required,message:Xe,ref:re,...$e(fd.required,Xe)},!n))return te(Xe),ae}if(!xe&&(!Xs(M)||!Xs(O))){let Ne,Xe;const ut=Hg(O),pt=Hg(M);if(!Xs(Q)&&!isNaN(Q)){const gt=d.valueAsNumber||Q&&+Q;Xs(ut.value)||(Ne=gt>ut.value),Xs(pt.value)||(Xe=gt<pt.value)}else{const gt=d.valueAsDate||new Date(Q),wt=yt=>new Date(new Date().toDateString()+" "+yt),je=d.type=="time",Qe=d.type=="week";Tl(ut.value)&&Q&&(Ne=je?wt(Q)>wt(ut.value):Qe?Q>ut.value:gt>new Date(ut.value)),Tl(pt.value)&&Q&&(Xe=je?wt(Q)<wt(pt.value):Qe?Q<pt.value:gt<new Date(pt.value))}if((Ne||Xe)&&(Ee(!!Ne,ut.message,pt.message,fd.max,fd.min),!n))return te(ae[F].message),ae}if((S||P)&&!xe&&(Tl(Q)||h&&Array.isArray(Q))){const Ne=Hg(S),Xe=Hg(P),ut=!Xs(Ne.value)&&Q.length>+Ne.value,pt=!Xs(Xe.value)&&Q.length<+Xe.value;if((ut||pt)&&(Ee(ut,Ne.message,Xe.message),!n))return te(ae[F].message),ae}if(z&&!xe&&Tl(Q)){const{value:Ne,message:Xe}=Hg(z);if(sb(Ne)&&!Q.match(Ne)&&(ae[F]={type:fd.pattern,message:Xe,ref:d,...$e(fd.pattern,Xe)},!n))return te(Xe),ae}if(B){if(vc(B)){const Ne=await B(Q,r),Xe=pI(Ne,re);if(Xe&&(ae[F]={...Xe,...$e(fd.validate,Xe.message)},!n))return te(Xe.message),ae}else if(Ia(B)){let Ne={};for(const Xe in B){if(!vs(Ne)&&!n)break;const ut=pI(await B[Xe](Q,r),re,Xe);ut&&(Ne={...ut,...$e(Xe,ut.message)},te(ut.message),n&&(ae[F]=Ne))}if(!vs(Ne)&&(ae[F]={ref:re,...Ne},!n))return ae}}return te(!0),ae};const SH={mode:yc.onSubmit,reValidateMode:yc.onChange,shouldFocusError:!0};function PH(e={}){let t={...SH,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},l=Ia(t.defaultValues)||Ia(t.values)?mo(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:mo(l),d={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},_,S=0;const P={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let M={...P};const O={array:aI(),state:aI()},z=t.criteriaMode===yc.all,B=Be=>rt=>{clearTimeout(S),S=setTimeout(Be,rt)},F=async Be=>{if(!t.disabled&&(P.isValid||M.isValid||Be)){const rt=t.resolver?vs((await ne()).errors):await xe(n,!0);rt!==r.isValid&&O.state.next({isValid:rt})}},L=(Be,rt)=>{!t.disabled&&(P.isValidating||P.validatingFields||M.isValidating||M.validatingFields)&&((Be||Array.from(o.mount)).forEach(bt=>{bt&&(rt?Fi(r.validatingFields,bt,rt):ka(r.validatingFields,bt))}),O.state.next({validatingFields:r.validatingFields,isValidating:!vs(r.validatingFields)}))},K=(Be,rt=[],bt,rr,Wt=!0,zt=!0)=>{if(rr&&bt&&!t.disabled){if(d.action=!0,zt&&Array.isArray(Ar(n,Be))){const ze=bt(Ar(n,Be),rr.argA,rr.argB);Wt&&Fi(n,Be,ze)}if(zt&&Array.isArray(Ar(r.errors,Be))){const ze=bt(Ar(r.errors,Be),rr.argA,rr.argB);Wt&&Fi(r.errors,Be,ze),bH(r.errors,Be)}if((P.touchedFields||M.touchedFields)&&zt&&Array.isArray(Ar(r.touchedFields,Be))){const ze=bt(Ar(r.touchedFields,Be),rr.argA,rr.argB);Wt&&Fi(r.touchedFields,Be,ze)}(P.dirtyFields||M.dirtyFields)&&(r.dirtyFields=ey(l,h)),O.state.next({name:Be,isDirty:Ee(Be,rt),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fi(h,Be,rt)},Q=(Be,rt)=>{Fi(r.errors,Be,rt),O.state.next({errors:r.errors})},re=Be=>{r.errors=Be,O.state.next({errors:r.errors,isValid:!1})},te=(Be,rt,bt,rr)=>{const Wt=Ar(n,Be);if(Wt){const zt=Ar(h,Be,va(bt)?Ar(l,Be):bt);va(zt)||rr&&rr.defaultChecked||rt?Fi(h,Be,rt?zt:uI(Wt._f)):ut(Be,zt),d.mount&&!d.action&&F()}},ae=(Be,rt,bt,rr,Wt)=>{let zt=!1,ze=!1;const ue={name:Be};if(!t.disabled){if(!bt||rr){(P.isDirty||M.isDirty)&&(ze=r.isDirty,r.isDirty=ue.isDirty=Ee(),zt=ze!==ue.isDirty);const le=rp(Ar(l,Be),rt);ze=!!Ar(r.dirtyFields,Be),le?ka(r.dirtyFields,Be):Fi(r.dirtyFields,Be,!0),ue.dirtyFields=r.dirtyFields,zt=zt||(P.dirtyFields||M.dirtyFields)&&ze!==!le}if(bt){const le=Ar(r.touchedFields,Be);le||(Fi(r.touchedFields,Be,bt),ue.touchedFields=r.touchedFields,zt=zt||(P.touchedFields||M.touchedFields)&&le!==bt)}zt&&Wt&&O.state.next(ue)}return zt?ue:{}},he=(Be,rt,bt,rr)=>{const Wt=Ar(r.errors,Be),zt=(P.isValid||M.isValid)&&hh(rt)&&r.isValid!==rt;if(t.delayError&&bt?(_=B(()=>Q(Be,bt)),_(t.delayError)):(clearTimeout(S),_=null,bt?Fi(r.errors,Be,bt):ka(r.errors,Be)),(bt?!rp(Wt,bt):Wt)||!vs(rr)||zt){const ze={...rr,...zt&&hh(rt)?{isValid:rt}:{},errors:r.errors,name:Be};r={...r,...ze},O.state.next(ze)}},ne=async Be=>{L(Be,!0);const rt=await t.resolver(h,t.context,mH(Be||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return L(Be),rt},be=async Be=>{const{errors:rt}=await ne(Be);if(Be)for(const bt of Be){const rr=Ar(rt,bt);rr?Fi(r.errors,bt,rr):ka(r.errors,bt)}else r.errors=rt;return rt},xe=async(Be,rt,bt={valid:!0})=>{for(const rr in Be){const Wt=Be[rr];if(Wt){const{_f:zt,...ze}=Wt;if(zt){const ue=o.array.has(zt.name),le=Wt._f&&gH(Wt._f);le&&P.validatingFields&&L([zt.name],!0);const pe=await mI(Wt,o.disabled,h,z,t.shouldUseNativeValidation&&!rt,ue);if(le&&P.validatingFields&&L([zt.name]),pe[zt.name]&&(bt.valid=!1,rt))break;!rt&&(Ar(pe,zt.name)?ue?wH(r.errors,pe,zt.name):Fi(r.errors,zt.name,pe[zt.name]):ka(r.errors,zt.name))}!vs(ze)&&await xe(ze,rt,bt)}}return bt.valid},$e=()=>{for(const Be of o.unMount){const rt=Ar(n,Be);rt&&(rt._f.refs?rt._f.refs.every(bt=>!TS(bt)):!TS(rt._f.ref))&&Ft(Be)}o.unMount=new Set},Ee=(Be,rt)=>!t.disabled&&(Be&&rt&&Fi(h,Be,rt),!rp(yt(),l)),Ne=(Be,rt,bt)=>uH(Be,o,{...d.mount?h:va(rt)?l:Tl(Be)?{[Be]:rt}:rt},bt,rt),Xe=Be=>SC(Ar(d.mount?h:l,Be,t.shouldUnregister?Ar(l,Be,[]):[])),ut=(Be,rt,bt={})=>{const rr=Ar(n,Be);let Wt=rt;if(rr){const zt=rr._f;zt&&(!zt.disabled&&Fi(h,Be,mN(rt,zt)),Wt=ob(zt.ref)&&Xs(rt)?"":rt,dN(zt.ref)?[...zt.ref.options].forEach(ze=>ze.selected=Wt.includes(ze.value)):zt.refs?$_(zt.ref)?zt.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Wt)?ze.checked=!!Wt.find(ue=>ue===ze.value):ze.checked=Wt===ze.value||!!Wt)}):zt.refs.forEach(ze=>ze.checked=ze.value===Wt):EC(zt.ref)?zt.ref.value="":(zt.ref.value=Wt,zt.ref.type||O.state.next({name:Be,values:mo(h)})))}(bt.shouldDirty||bt.shouldTouch)&&ae(Be,Wt,bt.shouldTouch,bt.shouldDirty,!0),bt.shouldValidate&&Qe(Be)},pt=(Be,rt,bt)=>{for(const rr in rt){if(!rt.hasOwnProperty(rr))return;const Wt=rt[rr],zt=Be+"."+rr,ze=Ar(n,zt);(o.array.has(Be)||Ia(Wt)||ze&&!ze._f)&&!km(Wt)?pt(zt,Wt,bt):ut(zt,Wt,bt)}},gt=(Be,rt,bt={})=>{const rr=Ar(n,Be),Wt=o.array.has(Be),zt=mo(rt);Fi(h,Be,zt),Wt?(O.array.next({name:Be,values:mo(h)}),(P.isDirty||P.dirtyFields||M.isDirty||M.dirtyFields)&&bt.shouldDirty&&O.state.next({name:Be,dirtyFields:ey(l,h),isDirty:Ee(Be,zt)})):rr&&!rr._f&&!Xs(zt)?pt(Be,zt,bt):ut(Be,zt,bt),dI(Be,o)&&O.state.next({...r,name:Be}),O.state.next({name:d.mount?Be:void 0,values:mo(h)})},wt=async Be=>{d.mount=!0;const rt=Be.target;let bt=rt.name,rr=!0;const Wt=Ar(n,bt),zt=le=>{rr=Number.isNaN(le)||km(le)&&isNaN(le.getTime())||rp(le,Ar(h,bt,le))},ze=cI(t.mode),ue=cI(t.reValidateMode);if(Wt){let le,pe;const Me=rt.type?uI(Wt._f):rH(Be),Ae=Be.type===iI.BLUR||Be.type===iI.FOCUS_OUT,Je=!yH(Wt._f)&&!t.resolver&&!Ar(r.errors,bt)&&!Wt._f.deps||xH(Ae,Ar(r.touchedFields,bt),r.isSubmitted,ue,ze),Ze=dI(bt,o,Ae);Fi(h,bt,Me),Ae?(!rt||!rt.readOnly)&&(Wt._f.onBlur&&Wt._f.onBlur(Be),_&&_(0)):Wt._f.onChange&&Wt._f.onChange(Be);const Ve=ae(bt,Me,Ae),it=!vs(Ve)||Ze;if(!Ae&&O.state.next({name:bt,type:Be.type,values:mo(h)}),Je)return(P.isValid||M.isValid)&&(t.mode==="onBlur"?Ae&&F():Ae||F()),it&&O.state.next({name:bt,...Ze?{}:Ve});if(!Ae&&Ze&&O.state.next({...r}),t.resolver){const{errors:At}=await ne([bt]);if(zt(Me),rr){const Pt=fI(r.errors,n,bt),Xt=fI(At,n,Pt.name||bt);le=Xt.error,bt=Xt.name,pe=vs(At)}}else L([bt],!0),le=(await mI(Wt,o.disabled,h,z,t.shouldUseNativeValidation))[bt],L([bt]),zt(Me),rr&&(le?pe=!1:(P.isValid||M.isValid)&&(pe=await xe(n,!0)));rr&&(Wt._f.deps&&(!Array.isArray(Wt._f.deps)||Wt._f.deps.length>0)&&Qe(Wt._f.deps),he(bt,pe,le,Ve))}},je=(Be,rt)=>{if(Ar(r.errors,rt)&&Be.focus)return Be.focus(),1},Qe=async(Be,rt={})=>{let bt,rr;const Wt=e_(Be);if(t.resolver){const zt=await be(va(Be)?Be:Wt);bt=vs(zt),rr=Be?!Wt.some(ze=>Ar(zt,ze)):bt}else Be?(rr=(await Promise.all(Wt.map(async zt=>{const ze=Ar(n,zt);return await xe(ze&&ze._f?{[zt]:ze}:ze)}))).every(Boolean),!(!rr&&!r.isValid)&&F()):rr=bt=await xe(n);return O.state.next({...!Tl(Be)||(P.isValid||M.isValid)&&bt!==r.isValid?{}:{name:Be},...t.resolver||!Be?{isValid:bt}:{},errors:r.errors}),rt.shouldFocus&&!rr&&t_(n,je,Be?Wt:o.mount),rr},yt=(Be,rt)=>{let bt={...d.mount?h:l};return rt&&(bt=hN(rt.dirtyFields?r.dirtyFields:r.touchedFields,bt)),va(Be)?bt:Tl(Be)?Ar(bt,Be):Be.map(rr=>Ar(bt,rr))},Oe=(Be,rt)=>({invalid:!!Ar((rt||r).errors,Be),isDirty:!!Ar((rt||r).dirtyFields,Be),error:Ar((rt||r).errors,Be),isValidating:!!Ar(r.validatingFields,Be),isTouched:!!Ar((rt||r).touchedFields,Be)}),et=Be=>{Be&&e_(Be).forEach(rt=>ka(r.errors,rt)),O.state.next({errors:Be?r.errors:{}})},Mt=(Be,rt,bt)=>{const rr=(Ar(n,Be,{_f:{}})._f||{}).ref,Wt=Ar(r.errors,Be)||{},{ref:zt,message:ze,type:ue,...le}=Wt;Fi(r.errors,Be,{...le,...rt,ref:rr}),O.state.next({name:Be,errors:r.errors,isValid:!1}),bt&&bt.shouldFocus&&rr&&rr.focus&&rr.focus()},Dt=(Be,rt)=>vc(Be)?O.state.subscribe({next:bt=>"values"in bt&&Be(Ne(void 0,rt),bt)}):Ne(Be,rt,!0),Ke=Be=>O.state.subscribe({next:rt=>{_H(Be.name,rt.name,Be.exact)&&vH(rt,Be.formState||P,Wr,Be.reRenderRoot)&&Be.callback({values:{...h},...r,...rt,defaultValues:l})}}).unsubscribe,tr=Be=>(d.mount=!0,M={...M,...Be.formState},Ke({...Be,formState:M})),Ft=(Be,rt={})=>{for(const bt of Be?e_(Be):o.mount)o.mount.delete(bt),o.array.delete(bt),rt.keepValue||(ka(n,bt),ka(h,bt)),!rt.keepError&&ka(r.errors,bt),!rt.keepDirty&&ka(r.dirtyFields,bt),!rt.keepTouched&&ka(r.touchedFields,bt),!rt.keepIsValidating&&ka(r.validatingFields,bt),!t.shouldUnregister&&!rt.keepDefaultValue&&ka(l,bt);O.state.next({values:mo(h)}),O.state.next({...r,...rt.keepDirty?{isDirty:Ee()}:{}}),!rt.keepIsValid&&F()},$t=({disabled:Be,name:rt})=>{(hh(Be)&&d.mount||Be||o.disabled.has(rt))&&(Be?o.disabled.add(rt):o.disabled.delete(rt))},ct=(Be,rt={})=>{let bt=Ar(n,Be);const rr=hh(rt.disabled)||hh(t.disabled);return Fi(n,Be,{...bt||{},_f:{...bt&&bt._f?bt._f:{ref:{name:Be}},name:Be,mount:!0,...rt}}),o.mount.add(Be),bt?$t({disabled:hh(rt.disabled)?rt.disabled:t.disabled,name:Be}):te(Be,!0,rt.value),{...rr?{disabled:rt.disabled||t.disabled}:{},...t.progressive?{required:!!rt.required,min:jv(rt.min),max:jv(rt.max),minLength:jv(rt.minLength),maxLength:jv(rt.maxLength),pattern:jv(rt.pattern)}:{},name:Be,onChange:wt,onBlur:wt,ref:Wt=>{if(Wt){ct(Be,rt),bt=Ar(n,Be);const zt=va(Wt.value)&&Wt.querySelectorAll&&Wt.querySelectorAll("input,select,textarea")[0]||Wt,ze=hH(zt),ue=bt._f.refs||[];if(ze?ue.find(le=>le===zt):zt===bt._f.ref)return;Fi(n,Be,{_f:{...bt._f,...ze?{refs:[...ue.filter(TS),zt,...Array.isArray(Ar(l,Be))?[{}]:[]],ref:{type:zt.type,name:Be}}:{ref:zt}}}),te(Be,!1,void 0,zt)}else bt=Ar(n,Be,{}),bt._f&&(bt._f.mount=!1),(t.shouldUnregister||rt.shouldUnregister)&&!(iH(o.array,Be)&&d.action)&&o.unMount.add(Be)}}},Lt=()=>t.shouldFocusError&&t_(n,je,o.mount),ir=Be=>{hh(Be)&&(O.state.next({disabled:Be}),t_(n,(rt,bt)=>{const rr=Ar(n,bt);rr&&(rt.disabled=rr._f.disabled||Be,Array.isArray(rr._f.refs)&&rr._f.refs.forEach(Wt=>{Wt.disabled=rr._f.disabled||Be}))},0,!1))},St=(Be,rt)=>async bt=>{let rr;bt&&(bt.preventDefault&&bt.preventDefault(),bt.persist&&bt.persist());let Wt=mo(h);if(O.state.next({isSubmitting:!0}),t.resolver){const{errors:zt,values:ze}=await ne();r.errors=zt,Wt=mo(ze)}else await xe(n);if(o.disabled.size)for(const zt of o.disabled)ka(Wt,zt);if(ka(r.errors,"root"),vs(r.errors)){O.state.next({errors:{}});try{await Be(Wt,bt)}catch(zt){rr=zt}}else rt&&await rt({...r.errors},bt),Lt(),setTimeout(Lt);if(O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vs(r.errors)&&!rr,submitCount:r.submitCount+1,errors:r.errors}),rr)throw rr},Gr=(Be,rt={})=>{Ar(n,Be)&&(va(rt.defaultValue)?gt(Be,mo(Ar(l,Be))):(gt(Be,rt.defaultValue),Fi(l,Be,mo(rt.defaultValue))),rt.keepTouched||ka(r.touchedFields,Be),rt.keepDirty||(ka(r.dirtyFields,Be),r.isDirty=rt.defaultValue?Ee(Be,mo(Ar(l,Be))):Ee()),rt.keepError||(ka(r.errors,Be),P.isValid&&F()),O.state.next({...r}))},Tr=(Be,rt={})=>{const bt=Be?mo(Be):l,rr=mo(bt),Wt=vs(Be),zt=Wt?l:rr;if(rt.keepDefaultValues||(l=bt),!rt.keepValues){if(rt.keepDirtyValues){const ze=new Set([...o.mount,...Object.keys(ey(l,h))]);for(const ue of Array.from(ze))Ar(r.dirtyFields,ue)?Fi(zt,ue,Ar(h,ue)):gt(ue,Ar(zt,ue))}else{if(wC&&va(Be))for(const ze of o.mount){const ue=Ar(n,ze);if(ue&&ue._f){const le=Array.isArray(ue._f.refs)?ue._f.refs[0]:ue._f.ref;if(ob(le)){const pe=le.closest("form");if(pe){pe.reset();break}}}}if(rt.keepFieldsRef)for(const ze of o.mount)gt(ze,Ar(zt,ze));else n={}}h=t.shouldUnregister?rt.keepDefaultValues?mo(l):{}:mo(zt),O.array.next({values:{...zt}}),O.state.next({values:{...zt}})}o={mount:rt.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!P.isValid||!!rt.keepIsValid||!!rt.keepDirtyValues||!t.shouldUnregister&&!vs(zt),d.watch=!!t.shouldUnregister,d.action=!1,rt.keepErrors||(r.errors={}),O.state.next({submitCount:rt.keepSubmitCount?r.submitCount:0,isDirty:Wt?!1:rt.keepDirty?r.isDirty:!!(rt.keepDefaultValues&&!rp(Be,l)),isSubmitted:rt.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Wt?{}:rt.keepDirtyValues?rt.keepDefaultValues&&h?ey(l,h):r.dirtyFields:rt.keepDefaultValues&&Be?ey(l,Be):rt.keepDirty?r.dirtyFields:{},touchedFields:rt.keepTouched?r.touchedFields:{},errors:rt.keepErrors?r.errors:{},isSubmitSuccessful:rt.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},wr=(Be,rt)=>Tr(vc(Be)?Be(h):Be,rt),tn=(Be,rt={})=>{const bt=Ar(n,Be),rr=bt&&bt._f;if(rr){const Wt=rr.refs?rr.refs[0]:rr.ref;Wt.focus&&(Wt.focus(),rt.shouldSelect&&vc(Wt.select)&&Wt.select())}},Wr=Be=>{r={...r,...Be}},Ii={control:{register:ct,unregister:Ft,getFieldState:Oe,handleSubmit:St,setError:Mt,_subscribe:Ke,_runSchema:ne,_focusError:Lt,_getWatch:Ne,_getDirty:Ee,_setValid:F,_setFieldArray:K,_setDisabledField:$t,_setErrors:re,_getFieldArray:Xe,_reset:Tr,_resetDefaultValues:()=>vc(t.defaultValues)&&t.defaultValues().then(Be=>{wr(Be,t.resetOptions),O.state.next({isLoading:!1})}),_removeUnmounted:$e,_disableForm:ir,_subjects:O,_proxyFormState:P,get _fields(){return n},get _formValues(){return h},get _state(){return d},set _state(Be){d=Be},get _defaultValues(){return l},get _names(){return o},set _names(Be){o=Be},get _formState(){return r},get _options(){return t},set _options(Be){t={...t,...Be}}},subscribe:tr,trigger:Qe,register:ct,handleSubmit:St,watch:Dt,setValue:gt,getValues:yt,reset:wr,resetField:Gr,clearErrors:et,unregister:Ft,setError:Mt,setFocus:tn,getFieldState:Oe};return{...Ii,formControl:Ii}}function U_(e={}){const t=ui.useRef(void 0),r=ui.useRef(void 0),[n,l]=ui.useState({isDirty:!1,isValidating:!1,isLoading:vc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!vc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...o}=PH(e);t.current={...o,formState:n}}const h=t.current.control;return h._options=e,lH(()=>{const d=h._subscribe({formState:h._proxyFormState,callback:()=>l({...h._formState}),reRenderRoot:!0});return l(o=>({...o,isReady:!0})),h._formState.isReady=!0,d},[h]),ui.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),ui.useEffect(()=>{e.mode&&(h._options.mode=e.mode),e.reValidateMode&&(h._options.reValidateMode=e.reValidateMode)},[h,e.mode,e.reValidateMode]),ui.useEffect(()=>{e.errors&&(h._setErrors(e.errors),h._focusError())},[h,e.errors]),ui.useEffect(()=>{e.shouldUnregister&&h._subjects.state.next({values:h._getWatch()})},[h,e.shouldUnregister]),ui.useEffect(()=>{if(h._proxyFormState.isDirty){const d=h._getDirty();d!==n.isDirty&&h._subjects.state.next({isDirty:d})}},[h,n.isDirty]),ui.useEffect(()=>{var d;e.values&&!rp(e.values,r.current)?(h._reset(e.values,{keepFieldsRef:!0,...h._options.resetOptions}),!((d=h._options.resetOptions)===null||d===void 0)&&d.keepIsValid||h._setValid(),r.current=e.values,l(o=>({...o}))):h._resetDefaultValues()},[h,e.values]),ui.useEffect(()=>{h._state.mount||(h._setValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),t.current.formState=sH(n,h),t.current}function EH({onClose:e}){const t=dw(),{register:r,handleSubmit:n,watch:l,setError:h,clearErrors:d,formState:{errors:o}}=U_({defaultValues:{vehicleName:"",vehicleType:"",powerKW:"",weightKg:"",frontalArea:"",dragCoefficient:"",estimatedRange:"",regenerationEfficiency:"",nominalBatteryCapacity:"",usableBatteryCapacity:"",nominalVoltage:"",maxChargeCurrent:"",upperSOC:"",lowerSOC:"",vehiclePhoto:void 0}}),{mutate:_,isPending:S}=tH({onSuccess:L=>{pu.success((L==null?void 0:L.message)||"Vehicle created successfully!"),t.invalidateQueries(["vehicles"]),e()},onError:L=>{var Q;const K=(Q=L==null?void 0:L.response)==null?void 0:Q.data;if(d(),K&&typeof K=="object"){const re={name:"vehicleName",vehicle_type:"vehicleType",power_kw:"powerKW",weight_kg:"weightKg",frontal_area_m2:"frontalArea",drag_coefficient:"dragCoefficient",estimated_range_km:"estimatedRange",regeneration_efficiency:"regenerationEfficiency",nominal_battery_capacity_kwh:"nominalBatteryCapacity",usable_battery_capacity_kwh:"usableBatteryCapacity",nominal_voltage_v:"nominalVoltage",max_charge_discharge_current_a:"maxChargeCurrent",upper_soc_limit:"upperSOC",lower_soc_limit:"lowerSOC",photo:"vehiclePhoto"};Object.entries(K).forEach(([te,ae])=>{const he=re[te]||te;let ne="";Array.isArray(ae)?ne=ae[0]:typeof ae=="string"&&(ne=ae),ne&&h(he,{type:"server",message:ne})})}}}),P=L=>{var re;const K=((re=L.vehiclePhoto)==null?void 0:re[0])||null,Q=new FormData;Q.append("name",L.vehicleName),Q.append("vehicle_type",L.vehicleType),Q.append("power_kw",L.powerKW),Q.append("weight_kg",L.weightKg),Q.append("frontal_area_m2",L.frontalArea),Q.append("drag_coefficient",L.dragCoefficient),Q.append("estimated_range_km",L.estimatedRange),Q.append("regeneration_efficiency",L.regenerationEfficiency),Q.append("nominal_battery_capacity_kwh",L.nominalBatteryCapacity),Q.append("usable_battery_capacity_kwh",L.usableBatteryCapacity),Q.append("nominal_voltage_v",L.nominalVoltage),Q.append("max_charge_discharge_current_a",L.maxChargeCurrent),Q.append("upper_soc_limit",L.upperSOC),Q.append("lower_soc_limit",L.lowerSOC),K&&Q.append("photo",K),_(Q)},M=l("vehiclePhoto"),O=M&&M.length>0,z=O?M[0].name:"",B=O?URL.createObjectURL(M[0]):null;ui.useEffect(()=>()=>{B&&URL.revokeObjectURL(B)},[B]);const F=[{value:"",label:"Select vehicle type"},{value:"car",label:"Car"},{value:"bike",label:"Bike"},{value:"bus",label:"Bus"},{value:"truck",label:"Truck"},{value:"other",label:"Other"}];return $.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[$.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>e(!1)}),$.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-h-[90vh] w-full max-w-4xl overflow-y-auto p-8 custom-scrollbar",children:[$.jsx("h2",{className:"text-2xl font-semibold",children:"Create New Vehicle"}),$.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Define physics parameters for a new vehicle profile."}),$.jsxs("form",{onSubmit:n(P),className:"mt-6 space-y-8",children:[$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Vehicle Parameters"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("input",{...r("vehicleName",{required:"Vehicle name is required"}),placeholder:"Vehicle Name",className:`border rounded-lg p-3 text-sm w-full ${o.vehicleName?"border-red-500":"border-gray-300"}`}),o.vehicleName&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehicleName.message})]}),$.jsxs("div",{children:[$.jsx("select",{...r("vehicleType",{required:"Vehicle type is required"}),className:`border rounded-lg p-3 text-sm w-full ${o.vehicleType?"border-red-500":"border-gray-300"}`,children:F.map(L=>$.jsx("option",{value:L.value,children:L.label},L.value))}),o.vehicleType&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehicleType.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("powerKW",{required:"Power is required"}),placeholder:"Power (KW)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.powerKW?"border-red-500":"border-gray-300"}`}),o.powerKW&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.powerKW.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("weightKg",{required:"Weight is required"}),placeholder:"Weight (kg)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.weightKg?"border-red-500":"border-gray-300"}`}),o.weightKg&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.weightKg.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("frontalArea",{required:"Frontal area is required"}),placeholder:"Frontal Area (m)",type:"number",step:"0.01",className:`border rounded-lg p-3 text-sm w-full ${o.frontalArea?"border-red-500":"border-gray-300"}`}),o.frontalArea&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.frontalArea.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("dragCoefficient",{required:"Drag coefficient is required"}),placeholder:"Aerodynamic Drag Coefficient",type:"number",step:"0.001",className:`border rounded-lg p-3 text-sm w-full ${o.dragCoefficient?"border-red-500":"border-gray-300"}`}),o.dragCoefficient&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.dragCoefficient.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("estimatedRange",{required:"Estimated range is required"}),placeholder:"Estimated Range (km)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.estimatedRange?"border-red-500":"border-gray-300"}`}),o.estimatedRange&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.estimatedRange.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("regenerationEfficiency",{required:"Regeneration efficiency is required"}),placeholder:"Regeneration Efficiency (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.regenerationEfficiency?"border-red-500":"border-gray-300"}`}),o.regenerationEfficiency&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.regenerationEfficiency.message})]})]})]}),$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Battery"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("input",{...r("nominalBatteryCapacity",{required:"Nominal capacity is required"}),placeholder:"Nominal Battery Capacity (kWh)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.nominalBatteryCapacity?"border-red-500":"border-gray-300"}`}),o.nominalBatteryCapacity&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.nominalBatteryCapacity.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("usableBatteryCapacity",{required:"Usable capacity is required"}),placeholder:"Usable Battery Capacity (kWh)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.usableBatteryCapacity?"border-red-500":"border-gray-300"}`}),o.usableBatteryCapacity&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.usableBatteryCapacity.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("nominalVoltage",{required:"Nominal voltage is required"}),placeholder:"Nominal Voltage (V)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.nominalVoltage?"border-red-500":"border-gray-300"}`}),o.nominalVoltage&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.nominalVoltage.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("maxChargeCurrent",{required:"Max current is required"}),placeholder:"Max Charge/Discharge Current (A)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.maxChargeCurrent?"border-red-500":"border-gray-300"}`}),o.maxChargeCurrent&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.maxChargeCurrent.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("upperSOC",{required:"Upper SOC is required"}),placeholder:"Upper SOC limit (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.upperSOC?"border-red-500":"border-gray-300"}`}),o.upperSOC&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.upperSOC.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("lowerSOC",{required:"Lower SOC is required"}),placeholder:"Lower SOC limit (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.lowerSOC?"border-red-500":"border-gray-300"}`}),o.lowerSOC&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.lowerSOC.message})]})]})]}),$.jsxs("div",{className:"w-full",children:[$.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Vehicle Photo Upload ",$.jsx("span",{className:"text-red-500",children:"*"})]}),$.jsxs("label",{htmlFor:"vehiclePhoto",className:`border border-dashed rounded-xl p-6 text-center w-full block cursor-pointer ${o.vehiclePhoto?"border-red-500":"border-gray-300"}`,children:[$.jsx("input",{type:"file",accept:"image/*",...r("vehiclePhoto",{required:"Vehicle photo is required",onChange:()=>d("vehiclePhoto")}),className:"hidden",id:"vehiclePhoto"}),$.jsx("span",{className:"cursor-pointer text-gray-600 text-sm",children:O?"Change Photo":"Click to upload photo"})]}),o.vehiclePhoto&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehiclePhoto.message}),O&&$.jsxs("div",{className:"mt-4",children:[$.jsxs("p",{className:"text-sm text-green-600 mb-2",children:["Uploaded: ",z]}),$.jsx("div",{className:"flex justify-center",children:$.jsx("img",{src:B,alt:"Vehicle preview",className:"max-h-64 rounded-lg shadow-md object-contain"})})]})]}),$.jsxs("div",{className:"flex justify-end gap-3",children:[$.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-5 py-2 border rounded-lg text-gray-600 cursor-pointer",children:"Cancel"}),$.jsx("button",{type:"submit",disabled:S,className:`px-6 py-2 rounded-lg text-white ${S?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 cursor-pointer"}`,children:S?"Creating...":"Create Vehicle"})]})]})]}),S&&$.jsx(gp,{})]})}function CH({onSuccess:e,onError:t,vehicleId:r}){const n=Mc();return ig({mutationKey:["updateVehicle"],mutationFn:async l=>{const h=await n.put(`/vehicles/${r}/`,l);return h==null?void 0:h.data},enabled:!!r,onSuccess:e,onError:t})}function TH({onSuccess:e,onError:t,vehicleId:r}){const n=Mc();return ig({mutationKey:["updateDefaultVehicle"],mutationFn:async l=>{const h=await n.post(`/vehicles/${r}/customize/`,l);return h==null?void 0:h.data},enabled:!!r,onSuccess:e,onError:t})}function MH({onClose:e,vehicle:t}){const r=dw(),{register:n,handleSubmit:l,watch:h}=U_({defaultValues:{vehicleName:(t==null?void 0:t.name)||"",vehicleType:(t==null?void 0:t.vehicle_type)||"",powerKW:(t==null?void 0:t.power_kw)||0,weightKg:(t==null?void 0:t.weight_kg)||0,frontalArea:(t==null?void 0:t.frontal_area_m2)||0,dragCoefficient:(t==null?void 0:t.drag_coefficient)||0,estimatedRange:(t==null?void 0:t.estimated_range_km)||0,regenerationEfficiency:(t==null?void 0:t.regeneration_efficiency)||0,nominalBatteryCapacity:(t==null?void 0:t.nominal_battery_capacity_kwh)||0,usableBatteryCapacity:(t==null?void 0:t.usable_battery_capacity_kwh)||0,nominalVoltage:(t==null?void 0:t.nominal_voltage_v)||0,maxChargeCurrent:(t==null?void 0:t.max_charge_discharge_current_a)||0,upperSOC:(t==null?void 0:t.upper_soc_limit)||0,lowerSOC:(t==null?void 0:t.lower_soc_limit)||0,vehiclePhoto:(t==null?void 0:t.photo)||null}}),{mutate:d,isPending:o}=CH({vehicleId:t==null?void 0:t.id,onSuccess:L=>{pu.success((L==null?void 0:L.message)||"Vehicle updated successfully!"),r.invalidateQueries(["vehicles"]),e()},onError:L=>{var K,Q;pu.error(((Q=(K=L==null?void 0:L.response)==null?void 0:K.data)==null?void 0:Q.message)||"Something went wrong!"),console.log(L)}}),{mutate:_,isPending:S}=TH({vehicleId:t==null?void 0:t.id,onSuccess:L=>{pu.success((L==null?void 0:L.message)||"Vehicle updated successfully!"),r.invalidateQueries(["vehicles"]),e()},onError:L=>{var K,Q;pu.error(((Q=(K=L==null?void 0:L.response)==null?void 0:K.data)==null?void 0:Q.message)||"Something went wrong!"),console.log(L)}}),P=L=>{const K={name:L==null?void 0:L.vehicleName,vehicle_type:L==null?void 0:L.vehicleType,power_kw:L==null?void 0:L.powerKW,weight_kg:L==null?void 0:L.weightKg,frontal_area_m2:L==null?void 0:L.frontalArea,drag_coefficient:L==null?void 0:L.dragCoefficient,estimated_range_km:L==null?void 0:L.estimatedRange,regeneration_efficiency:L==null?void 0:L.regenerationEfficiency,nominal_battery_capacity_kwh:L==null?void 0:L.nominalBatteryCapacity,usable_battery_capacity_kwh:L==null?void 0:L.usableBatteryCapacity,nominal_voltage_v:L==null?void 0:L.nominalVoltage,max_charge_discharge_current_a:L==null?void 0:L.maxChargeCurrent,upper_soc_limit:L==null?void 0:L.upperSOC,lower_soc_limit:L==null?void 0:L.lowerSOC};t!=null&&t.is_default?_(K):d(K)},M=h(),O=h("vehiclePhoto"),z=O&&O.length>0,B=Object.entries(M).some(([L,K])=>L==="vehiclePhoto"?!1:K&&K!==""),F=z||B;return $.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[$.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),$.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-h-[90vh] w-full max-w-4xl overflow-y-auto p-8 custom-scrollbar",children:[$.jsx("h2",{className:"text-2xl font-semibold",children:"Edit Custom Vehicle"}),$.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Edit a custom configuration for your simulation."}),$.jsxs("form",{onSubmit:l(P),className:"mt-6 space-y-8",children:[$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Vehicle Parameters"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsx("input",{...n("vehicleName"),placeholder:"Vehicle Name",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("vehicleType"),placeholder:"Vehicle Type",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("powerKW"),placeholder:"Power (KW)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("weightKg"),placeholder:"Weight (kg)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("frontalArea"),placeholder:"Frontal Area (m)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("dragCoefficient"),placeholder:"Aerodynamic Drag Coefficient",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("estimatedRange"),placeholder:"Estimated Range (km)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("regenerationEfficiency"),placeholder:"Regeneration Efficiency (%)",className:"border rounded-lg p-3 text-sm"})]})]}),$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Battery"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsx("input",{...n("nominalBatteryCapacity"),placeholder:"Nominal Battery Capacity (kWh)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("usableBatteryCapacity"),placeholder:"Usable Battery Capacity (kWh)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("nominalVoltage"),placeholder:"Nominal Voltage (V)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("maxChargeCurrent"),placeholder:"Max Charge/Discharge Current (A)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("upperSOC"),placeholder:"Upper SOC limit (%)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("lowerSOC"),placeholder:"Lower SOC limit (%)",className:"border rounded-lg p-3 text-sm"})]})]}),$.jsxs("div",{className:"flex justify-end gap-3",children:[$.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-5 py-2 border rounded-lg text-gray-600 cursor-pointer",children:"Reset to Defaults"}),$.jsx("button",{type:"submit",disabled:!F,className:`px-6 py-2 rounded-lg text-white cursor-pointer ${F?"bg-emerald-600":"bg-gray-300 cursor-not-allowed"}`,children:t!=null&&t.is_default?"Save as New Vehicle":"Save & Update"})]})]})]}),o&&$.jsx(gp,{}),S&&$.jsx(gp,{})]})}function kH(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["vehicles"],queryFn:async()=>(await e.get("/vehicles/")).data});return{vehicles:t,isAllVehiclesLoading:r,isAllVehiclesError:n}}function AH(){return $.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[$.jsx("div",{className:"bg-gray-200 p-8 animate-pulse",children:$.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-lg"})}),$.jsxs("div",{className:"p-5",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsx("div",{className:"h-7 bg-gray-300 rounded w-2/3"}),$.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/4"})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]}),$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]}),$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]})]}),$.jsxs("div",{className:"w-full border border-gray-200 py-2.5 rounded-lg flex items-center justify-center gap-2",children:[$.jsx("div",{className:"h-4 bg-gray-300 rounded w-4"}),$.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"})]})]})]})}function IH(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["constants"],queryFn:async()=>(await e.get("/system/constants/")).data});return{constants:t,isConstantsLoading:r,isConstantsError:n}}const ux=({label:e,value:t,type:r})=>$.jsxs("div",{children:[$.jsx("p",{className:"text-[#212B36] text-[16px] leading-6",children:e}),$.jsxs("p",{className:"text-[#637381] font-roboto text-[16px] leading-6 mt-1",children:[t," ",r]})]});function OH(){var B;const[e,t]=A.useState(!1),[r,n]=A.useState(!1),[l,h]=A.useState(null),{constants:d}=IH(),[o,_]=A.useState(null),{vehicles:S,isAllVehiclesLoading:P,isAllVehiclesError:M}=kH(),O=F=>{n(!0),h(F)},z=F=>{_(F)};return $.jsxs("div",{children:[$.jsxs("div",{className:"flex items-start justify-between mb-8",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Select Your Vehicle"}),$.jsx("p",{className:"text-gray-600 mt-2",children:"Choose a preset model or create a custom configuration for your simulation."})]}),$.jsx("button",{onClick:()=>t(!0),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2.5 rounded-lg font-medium transition-colors",children:"Create Custom Vehicle"})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(B=S==null?void 0:S.data)==null?void 0:B.map(F=>$.jsxs("div",{onClick:()=>z(F),className:`bg-white rounded-xl shadow-sm border-2 overflow-hidden hover:shadow-md transition-shadow cursor-pointer
              ${(o==null?void 0:o.id)===(F==null?void 0:F.id)?"border-emerald-500":"border-gray-200"}
            `,children:[$.jsxs("div",{className:"bg-black p-5 relative",children:[$.jsx("img",{src:"https://electric-vehicle-route-energy-calculation.onrender.com"+(F==null?void 0:F.photo),alt:F==null?void 0:F.name,className:"w-full h-48 object-cover rounded-lg"}),(F==null?void 0:F.is_default)&&$.jsx(V7,{className:"text-white absolute top-2 right-2 rotate-45 z-2"})]}),$.jsxs("div",{className:"p-5",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsx("h3",{className:"text-[#212B36] text-[24px] leading-9",children:F==null?void 0:F.name}),$.jsx("span",{className:"text-[#1CA9A6] text-[20px] leading-[30px] font-medium capitalize",children:F==null?void 0:F.vehicle_type})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsx(ux,{label:"Power",value:F==null?void 0:F.power_kw,type:"KW"}),$.jsx(ux,{label:"Weight",value:F==null?void 0:F.weight_kg,type:"Kg"})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsx(ux,{label:"Battery",value:F==null?void 0:F.usable_battery_capacity_kwh,type:"KWh"}),$.jsx(ux,{label:"Frontal Area",value:F==null?void 0:F.frontal_area_m2,type:"m2"})]}),$.jsxs("button",{onClick:L=>{L.stopPropagation(),O(F)},className:"w-full border text-gray-500 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 hover:border-emerald-500 hover:text-emerald-500 duration-300 cursor-pointer",children:[$.jsx(Y7,{size:18}),"Custom Vehicle"]})]})]},F==null?void 0:F.id)),P&&Array.from({length:3}).map((F,L)=>$.jsx(AH,{},L))]}),M&&$.jsx("div",{className:"w-full h-[300px] flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"No Vehicles Found"}),$.jsx("p",{className:"text-gray-600 mt-2",children:"Create a custom vehicle or select a preset model."})]})}),o&&$.jsxs("div",{className:"mt-8 bg-white p-6 rounded-2xl flex justify-between items-center",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title",children:"Environmental Constants"}),$.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[$.jsxs("p",{className:"Titel2",children:["Air Density:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.air_density)||0," kg/m"]})]}),$.jsxs("p",{className:"Titel2",children:["Gravity:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.gravity)||0," m/s"]})]}),$.jsxs("p",{className:"Titel2",children:["Temp:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.temperature_c)||0,"C"]})]}),$.jsxs("p",{className:"Titel2",children:["Wind speed:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.wind_speed)||0," m/s"]})]})]})]}),$.jsxs("div",{className:"flex items-center gap-5",children:[$.jsx(wy,{to:"/",variant:"fill",className:"mt-5 flex items-center border bg-transparent text-gray-500!",children:"Cancel"}),$.jsxs(wy,{to:"/route",state:o,className:"mt-5 flex items-center",children:["Continue to Route Planning ",$.jsx(eH,{})]})]})]}),e&&$.jsx(EH,{onClose:t}),r&&$.jsx(MH,{vehicle:l,onClose:n})]})}function LH(){return $.jsx("div",{className:"p-10",children:$.jsx(OH,{})})}var Nx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.16.0/LICENSE.txt
 */var DH=Nx.exports,gI;function RH(){return gI||(gI=1,(function(e,t){(function(r,n){e.exports=n()})(DH,(function(){var r={},n={};function l(d,o,_){if(n[d]=_,d==="index"){var S="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",P={};return n.shared(P),n.index(r,P),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([S],{type:"text/javascript"}))),r}}l("shared",["exports"],(function(d){function o(u,a,s,f){return new(s||(s=Promise))((function(g,x){function b(j){try{I(f.next(j))}catch(V){x(V)}}function C(j){try{I(f.throw(j))}catch(V){x(V)}}function I(j){var V;j.done?g(j.value):(V=j.value,V instanceof s?V:new s((function(G){G(V)}))).then(b,C)}I((f=f.apply(u,a||[])).next())}))}function _(u,a){this.x=u,this.y=a}function S(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var P,M;typeof SuppressedError=="function"&&SuppressedError,_.prototype={clone(){return new _(this.x,this.y)},add(u){return this.clone()._add(u)},sub(u){return this.clone()._sub(u)},multByPoint(u){return this.clone()._multByPoint(u)},divByPoint(u){return this.clone()._divByPoint(u)},mult(u){return this.clone()._mult(u)},div(u){return this.clone()._div(u)},rotate(u){return this.clone()._rotate(u)},rotateAround(u,a){return this.clone()._rotateAround(u,a)},matMult(u){return this.clone()._matMult(u)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(u){return this.x===u.x&&this.y===u.y},dist(u){return Math.sqrt(this.distSqr(u))},distSqr(u){const a=u.x-this.x,s=u.y-this.y;return a*a+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith(u){return this.angleWithSep(u.x,u.y)},angleWithSep(u,a){return Math.atan2(this.x*a-this.y*u,this.x*u+this.y*a)},_matMult(u){const a=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=a,this},_add(u){return this.x+=u.x,this.y+=u.y,this},_sub(u){return this.x-=u.x,this.y-=u.y,this},_mult(u){return this.x*=u,this.y*=u,this},_div(u){return this.x/=u,this.y/=u,this},_multByPoint(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint(u){return this.x/=u.x,this.y/=u.y,this},_unit(){return this._div(this.mag()),this},_perp(){const u=this.y;return this.y=this.x,this.x=-u,this},_rotate(u){const a=Math.cos(u),s=Math.sin(u),f=s*this.x+a*this.y;return this.x=a*this.x-s*this.y,this.y=f,this},_rotateAround(u,a){const s=Math.cos(u),f=Math.sin(u),g=a.y+f*(this.x-a.x)+s*(this.y-a.y);return this.x=a.x+s*(this.x-a.x)-f*(this.y-a.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:_},_.convert=function(u){if(u instanceof _)return u;if(Array.isArray(u))return new _(+u[0],+u[1]);if(u.x!==void 0&&u.y!==void 0)return new _(+u.x,+u.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(M)return P;function u(a,s,f,g){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=s,this.p2x=f,this.p2y=g}return M=1,P=u,u.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,s){if(s===void 0&&(s=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,g=0;g<8;g++){var x=this.sampleCurveX(f)-a;if(Math.abs(x)<s)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var C=0,I=1;for(f=a,g=0;g<20&&(x=this.sampleCurveX(f),!(Math.abs(x-a)<s));g++)a>x?C=f:I=f,f=.5*(I-C)+C;return f},solve:function(a,s){return this.sampleCurveY(this.solveCurveX(a,s))}},P})(),z=S(O);let B,F;function L(){return B==null&&(B=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),B}function K(){if(F==null&&(F=!1,L())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let f=0;f<25;f++){const g=4*f;a.fillStyle=`rgb(${g},${g+1},${g+2})`,a.fillRect(f%5,Math.floor(f/5),1,1)}const s=a.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&s[f]!==f){F=!0;break}}}return F||!1}var Q=1e-6,re=typeof Float32Array<"u"?Float32Array:Array;function te(){var u=new re(9);return re!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function ae(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function he(){var u=new re(3);return re!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function ne(u){var a=u[0],s=u[1],f=u[2];return Math.sqrt(a*a+s*s+f*f)}function be(u,a,s){var f=new re(3);return f[0]=u,f[1]=a,f[2]=s,f}function xe(u,a,s){return u[0]=a[0]+s[0],u[1]=a[1]+s[1],u[2]=a[2]+s[2],u}function $e(u,a,s){return u[0]=a[0]*s,u[1]=a[1]*s,u[2]=a[2]*s,u}function Ee(u,a,s){var f=a[0],g=a[1],x=a[2],b=s[0],C=s[1],I=s[2];return u[0]=g*I-x*C,u[1]=x*b-f*I,u[2]=f*C-g*b,u}var Ne,Xe=ne;function ut(u,a,s){var f=a[0],g=a[1],x=a[2],b=a[3];return u[0]=s[0]*f+s[4]*g+s[8]*x+s[12]*b,u[1]=s[1]*f+s[5]*g+s[9]*x+s[13]*b,u[2]=s[2]*f+s[6]*g+s[10]*x+s[14]*b,u[3]=s[3]*f+s[7]*g+s[11]*x+s[15]*b,u}function pt(){var u=new re(4);return re!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function gt(u,a,s,f){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;a*=x,f*=x,s*=x;var b=Math.sin(a),C=Math.cos(a),I=Math.sin(s),j=Math.cos(s),V=Math.sin(f),G=Math.cos(f);switch(g){case"xyz":u[0]=b*j*G+C*I*V,u[1]=C*I*G-b*j*V,u[2]=C*j*V+b*I*G,u[3]=C*j*G-b*I*V;break;case"xzy":u[0]=b*j*G-C*I*V,u[1]=C*I*G-b*j*V,u[2]=C*j*V+b*I*G,u[3]=C*j*G+b*I*V;break;case"yxz":u[0]=b*j*G+C*I*V,u[1]=C*I*G-b*j*V,u[2]=C*j*V-b*I*G,u[3]=C*j*G+b*I*V;break;case"yzx":u[0]=b*j*G+C*I*V,u[1]=C*I*G+b*j*V,u[2]=C*j*V-b*I*G,u[3]=C*j*G-b*I*V;break;case"zxy":u[0]=b*j*G-C*I*V,u[1]=C*I*G+b*j*V,u[2]=C*j*V+b*I*G,u[3]=C*j*G-b*I*V;break;case"zyx":u[0]=b*j*G-C*I*V,u[1]=C*I*G+b*j*V,u[2]=C*j*V-b*I*G,u[3]=C*j*G+b*I*V;break;default:throw new Error("Unknown angle order "+g)}return u}function wt(){var u=new re(2);return re!=Float32Array&&(u[0]=0,u[1]=0),u}function je(u,a){var s=new re(2);return s[0]=u,s[1]=a,s}he(),Ne=new re(4),re!=Float32Array&&(Ne[0]=0,Ne[1]=0,Ne[2]=0,Ne[3]=0),he(),be(1,0,0),be(0,1,0),pt(),pt(),te(),wt();const Qe=8192;function yt(u,a,s){return a*(Qe/(u.tileSize*Math.pow(2,s-u.tileID.overscaledZ)))}function Oe(u,a){return(u%a+a)%a}function et(u,a,s){return u*(1-s)+a*s}function Mt(u){if(u<=0)return 0;if(u>=1)return 1;const a=u*u,s=a*u;return 4*(u<.5?s:3*(u-a)+s-.75)}function Dt(u,a,s,f){const g=new z(u,a,s,f);return x=>g.solve(x)}const Ke=Dt(.25,.1,.25,1);function tr(u,a,s){return Math.min(s,Math.max(a,u))}function Ft(u,a,s){const f=s-a,g=((u-a)%f+f)%f+a;return g===a?s:g}function $t(u,...a){for(const s of a)for(const f in s)u[f]=s[f];return u}let ct=1;function Lt(u,a,s){const f={};for(const g in u)f[g]=a.call(this,u[g],g,u);return f}function ir(u,a,s){const f={};for(const g in u)a.call(this,u[g],g,u)&&(f[g]=u[g]);return f}function St(u){return Array.isArray(u)?u.map(St):typeof u=="object"&&u?Lt(u,St):u}const Gr={};function Tr(u){Gr[u]||(typeof console<"u"&&console.warn(u),Gr[u]=!0)}function wr(u,a,s){return(s.y-u.y)*(a.x-u.x)>(a.y-u.y)*(s.x-u.x)}function tn(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Wr=null;function Xi(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const Ii="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Be(u,a,s,f,g){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(u,{timestamp:0});try{const b=x==null?void 0:x.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const C=b.startsWith("BGR"),I=new Uint8ClampedArray(f*g*4);if(yield x.copyTo(I,(function(j,V,G,H,X){const ee=4*Math.max(-V,0),ie=(Math.max(0,G)-G)*H*4+ee,se=4*H,fe=Math.max(0,V),Pe=Math.max(0,G);return{rect:{x:fe,y:Pe,width:Math.min(j.width,V+H)-fe,height:Math.min(j.height,G+X)-Pe},layout:[{offset:ie,stride:se}]}})(u,a,s,f,g)),C)for(let j=0;j<I.length;j+=4){const V=I[j];I[j]=I[j+2],I[j+2]=V}return I}finally{x.close()}}))}let rt,bt;function rr(u,a,s,f){return u.addEventListener(a,s,f),{unsubscribe:()=>{u.removeEventListener(a,s,f)}}}function Wt(u){return u*Math.PI/180}function zt(u){return u/Math.PI*180}const ze={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ue={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},le="AbortError";class pe extends Error{constructor(a=le){super(a instanceof Error?a.message:a),this.name=le,a instanceof Error&&a.stack&&(this.stack=a.stack)}}function Me(u){return u.name===le}const Ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Je(u){return Ae.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const Ze="global-dispatcher";class Ve extends Error{constructor(a,s,f,g){super(`AJAXError: ${s} (${a}): ${f}`),this.status=a,this.statusText=s,this.url=f,this.body=g}}const it=()=>tn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,At=function(u,a){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const f=Je(u.url);if(f)return f(u,a);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:Ze},a)}if(!(/^file:/.test(s=u.url)||/^file:/.test(it())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,g){return o(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:it(),signal:g.signal});let b,C;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(j){throw Me(j)?j:new Ve(0,j.message,f.url,new Blob)}if(!b.ok){const j=yield b.blob();throw new Ve(b.status,b.statusText,f.url,j)}C=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();const I=yield C;return g.signal.throwIfAborted(),{data:I,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(u,a);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:Ze},a)}var s;return(function(f,g){return new Promise(((x,b)=>{var C;const I=new XMLHttpRequest;I.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(I.responseType="arraybuffer");for(const j in f.headers)I.setRequestHeader(j,f.headers[j]);f.type==="json"&&(I.responseType="text",!((C=f.headers)===null||C===void 0)&&C.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=f.credentials==="include",I.onerror=()=>{b(new Error(I.statusText))},I.onload=()=>{if(!g.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let j=I.response;if(f.type==="json")try{j=JSON.parse(I.response)}catch(V){return void b(V)}x({data:j,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const j=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});b(new Ve(I.status,I.statusText,f.url,j))}},g.signal.addEventListener("abort",(()=>{I.abort(),b(new pe(g.signal.reason))})),I.send(f.body)}))})(u,a)};function Pt(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const a=new URL(u),s=window.location;return a.protocol===s.protocol&&a.host===s.host}function Xt(u,a,s){s[u]&&s[u].indexOf(a)!==-1||(s[u]=s[u]||[],s[u].push(a))}function or(u,a,s){if(s&&s[u]){const f=s[u].indexOf(a);f!==-1&&s[u].splice(f,1)}}class Mr{constructor(a,s={}){$t(this,s),this.type=a}}class Kr extends Mr{constructor(a,s={}){super("error",$t({error:a},s))}}class Ur{on(a,s){return this._listeners=this._listeners||{},Xt(a,s,this._listeners),{unsubscribe:()=>{this.off(a,s)}}}off(a,s){return or(a,s,this._listeners),or(a,s,this._oneTimeListeners),this}once(a,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Xt(a,s,this._oneTimeListeners),this):new Promise((f=>this.once(a,f)))}fire(a,s){typeof a=="string"&&(a=new Mr(a,s||{}));const f=a.type;if(this.listens(f)){a.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const C of g)C.call(this,a);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const C of x)or(f,C,this._oneTimeListeners),C.call(this,a);const b=this._eventedParent;b&&($t(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(a))}else a instanceof Kr&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,s){return this._eventedParent=a,this._eventedParentData=s,this}}var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ti(u,a){const s={};for(const f in u)f!=="ref"&&(s[f]=u[f]);return sn.forEach((f=>{f in a&&(s[f]=a[f])})),s}function Ir(u,a){if(Array.isArray(u)){if(!Array.isArray(a)||u.length!==a.length)return!1;for(let s=0;s<u.length;s++)if(!Ir(u[s],a[s]))return!1;return!0}if(typeof u=="object"&&u!==null&&a!==null){if(typeof a!="object"||Object.keys(u).length!==Object.keys(a).length)return!1;for(const s in u)if(!Ir(u[s],a[s]))return!1;return!0}return u===a}function Zr(u,a){u.push(a)}function Vn(u,a,s){Zr(s,{command:"addSource",args:[u,a[u]]})}function yn(u,a,s){Zr(a,{command:"removeSource",args:[u]}),s[u]=!0}function ln(u,a,s,f){yn(u,s,f),Vn(u,a,s)}function ur(u,a,s){let f;for(f in u[s])if(Object.prototype.hasOwnProperty.call(u[s],f)&&f!=="data"&&!Ir(u[s][f],a[s][f]))return!1;for(f in a[s])if(Object.prototype.hasOwnProperty.call(a[s],f)&&f!=="data"&&!Ir(u[s][f],a[s][f]))return!1;return!0}function Ie(u,a,s,f,g,x){u=u||{},a=a||{};for(const b in u)Object.prototype.hasOwnProperty.call(u,b)&&(Ir(u[b],a[b])||s.push({command:x,args:[f,b,a[b],g]}));for(const b in a)Object.prototype.hasOwnProperty.call(a,b)&&!Object.prototype.hasOwnProperty.call(u,b)&&(Ir(u[b],a[b])||s.push({command:x,args:[f,b,a[b],g]}))}function Ye(u){return u.id}function mt(u,a){return u[a.id]=a,u}class We{constructor(a,s,f,g){this.message=(a?`${a}: `:"")+f,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Gt(u,...a){for(const s of a)for(const f in s)u[f]=s[f];return u}class cr extends Error{constructor(a,s){super(s),this.message=s,this.key=a}}class Sr{constructor(a,s=[]){this.parent=a,this.bindings={};for(const[f,g]of s)this.bindings[f]=g}concat(a){return new Sr(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const hr={kind:"null"},xt={kind:"number"},Bt={kind:"string"},Zt={kind:"boolean"},dr={kind:"color"},Fr={kind:"projectionDefinition"},Yr={kind:"object"},mr={kind:"value"},ri={kind:"collator"},vn={kind:"formatted"},Tn={kind:"padding"},Ja={kind:"colorArray"},bn={kind:"numberArray"},La={kind:"resolvedImage"},Yi={kind:"variableAnchorOffsetCollection"};function Oi(u,a){return{kind:"array",itemType:u,N:a}}function Qr(u){if(u.kind==="array"){const a=Qr(u.itemType);return typeof u.N=="number"?`array<${a}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${a}>`}return u.kind}const Io=[hr,xt,Bt,Zt,dr,Fr,vn,Yr,Oi(mr),Tn,bn,Ja,La,Yi];function Oo(u,a){if(a.kind==="error")return null;if(u.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Oo(u.itemType,a.itemType))&&(typeof u.N!="number"||u.N===a.N))return null}else{if(u.kind===a.kind)return null;if(u.kind==="value"){for(const s of Io)if(!Oo(s,a))return null}}return`Expected ${Qr(u)} but found ${Qr(a)} instead.`}function So(u,a){return a.some((s=>s.kind===u.kind))}function jr(u,a){return a.some((s=>s==="null"?u===null:s==="array"?Array.isArray(u):s==="object"?u&&!Array.isArray(u)&&typeof u=="object":s===typeof u))}function Rn(u,a){return u.kind==="array"&&a.kind==="array"?u.itemType.kind===a.itemType.kind&&typeof u.N=="number":u.kind===a.kind}const $i=.96422,Da=.82521,$n=4/29,jn=6/29,Ol=3*jn*jn,Pu=jn*jn*jn,rl=Math.PI/180,Eh=180/Math.PI;function sg(u){return(u%=360)<0&&(u+=360),u}function lg([u,a,s,f]){let g,x;const b=qd((.2225045*(u=Ac(u))+.7168786*(a=Ac(a))+.0606169*(s=Ac(s)))/1);u===a&&a===s?g=x=b:(g=qd((.4360747*u+.3850649*a+.1430804*s)/$i),x=qd((.0139322*u+.0971045*a+.7141733*s)/Da));const C=116*b-16;return[C<0?0:C,500*(g-b),200*(b-x),f]}function Ac(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function qd(u){return u>Pu?Math.pow(u,1/3):u/Ol+$n}function Ch([u,a,s,f]){let g=(u+16)/116,x=isNaN(a)?g:g+a/500,b=isNaN(s)?g:g-s/200;return g=1*Mp(g),x=$i*Mp(x),b=Da*Mp(b),[Eu(3.1338561*x-1.6168667*g-.4906146*b),Eu(-.9787684*x+1.9161415*g+.033454*b),Eu(.0719453*x-.2289914*g+1.4052427*b),f]}function Eu(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Mp(u){return u>jn?u*u*u:Ol*(u-$n)}const kp=Object.hasOwn||function(u,a){return Object.prototype.hasOwnProperty.call(u,a)};function mn(u,a){return kp(u,a)?u[a]:void 0}function Th(u){return parseInt(u.padEnd(2,u),16)/255}function Ap(u,a){return Ll(a?u/100:u,0,1)}function Ll(u,a,s){return Math.min(Math.max(a,u),s)}function Gd(u){return!u.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function nl(u,a,s){return u+s*(a-u)}function Dl(u,a,s){return u.map(((f,g)=>nl(f,a[g],s)))}class Br{constructor(a,s,f,g=1,x=!0){this.r=a,this.g=s,this.b=f,this.a=g,x||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[a,s,f,g]))}static parse(a){if(a instanceof Br)return a;if(typeof a!="string")return;const s=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=mn(Ic,f);if(g){const[b,C,I]=g;return[b/255,C/255,I/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const b=f.length<6?1:2;let C=1;return[Th(f.slice(C,C+=b)),Th(f.slice(C,C+=b)),Th(f.slice(C,C+=b)),Th(f.slice(C,C+b)||"ff")]}if(f.startsWith("rgb")){const b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[C,I,j,V,G,H,X,ee,ie,se,fe,Pe]=b,me=[V||" ",X||" ",se].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const ge=[j,H,ie].join(""),Ce=ge==="%%%"?100:ge===""?255:0;if(Ce){const Re=[Ll(+I/Ce,0,1),Ll(+G/Ce,0,1),Ll(+ee/Ce,0,1),fe?Ap(+fe,Pe):1];if(Gd(Re))return Re}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,C,I,j,V,G,H,X,ee]=x,ie=[I||" ",V||" ",H].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){const se=[+C,Ll(+j,0,100),Ll(+G,0,100),X?Ap(+X,ee):1];if(Gd(se))return(function([fe,Pe,me,ge]){function Ce(Re){const nt=(Re+fe/30)%12,kt=Pe*Math.min(me,1-me);return me-kt*Math.max(-1,Math.min(nt-3,9-nt,1))}return fe=sg(fe),Pe/=100,me/=100,[Ce(0),Ce(8),Ce(4),ge]})(se)}}})(a);return s?new Br(...s,!1):void 0}get rgb(){const{r:a,g:s,b:f,a:g}=this,x=g||1/0;return this.overwriteGetter("rgb",[a/x,s/x,f/x,g])}get hcl(){return this.overwriteGetter("hcl",(function(a){const[s,f,g,x]=lg(a),b=Math.sqrt(f*f+g*g);return[Math.round(1e4*b)?sg(Math.atan2(g,f)*Eh):NaN,b,s,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",lg(this.rgb))}overwriteGetter(a,s){return Object.defineProperty(this,a,{value:s}),s}toString(){const[a,s,f,g]=this.rgb;return`rgba(${[a,s,f].map((x=>Math.round(255*x))).join(",")},${g})`}static interpolate(a,s,f,g="rgb"){switch(g){case"rgb":{const[x,b,C,I]=Dl(a.rgb,s.rgb,f);return new Br(x,b,C,I,!1)}case"hcl":{const[x,b,C,I]=a.hcl,[j,V,G,H]=s.hcl;let X,ee;if(isNaN(x)||isNaN(j))isNaN(x)?isNaN(j)?X=NaN:(X=j,C!==1&&C!==0||(ee=V)):(X=x,G!==1&&G!==0||(ee=b));else{let me=j-x;j>x&&me>180?me-=360:j<x&&x-j>180&&(me+=360),X=x+f*me}const[ie,se,fe,Pe]=(function([me,ge,Ce,Re]){return me=isNaN(me)?0:me*rl,Ch([Ce,Math.cos(me)*ge,Math.sin(me)*ge,Re])})([X,ee??nl(b,V,f),nl(C,G,f),nl(I,H,f)]);return new Br(ie,se,fe,Pe,!1)}case"lab":{const[x,b,C,I]=Ch(Dl(a.lab,s.lab,f));return new Br(x,b,C,I,!1)}}}}Br.black=new Br(0,0,0,1),Br.white=new Br(1,1,1,1),Br.transparent=new Br(0,0,0,0),Br.red=new Br(1,0,0,1);class Ts{constructor(a,s,f){this.sensitivity=a?s?"variant":"case":s?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,s){return this.collator.compare(a,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Rl=["bottom","center","top"];class Ms{constructor(a,s,f,g,x,b){this.text=a,this.image=s,this.scale=f,this.fontStack=g,this.textColor=x,this.verticalAlign=b}}class Qi{constructor(a){this.sections=a}static fromString(a){return new Qi([new Ms(a,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||a.image&&a.image.name.length!==0))}static factory(a){return a instanceof Qi?a:Qi.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}}class Li{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Li)return a;if(typeof a=="number")return new Li([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const s of a)if(typeof s!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new Li(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){return new Li(Dl(a.values,s.values,f))}}class wn{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof wn)return a;if(typeof a=="number")return new wn([a]);if(Array.isArray(a)){for(const s of a)if(typeof s!="number")return;return new wn(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){return new wn(Dl(a.values,s.values,f))}}class Lr{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Lr)return a;if(typeof a=="string"){const f=Br.parse(a);return f?new Lr([f]):void 0}if(!Array.isArray(a))return;const s=[];for(const f of a){if(typeof f!="string")return;const g=Br.parse(f);if(!g)return;s.push(g)}return new Lr(s)}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f,g="rgb"){const x=[];if(a.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${a.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let b=0;b<a.values.length;b++)x.push(Br.interpolate(a.values[b],s.values[b],f,g));return new Lr(x)}}class In extends Error{constructor(a){super(a),this.name="RuntimeError"}toJSON(){return this.message}}const Lo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ra{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Ra)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let s=0;s<a.length;s+=2){const f=a[s],g=a[s+1];if(typeof f!="string"||!Lo.has(f)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Ra(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){const g=a.values,x=s.values;if(g.length!==x.length)throw new In(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${s.toString()}`);const b=[];for(let C=0;C<g.length;C+=2){if(g[C]!==x[C])throw new In(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${g[C]}, to[${C}]: ${x[C]}`);b.push(g[C]);const[I,j]=g[C+1],[V,G]=x[C+1];b.push([nl(I,V,f),nl(j,G,f)])}return new Ra(b)}}class eo{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new eo({name:a,available:!1}):null}}class Ji{constructor(a,s,f){this.from=a,this.to=s,this.transition=f}static interpolate(a,s,f){return new Ji(a,s,f)}static parse(a){return a instanceof Ji?a:Array.isArray(a)&&a.length===3&&typeof a[0]=="string"&&typeof a[1]=="string"&&typeof a[2]=="number"?new Ji(a[0],a[1],a[2]):typeof a=="object"&&typeof a.from=="string"&&typeof a.to=="string"&&typeof a.transition=="number"?new Ji(a.from,a.to,a.transition):typeof a=="string"?new Ji(a,a,1):void 0}}function Cu(u,a,s,f){return typeof u=="number"&&u>=0&&u<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[u,a,s,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[u,a,s,f]:[u,a,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jl(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Ji||u instanceof Br||u instanceof Ts||u instanceof Qi||u instanceof Li||u instanceof wn||u instanceof Lr||u instanceof Ra||u instanceof eo)return!0;if(Array.isArray(u)){for(const a of u)if(!jl(a))return!1;return!0}if(typeof u=="object"){for(const a in u)if(!jl(u[a]))return!1;return!0}return!1}function Zn(u){if(u===null)return hr;if(typeof u=="string")return Bt;if(typeof u=="boolean")return Zt;if(typeof u=="number")return xt;if(u instanceof Br)return dr;if(u instanceof Ji)return Fr;if(u instanceof Ts)return ri;if(u instanceof Qi)return vn;if(u instanceof Li)return Tn;if(u instanceof wn)return bn;if(u instanceof Lr)return Ja;if(u instanceof Ra)return Yi;if(u instanceof eo)return La;if(Array.isArray(u)){const a=u.length;let s;for(const f of u){const g=Zn(f);if(s){if(s===g)continue;s=mr;break}s=g}return Oi(s||mr,a)}return Yr}function Jo(u){const a=typeof u;return u===null?"":a==="string"||a==="number"||a==="boolean"?String(u):u instanceof Br||u instanceof Ji||u instanceof Qi||u instanceof Li||u instanceof wn||u instanceof Lr||u instanceof Ra||u instanceof eo?u.toString():JSON.stringify(u)}class ja{constructor(a,s){this.type=a,this.value=s}static parse(a,s){if(a.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!jl(a[1]))return s.error("invalid value");const f=a[1];let g=Zn(f);const x=s.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new ja(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Tu={string:Bt,number:xt,boolean:Zt,object:Yr};class to{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");let f,g=1;const x=a[0];if(x==="array"){let C,I;if(a.length>2){const j=a[1];if(typeof j!="string"||!(j in Tu)||j==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=Tu[j],g++}else C=mr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=a[2],g++}f=Oi(C,I)}else{if(!Tu[x])throw new Error(`Types doesn't contain name = ${x}`);f=Tu[x]}const b=[];for(;g<a.length;g++){const C=s.parse(a[g],g,mr);if(!C)return null;b.push(C)}return new to(f,b)}evaluate(a){for(let s=0;s<this.args.length;s++){const f=this.args[s].evaluate(a);if(!Oo(this.type,Zn(f)))return f;if(s===this.args.length-1)throw new In(`Expected value to be of type ${Qr(this.type)}, but found ${Qr(Zn(f))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Mu={"to-boolean":Zt,"to-color":dr,"to-number":xt,"to-string":Bt};class es{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");const f=a[0];if(!Mu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&a.length!==2)return s.error("Expected one argument.");const g=Mu[f],x=[];for(let b=1;b<a.length;b++){const C=s.parse(a[b],b,mr);if(!C)return null;x.push(C)}return new es(g,x)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let s,f;for(const g of this.args){if(s=g.evaluate(a),f=null,s instanceof Br)return s;if(typeof s=="string"){const x=a.parseColor(s);if(x)return x}else if(Array.isArray(s)&&(f=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Cu(s[0],s[1],s[2],s[3]),!f))return new Br(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new In(f||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const f of this.args){s=f.evaluate(a);const g=Li.parse(s);if(g)return g}throw new In(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const f of this.args){s=f.evaluate(a);const g=wn.parse(s);if(g)return g}throw new In(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const f of this.args){s=f.evaluate(a);const g=Lr.parse(s);if(g)return g}throw new In(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const f of this.args){s=f.evaluate(a);const g=Ra.parse(s);if(g)return g}throw new In(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const f of this.args){if(s=f.evaluate(a),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new In(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Qi.fromString(Jo(this.args[0].evaluate(a)));case"resolvedImage":return eo.fromString(Jo(this.args[0].evaluate(a)));case"projectionDefinition":return this.args[0].evaluate(a);default:return Jo(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Mh=["Unknown","Point","LineString","Polygon"];class kh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let s=this._parseColorCache.get(a);return s||(s=Br.parse(a),this._parseColorCache.set(a,s)),s}}class zl{constructor(a,s,f=[],g,x=new Sr,b=[]){this.registry=a,this.path=f,this.key=f.map((C=>`[${C}]`)).join(""),this.scope=x,this.errors=b,this.expectedType=g,this._isConstant=s}parse(a,s,f,g,x={}){return s?this.concat(s,f,g)._parse(a,x):this._parse(a,x)}_parse(a,s){function f(g,x,b){return b==="assert"?new to(x,[g]):b==="coerce"?new es(x,[g]):g}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=a[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let b=x.parse(a,this);if(!b)return null;if(this.expectedType){const C=this.expectedType,I=b.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(I.kind)||C.kind==="colorArray"&&["value","string","array"].includes(I.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))b=f(b,C,s.typeAnnotation||"coerce");else if(this.checkSubtype(C,I))return null}else b=f(b,C,s.typeAnnotation||"assert")}if(!(b instanceof ja)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const C=new kh;try{b=new ja(b.type,b.evaluate(C))}catch(I){return this.error(I.message),null}}return b}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,s,f){const g=typeof a=="number"?this.path.concat(a):this.path,x=f?this.scope.concat(f):this.scope;return new zl(this.registry,this._isConstant,g,s||null,x,this.errors)}error(a,...s){const f=`${this.key}${s.map((g=>`[${g}]`)).join("")}`;this.errors.push(new cr(f,a))}checkSubtype(a,s){const f=Oo(a,s);return f&&this.error(f),f}}class un{constructor(a,s){this.type=s.type,this.bindings=[].concat(a),this.result=s}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const s of this.bindings)a(s[1]);a(this.result)}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const f=[];for(let x=1;x<a.length-1;x+=2){const b=a[x];if(typeof b!="string")return s.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=s.parse(a[x+1],x+1);if(!C)return null;f.push([b,C])}const g=s.parse(a[a.length-1],a.length-1,s.expectedType,f);return g?new un(f,g):null}outputDefined(){return this.result.outputDefined()}}class Nl{constructor(a,s){this.type=s.type,this.name=a,this.boundExpression=s}static parse(a,s){if(a.length!==2||typeof a[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const f=a[1];return s.scope.has(f)?new Nl(f,s.scope.get(f)):s.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Xr{constructor(a,s,f){this.type=a,this.index=s,this.input=f}static parse(a,s){if(a.length!==3)return s.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,xt),g=s.parse(a[2],2,Oi(s.expectedType||mr));return f&&g?new Xr(g.type.itemType,f,g):null}evaluate(a){const s=this.index.evaluate(a),f=this.input.evaluate(a);if(s<0)throw new In(`Array index out of bounds: ${s} < 0.`);if(s>=f.length)throw new In(`Array index out of bounds: ${s} > ${f.length-1}.`);if(s!==Math.floor(s))throw new In(`Array index must be an integer, but found ${s} instead.`);return f[s]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class Vr{constructor(a,s){this.type=Zt,this.needle=a,this.haystack=s}static parse(a,s){if(a.length!==3)return s.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,mr);return f&&g?So(f.type,[Zt,Bt,xt,hr,mr])?new Vr(f,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(f.type)} instead`):null}evaluate(a){const s=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!jr(s,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Zn(s))} instead.`);if(!jr(f,["string","array"]))throw new In(`Expected second argument to be of type array or string, but found ${Qr(Zn(f))} instead.`);return f.indexOf(s)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class il{constructor(a,s,f){this.type=xt,this.needle=a,this.haystack=s,this.fromIndex=f}static parse(a,s){if(a.length<=2||a.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,mr);if(!f||!g)return null;if(!So(f.type,[Zt,Bt,xt,hr,mr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(f.type)} instead`);if(a.length===4){const x=s.parse(a[3],3,xt);return x?new il(f,g,x):null}return new il(f,g)}evaluate(a){const s=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!jr(s,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Zn(s))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(a)),jr(f,["string"])){const x=f.indexOf(s,g);return x===-1?-1:[...f.slice(0,x)].length}if(jr(f,["array"]))return f.indexOf(s,g);throw new In(`Expected second argument to be of type array or string, but found ${Qr(Zn(f))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Jr{constructor(a,s,f,g,x,b){this.inputType=a,this.type=s,this.input=f,this.cases=g,this.outputs=x,this.otherwise=b}static parse(a,s){if(a.length<5)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return s.error("Expected an even number of arguments.");let f,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const x={},b=[];for(let j=2;j<a.length-1;j+=2){let V=a[j];const G=a[j+1];Array.isArray(V)||(V=[V]);const H=s.concat(j);if(V.length===0)return H.error("Expected at least one branch label.");for(const ee of V){if(typeof ee!="number"&&typeof ee!="string")return H.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return H.error("Numeric branch labels must be integer values.");if(f){if(H.checkSubtype(f,Zn(ee)))return null}else f=Zn(ee);if(x[String(ee)]!==void 0)return H.error("Branch labels must be unique.");x[String(ee)]=b.length}const X=s.parse(G,j,g);if(!X)return null;g=g||X.type,b.push(X)}const C=s.parse(a[1],1,mr);if(!C)return null;const I=s.parse(a[a.length-1],a.length-1,g);return I?C.type.kind!=="value"&&s.concat(1).checkSubtype(f,C.type)?null:new Jr(f,g,C,x,b,I):null}evaluate(a){const s=this.input.evaluate(a);return(Zn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Oc{constructor(a,s,f){this.type=a,this.branches=s,this.otherwise=f}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return s.error("Expected an odd number of arguments.");let f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const g=[];for(let b=1;b<a.length-1;b+=2){const C=s.parse(a[b],b,Zt);if(!C)return null;const I=s.parse(a[b+1],b+1,f);if(!I)return null;g.push([C,I]),f=f||I.type}const x=s.parse(a[a.length-1],a.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Oc(f,g,x)}evaluate(a){for(const[s,f]of this.branches)if(s.evaluate(a))return f.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[s,f]of this.branches)a(s),a(f);a(this.otherwise)}outputDefined(){return this.branches.every((([a,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class hi{constructor(a,s,f,g){this.type=a,this.input=s,this.beginIndex=f,this.endIndex=g}static parse(a,s){if(a.length<=2||a.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,xt);if(!f||!g)return null;if(!So(f.type,[Oi(mr),Bt,mr]))return s.error(`Expected first argument to be of type array or string, but found ${Qr(f.type)} instead`);if(a.length===4){const x=s.parse(a[3],3,xt);return x?new hi(f.type,f,g,x):null}return new hi(f.type,f,g)}evaluate(a){const s=this.input.evaluate(a),f=this.beginIndex.evaluate(a);let g;if(this.endIndex&&(g=this.endIndex.evaluate(a)),jr(s,["string"]))return[...s].slice(f,g).join("");if(jr(s,["array"]))return s.slice(f,g);throw new In(`Expected first argument to be of type array or string, but found ${Qr(Zn(s))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function ts(u,a){const s=u.length-1;let f,g,x=0,b=s,C=0;for(;x<=b;)if(C=Math.floor((x+b)/2),f=u[C],g=u[C+1],f<=a){if(C===s||a<g)return C;x=C+1}else{if(!(f>a))throw new In("Input is not a number.");b=C-1}return 0}class ks{constructor(a,s,f){this.type=a,this.input=s,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(a,s){if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");const f=s.parse(a[1],1,xt);if(!f)return null;const g=[];let x=null;s.expectedType&&s.expectedType.kind!=="value"&&(x=s.expectedType);for(let b=1;b<a.length;b+=2){const C=b===1?-1/0:a[b],I=a[b+1],j=b,V=b+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const G=s.parse(I,V,x);if(!G)return null;x=x||G.type,g.push([C,G])}return new ks(x,f,g)}evaluate(a){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(a);const g=this.input.evaluate(a);if(g<=s[0])return f[0].evaluate(a);const x=s.length;return g>=s[x-1]?f[x-1].evaluate(a):f[ts(s,g)].evaluate(a)}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function Lc(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Ah,Ih,Ip=(function(){if(Ih)return Ah;function u(a,s,f,g){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=s,this.p2x=f,this.p2y=g}return Ih=1,Ah=u,u.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,s){if(s===void 0&&(s=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,g=0;g<8;g++){var x=this.sampleCurveX(f)-a;if(Math.abs(x)<s)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var C=0,I=1;for(f=a,g=0;g<20&&(x=this.sampleCurveX(f),!(Math.abs(x-a)<s));g++)a>x?C=f:I=f,f=.5*(I-C)+C;return f},solve:function(a,s){return this.sampleCurveY(this.solveCurveX(a,s))}},Ah})(),Dc=Lc(Ip);class ea{constructor(a,s,f,g,x){this.type=a,this.operator=s,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[b,C]of x)this.labels.push(b),this.outputs.push(C)}static interpolationFactor(a,s,f,g){let x=0;if(a.name==="exponential")x=rs(s,a.base,f,g);else if(a.name==="linear")x=rs(s,1,f,g);else if(a.name==="cubic-bezier"){const b=a.controlPoints;x=new Dc(b[0],b[1],b[2],b[3]).solve(rs(s,1,f,g))}return x}static parse(a,s){let[f,g,x,...b]=a;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const j=g[1];if(typeof j!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:j}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const j=g.slice(1);if(j.length!==4||j.some((V=>typeof V!="number"||V<0||V>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:j}}}if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(x=s.parse(x,2,xt),!x)return null;const C=[];let I=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||s.expectedType==Ja?s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType):I=dr;for(let j=0;j<b.length;j+=2){const V=b[j],G=b[j+1],H=j+3,X=j+4;if(typeof V!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(C.length&&C[C.length-1][0]>=V)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const ee=s.parse(G,X,I);if(!ee)return null;I=I||ee.type,C.push([V,ee])}return Rn(I,xt)||Rn(I,Fr)||Rn(I,dr)||Rn(I,Tn)||Rn(I,bn)||Rn(I,Ja)||Rn(I,Yi)||Rn(I,Oi(xt))?new ea(I,f,g,x,C):s.error(`Type ${Qr(I)} is not interpolatable.`)}evaluate(a){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(a);const g=this.input.evaluate(a);if(g<=s[0])return f[0].evaluate(a);const x=s.length;if(g>=s[x-1])return f[x-1].evaluate(a);const b=ts(s,g),C=ea.interpolationFactor(this.interpolation,g,s[b],s[b+1]),I=f[b].evaluate(a),j=f[b+1].evaluate(a);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return nl(I,j,C);case"color":return Br.interpolate(I,j,C);case"padding":return Li.interpolate(I,j,C);case"colorArray":return Lr.interpolate(I,j,C);case"numberArray":return wn.interpolate(I,j,C);case"variableAnchorOffsetCollection":return Ra.interpolate(I,j,C);case"array":return Dl(I,j,C);case"projectionDefinition":return Ji.interpolate(I,j,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return Br.interpolate(I,j,C,"hcl");case"colorArray":return Lr.interpolate(I,j,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Br.interpolate(I,j,C,"lab");case"colorArray":return Lr.interpolate(I,j,C,"lab")}}}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function rs(u,a,s,f){const g=f-s,x=u-s;return g===0?0:a===1?x/g:(Math.pow(a,x)-1)/(Math.pow(a,g)-1)}const ni={color:Br.interpolate,number:nl,padding:Li.interpolate,numberArray:wn.interpolate,colorArray:Lr.interpolate,variableAnchorOffsetCollection:Ra.interpolate,array:Dl};class ku{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");let f=null;const g=s.expectedType;g&&g.kind!=="value"&&(f=g);const x=[];for(const C of a.slice(1)){const I=s.parse(C,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,x.push(I)}if(!f)throw new Error("No output type");const b=g&&x.some((C=>Oo(g,C.type)));return new ku(b?mr:f,x)}evaluate(a){let s,f=null,g=0;for(const x of this.args)if(g++,f=x.evaluate(a),f&&f instanceof eo&&!f.available&&(s||(s=f.name),f=null,g===this.args.length&&(f=s)),f!==null)break;return f}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}function Op(u,a){return u==="=="||u==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Au(u,a,s,f){return f.compare(a,s)===0}function pi(u,a,s){const f=u!=="=="&&u!=="!=";return class yN{constructor(x,b,C){this.type=Zt,this.lhs=x,this.rhs=b,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const C=x[0];let I=b.parse(x[1],1,mr);if(!I)return null;if(!Op(C,I.type))return b.concat(1).error(`"${C}" comparisons are not supported for type '${Qr(I.type)}'.`);let j=b.parse(x[2],2,mr);if(!j)return null;if(!Op(C,j.type))return b.concat(2).error(`"${C}" comparisons are not supported for type '${Qr(j.type)}'.`);if(I.type.kind!==j.type.kind&&I.type.kind!=="value"&&j.type.kind!=="value")return b.error(`Cannot compare types '${Qr(I.type)}' and '${Qr(j.type)}'.`);f&&(I.type.kind==="value"&&j.type.kind!=="value"?I=new to(j.type,[I]):I.type.kind!=="value"&&j.type.kind==="value"&&(j=new to(I.type,[j])));let V=null;if(x.length===4){if(I.type.kind!=="string"&&j.type.kind!=="string"&&I.type.kind!=="value"&&j.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(V=b.parse(x[3],3,ri),!V)return null}return new yN(I,j,V)}evaluate(x){const b=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const I=Zn(b),j=Zn(C);if(I.kind!==j.kind||I.kind!=="string"&&I.kind!=="number")throw new In(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${I.kind}, ${j.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=Zn(b),j=Zn(C);if(I.kind!=="string"||j.kind!=="string")return a(x,b,C)}return this.collator?s(x,b,C,this.collator.evaluate(x)):a(x,b,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const ug=pi("==",(function(u,a,s){return a===s}),Au),Lp=pi("!=",(function(u,a,s){return a!==s}),(function(u,a,s,f){return!Au(0,a,s,f)})),cg=pi("<",(function(u,a,s){return a<s}),(function(u,a,s,f){return f.compare(a,s)<0})),ev=pi(">",(function(u,a,s){return a>s}),(function(u,a,s,f){return f.compare(a,s)>0})),Iu=pi("<=",(function(u,a,s){return a<=s}),(function(u,a,s,f){return f.compare(a,s)<=0})),Wd=pi(">=",(function(u,a,s){return a>=s}),(function(u,a,s,f){return f.compare(a,s)>=0}));class Rc{constructor(a,s,f){this.type=ri,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=s}static parse(a,s){if(a.length!==2)return s.error("Expected one argument.");const f=a[1];if(typeof f!="object"||Array.isArray(f))return s.error("Collator options argument must be an object.");const g=s.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Zt);if(!g)return null;const x=s.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Zt);if(!x)return null;let b=null;return f.locale&&(b=s.parse(f.locale,1,Bt),!b)?null:new Rc(g,x,b)}evaluate(a){return new Ts(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class Dp{constructor(a,s,f,g,x){this.type=Bt,this.number=a,this.locale=s,this.currency=f,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(a,s){if(a.length!==3)return s.error("Expected two arguments.");const f=s.parse(a[1],1,xt);if(!f)return null;const g=a[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=s.parse(g.locale,1,Bt),!x))return null;let b=null;if(g.currency&&(b=s.parse(g.currency,1,Bt),!b))return null;let C=null;if(g["min-fraction-digits"]&&(C=s.parse(g["min-fraction-digits"],1,xt),!C))return null;let I=null;return g["max-fraction-digits"]&&(I=s.parse(g["max-fraction-digits"],1,xt),!I)?null:new Dp(f,x,b,C,I)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Oh{constructor(a){this.type=vn,this.sections=a}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");const f=a[1];if(!Array.isArray(f)&&typeof f=="object")return s.error("First argument must be an image or text section.");const g=[];let x=!1;for(let b=1;b<=a.length-1;++b){const C=a[b];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let I=null;if(C["font-scale"]&&(I=s.parse(C["font-scale"],1,xt),!I))return null;let j=null;if(C["text-font"]&&(j=s.parse(C["text-font"],1,Oi(Bt)),!j))return null;let V=null;if(C["text-color"]&&(V=s.parse(C["text-color"],1,dr),!V))return null;let G=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Rl.includes(C["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(G=s.parse(C["vertical-align"],1,Bt),!G)return null}const H=g[g.length-1];H.scale=I,H.font=j,H.textColor=V,H.verticalAlign=G}else{const I=s.parse(a[b],1,mr);if(!I)return null;const j=I.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Oh(g)}evaluate(a){return new Qi(this.sections.map((s=>{const f=s.content.evaluate(a);return Zn(f)===La?new Ms("",f,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(a):null):new Ms(Jo(f),null,s.scale?s.scale.evaluate(a):null,s.font?s.font.evaluate(a).join(","):null,s.textColor?s.textColor.evaluate(a):null,s.verticalAlign?s.verticalAlign.evaluate(a):null)})))}eachChild(a){for(const s of this.sections)a(s.content),s.scale&&a(s.scale),s.font&&a(s.font),s.textColor&&a(s.textColor),s.verticalAlign&&a(s.verticalAlign)}outputDefined(){return!1}}class Fl{constructor(a){this.type=La,this.input=a}static parse(a,s){if(a.length!==2)return s.error("Expected two arguments.");const f=s.parse(a[1],1,Bt);return f?new Fl(f):s.error("No image name provided.")}evaluate(a){const s=this.input.evaluate(a),f=eo.fromString(s);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(s)>-1),f}eachChild(a){a(this.input)}outputDefined(){return!1}}class jc{constructor(a){this.type=xt,this.input=a}static parse(a,s){if(a.length!==2)return s.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=s.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Qr(f.type)} instead.`):new jc(f):null}evaluate(a){const s=this.input.evaluate(a);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new In(`Expected value to be of type string or array, but found ${Qr(Zn(s))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Di=8192;function hg(u,a){const s=(180+u[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,g=Math.pow(2,a.z);return[Math.round(s*g*Di),Math.round(f*g*Di)]}function Ou(u,a){const s=Math.pow(2,a.z);return[(g=(u[0]/Di+a.x)/s,360*g-180),(f=(u[1]/Di+a.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,g}function Lh(u,a){u[0]=Math.min(u[0],a[0]),u[1]=Math.min(u[1],a[1]),u[2]=Math.max(u[2],a[0]),u[3]=Math.max(u[3],a[1])}function Lu(u,a){return!(u[0]<=a[0]||u[2]>=a[2]||u[1]<=a[1]||u[3]>=a[3])}function tv(u,a,s){const f=u[0]-a[0],g=u[1]-a[1],x=u[0]-s[0],b=u[1]-s[1];return f*b-x*g==0&&f*x<=0&&g*b<=0}function Hd(u,a,s,f){return(g=[f[0]-s[0],f[1]-s[1]])[0]*(x=[a[0]-u[0],a[1]-u[1]])[1]-g[1]*x[0]!=0&&!(!Rp(u,a,s,f)||!Rp(s,f,u,a));var g,x}function rv(u,a,s){for(const f of s)for(let g=0;g<f.length-1;++g)if(Hd(u,a,f[g],f[g+1]))return!0;return!1}function zc(u,a,s=!1){let f=!1;for(const C of a)for(let I=0;I<C.length-1;I++){if(tv(u,C[I],C[I+1]))return s;(x=C[I])[1]>(g=u)[1]!=(b=C[I+1])[1]>g[1]&&g[0]<(b[0]-x[0])*(g[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var g,x,b;return f}function Zd(u,a){for(const s of a)if(zc(u,s))return!0;return!1}function Kd(u,a){for(const s of u)if(!zc(s,a))return!1;for(let s=0;s<u.length-1;++s)if(rv(u[s],u[s+1],a))return!1;return!0}function Nc(u,a){for(const s of a)if(Kd(u,s))return!0;return!1}function Rp(u,a,s,f){const g=f[0]-s[0],x=f[1]-s[1],b=(u[0]-s[0])*x-g*(u[1]-s[1]),C=(a[0]-s[0])*x-g*(a[1]-s[1]);return b>0&&C<0||b<0&&C>0}function Xd(u,a,s){const f=[];for(let g=0;g<u.length;g++){const x=[];for(let b=0;b<u[g].length;b++){const C=hg(u[g][b],s);Lh(a,C),x.push(C)}f.push(x)}return f}function Yd(u,a,s){const f=[];for(let g=0;g<u.length;g++){const x=Xd(u[g],a,s);f.push(x)}return f}function jp(u,a,s,f){if(u[0]<s[0]||u[0]>s[2]){const g=.5*f;let x=u[0]-s[0]>g?-f:s[0]-u[0]>g?f:0;x===0&&(x=u[0]-s[2]>g?-f:s[2]-u[0]>g?f:0),u[0]+=x}Lh(a,u)}function zp(u,a,s,f){const g=Math.pow(2,f.z)*Di,x=[f.x*Di,f.y*Di],b=[];for(const C of u)for(const I of C){const j=[I.x+x[0],I.y+x[1]];jp(j,a,s,g),b.push(j)}return b}function Np(u,a,s,f){const g=Math.pow(2,f.z)*Di,x=[f.x*Di,f.y*Di],b=[];for(const I of u){const j=[];for(const V of I){const G=[V.x+x[0],V.y+x[1]];Lh(a,G),j.push(G)}b.push(j)}if(a[2]-a[0]<=g/2){(C=a)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of b)for(const j of I)jp(j,a,s,g)}var C;return b}class Do{constructor(a,s){this.type=Zt,this.geojson=a,this.geometries=s}static parse(a,s){if(a.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(jl(a[1])){const f=a[1];if(f.type==="FeatureCollection"){const g=[];for(const x of f.features){const{type:b,coordinates:C}=x.geometry;b==="Polygon"&&g.push(C),b==="MultiPolygon"&&g.push(...C)}if(g.length)return new Do(f,{type:"MultiPolygon",coordinates:g})}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Do(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Do(f,f)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(s,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(f.type==="Polygon"){const C=Xd(f.coordinates,x,b),I=zp(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!zc(j,C))return!1}if(f.type==="MultiPolygon"){const C=Yd(f.coordinates,x,b),I=zp(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Zd(j,C))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(s,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(f.type==="Polygon"){const C=Xd(f.coordinates,x,b),I=Np(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Kd(j,C))return!1}if(f.type==="MultiPolygon"){const C=Yd(f.coordinates,x,b),I=Np(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Nc(j,C))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let dg=class{constructor(u=[],a=(s,f)=>s<f?-1:s>f?1:0){if(this.data=u,this.length=this.data.length,this.compare=a,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:a,compare:s}=this,f=a[u];for(;u>0;){const g=u-1>>1,x=a[g];if(s(f,x)>=0)break;a[u]=x,u=g}a[u]=f}_down(u){const{data:a,compare:s}=this,f=this.length>>1,g=a[u];for(;u<f;){let x=1+(u<<1);const b=x+1;if(b<this.length&&s(a[b],a[x])<0&&(x=b),s(a[x],g)>=0)break;a[u]=a[x],u=x}a[u]=g}};function Fp(u,a,s=0,f=u.length-1,g=Bp){for(;f>s;){if(f-s>600){const I=f-s+1,j=a-s+1,V=Math.log(I),G=.5*Math.exp(2*V/3),H=.5*Math.sqrt(V*G*(I-G)/I)*(j-I/2<0?-1:1);Fp(u,a,Math.max(s,Math.floor(a-j*G/I+H)),Math.min(f,Math.floor(a+(I-j)*G/I+H)),g)}const x=u[a];let b=s,C=f;for(Fc(u,s,a),g(u[f],x)>0&&Fc(u,s,f);b<C;){for(Fc(u,b,C),b++,C--;g(u[b],x)<0;)b++;for(;g(u[C],x)>0;)C--}g(u[s],x)===0?Fc(u,s,C):(C++,Fc(u,C,f)),C<=a&&(s=C+1),a<=C&&(f=C-1)}}function Fc(u,a,s){const f=u[a];u[a]=u[s],u[s]=f}function Bp(u,a){return u<a?-1:u>a?1:0}function Dh(u,a){if(u.length<=1)return[u];const s=[];let f,g;for(const x of u){const b=jh(x);b!==0&&(x.area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(f&&s.push(f),f=[x]):f.push(x))}if(f&&s.push(f),a>1)for(let x=0;x<s.length;x++)s[x].length<=a||(Fp(s[x],a,1,s[x].length-1,Rh),s[x]=s[x].slice(0,a));return s}function Rh(u,a){return a.area-u.area}function jh(u){let a=0;for(let s,f,g=0,x=u.length,b=x-1;g<x;b=g++)s=u[g],f=u[b],a+=(f.x-s.x)*(s.y+f.y);return a}const fg=1/298.257223563,Bl=fg*(2-fg),pg=Math.PI/180;class Qd{constructor(a){const s=6378.137*pg*1e3,f=Math.cos(a*pg),g=1/(1-Bl*(1-f*f)),x=Math.sqrt(g);this.kx=s*x*f,this.ky=s*x*g*(1-Bl)}distance(a,s){const f=this.wrap(a[0]-s[0])*this.kx,g=(a[1]-s[1])*this.ky;return Math.sqrt(f*f+g*g)}pointOnLine(a,s){let f,g,x,b,C=1/0;for(let I=0;I<a.length-1;I++){let j=a[I][0],V=a[I][1],G=this.wrap(a[I+1][0]-j)*this.kx,H=(a[I+1][1]-V)*this.ky,X=0;G===0&&H===0||(X=(this.wrap(s[0]-j)*this.kx*G+(s[1]-V)*this.ky*H)/(G*G+H*H),X>1?(j=a[I+1][0],V=a[I+1][1]):X>0&&(j+=G/this.kx*X,V+=H/this.ky*X)),G=this.wrap(s[0]-j)*this.kx,H=(s[1]-V)*this.ky;const ee=G*G+H*H;ee<C&&(C=ee,f=j,g=V,x=I,b=X)}return{point:[f,g],index:x,t:Math.max(0,Math.min(1,b))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function Jd(u,a){return a[0]-u[0]}function Bc(u){return u[1]-u[0]+1}function Ro(u,a){return u[1]>=u[0]&&u[1]<a}function zh(u,a){if(u[0]>u[1])return[null,null];const s=Bc(u);if(a){if(s===2)return[u,null];const g=Math.floor(s/2);return[[u[0],u[0]+g],[u[0]+g,u[1]]]}if(s===1)return[u,null];const f=Math.floor(s/2)-1;return[[u[0],u[0]+f],[u[0]+f+1,u[1]]]}function ef(u,a){if(!Ro(a,u.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let f=a[0];f<=a[1];++f)Lh(s,u[f]);return s}function Vp(u){const a=[1/0,1/0,-1/0,-1/0];for(const s of u)for(const f of s)Lh(a,f);return a}function $p(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function tf(u,a,s){if(!$p(u)||!$p(a))return NaN;let f=0,g=0;return u[2]<a[0]&&(f=a[0]-u[2]),u[0]>a[2]&&(f=u[0]-a[2]),u[1]>a[3]&&(g=u[1]-a[3]),u[3]<a[1]&&(g=a[1]-u[3]),s.distance([0,0],[f,g])}function Du(u,a,s){const f=s.pointOnLine(a,u);return s.distance(u,f.point)}function Up(u,a,s,f,g){const x=Math.min(Du(u,[s,f],g),Du(a,[s,f],g)),b=Math.min(Du(s,[u,a],g),Du(f,[u,a],g));return Math.min(x,b)}function ns(u,a,s,f,g){if(!Ro(a,u.length)||!Ro(f,s.length))return 1/0;let x=1/0;for(let b=a[0];b<a[1];++b){const C=u[b],I=u[b+1];for(let j=f[0];j<f[1];++j){const V=s[j],G=s[j+1];if(Hd(C,I,V,G))return 0;x=Math.min(x,Up(C,I,V,G,g))}}return x}function Vc(u,a,s,f,g){if(!Ro(a,u.length)||!Ro(f,s.length))return NaN;let x=1/0;for(let b=a[0];b<=a[1];++b)for(let C=f[0];C<=f[1];++C)if(x=Math.min(x,g.distance(u[b],s[C])),x===0)return x;return x}function mg(u,a,s){if(zc(u,a,!0))return 0;let f=1/0;for(const g of a){const x=g[0],b=g[g.length-1];if(x!==b&&(f=Math.min(f,Du(u,[b,x],s)),f===0))return f;const C=s.pointOnLine(g,u);if(f=Math.min(f,s.distance(u,C.point)),f===0)return f}return f}function gg(u,a,s,f){if(!Ro(a,u.length))return NaN;for(let x=a[0];x<=a[1];++x)if(zc(u[x],s,!0))return 0;let g=1/0;for(let x=a[0];x<a[1];++x){const b=u[x],C=u[x+1];for(const I of s)for(let j=0,V=I.length,G=V-1;j<V;G=j++){const H=I[G],X=I[j];if(Hd(b,C,H,X))return 0;g=Math.min(g,Up(b,C,H,X,f))}}return g}function qp(u,a){for(const s of u)for(const f of s)if(zc(f,a,!0))return!0;return!1}function yg(u,a,s,f=1/0){const g=Vp(u),x=Vp(a);if(f!==1/0&&tf(g,x,s)>=f)return f;if(Lu(g,x)){if(qp(u,a))return 0}else if(qp(a,u))return 0;let b=1/0;for(const C of u)for(let I=0,j=C.length,V=j-1;I<j;V=I++){const G=C[V],H=C[I];for(const X of a)for(let ee=0,ie=X.length,se=ie-1;ee<ie;se=ee++){const fe=X[se],Pe=X[ee];if(Hd(G,H,fe,Pe))return 0;b=Math.min(b,Up(G,H,fe,Pe,s))}}return b}function cn(u,a,s,f,g,x){if(!x)return;const b=tf(ef(f,x),g,s);b<a&&u.push([b,x,[0,0]])}function rf(u,a,s,f,g,x,b){if(!x||!b)return;const C=tf(ef(f,x),ef(g,b),s);C<a&&u.push([C,x,b])}function nf(u,a,s,f,g=1/0){let x=Math.min(f.distance(u[0],s[0][0]),g);if(x===0)return x;const b=new dg([[0,[0,u.length-1],[0,0]]],Jd),C=Vp(s);for(;b.length>0;){const I=b.pop();if(I[0]>=x)continue;const j=I[1],V=a?50:100;if(Bc(j)<=V){if(!Ro(j,u.length))return NaN;if(a){const G=gg(u,j,s,f);if(isNaN(G)||G===0)return G;x=Math.min(x,G)}else for(let G=j[0];G<=j[1];++G){const H=mg(u[G],s,f);if(x=Math.min(x,H),x===0)return 0}}else{const G=zh(j,a);cn(b,x,f,u,C,G[0]),cn(b,x,f,u,C,G[1])}}return x}function al(u,a,s,f,g,x=1/0){let b=Math.min(x,g.distance(u[0],s[0]));if(b===0)return b;const C=new dg([[0,[0,u.length-1],[0,s.length-1]]],Jd);for(;C.length>0;){const I=C.pop();if(I[0]>=b)continue;const j=I[1],V=I[2],G=a?50:100,H=f?50:100;if(Bc(j)<=G&&Bc(V)<=H){if(!Ro(j,u.length)&&Ro(V,s.length))return NaN;let X;if(a&&f)X=ns(u,j,s,V,g),b=Math.min(b,X);else if(a&&!f){const ee=u.slice(j[0],j[1]+1);for(let ie=V[0];ie<=V[1];++ie)if(X=Du(s[ie],ee,g),b=Math.min(b,X),b===0)return b}else if(!a&&f){const ee=s.slice(V[0],V[1]+1);for(let ie=j[0];ie<=j[1];++ie)if(X=Du(u[ie],ee,g),b=Math.min(b,X),b===0)return b}else X=Vc(u,j,s,V,g),b=Math.min(b,X)}else{const X=zh(j,a),ee=zh(V,f);rf(C,b,g,u,s,X[0],ee[0]),rf(C,b,g,u,s,X[0],ee[1]),rf(C,b,g,u,s,X[1],ee[0]),rf(C,b,g,u,s,X[1],ee[1])}}return b}function Nh(u){return u.type==="MultiPolygon"?u.coordinates.map((a=>({type:"Polygon",coordinates:a}))):u.type==="MultiLineString"?u.coordinates.map((a=>({type:"LineString",coordinates:a}))):u.type==="MultiPoint"?u.coordinates.map((a=>({type:"Point",coordinates:a}))):[u]}class is{constructor(a,s){this.type=xt,this.geojson=a,this.geometries=s}static parse(a,s){if(a.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(jl(a[1])){const f=a[1];if(f.type==="FeatureCollection")return new is(f,f.features.map((g=>Nh(g.geometry))).flat());if(f.type==="Feature")return new is(f,Nh(f.geometry));if("type"in f&&"coordinates"in f)return new is(f,Nh(f))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(s,f){const g=s.geometry(),x=g.flat().map((I=>Ou([I.x,I.y],s.canonical)));if(g.length===0)return NaN;const b=new Qd(x[0][1]);let C=1/0;for(const I of f){switch(I.type){case"Point":C=Math.min(C,al(x,!1,[I.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,al(x,!1,I.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,nf(x,!1,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries);if(a.geometryType()==="LineString")return(function(s,f){const g=s.geometry(),x=g.flat().map((I=>Ou([I.x,I.y],s.canonical)));if(g.length===0)return NaN;const b=new Qd(x[0][1]);let C=1/0;for(const I of f){switch(I.type){case"Point":C=Math.min(C,al(x,!0,[I.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,al(x,!0,I.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,nf(x,!0,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries);if(a.geometryType()==="Polygon")return(function(s,f){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const x=Dh(g,0).map((I=>I.map((j=>j.map((V=>Ou([V.x,V.y],s.canonical))))))),b=new Qd(x[0][0][0][1]);let C=1/0;for(const I of f)for(const j of x){switch(I.type){case"Point":C=Math.min(C,nf([I.coordinates],!1,j,b,C));break;case"LineString":C=Math.min(C,nf(I.coordinates,!0,j,b,C));break;case"Polygon":C=Math.min(C,yg(j,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ru{constructor(a){this.type=mr,this.key=a}static parse(a,s){if(a.length!==2)return s.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=a[1];return f==null?s.error("Global state property must be defined."):typeof f!="string"?s.error(`Global state property must be string, but found ${typeof a[1]} instead.`):new Ru(f)}evaluate(a){var s;const f=(s=a.globals)===null||s===void 0?void 0:s.globalState;return f&&Object.keys(f).length!==0?mn(f,this.key):null}eachChild(){}outputDefined(){return!1}}const ju={"==":ug,"!=":Lp,">":ev,"<":cg,">=":Wd,"<=":Iu,array:to,at:Xr,boolean:to,case:Oc,coalesce:ku,collator:Rc,format:Oh,image:Fl,in:Vr,"index-of":il,interpolate:ea,"interpolate-hcl":ea,"interpolate-lab":ea,length:jc,let:un,literal:ja,match:Jr,number:to,"number-format":Dp,object:to,slice:hi,step:ks,string:to,"to-boolean":es,"to-color":es,"to-number":es,"to-string":es,var:Nl,within:Do,distance:is,"global-state":Ru};class za{constructor(a,s,f,g){this.name=a,this.type=s,this._evaluate=f,this.args=g}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,s){const f=a[0],g=za.definitions[f];if(!g)return s.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,b=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=b.filter((([j])=>!Array.isArray(j)||j.length===a.length-1));let I=null;for(const[j,V]of C){I=new zl(s.registry,Fh,s.path,null,s.scope);const G=[];let H=!1;for(let X=1;X<a.length;X++){const ee=a[X],ie=Array.isArray(j)?j[X-1]:j.type,se=I.parse(ee,1+G.length,ie);if(!se){H=!0;break}G.push(se)}if(!H)if(Array.isArray(j)&&j.length!==G.length)I.error(`Expected ${j.length} arguments, but found ${G.length} instead.`);else{for(let X=0;X<G.length;X++){const ee=Array.isArray(j)?j[X]:j.type,ie=G[X];I.concat(X+1).checkSubtype(ee,ie.type)}if(I.errors.length===0)return new za(f,x,V,G)}}if(C.length===1)s.errors.push(...I.errors);else{const j=(C.length?C:b).map((([G])=>{return H=G,Array.isArray(H)?`(${H.map(Qr).join(", ")})`:`(${Qr(H.type)}...)`;var H})).join(" | "),V=[];for(let G=1;G<a.length;G++){const H=s.parse(a[G],1+V.length);if(!H)return null;V.push(Qr(H.type))}s.error(`Expected arguments of type ${j}, but found (${V.join(", ")}) instead.`)}return null}static register(a,s){za.definitions=s;for(const f in s)a[f]=za}}function zu(u,[a,s,f,g]){a=a.evaluate(u),s=s.evaluate(u),f=f.evaluate(u);const x=g?g.evaluate(u):1,b=Cu(a,s,f,x);if(b)throw new In(b);return new Br(a/255,s/255,f/255,x,!1)}function af(u,a){return u in a}function of(u,a){const s=a[u];return s===void 0?null:s}function As(u){return{type:u}}function Fh(u){if(u instanceof Nl)return Fh(u.boundExpression);if(u instanceof za&&u.name==="error"||u instanceof Rc||u instanceof Do||u instanceof is||u instanceof Ru)return!1;const a=u instanceof es||u instanceof to;let s=!0;return u.eachChild((f=>{s=a?s&&Fh(f):s&&f instanceof ja})),!!s&&Bh(u)&&Vh(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Bh(u){if(u instanceof za&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof Do||u instanceof is)return!1;let a=!0;return u.eachChild((s=>{a&&!Bh(s)&&(a=!1)})),a}function $c(u){if(u instanceof za&&u.name==="feature-state")return!1;let a=!0;return u.eachChild((s=>{a&&!$c(s)&&(a=!1)})),a}function Vh(u,a){if(u instanceof za&&a.indexOf(u.name)>=0)return!1;let s=!0;return u.eachChild((f=>{s&&!Vh(f,a)&&(s=!1)})),s}function Gp(u){return{result:"success",value:u}}function Nu(u){return{result:"error",value:u}}function Po(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function sf(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function $h(u){return!!u.expression&&u.expression.interpolated}function Hr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function lf(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&Zn(u)===Yr}function Uh(u){return u}function vg(u,a){const s=u.stops&&typeof u.stops[0][0]=="object",f=s||!(s||u.property!==void 0),g=u.type||($h(a)?"exponential":"interval"),x=(function(V){switch(V.type){case"color":return Br.parse;case"padding":return Li.parse;case"numberArray":return wn.parse;case"colorArray":return Lr.parse;default:return null}})(a);if(x&&((u=Gt({},u)).stops&&(u.stops=u.stops.map((V=>[V[0],x(V[1])]))),u.default=x(u.default?u.default:a.default)),u.colorSpace&&(b=u.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var b;const C=(function(V){switch(V){case"exponential":return uf;case"interval":return ii;case"categorical":return _g;case"identity":return cf;default:throw new Error(`Unknown function type "${V}"`)}})(g);let I,j;if(g==="categorical"){I=Object.create(null);for(const V of u.stops)I[V[0]]=V[1];j=typeof u.stops[0][0]}if(s){const V={},G=[];for(let ee=0;ee<u.stops.length;ee++){const ie=u.stops[ee],se=ie[0].zoom;V[se]===void 0&&(V[se]={zoom:se,type:u.type,property:u.property,default:u.default,stops:[]},G.push(se)),V[se].stops.push([ie[0].value,ie[1]])}const H=[];for(const ee of G)H.push([V[ee].zoom,vg(V[ee],a)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:ea.interpolationFactor.bind(void 0,X),zoomStops:H.map((ee=>ee[0])),evaluate:({zoom:ee},ie)=>uf({stops:H,base:u.base},a,ee).evaluate(ee,ie)}}if(f){const V=g==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:ea.interpolationFactor.bind(void 0,V),zoomStops:u.stops.map((G=>G[0])),evaluate:({zoom:G})=>C(u,a,G,I,j)}}return{kind:"source",evaluate(V,G){const H=G&&G.properties?G.properties[u.property]:void 0;return H===void 0?Uc(u.default,a.default):C(u,a,H,I,j)}}}function Uc(u,a,s){return u!==void 0?u:a!==void 0?a:s!==void 0?s:void 0}function _g(u,a,s,f,g){return Uc(typeof s===g?f[s]:void 0,u.default,a.default)}function ii(u,a,s){if(Hr(s)!=="number")return Uc(u.default,a.default);const f=u.stops.length;if(f===1||s<=u.stops[0][0])return u.stops[0][1];if(s>=u.stops[f-1][0])return u.stops[f-1][1];const g=ts(u.stops.map((x=>x[0])),s);return u.stops[g][1]}function uf(u,a,s){const f=u.base!==void 0?u.base:1;if(Hr(s)!=="number")return Uc(u.default,a.default);const g=u.stops.length;if(g===1||s<=u.stops[0][0])return u.stops[0][1];if(s>=u.stops[g-1][0])return u.stops[g-1][1];const x=ts(u.stops.map((V=>V[0])),s),b=(function(V,G,H,X){const ee=X-H,ie=V-H;return ee===0?0:G===1?ie/ee:(Math.pow(G,ie)-1)/(Math.pow(G,ee)-1)})(s,f,u.stops[x][0],u.stops[x+1][0]),C=u.stops[x][1],I=u.stops[x+1][1],j=ni[a.type]||Uh;return typeof C.evaluate=="function"?{evaluate(...V){const G=C.evaluate.apply(void 0,V),H=I.evaluate.apply(void 0,V);if(G!==void 0&&H!==void 0)return j(G,H,b,u.colorSpace)}}:j(C,I,b,u.colorSpace)}function cf(u,a,s){switch(a.type){case"color":s=Br.parse(s);break;case"formatted":s=Qi.fromString(s.toString());break;case"resolvedImage":s=eo.fromString(s.toString());break;case"padding":s=Li.parse(s);break;case"colorArray":s=Lr.parse(s);break;case"numberArray":s=wn.parse(s);break;default:Hr(s)===a.type||a.type==="enum"&&a.values[s]||(s=void 0)}return Uc(s,u.default,a.default)}za.register(ju,{error:[{kind:"error"},[Bt],(u,[a])=>{throw new In(a.evaluate(u))}],typeof:[Bt,[mr],(u,[a])=>Qr(Zn(a.evaluate(u)))],"to-rgba":[Oi(xt,4),[dr],(u,[a])=>{const[s,f,g,x]=a.evaluate(u).rgb;return[255*s,255*f,255*g,x]}],rgb:[dr,[xt,xt,xt],zu],rgba:[dr,[xt,xt,xt,xt],zu],has:{type:Zt,overloads:[[[Bt],(u,[a])=>af(a.evaluate(u),u.properties())],[[Bt,Yr],(u,[a,s])=>af(a.evaluate(u),s.evaluate(u))]]},get:{type:mr,overloads:[[[Bt],(u,[a])=>of(a.evaluate(u),u.properties())],[[Bt,Yr],(u,[a,s])=>of(a.evaluate(u),s.evaluate(u))]]},"feature-state":[mr,[Bt],(u,[a])=>of(a.evaluate(u),u.featureState||{})],properties:[Yr,[],u=>u.properties()],"geometry-type":[Bt,[],u=>u.geometryType()],id:[mr,[],u=>u.id()],zoom:[xt,[],u=>u.globals.zoom],"heatmap-density":[xt,[],u=>u.globals.heatmapDensity||0],elevation:[xt,[],u=>u.globals.elevation||0],"line-progress":[xt,[],u=>u.globals.lineProgress||0],accumulated:[mr,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[xt,As(xt),(u,a)=>{let s=0;for(const f of a)s+=f.evaluate(u);return s}],"*":[xt,As(xt),(u,a)=>{let s=1;for(const f of a)s*=f.evaluate(u);return s}],"-":{type:xt,overloads:[[[xt,xt],(u,[a,s])=>a.evaluate(u)-s.evaluate(u)],[[xt],(u,[a])=>-a.evaluate(u)]]},"/":[xt,[xt,xt],(u,[a,s])=>a.evaluate(u)/s.evaluate(u)],"%":[xt,[xt,xt],(u,[a,s])=>a.evaluate(u)%s.evaluate(u)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(u,[a,s])=>Math.pow(a.evaluate(u),s.evaluate(u))],sqrt:[xt,[xt],(u,[a])=>Math.sqrt(a.evaluate(u))],log10:[xt,[xt],(u,[a])=>Math.log(a.evaluate(u))/Math.LN10],ln:[xt,[xt],(u,[a])=>Math.log(a.evaluate(u))],log2:[xt,[xt],(u,[a])=>Math.log(a.evaluate(u))/Math.LN2],sin:[xt,[xt],(u,[a])=>Math.sin(a.evaluate(u))],cos:[xt,[xt],(u,[a])=>Math.cos(a.evaluate(u))],tan:[xt,[xt],(u,[a])=>Math.tan(a.evaluate(u))],asin:[xt,[xt],(u,[a])=>Math.asin(a.evaluate(u))],acos:[xt,[xt],(u,[a])=>Math.acos(a.evaluate(u))],atan:[xt,[xt],(u,[a])=>Math.atan(a.evaluate(u))],min:[xt,As(xt),(u,a)=>Math.min(...a.map((s=>s.evaluate(u))))],max:[xt,As(xt),(u,a)=>Math.max(...a.map((s=>s.evaluate(u))))],abs:[xt,[xt],(u,[a])=>Math.abs(a.evaluate(u))],round:[xt,[xt],(u,[a])=>{const s=a.evaluate(u);return s<0?-Math.round(-s):Math.round(s)}],floor:[xt,[xt],(u,[a])=>Math.floor(a.evaluate(u))],ceil:[xt,[xt],(u,[a])=>Math.ceil(a.evaluate(u))],"filter-==":[Zt,[Bt,mr],(u,[a,s])=>u.properties()[a.value]===s.value],"filter-id-==":[Zt,[mr],(u,[a])=>u.id()===a.value],"filter-type-==":[Zt,[Bt],(u,[a])=>u.geometryType()===a.value],"filter-<":[Zt,[Bt,mr],(u,[a,s])=>{const f=u.properties()[a.value],g=s.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Zt,[mr],(u,[a])=>{const s=u.id(),f=a.value;return typeof s==typeof f&&s<f}],"filter->":[Zt,[Bt,mr],(u,[a,s])=>{const f=u.properties()[a.value],g=s.value;return typeof f==typeof g&&f>g}],"filter-id->":[Zt,[mr],(u,[a])=>{const s=u.id(),f=a.value;return typeof s==typeof f&&s>f}],"filter-<=":[Zt,[Bt,mr],(u,[a,s])=>{const f=u.properties()[a.value],g=s.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Zt,[mr],(u,[a])=>{const s=u.id(),f=a.value;return typeof s==typeof f&&s<=f}],"filter->=":[Zt,[Bt,mr],(u,[a,s])=>{const f=u.properties()[a.value],g=s.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Zt,[mr],(u,[a])=>{const s=u.id(),f=a.value;return typeof s==typeof f&&s>=f}],"filter-has":[Zt,[mr],(u,[a])=>a.value in u.properties()],"filter-has-id":[Zt,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[Zt,[Oi(Bt)],(u,[a])=>a.value.indexOf(u.geometryType())>=0],"filter-id-in":[Zt,[Oi(mr)],(u,[a])=>a.value.indexOf(u.id())>=0],"filter-in-small":[Zt,[Bt,Oi(mr)],(u,[a,s])=>s.value.indexOf(u.properties()[a.value])>=0],"filter-in-large":[Zt,[Bt,Oi(mr)],(u,[a,s])=>(function(f,g,x,b){for(;x<=b;){const C=x+b>>1;if(g[C]===f)return!0;g[C]>f?b=C-1:x=C+1}return!1})(u.properties()[a.value],s.value,0,s.value.length-1)],all:{type:Zt,overloads:[[[Zt,Zt],(u,[a,s])=>a.evaluate(u)&&s.evaluate(u)],[As(Zt),(u,a)=>{for(const s of a)if(!s.evaluate(u))return!1;return!0}]]},any:{type:Zt,overloads:[[[Zt,Zt],(u,[a,s])=>a.evaluate(u)||s.evaluate(u)],[As(Zt),(u,a)=>{for(const s of a)if(s.evaluate(u))return!0;return!1}]]},"!":[Zt,[Zt],(u,[a])=>!a.evaluate(u)],"is-supported-script":[Zt,[Bt],(u,[a])=>{const s=u.globals&&u.globals.isSupportedScript;return!s||s(a.evaluate(u))}],upcase:[Bt,[Bt],(u,[a])=>a.evaluate(u).toUpperCase()],downcase:[Bt,[Bt],(u,[a])=>a.evaluate(u).toLowerCase()],concat:[Bt,As(mr),(u,a)=>a.map((s=>Jo(s.evaluate(u)))).join("")],"resolved-locale":[Bt,[ri],(u,[a])=>a.evaluate(u).resolvedLocale()]});class Fu{constructor(a,s,f){this.expression=a,this._warningHistory={},this._evaluator=new kh,this._defaultValue=s?(function(g){if(g.type==="color"&&lf(g.default))return new Br(0,0,0,0);switch(g.type){case"color":return Br.parse(g.default)||null;case"padding":return Li.parse(g.default)||null;case"numberArray":return wn.parse(g.default)||null;case"colorArray":return Lr.parse(g.default)||null;case"variableAnchorOffsetCollection":return Ra.parse(g.default)||null;case"projectionDefinition":return Ji.parse(g.default)||null;default:return g.default===void 0?null:g.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=f}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._evaluator.globals=a,this._evaluator.feature=s,this._evaluator.featureState=f,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(a,s,f,g,x,b){this._globalState&&(a=ql(a,this._globalState)),this._evaluator.globals=a,this._evaluator.feature=s||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new In(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Bu(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in ju}function Vu(u,a,s){const f=new zl(ju,Fh,[],a?(function(x){const b={color:dr,string:Bt,number:xt,enum:Bt,boolean:Zt,formatted:vn,padding:Tn,numberArray:bn,colorArray:Ja,projectionDefinition:Fr,resolvedImage:La,variableAnchorOffsetCollection:Yi};return x.type==="array"?Oi(b[x.value]||mr,x.length):b[x.type]})(a):void 0),g=f.parse(u,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Gp(new Fu(g,a,s)):Nu(f.errors)}class Vl{constructor(a,s,f){this.kind=a,this._styleExpression=s,this.isStateDependent=a!=="constant"&&!$c(s.expression),this.globalStateRefs=Ul(s.expression),this._globalState=f}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(a,s,f,g,x,b)}evaluate(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluate(a,s,f,g,x,b)}}class qc{constructor(a,s,f,g,x){this.kind=a,this.zoomStops=f,this._styleExpression=s,this.isStateDependent=a!=="camera"&&!$c(s.expression),this.globalStateRefs=Ul(s.expression),this.interpolationType=g,this._globalState=x}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(a,s,f,g,x,b)}evaluate(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluate(a,s,f,g,x,b)}interpolationFactor(a,s,f){return this.interpolationType?ea.interpolationFactor(this.interpolationType,a,s,f):0}}function $l(u,a,s){const f=Vu(u,a,s);if(f.result==="error")return f;const g=f.value.expression,x=Bh(g);if(!x&&!Po(a))return Nu([new cr("","data expressions not supported")]);const b=Vh(g,["zoom"]);if(!b&&!sf(a))return Nu([new cr("","zoom expressions not supported")]);const C=hf(g);return C||b?C instanceof cr?Nu([C]):C instanceof ea&&!$h(a)?Nu([new cr("",'"interpolate" expressions cannot be used with this property')]):Gp(C?new qc(x?"camera":"composite",f.value,C.labels,C instanceof ea?C.interpolation:void 0,s):new Vl(x?"constant":"source",f.value,s)):Nu([new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qh{constructor(a,s){this._parameters=a,this._specification=s,Gt(this,vg(this._parameters,this._specification))}static deserialize(a){return new qh(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function hf(u){let a=null;if(u instanceof un)a=hf(u.result);else if(u instanceof ku){for(const s of u.args)if(a=hf(s),a)break}else(u instanceof ks||u instanceof ea)&&u.input instanceof za&&u.input.name==="zoom"&&(a=u);return a instanceof cr||u.eachChild((s=>{const f=hf(s);f instanceof cr?a=f:!a&&f?a=new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&f&&a!==f&&(a=new cr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}function Ul(u,a=new Set){return u instanceof Ru&&a.add(u.key),u.eachChild((s=>{Ul(s,a)})),a}function ql(u,a){const{zoom:s,heatmapDensity:f,elevation:g,lineProgress:x,isSupportedScript:b,accumulated:C}=u??{};return{zoom:s,heatmapDensity:f,elevation:g,lineProgress:x,isSupportedScript:b,accumulated:C,globalState:a}}function Gc(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const a of u.slice(1))if(!Gc(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const df={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $u(u,a){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Gc(u)||(u=Uu(u));const s=Vu(u,df,a);if(s.result==="error")throw new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,g,x)=>s.value.evaluate(f,g,{},x),needGeometry:ff(u),getGlobalStateRefs:()=>Ul(s.value.expression)}}function Wp(u,a){return u<a?-1:u>a?1:0}function ff(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let a=1;a<u.length;a++)if(ff(u[a]))return!0;return!1}function Uu(u){if(!u)return!0;const a=u[0];return u.length<=1?a!=="any":a==="=="?pf(u[1],u[2],"=="):a==="!="?Gh(pf(u[1],u[2],"==")):a==="<"||a===">"||a==="<="||a===">="?pf(u[1],u[2],a):a==="any"?(s=u.slice(1),["any"].concat(s.map(Uu))):a==="all"?["all"].concat(u.slice(1).map(Uu)):a==="none"?["all"].concat(u.slice(1).map(Uu).map(Gh)):a==="in"?Hp(u[1],u.slice(2)):a==="!in"?Gh(Hp(u[1],u.slice(2))):a==="has"?xg(u[1]):a!=="!has"||Gh(xg(u[1]));var s}function pf(u,a,s){switch(u){case"$type":return[`filter-type-${s}`,a];case"$id":return[`filter-id-${s}`,a];default:return[`filter-${s}`,u,a]}}function Hp(u,a){if(a.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((s=>typeof s!=typeof a[0]))?["filter-in-large",u,["literal",a.sort(Wp)]]:["filter-in-small",u,["literal",a]]}}function xg(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Gh(u){return["!",u]}function Wc(u){const a=typeof u;if(a==="number"||a==="boolean"||a==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let g="[";for(const x of u)g+=`${Wc(x)},`;return`${g}]`}const s=Object.keys(u).sort();let f="{";for(let g=0;g<s.length;g++)f+=`${JSON.stringify(s[g])}:${Wc(u[s[g]])},`;return`${f}}`}function ol(u){let a="";for(const s of sn)a+=`/${Wc(u[s])}`;return a}function Zp(u){const a=u.value;return a?[new We(u.key,a,"constants have been deprecated as of v8")]:[]}function Un(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function _a(u){if(Array.isArray(u))return u.map(_a);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const a={};for(const s in u)a[s]=_a(u[s]);return a}return Un(u)}function fa(u){const a=u.key,s=u.value,f=u.valueSpec||{},g=u.objectElementValidators||{},x=u.style,b=u.styleSpec,C=u.validateSpec;let I=[];const j=Hr(s);if(j!=="object")return[new We(a,s,`object expected, ${j} found`)];for(const V in s){const G=V.split(".")[0],H=mn(f,G)||f["*"];let X;if(mn(g,G))X=g[G];else if(mn(f,G)){if(s[V]===void 0)continue;X=C}else if(g["*"])X=g["*"];else{if(!f["*"]){I.push(new We(a,s[V],`unknown property "${V}"`));continue}X=C}I=I.concat(X({key:(a&&`${a}.`)+V,value:s[V],valueSpec:H,style:x,styleSpec:b,object:s,objectKey:V,validateSpec:C},s))}for(const V in f)g[V]||f[V].required&&f[V].default===void 0&&s[V]===void 0&&I.push(new We(a,s,`missing required property "${V}"`));return I}function jo(u){const a=u.value,s=u.valueSpec,f=u.style,g=u.styleSpec,x=u.key,b=u.arrayElementValidator||u.validateSpec;if(Hr(a)!=="array")return[new We(x,a,`array expected, ${Hr(a)} found`)];if(s.length&&a.length!==s.length)return[new We(x,a,`array length ${s.length} expected, length ${a.length} found`)];let C={type:s.value,values:s.values};g.$version<7&&(C.function=s.function),Hr(s.value)==="object"&&(C=s.value);let I=[];for(let j=0;j<a.length;j++)I=I.concat(b({array:a,arrayIndex:j,value:a[j],valueSpec:C,validateSpec:u.validateSpec,style:f,styleSpec:g,key:`${x}[${j}]`}));return I}function qu(u){const a=u.key,s=u.value,f=u.valueSpec;let g=Hr(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new We(a,s,`number expected, ${g} found`)]:"minimum"in f&&s<f.minimum?[new We(a,s,`${s} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&s>f.maximum?[new We(a,s,`${s} is greater than the maximum value ${f.maximum}`)]:[]}function mf(u){const a=u.valueSpec,s=Un(u.value.type);let f,g,x,b={};const C=s!=="categorical"&&u.value.property===void 0,I=!C,j=Hr(u.value.stops)==="array"&&Hr(u.value.stops[0])==="array"&&Hr(u.value.stops[0][0])==="object",V=fa({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(X){if(s==="identity")return[new We(X.key,X.value,'identity function may not have a "stops" property')];let ee=[];const ie=X.value;return ee=ee.concat(jo({key:X.key,value:ie,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:G})),Hr(ie)==="array"&&ie.length===0&&ee.push(new We(X.key,ie,"array must have at least one stop")),ee},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:a,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return s==="identity"&&C&&V.push(new We(u.key,u.value,'missing required property "property"')),s==="identity"||u.value.stops||V.push(new We(u.key,u.value,'missing required property "stops"')),s==="exponential"&&u.valueSpec.expression&&!$h(u.valueSpec)&&V.push(new We(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(I&&!Po(u.valueSpec)?V.push(new We(u.key,u.value,"property functions not supported")):C&&!sf(u.valueSpec)&&V.push(new We(u.key,u.value,"zoom functions not supported"))),s!=="categorical"&&!j||u.value.property!==void 0||V.push(new We(u.key,u.value,'"property" property is required')),V;function G(X){let ee=[];const ie=X.value,se=X.key;if(Hr(ie)!=="array")return[new We(se,ie,`array expected, ${Hr(ie)} found`)];if(ie.length!==2)return[new We(se,ie,`array length 2 expected, length ${ie.length} found`)];if(j){if(Hr(ie[0])!=="object")return[new We(se,ie,`object expected, ${Hr(ie[0])} found`)];if(ie[0].zoom===void 0)return[new We(se,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new We(se,ie,"object stop key must have value")];if(x&&x>Un(ie[0].zoom))return[new We(se,ie[0].zoom,"stop zoom values must appear in ascending order")];Un(ie[0].zoom)!==x&&(x=Un(ie[0].zoom),g=void 0,b={}),ee=ee.concat(fa({key:`${se}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:qu,value:H}}))}else ee=ee.concat(H({key:`${se}[0]`,value:ie[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},ie));return Bu(_a(ie[1]))?ee.concat([new We(`${se}[1]`,ie[1],"expressions are not allowed in function stops.")]):ee.concat(X.validateSpec({key:`${se}[1]`,value:ie[1],valueSpec:a,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function H(X,ee){const ie=Hr(X.value),se=Un(X.value),fe=X.value!==null?X.value:ee;if(f){if(ie!==f)return[new We(X.key,fe,`${ie} stop domain type must match previous stop domain type ${f}`)]}else f=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new We(X.key,fe,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&s!=="categorical"){let Pe=`number expected, ${ie} found`;return Po(a)&&s===void 0&&(Pe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(X.key,fe,Pe)]}return s!=="categorical"||ie!=="number"||isFinite(se)&&Math.floor(se)===se?s!=="categorical"&&ie==="number"&&g!==void 0&&se<g?[new We(X.key,fe,"stop domain values must appear in ascending order")]:(g=se,s==="categorical"&&se in b?[new We(X.key,fe,"stop domain values must be unique")]:(b[se]=!0,[])):[new We(X.key,fe,`integer expected, found ${se}`)]}}function Gl(u){const a=(u.expressionContext==="property"?$l:Vu)(_a(u.value),u.valueSpec);if(a.result==="error")return a.value.map((f=>new We(`${u.key}${f.key}`,u.value,f.message)));const s=a.value.expression||a.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!s.outputDefined())return[new We(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!$c(s))return[new We(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!$c(s))return[new We(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Vh(s,["zoom","feature-state"]))return[new We(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Bh(s))return[new We(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function as(u){const a=u.key,s=u.value,f=Hr(s);return f!=="string"?[new We(a,s,`color expected, ${f} found`)]:Br.parse(String(s))?[]:[new We(a,s,`color expected, "${s}" found`)]}function os(u){const a=u.key,s=u.value,f=u.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Un(s))===-1&&g.push(new We(a,s,`expected one of [${f.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(f.values).indexOf(Un(s))===-1&&g.push(new We(a,s,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function ss(u){return Gc(_a(u.value))?Gl(Gt({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Wh(u)}function Wh(u){const a=u.value,s=u.key;if(Hr(a)!=="array")return[new We(s,a,`array expected, ${Hr(a)} found`)];const f=u.styleSpec;let g,x=[];if(a.length<1)return[new We(s,a,"filter array must have at least 1 element")];switch(x=x.concat(os({key:`${s}[0]`,value:a[0],valueSpec:f.filter_operator,style:u.style,styleSpec:u.styleSpec})),Un(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Un(a[1])==="$type"&&x.push(new We(s,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&x.push(new We(s,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(g=Hr(a[1]),g!=="string"&&x.push(new We(`${s}[1]`,a[1],`string expected, ${g} found`)));for(let b=2;b<a.length;b++)g=Hr(a[b]),Un(a[1])==="$type"?x=x.concat(os({key:`${s}[${b}]`,value:a[b],valueSpec:f.geometry_type,style:u.style,styleSpec:u.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new We(`${s}[${b}]`,a[b],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let b=1;b<a.length;b++)x=x.concat(Wh({key:`${s}[${b}]`,value:a[b],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":g=Hr(a[1]),a.length!==2?x.push(new We(s,a,`filter array for "${a[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new We(`${s}[1]`,a[1],`string expected, ${g} found`))}return x}function gf(u,a){const s=u.key,f=u.validateSpec,g=u.style,x=u.styleSpec,b=u.value,C=u.objectKey,I=x[`${a}_${u.layerType}`];if(!I)return[];const j=C.match(/^(.*)-transition$/);if(a==="paint"&&j&&I[j[1]]&&I[j[1]].transition)return f({key:s,value:b,valueSpec:x.transition,style:g,styleSpec:x});const V=u.valueSpec||I[C];if(!V)return[new We(s,b,`unknown property "${C}"`)];let G;if(Hr(b)==="string"&&Po(V)&&!V.tokens&&(G=/^{([^}]+)}$/.exec(b)))return[new We(s,b,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const H=[];return u.layerType==="symbol"&&C==="text-font"&&lf(_a(b))&&Un(b.type)==="identity"&&H.push(new We(s,b,'"text-font" does not support identity functions')),H.concat(f({key:u.key,value:b,valueSpec:V,style:g,styleSpec:x,expressionContext:"property",propertyType:a,propertyKey:C}))}function Gu(u){return gf(u,"paint")}function sl(u){return gf(u,"layout")}function Kn(u){let a=[];const s=u.value,f=u.key,g=u.style,x=u.styleSpec;if(Hr(s)!=="object")return[new We(f,s,`object expected, ${Hr(s)} found`)];s.type||s.ref||a.push(new We(f,s,'either "type" or "ref" is required'));let b=Un(s.type);const C=Un(s.ref);if(s.id){const I=Un(s.id);for(let j=0;j<u.arrayIndex;j++){const V=g.layers[j];Un(V.id)===I&&a.push(new We(f,s.id,`duplicate layer id "${s.id}", previously used at line ${V.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach((j=>{j in s&&a.push(new We(f,s[j],`"${j}" is prohibited for ref layers`))})),g.layers.forEach((j=>{Un(j.id)===C&&(I=j)})),I?I.ref?a.push(new We(f,s.ref,"ref cannot reference another ref layer")):b=Un(I.type):a.push(new We(f,s.ref,`ref layer "${C}" not found`))}else if(b!=="background")if(s.source){const I=g.sources&&g.sources[s.source],j=I&&Un(I.type);I?j==="vector"&&b==="raster"?a.push(new We(f,s.source,`layer "${s.id}" requires a raster source`)):j!=="raster-dem"&&b==="hillshade"||j!=="raster-dem"&&b==="color-relief"?a.push(new We(f,s.source,`layer "${s.id}" requires a raster-dem source`)):j==="raster"&&b!=="raster"?a.push(new We(f,s.source,`layer "${s.id}" requires a vector source`)):j!=="vector"||s["source-layer"]?j==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?a.push(new We(f,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!s.paint||!s.paint["line-gradient"]||j==="geojson"&&I.lineMetrics||a.push(new We(f,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new We(f,s,`layer "${s.id}" must specify a "source-layer"`)):a.push(new We(f,s.source,`source "${s.source}" not found`))}else a.push(new We(f,s,'missing required property "source"'));return a=a.concat(fa({key:f,value:s,valueSpec:x.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${f}.type`,value:s.type,valueSpec:x.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:s,objectKey:"type"}),filter:ss,layout:I=>fa({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":j=>sl(Gt({layerType:b},j))}}),paint:I=>fa({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":j=>Gu(Gt({layerType:b},j))}})}})),a}function gn(u){const a=u.value,s=u.key,f=Hr(a);return f!=="string"?[new We(s,a,`string expected, ${f} found`)]:[]}const Is={promoteId:function({key:u,value:a}){if(Hr(a)==="string")return gn({key:u,value:a});{const s=[];for(const f in a)s.push(...gn({key:`${u}.${f}`,value:a[f]}));return s}}};function ta(u){const a=u.value,s=u.key,f=u.styleSpec,g=u.style,x=u.validateSpec;if(!a.type)return[new We(s,a,'"type" is required')];const b=Un(a.type);let C;switch(b){case"vector":case"raster":return C=fa({key:s,value:a,valueSpec:f[`source_${b.replace("-","_")}`],style:u.style,styleSpec:f,objectElementValidators:Is,validateSpec:x}),C;case"raster-dem":return C=(function(I){var j;const V=(j=I.sourceName)!==null&&j!==void 0?j:"",G=I.value,H=I.styleSpec,X=H.source_raster_dem,ee=I.style;let ie=[];const se=Hr(G);if(G===void 0)return ie;if(se!=="object")return ie.push(new We("source_raster_dem",G,`object expected, ${se} found`)),ie;const fe=Un(G.encoding)==="custom",Pe=["redFactor","greenFactor","blueFactor","baseShift"],me=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const ge in G)!fe&&Pe.includes(ge)?ie.push(new We(ge,G[ge],`In "${V}": "${ge}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):X[ge]?ie=ie.concat(I.validateSpec({key:ge,value:G[ge],valueSpec:X[ge],validateSpec:I.validateSpec,style:ee,styleSpec:H})):ie.push(new We(ge,G[ge],`unknown property "${ge}"`));return ie})({sourceName:s,value:a,style:u.style,styleSpec:f,validateSpec:x}),C;case"geojson":if(C=fa({key:s,value:a,valueSpec:f.source_geojson,style:g,styleSpec:f,validateSpec:x,objectElementValidators:Is}),a.cluster)for(const I in a.clusterProperties){const[j,V]=a.clusterProperties[I],G=typeof j=="string"?[j,["accumulated"],["get",I]]:j;C.push(...Gl({key:`${s}.${I}.map`,value:V,expressionContext:"cluster-map"})),C.push(...Gl({key:`${s}.${I}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return C;case"video":return fa({key:s,value:a,valueSpec:f.source_video,style:g,validateSpec:x,styleSpec:f});case"image":return fa({key:s,value:a,valueSpec:f.source_image,style:g,validateSpec:x,styleSpec:f});case"canvas":return[new We(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return os({key:`${s}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ra(u){const a=u.value,s=u.styleSpec,f=s.light,g=u.style;let x=[];const b=Hr(a);if(a===void 0)return x;if(b!=="object")return x=x.concat([new We("light",a,`object expected, ${b} found`)]),x;for(const C in a){const I=C.match(/^(.*)-transition$/);x=x.concat(I&&f[I[1]]&&f[I[1]].transition?u.validateSpec({key:C,value:a[C],valueSpec:s.transition,validateSpec:u.validateSpec,style:g,styleSpec:s}):f[C]?u.validateSpec({key:C,value:a[C],valueSpec:f[C],validateSpec:u.validateSpec,style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)])}return x}function Wl(u){const a=u.value,s=u.styleSpec,f=s.sky,g=u.style,x=Hr(a);if(a===void 0)return[];if(x!=="object")return[new We("sky",a,`object expected, ${x} found`)];let b=[];for(const C in a)b=b.concat(f[C]?u.validateSpec({key:C,value:a[C],valueSpec:f[C],style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return b}function Hl(u){const a=u.value,s=u.styleSpec,f=s.terrain,g=u.style;let x=[];const b=Hr(a);if(a===void 0)return x;if(b!=="object")return x=x.concat([new We("terrain",a,`object expected, ${b} found`)]),x;for(const C in a)x=x.concat(f[C]?u.validateSpec({key:C,value:a[C],valueSpec:f[C],validateSpec:u.validateSpec,style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return x}function xa(u){let a=[];const s=u.value,f=u.key;if(Array.isArray(s)){const g=[],x=[];for(const b in s)s[b].id&&g.includes(s[b].id)&&a.push(new We(f,s,`all the sprites' ids must be unique, but ${s[b].id} is duplicated`)),g.push(s[b].id),s[b].url&&x.includes(s[b].url)&&a.push(new We(f,s,`all the sprites' URLs must be unique, but ${s[b].url} is duplicated`)),x.push(s[b].url),a=a.concat(fa({key:`${f}[${b}]`,value:s[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return a}return gn({key:f,value:s})}function Hh(u){return!!u&&u.constructor===Object}function yf(u){return Hh(u.value)?[]:[new We(u.key,u.value,`object expected, ${Hr(u.value)} found`)]}const vf={"*":()=>[],array:jo,boolean:function(u){const a=u.value,s=u.key,f=Hr(a);return f!=="boolean"?[new We(s,a,`boolean expected, ${f} found`)]:[]},number:qu,color:as,constants:Zp,enum:os,filter:ss,function:mf,layer:Kn,object:fa,source:ta,light:ra,sky:Wl,terrain:Hl,projection:function(u){const a=u.value,s=u.styleSpec,f=s.projection,g=u.style,x=Hr(a);if(a===void 0)return[];if(x!=="object")return[new We("projection",a,`object expected, ${x} found`)];let b=[];for(const C in a)b=b.concat(f[C]?u.validateSpec({key:C,value:a[C],valueSpec:f[C],style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return b},projectionDefinition:function(u){const a=u.key;let s=u.value;s=s instanceof String?s.valueOf():s;const f=Hr(s);return f!=="array"||(function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"})(s)||(function(g){return!!["interpolate","step","literal"].includes(g[0])})(s)?["array","string"].includes(f)?[]:[new We(a,s,`projection expected, invalid type "${f}" found`)]:[new We(a,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:gn,formatted:function(u){return gn(u).length===0?[]:Gl(u)},resolvedImage:function(u){return gn(u).length===0?[]:Gl(u)},padding:function(u){const a=u.key,s=u.value;if(Hr(s)==="array"){if(s.length<1||s.length>4)return[new We(a,s,`padding requires 1 to 4 values; ${s.length} values found`)];const f={type:"number"};let g=[];for(let x=0;x<s.length;x++)g=g.concat(u.validateSpec({key:`${a}[${x}]`,value:s[x],validateSpec:u.validateSpec,valueSpec:f}));return g}return qu({key:a,value:s,valueSpec:{}})},numberArray:function(u){const a=u.key,s=u.value;if(Hr(s)==="array"){const f={type:"number"};if(s.length<1)return[new We(a,s,"array length at least 1 expected, length 0 found")];let g=[];for(let x=0;x<s.length;x++)g=g.concat(u.validateSpec({key:`${a}[${x}]`,value:s[x],validateSpec:u.validateSpec,valueSpec:f}));return g}return qu({key:a,value:s,valueSpec:{}})},colorArray:function(u){const a=u.key,s=u.value;if(Hr(s)==="array"){if(s.length<1)return[new We(a,s,"array length at least 1 expected, length 0 found")];let f=[];for(let g=0;g<s.length;g++)f=f.concat(as({key:`${a}[${g}]`,value:s[g]}));return f}return as({key:a,value:s})},variableAnchorOffsetCollection:function(u){const a=u.key,s=u.value,f=Hr(s),g=u.styleSpec;if(f!=="array"||s.length<1||s.length%2!=0)return[new We(a,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<s.length;b+=2)x=x.concat(os({key:`${a}[${b}]`,value:s[b],valueSpec:g.layout_symbol["text-anchor"]})),x=x.concat(jo({key:`${a}[${b+1}]`,value:s[b+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:g}));return x},sprite:xa,state:yf,fontFaces:function(u){const a=u.key,s=u.value,f=u.validateSpec,g=u.styleSpec,x=u.style;if(!Hh(s))return[new We(a,s,`object expected, ${Hr(s)} found`)];const b=[];for(const C in s){const I=s[C],j=Hr(I);if(j==="string")b.push(...gn({key:`${a}.${C}`,value:I}));else if(j==="array"){const V={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[G,H]of I.entries())b.push(...fa({key:`${a}.${C}[${G}]`,value:H,valueSpec:V,styleSpec:g,style:x,validateSpec:f}))}else b.push(new We(`${a}.${C}`,I,`string or array expected, ${j} found`))}return b}};function ls(u){const a=u.value,s=u.valueSpec,f=u.styleSpec;return u.validateSpec=ls,s.expression&&lf(Un(a))?mf(u):s.expression&&Bu(_a(a))?Gl(u):s.type&&vf[s.type]?vf[s.type](u):fa(Gt({},u,{valueSpec:s.type?f[s.type]:s}))}function Kp(u){const a=u.value,s=u.key,f=gn(u);return f.length||(a.indexOf("{fontstack}")===-1&&f.push(new We(s,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&f.push(new We(s,a,'"glyphs" url must include a "{range}" token'))),f}function Ri(u,a=tt){let s=[];return s=s.concat(ls({key:"",value:u,valueSpec:a.$root,styleSpec:a,style:u,validateSpec:ls,objectElementValidators:{glyphs:Kp,"*":()=>[]}})),u.constants&&(s=s.concat(Zp({key:"constants",value:u.constants}))),_f(s)}function ro(u){return function(a){return u(Object.assign({},a,{validateSpec:ls}))}}function _f(u){return[].concat(u).sort(((a,s)=>a.line-s.line))}function zo(u){return function(...a){return _f(u.apply(this,a))}}Ri.source=zo(ro(ta)),Ri.sprite=zo(ro(xa)),Ri.glyphs=zo(ro(Kp)),Ri.light=zo(ro(ra)),Ri.sky=zo(ro(Wl)),Ri.terrain=zo(ro(Hl)),Ri.state=zo(ro(yf)),Ri.layer=zo(ro(Kn)),Ri.filter=zo(ro(ss)),Ri.paintProperty=zo(ro(Gu)),Ri.layoutProperty=zo(ro(sl));const nv={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class No{constructor(a,s){this._globalState=s,this.setValue(a)}evaluate(){var a;return(a=this._literalValue)!==null&&a!==void 0?a:this._compiledValue.evaluate({})}setValue(a){if(a==null||a==="visible"||a==="none")return this._literalValue=a==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const s=Vu(a,nv,this._globalState);if(s.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=s.value,this._globalStateRefs=Ul(s.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Os=tt,mi=Ri,Zl=mi.light,Zh=mi.sky,Fo=mi.paintProperty,Bo=mi.layoutProperty;function Vo(u,a){let s=!1;if(a&&a.length)for(const f of a)u.fire(new Kr(new Error(f.message))),s=!0;return s}class no{constructor(a,s,f){const g=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const b=new Int32Array(this.arrayBuffer);a=b[0],this.d=(s=b[1])+2*(f=b[2]);for(let I=0;I<this.d*this.d;I++){const j=b[3+I],V=b[3+I+1];g.push(j===V?null:b.subarray(j,V))}const C=b[3+g.length+1];this.keys=b.subarray(b[3+g.length],C),this.bboxes=b.subarray(C),this.insert=this._insertReadonly}else{this.d=s+2*f;for(let b=0;b<this.d*this.d;b++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=a,this.padding=f,this.scale=s/a,this.uid=0;const x=f/s*a;this.min=-x,this.max=a+x}insert(a,s,f,g,x){this._forEachCell(s,f,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,s,f,g,x,b){this.cells[x].push(b)}query(a,s,f,g,x){const b=this.min,C=this.max;if(a<=b&&s<=b&&C<=f&&C<=g&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(a,s,f,g,this._queryCell,I,{},x),I}}_queryCell(a,s,f,g,x,b,C,I){const j=this.cells[x];if(j!==null){const V=this.keys,G=this.bboxes;for(let H=0;H<j.length;H++){const X=j[H];if(C[X]===void 0){const ee=4*X;(I?I(G[ee+0],G[ee+1],G[ee+2],G[ee+3]):a<=G[ee+2]&&s<=G[ee+3]&&f>=G[ee+0]&&g>=G[ee+1])?(C[X]=!0,b.push(V[X])):C[X]=!1}}}}_forEachCell(a,s,f,g,x,b,C,I){const j=this._convertToCellCoord(a),V=this._convertToCellCoord(s),G=this._convertToCellCoord(f),H=this._convertToCellCoord(g);for(let X=j;X<=G;X++)for(let ee=V;ee<=H;ee++){const ie=this.d*ee+X;if((!I||I(this._convertFromCellCoord(X),this._convertFromCellCoord(ee),this._convertFromCellCoord(X+1),this._convertFromCellCoord(ee+1)))&&x.call(this,a,s,f,g,ie,b,C,I))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,s=3+this.cells.length+1+1;let f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;const g=new Int32Array(s+f+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=s;for(let b=0;b<a.length;b++){const C=a[b];g[3+b]=x,g.set(C,x),x+=C.length}return g[3+a.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+a.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(a,s){const f=a.toArrayBuffer();return s&&s.push(f),{buffer:f}}static deserialize(a){return new no(a.buffer)}}const Ui={};function Jt(u,a,s={}){if(Ui[u])throw new Error(`${u} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:u,writeable:!1}),Ui[u]={klass:a,omit:s.omit||[],shallow:s.shallow||[]}}Jt("Object",Object),Jt("Set",Set),Jt("TransferableGridIndex",no),Jt("Color",Br),Jt("Error",Error),Jt("AJAXError",Ve),Jt("ResolvedImage",eo),Jt("StylePropertyFunction",qh),Jt("StyleExpression",Fu,{omit:["_evaluator"]}),Jt("ZoomDependentExpression",qc),Jt("ZoomConstantExpression",Vl),Jt("CompoundExpression",za,{omit:["_evaluate"]});for(const u in ju)ju[u]._classRegistryKey||Jt(`Expression_${u}`,ju[u]);function Kh(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function Xh(u){return u.$name||u.constructor._classRegistryKey}function Kl(u){return!(function(a){if(a===null||typeof a!="object")return!1;const s=Xh(a);return!(!s||s==="Object")})(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Kh(u)||Xi(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function pa(u,a){if(Kl(u))return(Kh(u)||Xi(u))&&a&&a.push(u),ArrayBuffer.isView(u)&&a&&a.push(u.buffer),u instanceof ImageData&&a&&a.push(u.data.buffer),u;if(Array.isArray(u)){const x=[];for(const b of u)x.push(pa(b,a));return x}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const s=Xh(u);if(!s)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!Ui[s])throw new Error(`${s} is not registered.`);const{klass:f}=Ui[s],g=f.serialize?f.serialize(u,a):{};if(f.serialize){if(a&&g===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in u){if(!u.hasOwnProperty(x)||Ui[s].omit.indexOf(x)>=0)continue;const b=u[x];g[x]=Ui[s].shallow.indexOf(x)>=0?b:pa(b,a)}u instanceof Error&&(g.message=u.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function ma(u){if(Kl(u))return u;if(Array.isArray(u))return u.map(ma);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const a=Xh(u)||"Object";if(!Ui[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:s}=Ui[a];if(!s)throw new Error(`can't deserialize unregistered class ${a}`);if(s.deserialize)return s.deserialize(u);const f=Object.create(s.prototype);for(const g of Object.keys(u)){if(g==="$name")continue;const x=u[g];f[g]=Ui[a].shallow.indexOf(g)>=0?x:ma(x)}return f}class Xn{constructor(){this.first=!0}update(a,s){const f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=s),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))}}function Na(u){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))}function xf(u){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))}function Xp(u){return/\s/u.test(String.fromCodePoint(u))}function Xl(u){for(const a of u)if(xf(a.codePointAt(0)))return!0;return!1}function Yp(u){for(const a of u)if(!Qp(a.codePointAt(0)))return!1;return!0}function Yh(u){const a=u.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(a.join("|"),"u")}const Wu=Yh(["Arab","Dupl","Mong","Ougr","Syrc"]);function Qp(u){return!Wu.test(String.fromCodePoint(u))}function Yl(u){return!(xf(u)||(a=u,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(a))));var a}const bf=Yh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Jp(u){return bf.test(String.fromCodePoint(u))}function Hu(u,a){return!(!a&&Jp(u)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(u)))}function Qh(u){for(const a of u)if(Jp(a.codePointAt(0)))return!0;return!1}const ll=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(ll.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,a){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const s=u.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));a(s);const g=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,g]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:s};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Mn{constructor(a,s){this.isSupportedScript=Hc,this.zoom=a,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Xn,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Xn,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,s=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*s}}}function Hc(u){return(function(a,s){for(const f of a)if(!Hu(f.codePointAt(0),s))return!1;return!0})(u,ll.getRTLTextPluginStatus()==="loaded")}const Zc="-transition";class Zu{constructor(a,s,f){this.property=a,this.value=s,this.expression=(function(g,x,b){if(lf(g))return new qh(g,x);if(Bu(g)){const C=$l(g,x,b);if(C.result==="error")throw new Error(C.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return C.value}{let C=g;return x.type==="color"&&typeof g=="string"?C=Br.parse(g):x.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?x.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?x.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?C=Ra.parse(g):x.type==="projectionDefinition"&&typeof g=="string"&&(C=Ji.parse(g)):C=Lr.parse(g):C=wn.parse(g):C=Li.parse(g),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(s===void 0?a.specification.default:s,a.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(a,s,f){return this.property.possiblyEvaluate(this,a,s,f)}}class Ku{constructor(a,s){this.property=a,this.value=new Zu(a,void 0,s)}transitioned(a,s){return new wf(this.property,this.value,s,$t({},a.transition,this.transition),a.now)}untransitioned(){return new wf(this.property,this.value,null,{},0)}}class Ql{constructor(a,s){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._globalState=s}getValue(a){return St(this._values[a].value.value)}setValue(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Ku(this._values[a].property,this._globalState)),this._values[a].value=new Zu(this._values[a].property,s===null?void 0:St(s),this._globalState)}getTransition(a){return St(this._values[a].transition)}setTransition(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Ku(this._values[a].property,this._globalState)),this._values[a].transition=St(s)||void 0}serialize(){const a={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(a[s]=f);const g=this.getTransition(s);g!==void 0&&(a[`${s}${Zc}`]=g)}return a}transitioned(a,s){const f=new Sf(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(a,s._values[g]);return f}untransitioned(){const a=new Sf(this._properties);for(const s of Object.keys(this._values))a._values[s]=this._values[s].untransitioned();return a}}class wf{constructor(a,s,f,g,x){this.property=a,this.value=s,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,a.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(a,s,f){const g=a.now||0,x=this.value.possiblyEvaluate(a,s,f),b=this.prior;if(b){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return b.possiblyEvaluate(a,s,f);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(a,s,f),x,Mt(C))}}return x}}class Sf{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,s,f){const g=new Ls(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(a,s,f);return g}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Pf{constructor(a,s){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._globalState=s}hasValue(a){return this._values[a].value!==void 0}getValue(a){return St(this._values[a].value)}setValue(a,s){this._values[a]=new Zu(this._values[a].property,s===null?void 0:St(s),this._globalState)}serialize(){const a={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(a[s]=f)}return a}possiblyEvaluate(a,s,f){const g=new Ls(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(a,s,f);return g}}class Eo{constructor(a,s,f){this.property=a,this.value=s,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,s,f,g){return this.property.evaluate(this.value,this.parameters,a,s,f,g)}}class Ls{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class ar{constructor(a){this.specification=a}possiblyEvaluate(a,s){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(s)}interpolate(a,s,f){const g=ni[this.specification.type];return g?g(a,s,f):a}}class gr{constructor(a,s){this.specification=a,this.overrides=s}possiblyEvaluate(a,s,f,g){return new Eo(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(s,null,{},f,g)}:a.expression,s)}interpolate(a,s,f){if(a.value.kind!=="constant"||s.value.kind!=="constant")return a;if(a.value.value===void 0||s.value.value===void 0)return new Eo(this,{kind:"constant",value:void 0},a.parameters);const g=ni[this.specification.type];if(g){const x=g(a.value.value,s.value.value,f);return new Eo(this,{kind:"constant",value:x},a.parameters)}return a}evaluate(a,s,f,g,x,b){return a.kind==="constant"?a.value:a.evaluate(s,f,g,x,b)}}class Xu extends gr{possiblyEvaluate(a,s,f,g){if(a.value===void 0)return new Eo(this,{kind:"constant",value:void 0},s);if(a.expression.kind==="constant"){const x=a.expression.evaluate(s,null,{},f,g),b=a.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(b,b,b,s);return new Eo(this,{kind:"constant",value:C},s)}if(a.expression.kind==="camera"){const x=this._calculate(a.expression.evaluate({zoom:s.zoom-1}),a.expression.evaluate({zoom:s.zoom}),a.expression.evaluate({zoom:s.zoom+1}),s);return new Eo(this,{kind:"constant",value:x},s)}return new Eo(this,a.expression,s)}evaluate(a,s,f,g,x,b){if(a.kind==="source"){const C=a.evaluate(s,f,g,x,b);return this._calculate(C,C,C,s)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(s.zoom)-1},f,g),a.evaluate({zoom:Math.floor(s.zoom)},f,g),a.evaluate({zoom:Math.floor(s.zoom)+1},f,g),s):a.value}_calculate(a,s,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:f,to:s}}interpolate(a){return a}}class Jh{constructor(a){this.specification=a}possiblyEvaluate(a,s,f,g){if(a.value!==void 0){if(a.expression.kind==="constant"){const x=a.expression.evaluate(s,null,{},f,g);return this._calculate(x,x,x,s)}return this._calculate(a.expression.evaluate(new Mn(Math.floor(s.zoom-1),s)),a.expression.evaluate(new Mn(Math.floor(s.zoom),s)),a.expression.evaluate(new Mn(Math.floor(s.zoom+1),s)),s)}}_calculate(a,s,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:f,to:s}}interpolate(a){return a}}class $o{constructor(a){this.specification=a}possiblyEvaluate(a,s,f,g){return!!a.expression.evaluate(s,null,{},f,g)}interpolate(){return!1}}class xi{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in a){const f=a[s];f.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Zu(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[s]=new Ku(f,void 0);this.defaultTransitioningPropertyValues[s]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Jt("DataDrivenProperty",gr),Jt("DataConstantProperty",ar),Jt("CrossFadedDataDrivenProperty",Xu),Jt("CrossFadedProperty",Jh),Jt("ColorRampProperty",$o);class io extends Ur{constructor(a,s,f){if(super(),this.id=a.id,this.type=a.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(g,x){return new No(g,x)})(this.visibility,f),a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter,this._featureFilter=$u(a.filter,f)),s.layout&&(this._unevaluatedLayout=new Pf(s.layout,f)),s.paint)){this._transitionablePaint=new Ql(s.paint,f);for(const g in a.paint)this.setPaintProperty(g,a.paint[g],{validate:!1});for(const g in a.layout)this.setLayoutProperty(g,a.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ls(s.paint)}}setFilter(a){this.filter=a,this._featureFilter=$u(a,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}getLayoutAffectingGlobalStateRefs(){const a=new Set;for(const s of this._visibilityExpression.getGlobalStateRefs())a.add(s);if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[s];for(const g of f.getGlobalStateRefs())a.add(g)}for(const s of this._featureFilter.getGlobalStateRefs())a.add(s);return a}getPaintAffectingGlobalStateRefs(){var a;const s=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const g=this._transitionablePaint._values[f].value;for(const x of g.getGlobalStateRefs()){const b=(a=s.get(x))!==null&&a!==void 0?a:[];b.push({name:f,value:g.value}),s.set(x,b)}}return s}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(a,s,f={}){if(s==null||!this._validate(Bo,`layers.${this.id}.layout.${a}`,a,s,f))return a==="visibility"?(this.visibility=s,this._visibilityExpression.setValue(s),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(a,s)}getPaintProperty(a){return a.endsWith(Zc)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,s,f={}){if(s!=null&&this._validate(Fo,`layers.${this.id}.paint.${a}`,a,s,f))return!1;if(a.endsWith(Zc))return this._transitionablePaint.setTransition(a.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[a],x=g.property.specification["property-type"]==="cross-faded-data-driven",b=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(a,s),this._handleSpecialPaintPropertyUpdate(a);const I=this._transitionablePaint._values[a].value;return I.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(a,C,I)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,s,f){return!1}isHidden(a=this.minzoom,s=!1){return!!(this.minzoom&&a<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&a>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(a,s){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,s)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),ir(a,((s,f)=>!(s===void 0||f==="layout"&&!Object.keys(s).length||f==="paint"&&!Object.keys(s).length)))}_validate(a,s,f,g,x={}){return(!x||x.validate!==!1)&&Vo(this,a.call(mi,{key:s,layerType:this.type,objectKey:f,value:g,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const s=this.paint.get(a);if(s instanceof Eo&&Po(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let Ef;var Ds={get paint(){return Ef=Ef||new xi({"raster-opacity":new ar(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ar(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ar(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ar(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new ar(tt.paint_raster["raster-saturation"]),"raster-contrast":new ar(tt.paint_raster["raster-contrast"]),"raster-resampling":new ar(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new ar(tt.paint_raster["raster-fade-duration"])})}};class Jl extends io{constructor(a,s){super(a,Ds,s)}}const Cf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kc{constructor(a,s){this._structArray=a,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,s){return a._trim(),s&&(a.isTransferred=!0,s.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const s=Object.create(this.prototype);return s.arrayBuffer=a.arrayBuffer,s.length=a.length,s.capacity=a.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gi(u,a=1){let s=0,f=0;return{members:u.map((g=>{const x=Cf[g.type].BYTES_PER_ELEMENT,b=s=us(s,Math.max(a,x)),C=g.components||1;return f=Math.max(f,x),s+=x*C,{name:g.name,type:g.type,components:C,offset:b}})),size:us(s,Math.max(f,a)),alignment:a}}function us(u,a){return Math.ceil(u/a)*a}class ao extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.int16[g+0]=s,this.int16[g+1]=f,a}}ao.prototype.bytesPerElement=4,Jt("StructArrayLayout2i4",ao);class eu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.int16[x+0]=s,this.int16[x+1]=f,this.int16[x+2]=g,a}}eu.prototype.bytesPerElement=6,Jt("StructArrayLayout3i6",eu);class Yu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,s,f,g)}emplace(a,s,f,g,x){const b=4*a;return this.int16[b+0]=s,this.int16[b+1]=f,this.int16[b+2]=g,this.int16[b+3]=x,a}}Yu.prototype.bytesPerElement=8,Jt("StructArrayLayout4i8",Yu);class Rs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=6*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=x,this.int16[I+4]=b,this.int16[I+5]=C,a}}Rs.prototype.bytesPerElement=12,Jt("StructArrayLayout2i4i12",Rs);class ed extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=4*a,j=8*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.uint8[j+4]=g,this.uint8[j+5]=x,this.uint8[j+6]=b,this.uint8[j+7]=C,a}}ed.prototype.bytesPerElement=8,Jt("StructArrayLayout2i4ub8",ed);class js extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.float32[g+0]=s,this.float32[g+1]=f,a}}js.prototype.bytesPerElement=8,Jt("StructArrayLayout2f8",js);class zs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V){const G=this.length;return this.resize(G+1),this.emplace(G,a,s,f,g,x,b,C,I,j,V)}emplace(a,s,f,g,x,b,C,I,j,V,G){const H=10*a;return this.uint16[H+0]=s,this.uint16[H+1]=f,this.uint16[H+2]=g,this.uint16[H+3]=x,this.uint16[H+4]=b,this.uint16[H+5]=C,this.uint16[H+6]=I,this.uint16[H+7]=j,this.uint16[H+8]=V,this.uint16[H+9]=G,a}}zs.prototype.bytesPerElement=20,Jt("StructArrayLayout10ui20",zs);class Xc extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I){const j=this.length;return this.resize(j+1),this.emplace(j,a,s,f,g,x,b,C,I)}emplace(a,s,f,g,x,b,C,I,j){const V=8*a;return this.uint16[V+0]=s,this.uint16[V+1]=f,this.uint16[V+2]=g,this.uint16[V+3]=x,this.uint16[V+4]=b,this.uint16[V+5]=C,this.uint16[V+6]=I,this.uint16[V+7]=j,a}}Xc.prototype.bytesPerElement=16,Jt("StructArrayLayout8ui16",Xc);class Gn extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,H){const X=this.length;return this.resize(X+1),this.emplace(X,a,s,f,g,x,b,C,I,j,V,G,H)}emplace(a,s,f,g,x,b,C,I,j,V,G,H,X){const ee=12*a;return this.int16[ee+0]=s,this.int16[ee+1]=f,this.int16[ee+2]=g,this.int16[ee+3]=x,this.uint16[ee+4]=b,this.uint16[ee+5]=C,this.uint16[ee+6]=I,this.uint16[ee+7]=j,this.int16[ee+8]=V,this.int16[ee+9]=G,this.int16[ee+10]=H,this.int16[ee+11]=X,a}}Gn.prototype.bytesPerElement=24,Jt("StructArrayLayout4i4ui4i24",Gn);class Qu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.float32[x+0]=s,this.float32[x+1]=f,this.float32[x+2]=g,a}}Qu.prototype.bytesPerElement=12,Jt("StructArrayLayout3f12",Qu);class Ju extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint32[1*a+0]=s,a}}Ju.prototype.bytesPerElement=4,Jt("StructArrayLayout1ul4",Ju);class td extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j){const V=this.length;return this.resize(V+1),this.emplace(V,a,s,f,g,x,b,C,I,j)}emplace(a,s,f,g,x,b,C,I,j,V){const G=10*a,H=5*a;return this.int16[G+0]=s,this.int16[G+1]=f,this.int16[G+2]=g,this.int16[G+3]=x,this.int16[G+4]=b,this.int16[G+5]=C,this.uint32[H+3]=I,this.uint16[G+8]=j,this.uint16[G+9]=V,a}}td.prototype.bytesPerElement=20,Jt("StructArrayLayout6i1ul2ui20",td);class ul extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=6*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=x,this.int16[I+4]=b,this.int16[I+5]=C,a}}ul.prototype.bytesPerElement=12,Jt("StructArrayLayout2i2i2i12",ul);class cl extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x){const b=this.length;return this.resize(b+1),this.emplace(b,a,s,f,g,x)}emplace(a,s,f,g,x,b){const C=4*a,I=8*a;return this.float32[C+0]=s,this.float32[C+1]=f,this.float32[C+2]=g,this.int16[I+6]=x,this.int16[I+7]=b,a}}cl.prototype.bytesPerElement=16,Jt("StructArrayLayout2f1f2i16",cl);class hl extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=16*a,j=4*a,V=8*a;return this.uint8[I+0]=s,this.uint8[I+1]=f,this.float32[j+1]=g,this.float32[j+2]=x,this.int16[V+6]=b,this.int16[V+7]=C,a}}hl.prototype.bytesPerElement=16,Jt("StructArrayLayout2ub2f2i16",hl);class Wn extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.uint16[x+0]=s,this.uint16[x+1]=f,this.uint16[x+2]=g,a}}Wn.prototype.bytesPerElement=6,Jt("StructArrayLayout3ui6",Wn);class ai extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe)}emplace(a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe,Pe){const me=24*a,ge=12*a,Ce=48*a;return this.int16[me+0]=s,this.int16[me+1]=f,this.uint16[me+2]=g,this.uint16[me+3]=x,this.uint32[ge+2]=b,this.uint32[ge+3]=C,this.uint32[ge+4]=I,this.uint16[me+10]=j,this.uint16[me+11]=V,this.uint16[me+12]=G,this.float32[ge+7]=H,this.float32[ge+8]=X,this.uint8[Ce+36]=ee,this.uint8[Ce+37]=ie,this.uint8[Ce+38]=se,this.uint32[ge+10]=fe,this.int16[me+22]=Pe,a}}ai.prototype.bytesPerElement=48,Jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ai);class ji extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt){const Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt)}emplace(a,s,f,g,x,b,C,I,j,V,G,H,X,ee,ie,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt,Ct){const dt=32*a,sr=16*a;return this.int16[dt+0]=s,this.int16[dt+1]=f,this.int16[dt+2]=g,this.int16[dt+3]=x,this.int16[dt+4]=b,this.int16[dt+5]=C,this.int16[dt+6]=I,this.int16[dt+7]=j,this.uint16[dt+8]=V,this.uint16[dt+9]=G,this.uint16[dt+10]=H,this.uint16[dt+11]=X,this.uint16[dt+12]=ee,this.uint16[dt+13]=ie,this.uint16[dt+14]=se,this.uint16[dt+15]=fe,this.uint16[dt+16]=Pe,this.uint16[dt+17]=me,this.uint16[dt+18]=ge,this.uint16[dt+19]=Ce,this.uint16[dt+20]=Re,this.uint16[dt+21]=nt,this.uint16[dt+22]=kt,this.uint32[sr+12]=_t,this.float32[sr+13]=Ot,this.float32[sr+14]=Kt,this.uint16[dt+30]=Rt,this.uint16[dt+31]=Ct,a}}ji.prototype.bytesPerElement=64,Jt("StructArrayLayout8i15ui1ul2f2ui64",ji);class ec extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.float32[1*a+0]=s,a}}ec.prototype.bytesPerElement=4,Jt("StructArrayLayout1f4",ec);class tu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.uint16[6*a+0]=s,this.float32[x+1]=f,this.float32[x+2]=g,a}}tu.prototype.bytesPerElement=12,Jt("StructArrayLayout1ui2f12",tu);class tc extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=4*a;return this.uint32[2*a+0]=s,this.uint16[x+2]=f,this.uint16[x+3]=g,a}}tc.prototype.bytesPerElement=8,Jt("StructArrayLayout1ul2ui8",tc);class w extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.uint16[g+0]=s,this.uint16[g+1]=f,a}}w.prototype.bytesPerElement=4,Jt("StructArrayLayout2ui4",w);class i extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint16[1*a+0]=s,a}}i.prototype.bytesPerElement=2,Jt("StructArrayLayout1ui2",i);class c extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,s,f,g)}emplace(a,s,f,g,x){const b=4*a;return this.float32[b+0]=s,this.float32[b+1]=f,this.float32[b+2]=g,this.float32[b+3]=x,a}}c.prototype.bytesPerElement=16,Jt("StructArrayLayout4f16",c);class m extends Kc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class v extends td{get(a){return new m(this,a)}}Jt("CollisionBoxArray",v);class E extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class k extends ai{get(a){return new E(this,a)}}Jt("PlacedSymbolArray",k);class D extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}D.prototype.size=64;class N extends ji{get(a){return new D(this,a)}}Jt("SymbolInstanceArray",N);class U extends ec{getoffsetX(a){return this.float32[1*a+0]}}Jt("GlyphOffsetArray",U);class W extends eu{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Jt("SymbolLineVertexArray",W);class J extends Kc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class Y extends tu{get(a){return new J(this,a)}}Jt("TextAnchorOffsetArray",Y);class oe extends Kc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}oe.prototype.size=8;class ce extends tc{get(a){return new oe(this,a)}}Jt("FeatureIndexArray",ce);class ye extends ao{}class _e extends ao{}class ve extends ao{}class we extends Rs{}class Le extends ed{}class Se extends js{}class ke extends zs{}class Fe extends Xc{}class Te extends Gn{}class Ge extends Qu{}class ht extends Ju{}class at extends ul{}class ot extends hl{}class st extends Wn{}class Nt extends w{}const Vt=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:It}=Vt;class Yt{constructor(a=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=a}prepareSegment(a,s,f,g){const x=this.segments[this.segments.length-1];return a>Yt.MAX_VERTEX_ARRAY_LENGTH&&Tr(`Max vertices per segment is ${Yt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Yt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+a>Yt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g?this.createNewSegment(s,f,g):x}createNewSegment(a,s,f){const g={vertexOffset:a.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(g.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(a,s,f){return this.prepareSegment(0,a,s,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const a of this.segments)for(const s in a.vaos)a.vaos[s].destroy()}static simpleSegment(a,s,f,g){return new Yt([{vertexOffset:a,primitiveOffset:s,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function zr(u,a){return 256*(u=tr(Math.floor(u),0,255))+tr(Math.floor(a),0,255)}Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt("SegmentVector",Yt);const Sn=gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Yn=gi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var On,Qn,Ln,Jn={exports:{}},oi={exports:{}},na={exports:{}},Si=(function(){if(Ln)return Jn.exports;Ln=1;var u=(On||(On=1,oi.exports=function(s,f){var g,x,b,C,I,j,V,G;for(x=s.length-(g=3&s.length),b=f,I=3432918353,j=461845907,G=0;G<x;)V=255&s.charCodeAt(G)|(255&s.charCodeAt(++G))<<8|(255&s.charCodeAt(++G))<<16|(255&s.charCodeAt(++G))<<24,++G,b=27492+(65535&(C=5*(65535&(b=(b^=V=(65535&(V=(V=(65535&V)*I+(((V>>>16)*I&65535)<<16)&4294967295)<<15|V>>>17))*j+(((V>>>16)*j&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(V=0,g){case 3:V^=(255&s.charCodeAt(G+2))<<16;case 2:V^=(255&s.charCodeAt(G+1))<<8;case 1:b^=V=(65535&(V=(V=(65535&(V^=255&s.charCodeAt(G)))*I+(((V>>>16)*I&65535)<<16)&4294967295)<<15|V>>>17))*j+(((V>>>16)*j&65535)<<16)&4294967295}return b^=s.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),oi.exports),a=(Qn||(Qn=1,na.exports=function(s,f){for(var g,x=s.length,b=f^x,C=0;x>=4;)g=1540483477*(65535&(g=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:b^=(255&s.charCodeAt(C+2))<<16;case 2:b^=(255&s.charCodeAt(C+1))<<8;case 1:b=1540483477*(65535&(b^=255&s.charCodeAt(C)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),na.exports);return Jn.exports=u,Jn.exports.murmur3=u,Jn.exports.murmur2=a,Jn.exports})(),_n=S(Si);class qi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,s,f,g){this.ids.push(cs(a)),this.positions.push(s,f,g)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=cs(a);let f=0,g=this.ids.length-1;for(;f<g;){const b=f+g>>1;this.ids[b]>=s?g=b:f=b+1}const x=[];for(;this.ids[f]===s;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(a,s){const f=new Float64Array(a.ids),g=new Uint32Array(a.positions);return Ns(f,g,0,f.length-1),s&&s.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(a){const s=new qi;return s.ids=a.ids,s.positions=a.positions,s.indexed=!0,s}}function cs(u){const a=+u;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:_n(String(u))}function Ns(u,a,s,f){for(;s<f;){const g=u[s+f>>1];let x=s-1,b=f+1;for(;;){do x++;while(u[x]<g);do b--;while(u[b]>g);if(x>=b)break;hs(u,x,b),hs(a,3*x,3*b),hs(a,3*x+1,3*b+1),hs(a,3*x+2,3*b+2)}b-s<f-b?(Ns(u,a,s,b),s=b+1):(Ns(u,a,b+1,f),f=b)}}function hs(u,a,s){const f=u[a];u[a]=u[s],u[s]=f}Jt("FeaturePositionMap",qi);class Fa{constructor(a,s){this.gl=a.gl,this.location=s}}class dl extends Fa{constructor(a,s){super(a,s),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Fs extends Fa{constructor(a,s){super(a,s),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class fl extends Fa{constructor(a,s){super(a,s),this.current=Br.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const oo=new Float32Array(16);function Bs(u){return[zr(255*u.r,255*u.g),zr(255*u.b,255*u.a)]}class Uo{constructor(a,s,f){this.value=a,this.uniformNames=s.map((g=>`u_${g}`)),this.type=f}setUniform(a,s,f){a.set(f.constantOr(this.value))}getBinding(a,s,f){return this.type==="color"?new fl(a,s):new dl(a,s)}}class qo{constructor(a,s){this.uniformNames=s.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=a.tlbr}setConstantDashPositions(a,s){this.dashTo=[0,a.y,a.height,a.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(a,s,f,g){let x=null;g==="u_pattern_to"?x=this.patternTo:g==="u_pattern_from"?x=this.patternFrom:g==="u_dasharray_to"?x=this.dashTo:g==="u_dasharray_from"?x=this.dashFrom:g==="u_pixel_ratio_to"?x=this.pixelRatioTo:g==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&a.set(x)}getBinding(a,s,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new Fs(a,s):new dl(a,s)}}class zn{constructor(a,s,f,g){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=s.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(a,s,f){const g=this.paintVertexArray.length,x=this.expression.evaluate(new Mn(0,f),s,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(a),this._setPaintValue(g,a,x)}updatePaintArray(a,s,f,g,x){const b=this.expression.evaluate(new Mn(0,x),f,g);this._setPaintValue(a,s,b)}_setPaintValue(a,s,f){if(this.type==="color"){const g=Bs(f);for(let x=a;x<s;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=a;g<s;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dn{constructor(a,s,f,g,x,b){this.expression=a,this.uniformNames=s.map((C=>`u_${C}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=s.map((C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(a,s,f){const g=this.expression.evaluate(new Mn(this.zoom,f),s,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Mn(this.zoom+1,f),s,{},f.canonical,[],f.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(b,a,g,x)}updatePaintArray(a,s,f,g,x){const b=this.expression.evaluate(new Mn(this.zoom,x),f,g),C=this.expression.evaluate(new Mn(this.zoom+1,x),f,g);this._setPaintValue(a,s,b,C)}_setPaintValue(a,s,f,g){if(this.type==="color"){const x=Bs(f),b=Bs(g);for(let C=a;C<s;C++)this.paintVertexArray.emplace(C,x[0],x[1],b[0],b[1])}else{for(let x=a;x<s;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,s){const f=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=tr(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(g)}getBinding(a,s,f){return new dl(a,s)}}class zi{constructor(a,s,f,g,x,b){this.expression=a,this.type=s,this.useIntegerZoom=f,this.zoom=g,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(a,s,f){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(g,a,this.getPositionIds(s),f)}updatePaintArray(a,s,f,g,x){this._setPaintValues(a,s,this.getPositionIds(f),x)}_setPaintValues(a,s,f,g){const x=this.getPositions(g);if(!x||!f)return;const b=x[f.min],C=x[f.mid],I=x[f.max];if(b&&C&&I)for(let j=a;j<s;j++)this.emplace(this.zoomInPaintVertexArray,j,C,b),this.emplace(this.zoomOutPaintVertexArray,j,C,I)}upload(a){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gi extends zi{getPositions(a){return a.imagePositions}getPositionIds(a){return a.patterns&&a.patterns[this.layerId]}getVertexAttributes(){return Sn.members}emplace(a,s,f,g){a.emplace(s,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],g.tlbr[0],g.tlbr[1],g.tlbr[2],g.tlbr[3],f.pixelRatio,g.pixelRatio)}}class Ba extends zi{getPositions(a){return a.dashPositions}getPositionIds(a){return a.dashes&&a.dashes[this.layerId]}getVertexAttributes(){return Yn.members}emplace(a,s,f,g){a.emplace(s,0,f.y,f.height,f.width,0,g.y,g.height,g.width)}}class ba{constructor(a,s,f){this.binders={},this._buffers=[];const g=[];for(const x in a.paint._values){if(!f(x))continue;const b=a.paint.get(x);if(!(b instanceof Eo&&Po(b.property.specification)))continue;const C=bg(x,a.type),I=b.value,j=b.property.specification.type,V=b.property.useIntegerZoom,G=b.property.specification["property-type"],H=G==="cross-faded"||G==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=H?new qo(I.value,C):new Uo(I.value,C,j),g.push(`/u_${x}`);else if(I.kind==="source"||H){const X=em(x,j,"source");this.binders[x]=H?x==="line-dasharray"?new Ba(I,j,V,s,X,a.id):new Gi(I,j,V,s,X,a.id):new zn(I,C,j,X),g.push(`/a_${x}`)}else{const X=em(x,j,"composite");this.binders[x]=new Dn(I,C,j,V,s,X),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(a){const s=this.binders[a];return s instanceof zn||s instanceof Dn?s.maxValue:0}populatePaintArrays(a,s,f){for(const g in this.binders){const x=this.binders[g];(x instanceof zn||x instanceof Dn||x instanceof zi)&&x.populatePaintArray(a,s,f)}}setConstantPatternPositions(a,s){for(const f in this.binders){const g=this.binders[f];g instanceof qo&&g.setConstantPatternPositions(a,s)}}setConstantDashPositions(a,s){for(const f in this.binders){const g=this.binders[f];g instanceof qo&&g.setConstantDashPositions(a,s)}}updatePaintArrays(a,s,f,g,x){let b=!1;for(const C in a){const I=s.getPositions(C);for(const j of I){const V=f.feature(j.index);for(const G in this.binders){const H=this.binders[G];if((H instanceof zn||H instanceof Dn||H instanceof zi)&&H.expression.isStateDependent===!0){const X=g.paint.get(G);H.expression=X.value,H.updatePaintArray(j.start,j.end,V,a[C],x),b=!0}}}}return b}defines(){const a=[];for(const s in this.binders){const f=this.binders[s];(f instanceof Uo||f instanceof qo)&&a.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return a}getBinderAttributes(){const a=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof zn||f instanceof Dn)for(let g=0;g<f.paintVertexAttributes.length;g++)a.push(f.paintVertexAttributes[g].name);else if(f instanceof zi){const g=f.getVertexAttributes();for(const x of g)a.push(x.name)}}return a}getBinderUniforms(){const a=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Uo||f instanceof qo||f instanceof Dn)for(const g of f.uniformNames)a.push(g)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,s){const f=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Uo||x instanceof qo||x instanceof Dn){for(const b of x.uniformNames)if(s[b]){const C=x.getBinding(a,s[b],b);f.push({name:b,property:g,binding:C})}}}return f}setUniforms(a,s,f,g){for(const{name:x,property:b,binding:C}of s)this.binders[b].setUniform(C,g,f.get(b),x)}updatePaintBuffers(a){this._buffers=[];for(const s in this.binders){const f=this.binders[s];if(a&&f instanceof zi){const g=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(f instanceof zn||f instanceof Dn)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(a){for(const s in this.binders){const f=this.binders[s];(f instanceof zn||f instanceof Dn||f instanceof zi)&&f.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const s=this.binders[a];(s instanceof zn||s instanceof Dn||s instanceof zi)&&s.destroy()}}}class ru{constructor(a,s,f=()=>!0){this.programConfigurations={};for(const g of a)this.programConfigurations[g.id]=new ba(g,s,f);this.needsUpload=!1,this._featureMap=new qi,this._bufferOffset=0}populatePaintArrays(a,s,f,g){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(a,s,g);s.id!==void 0&&this._featureMap.add(s.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,s,f,g){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(a,this._featureMap,s,x,g)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function bg(u,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${a}-`,"").replace(/-/g,"_")]}function em(u,a,s){const f={color:{source:js,composite:c},number:{source:ec,composite:js}},g=(function(x){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:Fe,composite:Fe}}[x]})(u);return g&&g[s]||f[a][s]}Jt("ConstantBinder",Uo),Jt("CrossFadedConstantBinder",qo),Jt("SourceExpressionBinder",zn),Jt("CrossFadedPatternBinder",Gi),Jt("CrossFadedDasharrayBinder",Ba),Jt("CompositeExpressionBinder",Dn),Jt("ProgramConfiguration",ba,{omit:["_buffers"]}),Jt("ProgramConfigurationSet",ru);const Tf=Math.pow(2,14)-1,pl=-Tf-1;function Vs(u){const a=Qe/u.extent,s=u.loadGeometry();for(let f=0;f<s.length;f++){const g=s[f];for(let x=0;x<g.length;x++){const b=g[x],C=Math.round(b.x*a),I=Math.round(b.y*a);b.x=tr(C,pl,Tf),b.y=tr(I,pl,Tf),(C<b.x||C>b.x+1||I<b.y||I>b.y+1)&&Tr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ml(u,a){return{type:u.type,id:u.id,properties:u.properties,geometry:a?Vs(u):[]}}const rd=-32768;function Mf(u,a,s,f,g){u.emplaceBack(rd+8*a+f,rd+8*s+g)}class nd{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.layoutVertexArray=new _e,this.indexArray=new st,this.segments=new Yt,this.programConfigurations=new ru(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){const g=this.layers[0],x=[];let b=null,C=!1,I=g.type==="heatmap";if(g.type==="circle"){const V=g;b=V.layout.get("circle-sort-key"),C=!b.isConstant(),I=I||V.paint.get("circle-pitch-alignment")==="map"}const j=I?s.subdivisionGranularity.circle:1;for(const{feature:V,id:G,index:H,sourceLayerIndex:X}of a){const ee=this.layers[0]._featureFilter.needGeometry,ie=ml(V,ee);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),ie,f))continue;const se=C?b.evaluate(ie,{},f):void 0,fe={id:G,properties:V.properties,type:V.type,sourceLayerIndex:X,index:H,geometry:ee?ie.geometry:Vs(V),patterns:{},sortKey:se};x.push(fe)}C&&x.sort(((V,G)=>V.sortKey-G.sortKey));for(const V of x){const{geometry:G,index:H,sourceLayerIndex:X}=V,ee=a[H].feature;this.addFeature(V,G,H,f,j),s.featureIndex.insert(ee,G,H,X,this.index)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,It),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,s,f,g,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=b.length;for(const I of s)for(const j of I){const V=j.x,G=j.y;if(V<0||V>=Qe||G<0||G>=Qe)continue;const H=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,a.sortKey),X=H.vertexLength;for(let ee=0;ee<C;ee++)for(let ie=0;ie<C;ie++)Mf(this.layoutVertexArray,V,G,b[ie],b[ee]);for(let ee=0;ee<C-1;ee++)for(let ie=0;ie<C-1;ie++){const se=X+ee*C+ie,fe=X+(ee+1)*C+ie;this.indexArray.emplaceBack(se,fe+1,se+1),this.indexArray.emplaceBack(se,fe,fe+1)}H.vertexLength+=C*C,H.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:{},canonical:g})}}function Yc(u,a){for(let s=0;s<u.length;s++)if(rc(a,u[s]))return!0;for(let s=0;s<a.length;s++)if(rc(u,a[s]))return!0;return!!Af(u,a)}function kf(u,a,s){return!!rc(u,a)||!!wg(a,u,s)}function iv(u,a){if(u.length===1)return ov(a,u[0]);for(let s=0;s<a.length;s++){const f=a[s];for(let g=0;g<f.length;g++)if(rc(u,f[g]))return!0}for(let s=0;s<u.length;s++)if(ov(a,u[s]))return!0;for(let s=0;s<a.length;s++)if(Af(u,a[s]))return!0;return!1}function av(u,a,s){if(u.length>1){if(Af(u,a))return!0;for(let f=0;f<a.length;f++)if(wg(a[f],u,s))return!0}for(let f=0;f<u.length;f++)if(wg(u[f],a,s))return!0;return!1}function Af(u,a){if(u.length===0||a.length===0)return!1;for(let s=0;s<u.length-1;s++){const f=u[s],g=u[s+1];for(let x=0;x<a.length-1;x++)if(y1(f,g,a[x],a[x+1]))return!0}return!1}function y1(u,a,s,f){return wr(u,s,f)!==wr(a,s,f)&&wr(u,a,s)!==wr(u,a,f)}function wg(u,a,s){const f=s*s;if(a.length===1)return u.distSqr(a[0])<f;for(let g=1;g<a.length;g++)if(Sg(u,a[g-1],a[g])<f)return!0;return!1}function Sg(u,a,s){const f=a.distSqr(s);if(f===0)return u.distSqr(a);const g=((u.x-a.x)*(s.x-a.x)+(u.y-a.y)*(s.y-a.y))/f;return u.distSqr(g<0?a:g>1?s:s.sub(a)._mult(g)._add(a))}function ov(u,a){let s,f,g,x=!1;for(let b=0;b<u.length;b++){s=u[b];for(let C=0,I=s.length-1;C<s.length;I=C++)f=s[C],g=s[I],f.y>a.y!=g.y>a.y&&a.x<(g.x-f.x)*(a.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function rc(u,a){let s=!1;for(let f=0,g=u.length-1;f<u.length;g=f++){const x=u[f],b=u[g];x.y>a.y!=b.y>a.y&&a.x<(b.x-x.x)*(a.y-x.y)/(b.y-x.y)+x.x&&(s=!s)}return s}function nc(u,a,s){const f=s[0],g=s[2];if(u.x<f.x&&a.x<f.x||u.x>g.x&&a.x>g.x||u.y<f.y&&a.y<f.y||u.y>g.y&&a.y>g.y)return!1;const x=wr(u,a,s[0]);return x!==wr(u,a,s[1])||x!==wr(u,a,s[2])||x!==wr(u,a,s[3])}function If(u,a,s){const f=a.paint.get(u).value;return f.kind==="constant"?f.value:s.programConfigurations.get(a.id).getMaxValue(u)}function tm(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Of(u,a,s,f,g){if(!a[0]&&!a[1])return u;const x=_.convert(a)._mult(g);s==="viewport"&&x._rotate(-f);const b=[];for(let C=0;C<u.length;C++)b.push(u[C].sub(x));return b}function c0(u){const a=[];for(let s=0;s<u.length;s++){const f=u[s],g=a.at(-1);(s===0||g&&!f.equals(g))&&a.push(f)}return a}function h0({queryGeometry:u,size:a},s){return kf(u,s,a)}function rm({queryGeometry:u,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){return kf(u,x,a*(s.projectTileCoordinates(x.x,x.y,f,g).signedDistanceFromCamera/s.cameraToCenterDistance))}function so({queryGeometry:u,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){const b=s.projectTileCoordinates(x.x,x.y,f,g).signedDistanceFromCamera,C=a*(s.cameraToCenterDistance/b);return kf(u,Lf(x,s,f,g),C)}function v1({queryGeometry:u,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){return kf(u,Lf(x,s,f,g),a)}function d0({queryGeometry:u,size:a,transform:s,unwrappedTileID:f,getElevation:g,pitchAlignment:x="map",pitchScale:b="map"},C){const I=x==="map"?b==="map"?h0:rm:b==="map"?so:v1,j={queryGeometry:u,size:a,transform:s,unwrappedTileID:f,getElevation:g};for(const V of C)for(const G of V)if(I(j,G))return!0;return!1}function Lf(u,a,s,f){const g=a.projectTileCoordinates(u.x,u.y,s,f).point;return new _((.5*g.x+.5)*a.width,(.5*-g.y+.5)*a.height)}let Va,f0;Jt("CircleBucket",nd,{omit:["layers"]});var yr={get paint(){return f0=f0||new xi({"circle-radius":new gr(tt.paint_circle["circle-radius"]),"circle-color":new gr(tt.paint_circle["circle-color"]),"circle-blur":new gr(tt.paint_circle["circle-blur"]),"circle-opacity":new gr(tt.paint_circle["circle-opacity"]),"circle-translate":new ar(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new ar(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ar(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ar(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gr(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gr(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gr(tt.paint_circle["circle-stroke-opacity"])})},get layout(){return Va=Va||new xi({"circle-sort-key":new gr(tt.layout_circle["circle-sort-key"])})}};class Df extends io{constructor(a,s){super(a,yr,s)}createBucket(a){return new nd(a)}queryRadius(a){const s=a;return If("circle-radius",this,s)+If("circle-stroke-width",this,s)+tm(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:I}){const j=Of(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),V=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),G=this.paint.get("circle-pitch-scale"),H=this.paint.get("circle-pitch-alignment");let X,ee;return H==="map"?(X=j,ee=V*b):(X=(function(ie,se,fe,Pe){return ie.map((me=>Lf(me,se,fe,Pe)))})(j,x,C,I),ee=V),d0({queryGeometry:X,size:ee,transform:x,unwrappedTileID:C,getElevation:I,pitchAlignment:H,pitchScale:G},g)}}class Pg extends nd{}let sv;Jt("HeatmapBucket",Pg,{omit:["layers"]});var _1={get paint(){return sv=sv||new xi({"heatmap-radius":new gr(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gr(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ar(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $o(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ar(tt.paint_heatmap["heatmap-opacity"])})}};function id(u,{width:a,height:s},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==a*s*f)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${a*s*f}`)}else g=new Uint8Array(a*s*f);return u.width=a,u.height=s,u.data=g,u}function nm(u,{width:a,height:s},f){if(a===u.width&&s===u.height)return;const g=id({},{width:a,height:s},f);im(u,g,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,a),height:Math.min(u.height,s)},f),u.width=a,u.height=s,u.data=g.data}function im(u,a,s,f,g,x){if(g.width===0||g.height===0)return a;if(g.width>u.width||g.height>u.height||s.x>u.width-g.width||s.y>u.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>a.width||g.height>a.height||f.x>a.width-g.width||f.y>a.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const b=u.data,C=a.data;if(b===C)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<g.height;I++){const j=((s.y+I)*u.width+s.x)*x,V=((f.y+I)*a.width+f.x)*x;for(let G=0;G<g.width*x;G++)C[V+G]=b[j+G]}return a}class Rf{constructor(a,s){id(this,a,1,s)}resize(a){nm(this,a,1)}clone(){return new Rf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,f,g,x){im(a,s,f,g,x,1)}}class lo{constructor(a,s){id(this,a,4,s)}resize(a){nm(this,a,4)}replace(a,s){s?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,f,g,x){im(a,s,f,g,x,4)}setPixel(a,s,f){const g=4*(a*this.width+s);this.data[g+0]=Math.round(255*f.r/f.a),this.data[g+1]=Math.round(255*f.g/f.a),this.data[g+2]=Math.round(255*f.b/f.a),this.data[g+3]=Math.round(255*f.a)}}function lv(u){const a={},s=u.resolution||256,f=u.clips?u.clips.length:1,g=u.image||new lo({width:s,height:f});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const x=(b,C,I)=>{a[u.evaluationKey]=I;const j=u.expression.evaluate(a);g.setPixel(b/4/s,C/4,j)};if(u.clips)for(let b=0,C=0;b<f;++b,C+=4*s)for(let I=0,j=0;I<s;I++,j+=4){const V=I/(s-1),{start:G,end:H}=u.clips[b];x(C,j,G*(1-V)+H*V)}else for(let b=0,C=0;b<s;b++,C+=4)x(0,C,b/(s-1));return g}Jt("AlphaImage",Rf),Jt("RGBAImage",lo);const am="big-fb";class uv extends io{createBucket(a){return new Pg(a)}constructor(a,s){super(a,_1,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(am)&&this.heatmapFbos.delete(am)}queryRadius(a){return If("heatmap-radius",this,a)}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:I}){return d0({queryGeometry:a,size:this.paint.get("heatmap-radius").evaluate(s,f)*b,transform:x,unwrappedTileID:C,getElevation:I},g)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let wa;var gl={get paint(){return wa=wa||new xi({"hillshade-illumination-direction":new ar(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ar(tt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ar(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ar(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ar(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ar(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ar(tt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ar(tt.paint_hillshade["hillshade-method"])})}};class Qc extends io{constructor(a,s){super(a,gl,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let a=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const x=Math.max(a.length,s.length,f.length,g.length);a=a.concat(Array(x-a.length).fill(a.at(-1))),s=s.concat(Array(x-s.length).fill(s.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),g=g.concat(Array(x-g.length).fill(g.at(-1)));const b=s.map(Wt);return{directionRadians:a.map(Wt),altitudeRadians:b,shadowColor:g,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let cv;var p0={get paint(){return cv=cv||new xi({"color-relief-opacity":new ar(tt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new $o(tt["paint_color-relief"]["color-relief-color"])})}};class ds{constructor(a,s,f,g){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(s,g)}update(a,s,f){const{width:g,height:x}=a,b=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(s&&s.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[g,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Xi(a)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,a):I.texImage2D(I.TEXTURE_2D,0,this.format,g,x,0,this.format,I.UNSIGNED_BYTE,a.data);else{const{x:j,y:V}=f||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Xi(a)?I.texSubImage2D(I.TEXTURE_2D,0,j,V,I.RGBA,I.UNSIGNED_BYTE,a):I.texSubImage2D(I.TEXTURE_2D,0,j,V,g,x,I.RGBA,I.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,s,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||a),this.filter=a),s!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class hv{constructor(a,s,f,g=1,x=1,b=1,C=0){if(this.uid=a,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tr(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=x,this.blueFactor=b,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<I;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(I,j)]=this.data[this._idx(I-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,I)]=this.data[this._idx(j,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<I;j++)for(let V=0;V<I;V++){const G=this.get(j,V);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(a,s){const f=new Uint8Array(this.data.buffer),g=4*this._idx(a,s);return this.unpack(f[g],f[g+1],f[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,s){if(a<-1||a>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${a}, y: ${s}, dim: ${this.dim}`);return(s+1)*this.stride+(a+1)}unpack(a,s,f){return a*this.redFactor+s*this.greenFactor+f*this.blueFactor-this.baseShift}pack(a){return yl(a,this.getUnpackVector())}getPixels(){return new lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,s,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,x=s*this.dim+this.dim,b=f*this.dim,C=f*this.dim+this.dim;switch(s){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:b=C-1;break;case 1:C=b+1}const I=-s*this.dim,j=-f*this.dim;for(let V=b;V<C;V++)for(let G=g;G<x;G++)this.data[this._idx(G,V)]=a.data[this._idx(G+I,V+j)]}}function yl(u,a){const s=a[0],f=a[1],g=a[2],x=a[3],b=Math.min(s,f,g),C=Math.round((u+x)/b);return{r:Math.floor(C*b/s)%256,g:Math.floor(C*b/f)%256,b:Math.floor(C*b/g)%256}}Jt("DEMData",hv);class x1 extends io{constructor(a,s){super(a,p0,s)}_createColorRamp(a){const s={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Vl&&f._styleExpression.expression instanceof ea){this.colorRampExpression=f;const b=f._styleExpression.expression;s.elevationStops=b.labels,s.colorStops=[];for(const C of s.elevationStops)s.colorStops.push(b.evaluate({globals:{elevation:C}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[Br.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=a)return s;const g={elevationStops:[],colorStops:[]},x=(s.elevationStops.length-1)/(a-1);for(let b=0;b<s.elevationStops.length-.5;b+=x)g.elevationStops.push(s.elevationStops[Math.round(b)]),g.colorStops.push(s.colorStops[Math.round(b)]);return Tr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${a}, provided: ${s.elevationStops.length}`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(a,s,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(s),x=new lo({width:g.colorStops.length,height:1}),b=new lo({width:g.colorStops.length,height:1});for(let C=0;C<g.elevationStops.length;C++){const I=yl(g.elevationStops[C],f);b.setPixel(0,C,new Br(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,C,g.colorStops[C])}return this.colorRampTextures={elevationTexture:new ds(a,b,a.gl.RGBA),colorTexture:new ds(a,x,a.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const m0=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:g0}=m0;function om(u,a,s){const f=s.patternDependencies;let g=!1;for(const x of a){const b=x.paint.get(`${u}-pattern`);b.isConstant()||(g=!0);const C=b.constantOr(null);C&&(g=!0,f[C.to]=!0,f[C.from]=!0)}return g}function Eg(u,a,s,f,g){const{zoom:x}=f,b=g.patternDependencies;for(const C of a){const I=C.paint.get(`${u}-pattern`).value;if(I.kind!=="constant"){let j=I.evaluate({zoom:x-1},s,{},g.availableImages),V=I.evaluate({zoom:x},s,{},g.availableImages),G=I.evaluate({zoom:x+1},s,{},g.availableImages);j=j&&j.name?j.name:j,V=V&&V.name?V.name:V,G=G&&G.name?G.name:G,b[j]=!0,b[V]=!0,b[G]=!0,s.patterns[C.id]={min:j,mid:V,max:G}}}return s}function y0(u,a,s,f,g){let x;if(g===(function(b,C,I,j){let V=0;for(let G=C,H=I-j;G<I;G+=j)V+=(b[H]-b[G])*(b[G+1]+b[H+1]),H=G;return V})(u,a,s,f)>0)for(let b=a;b<s;b+=f)x=ac(b/f|0,u[b],u[b+1],x);else for(let b=s-f;b>=a;b-=f)x=ac(b/f|0,u[b],u[b+1],x);return x&&ga(x,x.next)&&(rh(x),x=x.next),x}function nu(u,a){if(!u)return u;a||(a=u);let s,f=u;do if(s=!1,f.steiner||!ga(f,f.next)&&si(f.prev,f,f.next)!==0)f=f.next;else{if(rh(f),f=a=f.prev,f===f.next)break;s=!0}while(s||f!==a);return a}function ad(u,a,s,f,g,x,b){if(!u)return;!b&&x&&(function(I,j,V,G){let H=I;do H.z===0&&(H.z=Wi(H.x,H.y,j,V,G)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==I);H.prevZ.nextZ=null,H.prevZ=null,(function(X){let ee,ie=1;do{let se,fe=X;X=null;let Pe=null;for(ee=0;fe;){ee++;let me=fe,ge=0;for(let Re=0;Re<ie&&(ge++,me=me.nextZ,me);Re++);let Ce=ie;for(;ge>0||Ce>0&&me;)ge!==0&&(Ce===0||!me||fe.z<=me.z)?(se=fe,fe=fe.nextZ,ge--):(se=me,me=me.nextZ,Ce--),Pe?Pe.nextZ=se:X=se,se.prevZ=Pe,Pe=se;fe=me}Pe.nextZ=null,ie*=2}while(ee>1)})(H)})(u,f,g,x);let C=u;for(;u.prev!==u.next;){const I=u.prev,j=u.next;if(x?Pn(u,f,g,x):$s(u))a.push(I.i,u.i,j.i),rh(u),u=j.next,C=j.next;else if((u=j)===C){b?b===1?ad(u=Sa(nu(u),a),a,s,f,g,x,2):b===2&&ia(u,a,s,f,g,x):ad(nu(u),a,s,f,g,x,1);break}}}function $s(u){const a=u.prev,s=u,f=u.next;if(si(a,s,f)>=0)return!1;const g=a.x,x=s.x,b=f.x,C=a.y,I=s.y,j=f.y,V=Math.min(g,x,b),G=Math.min(C,I,j),H=Math.max(g,x,b),X=Math.max(C,I,j);let ee=f.next;for(;ee!==a;){if(ee.x>=V&&ee.x<=H&&ee.y>=G&&ee.y<=X&&eh(g,C,x,I,b,j,ee.x,ee.y)&&si(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Pn(u,a,s,f){const g=u.prev,x=u,b=u.next;if(si(g,x,b)>=0)return!1;const C=g.x,I=x.x,j=b.x,V=g.y,G=x.y,H=b.y,X=Math.min(C,I,j),ee=Math.min(V,G,H),ie=Math.max(C,I,j),se=Math.max(V,G,H),fe=Wi(X,ee,a,s,f),Pe=Wi(ie,se,a,s,f);let me=u.prevZ,ge=u.nextZ;for(;me&&me.z>=fe&&ge&&ge.z<=Pe;){if(me.x>=X&&me.x<=ie&&me.y>=ee&&me.y<=se&&me!==g&&me!==b&&eh(C,V,I,G,j,H,me.x,me.y)&&si(me.prev,me,me.next)>=0||(me=me.prevZ,ge.x>=X&&ge.x<=ie&&ge.y>=ee&&ge.y<=se&&ge!==g&&ge!==b&&eh(C,V,I,G,j,H,ge.x,ge.y)&&si(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;me&&me.z>=fe;){if(me.x>=X&&me.x<=ie&&me.y>=ee&&me.y<=se&&me!==g&&me!==b&&eh(C,V,I,G,j,H,me.x,me.y)&&si(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;ge&&ge.z<=Pe;){if(ge.x>=X&&ge.x<=ie&&ge.y>=ee&&ge.y<=se&&ge!==g&&ge!==b&&eh(C,V,I,G,j,H,ge.x,ge.y)&&si(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function Sa(u,a){let s=u;do{const f=s.prev,g=s.next.next;!ga(f,g)&&Cg(f,s,s.next,g)&&th(f,g)&&th(g,f)&&(a.push(f.i,s.i,g.i),rh(s),rh(s.next),s=u=g),s=s.next}while(s!==u);return nu(s)}function ia(u,a,s,f,g,x){let b=u;do{let C=b.next.next;for(;C!==b.prev;){if(b.i!==C.i&&dv(b,C)){let I=Tg(b,C);return b=nu(b,b.next),I=nu(I,I.next),ad(b,a,s,f,g,x,0),void ad(I,a,s,f,g,x,0)}C=C.next}b=b.next}while(b!==u)}function $a(u,a){let s=u.x-a.x;return s===0&&(s=u.y-a.y,s===0)&&(s=(u.next.y-u.y)/(u.next.x-u.x)-(a.next.y-a.y)/(a.next.x-a.x)),s}function fs(u,a){const s=(function(g,x){let b=x;const C=g.x,I=g.y;let j,V=-1/0;if(ga(g,b))return b;do{if(ga(g,b.next))return b.next;if(I<=b.y&&I>=b.next.y&&b.next.y!==b.y){const ie=b.x+(I-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ie<=C&&ie>V&&(V=ie,j=b.x<b.next.x?b:b.next,ie===C))return j}b=b.next}while(b!==x);if(!j)return null;const G=j,H=j.x,X=j.y;let ee=1/0;b=j;do{if(C>=b.x&&b.x>=H&&C!==b.x&&Jc(I<X?C:V,I,H,X,I<X?V:C,I,b.x,b.y)){const ie=Math.abs(I-b.y)/(C-b.x);th(b,g)&&(ie<ee||ie===ee&&(b.x>j.x||b.x===j.x&&jf(j,b)))&&(j=b,ee=ie)}b=b.next}while(b!==G);return j})(u,a);if(!s)return a;const f=Tg(s,u);return nu(f,f.next),nu(s,s.next)}function jf(u,a){return si(u.prev,u,a.prev)<0&&si(a.next,u,u.next)<0}function Wi(u,a,s,f,g){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-s)*g|0)|u<<8))|u<<4))|u<<2))|u<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-f)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function sm(u){let a=u,s=u;do(a.x<s.x||a.x===s.x&&a.y<s.y)&&(s=a),a=a.next;while(a!==u);return s}function Jc(u,a,s,f,g,x,b,C){return(g-b)*(a-C)>=(u-b)*(x-C)&&(u-b)*(f-C)>=(s-b)*(a-C)&&(s-b)*(x-C)>=(g-b)*(f-C)}function eh(u,a,s,f,g,x,b,C){return!(u===b&&a===C)&&Jc(u,a,s,f,g,x,b,C)}function dv(u,a){return u.next.i!==a.i&&u.prev.i!==a.i&&!(function(s,f){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==f.i&&g.next.i!==f.i&&Cg(g,g.next,s,f))return!0;g=g.next}while(g!==s);return!1})(u,a)&&(th(u,a)&&th(a,u)&&(function(s,f){let g=s,x=!1;const b=(s.x+f.x)/2,C=(s.y+f.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&b<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==s);return x})(u,a)&&(si(u.prev,u,a.prev)||si(u,a.prev,a))||ga(u,a)&&si(u.prev,u,u.next)>0&&si(a.prev,a,a.next)>0)}function si(u,a,s){return(a.y-u.y)*(s.x-a.x)-(a.x-u.x)*(s.y-a.y)}function ga(u,a){return u.x===a.x&&u.y===a.y}function Cg(u,a,s,f){const g=Us(si(u,a,s)),x=Us(si(u,a,f)),b=Us(si(s,f,u)),C=Us(si(s,f,a));return g!==x&&b!==C||!(g!==0||!ic(u,s,a))||!(x!==0||!ic(u,f,a))||!(b!==0||!ic(s,u,f))||!(C!==0||!ic(s,a,f))}function ic(u,a,s){return a.x<=Math.max(u.x,s.x)&&a.x>=Math.min(u.x,s.x)&&a.y<=Math.max(u.y,s.y)&&a.y>=Math.min(u.y,s.y)}function Us(u){return u>0?1:u<0?-1:0}function th(u,a){return si(u.prev,u,u.next)<0?si(u,a,u.next)>=0&&si(u,u.prev,a)>=0:si(u,a,u.prev)<0||si(u,u.next,a)<0}function Tg(u,a){const s=iu(u.i,u.x,u.y),f=iu(a.i,a.x,a.y),g=u.next,x=a.prev;return u.next=a,a.prev=u,s.next=g,g.prev=s,f.next=s,s.prev=f,x.next=f,f.prev=x,f}function ac(u,a,s,f){const g=iu(u,a,s);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function rh(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function iu(u,a,s){return{i:u,x:a,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class oc{constructor(a,s){if(s>a)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=a,this._minGranularity=s}getGranularityForZoomLevel(a){return Math.max(Math.floor(this._baseZoomGranularity/(1<<a)),this._minGranularity,1)}}class nh{constructor(a){this.fill=a.fill,this.line=a.line,this.tile=a.tile,this.stencil=a.stencil,this.circle=a.circle}}nh.noSubdivision=new nh({fill:new oc(0,0),line:new oc(0,0),tile:new oc(0,0),stencil:new oc(0,0),circle:1}),Jt("SubdivisionGranularityExpression",oc),Jt("SubdivisionGranularitySetting",nh);const ih=-32768,ah=32767;class Mg{constructor(a,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=a,this._granularityCellSize=Qe/a,this._canonical=s}_getKey(a,s){return(a+=32768)<<16|s+32768}_vertexToIndex(a,s){if(a<-32768||s<-32768||a>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(a),g=0|Math.round(s),x=this._getKey(f,g);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(f,g),b}_subdivideTrianglesScanline(a){if(this._granularity<2)return(function(g,x){const b=[];for(let C=0;C<x.length;C+=3){const I=x[C],j=x[C+1],V=x[C+2],G=g[2*I],H=g[2*I+1];(g[2*j]-G)*(g[2*V+1]-H)-(g[2*j+1]-H)*(g[2*V]-G)>0?(b.push(I),b.push(V),b.push(j)):(b.push(I),b.push(j),b.push(V))}return b})(this._vertexBuffer,a);const s=[],f=a.length;for(let g=0;g<f;g+=3){const x=[a[g+0],a[g+1],a[g+2]],b=[this._vertexBuffer[2*a[g+0]+0],this._vertexBuffer[2*a[g+0]+1],this._vertexBuffer[2*a[g+1]+0],this._vertexBuffer[2*a[g+1]+1],this._vertexBuffer[2*a[g+2]+0],this._vertexBuffer[2*a[g+2]+1]];let C=1/0,I=1/0,j=-1/0,V=-1/0;for(let ie=0;ie<3;ie++){const se=b[2*ie],fe=b[2*ie+1];C=Math.min(C,se),j=Math.max(j,se),I=Math.min(I,fe),V=Math.max(V,fe)}if(C===j||I===V)continue;const G=Math.floor(C/this._granularityCellSize),H=Math.ceil(j/this._granularityCellSize),X=Math.floor(I/this._granularityCellSize),ee=Math.ceil(V/this._granularityCellSize);if(G!==H||X!==ee)for(let ie=X;ie<ee;ie++){const se=this._scanlineGenerateVertexRingForCellRow(ie,b,x);vl(this._vertexBuffer,se,s)}else s.push(...x)}return s}_scanlineGenerateVertexRingForCellRow(a,s,f){const g=a*this._granularityCellSize,x=g+this._granularityCellSize,b=[];for(let C=0;C<3;C++){const I=s[2*C],j=s[2*C+1],V=s[2*(C+1)%6],G=s[(2*(C+1)+1)%6],H=s[2*(C+2)%6],X=s[(2*(C+2)+1)%6],ee=V-I,ie=G-j,se=ee===0,fe=ie===0,Pe=(g-j)/ie,me=(x-j)/ie,ge=Math.min(Pe,me),Ce=Math.max(Pe,me);if(!fe&&(ge>=1||Ce<=0)||fe&&(j<g||j>x)){G>=g&&G<=x&&b.push(f[(C+1)%3]);continue}!fe&&ge>0&&b.push(this._vertexToIndex(I+ee*ge,j+ie*ge));const Re=I+ee*Math.max(ge,0),nt=I+ee*Math.min(Ce,1);se||this._generateIntraEdgeVertices(b,I,j,V,G,Re,nt),!fe&&Ce<1&&b.push(this._vertexToIndex(I+ee*Ce,j+ie*Ce)),(fe||G>=g&&G<=x)&&b.push(f[(C+1)%3]),!fe&&(G<=g||G>=x)&&this._generateInterEdgeVertices(b,I,j,V,G,H,X,nt,g,x)}return b}_generateIntraEdgeVertices(a,s,f,g,x,b,C){const I=g-s,j=x-f,V=j===0,G=V?Math.min(s,g):Math.min(b,C),H=V?Math.max(s,g):Math.max(b,C),X=Math.floor(G/this._granularityCellSize)+1,ee=Math.ceil(H/this._granularityCellSize)-1;if(V?s<g:b<C)for(let ie=X;ie<=ee;ie++){const se=ie*this._granularityCellSize;a.push(this._vertexToIndex(se,f+j*(se-s)/I))}else for(let ie=ee;ie>=X;ie--){const se=ie*this._granularityCellSize;a.push(this._vertexToIndex(se,f+j*(se-s)/I))}}_generateInterEdgeVertices(a,s,f,g,x,b,C,I,j,V){const G=x-f,H=b-g,X=C-x,ee=(j-x)/X,ie=(V-x)/X,se=Math.min(ee,ie),fe=Math.max(ee,ie),Pe=g+H*se;let me=Math.floor(Math.min(Pe,I)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(Pe,I)/this._granularityCellSize)-1,Ce=I<Pe;const Re=X===0;if(Re&&(C===j||C===V))return;if(Re||se>=1||fe<=0){const kt=f-C,_t=b+(s-b)*Math.min((j-C)/kt,(V-C)/kt);me=Math.floor(Math.min(_t,I)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(_t,I)/this._granularityCellSize)-1,Ce=I<_t}const nt=G>0?V:j;if(Ce)for(let kt=me;kt<=ge;kt++)a.push(this._vertexToIndex(kt*this._granularityCellSize,nt));else for(let kt=ge;kt>=me;kt--)a.push(this._vertexToIndex(kt*this._granularityCellSize,nt))}_generateOutline(a){const s=[];for(const f of a){const g=Go(f,this._granularity,!0),x=this._pointArrayToIndices(g),b=[];for(let C=1;C<x.length;C++)b.push(x[C-1]),b.push(x[C]);s.push(b)}return s}_handlePoles(a){let s=!1,f=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(s||f)&&this._fillPoles(a,s,f)}_ensureNoPoleVertices(){const a=this._vertexBuffer;for(let s=0;s<a.length;s+=2){const f=a[s+1];f===ih&&(a[s+1]=-32767),f===ah&&(a[s+1]=32766)}}_generatePoleQuad(a,s,f,g,x,b){g>x!=(b===ih)?(a.push(s),a.push(f),a.push(this._vertexToIndex(g,b)),a.push(f),a.push(this._vertexToIndex(x,b)),a.push(this._vertexToIndex(g,b))):(a.push(f),a.push(s),a.push(this._vertexToIndex(g,b)),a.push(this._vertexToIndex(x,b)),a.push(f),a.push(this._vertexToIndex(g,b)))}_fillPoles(a,s,f){const g=this._vertexBuffer,x=Qe,b=a.length;for(let C=2;C<b;C+=3){const I=a[C-2],j=a[C-1],V=a[C],G=g[2*I],H=g[2*I+1],X=g[2*j],ee=g[2*j+1],ie=g[2*V],se=g[2*V+1];s&&(H===0&&ee===0&&this._generatePoleQuad(a,I,j,G,X,ih),ee===0&&se===0&&this._generatePoleQuad(a,j,V,X,ie,ih),se===0&&H===0&&this._generatePoleQuad(a,V,I,ie,G,ih)),f&&(H===x&&ee===x&&this._generatePoleQuad(a,I,j,G,X,ah),ee===x&&se===x&&this._generatePoleQuad(a,j,V,X,ie,ah),se===x&&H===x&&this._generatePoleQuad(a,V,I,ie,G,ah))}}_initializeVertices(a){for(let s=0;s<a.length;s+=2)this._vertexToIndex(a[s],a[s+1])}subdividePolygonInternal(a,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:g}=(function(C){const I=[],j=[];for(const V of C)if(V.length!==0){V!==C[0]&&I.push(j.length/2);for(let G=0;G<V.length;G++)j.push(V[G].x),j.push(V[G].y)}return{flattened:j,holeIndices:I}})(a);let x;this._initializeVertices(f);try{const C=(function(j,V,G=2){const H=V&&V.length,X=H?V[0]*G:j.length;let ee=y0(j,0,X,G,!0);const ie=[];if(!ee||ee.next===ee.prev)return ie;let se,fe,Pe;if(H&&(ee=(function(me,ge,Ce,Re){const nt=[];for(let kt=0,_t=ge.length;kt<_t;kt++){const Ot=y0(me,ge[kt]*Re,kt<_t-1?ge[kt+1]*Re:me.length,Re,!1);Ot===Ot.next&&(Ot.steiner=!0),nt.push(sm(Ot))}nt.sort($a);for(let kt=0;kt<nt.length;kt++)Ce=fs(nt[kt],Ce);return Ce})(j,V,ee,G)),j.length>80*G){se=j[0],fe=j[1];let me=se,ge=fe;for(let Ce=G;Ce<X;Ce+=G){const Re=j[Ce],nt=j[Ce+1];Re<se&&(se=Re),nt<fe&&(fe=nt),Re>me&&(me=Re),nt>ge&&(ge=nt)}Pe=Math.max(me-se,ge-fe),Pe=Pe!==0?32767/Pe:0}return ad(ee,ie,G,se,fe,Pe,0),ie})(f,g),I=this._convertIndices(f,C);x=this._subdivideTrianglesScanline(I)}catch(C){console.error(C)}let b=[];return s&&(b=this._generateOutline(a)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(a,s){const f=[];for(let g=0;g<s.length;g++)f.push(this._vertexToIndex(a[2*s[g]],a[2*s[g]+1]));return f}_pointArrayToIndices(a){const s=[];for(let f=0;f<a.length;f++){const g=a[f];s.push(this._vertexToIndex(g.x,g.y))}return s}}function uo(u,a,s,f=!0){return new Mg(s,a).subdividePolygonInternal(u,f)}function Go(u,a,s=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const f=u[0],g=u[u.length-1],x=s&&(f.x!==g.x||f.y!==g.y);if(a<2)return x?[...u,u[0]]:[...u];const b=Math.floor(Qe/a),C=[];C.push(new _(u[0].x,u[0].y));const I=u.length,j=x?I:I-1;for(let V=0;V<j;V++){const G=u[V],H=V<I-1?u[V+1]:u[0],X=G.x,ee=G.y,ie=H.x,se=H.y,fe=X!==ie,Pe=ee!==se;if(!fe&&!Pe)continue;const me=ie-X,ge=se-ee,Ce=Math.abs(me),Re=Math.abs(ge);let nt=X,kt=ee;for(;;){const Ot=me>0?(Math.floor(nt/b)+1)*b:(Math.ceil(nt/b)-1)*b,Kt=ge>0?(Math.floor(kt/b)+1)*b:(Math.ceil(kt/b)-1)*b,Rt=Math.abs(nt-Ot),Ct=Math.abs(kt-Kt),dt=Math.abs(nt-ie),sr=Math.abs(kt-se),nr=fe?Rt/Ce:Number.POSITIVE_INFINITY,lr=Pe?Ct/Re:Number.POSITIVE_INFINITY;if((dt<=Rt||!fe)&&(sr<=Ct||!Pe))break;if(nr<lr&&fe||!Pe){nt=Ot,kt+=ge*nr;const er=new _(nt,Math.round(kt));C[C.length-1].x===er.x&&C[C.length-1].y===er.y||C.push(er)}else{nt+=me*lr,kt=Kt;const er=new _(Math.round(nt),kt);C[C.length-1].x===er.x&&C[C.length-1].y===er.y||C.push(er)}}const _t=new _(ie,se);C[C.length-1].x===_t.x&&C[C.length-1].y===_t.y||C.push(_t)}return C}function vl(u,a,s){if(a.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,g=u[2*a[0]];for(let I=1;I<a.length;I++){const j=u[2*a[I]];j<g&&(g=j,f=I)}const x=a.length;let b=f,C=(b+1)%x;for(;;){const I=b-1>=0?b-1:x-1,j=(C+1)%x,V=u[2*a[I]],G=u[2*a[j]],H=u[2*a[b]],X=u[2*a[b]+1],ee=u[2*a[C]+1];let ie=!1;if(V<G)ie=!0;else if(V>G)ie=!1;else{const se=ee-X,fe=-(u[2*a[C]]-H),Pe=X<ee?1:-1;((V-H)*se+(u[2*a[I]+1]-X)*fe)*Pe>((G-H)*se+(u[2*a[j]+1]-X)*fe)*Pe&&(ie=!0)}if(ie){const se=a[I],fe=a[b],Pe=a[C];se!==fe&&se!==Pe&&fe!==Pe&&s.push(Pe,fe,se),b--,b<0&&(b=x-1)}else{const se=a[j],fe=a[b],Pe=a[C];se!==fe&&se!==Pe&&fe!==Pe&&s.push(Pe,fe,se),C++,C>=x&&(C=0)}if(I===j)break}}function Co(u,a,s,f,g,x,b,C,I){const j=g.length/2,V=b&&C&&I;if(j<Yt.MAX_VERTEX_ARRAY_LENGTH){const G=a.prepareSegment(j,s,f),H=G.vertexLength;for(let ie=0;ie<x.length;ie+=3)f.emplaceBack(H+x[ie],H+x[ie+1],H+x[ie+2]);let X,ee;G.vertexLength+=j,G.primitiveLength+=x.length/3,V&&(ee=b.prepareSegment(j,s,C),X=ee.vertexLength,ee.vertexLength+=j);for(let ie=0;ie<g.length;ie+=2)u(g[ie],g[ie+1]);if(V)for(let ie=0;ie<I.length;ie++){const se=I[ie];for(let fe=1;fe<se.length;fe+=2)C.emplaceBack(X+se[fe-1],X+se[fe]);ee.primitiveLength+=se.length/2}}else(function(G,H,X,ee,ie,se){const fe=[];for(let Re=0;Re<ee.length/2;Re++)fe.push(-1);const Pe={count:0};let me=0,ge=G.getOrCreateLatestSegment(H,X),Ce=ge.vertexLength;for(let Re=2;Re<ie.length;Re+=3){const nt=ie[Re-2],kt=ie[Re-1],_t=ie[Re];let Ot=fe[nt]<me,Kt=fe[kt]<me,Rt=fe[_t]<me;ge.vertexLength+((Ot?1:0)+(Kt?1:0)+(Rt?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ge=G.createNewSegment(H,X),me=Pe.count,Ot=!0,Kt=!0,Rt=!0,Ce=0);const Ct=zf(fe,ee,se,Pe,nt,Ot,ge),dt=zf(fe,ee,se,Pe,kt,Kt,ge),sr=zf(fe,ee,se,Pe,_t,Rt,ge);X.emplaceBack(Ce+Ct-me,Ce+dt-me,Ce+sr-me),ge.primitiveLength++}})(a,s,f,g,x,u),V&&(function(G,H,X,ee,ie,se){const fe=[];for(let Re=0;Re<ee.length/2;Re++)fe.push(-1);const Pe={count:0};let me=0,ge=G.getOrCreateLatestSegment(H,X),Ce=ge.vertexLength;for(let Re=0;Re<ie.length;Re++){const nt=ie[Re];for(let kt=1;kt<ie[Re].length;kt+=2){const _t=nt[kt-1],Ot=nt[kt];let Kt=fe[_t]<me,Rt=fe[Ot]<me;ge.vertexLength+((Kt?1:0)+(Rt?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ge=G.createNewSegment(H,X),me=Pe.count,Kt=!0,Rt=!0,Ce=0);const Ct=zf(fe,ee,se,Pe,_t,Kt,ge),dt=zf(fe,ee,se,Pe,Ot,Rt,ge);X.emplaceBack(Ce+Ct-me,Ce+dt-me),ge.primitiveLength++}}})(b,s,C,g,I,u),a.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function zf(u,a,s,f,g,x,b){if(x){const C=f.count;return s(a[2*g],a[2*g+1]),u[g]=f.count,f.count++,b.vertexLength++,C}return u[g]}class lm{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ve,this.indexArray=new st,this.indexArray2=new Nt,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.hasDependencies=om("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),b=[];for(const{feature:C,id:I,index:j,sourceLayerIndex:V}of a){const G=this.layers[0]._featureFilter.needGeometry,H=ml(C,G);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),H,f))continue;const X=x?g.evaluate(H,{},f,s.availableImages):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:V,index:j,geometry:G?H.geometry:Vs(C),patterns:{},sortKey:X};b.push(ee)}x&&b.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of b){const{geometry:I,index:j,sourceLayerIndex:V}=C;if(this.hasDependencies){const G=Eg("fill",this.layers,C,{zoom:this.zoom},s);this.patternFeatures.push(G)}else this.addFeature(C,I,j,f,{},s.subdivisionGranularity);s.featureIndex.insert(a[j].feature,I,j,V,this.index)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(a,s,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,g0),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,s,f,g,x,b){for(const C of Dh(s,500)){const I=uo(C,g,b.fill.getGranularityForZoomLevel(g.z)),j=this.layoutVertexArray;Co(((V,G)=>{j.emplaceBack(V,G)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,canonical:g})}}let kg,v0;Jt("FillBucket",lm,{omit:["layers","patternFeatures"]});var oh={get paint(){return v0=v0||new xi({"fill-antialias":new ar(tt.paint_fill["fill-antialias"]),"fill-opacity":new gr(tt.paint_fill["fill-opacity"]),"fill-color":new gr(tt.paint_fill["fill-color"]),"fill-outline-color":new gr(tt.paint_fill["fill-outline-color"]),"fill-translate":new ar(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new ar(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xu(tt.paint_fill["fill-pattern"])})},get layout(){return kg=kg||new xi({"fill-sort-key":new gr(tt.layout_fill["fill-sort-key"])})}};class _0 extends io{constructor(a,s){super(a,oh,s)}recalculate(a,s){super.recalculate(a,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new lm(a)}queryRadius(){return tm(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:a,geometry:s,transform:f,pixelsToTileUnits:g}){return iv(Of(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,g),s)}isTileClipped(){return!0}}const fv=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),od=gi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pv}=fv;class _l{constructor(a,s,f,g,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=a,this._geometry=-1,this._keys=g,this._values=x,a.readFields(x0,this,s)}loadGeometry(){const a=this._pbf;a.pos=this._geometry;const s=a.readVarint()+a.pos,f=[];let g,x=1,b=0,C=0,I=0;for(;a.pos<s;){if(b<=0){const j=a.readVarint();x=7&j,b=j>>3}if(b--,x===1||x===2)C+=a.readSVarint(),I+=a.readSVarint(),x===1&&(g&&f.push(g),g=[]),g&&g.push(new _(C,I));else{if(x!==7)throw new Error(`unknown command ${x}`);g&&g.push(g[0].clone())}}return g&&f.push(g),f}bbox(){const a=this._pbf;a.pos=this._geometry;const s=a.readVarint()+a.pos;let f=1,g=0,x=0,b=0,C=1/0,I=-1/0,j=1/0,V=-1/0;for(;a.pos<s;){if(g<=0){const G=a.readVarint();f=7&G,g=G>>3}if(g--,f===1||f===2)x+=a.readSVarint(),b+=a.readSVarint(),x<C&&(C=x),x>I&&(I=x),b<j&&(j=b),b>V&&(V=b);else if(f!==7)throw new Error(`unknown command ${f}`)}return[C,j,I,V]}toGeoJSON(a,s,f){const g=this.extent*Math.pow(2,f),x=this.extent*a,b=this.extent*s,C=this.loadGeometry();function I(H){return[360*(H.x+x)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(H.y+b)/g)*Math.PI))-90]}function j(H){return H.map(I)}let V;if(this.type===1){const H=[];for(const ee of C)H.push(ee[0]);const X=j(H);V=H.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){const H=C.map(j);V=H.length===1?{type:"LineString",coordinates:H[0]}:{type:"MultiLineString",coordinates:H}}else{if(this.type!==3)throw new Error("unknown feature type");{const H=mv(C),X=[];for(const ee of H)X.push(ee.map(j));V=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}const G={type:"Feature",geometry:V,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function x0(u,a,s){u===1?a.id=s.readVarint():u===2?(function(f,g){const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=g._keys[f.readVarint()],C=g._values[f.readVarint()];g.properties[b]=C}})(s,a):u===3?a.type=s.readVarint():u===4&&(a._geometry=s.pos)}function mv(u){const a=u.length;if(a<=1)return[u];const s=[];let f,g;for(let x=0;x<a;x++){const b=gv(u[x]);b!==0&&(g===void 0&&(g=b<0),g===b<0?(f&&s.push(f),f=[u[x]]):f&&f.push(u[x]))}return f&&s.push(f),s}function gv(u){let a=0;for(let s,f,g=0,x=u.length,b=x-1;g<x;b=g++)s=u[g],f=u[b],a+=(f.x-s.x)*(s.y+f.y);return a}_l.types=["Unknown","Point","LineString","Polygon"];class Ag{constructor(a,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(b1,this,s),this.length=this._features.length}feature(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];const s=this._pbf.readVarint()+this._pbf.pos;return new _l(this._pbf,s,this.extent,this._keys,this._values)}}function b1(u,a,s){u===15?a.version=s.readVarint():u===1?a.name=s.readString():u===5?a.extent=s.readVarint():u===2?a._features.push(s.pos):u===3?a._keys.push(s.readString()):u===4&&a._values.push((function(f){let g=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=f.readVarint()>>3;g=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g})(s))}class b0{constructor(a,s){this.layers=a.readFields(w0,{},s)}}function w0(u,a,s){if(u===3){const f=new Ag(s,s.readVarint()+s.pos);f.length&&(a[f.name]=f)}}const Ig=Math.pow(2,13);function xl(u,a,s,f,g,x,b,C){u.emplaceBack(a,s,2*Math.floor(f*Ig)+b,g*Ig*2,x*Ig*2,Math.round(C))}class yv{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.centroidVertexArray=new ye,this.indexArray=new st,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.features=[],this.hasDependencies=om("fill-extrusion",this.layers,s);for(const{feature:g,id:x,index:b,sourceLayerIndex:C}of a){const I=this.layers[0]._featureFilter.needGeometry,j=ml(g,I);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),j,f))continue;const V={id:x,sourceLayerIndex:C,index:b,geometry:I?j.geometry:Vs(g),properties:g.properties,type:g.type,patterns:{}};this.hasDependencies?this.features.push(Eg("fill-extrusion",this.layers,V,{zoom:this.zoom},s)):this.addFeature(V,V.geometry,b,f,{},s.subdivisionGranularity),s.featureIndex.insert(g,V.geometry,b,C,this.index,!0)}}addFeatures(a,s,f){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,s,f,a.subdivisionGranularity)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pv),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,od.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,s,f,g,x,b){for(const C of Dh(s,500)){const I={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(I,g,a,C,b);const V=this.layoutVertexArray.length-j,G=Math.floor(I.x/I.sampleCount),H=Math.floor(I.y/I.sampleCount);for(let X=0;X<V;X++)this.centroidVertexArray.emplaceBack(G,H)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,canonical:g})}processPolygon(a,s,f,g,x){if(g.length<1||Pi(g[0]))return;for(const G of g)G.length!==0&&Nf(a,G);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(s.z),I=_l.types[f.type]==="Polygon";for(const G of g){if(G.length===0||Pi(G))continue;const H=Go(G,C,I);this._generateSideFaces(H,b)}if(!I)return;const j=uo(g,s,C,!1),V=this.layoutVertexArray;Co(((G,H)=>{xl(V,G,H,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(a,s){let f=0;for(let g=1;g<a.length;g++){const x=a[g],b=a[g-1];if(S0(x,b))continue;s.segment.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(b)._perp()._unit(),I=b.dist(x);f+I>32768&&(f=0),xl(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,f),xl(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,f),f+=I,xl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,0,f),xl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,1,f);const j=s.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function Nf(u,a){for(let s=0;s<a.length;s++){const f=a[s];s===a.length-1&&a[0].x===f.x&&a[0].y===f.y||(u.x+=f.x,u.y+=f.y,u.sampleCount++)}}function S0(u,a){return u.x===a.x&&(u.x<0||u.x>Qe)||u.y===a.y&&(u.y<0||u.y>Qe)}function Pi(u){return u.every((a=>a.x<0))||u.every((a=>a.x>Qe))||u.every((a=>a.y<0))||u.every((a=>a.y>Qe))}let P0;Jt("FillExtrusionBucket",yv,{omit:["layers","features"]});var E0={get paint(){return P0=P0||new xi({"fill-extrusion-opacity":new ar(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gr(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ar(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ar(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xu(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gr(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gr(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ar(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class w1 extends io{constructor(a,s){super(a,E0,s)}createBucket(a){return new yv(a)}queryRadius(){return tm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,pixelPosMatrix:C}){const I=Of(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),j=this.paint.get("fill-extrusion-height").evaluate(s,f),V=this.paint.get("fill-extrusion-base").evaluate(s,f),G=(function(X,ee){const ie=[];for(const se of X){const fe=[se.x,se.y,0,1];ut(fe,fe,ee),ie.push(new _(fe[0]/fe[3],fe[1]/fe[3]))}return ie})(I,C),H=(function(X,ee,ie,se){const fe=[],Pe=[],me=se[8]*ee,ge=se[9]*ee,Ce=se[10]*ee,Re=se[11]*ee,nt=se[8]*ie,kt=se[9]*ie,_t=se[10]*ie,Ot=se[11]*ie;for(const Kt of X){const Rt=[],Ct=[];for(const dt of Kt){const sr=dt.x,nr=dt.y,lr=se[0]*sr+se[4]*nr+se[12],er=se[1]*sr+se[5]*nr+se[13],vr=se[2]*sr+se[6]*nr+se[14],fn=se[3]*sr+se[7]*nr+se[15],en=vr+Ce,yi=fn+Re,fo=lr+nt,oa=er+kt,vi=vr+_t,di=fn+Ot,An=new _((lr+me)/yi,(er+ge)/yi);An.z=en/yi,Rt.push(An);const Ci=new _(fo/di,oa/di);Ci.z=vi/di,Ct.push(Ci)}fe.push(Rt),Pe.push(Ct)}return[fe,Pe]})(g,V,j,C);return(function(X,ee,ie){let se=1/0;iv(ie,ee)&&(se=vv(ie,ee[0]));for(let fe=0;fe<ee.length;fe++){const Pe=ee[fe],me=X[fe];for(let ge=0;ge<Pe.length-1;ge++){const Ce=Pe[ge],Re=[Ce,Pe[ge+1],me[ge+1],me[ge],Ce];Yc(ie,Re)&&(se=Math.min(se,vv(ie,Re)))}}return se!==1/0&&se})(H[0],H[1],G)}}function um(u,a){return u.x*a.x+u.y*a.y}function vv(u,a){if(u.length===1){let s=0;const f=a[s++];let g;for(;!g||f.equals(g);)if(g=a[s++],!g)return 1/0;for(;s<a.length;s++){const x=a[s],b=u[0],C=g.sub(f),I=x.sub(f),j=b.sub(f),V=um(C,C),G=um(C,I),H=um(I,I),X=um(j,C),ee=um(j,I),ie=V*H-G*G,se=(H*X-G*ee)/ie,fe=(V*ee-G*X)/ie,Pe=f.z*(1-se-fe)+g.z*se+x.z*fe;if(isFinite(Pe))return Pe}return 1/0}{let s=1/0;for(const f of a)s=Math.min(s,f.z);return s}}const C0=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:S1}=C0,qs=gi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_v}=qs,P1=Math.cos(Math.PI/180*37.5),sc=Math.pow(2,14)/.5;class Ff{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Se,this.indexArray=new st,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.hasDependencies=om("line",this.layers,s)||this.hasLineDasharray(this.layers);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),b=[];for(const{feature:C,id:I,index:j,sourceLayerIndex:V}of a){const G=this.layers[0]._featureFilter.needGeometry,H=ml(C,G);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),H,f))continue;const X=x?g.evaluate(H,{},f):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:V,index:j,geometry:G?H.geometry:Vs(C),patterns:{},dashes:{},sortKey:X};b.push(ee)}x&&b.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of b){const{geometry:I,index:j,sourceLayerIndex:V}=C;this.hasDependencies?(om("line",this.layers,s)?Eg("line",this.layers,C,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,C,this.zoom,s),this.patternFeatures.push(C)):this.addFeature(C,I,j,f,{},{},s.subdivisionGranularity),s.featureIndex.insert(a[j].feature,I,j,V,this.index)}}update(a,s,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f,dashPositions:g})}addFeatures(a,s,f,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,f,g,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,_v)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,S1),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,s,f,g,x,b,C){const I=this.layers[0].layout,j=I.get("line-join").evaluate(a,{}),V=I.get("line-cap"),G=I.get("line-miter-limit"),H=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const X of s)this.addLine(X,a,j,V,G,H,g,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,dashPositions:b,canonical:g})}addLine(a,s,f,g,x,b,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a=Go(a,C?I.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<a.length-1;me++)this.totalDistance+=a[me].dist(a[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=_l.types[s.type]==="Polygon";let V=a.length;for(;V>=2&&a[V-1].equals(a[V-2]);)V--;let G=0;for(;G<V-1&&a[G].equals(a[G+1]);)G++;if(V<(j?3:2))return;f==="bevel"&&(x=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*V,this.layoutVertexArray,this.indexArray);let ee,ie,se,fe,Pe;this.e1=this.e2=-1,j&&(ee=a[V-2],Pe=a[G].sub(ee)._unit()._perp());for(let me=G;me<V;me++){if(se=me===V-1?j?a[G+1]:void 0:a[me+1],se&&a[me].equals(se))continue;Pe&&(fe=Pe),ee&&(ie=ee),ee=a[me],Pe=se?se.sub(ee)._unit()._perp():fe,fe=fe||Pe;let ge=fe.add(Pe);ge.x===0&&ge.y===0||ge._unit();const Ce=fe.x*Pe.x+fe.y*Pe.y,Re=ge.x*Pe.x+ge.y*Pe.y,nt=Re!==0?1/Re:1/0,kt=2*Math.sqrt(2-2*Re),_t=Re<P1&&ie&&se,Ot=fe.x*Pe.y-fe.y*Pe.x>0;if(_t&&me>G){const Ct=ee.dist(ie);if(Ct>2*H){const dt=ee.sub(ee.sub(ie)._mult(H/Ct)._round());this.updateDistance(ie,dt),this.addCurrentVertex(dt,fe,0,0,X),ie=dt}}const Kt=ie&&se;let Rt=Kt?f:j?"butt":g;if(Kt&&Rt==="round"&&(nt<b?Rt="miter":nt<=2&&(Rt="fakeround")),Rt==="miter"&&nt>x&&(Rt="bevel"),Rt==="bevel"&&(nt>2&&(Rt="flipbevel"),nt<x&&(Rt="miter")),ie&&this.updateDistance(ie,ee),Rt==="miter")ge._mult(nt),this.addCurrentVertex(ee,ge,0,0,X);else if(Rt==="flipbevel"){if(nt>100)ge=Pe.mult(-1);else{const Ct=nt*fe.add(Pe).mag()/fe.sub(Pe).mag();ge._perp()._mult(Ct*(Ot?-1:1))}this.addCurrentVertex(ee,ge,0,0,X),this.addCurrentVertex(ee,ge.mult(-1),0,0,X)}else if(Rt==="bevel"||Rt==="fakeround"){const Ct=-Math.sqrt(nt*nt-1),dt=Ot?Ct:0,sr=Ot?0:Ct;if(ie&&this.addCurrentVertex(ee,fe,dt,sr,X),Rt==="fakeround"){const nr=Math.round(180*kt/Math.PI/20);for(let lr=1;lr<nr;lr++){let er=lr/nr;if(er!==.5){const fn=er-.5;er+=er*fn*(er-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*fn*fn+(.848013+Ce*(.215638*Ce-1.06021)))}const vr=Pe.sub(fe)._mult(er)._add(fe)._unit()._mult(Ot?-1:1);this.addHalfVertex(ee,vr.x,vr.y,!1,Ot,0,X)}}se&&this.addCurrentVertex(ee,Pe,-dt,-sr,X)}else if(Rt==="butt")this.addCurrentVertex(ee,ge,0,0,X);else if(Rt==="square"){const Ct=ie?1:-1;this.addCurrentVertex(ee,ge,Ct,Ct,X)}else Rt==="round"&&(ie&&(this.addCurrentVertex(ee,fe,0,0,X),this.addCurrentVertex(ee,fe,1,1,X,!0)),se&&(this.addCurrentVertex(ee,Pe,-1,-1,X,!0),this.addCurrentVertex(ee,Pe,0,0,X)));if(_t&&me<V-1){const Ct=ee.dist(se);if(Ct>2*H){const dt=ee.add(se.sub(ee)._mult(H/Ct)._round());this.updateDistance(ee,dt),this.addCurrentVertex(dt,Pe,0,0,X),ee=dt}}}}addCurrentVertex(a,s,f,g,x,b=!1){const C=s.y*g-s.x,I=-s.y-s.x*g;this.addHalfVertex(a,s.x+s.y*f,s.y-s.x*f,b,!1,f,x),this.addHalfVertex(a,C,I,b,!0,-g,x),this.distance>sc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,s,f,g,x,b))}addHalfVertex({x:a,y:s},f,g,x,b,C,I){const j=.5*(this.lineClips?this.scaledDistance*(sc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(x?1:0),(s<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,V,this.e2),I.primitiveLength++),b?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,s){this.distance+=a.dist(s),this.updateScaledDistance()}hasLineDasharray(a){for(const s of a){const f=s.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(a,s,f,g){for(const x of a){const b=x.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const C=x.layout.get("line-cap")==="round",I={dasharray:b.value.evaluate({zoom:f-1},s,{}),round:C},j={dasharray:b.value.evaluate({zoom:f},s,{}),round:C},V={dasharray:b.value.evaluate({zoom:f+1},s,{}),round:C},G=`${I.dasharray.join(",")},${I.round}`,H=`${j.dasharray.join(",")},${j.round}`,X=`${V.dasharray.join(",")},${V.round}`;g.dashDependencies[G]=I,g.dashDependencies[H]=j,g.dashDependencies[X]=V,s.dashes[x.id]={min:G,mid:H,max:X}}}}let sh,cm;Jt("LineBucket",Ff,{omit:["layers","patternFeatures"]});var Og={get paint(){return cm=cm||new xi({"line-opacity":new gr(tt.paint_line["line-opacity"]),"line-color":new gr(tt.paint_line["line-color"]),"line-translate":new ar(tt.paint_line["line-translate"]),"line-translate-anchor":new ar(tt.paint_line["line-translate-anchor"]),"line-width":new gr(tt.paint_line["line-width"]),"line-gap-width":new gr(tt.paint_line["line-gap-width"]),"line-offset":new gr(tt.paint_line["line-offset"]),"line-blur":new gr(tt.paint_line["line-blur"]),"line-dasharray":new Xu(tt.paint_line["line-dasharray"]),"line-pattern":new Xu(tt.paint_line["line-pattern"]),"line-gradient":new $o(tt.paint_line["line-gradient"])})},get layout(){return sh=sh||new xi({"line-cap":new ar(tt.layout_line["line-cap"]),"line-join":new gr(tt.layout_line["line-join"]),"line-miter-limit":new ar(tt.layout_line["line-miter-limit"]),"line-round-limit":new ar(tt.layout_line["line-round-limit"]),"line-sort-key":new gr(tt.layout_line["line-sort-key"])})}};class xv extends gr{possiblyEvaluate(a,s){return s=new Mn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(a,s)}evaluate(a,s,f,g){return s=$t({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(a,s,f,g)}}let Lg;class bv extends io{constructor(a,s){super(a,Og,s),this.gradientVersion=0,Lg||(Lg=new xv(Og.paint.properties["line-width"].specification),Lg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof ks,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,s){super.recalculate(a,s),this.paint._values["line-floorwidth"]=Lg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ff(a)}queryRadius(a){const s=a,f=T0(If("line-width",this,s),If("line-gap-width",this,s)),g=If("line-offset",this,s);return f/2+Math.abs(g)+tm(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b}){const C=Of(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),I=b/2*T0(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),j=this.paint.get("line-offset").evaluate(s,f);return j&&(g=(function(V,G){const H=[];for(let X=0;X<V.length;X++){const ee=c0(V[X]),ie=[];for(let se=0;se<ee.length;se++){const fe=ee[se],Pe=ee[se-1],me=ee[se+1],ge=se===0?new _(0,0):fe.sub(Pe)._unit()._perp(),Ce=se===ee.length-1?new _(0,0):me.sub(fe)._unit()._perp(),Re=ge._add(Ce)._unit(),nt=Re.x*Ce.x+Re.y*Ce.y;nt!==0&&Re._mult(1/nt),ie.push(Re._mult(G)._add(fe))}H.push(ie)}return H})(g,j*b)),(function(V,G,H){for(let X=0;X<G.length;X++){const ee=G[X];if(V.length>=3){for(let ie=0;ie<ee.length;ie++)if(rc(V,ee[ie]))return!0}if(av(V,ee,H))return!0}return!1})(C,g,I)}isTileClipped(){return!0}}function T0(u,a){return a>0?a+2*u:u}const M0=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),k0=gi([{name:"a_projected_pos",components:3,type:"Float32"}],4);gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Dg=gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hm=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),A0=gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wv(u,a,s){return u.sections.forEach((f=>{f.text=(function(g,x,b){const C=x.layout.get("text-transform").evaluate(b,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),ll.applyArabicShaping&&(g=ll.applyArabicShaping(g)),g})(f.text,a,s)})),u}gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var aa=24;const Bf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Sv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Rg={40:!0};function jg(u,a,s,f,g,x){if("fontStack"in a){const b=s[a.fontStack],C=b&&b[u];return C?C.metrics.advance*a.scale+g:0}{const b=f[a.imageName];return b?b.displaySize[0]*a.scale*aa/x+g:0}}function dm(u,a,s,f){const g=Math.pow(u-a,2);return f?u<a?g/2:2*g:g+Math.abs(s)*s}function I0(u,a,s){let f=0;return u===10&&(f-=1e4),s&&(f+=150),u!==40&&u!==65288||(f+=50),a!==41&&a!==65289||(f+=50),f}function O0(u,a,s,f,g,x){let b=null,C=dm(a,s,g,x);for(const I of f){const j=dm(a-I.x,s,g,x)+I.badness;j<=C&&(b=I,C=j)}return{index:u,x:a,priorBreak:b,badness:C}}function fm(u){return u?fm(u.priorBreak).concat(u.index):[]}class Vf{constructor(a="",s=[],f=[]){this.text=a,this.sections=s,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(a,s){const f=new Vf;for(let g=0;g<a.sections.length;g++){const x=a.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,s)}return f}length(){return[...this.text].length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}verticalizePunctuation(){this.text=(function(a){let s="",f={premature:!0,value:void 0};const g=a[Symbol.iterator]();let x=g.next();const b=a[Symbol.iterator]();b.next();let C=b.next();for(;!x.done;)s+=!C.done&&Yl(C.value.codePointAt(0))&&!Bf[C.value]||!f.premature&&Yl(f.value.codePointAt(0))&&!Bf[f.value]||!Bf[x.value]?x.value:Bf[x.value],f={value:x.value,premature:!1},x=g.next(),C=b.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const a=this.text.match(/^\s*/),s=a?a[0].length:0,f=this.text.match(/\S\s*$/),g=f?f[0].length-1:0;this.text=this.text.substring(s,this.text.length-g),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-g)}substring(a,s){const f=[...this.text].slice(a,s).join(""),g=this.sectionIndex.slice(a,s);return new Vf(f,this.sections,g)}toCodeUnitIndex(a){return[...this.text].slice(0,a).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,s)=>Math.max(a,this.sections[s].scale)),0)}getMaxImageSize(a){let s=0,f=0;for(let g=0;g<this.length();g++){const x=this.getSection(g);if("imageName"in x){const b=a[x.imageName];if(!b)continue;const C=b.displaySize;s=Math.max(s,C[0]),f=Math.max(f,C[1])}}return{maxImageWidth:s,maxImageHeight:f}}addTextSection(a,s){this.text+=a.text,this.sections.push({scale:a.scale||1,verticalAlign:a.verticalAlign||"bottom",fontStack:a.fontStack||s});const f=this.sections.length-1;this.sectionIndex.push(...[...a.text].map((()=>f)))}addImageSection(a){const s=a.image?a.image.name:"";if(s.length===0)return void Tr("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:a.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Tr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(a,s,f,g,x){const b=[],C=this.determineAverageLineWidth(a,s,f,g,x),I=this.hasZeroWidthSpaces();let j=0,V=0;const G=this.text[Symbol.iterator]();let H=G.next();const X=this.text[Symbol.iterator]();X.next();let ee=X.next();const ie=this.text[Symbol.iterator]();ie.next(),ie.next();let se=ie.next();for(;!H.done;){const fe=this.getSection(V),Pe=H.value.codePointAt(0);if(Xp(Pe)||(j+=jg(Pe,fe,f,g,a,x)),!ee.done){const me=Na(Pe),ge=ee.value.codePointAt(0);(Sv[Pe]||me||"imageName"in fe||!se.done&&Rg[ge])&&b.push(O0(V+1,j,C,b,I0(Pe,ge,me&&I),!1))}V++,H=G.next(),ee=X.next(),se=ie.next()}return fm(O0(this.length(),j,C,b,0,!0))}determineAverageLineWidth(a,s,f,g,x){let b=0,C=0;for(const I of this.text){const j=this.getSection(C);b+=jg(I.codePointAt(0),j,f,g,a,x),C++}return b/Math.max(1,Math.ceil(b/s))}}const sd=4294967296,L0=1/sd,pm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class p{constructor(a=new Uint8Array(16)){this.buf=ArrayBuffer.isView(a)?a:new Uint8Array(a),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(a,s,f=this.length){for(;this.pos<f;){const g=this.readVarint(),x=g>>3,b=this.pos;this.type=7&g,a(x,s,this),this.pos===b&&this.skip(g)}return s}readMessage(a,s){return this.readFields(a,s,this.readVarint()+this.pos)}readFixed32(){const a=this.dataView.getUint32(this.pos,!0);return this.pos+=4,a}readSFixed32(){const a=this.dataView.getInt32(this.pos,!0);return this.pos+=4,a}readFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*sd;return this.pos+=8,a}readSFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*sd;return this.pos+=8,a}readFloat(){const a=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,a}readDouble(){const a=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,a}readVarint(a){const s=this.buf;let f,g;return g=s[this.pos++],f=127&g,g<128?f:(g=s[this.pos++],f|=(127&g)<<7,g<128?f:(g=s[this.pos++],f|=(127&g)<<14,g<128?f:(g=s[this.pos++],f|=(127&g)<<21,g<128?f:(g=s[this.pos],f|=(15&g)<<28,(function(x,b,C){const I=C.buf;let j,V;if(V=I[C.pos++],j=(112&V)>>4,V<128||(V=I[C.pos++],j|=(127&V)<<3,V<128)||(V=I[C.pos++],j|=(127&V)<<10,V<128)||(V=I[C.pos++],j|=(127&V)<<17,V<128)||(V=I[C.pos++],j|=(127&V)<<24,V<128)||(V=I[C.pos++],j|=(1&V)<<31,V<128))return y(x,j,b);throw new Error("Expected varint not more than 10 bytes")})(f,a,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const a=this.readVarint();return a%2==1?(a+1)/-2:a/2}readBoolean(){return!!this.readVarint()}readString(){const a=this.readVarint()+this.pos,s=this.pos;return this.pos=a,a-s>=12&&pm?pm.decode(this.buf.subarray(s,a)):(function(f,g,x){let b="",C=g;for(;C<x;){const I=f[C];let j,V,G,H=null,X=I>239?4:I>223?3:I>191?2:1;if(C+X>x)break;X===1?I<128&&(H=I):X===2?(j=f[C+1],(192&j)==128&&(H=(31&I)<<6|63&j,H<=127&&(H=null))):X===3?(j=f[C+1],V=f[C+2],(192&j)==128&&(192&V)==128&&(H=(15&I)<<12|(63&j)<<6|63&V,(H<=2047||H>=55296&&H<=57343)&&(H=null))):X===4&&(j=f[C+1],V=f[C+2],G=f[C+3],(192&j)==128&&(192&V)==128&&(192&G)==128&&(H=(15&I)<<18|(63&j)<<12|(63&V)<<6|63&G,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,X=1):H>65535&&(H-=65536,b+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),b+=String.fromCharCode(H),C+=X}return b})(this.buf,s,a)}readBytes(){const a=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,a);return this.pos=a,s}readPackedVarint(a=[],s){const f=this.readPackedEnd();for(;this.pos<f;)a.push(this.readVarint(s));return a}readPackedSVarint(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSVarint());return a}readPackedBoolean(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readBoolean());return a}readPackedFloat(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFloat());return a}readPackedDouble(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readDouble());return a}readPackedFixed32(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFixed32());return a}readPackedSFixed32(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSFixed32());return a}readPackedFixed64(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFixed64());return a}readPackedSFixed64(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSFixed64());return a}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(a){const s=7&a;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(a,s){this.writeVarint(a<<3|s)}realloc(a){let s=this.length||16;for(;s<this.pos+a;)s*=2;if(s!==this.length){const f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeSFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*L0),!0),this.pos+=8}writeSFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*L0),!0),this.pos+=8}writeVarint(a){(a=+a||0)>268435455||a<0?(function(s,f){let g,x;if(s>=0?(g=s%4294967296|0,x=s/4294967296|0):(g=~(-s%4294967296),x=~(-s/4294967296),4294967295^g?g=g+1|0:(g=0,x=x+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(b,C,I){I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,I.buf[I.pos]=127&(b>>>=7)})(g,0,f),(function(b,C){const I=(7&b)<<4;C.buf[C.pos++]|=I|((b>>>=3)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b)))))})(x,f)})(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))}writeSVarint(a){this.writeVarint(a<0?2*-a-1:2*a)}writeBoolean(a){this.writeVarint(+a)}writeString(a){a=String(a),this.realloc(4*a.length),this.pos++;const s=this.pos;this.pos=(function(g,x,b){for(let C,I,j=0;j<x.length;j++){if(C=x.charCodeAt(j),C>55295&&C<57344){if(!I){C>56319||j+1===x.length?(g[b++]=239,g[b++]=191,g[b++]=189):I=C;continue}if(C<56320){g[b++]=239,g[b++]=191,g[b++]=189,I=C;continue}C=I-55296<<10|C-56320|65536,I=null}else I&&(g[b++]=239,g[b++]=191,g[b++]=189,I=null);C<128?g[b++]=C:(C<2048?g[b++]=C>>6|192:(C<65536?g[b++]=C>>12|224:(g[b++]=C>>18|240,g[b++]=C>>12&63|128),g[b++]=C>>6&63|128),g[b++]=63&C|128)}return b})(this.buf,a,this.pos);const f=this.pos-s;f>=128&&T(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f}writeFloat(a){this.realloc(4),this.dataView.setFloat32(this.pos,a,!0),this.pos+=4}writeDouble(a){this.realloc(8),this.dataView.setFloat64(this.pos,a,!0),this.pos+=8}writeBytes(a){const s=a.length;this.writeVarint(s),this.realloc(s);for(let f=0;f<s;f++)this.buf[this.pos++]=a[f]}writeRawMessage(a,s){this.pos++;const f=this.pos;a(s,this);const g=this.pos-f;g>=128&&T(f,g,this),this.pos=f-1,this.writeVarint(g),this.pos+=g}writeMessage(a,s,f){this.writeTag(a,2),this.writeRawMessage(s,f)}writePackedVarint(a,s){s.length&&this.writeMessage(a,R,s)}writePackedSVarint(a,s){s.length&&this.writeMessage(a,q,s)}writePackedBoolean(a,s){s.length&&this.writeMessage(a,De,s)}writePackedFloat(a,s){s.length&&this.writeMessage(a,Z,s)}writePackedDouble(a,s){s.length&&this.writeMessage(a,de,s)}writePackedFixed32(a,s){s.length&&this.writeMessage(a,qe,s)}writePackedSFixed32(a,s){s.length&&this.writeMessage(a,vt,s)}writePackedFixed64(a,s){s.length&&this.writeMessage(a,qt,s)}writePackedSFixed64(a,s){s.length&&this.writeMessage(a,Ht,s)}writeBytesField(a,s){this.writeTag(a,2),this.writeBytes(s)}writeFixed32Field(a,s){this.writeTag(a,5),this.writeFixed32(s)}writeSFixed32Field(a,s){this.writeTag(a,5),this.writeSFixed32(s)}writeFixed64Field(a,s){this.writeTag(a,1),this.writeFixed64(s)}writeSFixed64Field(a,s){this.writeTag(a,1),this.writeSFixed64(s)}writeVarintField(a,s){this.writeTag(a,0),this.writeVarint(s)}writeSVarintField(a,s){this.writeTag(a,0),this.writeSVarint(s)}writeStringField(a,s){this.writeTag(a,2),this.writeString(s)}writeFloatField(a,s){this.writeTag(a,5),this.writeFloat(s)}writeDoubleField(a,s){this.writeTag(a,1),this.writeDouble(s)}writeBooleanField(a,s){this.writeVarintField(a,+s)}}function y(u,a,s){return s?4294967296*a+(u>>>0):4294967296*(a>>>0)+(u>>>0)}function T(u,a,s){const f=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));s.realloc(f);for(let g=s.pos-1;g>=u;g--)s.buf[g+f]=s.buf[g]}function R(u,a){for(let s=0;s<u.length;s++)a.writeVarint(u[s])}function q(u,a){for(let s=0;s<u.length;s++)a.writeSVarint(u[s])}function Z(u,a){for(let s=0;s<u.length;s++)a.writeFloat(u[s])}function de(u,a){for(let s=0;s<u.length;s++)a.writeDouble(u[s])}function De(u,a){for(let s=0;s<u.length;s++)a.writeBoolean(u[s])}function qe(u,a){for(let s=0;s<u.length;s++)a.writeFixed32(u[s])}function vt(u,a){for(let s=0;s<u.length;s++)a.writeSFixed32(u[s])}function qt(u,a){for(let s=0;s<u.length;s++)a.writeFixed64(u[s])}function Ht(u,a){for(let s=0;s<u.length;s++)a.writeSFixed64(u[s])}function Ut(u,a,s){u===1&&s.readMessage(pr,a)}function pr(u,a,s){if(u===3){const{id:f,bitmap:g,width:x,height:b,left:C,top:I,advance:j}=s.readMessage(xr,{});a.push({id:f,bitmap:new Rf({width:x+6,height:b+6},g),metrics:{width:x,height:b,left:C,top:I,advance:j}})}}function xr(u,a,s){u===1?a.id=s.readVarint():u===2?a.bitmap=s.readBytes():u===3?a.width=s.readVarint():u===4?a.height=s.readVarint():u===5?a.left=s.readSVarint():u===6?a.top=s.readSVarint():u===7&&(a.advance=s.readVarint())}function Pr(u){let a=0,s=0;for(const b of u)a+=b.w*b.h,s=Math.max(s,b.w);u.sort(((b,C)=>C.h-b.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),s),h:1/0}];let g=0,x=0;for(const b of u)for(let C=f.length-1;C>=0;C--){const I=f[C];if(!(b.w>I.w||b.h>I.h)){if(b.x=I.x,b.y=I.y,x=Math.max(x,b.y+b.h),g=Math.max(g,b.x+b.w),b.w===I.w&&b.h===I.h){const j=f.pop();j&&C<f.length&&(f[C]=j)}else b.h===I.h?(I.x+=b.w,I.w-=b.w):b.w===I.w?(I.y+=b.h,I.h-=b.h):(f.push({x:I.x+b.w,y:I.y,w:I.w-b.w,h:b.h}),I.y+=b.h,I.h-=b.h);break}}return{w:g,h:x,fill:a/(g*x)||0}}class Ei{constructor(a,{pixelRatio:s,version:f,stretchX:g,stretchY:x,content:b,textFitWidth:C,textFitHeight:I}){this.paddedRect=a,this.pixelRatio=s,this.stretchX=g,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=C,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lt{constructor(a,s){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(a,f,x),this.addImages(s,g,x);const{w:b,h:C}=Pr(x),I=new lo({width:b||1,height:C||1});for(const j in a){const V=a[j],G=f[j].paddedRect;lo.copy(V.data,I,{x:0,y:0},{x:G.x+1,y:G.y+1},V.data)}for(const j in s){const V=s[j],G=g[j].paddedRect,H=G.x+1,X=G.y+1,ee=V.data.width,ie=V.data.height;lo.copy(V.data,I,{x:0,y:0},{x:H,y:X},V.data),lo.copy(V.data,I,{x:0,y:ie-1},{x:H,y:X-1},{width:ee,height:1}),lo.copy(V.data,I,{x:0,y:0},{x:H,y:X+ie},{width:ee,height:1}),lo.copy(V.data,I,{x:ee-1,y:0},{x:H-1,y:X},{width:1,height:ie}),lo.copy(V.data,I,{x:0,y:0},{x:H+ee,y:X},{width:1,height:ie})}this.image=I,this.iconPositions=f,this.patternPositions=g}addImages(a,s,f){for(const g in a){const x=a[g],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(b),s[g]=new Ei(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(a,s){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),s),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),s)}patchUpdatedImage(a,s,f){if(!a||!s||a.version===s.version)return;a.version=s.version;const[g,x]=a.tl;f.update(s.data,void 0,{x:g,y:x})}}var He;function ft(u,a,s,f,g,x,b,C,I,j,V,G,H,X,ee){const ie=Vf.fromFeature(u,g);let se;G===d.az.vertical&&ie.verticalizePunctuation();let fe=ie.determineLineBreaks(j,x,a,f,X);const{processBidirectionalText:Pe,processStyledBidirectionalText:me}=ll;if(Pe&&ie.sections.length===1){se=[],fe=fe.map((nt=>ie.toCodeUnitIndex(nt)));const Re=Pe(ie.toString(),fe);for(const nt of Re){const kt=[...nt].map((()=>0));se.push(new Vf(nt,ie.sections,kt))}}else if(me){se=[],fe=fe.map((_t=>ie.toCodeUnitIndex(_t)));let Re=0;const nt=[];for(const _t of ie.text)nt.push(...Array(_t.length).fill(ie.sectionIndex[Re])),Re++;const kt=me(ie.text,nt,fe);for(const _t of kt){const Ot=[];let Kt="";for(const Rt of _t[0])Ot.push(_t[1][Kt.length]),Kt+=Rt;se.push(new Vf(_t[0],ie.sections,Ot))}}else se=(function(Re,nt){const kt=[];let _t=0;for(const Ot of nt)kt.push(Re.substring(_t,Ot)),_t=Ot;return _t<Re.length()&&kt.push(Re.substring(_t,Re.length())),kt})(ie,fe);const ge=[],Ce={positionedLines:ge,text:ie.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:G,iconsInText:!1,verticalizable:!1};return(function(Re,nt,kt,_t,Ot,Kt,Rt,Ct,dt,sr,nr,lr){let er=0,vr=0,fn=0,en=0;const yi=Ct==="right"?1:Ct==="left"?0:.5,fo=aa/lr;let oa=0;for(const An of Ot){An.trim();const Ci=An.getMaxScale(),Ni={positionedGlyphs:[],lineOffset:0};Re.positionedLines[oa]=Ni;const li=Ni.positionedGlyphs;let ps=0;if(!An.length()){vr+=Kt,++oa;continue}const po=kr(_t,An,fo);let ms=0;for(const Ta of An.text){const bi=An.getSection(ms),sa=Ta.codePointAt(0),Ti=Nr(dt,nr,sa),Ma={glyph:sa,imageName:null,x:er,y:vr+-17,vertical:Ti,scale:1,fontStack:"",sectionIndex:An.getSectionIndex(ms),metrics:null,rect:null};let cd;if("fontStack"in bi){if(cd=qr(bi,sa,Ti,po,nt,kt),!cd)continue;Ma.fontStack=bi.fontStack}else{if(Re.iconsInText=!0,bi.scale*=fo,cd=Pa(bi,Ti,Ci,po,_t),!cd)continue;ps=Math.max(ps,cd.imageOffset),Ma.imageName=bi.imageName}const{rect:cc,metrics:Av,baselineOffset:Wf}=cd;Ma.y+=Wf,Ma.scale=bi.scale,Ma.metrics=Av,Ma.rect=cc,li.push(Ma),Ti?(Re.verticalizable=!0,er+=("imageName"in bi?Av.advance:aa)*bi.scale+sr):er+=Av.advance*bi.scale+sr,ms++}li.length!==0&&(fn=Math.max(er-sr,fn),kn(li,0,li.length-1,yi)),er=0,Ni.lineOffset=Math.max(ps,(Ci-1)*aa);const au=Kt*Ci+ps;vr+=au,en=Math.max(au,en),++oa}const{horizontalAlign:vi,verticalAlign:di}=Qt(Rt);(function(An,Ci,Ni,li,ps,po,ms,au,Ta){const bi=(Ci-Ni)*ps;let sa=0;sa=po!==ms?-au*li- -17:-li*Ta*ms+.5*ms;for(const Ti of An)for(const Ma of Ti.positionedGlyphs)Ma.x+=bi,Ma.y+=sa})(Re.positionedLines,yi,vi,di,fn,en,Kt,vr,Ot.length),Re.top+=-di*vr,Re.bottom=Re.top+vr,Re.left+=-vi*fn,Re.right=Re.left+fn})(Ce,a,s,f,se,b,C,I,G,j,H,ee),!(function(Re){for(const nt of Re)if(nt.positionedGlyphs.length!==0)return!1;return!0})(ge)&&Ce}function Qt(u){let a=.5,s=.5;switch(u){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:a,verticalAlign:s}}function kr(u,a,s){const f=a.getMaxScale()*aa,{maxImageWidth:g,maxImageHeight:x}=a.getMaxImageSize(u),b=Math.max(f,x*s);return{verticalLineContentWidth:Math.max(f,g*s),horizontalLineContentHeight:b}}function Rr(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function Nr(u,a,s){return!(u===d.az.horizontal||!a&&!xf(s)||a&&(Xp(s)||(f=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function qr(u,a,s,f,g,x){const b=x[u.fontStack],C=(function(j,V,G,H){if(j&&j.rect)return j;const X=V[G.fontStack],ee=X&&X[H];return ee?{rect:null,metrics:ee.metrics}:null})(b&&b[a],g,u,a);if(C===null)return null;let I;if(s)I=f.verticalLineContentWidth-u.scale*aa;else{const j=Rr(u.verticalAlign);I=(f.horizontalLineContentHeight-u.scale*aa)*j}return{rect:C.rect,metrics:C.metrics,baselineOffset:I}}function Pa(u,a,s,f,g){const x=g[u.imageName];if(!x)return null;const b=x.paddedRect,C=x.displaySize,I={width:C[0],height:C[1],left:1,top:-3,advance:a?C[1]:C[0]};let j;if(a)j=f.verticalLineContentWidth-C[1]*u.scale;else{const V=Rr(u.verticalAlign);j=(f.horizontalLineContentHeight-C[1]*u.scale)*V}return{rect:b,metrics:I,baselineOffset:j,imageOffset:(a?C[0]:C[1])*u.scale-aa*s}}function kn(u,a,s,f){if(f===0)return;const g=u[s],x=(u[s].x+g.metrics.advance*g.scale)*f;for(let b=a;b<=s;b++)u[b].x-=x}function lh(u,a,s){const{horizontalAlign:f,verticalAlign:g}=Qt(s),x=a[0]-u.displaySize[0]*f,b=a[1]-u.displaySize[1]*g;return{image:u,top:b,bottom:b+u.displaySize[1],left:x,right:x+u.displaySize[0]}}function D0(u){var a,s;let f=u.left,g=u.top,x=u.right-f,b=u.bottom-g;const C=(a=u.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",I=(s=u.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",j=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(I==="proportional"){if(C==="stretchOnly"&&x/b<j||C==="proportional"){const V=Math.ceil(b*j);f*=V/x,x=V}}else if(C==="proportional"&&I==="stretchOnly"&&j!==0&&x/b>j){const V=Math.ceil(x/j);g*=V/b,b=V}return{x1:f,y1:g,x2:f+x,y2:g+b}}function iM(u,a,s,f,g,x){const b=u.image;let C;if(b.content){const se=b.content,fe=b.pixelRatio||1;C=[se[0]/fe,se[1]/fe,b.displaySize[0]-se[2]/fe,b.displaySize[1]-se[3]/fe]}const I=a.left*x,j=a.right*x;let V,G,H,X;s==="width"||s==="both"?(X=g[0]+I-f[3],G=g[0]+j+f[1]):(X=g[0]+(I+j-b.displaySize[0])/2,G=X+b.displaySize[0]);const ee=a.top*x,ie=a.bottom*x;return s==="height"||s==="both"?(V=g[1]+ee-f[0],H=g[1]+ie+f[2]):(V=g[1]+(ee+ie-b.displaySize[1])/2,H=V+b.displaySize[1]),{image:b,top:V,right:G,bottom:H,left:X,collisionPadding:C}}Jt("ImagePosition",Ei),Jt("ImageAtlas",lt),d.az=void 0,(He=d.az||(d.az={}))[He.none=0]="none",He[He.horizontal=1]="horizontal",He[He.vertical=2]="vertical",He[He.horizontalOnly=3]="horizontalOnly";const ld=128,$f=32640;function aM(u,a){const{expression:s}=a;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mn(u+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=s;let x=0;for(;x<f.length&&f[x]<=u;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<u+1;)b++;b=Math.min(f.length-1,b);const C=f[x],I=f[b];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:I,minSize:s.evaluate(new Mn(C)),maxSize:s.evaluate(new Mn(I)),interpolationType:g}}}function E1(u,a,s){let f="never";const g=u.get(a);return g?f=g:u.get(s)&&(f="always"),f}const Z6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function R0(u,a,s,f,g,x,b,C,I,j,V,G,H){const X=C?Math.min($f,Math.round(C[0])):0,ee=C?Math.min($f,Math.round(C[1])):0;u.emplaceBack(a,s,Math.round(32*f),Math.round(32*g),x,b,(X<<1)+(I?1:0),ee,16*j,16*V,256*G,256*H)}function C1(u,a,s){u.emplaceBack(a.x,a.y,s),u.emplaceBack(a.x,a.y,s),u.emplaceBack(a.x,a.y,s),u.emplaceBack(a.x,a.y,s)}function K6(u){for(const a of u.sections)if(Qh(a.text))return!0;return!1}class T1{constructor(a){this.layoutVertexArray=new Te,this.indexArray=new st,this.programConfigurations=a,this.segments=new Yt,this.dynamicLayoutVertexArray=new Ge,this.opacityVertexArray=new ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new k}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,s,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,M0.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,k0.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Z6,!0),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jt("SymbolBuffers",T1);class M1{constructor(a,s,f){this.layoutVertexArray=new a,this.layoutAttributes=s,this.indexArray=new f,this.segments=new Yt,this.collisionVertexArray=new ot}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Dg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jt("CollisionBuffers",M1);class zg{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=aM(this.zoom,s["text-size"]),this.iconSizeData=aM(this.zoom,s["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=E1(f,"text-overlap","text-allow-overlap")!=="never"||E1(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((b=>d.az[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=a.sourceID}createArrays(){this.text=new T1(new ru(this.layers,this.zoom,(a=>/^text/.test(a)))),this.icon=new T1(new ru(this.layers,this.zoom,(a=>/^icon/.test(a)))),this.glyphOffsetArray=new U,this.lineVertexArray=new W,this.symbolInstances=new N,this.textAnchorOffsets=new Y}calculateGlyphDependencies(a,s,f,g,x){for(const b of a)if(s[b.codePointAt(0)]=!0,(f||g)&&x){const C=Bf[b];C&&(s[C.codePointAt(0)]=!0)}}populate(a,s,f){const g=this.layers[0],x=g.layout,b=x.get("text-font"),C=x.get("text-field"),I=x.get("icon-image"),j=(C.value.kind!=="constant"||C.value.value instanceof Qi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),V=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,G=x.get("symbol-sort-key");if(this.features=[],!j&&!V)return;const H=s.iconDependencies,X=s.glyphDependencies,ee=s.availableImages,ie=new Mn(this.zoom);for(const{feature:se,id:fe,index:Pe,sourceLayerIndex:me}of a){const ge=g._featureFilter.needGeometry,Ce=ml(se,ge);if(!g._featureFilter.filter(ie,Ce,f))continue;let Re,nt;if(ge||(Ce.geometry=Vs(se)),j){const _t=g.getValueAndResolveTokens("text-field",Ce,f,ee),Ot=Qi.factory(_t),Kt=this.hasRTLText=this.hasRTLText||K6(Ot);(!Kt||ll.getRTLTextPluginStatus()==="unavailable"||Kt&&ll.isParsed())&&(Re=wv(Ot,g,Ce))}if(V){const _t=g.getValueAndResolveTokens("icon-image",Ce,f,ee);nt=_t instanceof eo?_t:eo.fromString(_t)}if(!Re&&!nt)continue;const kt=this.sortFeaturesByKey?G.evaluate(Ce,{},f):void 0;if(this.features.push({id:fe,text:Re,icon:nt,index:Pe,sourceLayerIndex:me,geometry:Ce.geometry,properties:se.properties,type:_l.types[se.type],sortKey:kt}),nt&&(H[nt.name]=!0),Re){const _t=b.evaluate(Ce,{},f).join(","),Ot=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.az.vertical)>=0;for(const Kt of Re.sections)if(Kt.image)H[Kt.image.name]=!0;else{const Rt=Xl(Re.toString()),Ct=Kt.fontStack||_t,dt=X[Ct]=X[Ct]||{};this.calculateGlyphDependencies(Kt.text,dt,Ot,this.allowVerticalPlacement,Rt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(se){const fe={},Pe={},me=[];let ge=0;function Ce(_t){me.push(se[_t]),ge++}function Re(_t,Ot,Kt){const Rt=Pe[_t];return delete Pe[_t],Pe[Ot]=Rt,me[Rt].geometry[0].pop(),me[Rt].geometry[0]=me[Rt].geometry[0].concat(Kt[0]),Rt}function nt(_t,Ot,Kt){const Rt=fe[Ot];return delete fe[Ot],fe[_t]=Rt,me[Rt].geometry[0].shift(),me[Rt].geometry[0]=Kt[0].concat(me[Rt].geometry[0]),Rt}function kt(_t,Ot,Kt){const Rt=Kt?Ot[0][Ot[0].length-1]:Ot[0][0];return`${_t}:${Rt.x}:${Rt.y}`}for(let _t=0;_t<se.length;_t++){const Ot=se[_t],Kt=Ot.geometry,Rt=Ot.text?Ot.text.toString():null;if(!Rt){Ce(_t);continue}const Ct=kt(Rt,Kt),dt=kt(Rt,Kt,!0);if(Ct in Pe&&dt in fe&&Pe[Ct]!==fe[dt]){const sr=nt(Ct,dt,Kt),nr=Re(Ct,dt,me[sr].geometry);delete fe[Ct],delete Pe[dt],Pe[kt(Rt,me[nr].geometry,!0)]=nr,me[sr].geometry=null}else Ct in Pe?Re(Ct,dt,Kt):dt in fe?nt(Ct,dt,Kt):(Ce(_t),fe[Ct]=ge-1,Pe[dt]=ge-1)}return me.filter((_t=>_t.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((se,fe)=>se.sortKey-fe.sortKey))}update(a,s,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,s,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(a,s,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,s){const f=this.lineVertexArray.length;if(a.segment!==void 0){let g=a.dist(s[a.segment+1]),x=a.dist(s[a.segment]);const b={};for(let C=a.segment+1;C<s.length;C++)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:g},C<s.length-1&&(g+=s[C+1].dist(s[C]));for(let C=a.segment||0;C>=0;C--)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=s[C-1].dist(s[C]));for(let C=0;C<s.length;C++){const I=b[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(a,s,f,g,x,b,C,I,j,V,G,H){const X=a.indexArray,ee=a.layoutVertexArray,ie=a.segments.prepareSegment(4*s.length,ee,X,this.canOverlap?b.sortKey:void 0),se=this.glyphOffsetArray.length,fe=ie.vertexLength,Pe=this.allowVerticalPlacement&&C===d.az.vertical?Math.PI/2:0,me=b.text&&b.text.sections;for(let ge=0;ge<s.length;ge++){const{tl:Ce,tr:Re,bl:nt,br:kt,tex:_t,pixelOffsetTL:Ot,pixelOffsetBR:Kt,minFontScaleX:Rt,minFontScaleY:Ct,glyphOffset:dt,isSDF:sr,sectionIndex:nr}=s[ge],lr=ie.vertexLength,er=dt[1];R0(ee,I.x,I.y,Ce.x,er+Ce.y,_t.x,_t.y,f,sr,Ot.x,Ot.y,Rt,Ct),R0(ee,I.x,I.y,Re.x,er+Re.y,_t.x+_t.w,_t.y,f,sr,Kt.x,Ot.y,Rt,Ct),R0(ee,I.x,I.y,nt.x,er+nt.y,_t.x,_t.y+_t.h,f,sr,Ot.x,Kt.y,Rt,Ct),R0(ee,I.x,I.y,kt.x,er+kt.y,_t.x+_t.w,_t.y+_t.h,f,sr,Kt.x,Kt.y,Rt,Ct),C1(a.dynamicLayoutVertexArray,I,Pe),X.emplaceBack(lr,lr+2,lr+1),X.emplaceBack(lr+1,lr+2,lr+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),ge!==s.length-1&&nr===s[ge+1].sectionIndex||a.programConfigurations.populatePaintArrays(ee.length,b,b.index,{imagePositions:{},canonical:H,formattedSection:me&&me[nr]})}a.placedSymbolArray.emplaceBack(I.x,I.y,se,this.glyphOffsetArray.length-se,fe,j,V,I.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],C,0,!1,0,G)}_addCollisionDebugVertex(a,s,f,g,x,b){return s.emplaceBack(0,0),a.emplaceBack(f.x,f.y,g,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(a,s,f,g,x,b,C){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),j=I.vertexLength,V=x.layoutVertexArray,G=x.collisionVertexArray,H=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(V,G,b,H,X,new _(a,s)),this._addCollisionDebugVertex(V,G,b,H,X,new _(f,s)),this._addCollisionDebugVertex(V,G,b,H,X,new _(f,g)),this._addCollisionDebugVertex(V,G,b,H,X,new _(a,g)),I.vertexLength+=4;const ee=x.indexArray;ee.emplaceBack(j,j+1),ee.emplaceBack(j+1,j+2),ee.emplaceBack(j+2,j+3),ee.emplaceBack(j+3,j),I.primitiveLength+=4}addDebugCollisionBoxes(a,s,f,g){for(let x=a;x<s;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,g?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new M1(at,hm.members,Nt),this.iconCollisionBox=new M1(at,hm.members,Nt);for(let a=0;a<this.symbolInstances.length;a++){const s=this.symbolInstances.get(a);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(a,s,f,g,x,b,C,I,j){const V={};for(let G=s;G<f;G++){const H=a.get(G);V.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},V.textFeatureIndex=H.featureIndex;break}for(let G=g;G<x;G++){const H=a.get(G);V.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},V.verticalTextFeatureIndex=H.featureIndex;break}for(let G=b;G<C;G++){const H=a.get(G);V.iconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},V.iconFeatureIndex=H.featureIndex;break}for(let G=I;G<j;G++){const H=a.get(G);V.verticalIconBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},V.verticalIconFeatureIndex=H.featureIndex;break}return V}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,s){const f=a.placedSymbolArray.get(s),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)a.indexArray.emplaceBack(x,x+2,x+1),a.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(a),f=Math.cos(a),g=[],x=[],b=[];for(let C=0;C<this.symbolInstances.length;++C){b.push(C);const I=this.symbolInstances.get(C);g.push(0|Math.round(s*I.anchorX+f*I.anchorY)),x.push(I.featureIndex)}return b.sort(((C,I)=>g[C]-g[I]||x[I]-x[C])),b}addToSortKeyRanges(a,s){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===s?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const f=this.symbolInstances.get(s);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((g,x,b)=>{g>=0&&b.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let oM,sM;Jt("SymbolBucket",zg,{omit:["layers","collisionBoxArray","features","compareText"]}),zg.MAX_GLYPHS=65535,zg.addDynamicAttributes=C1;var k1={get paint(){return sM=sM||new xi({"icon-opacity":new gr(tt.paint_symbol["icon-opacity"]),"icon-color":new gr(tt.paint_symbol["icon-color"]),"icon-halo-color":new gr(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gr(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gr(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new ar(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ar(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gr(tt.paint_symbol["text-opacity"]),"text-color":new gr(tt.paint_symbol["text-color"],{runtimeType:dr,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new gr(tt.paint_symbol["text-halo-color"]),"text-halo-width":new gr(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new gr(tt.paint_symbol["text-halo-blur"]),"text-translate":new ar(tt.paint_symbol["text-translate"]),"text-translate-anchor":new ar(tt.paint_symbol["text-translate-anchor"])})},get layout(){return oM=oM||new xi({"symbol-placement":new ar(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new ar(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ar(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gr(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ar(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ar(tt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ar(tt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ar(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ar(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ar(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gr(tt.layout_symbol["icon-size"]),"icon-text-fit":new ar(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ar(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gr(tt.layout_symbol["icon-image"]),"icon-rotate":new gr(tt.layout_symbol["icon-rotate"]),"icon-padding":new gr(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new ar(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new gr(tt.layout_symbol["icon-offset"]),"icon-anchor":new gr(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ar(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ar(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ar(tt.layout_symbol["text-rotation-alignment"]),"text-field":new gr(tt.layout_symbol["text-field"]),"text-font":new gr(tt.layout_symbol["text-font"]),"text-size":new gr(tt.layout_symbol["text-size"]),"text-max-width":new gr(tt.layout_symbol["text-max-width"]),"text-line-height":new ar(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new gr(tt.layout_symbol["text-letter-spacing"]),"text-justify":new gr(tt.layout_symbol["text-justify"]),"text-radial-offset":new gr(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ar(tt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gr(tt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gr(tt.layout_symbol["text-anchor"]),"text-max-angle":new ar(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new ar(tt.layout_symbol["text-writing-mode"]),"text-rotate":new gr(tt.layout_symbol["text-rotate"]),"text-padding":new ar(tt.layout_symbol["text-padding"]),"text-keep-upright":new ar(tt.layout_symbol["text-keep-upright"]),"text-transform":new gr(tt.layout_symbol["text-transform"]),"text-offset":new gr(tt.layout_symbol["text-offset"]),"text-allow-overlap":new ar(tt.layout_symbol["text-allow-overlap"]),"text-overlap":new ar(tt.layout_symbol["text-overlap"]),"text-ignore-placement":new ar(tt.layout_symbol["text-ignore-placement"]),"text-optional":new ar(tt.layout_symbol["text-optional"])})}};class lM{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:hr,this.defaultValue=a}evaluate(a){if(a.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(a.formattedSection))return s.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt("FormatSectionOverride",lM,{omit:["defaultValue"]});class j0 extends io{constructor(a,s){super(a,k1,s)}recalculate(a,s){if(super.recalculate(a,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,s,f,g){const x=this.layout.get(a).evaluate(s,{},f,g),b=this._unevaluatedLayout._values[a];return b.isDataDriven()||Bu(b.value)||!x?x:(function(C,I){return I.replace(/{([^{}]+)}/g,((j,V)=>C&&V in C?String(C[V]):""))})(s.properties,x)}createBucket(a){return new zg(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of k1.paint.overridableProperties){if(!j0.hasPaintOverride(this.layout,a))continue;const s=this.paint.get(a),f=new lM(s),g=new Fu(f,s.property.specification);let x=null;x=s.value.kind==="constant"||s.value.kind==="source"?new Vl("source",g):new qc("composite",g,s.value.zoomStops),this.paint._values[a]=new Eo(s.property,x,s.parameters)}}_handleOverridablePaintPropertyUpdate(a,s,f){return!(!this.layout||s.isDataDriven()||f.isDataDriven())&&j0.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,s){const f=a.get("text-field"),g=k1.paint.properties[s];let x=!1;const b=C=>{for(const I of C)if(g.overrides&&g.overrides.hasOverride(I))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Qi)b(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const C=j=>{x||(j instanceof ja&&Zn(j.value)===vn?b(j.value.sections):j instanceof Oh?b(j.sections):j.eachChild(C))},I=f.value;I._styleExpression&&C(I._styleExpression.expression)}return x}}let uM;var X6={get paint(){return uM=uM||new xi({"background-color":new ar(tt.paint_background["background-color"]),"background-pattern":new Jh(tt.paint_background["background-pattern"]),"background-opacity":new ar(tt.paint_background["background-opacity"])})}};class Y6 extends io{constructor(a,s){super(a,X6,s)}}class Q6 extends io{constructor(a,s){super(a,{},s),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class J6{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const eV={once:!0},A1=63710088e-1;class Uf{constructor(a,s){if(isNaN(a)||isNaN(s))throw new Error(`Invalid LngLat object: (${a}, ${s})`);if(this.lng=+a,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Uf(Ft(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const s=Math.PI/180,f=this.lat*s,g=a.lat*s,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((a.lng-this.lng)*s);return A1*Math.acos(Math.min(x,1))}static convert(a){if(a instanceof Uf)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Uf(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Uf(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const cM=2*Math.PI*A1;function hM(u){return cM*Math.cos(u*Math.PI/180)}function dM(u){return(180+u)/360}function fM(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function pM(u,a){return u/hM(a)}function mM(u){return 360*u-180}function z0(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function gM(u,a){return u*hM(z0(a))}class Pv{constructor(a,s,f=0){this.x=+a,this.y=+s,this.z=+f}static fromLngLat(a,s=0){const f=Uf.convert(a);return new Pv(dM(f.lng),fM(f.lat),pM(s,f.lat))}toLngLat(){return new Uf(mM(this.x),z0(this.y))}toAltitude(){return gM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/cM*(a=z0(this.y),1/Math.cos(a*Math.PI/180));var a}}function yM(u,a,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[u*f-2*Math.PI*6378137/2,a*f-2*Math.PI*6378137/2]}class I1{constructor(a,s,f){if(!(function(g,x,b){return!(g<0||g>25||b<0||b>=Math.pow(2,g)||x<0||x>=Math.pow(2,g))})(a,s,f))throw new Error(`x=${s}, y=${f}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=s,this.y=f,this.key=Ng(0,a,a,s,f)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,s,f){const g=(function(b,C,I){var j=yM(256*b,256*(C=Math.pow(2,I)-C-1),I),V=yM(256*(b+1),256*(C+1),I);return j[0]+","+j[1]+","+V[0]+","+V[1]})(this.x,this.y,this.z),x=(function(b,C,I){let j,V="";for(let G=b;G>0;G--)j=1<<G-1,V+=(C&j?1:0)+(I&j?2:0);return V})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,g)}isChildOf(a){const s=this.z-a.z;return s>0&&a.x===this.x>>s&&a.y===this.y>>s}getTilePoint(a){const s=Math.pow(2,this.z);return new _((a.x*s-this.x)*Qe,(a.y*s-this.y)*Qe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vM{constructor(a,s){this.wrap=a,this.canonical=s,this.key=Ng(a,s.z,s.z,s.x,s.y)}}class bl{constructor(a,s,f,g,x){if(this.terrainRttPosMatrix32f=null,a<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${f}`);this.overscaledZ=a,this.wrap=s,this.canonical=new I1(f,+g,+x),this.key=Ng(s,a,f,g,x)}clone(){return new bl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-a;return a>this.canonical.z?new bl(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bl(a,this.wrap,a,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(a,s){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?Ng(this.wrap*+s,a,this.canonical.z,this.canonical.x,this.canonical.y):Ng(this.wrap*+s,a,a,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(a){if(a.wrap!==this.wrap||this.overscaledZ-a.overscaledZ<=0)return!1;if(a.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-a.canonical.z;return!(s<0)&&a.canonical.x===this.canonical.x>>s&&a.canonical.y===this.canonical.y>>s}children(a){if(this.overscaledZ>=a)return[new bl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new bl(s,this.wrap,s,f,g),new bl(s,this.wrap,s,f+1,g),new bl(s,this.wrap,s,f,g+1),new bl(s,this.wrap,s,f+1,g+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new bl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new bl(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Pv(a.x-this.wrap,a.y))}}function Ng(u,a,s,f,g){(u*=2)<0&&(u=-1*u-1);const x=1<<s;return(x*x*u+x*g+f).toString(36)+s.toString(36)+a.toString(36)}function O1(u,a){return a?u.properties[a]:u.id}function tV(u,a){const s={id:u.id};if(a.removeAllProperties&&(delete u.removeProperties,delete u.addOrUpdateProperties,delete a.removeProperties),a.removeProperties)for(const f of a.removeProperties){const g=u.addOrUpdateProperties.findIndex((x=>x.key===f));g>-1&&u.addOrUpdateProperties.splice(g,1)}return(u.removeAllProperties||a.removeAllProperties)&&(s.removeAllProperties=!0),(u.removeProperties||a.removeProperties)&&(s.removeProperties=[...u.removeProperties||[],...a.removeProperties||[]]),(u.addOrUpdateProperties||a.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...u.addOrUpdateProperties||[],...a.addOrUpdateProperties||[]]),(u.newGeometry||a.newGeometry)&&(s.newGeometry=a.newGeometry||u.newGeometry),s}function _M(u){var a,s;if(!u)return{};const f={};return f.removeAll=u.removeAll,f.remove=new Set(u.remove||[]),f.add=new Map((a=u.add)===null||a===void 0?void 0:a.map((g=>[g.id,g]))),f.update=new Map((s=u.update)===null||s===void 0?void 0:s.map((g=>[g.id,g]))),f}Jt("CanonicalTileID",I1),Jt("OverscaledTileID",bl,{omit:["terrainRttPosMatrix32f"]});class mm{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(a){return this.minX=Math.min(this.minX,a.x),this.minY=Math.min(this.minY,a.y),this.maxX=Math.max(this.maxX,a.x),this.maxY=Math.max(this.maxY,a.y),this}expandBy(a){return this.minX-=a,this.minY-=a,this.maxX+=a,this.maxY+=a,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(a){return this.expandBy(-a)}map(a){const s=new mm;return s.extend(a(new _(this.minX,this.minY))),s.extend(a(new _(this.maxX,this.minY))),s.extend(a(new _(this.minX,this.maxY))),s.extend(a(new _(this.maxX,this.maxY))),s}static fromPoints(a){const s=new mm;for(const f of a)s.extend(f);return s}contains(a){return a.x>=this.minX&&a.x<=this.maxX&&a.y>=this.minY&&a.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(a){return!this.empty()&&!a.empty()&&a.minX>=this.minX&&a.maxX<=this.maxX&&a.minY>=this.minY&&a.maxY<=this.maxY}intersects(a){return!this.empty()&&!a.empty()&&a.minX<=this.maxX&&a.maxX>=this.minX&&a.minY<=this.maxY&&a.maxY>=this.minY}}class xM{constructor(a){this._stringToNumber={},this._numberToString=[];for(let s=0;s<a.length;s++){const f=a[s];this._stringToNumber[f]=s,this._numberToString[s]=f}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class bM{constructor(a,s,f,g,x){this.type="Feature",this._vectorTileFeature=a,this._x=f,this._y=g,this._z=s,this.properties=a.properties,this.id=x}projectPoint(a,s,f,g){return[360*(a.x+s)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(a.y+f)/g)*Math.PI))-90]}projectLine(a,s,f,g){return a.map((x=>this.projectPoint(x,s,f,g)))}get geometry(){if(this._geometry)return this._geometry;const a=this._vectorTileFeature,s=a.extent*Math.pow(2,this._z),f=a.extent*this._x,g=a.extent*this._y,x=a.loadGeometry();switch(a.type){case 1:{const b=[];for(const I of x)b.push(I[0]);const C=this.projectLine(b,f,g,s);this._geometry=b.length===1?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C};break}case 2:{const b=x.map((C=>this.projectLine(C,f,g,s)));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=mv(x),C=[];for(const I of b)C.push(I.map((j=>this.projectLine(j,f,g,s))));this._geometry=C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C};break}default:throw new Error(`unknown feature type: ${a.type}`)}return this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(a[s]=this[s]);return a}}class Fg{constructor(a,s,f){$r(this,"_name");$r(this,"dataBuffer");$r(this,"nullabilityBuffer");$r(this,"_size");this._name=a,this.dataBuffer=s,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(a){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(a)?null:this.getValueFromBuffer(a)}has(a){return this.nullabilityBuffer&&this.nullabilityBuffer.get(a)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class N0 extends Fg{}class L1 extends N0{getValueFromBuffer(a){return this.dataBuffer[a]}}class D1 extends N0{getValueFromBuffer(a){return this.dataBuffer[a]}}class wM extends Fg{constructor(s,f,g,x){super(s,f,x);$r(this,"delta");this.delta=g}}class R1 extends wM{constructor(a,s,f,g){super(a,Int32Array.of(s),f,g)}getValueFromBuffer(a){return this.dataBuffer[0]+a*this.delta}}class j1 extends Fg{constructor(a,s,f){super(a,Int32Array.of(s),f)}getValueFromBuffer(a){return this.dataBuffer[0]}}class rV{constructor(a,s,f,g,x=4096){$r(this,"_name");$r(this,"_geometryVector");$r(this,"_idVector");$r(this,"_propertyVectors");$r(this,"_extent");$r(this,"propertyVectorsMap");this._name=a,this._geometryVector=s,this._idVector=f,this._propertyVectors=g,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(a){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(a)}*[Symbol.iterator](){const a=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const g=a==null?void 0:a.next().value,x={};for(const b of this.propertyVectors){if(!b)continue;const C=b.name,I=b.getValue(s);I!==null&&(x[C]=I)}s++,yield{id:f,geometry:g,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const a=[],s=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let g;this.idVector&&(g=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const x={coordinates:s[f],type:this.geometryVector.geometryType(f)},b={};for(const C of this.propertyVectors){if(!C)continue;const I=C.name,j=C.getValue(f);j!==null&&(b[I]=j)}a.push({id:g,geometry:x,properties:b})}return a}containsMaxSaveIntegerValues(a){return a instanceof L1||a instanceof j1&&a instanceof R1||a instanceof D1}}class nV{constructor(a){$r(this,"value");this.value=a}get(){return this.value}set(a){this.value=a}increment(){return this.value++}add(a){this.value+=a}}var rn,ud,co,lc,gm,Gs,Ea,Ca,SM,wl;function Ua(u,a,s){const f=new Int32Array(s);let g=0,x=a.get();for(let b=0;b<f.length;b++){let C=u[x++],I=127&C;C<128||(C=u[x++],I|=(127&C)<<7,C<128||(C=u[x++],I|=(127&C)<<14,C<128||(C=u[x++],I|=(127&C)<<21,C<128||(C=u[x++],I|=(15&C)<<28)))),f[g++]=I}return a.set(x),f}function F0(u,a,s){const f=new BigInt64Array(s);for(let g=0;g<f.length;g++)f[g]=aV(u,a);return f}function iV(u,a){let s,f;return f=u[a.get()],a.increment(),s=127&f,f<128?s:(f=u[a.get()],a.increment(),s|=(127&f)<<7,f<128?s:(f=u[a.get()],a.increment(),s|=(127&f)<<14,f<128?s:(f=u[a.get()],a.increment(),s|=(127&f)<<21,f<128?s:(f=u[a.get()],s|=(15&f)<<28,(function(g,x,b){let C,I;if(I=x[b.get()],b.increment(),C=(112&I)>>4,I<128||(I=x[b.get()],b.increment(),C|=(127&I)<<3,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<10,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<17,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<24,I<128)||(I=x[b.get()],b.increment(),C|=(1&I)<<31,I<128))return 4294967296*C+(g>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,u,a)))))}function PM(u,a,s,f){throw new Error("FastPFor is not implemented yet.")}function ym(u){return u>>>1^-(1&u)}function Bg(u){return u>>1n^-(1n&u)}function aV(u,a){let s=0n,f=0,g=a.get();for(;g<u.length;){const x=u[g++];if(s|=BigInt(127&x)<<BigInt(f),!(128&x))break;if(f+=7,f>=64)throw new Error("Varint too long")}return a.set(g),s}function EM(u,a,s){const f=new Int32Array(s);let g=0;for(let x=0;x<a;x++){const b=u[x];f.fill(u[x+a],g,g+b),g+=b}return f}function CM(u,a,s){const f=new BigInt64Array(s);let g=0;for(let x=0;x<a;x++){const b=Number(u[x]);f.fill(u[x+a],g,g+b),g+=b}return f}function TM(u,a,s){const f=new Float64Array(s);let g=0;for(let x=0;x<a;x++){const b=u[x];f.fill(u[x+a],g,g+b),g+=b}return f}function z1(u){const a=u.length/4*4;let s=1;if(a>=4)for(let f=u[0];s<a-4;s+=4)f=u[s]+=f,f=u[s+1]+=f,f=u[s+2]+=f,f=u[s+3]+=f;for(;s!=u.length;)u[s]+=u[s-1],++s}function MM(u){u[0]=u[0]>>>1^-(1&u[0]),u[1]=u[1]>>>1^-(1&u[1]);const a=u.length/4*4;let s=2;if(a>=4)for(;s<a-4;s+=4){const f=u[s],g=u[s+1],x=u[s+2],b=u[s+3];u[s]=(f>>>1^-(1&f))+u[s-2],u[s+1]=(g>>>1^-(1&g))+u[s-1],u[s+2]=(x>>>1^-(1&x))+u[s],u[s+3]=(b>>>1^-(1&b))+u[s+1]}for(;s!=u.length;s+=2)u[s]=(u[s]>>>1^-(1&u[s]))+u[s-2],u[s+1]=(u[s+1]>>>1^-(1&u[s+1]))+u[s-1]}(function(u){u.NONE="NONE",u.DELTA="DELTA",u.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",u.RLE="RLE",u.MORTON="MORTON",u.PDE="PDE"})(rn||(rn={})),(function(u){u.NONE="NONE",u.FAST_PFOR="FAST_PFOR",u.VARINT="VARINT",u.ALP="ALP"})(ud||(ud={})),(function(u){u.PRESENT="PRESENT",u.DATA="DATA",u.OFFSET="OFFSET",u.LENGTH="LENGTH"})(co||(co={}));class N1{constructor(a,s,f){$r(this,"_dictionaryType");$r(this,"_offsetType");$r(this,"_lengthType");this._dictionaryType=a,this._offsetType=s,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Wo(u,a){const s=(function(f,g){const x=f[g.get()],b=Object.values(co)[x>>4];let C=null;switch(b){case co.DATA:C=new N1(Object.values(lc)[15&x]);break;case co.OFFSET:C=new N1(null,Object.values(gm)[15&x]);break;case co.LENGTH:C=new N1(null,null,Object.values(Gs)[15&x])}g.increment();const I=f[g.get()],j=Object.values(rn)[I>>5],V=Object.values(rn)[I>>2&7],G=Object.values(ud)[3&I];g.increment();const H=Ua(f,g,2),X=H[0];return{physicalStreamType:b,logicalStreamType:C,logicalLevelTechnique1:j,logicalLevelTechnique2:V,physicalLevelTechnique:G,numValues:X,byteLength:H[1],decompressedCount:X}})(u,a);return s.logicalLevelTechnique1===rn.MORTON?(function(f,g,x){const b=Ua(g,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:b[0],coordinateShift:b[1]}})(s,u,a):rn.RLE!==s.logicalLevelTechnique1&&rn.RLE!==s.logicalLevelTechnique2||ud.NONE===s.physicalLevelTechnique?s:(function(f,g,x){const b=Ua(g,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}})(s,u,a)}(function(u){u.NONE="NONE",u.SINGLE="SINGLE",u.SHARED="SHARED",u.VERTEX="VERTEX",u.MORTON="MORTON",u.FSST="FSST"})(lc||(lc={})),(function(u){u.VERTEX="VERTEX",u.INDEX="INDEX",u.STRING="STRING",u.KEY="KEY"})(gm||(gm={})),(function(u){u.VAR_BINARY="VAR_BINARY",u.GEOMETRIES="GEOMETRIES",u.PARTS="PARTS",u.RINGS="RINGS",u.TRIANGLES="TRIANGLES",u.SYMBOL="SYMBOL",u.DICTIONARY="DICTIONARY"})(Gs||(Gs={})),(function(u){u[u.FLAT=0]="FLAT",u[u.CONST=1]="CONST",u[u.SEQUENCE=2]="SEQUENCE",u[u.DICTIONARY=3]="DICTIONARY",u[u.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ea||(Ea={}));class uc{constructor(a,s){$r(this,"values");$r(this,"_size");this.values=a,this._size=s}get(a){const s=Math.floor(a/8);return(this.values[s]>>a%8&1)==1}set(a,s){const f=Math.floor(a/8);this.values[f]=this.values[f]|(s?1:0)<<a%8}getInt(a){const s=Math.floor(a/8);return this.values[s]>>a%8&1}size(){return this._size}getBuffer(){return this.values}}function Ho(u,a,s,f,g){return(function(x,b,C){switch(b.logicalLevelTechnique1){case rn.DELTA:return b.logicalLevelTechnique2===rn.RLE?(function(I,j,V){const G=new Int32Array(V);let H=0,X=0;for(let ee=0;ee<j;ee++){const ie=I[ee],se=ym(I[ee+j]);for(let fe=0;fe<ie;fe++)X+=se,G[H++]=X}return G})(x,b.runs,b.numRleValues):((function(I){I[0]=I[0]>>>1^-(1&I[0]);const j=I.length/4*4;let V=1;if(j>=4)for(;V<j-4;V+=4){const G=I[V],H=I[V+1],X=I[V+2],ee=I[V+3];I[V]=(G>>>1^-(1&G))+I[V-1],I[V+1]=(H>>>1^-(1&H))+I[V],I[V+2]=(X>>>1^-(1&X))+I[V+1],I[V+3]=(ee>>>1^-(1&ee))+I[V+2]}for(;V!=I.length;++V)I[V]=(I[V]>>>1^-(1&I[V]))+I[V-1]})(x),x);case rn.RLE:return(function(I,j,V){return V?(function(G,H,X){const ee=new Int32Array(X);let ie=0;for(let se=0;se<H;se++){const fe=G[se];let Pe=G[se+H];Pe=Pe>>>1^-(1&Pe),ee.fill(Pe,ie,ie+fe),ie+=fe}return ee})(I,j.runs,j.numRleValues):EM(I,j.runs,j.numRleValues)})(x,b,C);case rn.MORTON:return z1(x),x;case rn.COMPONENTWISE_DELTA:return MM(x),x;case rn.NONE:return C&&(function(I){for(let j=0;j<I.length;j++){const V=I[j];I[j]=V>>>1^-(1&V)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}})(B0(u,a,s),s,f)}function qf(u,a,s){return(function(f,g){if(g.logicalLevelTechnique1===rn.DELTA&&g.logicalLevelTechnique2===rn.NONE)return(function(b){const C=new Int32Array(b.length+1);C[0]=0,C[1]=ym(b[0]);let I=C[1],j=2;for(;j!=C.length;++j){const V=b[j-1];I+=V>>>1^-(1&V),C[j]=C[j-1]+I}return C})(f);if(g.logicalLevelTechnique1===rn.RLE&&g.logicalLevelTechnique2===rn.NONE)return(function(b,C,I){const j=new Int32Array(I+1);j[0]=0;let V=1,G=j[0];for(let H=0;H<C;H++){const X=b[H],ee=b[H+C];for(let ie=V;ie<V+X;ie++)j[ie]=ee+G,G=j[ie];V+=X}return j})(f,g.runs,g.numRleValues);if(g.logicalLevelTechnique1===rn.NONE&&g.logicalLevelTechnique2===rn.NONE){(function(b){let C=0;for(let I=0;I<b.length;I++)b[I]+=C,C=b[I]})(f);const x=new Int32Array(g.numValues+1);return x[0]=0,x.set(f,1),x}if(g.logicalLevelTechnique1===rn.DELTA&&g.logicalLevelTechnique2===rn.RLE){const x=(function(b,C,I){const j=new Int32Array(I+1);j[0]=0;let V=1,G=j[0];for(let H=0;H<C;H++){const X=b[H];let ee=b[H+C];ee=ee>>>1^-(1&ee);for(let ie=V;ie<V+X;ie++)j[ie]=ee+G,G=j[ie];V+=X}return j})(f,g.runs,g.numRleValues);return z1(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(B0(u,a,s),s)}function B0(u,a,s){const f=s.physicalLevelTechnique;if(f===ud.FAST_PFOR)return PM();if(f===ud.VARINT)return Ua(u,a,s.numValues);if(f===ud.NONE){const g=a.get();a.add(s.byteLength);const x=u.subarray(g,a.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function F1(u,a,s,f){const g=B0(u,a,s);if(g.length===1){const x=g[0];return f?ym(x):x}return f?(function(x){return ym(x[1])})(g):(function(x){return x[1]})(g)}function kM(u,a,s){return(function(f){if(f.length==2){const g=ym(f[1]);return[g,g]}return[ym(f[2]),ym(f[3])]})(B0(u,a,s))}function AM(u,a,s){return(function(f){if(f.length==2){const g=Bg(f[1]);return[g,g]}return[Bg(f[2]),Bg(f[3])]})(F0(u,a,s.numValues))}function IM(u,a,s,f){return(function(g,x,b){switch(x.logicalLevelTechnique1){case rn.DELTA:return x.logicalLevelTechnique2===rn.RLE?(function(C,I,j){const V=new BigInt64Array(j);let G=0,H=0n;for(let X=0;X<I;X++){const ee=Number(C[X]),ie=Bg(C[X+I]);for(let se=0;se<ee;se++)H+=ie,V[G++]=H}return V})(g,x.runs,x.numRleValues):((function(C){C[0]=C[0]>>1n^-(1n&C[0]);const I=C.length/4*4;let j=1;if(I>=4)for(;j<I-4;j+=4){const V=C[j],G=C[j+1],H=C[j+2],X=C[j+3];C[j]=(V>>1n^-(1n&V))+C[j-1],C[j+1]=(G>>1n^-(1n&G))+C[j],C[j+2]=(H>>1n^-(1n&H))+C[j+1],C[j+3]=(X>>1n^-(1n&X))+C[j+2]}for(;j!=C.length;++j)C[j]=(C[j]>>1n^-(1n&C[j]))+C[j-1]})(g),g);case rn.RLE:return(function(C,I,j){return j?(function(V,G,H){const X=new BigInt64Array(H);let ee=0;for(let ie=0;ie<G;ie++){const se=Number(V[ie]);let fe=V[ie+G];fe=fe>>1n^-(1n&fe),X.fill(fe,ee,ee+se),ee+=se}return X})(C,I.runs,I.numRleValues):CM(C,I.runs,I.numRleValues)})(g,x,b);case rn.NONE:return b&&(function(C){for(let I=0;I<C.length;I++){const j=C[I];C[I]=j>>1n^-(1n&j)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(F0(u,a,s.numValues),s,f)}function OM(u,a,s,f){const g=F0(u,a,s.numValues);if(g.length===1){const x=g[0];return f?Bg(x):x}return f?(function(x){return Bg(x[1])})(g):(function(x){return x[1]})(g)}function B1(u,a,s,f,g){return(function(x,b,C,I){switch(b.logicalLevelTechnique1){case rn.DELTA:return b.logicalLevelTechnique2===rn.RLE&&(x=EM(x,b.runs,b.numRleValues)),(function(j,V){const G=new Int32Array(j.size());let H=0;j.get(0)?(G[0]=j.get(0)?V[0]>>>1^-(1&V[0]):0,H=1):G[0]=0;let X=1;for(;X!=G.length;++X)G[X]=j.get(X)?G[X-1]+(V[H]>>>1^-(1&V[H++])):G[X-1];return G})(I,x);case rn.RLE:return(function(j,V,G,H){const X=V;return G?(function(ee,ie,se){const fe=new Int32Array(ee.size());let Pe=0;for(let me=0;me<se;me++){const ge=ie[me];let Ce=ie[me+se];Ce=Ce>>>1^-(1&Ce);for(let Re=Pe;Re<Pe+ge;Re++)ee.get(Re)?fe[Re]=Ce:(fe[Re]=0,Pe++);Pe+=ge}return fe})(H,j,X.runs):(function(ee,ie,se){const fe=new Int32Array(ee.size());let Pe=0;for(let me=0;me<se;me++){const ge=ie[me],Ce=ie[me+se];for(let Re=Pe;Re<Pe+ge;Re++)ee.get(Re)?fe[Re]=Ce:(fe[Re]=0,Pe++);Pe+=ge}return fe})(H,j,X.runs)})(x,b,C,I);case rn.MORTON:return z1(x),x;case rn.COMPONENTWISE_DELTA:return MM(x),x;case rn.NONE:return x=C?(function(j,V){const G=new Int32Array(j.size());let H=0,X=0;for(;X!=G.length;++X)if(j.get(X)){const ee=V[H++];G[X]=ee>>>1^-(1&ee)}else G[X]=0;return G})(I,x):(function(j,V){const G=new Int32Array(j.size());let H=0,X=0;for(;X!=G.length;++X)G[X]=j.get(X)?V[H++]:0;return G})(I,x),x;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===ud.FAST_PFOR?PM():Ua(u,a,s.numValues),s,f,g)}function V0(u,a,s,f){const g=u.logicalLevelTechnique1;if(g===rn.RLE)return u.runs===1?Ea.CONST:Ea.FLAT;const x=a instanceof uc?a.size():a;if(g===rn.DELTA&&u.logicalLevelTechnique2===rn.RLE){const b=u.runs,C=2;if(u.numRleValues!==x)return Ea.FLAT;if(b===1)return Ea.SEQUENCE;if(b===2){const I=f.get();let j;if(u.physicalLevelTechnique===ud.VARINT)j=Ua(s,f,4);else{const V=f.get();j=new Int32Array(s.buffer,s.byteOffset+V,4)}if(f.set(I),j[2]===C&&j[3]===C)return Ea.SEQUENCE}}return u.numValues===1?Ea.CONST:Ea.FLAT}class LM extends N0{getValueFromBuffer(a){return this.dataBuffer[a]}}class DM extends wM{constructor(a,s,f,g){super(a,BigInt64Array.of(s),f,g)}getValueFromBuffer(a){return this.dataBuffer[0]+BigInt(a)*this.delta}}class Vg{constructor(a,s,f){$r(this,"_geometryOffsets");$r(this,"_partOffsets");$r(this,"_ringOffsets");this._geometryOffsets=a,this._partOffsets=s,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function V1(u,a,s){return{x:RM(u,a)-s,y:RM(u>>1,a)-s}}function RM(u,a){let s=0;for(let f=0;f<a;f++)s|=(u&1<<2*f)>>f;return s}(function(u){u[u.POINT=0]="POINT",u[u.LINESTRING=1]="LINESTRING",u[u.POLYGON=2]="POLYGON",u[u.MULTIPOINT=3]="MULTIPOINT",u[u.MULTILINESTRING=4]="MULTILINESTRING",u[u.MULTIPOLYGON=5]="MULTIPOLYGON"})(Ca||(Ca={})),(function(u){u[u.POINT=0]="POINT",u[u.LINESTRING=1]="LINESTRING",u[u.POLYGON=2]="POLYGON"})(SM||(SM={})),(function(u){u[u.MORTON=0]="MORTON",u[u.VEC_2=1]="VEC_2",u[u.VEC_3=2]="VEC_3"})(wl||(wl={}));class oV{createPoint(a){return[[a]]}createMultiPoint(a){return a.map((s=>[s]))}createLineString(a){return[a]}createMultiLineString(a){return a}createPolygon(a,s){return[a].concat(s)}createMultiPolygon(a){return a.flat()}}function jM(u){const a=new Array(u.numGeometries);let s=1,f=1,g=1,x=0;const b=new oV;let C=0,I=0;const j=u.mortonSettings,V=u.topologyVector,G=V.geometryOffsets,H=V.partOffsets,X=V.ringOffsets,ee=u.vertexOffsets,ie=u.containsPolygonGeometry(),se=u.vertexBuffer;for(let fe=0;fe<u.numGeometries;fe++){const Pe=u.geometryType(fe);if(Pe===Ca.POINT){if(ee&&ee.length!==0)if(u.vertexBufferType===wl.VEC_2){const me=2*ee[I++],ge=new _(se[me],se[me+1]);a[x++]=b.createPoint(ge)}else{const me=V1(se[ee[I++]],j.numBits,j.coordinateShift),ge=new _(me.x,me.y);a[x++]=b.createPoint(ge)}else{const me=new _(se[C++],se[C++]);a[x++]=b.createPoint(me)}G&&g++,H&&s++,X&&f++}else if(Pe===Ca.MULTIPOINT){const me=G[g]-G[g-1];g++;const ge=new Array(me);if(ee&&ee.length!==0){for(let Ce=0;Ce<me;Ce++){const Re=2*ee[I++];ge[Ce]=new _(se[Re],se[Re+1])}a[x++]=b.createMultiPoint(ge)}else{for(let Ce=0;Ce<me;Ce++){const Re=se[C++],nt=se[C++];ge[Ce]=new _(Re,nt)}a[x++]=b.createMultiPoint(ge)}}else if(Pe===Ca.LINESTRING){let me,ge=0;ie?(ge=X[f]-X[f-1],f++):ge=H[s]-H[s-1],s++,ee&&ee.length!==0?(me=u.vertexBufferType===wl.VEC_2?U1(se,ee,I,ge,!1):q1(se,ee,I,ge,!1,j),I+=ge):(me=$1(se,C,ge,!1),C+=2*ge),a[x++]=b.createLineString(me),G&&g++}else if(Pe===Ca.POLYGON){const me=H[s]-H[s-1];s++;const ge=new Array(me-1);let Ce=X[f]-X[f-1];if(f++,ee&&ee.length!==0){const Re=u.vertexBufferType===wl.VEC_2?U0(se,ee,I,Ce):q0(se,ee,I,Ce,0,j);I+=Ce;for(let nt=0;nt<ge.length;nt++)Ce=X[f]-X[f-1],f++,ge[nt]=u.vertexBufferType===wl.VEC_2?U0(se,ee,I,Ce):q0(se,ee,I,Ce,0,j),I+=Ce;a[x++]=b.createPolygon(Re,ge)}else{const Re=$0(se,C,Ce);C+=2*Ce;for(let nt=0;nt<ge.length;nt++)Ce=X[f]-X[f-1],f++,ge[nt]=$0(se,C,Ce),C+=2*Ce;a[x++]=b.createPolygon(Re,ge)}G&&g++}else if(Pe===Ca.MULTILINESTRING){const me=G[g]-G[g-1];g++;const ge=new Array(me);if(ee&&ee.length!==0){for(let Ce=0;Ce<me;Ce++){let Re=0;ie?(Re=X[f]-X[f-1],f++):Re=H[s]-H[s-1],s++;const nt=u.vertexBufferType===wl.VEC_2?U1(se,ee,I,Re,!1):q1(se,ee,I,Re,!1,j);ge[Ce]=nt,I+=Re}a[x++]=b.createMultiLineString(ge)}else{for(let Ce=0;Ce<me;Ce++){let Re=0;ie?(Re=X[f]-X[f-1],f++):Re=H[s]-H[s-1],s++,ge[Ce]=$1(se,C,Re,!1),C+=2*Re}a[x++]=b.createMultiLineString(ge)}}else{if(Pe!==Ca.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const me=G[g]-G[g-1];g++;const ge=new Array(me);let Ce=0;if(ee&&ee.length!==0){for(let Re=0;Re<me;Re++){const nt=H[s]-H[s-1];s++;const kt=new Array(nt-1);Ce=X[f]-X[f-1],f++;const _t=u.vertexBufferType===wl.VEC_2?U0(se,ee,I,Ce):q0(se,ee,I,Ce,0,j);I+=Ce;for(let Ot=0;Ot<kt.length;Ot++)Ce=X[f]-X[f-1],f++,kt[Ot]=u.vertexBufferType===wl.VEC_2?U0(se,ee,I,Ce):q0(se,ee,I,Ce,0,j),I+=Ce;ge[Re]=b.createPolygon(_t,kt)}a[x++]=b.createMultiPolygon(ge)}else{for(let Re=0;Re<me;Re++){const nt=H[s]-H[s-1];s++;const kt=new Array(nt-1);Ce=X[f]-X[f-1],f++;const _t=$0(se,C,Ce);C+=2*Ce;for(let Ot=0;Ot<kt.length;Ot++){const Kt=X[f]-X[f-1];f++,kt[Ot]=$0(se,C,Kt),C+=2*Kt}ge[Re]=b.createPolygon(_t,kt)}a[x++]=b.createMultiPolygon(ge)}}}}return a}function $0(u,a,s){return $1(u,a,s,!0)}function U0(u,a,s,f){return U1(u,a,s,f,!0)}function q0(u,a,s,f,g,x){return q1(u,a,s,f,!0,x)}function $1(u,a,s,f){const g=new Array(f?s+1:s);for(let x=0;x<2*s;x+=2)g[x/2]=new _(u[a+x],u[a+x+1]);return f&&(g[g.length-1]=g[0]),g}function U1(u,a,s,f,g){const x=new Array(g?f+1:f);for(let b=0;b<2*f;b+=2){const C=2*a[s+b/2];x[b/2]=new _(u[C],u[C+1])}return g&&(x[x.length-1]=x[0]),x}function q1(u,a,s,f,g,x){const b=new Array(g?f+1:f);for(let C=0;C<f;C++){const I=V1(u[a[s+C]],x.numBits,x.coordinateShift);b[C]=new _(I.x,I.y)}return g&&(b[b.length-1]=b[0]),b}class zM{constructor(a,s,f,g,x){$r(this,"_vertexBufferType");$r(this,"_topologyVector");$r(this,"_vertexOffsets");$r(this,"_vertexBuffer");$r(this,"_mortonSettings");this._vertexBufferType=a,this._topologyVector=s,this._vertexOffsets=f,this._vertexBuffer=g,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const a=jM(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:a[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(a){const s=this.vertexOffsets?2*this.vertexOffsets[a]:2*a;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(a){if(this.vertexOffsets&&this.mortonSettings){const f=V1(this.vertexBuffer[this.vertexOffsets[a]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const s=this.vertexOffsets?2*this.vertexOffsets[a]:2*a;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return jM(this)}get mortonSettings(){return this._mortonSettings}}class NM extends zM{constructor(s,f,g,x,b,C,I){super(g,x,b,C,I);$r(this,"_numGeometries");$r(this,"_geometryType");this._numGeometries=s,this._geometryType=f}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Ca.POLYGON||this._geometryType===Ca.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class FM extends zM{constructor(s,f,g,x,b,C){super(s,g,x,b,C);$r(this,"_geometryTypes");this._geometryTypes=f}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let s=0;s<this.numGeometries;s++)if(this.geometryType(s)===Ca.POLYGON||this.geometryType(s)===Ca.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class BM{constructor(a,s,f,g){$r(this,"_triangleOffsets");$r(this,"_indexBuffer");$r(this,"_vertexBuffer");$r(this,"_topologyVector");this._triangleOffsets=a,this._indexBuffer=s,this._vertexBuffer=f,this._topologyVector=g}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const a=new Array(this.numGeometries),s=this._topologyVector,f=s.partOffsets,g=s.ringOffsets,x=s.geometryOffsets;let b=0,C=1,I=1,j=1;for(let V=0;V<this.numGeometries;V++)switch(this.geometryType(V)){case Ca.POLYGON:{const G=f[C]-f[C-1];C++;const H=[];for(let X=0;X<G;X++){const ee=g[I]-g[I-1];I++;const ie=[];for(let se=0;se<ee;se++){const fe=this._vertexBuffer[b++],Pe=this._vertexBuffer[b++];ie.push(new _(fe,Pe))}ie.length>0&&ie.push(ie[0]),H.push(ie)}a[V]=H,x&&j++}break;case Ca.MULTIPOLYGON:{const G=x[j]-x[j-1];j++;const H=[];for(let X=0;X<G;X++){const ee=f[C]-f[C-1];C++;for(let ie=0;ie<ee;ie++){const se=g[I]-g[I-1];I++;const fe=[];for(let Pe=0;Pe<se;Pe++){const me=this._vertexBuffer[b++],ge=this._vertexBuffer[b++];fe.push(new _(me,ge))}fe.length>0&&fe.push(fe[0]),H.push(fe)}}a[V]=H}}return a}[Symbol.iterator](){return null}}function VM(u,a,s,f,g,x){return new sV(u,a,s,f,g,x)}class sV extends BM{constructor(s,f,g,x,b,C){super(g,x,b,C);$r(this,"_numGeometries");$r(this,"_geometryType");this._numGeometries=s,this._geometryType=f}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function $M(u,a,s,f,g){return new lV(u,a,s,f,g)}class lV extends BM{constructor(s,f,g,x,b){super(f,g,x,b);$r(this,"_geometryTypes");this._geometryTypes=s}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function uV(u,a,s,f,g){const x=Wo(u,s);let b=null,C=null,I=null,j=null,V=null,G=null,H=null,X=null;if(V0(x,f,u,s)===Ea.CONST){const ie=F1(u,s,x,!1);for(let se=0;se<a-1;se++){const fe=Wo(u,s);switch(fe.physicalStreamType){case co.LENGTH:switch(fe.logicalStreamType.lengthType){case Gs.GEOMETRIES:b=qf(u,s,fe);break;case Gs.PARTS:C=qf(u,s,fe);break;case Gs.RINGS:I=qf(u,s,fe);break;case Gs.TRIANGLES:H=qf(u,s,fe)}break;case co.OFFSET:switch(fe.logicalStreamType.offsetType){case gm.VERTEX:j=Ho(u,s,fe,!1);break;case gm.INDEX:X=Ho(u,s,fe,!1)}break;case co.DATA:lc.VERTEX===fe.logicalStreamType.dictionaryType?V=Ho(u,s,fe,!0):(G={numBits:fe.numBits,coordinateShift:fe.coordinateShift},V=Ho(u,s,fe,!1))}}return X!==null?b!=null||C!=null?VM(f,ie,H,X,V,new Vg(b,C,I)):VM(f,ie,H,X,V):G===null?(function(se,fe,Pe,me,ge){return new NM(se,fe,wl.VEC_2,Pe,me,ge)})(f,ie,new Vg(b,C,I),j,V):(function(se,fe,Pe,me,ge,Ce){return new NM(se,fe,wl.MORTON,Pe,me,ge,Ce)})(f,ie,new Vg(b,C,I),j,V,G)}const ee=Ho(u,s,x,!1);for(let ie=0;ie<a-1;ie++){const se=Wo(u,s);switch(se.physicalStreamType){case co.LENGTH:switch(se.logicalStreamType.lengthType){case Gs.GEOMETRIES:b=Ho(u,s,se,!1);break;case Gs.PARTS:C=Ho(u,s,se,!1);break;case Gs.RINGS:I=Ho(u,s,se,!1);break;case Gs.TRIANGLES:H=qf(u,s,se)}break;case co.OFFSET:switch(se.logicalStreamType.offsetType){case gm.VERTEX:j=Ho(u,s,se,!1);break;case gm.INDEX:X=Ho(u,s,se,!1)}break;case co.DATA:lc.VERTEX===se.logicalStreamType.dictionaryType?V=Ho(u,s,se,!0):(G={numBits:se.numBits,coordinateShift:se.coordinateShift},V=Ho(u,s,se,!1))}}return X!==null&&C===null?$M(ee,H,X,V):(b!==null?(b=G1(ee,b,2),C!==null&&I!==null?(C=UM(ee,b,C,!1),I=(function(ie,se,fe,Pe){const me=new Int32Array(fe[fe.length-1]+1);let ge=0;me[0]=ge;let Ce=1,Re=1,nt=0;for(let kt=0;kt<ie.length;kt++){const _t=ie[kt],Ot=se[kt+1]-se[kt];if(_t!==0&&_t!==3)for(let Kt=0;Kt<Ot;Kt++){const Rt=fe[Ce]-fe[Ce-1];Ce++;for(let Ct=0;Ct<Rt;Ct++)ge=me[Re++]=ge+Pe[nt++]}else for(let Kt=0;Kt<Ot;Kt++)me[Re++]=++ge,Ce++}return me})(ee,b,C,I)):C!==null&&(C=(function(ie,se,fe){const Pe=new Int32Array(se[se.length-1]+1);let me=0;Pe[0]=me;let ge=1,Ce=0;for(let Re=0;Re<ie.length;Re++){const nt=ie[Re],kt=se[Re+1]-se[Re];if(nt===4||nt===1)for(let _t=0;_t<kt;_t++)me=Pe[ge++]=me+fe[Ce++];else for(let _t=0;_t<kt;_t++)Pe[ge++]=++me}return Pe})(ee,b,C))):C!==null&&I!==null?(C=G1(ee,C,1),I=UM(ee,C,I,!0)):C!==null&&(C=G1(ee,C,0)),X!==null?$M(ee,H,X,V,new Vg(b,C,I)):G===null?(function(ie,se,fe,Pe){return new FM(wl.VEC_2,ie,se,fe,Pe)})(ee,new Vg(b,C,I),j,V):(function(ie,se,fe,Pe,me){return new FM(wl.MORTON,ie,se,fe,Pe,me)})(ee,new Vg(b,C,I),j,V,G))}function G1(u,a,s){const f=new Int32Array(u.length+1);let g=0;f[0]=g;let x=0;for(let b=0;b<u.length;b++)g=f[b+1]=g+(u[b]>s?a[x++]:1);return f}function UM(u,a,s,f){const g=new Int32Array(a[a.length-1]+1);let x=0;g[0]=x;let b=1,C=0;for(let I=0;I<u.length;I++){const j=u[I],V=a[I+1]-a[I];if(j===5||j===2||f&&(j===4||j===1))for(let G=0;G<V;G++)x=g[b++]=x+s[C++];else for(let G=0;G<V;G++)g[b++]=++x}return g}class cV extends Fg{constructor(s,f,g){super(s,f.getBuffer(),g);$r(this,"dataVector");this.dataVector=f}getValueFromBuffer(s){return this.dataVector.get(s)}}class hV extends N0{getValueFromBuffer(a){return this.dataBuffer[a]}}class qM extends Fg{constructor(a,s,f){super(a,BigInt64Array.of(s),f)}getValueFromBuffer(a){return this.dataBuffer[0]}}function Ev(u,a,s){return GM(u,Math.ceil(a/8),s)}function GM(u,a,s){const f=new Uint8Array(a);let g=0;for(;g<a;){const x=u[s.increment()];if(x<=127){const b=x+3,C=u[s.increment()],I=g+b;f.fill(C,g,I),g=I}else{const b=256-x;for(let C=0;C<b;C++)f[g++]=u[s.increment()]}}return f}const dV=new TextDecoder;function W1(u,a,s){return s-a>=12?dV.decode(u.subarray(a,s)):(function(f,g,x){let b="",C=g;for(;C<x;){const I=f[C];let j,V,G,H=null,X=I>239?4:I>223?3:I>191?2:1;if(C+X>x)break;X===1?I<128&&(H=I):X===2?(j=f[C+1],(192&j)==128&&(H=(31&I)<<6|63&j,H<=127&&(H=null))):X===3?(j=f[C+1],V=f[C+2],(192&j)==128&&(192&V)==128&&(H=(15&I)<<12|(63&j)<<6|63&V,(H<=2047||H>=55296&&H<=57343)&&(H=null))):X===4&&(j=f[C+1],V=f[C+2],G=f[C+3],(192&j)==128&&(192&V)==128&&(192&G)==128&&(H=(15&I)<<18|(63&j)<<12|(63&V)<<6|63&G,(H<=65535||H>=1114112)&&(H=null))),H===null?(H=65533,X=1):H>65535&&(H-=65536,b+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),b+=String.fromCharCode(H),C+=X}return b})(u,a,s)}class H1 extends Fg{constructor(s,f,g,x){super(s,g,x);$r(this,"offsetBuffer");this.offsetBuffer=f}}class WM extends H1{constructor(s,f,g,x){super(s,f,g,x??f.length-1);$r(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(s){return W1(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class $g extends H1{constructor(s,f,g,x,b){super(s,g,x,b??f.length);$r(this,"indexBuffer");$r(this,"textEncoder");this.indexBuffer=f,this.indexBuffer=f,this.textEncoder=new TextEncoder}getValueFromBuffer(s){const f=this.indexBuffer[s];return W1(this.dataBuffer,this.offsetBuffer[f],this.offsetBuffer[f+1])}}class HM extends H1{constructor(s,f,g,x,b,C,I){super(s,g,x,I);$r(this,"indexBuffer");$r(this,"symbolOffsetBuffer");$r(this,"symbolTableBuffer");$r(this,"textEncoder");$r(this,"symbolLengthBuffer");$r(this,"lengthBuffer");$r(this,"decodedDictionary");this.indexBuffer=f,this.symbolOffsetBuffer=b,this.symbolTableBuffer=C,this.textEncoder=new TextEncoder}getValueFromBuffer(s){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(g,x,b){const C=[],I=new Array(x.length).fill(0);for(let j=1;j<x.length;j++)I[j]=I[j-1]+x[j-1];for(let j=0;j<b.length;j++)if(b[j]===255)C.push(b[++j]);else{const V=x[b[j]],G=I[b[j]];for(let H=0;H<V;H++)C.push(g[G+H])}return new Uint8Array(C)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const f=this.indexBuffer[s];return W1(this.decodedDictionary,this.offsetBuffer[f],this.offsetBuffer[f+1])}offsetToLengthBuffer(s){const f=new Uint32Array(s.length-1);let g=s[0];for(let x=1;x<s.length;x++){const b=s[x];f[x-1]=b-g,g=b}return f}}function fV(u,a,s,f,g,x){return s.type==="scalarType"?(function(b,C,I,j,V,G){let H=null,X=0;if(b===0)return null;if(G.nullable){const ie=Wo(C,I);X=ie.numValues;const se=I.get(),fe=Ev(C,X,I);I.set(se+ie.byteLength),H=new uc(fe,ie.numValues)}const ee=H??j;switch(V.physicalType){case 4:case 3:return(function(ie,se,fe,Pe,me){const ge=Wo(ie,se),Ce=V0(ge,me,ie,se),Re=Pe.physicalType===3;if(Ce===Ea.FLAT){const nt=Cv(me)?B1(ie,se,ge,Re,me):Ho(ie,se,ge,Re);return new L1(fe.name,nt,me)}if(Ce===Ea.SEQUENCE){const nt=kM(ie,se,ge);return new R1(fe.name,nt[0],nt[1],ge.numRleValues)}{const nt=F1(ie,se,ge,Re);return new j1(fe.name,nt,me)}})(C,I,G,V,ee);case 9:return(function(ie,se,fe,Pe,me){let ge=null,Ce=null,Re=null,nt=null,kt=null,_t=null,Ot=null,Kt=null;for(let Rt=0;Rt<Pe;Rt++){const Ct=Wo(se,fe);if(Ct.byteLength!==0)switch(Ct.physicalStreamType){case co.PRESENT:{const dt=Ev(se,Ct.numValues,fe);_t=new uc(dt,Ct.numValues);break}case co.OFFSET:Ce=me!=null||_t!=null?B1(se,fe,Ct,!1,me??_t):Ho(se,fe,Ct,!1);break;case co.LENGTH:{const dt=qf(se,fe,Ct);Gs.DICTIONARY===Ct.logicalStreamType.lengthType?ge=dt:Gs.SYMBOL===Ct.logicalStreamType.lengthType?nt=dt:Ot=dt;break}case co.DATA:{const dt=se.subarray(fe.get(),fe.get()+Ct.byteLength);fe.add(Ct.byteLength);const sr=Ct.logicalStreamType.dictionaryType;lc.FSST===sr?kt=dt:lc.SINGLE===sr||lc.SHARED===sr?Re=dt:lc.NONE===sr&&(Kt=dt);break}}}return(function(Rt,Ct,dt,sr,nr,lr,er){return Ct?new HM(Rt,dt,sr,nr,lr,Ct,er):null})(ie,kt,Ce,ge,Re,nt,me??_t)??(function(Rt,Ct,dt,sr,nr){return Ct?nr?new $g(Rt,dt,sr,Ct,nr):new $g(Rt,dt,sr,Ct):null})(ie,Re,Ce,ge,me??_t)??(function(Rt,Ct,dt,sr,nr){if(!Ct||!dt)return null;if(sr)return nr?new $g(Rt,sr,Ct,dt,nr):new $g(Rt,sr,Ct,dt);if(nr&&nr.size()!==Ct.length-1){const lr=new Int32Array(nr.size());let er=0;for(let vr=0;vr<nr.size();vr++)lr[vr]=nr.get(vr)?er++:0;return new $g(Rt,lr,Ct,dt,nr)}return nr?new WM(Rt,Ct,dt,nr):new WM(Rt,Ct,dt)})(ie,Ot,Kt,Ce,me??_t)})(G.name,C,I,G.nullable?b-1:b,H);case 0:return(function(ie,se,fe,Pe,me){const ge=Wo(ie,se),Ce=ge.numValues,Re=se.get(),nt=Cv(me)?(function(_t,Ot,Kt,Rt){const Ct=GM(_t,Math.ceil(Ot/8),Kt),dt=new uc(Ct,Ot),sr=Rt.size(),nr=new uc(new Uint8Array(sr),sr);let lr=0;for(let er=0;er<Rt.size();er++){const vr=!!Rt.get(er)&&dt.get(lr++);nr.set(er,vr)}return nr.getBuffer()})(ie,Ce,se,me):Ev(ie,Ce,se);se.set(Re+ge.byteLength);const kt=new uc(nt,Ce);return new cV(fe.name,kt,me)})(C,I,G,0,ee);case 6:case 5:return(function(ie,se,fe,Pe,me){const ge=Wo(ie,se),Ce=V0(ge,Pe,ie,se),Re=me.physicalType===5;if(Ce===Ea.FLAT){const nt=Cv(Pe)?(function(kt,_t,Ot,Kt,Rt){return(function(Ct,dt,sr,nr){switch(dt.logicalLevelTechnique1){case rn.DELTA:return dt.logicalLevelTechnique2===rn.RLE&&(Ct=CM(Ct,dt.runs,dt.numRleValues)),(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0;lr.get(0)?(vr[0]=lr.get(0)?er[0]>>1n^-(1n&er[0]):0n,fn=1):vr[0]=0n;let en=1;for(;en!=vr.length;++en)vr[en]=lr.get(en)?vr[en-1]+(er[fn]>>1n^-(1n&er[fn++])):vr[en-1];return vr})(nr,Ct);case rn.RLE:return(function(lr,er,vr,fn){const en=er;return vr?(function(yi,fo,oa){const vi=new BigInt64Array(yi.size());let di=0;for(let An=0;An<oa;An++){const Ci=Number(fo[An]);let Ni=fo[An+oa];Ni=Ni>>1n^-(1n&Ni);for(let li=di;li<di+Ci;li++)yi.get(li)?vi[li]=Ni:(vi[li]=0n,di++);di+=Ci}return vi})(fn,lr,en.runs):(function(yi,fo,oa){const vi=new BigInt64Array(yi.size());let di=0;for(let An=0;An<oa;An++){const Ci=Number(fo[An]),Ni=fo[An+oa];for(let li=di;li<di+Ci;li++)yi.get(li)?vi[li]=Ni:(vi[li]=0n,di++);di+=Ci}return vi})(fn,lr,en.runs)})(Ct,dt,sr,nr);case rn.NONE:return Ct=sr?(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0,en=0;for(;en!=vr.length;++en)if(lr.get(en)){const yi=er[fn++];vr[en]=yi>>1n^-(1n&yi)}else vr[en]=0n;return vr})(nr,Ct):(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0,en=0;for(;en!=vr.length;++en)vr[en]=lr.get(en)?er[fn++]:0n;return vr})(nr,Ct),Ct;default:throw new Error("The specified Logical level technique is not supported")}})(F0(kt,_t,Ot.numValues),Ot,Kt,Rt)})(ie,se,ge,Re,Pe):IM(ie,se,ge,Re);return new LM(fe.name,nt,Pe)}if(Ce===Ea.SEQUENCE){const nt=AM(ie,se,ge);return new DM(fe.name,nt[0],nt[1],ge.numRleValues)}{const nt=OM(ie,se,ge,Re);return new qM(fe.name,nt,Pe)}})(C,I,G,ee,V);case 7:return(function(ie,se,fe,Pe){const me=Wo(ie,se),ge=Cv(Pe)?(function(Ce,Re,nt,kt){const _t=Re.get(),Ot=_t+kt*Float32Array.BYTES_PER_ELEMENT,Kt=new Uint8Array(Ce.subarray(_t,Ot)).buffer,Rt=new Float32Array(Kt);Re.set(Ot);const Ct=nt.size(),dt=new Float32Array(Ct);let sr=0;for(let nr=0;nr<Ct;nr++)dt[nr]=nt.get(nr)?Rt[sr++]:0;return dt})(ie,se,Pe,me.numValues):(function(Ce,Re,nt){const kt=Re.get(),_t=kt+nt*Float32Array.BYTES_PER_ELEMENT,Ot=new Uint8Array(Ce.subarray(kt,_t)).buffer,Kt=new Float32Array(Ot);return Re.set(_t),Kt})(ie,se,me.numValues);return new hV(fe.name,ge,Pe)})(C,I,G,ee);case 8:return(function(ie,se,fe,Pe){const me=Wo(ie,se),ge=Cv(Pe)?(function(Ce,Re,nt,kt){const _t=Re.get(),Ot=_t+kt*Float64Array.BYTES_PER_ELEMENT,Kt=new Uint8Array(Ce.subarray(_t,Ot)).buffer,Rt=new Float64Array(Kt);Re.set(Ot);const Ct=nt.size(),dt=new Float64Array(Ct);let sr=0;for(let nr=0;nr<Ct;nr++)dt[nr]=nt.get(nr)?Rt[sr++]:0;return dt})(ie,se,Pe,me.numValues):(function(Ce,Re,nt){const kt=Re.get(),_t=kt+nt*Float64Array.BYTES_PER_ELEMENT,Ot=new Uint8Array(Ce.subarray(kt,_t)).buffer,Kt=new Float64Array(Ot);return Re.set(_t),Kt})(ie,se,me.numValues);return new D1(fe.name,ge,Pe)})(C,I,G,ee);default:throw new Error(`The specified data type for the field is currently not supported: ${V}`)}})(f,u,a,g,s.scalarType,s):f!=1?null:(function(b,C,I,j){let V=null,G=null,H=null,X=null,ee=!1;for(;!ee;){const Pe=Wo(b,C);switch(Pe.physicalStreamType){case co.LENGTH:Gs.DICTIONARY===Pe.logicalStreamType.lengthType?V=qf(b,C,Pe):H=qf(b,C,Pe);break;case co.DATA:lc.SINGLE===Pe.logicalStreamType.dictionaryType||lc.SHARED===Pe.logicalStreamType.dictionaryType?(G=b.subarray(C.get(),C.get()+Pe.byteLength),ee=!0):X=b.subarray(C.get(),C.get()+Pe.byteLength),C.add(Pe.byteLength)}}const ie=I.complexType.children,se=[];let fe=0;for(const Pe of ie){const me=Ua(b,C,1)[0];if(me==0)continue;const ge=`${I.name}${Pe.name==="default"?"":":"+Pe.name}`;if(me!==2||Pe.type!=="scalarField"||Pe.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Ce=Wo(b,C),Re=Ev(b,Ce.numValues,C),nt=Wo(b,C),kt=nt.decompressedCount!==j?B1(b,C,nt,!1,new uc(Re,Ce.numValues)):Ho(b,C,nt,!1);se[fe++]=X?new HM(ge,kt,V,G,H,X,new uc(Re,Ce.numValues)):new $g(ge,kt,V,G,new uc(Re,Ce.numValues))}return se})(u,a,s,g)}function Cv(u){return u instanceof uc}function pV(u){if(u.name==="id")return!1;if(u.type==="scalarType"){const a=u.scalarType;if(a.type==="physicalType")switch(a.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(a.type==="logicalType")return!1}else if(u.type==="complexType"){const a=u.complexType;if(a.type==="physicalType")switch(a.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",u),!1}const mV=new TextDecoder;function ZM(u,a){const s=Ua(u,a,1)[0];if(s===0)return"";const f=a.get(),g=u.subarray(f,f+s);return a.add(s),mV.decode(g)}function KM(u,a){const s=Ua(u,a,1)[0]>>>0,f=!!(4&s),g=!!(2&s),x=Ua(u,a,1)[0]>>>0,b={};if(1&s&&(b.nullable=!0),g){const C={};if(f?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),8&s){const I=Ua(u,a,1)[0]>>>0;C.children=new Array(I);for(let j=0;j<I;j++)C.children[j]=KM(u,a)}b.type="complexField",b.complexField=C}else{const C={};f?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),b.type="scalarField",b.scalarField=C}return b}function gV(u,a){const s=Ua(u,a,1)[0]>>>0,f=(function(g){switch(g){case 0:case 1:case 2:case 3:{const x={};x.nullable=!!(1&g),x.columnScope=0;const b={};return b.physicalType=g>1?6:4,b.type="physicalType",x.scalarType=b,x.type="scalarType",x}case 4:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:0};return x.type="complexType",x.complexType=b,x}case 30:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:1};return x.type="complexType",x.complexType=b,x}default:return(function(x){let b=null;switch(x){case 10:case 11:b=0;break;case 12:case 13:b=1;break;case 14:case 15:b=2;break;case 16:case 17:b=3;break;case 18:case 19:b=4;break;case 20:case 21:b=5;break;case 22:case 23:b=6;break;case 24:case 25:b=7;break;case 26:case 27:b=8;break;case 28:case 29:b=9;break;default:return null}const C={};C.nullable=!!(1&x),C.columnScope=0;const I={type:"physicalType"};return I.physicalType=b,C.type="scalarType",C.scalarType=I,C})(g)}})(s);if(!f)throw new Error(`Unsupported column type code: ${s}`);if((function(g){return g>=10})(s)?f.name=ZM(u,a):s>=0&&s<=3?f.name="id":s===4&&(f.name="geometry"),(function(g){return g===30})(s)){const g=Ua(u,a,1)[0]>>>0,x=f.complexType;x.children=new Array(g);for(let b=0;b<g;b++)x.children[b]=KM(u,a)}return f}function yV(u,a){const s={featureTables:[]},f={};f.name=ZM(u,a);const g=Ua(u,a,1)[0]>>>0,x=Ua(u,a,1)[0]>>>0;f.columns=new Array(x);for(let b=0;b<x;b++)f.columns[b]=gV(u,a);return s.featureTables.push(f),[s,g]}function vV(u,a,s,f,g,x,b=!1){const C=a.scalarType.physicalType,I=V0(g,x,u,s);if(C===4)switch(I){case Ea.FLAT:{const j=Ho(u,s,g,!1);return new L1(f,j,x)}case Ea.SEQUENCE:{const j=kM(u,s,g);return new R1(f,j[0],j[1],g.numRleValues)}case Ea.CONST:{const j=F1(u,s,g,!1);return new j1(f,j,x)}}else switch(I){case Ea.FLAT:{if(b){const V=(function(G,H,X,ee){const ie=(function(se,fe,Pe){const me=new Float64Array(fe);for(let ge=0;ge<fe;ge++)me[ge]=iV(se,Pe);return me})(G,X.numValues,H);return(function(se,fe,Pe){switch(fe.logicalLevelTechnique1){case rn.DELTA:return fe.logicalLevelTechnique2===rn.RLE&&(se=TM(se,fe.runs,fe.numRleValues)),(function(me){me[0]=me[0]%2==1?(me[0]+1)/-2:me[0]/2;const ge=me.length/4*4;let Ce=1;if(ge>=4)for(;Ce<ge-4;Ce+=4){const Re=me[Ce],nt=me[Ce+1],kt=me[Ce+2],_t=me[Ce+3];me[Ce]=(Re%2==1?(Re+1)/-2:Re/2)+me[Ce-1],me[Ce+1]=(nt%2==1?(nt+1)/-2:nt/2)+me[Ce],me[Ce+2]=(kt%2==1?(kt+1)/-2:kt/2)+me[Ce+1],me[Ce+3]=(_t%2==1?(_t+1)/-2:_t/2)+me[Ce+2]}for(;Ce!=me.length;++Ce)me[Ce]=(me[Ce]%2==1?(me[Ce]+1)/-2:me[Ce]/2)+me[Ce-1]})(se),se;case rn.RLE:return(function(me,ge,Ce){return TM(me,ge.runs,ge.numRleValues)})(se,fe);case rn.NONE:return se;default:throw new Error(`The specified Logical level technique is not supported: ${fe.logicalLevelTechnique1}`)}})(ie,X)})(u,s,g);return new D1(f,V,x)}const j=IM(u,s,g,!1);return new LM(f,j,x)}case Ea.SEQUENCE:{const j=AM(u,s,g);return new DM(f,j[0],j[1],g.numRleValues)}case Ea.CONST:{const j=OM(u,s,g,!1);return new qM(f,j,x)}}throw new Error("Vector type not supported for id column.")}class _V{constructor(a,s){var f;switch(this._featureData=a,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case Ca.POINT:case Ca.MULTIPOINT:this.type=1;break;case Ca.LINESTRING:case Ca.MULTILINESTRING:this.type=2;break;case Ca.POLYGON:case Ca.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const a=[];for(const s of this._featureData.geometry.coordinates){const f=[];for(const g of s)f.push(new _(g.x,g.y));a.push(f)}return a}}class xV{constructor(a){this.features=[],this.featureTable=a,this.name=a.name,this.extent=a.extent,this.version=2,this.features=a.getFeatures(),this.length=this.features.length}feature(a){return new _V(this.features[a],this.extent)}}class XM{constructor(a){this.layers={};const s=(function(f,g,x=!0){const b=new nV(0),C=[];for(;b.get()<f.length;){const I=Ua(f,b,1)[0]>>>0,j=b.get()+I;if(j>f.length)throw new Error(`Block overruns tile: ${j} > ${f.length}`);if(Ua(f,b,1)[0]>>>0!=1){b.set(j);continue}const V=yV(f,b),G=V[1],H=V[0].featureTables[0];let X=null,ee=null;const ie=[];let se=0;for(const Pe of H.columns){const me=Pe.name;if(me==="id"){let ge=null;if(Pe.nullable){const Re=Wo(f,b),nt=b.get(),kt=Ev(f,Re.numValues,b);b.set(nt+Re.byteLength),ge=new uc(kt,Re.numValues)}const Ce=Wo(f,b);se=Ce.decompressedCount,X=vV(f,Pe,b,me,Ce,ge??se,x)}else if(me==="geometry"){const ge=Ua(f,b,1)[0];if(se===0){const Ce=b.get();se=Wo(f,b).decompressedCount,b.set(Ce)}ee=uV(f,ge,b,se)}else{const ge=pV(Pe)?Ua(f,b,1)[0]:1;if(ge===0&&Pe.type==="scalarType")continue;const Ce=fV(f,b,Pe,ge,se);if(Ce)if(Array.isArray(Ce))for(const Re of Ce)ie.push(Re);else ie.push(Ce)}}const fe=new rV(H.name,ee,X,ie,G);C.push(fe),b.set(j)}return C})(new Uint8Array(a));this.layers=s.reduce(((f,g)=>Object.assign(Object.assign({},f),{[g.name]:new xV(g)})),{})}}class bV{constructor(a,s){this.feature=a,this.type=a.type,this.properties=a.tags?a.tags:{},this.extent=s,"id"in a&&(typeof a.id=="string"?this.id=parseInt(a.id,10):typeof a.id!="number"||isNaN(a.id)||(this.id=a.id))}loadGeometry(){const a=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of s){const g=[];for(const x of f)g.push(new _(x[0],x[1]));a.push(g)}return a}}const Tv="_geojsonTileLayer";function wV(u,a){a.writeVarintField(15,u.version||1),a.writeStringField(1,u.name||""),a.writeVarintField(5,u.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<u.length;x++)s.feature=u.feature(x),a.writeMessage(2,SV,s);const f=s.keys;for(const x of f)a.writeStringField(3,x);const g=s.values;for(const x of g)a.writeMessage(4,CV,x)}function SV(u,a){if(!u.feature)return;const s=u.feature;s.id!==void 0&&a.writeVarintField(1,s.id),a.writeMessage(2,PV,u),a.writeVarintField(3,s.type),a.writeMessage(4,EV,s)}function PV(u,a){var s;for(const f in(s=u.feature)==null?void 0:s.properties){let g=u.feature.properties[f],x=u.keycache[f];if(g==null)continue;x===void 0&&(u.keys.push(f),x=u.keys.length-1,u.keycache[f]=x),a.writeVarint(x),typeof g!="string"&&typeof g!="boolean"&&typeof g!="number"&&(g=JSON.stringify(g));const b=typeof g+":"+g;let C=u.valuecache[b];C===void 0&&(u.values.push(g),C=u.values.length-1,u.valuecache[b]=C),a.writeVarint(C)}}function Z1(u,a){return(a<<3)+(7&u)}function YM(u){return u<<1^u>>31}function EV(u,a){const s=u.loadGeometry(),f=u.type;let g=0,x=0;for(const b of s){let C=1;f===1&&(C=b.length),a.writeVarint(Z1(1,C));const I=f===3?b.length-1:b.length;for(let j=0;j<I;j++){j===1&&f!==1&&a.writeVarint(Z1(2,I-1));const V=b[j].x-g,G=b[j].y-x;a.writeVarint(YM(V)),a.writeVarint(YM(G)),g+=V,x+=G}u.type===3&&a.writeVarint(Z1(7,1))}}function CV(u,a){const s=typeof u;s==="string"?a.writeStringField(1,u):s==="boolean"?a.writeBooleanField(7,u):s==="number"&&(u%1!=0?a.writeDoubleField(3,u):u<0?a.writeSVarintField(6,u):a.writeVarintField(5,u))}class QM{constructor(a,s){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new no(Qe,16,0),this.grid3D=new no(Qe,16,0),this.featureIndexArray=new ce,this.promoteId=s}insert(a,s,f,g,x,b){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x);const I=b?this.grid3D:this.grid;for(let j=0;j<s.length;j++){const V=s[j],G=[1/0,1/0,-1/0,-1/0];for(let H=0;H<V.length;H++){const X=V[H];G[0]=Math.min(G[0],X.x),G[1]=Math.min(G[1],X.y),G[2]=Math.max(G[2],X.x),G[3]=Math.max(G[3],X.y)}G[0]<Qe&&G[1]<Qe&&G[2]>=0&&G[3]>=0&&I.insert(C,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new b0(new p(this.rawTileData)).layers:new XM(this.rawTileData).layers,this.sourceLayerCoder=new xM(this.vtLayers?Object.keys(this.vtLayers).sort():[Tv])),this.vtLayers}query(a,s,f,g){this.loadVTLayers();const x=a.params,b=Qe/a.tileSize/a.scale,C=$u(x.filter,x.globalState),I=a.queryGeometry,j=a.queryPadding*b,V=mm.fromPoints(I),G=this.grid.query(V.minX-j,V.minY-j,V.maxX+j,V.maxY+j),H=mm.fromPoints(a.cameraQueryGeometry).expandBy(j),X=this.grid3D.query(H.minX,H.minY,H.maxX,H.maxY,((se,fe,Pe,me)=>(function(ge,Ce,Re,nt,kt){for(const Ot of ge)if(Ce<=Ot.x&&Re<=Ot.y&&nt>=Ot.x&&kt>=Ot.y)return!0;const _t=[new _(Ce,Re),new _(Ce,kt),new _(nt,kt),new _(nt,Re)];if(ge.length>2){for(const Ot of _t)if(rc(ge,Ot))return!0}for(let Ot=0;Ot<ge.length-1;Ot++)if(nc(ge[Ot],ge[Ot+1],_t))return!0;return!1})(a.cameraQueryGeometry,se-j,fe-j,Pe+j,me+j)));for(const se of X)G.push(se);G.sort(TV);const ee={};let ie;for(let se=0;se<G.length;se++){const fe=G[se];if(fe===ie)continue;ie=fe;const Pe=this.featureIndexArray.get(fe);let me=null;this.loadMatchingFeature(ee,Pe.bucketIndex,Pe.sourceLayerIndex,Pe.featureIndex,C,x.layers,x.availableImages,s,f,g,((ge,Ce,Re)=>(me||(me=Vs(ge)),Ce.queryIntersectsFeature({queryGeometry:I,feature:ge,featureState:Re,geometry:me,zoom:this.z,transform:a.transform,pixelsToTileUnits:b,pixelPosMatrix:a.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:a.getElevation}))))}return ee}loadMatchingFeature(a,s,f,g,x,b,C,I,j,V,G){const H=this.bucketLayerIDs[s];if(b&&!H.some((se=>b.has(se))))return;const X=this.sourceLayerCoder.decode(f),ee=this.vtLayers[X].feature(g);if(x.needGeometry){const se=ml(ee,!0);if(!x.filter(new Mn(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!x.filter(new Mn(this.tileID.overscaledZ),ee))return;const ie=this.getId(ee,X);for(let se=0;se<H.length;se++){const fe=H[se];if(b&&!b.has(fe))continue;const Pe=I[fe];if(!Pe)continue;let me={};ie&&V&&(me=V.getState(Pe.sourceLayer||Tv,ie));const ge=$t({},j[fe]);ge.paint=JM(ge.paint,Pe.paint,ee,me,C),ge.layout=JM(ge.layout,Pe.layout,ee,me,C);const Ce=!G||G(ee,Pe,me);if(!Ce)continue;const Re=new bM(ee,this.z,this.x,this.y,ie);Re.layer=ge;let nt=a[fe];nt===void 0&&(nt=a[fe]=[]),nt.push({featureIndex:g,feature:Re,intersectionZ:Ce})}}lookupSymbolFeatures(a,s,f,g,x,b,C,I){const j={};this.loadVTLayers();const V=$u(x.filterSpec,x.globalState);for(const G of a)this.loadMatchingFeature(j,f,g,G,V,b,C,I,s);return j}hasLayer(a){for(const s of this.bucketLayerIDs)for(const f of s)if(a===f)return!0;return!1}getId(a,s){var f;let g=a.id;return this.promoteId&&(g=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((f=a.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(g=Number(a.properties.cluster_id))),g}}function JM(u,a,s,f,g){return Lt(u,((x,b)=>{const C=a instanceof Ls?a.get(b):null;return C&&C.evaluate?C.evaluate(s,f,g):C}))}function TV(u,a){return a-u}function ek(u,a,s,f,g){const x=[];for(let b=0;b<u.length;b++){const C=u[b];let I;for(let j=0;j<C.length-1;j++){let V=C[j],G=C[j+1];V.x<a&&G.x<a||(V.x<a?V=new _(a,V.y+(a-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x<a&&(G=new _(a,V.y+(a-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y<s&&G.y<s||(V.y<s?V=new _(V.x+(s-V.y)/(G.y-V.y)*(G.x-V.x),s)._round():G.y<s&&(G=new _(V.x+(s-V.y)/(G.y-V.y)*(G.x-V.x),s)._round()),V.x>=f&&G.x>=f||(V.x>=f?V=new _(f,V.y+(f-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x>=f&&(G=new _(f,V.y+(f-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y>=g&&G.y>=g||(V.y>=g?V=new _(V.x+(g-V.y)/(G.y-V.y)*(G.x-V.x),g)._round():G.y>=g&&(G=new _(V.x+(g-V.y)/(G.y-V.y)*(G.x-V.x),g)._round()),I&&V.equals(I[I.length-1])||(I=[V],x.push(I)),I.push(G)))))}}return x}function tk(u,a,s,f,g){switch(a){case 1:return(function(x,b,C,I){const j=[];for(const V of x)for(const G of V){const H=I===0?G.x:G.y;H>=b&&H<=C&&j.push([G])}return j})(u,s,f,g);case 2:return rk(u,s,f,g,!1);case 3:return rk(u,s,f,g,!0)}return[]}function MV(u,a,s,f,g){const x=f===0?kV:AV;let b=[];const C=[];for(let V=0;V<u.length-1;V++){const G=u[V],H=u[V+1],X=f===0?G.x:G.y,ee=f===0?H.x:H.y;let ie=!1;X<a?ee>a&&b.push(x(G,H,a)):X>s?ee<s&&b.push(x(G,H,s)):b.push(G),ee<a&&X>=a&&(b.push(x(G,H,a)),ie=!0),ee>s&&X<=s&&(b.push(x(G,H,s)),ie=!0),!g&&ie&&(C.push(b),b=[])}const I=u.length-1,j=f===0?u[I].x:u[I].y;return j>=a&&j<=s&&b.push(u[I]),g&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new _(b[0].x,b[0].y)),b.length>0&&C.push(b),C}function rk(u,a,s,f,g){const x=[];for(const b of u){const C=MV(b,a,s,f,g);C.length>0&&x.push(...C)}return x}function kV(u,a,s){return new _(s,u.y+(s-u.x)/(a.x-u.x)*(a.y-u.y))}function AV(u,a,s){return new _(u.x+(s-u.y)/(a.y-u.y)*(a.x-u.x),s)}Jt("FeatureIndex",QM,{omit:["rawTileData","sourceLayerCoder"]});class Gf extends _{constructor(a,s,f,g){super(a,s),this.angle=f,g!==void 0&&(this.segment=g)}clone(){return new Gf(this.x,this.y,this.angle,this.segment)}}function nk(u,a,s,f,g){if(a.segment===void 0||s===0)return!0;let x=a,b=a.segment+1,C=0;for(;C>-s/2;){if(b--,b<0)return!1;C-=u[b].dist(x),x=u[b]}C+=u[b].dist(u[b+1]),b++;const I=[];let j=0;for(;C<s/2;){const V=u[b],G=u[b+1];if(!G)return!1;let H=u[b-1].angleTo(V)-V.angleTo(G);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:H}),j+=H;C-I[0].distance>f;)j-=I.shift().angleDelta;if(j>g)return!1;b++,C+=V.dist(G)}return!0}function ik(u){let a=0;for(let s=0;s<u.length-1;s++)a+=u[s].dist(u[s+1]);return a}function ak(u,a,s){return u?.6*a*s:0}function ok(u,a){return Math.max(u?u.right-u.left:0,a?a.right-a.left:0)}function IV(u,a,s,f,g,x){const b=ak(s,g,x),C=ok(s,f)*x;let I=0;const j=ik(u)/2;for(let V=0;V<u.length-1;V++){const G=u[V],H=u[V+1],X=G.dist(H);if(I+X>j){const ee=(j-I)/X,ie=ni.number(G.x,H.x,ee),se=ni.number(G.y,H.y,ee),fe=new Gf(ie,se,H.angleTo(G),V);return fe._round(),!b||nk(u,fe,C,b,a)?fe:void 0}I+=X}}function OV(u,a,s,f,g,x,b,C,I){const j=ak(f,x,b),V=ok(f,g),G=V*b,H=u[0].x===0||u[0].x===I||u[0].y===0||u[0].y===I;return a-G<a/4&&(a=G+a/4),sk(u,H?a/2*C%a:(V/2+2*x)*b*C%a,a,j,s,G,H,!1,I)}function sk(u,a,s,f,g,x,b,C,I){const j=x/2,V=ik(u);let G=0,H=a-s,X=[];for(let ee=0;ee<u.length-1;ee++){const ie=u[ee],se=u[ee+1],fe=ie.dist(se),Pe=se.angleTo(ie);for(;H+s<G+fe;){H+=s;const me=(H-G)/fe,ge=ni.number(ie.x,se.x,me),Ce=ni.number(ie.y,se.y,me);if(ge>=0&&ge<I&&Ce>=0&&Ce<I&&H-j>=0&&H+j<=V){const Re=new Gf(ge,Ce,Pe,ee);Re._round(),f&&!nk(u,Re,x,f,g)||X.push(Re)}}G+=fe}return C||X.length||b||(X=sk(u,G/2,s,f,g,x,b,!0,I)),X}function lk(u,a,s,f){const g=[],x=u.image,b=x.pixelRatio,C=x.paddedRect.w-2,I=x.paddedRect.h-2;let j={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const V=x.stretchX||[[0,C]],G=x.stretchY||[[0,I]],H=(dt,sr)=>dt+sr[1]-sr[0],X=V.reduce(H,0),ee=G.reduce(H,0),ie=C-X,se=I-ee;let fe=0,Pe=X,me=0,ge=ee,Ce=0,Re=ie,nt=0,kt=se;if(x.content&&f){const dt=x.content,sr=dt[2]-dt[0],nr=dt[3]-dt[1];(x.textFitWidth||x.textFitHeight)&&(j=D0(u)),fe=G0(V,0,dt[0]),me=G0(G,0,dt[1]),Pe=G0(V,dt[0],dt[2]),ge=G0(G,dt[1],dt[3]),Ce=dt[0]-fe,nt=dt[1]-me,Re=sr-Pe,kt=nr-ge}const _t=j.x1,Ot=j.y1,Kt=j.x2-_t,Rt=j.y2-Ot,Ct=(dt,sr,nr,lr)=>{const er=W0(dt.stretch-fe,Pe,Kt,_t),vr=H0(dt.fixed-Ce,Re,dt.stretch,X),fn=W0(sr.stretch-me,ge,Rt,Ot),en=H0(sr.fixed-nt,kt,sr.stretch,ee),yi=W0(nr.stretch-fe,Pe,Kt,_t),fo=H0(nr.fixed-Ce,Re,nr.stretch,X),oa=W0(lr.stretch-me,ge,Rt,Ot),vi=H0(lr.fixed-nt,kt,lr.stretch,ee),di=new _(er,fn),An=new _(yi,fn),Ci=new _(yi,oa),Ni=new _(er,oa),li=new _(vr/b,en/b),ps=new _(fo/b,vi/b),po=a*Math.PI/180;if(po){const Ta=Math.sin(po),bi=Math.cos(po),sa=[bi,-Ta,Ta,bi];di._matMult(sa),An._matMult(sa),Ni._matMult(sa),Ci._matMult(sa)}const ms=dt.stretch+dt.fixed,au=sr.stretch+sr.fixed;return{tl:di,tr:An,bl:Ni,br:Ci,tex:{x:x.paddedRect.x+1+ms,y:x.paddedRect.y+1+au,w:nr.stretch+nr.fixed-ms,h:lr.stretch+lr.fixed-au},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:ps,minFontScaleX:Re/b/Kt,minFontScaleY:kt/b/Rt,isSDF:s}};if(f&&(x.stretchX||x.stretchY)){const dt=uk(V,ie,X),sr=uk(G,se,ee);for(let nr=0;nr<dt.length-1;nr++){const lr=dt[nr],er=dt[nr+1];for(let vr=0;vr<sr.length-1;vr++)g.push(Ct(lr,sr[vr],er,sr[vr+1]))}}else g.push(Ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return g}function G0(u,a,s){let f=0;for(const g of u)f+=Math.max(a,Math.min(s,g[1]))-Math.max(a,Math.min(s,g[0]));return f}function uk(u,a,s){const f=[{fixed:-1,stretch:0}];for(const[g,x]of u){const b=f[f.length-1];f.push({fixed:g-b.stretch,stretch:b.stretch}),f.push({fixed:g-b.stretch,stretch:b.stretch+(x-g)})}return f.push({fixed:a+1,stretch:s}),f}function W0(u,a,s,f){return u/a*s+f}function H0(u,a,s,f){return u-a*s/f}Jt("Anchor",Gf);class Z0{constructor(a,s,f,g,x,b,C,I,j,V){var G;if(this.boxStartIndex=a.length,j){let H=b.top,X=b.bottom;const ee=b.collisionPadding;ee&&(H-=ee[1],X+=ee[3]);let ie=X-H;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{const H=!((G=b.image)===null||G===void 0)&&G.content&&(b.image.textFitWidth||b.image.textFitHeight)?D0(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};H.y1=H.y1*C-I[0],H.y2=H.y2*C+I[2],H.x1=H.x1*C-I[3],H.x2=H.x2*C+I[1];const X=b.collisionPadding;if(X&&(H.x1-=X[0]*C,H.y1-=X[1]*C,H.x2+=X[2]*C,H.y2+=X[3]*C),V){const ee=new _(H.x1,H.y1),ie=new _(H.x2,H.y1),se=new _(H.x1,H.y2),fe=new _(H.x2,H.y2),Pe=V*Math.PI/180;ee._rotate(Pe),ie._rotate(Pe),se._rotate(Pe),fe._rotate(Pe),H.x1=Math.min(ee.x,ie.x,se.x,fe.x),H.x2=Math.max(ee.x,ie.x,se.x,fe.x),H.y1=Math.min(ee.y,ie.y,se.y,fe.y),H.y2=Math.max(ee.y,ie.y,se.y,fe.y)}a.emplaceBack(s.x,s.y,H.x1,H.y1,H.x2,H.y2,f,g,x)}this.boxEndIndex=a.length}}class LV{constructor(a=[],s=(f,g)=>f<g?-1:f>g?1:0){if(this.data=a,this.length=this.data.length,this.compare=s,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:s,compare:f}=this,g=s[a];for(;a>0;){const x=a-1>>1,b=s[x];if(f(g,b)>=0)break;s[a]=b,a=x}s[a]=g}_down(a){const{data:s,compare:f}=this,g=this.length>>1,x=s[a];for(;a<g;){let b=1+(a<<1);const C=b+1;if(C<this.length&&f(s[C],s[b])<0&&(b=C),f(s[b],x)>=0)break;s[a]=s[b],a=b}s[a]=x}}function DV(u,a=1,s=!1){const f=mm.fromPoints(u[0]),g=Math.min(f.width(),f.height());let x=g/2;const b=new LV([],RV),{minX:C,minY:I,maxX:j,maxY:V}=f;if(g===0)return new _(C,I);for(let X=C;X<j;X+=g)for(let ee=I;ee<V;ee+=g)b.push(new Ug(X+x,ee+x,x,u));let G=(function(X){let ee=0,ie=0,se=0;const fe=X[0];for(let Pe=0,me=fe.length,ge=me-1;Pe<me;ge=Pe++){const Ce=fe[Pe],Re=fe[ge],nt=Ce.x*Re.y-Re.x*Ce.y;ie+=(Ce.x+Re.x)*nt,se+=(Ce.y+Re.y)*nt,ee+=3*nt}return new Ug(ie/ee,se/ee,0,X)})(u),H=b.length;for(;b.length;){const X=b.pop();(X.d>G.d||!G.d)&&(G=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,H)),X.max-G.d<=a||(x=X.h/2,b.push(new Ug(X.p.x-x,X.p.y-x,x,u)),b.push(new Ug(X.p.x+x,X.p.y-x,x,u)),b.push(new Ug(X.p.x-x,X.p.y+x,x,u)),b.push(new Ug(X.p.x+x,X.p.y+x,x,u)),H+=4)}return s&&(console.log(`num probes: ${H}`),console.log(`best distance: ${G.d}`)),G.p}function RV(u,a){return a.max-u.max}function Ug(u,a,s,f){this.p=new _(u,a),this.h=s,this.d=(function(g,x){let b=!1,C=1/0;for(let I=0;I<x.length;I++){const j=x[I];for(let V=0,G=j.length,H=G-1;V<G;H=V++){const X=j[V],ee=j[H];X.y>g.y!=ee.y>g.y&&g.x<(ee.x-X.x)*(g.y-X.y)/(ee.y-X.y)+X.x&&(b=!b),C=Math.min(C,Sg(g,X,ee))}}return(b?1:-1)*Math.sqrt(C)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ho;d.aP=void 0,(ho=d.aP||(d.aP={}))[ho.center=1]="center",ho[ho.left=2]="left",ho[ho.right=3]="right",ho[ho.top=4]="top",ho[ho.bottom=5]="bottom",ho[ho["top-left"]=6]="top-left",ho[ho["top-right"]=7]="top-right",ho[ho["bottom-left"]=8]="bottom-left",ho[ho["bottom-right"]=9]="bottom-right";const K1=Number.POSITIVE_INFINITY;function ck(u,a){return a[1]!==K1?(function(s,f,g){let x=0,b=0;switch(f=Math.abs(f),g=Math.abs(g),s){case"top-right":case"top-left":case"top":b=g-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-g}switch(s){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,b]})(u,a[0],a[1]):(function(s,f){let g=0,x=0;f<0&&(f=0);const b=f/Math.SQRT2;switch(s){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(s){case"top-right":case"bottom-right":g=-b;break;case"top-left":case"bottom-left":g=b;break;case"left":g=f;break;case"right":g=-f}return[g,x]})(u,a[0])}function hk(u,a,s){var f;const g=u.layout,x=(f=g.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(a,{},s);if(x){const C=x.values,I=[];for(let j=0;j<C.length;j+=2){const V=I[j]=C[j],G=C[j+1].map((H=>H*aa));V.startsWith("top")?G[1]-=7:V.startsWith("bottom")&&(G[1]+=7),I[j+1]=G}return new Ra(I)}const b=g.get("text-variable-anchor");if(b){let C;C=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(a,{},s)*aa,K1]:g.get("text-offset").evaluate(a,{},s).map((j=>j*aa));const I=[];for(const j of b)I.push(j,ck(j,C));return new Ra(I)}return null}function X1(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jV(u,a,s,f,g,x,b,C,I,j,V,G){let H=x.textMaxSize.evaluate(a,{});H===void 0&&(H=b);const X=u.layers[0].layout,ee=X.get("icon-offset").evaluate(a,{},V),ie=fk(s.horizontal),se=b/24,fe=u.tilePixelRatio*se,Pe=u.tilePixelRatio*H/24,me=u.tilePixelRatio*C,ge=u.tilePixelRatio*X.get("symbol-spacing"),Ce=X.get("text-padding")*u.tilePixelRatio,Re=(function(nr,lr,er,vr=1){const fn=nr.get("icon-padding").evaluate(lr,{},er),en=fn&&fn.values;return[en[0]*vr,en[1]*vr,en[2]*vr,en[3]*vr]})(X,a,V,u.tilePixelRatio),nt=X.get("text-max-angle")/180*Math.PI,kt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",_t=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",Ot=X.get("symbol-placement"),Kt=ge/2,Rt=X.get("icon-text-fit");let Ct;f&&Rt!=="none"&&(u.allowVerticalPlacement&&s.vertical&&(Ct=iM(f,s.vertical,Rt,X.get("icon-text-fit-padding"),ee,se)),ie&&(f=iM(f,ie,Rt,X.get("icon-text-fit-padding"),ee,se)));const dt=V?G.line.getGranularityForZoomLevel(V.z):1,sr=(nr,lr)=>{lr.x<0||lr.x>=Qe||lr.y<0||lr.y>=Qe||(function(er,vr,fn,en,yi,fo,oa,vi,di,An,Ci,Ni,li,ps,po,ms,au,Ta,bi,sa,Ti,Ma,cd,cc,Av){const Wf=er.addToLineVertexArray(vr,fn);let vm,qg,Gg,Wg,yk=0,vk=0,_k=0,xk=0,iS=-1,aS=-1;const hd={};let bk=_n("");if(er.allowVerticalPlacement&&en.vertical){const To=vi.layout.get("text-rotate").evaluate(Ti,{},cc)+90;Gg=new Z0(di,vr,An,Ci,Ni,en.vertical,li,ps,po,To),oa&&(Wg=new Z0(di,vr,An,Ci,Ni,oa,au,Ta,po,To))}if(yi){const To=vi.layout.get("icon-rotate").evaluate(Ti,{}),Sl=vi.layout.get("icon-text-fit")!=="none",_m=lk(yi,To,cd,Sl),dc=oa?lk(oa,To,cd,Sl):void 0;qg=new Z0(di,vr,An,Ci,Ni,yi,au,Ta,!1,To),yk=4*_m.length;const xm=er.iconSizeData;let uh=null;xm.kind==="source"?(uh=[ld*vi.layout.get("icon-size").evaluate(Ti,{})],uh[0]>$f&&Tr(`${er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):xm.kind==="composite"&&(uh=[ld*Ma.compositeIconSizes[0].evaluate(Ti,{},cc),ld*Ma.compositeIconSizes[1].evaluate(Ti,{},cc)],(uh[0]>$f||uh[1]>$f)&&Tr(`${er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),er.addSymbols(er.icon,_m,uh,sa,bi,Ti,d.az.none,vr,Wf.lineStartIndex,Wf.lineLength,-1,cc),iS=er.icon.placedSymbolArray.length-1,dc&&(vk=4*dc.length,er.addSymbols(er.icon,dc,uh,sa,bi,Ti,d.az.vertical,vr,Wf.lineStartIndex,Wf.lineLength,-1,cc),aS=er.icon.placedSymbolArray.length-1)}const wk=Object.keys(en.horizontal);for(const To of wk){const Sl=en.horizontal[To];if(!vm){bk=_n(Sl.text);const dc=vi.layout.get("text-rotate").evaluate(Ti,{},cc);vm=new Z0(di,vr,An,Ci,Ni,Sl,li,ps,po,dc)}const _m=Sl.positionedLines.length===1;if(_k+=dk(er,vr,Sl,fo,vi,po,Ti,ms,Wf,en.vertical?d.az.horizontal:d.az.horizontalOnly,_m?wk:[To],hd,iS,Ma,cc),_m)break}en.vertical&&(xk+=dk(er,vr,en.vertical,fo,vi,po,Ti,ms,Wf,d.az.vertical,["vertical"],hd,aS,Ma,cc));const FV=vm?vm.boxStartIndex:er.collisionBoxArray.length,BV=vm?vm.boxEndIndex:er.collisionBoxArray.length,VV=Gg?Gg.boxStartIndex:er.collisionBoxArray.length,$V=Gg?Gg.boxEndIndex:er.collisionBoxArray.length,UV=qg?qg.boxStartIndex:er.collisionBoxArray.length,qV=qg?qg.boxEndIndex:er.collisionBoxArray.length,GV=Wg?Wg.boxStartIndex:er.collisionBoxArray.length,WV=Wg?Wg.boxEndIndex:er.collisionBoxArray.length;let hc=-1;const X0=(To,Sl)=>To&&To.circleDiameter?Math.max(To.circleDiameter,Sl):Sl;hc=X0(vm,hc),hc=X0(Gg,hc),hc=X0(qg,hc),hc=X0(Wg,hc);const Sk=hc>-1?1:0;Sk&&(hc*=Av/aa),er.glyphOffsetArray.length>=zg.MAX_GLYPHS&&Tr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ti.sortKey!==void 0&&er.addToSortKeyRanges(er.symbolInstances.length,Ti.sortKey);const HV=hk(vi,Ti,cc),[ZV,KV]=(function(To,Sl){const _m=To.length,dc=Sl==null?void 0:Sl.values;if((dc==null?void 0:dc.length)>0)for(let xm=0;xm<dc.length;xm+=2){const uh=dc[xm+1];To.emplaceBack(d.aP[dc[xm]],uh[0],uh[1])}return[_m,To.length]})(er.textAnchorOffsets,HV);er.symbolInstances.emplaceBack(vr.x,vr.y,hd.right>=0?hd.right:-1,hd.center>=0?hd.center:-1,hd.left>=0?hd.left:-1,hd.vertical||-1,iS,aS,bk,FV,BV,VV,$V,UV,qV,GV,WV,An,_k,xk,yk,vk,Sk,0,li,hc,ZV,KV)})(u,lr,nr,s,f,g,Ct,u.layers[0],u.collisionBoxArray,a.index,a.sourceLayerIndex,u.index,fe,[Ce,Ce,Ce,Ce],kt,I,me,Re,_t,ee,a,x,j,V,b)};if(Ot==="line")for(const nr of ek(a.geometry,0,0,Qe,Qe)){const lr=Go(nr,dt),er=OV(lr,ge,nt,s.vertical||ie,f,24,Pe,u.overscaling,Qe);for(const vr of er)ie&&zV(u,ie.text,Kt,vr)||sr(lr,vr)}else if(Ot==="line-center"){for(const nr of a.geometry)if(nr.length>1){const lr=Go(nr,dt),er=IV(lr,nt,s.vertical||ie,f,24,Pe);er&&sr(lr,er)}}else if(a.type==="Polygon")for(const nr of Dh(a.geometry,0)){const lr=DV(nr,16);sr(Go(nr[0],dt,!0),new Gf(lr.x,lr.y,0))}else if(a.type==="LineString")for(const nr of a.geometry){const lr=Go(nr,dt);sr(lr,new Gf(lr[0].x,lr[0].y,0))}else if(a.type==="Point")for(const nr of a.geometry)for(const lr of nr)sr([lr],new Gf(lr.x,lr.y,0))}function dk(u,a,s,f,g,x,b,C,I,j,V,G,H,X,ee){const ie=(function(Pe,me,ge,Ce,Re,nt,kt,_t){const Ot=Ce.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,Kt=[];for(const Rt of me.positionedLines)for(const Ct of Rt.positionedGlyphs){if(!Ct.rect)continue;const dt=Ct.rect||{};let sr=4,nr=!0,lr=1,er=0;const vr=(Re||_t)&&Ct.vertical,fn=Ct.metrics.advance*Ct.scale/2;if(_t&&me.verticalizable&&(er=Rt.lineOffset/2-(Ct.imageName?-(aa-Ct.metrics.width*Ct.scale)/2:(Ct.scale-1)*aa)),Ct.imageName){const Ta=kt[Ct.imageName];nr=Ta.sdf,lr=Ta.pixelRatio,sr=1/lr}const en=Re?[Ct.x+fn,Ct.y]:[0,0];let yi=Re?[0,0]:[Ct.x+fn+ge[0],Ct.y+ge[1]-er],fo=[0,0];vr&&(fo=yi,yi=[0,0]);const oa=Ct.metrics.isDoubleResolution?2:1,vi=(Ct.metrics.left-sr)*Ct.scale-fn+yi[0],di=(-Ct.metrics.top-sr)*Ct.scale+yi[1],An=vi+dt.w/oa*Ct.scale/lr,Ci=di+dt.h/oa*Ct.scale/lr,Ni=new _(vi,di),li=new _(An,di),ps=new _(vi,Ci),po=new _(An,Ci);if(vr){const Ta=new _(-fn,fn- -17),bi=-Math.PI/2,sa=12-fn,Ti=new _(22-sa,-(Ct.imageName?sa:0)),Ma=new _(...fo);Ni._rotateAround(bi,Ta)._add(Ti)._add(Ma),li._rotateAround(bi,Ta)._add(Ti)._add(Ma),ps._rotateAround(bi,Ta)._add(Ti)._add(Ma),po._rotateAround(bi,Ta)._add(Ti)._add(Ma)}if(Ot){const Ta=Math.sin(Ot),bi=Math.cos(Ot),sa=[bi,-Ta,Ta,bi];Ni._matMult(sa),li._matMult(sa),ps._matMult(sa),po._matMult(sa)}const ms=new _(0,0),au=new _(0,0);Kt.push({tl:Ni,tr:li,bl:ps,br:po,tex:dt,writingMode:me.writingMode,glyphOffset:en,sectionIndex:Ct.sectionIndex,isSDF:nr,pixelOffsetTL:ms,pixelOffsetBR:au,minFontScaleX:0,minFontScaleY:0})}return Kt})(0,s,C,g,x,b,f,u.allowVerticalPlacement),se=u.textSizeData;let fe=null;se.kind==="source"?(fe=[ld*g.layout.get("text-size").evaluate(b,{})],fe[0]>$f&&Tr(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):se.kind==="composite"&&(fe=[ld*X.compositeTextSizes[0].evaluate(b,{},ee),ld*X.compositeTextSizes[1].evaluate(b,{},ee)],(fe[0]>$f||fe[1]>$f)&&Tr(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ie,fe,C,x,b,j,a,I.lineStartIndex,I.lineLength,H,ee);for(const Pe of V)G[Pe]=u.text.placedSymbolArray.length-1;return 4*ie.length}function fk(u){for(const a in u)return u[a];return null}function zV(u,a,s,f){const g=u.compareText;if(a in g){const x=g[a];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<s)return!0}else g[a]=[];return g[a].push(f),!1}const pk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Y1{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,f]=new Uint8Array(a,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const x=pk[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(a,2,1),[C]=new Uint32Array(a,4,1);return new Y1(C,b,x,a)}constructor(a,s=64,f=Float64Array,g){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=f,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const x=pk.indexOf(this.ArrayType),b=2*a*this.ArrayType.BYTES_PER_ELEMENT,C=a*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+C+I,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+b+C+I),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+C+I,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=a)}add(a,s){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=a,this.coords[this._pos++]=s,f}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return Q1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,s,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:C}=this,I=[0,x.length-1,0],j=[];for(;I.length;){const V=I.pop()||0,G=I.pop()||0,H=I.pop()||0;if(G-H<=C){for(let se=H;se<=G;se++){const fe=b[2*se],Pe=b[2*se+1];fe>=a&&fe<=f&&Pe>=s&&Pe<=g&&j.push(x[se])}continue}const X=H+G>>1,ee=b[2*X],ie=b[2*X+1];ee>=a&&ee<=f&&ie>=s&&ie<=g&&j.push(x[X]),(V===0?a<=ee:s<=ie)&&(I.push(H),I.push(X-1),I.push(1-V)),(V===0?f>=ee:g>=ie)&&(I.push(X+1),I.push(G),I.push(1-V))}return j}within(a,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:b}=this,C=[0,g.length-1,0],I=[],j=f*f;for(;C.length;){const V=C.pop()||0,G=C.pop()||0,H=C.pop()||0;if(G-H<=b){for(let se=H;se<=G;se++)gk(x[2*se],x[2*se+1],a,s)<=j&&I.push(g[se]);continue}const X=H+G>>1,ee=x[2*X],ie=x[2*X+1];gk(ee,ie,a,s)<=j&&I.push(g[X]),(V===0?a-f<=ee:s-f<=ie)&&(C.push(H),C.push(X-1),C.push(1-V)),(V===0?a+f>=ee:s+f>=ie)&&(C.push(X+1),C.push(G),C.push(1-V))}return I}}function Q1(u,a,s,f,g,x){if(g-f<=s)return;const b=f+g>>1;mk(u,a,b,f,g,x),Q1(u,a,s,f,b-1,1-x),Q1(u,a,s,b+1,g,1-x)}function mk(u,a,s,f,g,x){for(;g>f;){if(g-f>600){const j=g-f+1,V=s-f+1,G=Math.log(j),H=.5*Math.exp(2*G/3),X=.5*Math.sqrt(G*H*(j-H)/j)*(V-j/2<0?-1:1);mk(u,a,s,Math.max(f,Math.floor(s-V*H/j+X)),Math.min(g,Math.floor(s+(j-V)*H/j+X)),x)}const b=a[2*s+x];let C=f,I=g;for(Mv(u,a,f,s),a[2*g+x]>b&&Mv(u,a,f,g);C<I;){for(Mv(u,a,C,I),C++,I--;a[2*C+x]<b;)C++;for(;a[2*I+x]>b;)I--}a[2*f+x]===b?Mv(u,a,f,I):(I++,Mv(u,a,I,g)),I<=s&&(f=I+1),s<=I&&(g=I-1)}}function Mv(u,a,s,f){J1(u,s,f),J1(a,2*s,2*f),J1(a,2*s+1,2*f+1)}function J1(u,a,s){const f=u[a];u[a]=u[s],u[s]=f}function gk(u,a,s,f){const g=u-s,x=a-f;return g*g+x*x}var eS;d.cH=void 0,(eS=d.cH||(d.cH={})).create="create",eS.load="load",eS.fullLoad="fullLoad";let K0=null,kv=[];const tS=1e3/60,rS="loadTime",nS="fullLoadTime",NV={mark(u){performance.mark(u)},frame(u){const a=u;K0!=null&&kv.push(a-K0),K0=a},clearMetrics(){K0=null,kv=[],performance.clearMeasures(rS),performance.clearMeasures(nS);for(const u in d.cH)performance.clearMarks(d.cH[u])},getPerformanceMetrics(){performance.measure(rS,d.cH.create,d.cH.load),performance.measure(nS,d.cH.create,d.cH.fullLoad);const u=performance.getEntriesByName(rS)[0].duration,a=performance.getEntriesByName(nS)[0].duration,s=kv.length,f=1/(kv.reduce(((x,b)=>x+b),0)/s/1e3),g=kv.filter((x=>x>tS)).reduce(((x,b)=>x+(b-tS)/tS),0);return{loadTime:u,fullLoadTime:a,fps:f,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};d.$=L,d.A=re,d.B=Vo,d.C=mi,d.D=ar,d.E=Ur,d.F=function([u,a,s]){return a+=90,a*=Math.PI/180,s*=Math.PI/180,{x:u*Math.cos(a)*Math.sin(s),y:u*Math.sin(a)*Math.sin(s),z:u*Math.cos(s)}},d.G=ni,d.H=Mn,d.I=Ei,d.J=Zh,d.K=function(u){if(Wr==null){const a=u.navigator?u.navigator.userAgent:null;Wr=!!u.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Wr},d.L=class{constructor(u,a){this.target=u,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new J6((()=>this.process())),this.subscription=rr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=tn(self)?u:window}registerMessageHandler(u,a){this.messageHandlers[u]=a}unregisterMessageHandler(u){delete this.messageHandlers[u]}sendAsync(u,a){return new Promise(((s,f)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=a?rr(a.signal,"abort",(()=>{x==null||x.unsubscribe(),delete this.resolveRejects[g];const I={id:g,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),eV):null;this.resolveRejects[g]={resolve:I=>{x==null||x.unsubscribe(),s(I)},reject:I=>{x==null||x.unsubscribe(),f(I)}};const b=[],C=Object.assign(Object.assign({},u),{id:g,sourceMapId:this.mapId,origin:location.origin,data:pa(u.data,b)});this.target.postMessage(C,{transfer:b})}))}receive(u){const a=u.data,s=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[s];const f=this.abortControllers[s];return delete this.abortControllers[s],void(f&&f.abort())}if(tn(self)||a.mustQueue)return this.tasks[s]=a,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,a)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),a=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(u,a)}processTask(u,a){return o(this,void 0,void 0,(function*(){if(a.type==="<response>"){const g=this.resolveRejects[u];return delete this.resolveRejects[u],g?void(a.error?g.reject(ma(a.error)):g.resolve(ma(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ma(a.data),f=new AbortController;this.abortControllers[u]=f;try{const g=yield this.messageHandlers[a.type](a.sourceMapId,s,f);this.completeTask(u,null,g)}catch(g){this.completeTask(u,g)}}))}completeTask(u,a,s){const f=[];delete this.abortControllers[u];const g={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?pa(a):null,data:pa(s,f)};this.target.postMessage(g,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.M=Ze,d.N=function(){var u=new re(16);return re!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},d.O=function(u,a,s){var f,g,x,b,C,I,j,V,G,H,X,ee,ie=s[0],se=s[1],fe=s[2];return a===u?(u[12]=a[0]*ie+a[4]*se+a[8]*fe+a[12],u[13]=a[1]*ie+a[5]*se+a[9]*fe+a[13],u[14]=a[2]*ie+a[6]*se+a[10]*fe+a[14],u[15]=a[3]*ie+a[7]*se+a[11]*fe+a[15]):(g=a[1],x=a[2],b=a[3],C=a[4],I=a[5],j=a[6],V=a[7],G=a[8],H=a[9],X=a[10],ee=a[11],u[0]=f=a[0],u[1]=g,u[2]=x,u[3]=b,u[4]=C,u[5]=I,u[6]=j,u[7]=V,u[8]=G,u[9]=H,u[10]=X,u[11]=ee,u[12]=f*ie+C*se+G*fe+a[12],u[13]=g*ie+I*se+H*fe+a[13],u[14]=x*ie+j*se+X*fe+a[14],u[15]=b*ie+V*se+ee*fe+a[15]),u},d.P=_,d.Q=function(u,a,s){var f=s[0],g=s[1],x=s[2];return u[0]=a[0]*f,u[1]=a[1]*f,u[2]=a[2]*f,u[3]=a[3]*f,u[4]=a[4]*g,u[5]=a[5]*g,u[6]=a[6]*g,u[7]=a[7]*g,u[8]=a[8]*x,u[9]=a[9]*x,u[10]=a[10]*x,u[11]=a[11]*x,u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},d.R=lo,d.S=function(u,a,s){var f=a[0],g=a[1],x=a[2],b=a[3],C=a[4],I=a[5],j=a[6],V=a[7],G=a[8],H=a[9],X=a[10],ee=a[11],ie=a[12],se=a[13],fe=a[14],Pe=a[15],me=s[0],ge=s[1],Ce=s[2],Re=s[3];return u[0]=me*f+ge*C+Ce*G+Re*ie,u[1]=me*g+ge*I+Ce*H+Re*se,u[2]=me*x+ge*j+Ce*X+Re*fe,u[3]=me*b+ge*V+Ce*ee+Re*Pe,u[4]=(me=s[4])*f+(ge=s[5])*C+(Ce=s[6])*G+(Re=s[7])*ie,u[5]=me*g+ge*I+Ce*H+Re*se,u[6]=me*x+ge*j+Ce*X+Re*fe,u[7]=me*b+ge*V+Ce*ee+Re*Pe,u[8]=(me=s[8])*f+(ge=s[9])*C+(Ce=s[10])*G+(Re=s[11])*ie,u[9]=me*g+ge*I+Ce*H+Re*se,u[10]=me*x+ge*j+Ce*X+Re*fe,u[11]=me*b+ge*V+Ce*ee+Re*Pe,u[12]=(me=s[12])*f+(ge=s[13])*C+(Ce=s[14])*G+(Re=s[15])*ie,u[13]=me*g+ge*I+Ce*H+Re*se,u[14]=me*x+ge*j+Ce*X+Re*fe,u[15]=me*b+ge*V+Ce*ee+Re*Pe,u},d.T=ds,d.U=function(u,a){const s={};for(let f=0;f<a.length;f++){const g=a[f];g in u&&(s[g]=u[g])}return s},d.V=Uf,d.W=Ft,d.X=fM,d.Y=dM,d.Z=Me,d._=o,d.a=pe,d.a$=$e,d.a0=K,d.a1=Be,d.a2=bl,d.a3=mM,d.a4=z0,d.a5=Qe,d.a6=function(u,a,s){if(!u)return a||{};if(!a)return u||{};const f=_M(u),g=_M(a);(function(b,C){C.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),C.remove.clear());for(const I of C.remove)b.add.delete(I),b.update.delete(I);for(const[I,j]of C.update){const V=b.update.get(I);V&&(C.update.set(I,tV(V,j)),b.update.delete(I))}})(f,g);const x={};if((f.removeAll||g.removeAll)&&(x.removeAll=!0),x.remove=new Set([...f.remove,...g.remove]),x.add=new Map([...f.add,...g.add]),x.update=new Map([...f.update,...g.update]),x.remove.size&&x.add.size)for(const b of x.add.keys())x.remove.delete(b);return(function(b){const C={};return b.removeAll&&(C.removeAll=b.removeAll),b.remove&&(C.remove=Array.from(b.remove)),b.add&&(C.add=Array.from(b.add.values())),b.update&&(C.update=Array.from(b.update.values())),C})(x)},d.a7=function(u,a){const s=new Map;if(u==null||u.type==null)return s;if(u.type==="Feature"){const f=O1(u,a);return f==null?void 0:(s.set(f,u),s)}if(u.type==="FeatureCollection"){const f=new Set;for(const g of u.features){const x=O1(g,a);if(x==null||f.has(x))return;f.add(x),s.set(x,g)}return s}},d.a8=function(u,a,s){var f,g;const x=[];if(a.removeAll)u.clear();else if(a.remove)for(const b of a.remove){const C=u.get(b);C&&(x.push(C.geometry),u.delete(b))}if(a.add)for(const b of a.add){const C=O1(b,s);if(C==null)continue;const I=u.get(C);I&&x.push(I.geometry),x.push(b.geometry),u.set(C,b)}if(a.update)for(const b of a.update){const C=u.get(b.id);if(!C)continue;const I=!!b.newGeometry,j=b.removeAllProperties||((f=b.removeProperties)===null||f===void 0?void 0:f.length)>0||((g=b.addOrUpdateProperties)===null||g===void 0?void 0:g.length)>0;if(!I&&!j)continue;x.push(C.geometry);const V=Object.assign({},C);if(u.set(b.id,V),I&&(x.push(b.newGeometry),V.geometry=b.newGeometry),j){if(V.properties=b.removeAllProperties?{}:Object.assign({},V.properties||{}),b.removeProperties)for(const G of b.removeProperties)delete V.properties[G];if(b.addOrUpdateProperties)for(const{key:G,value:H}of b.addOrUpdateProperties)V.properties[G]=H}}return x},d.a9=Pv,d.aA=function(u,{uSize:a,uSizeT:s},{lowerSize:f,upperSize:g}){return u.kind==="source"?f/ld:u.kind==="composite"?ni.number(f/ld,g/ld,s):a},d.aB=function(u,a){var s=a[0],f=a[1],g=a[2],x=a[3],b=a[4],C=a[5],I=a[6],j=a[7],V=a[8],G=a[9],H=a[10],X=a[11],ee=a[12],ie=a[13],se=a[14],fe=a[15],Pe=s*C-f*b,me=s*I-g*b,ge=s*j-x*b,Ce=f*I-g*C,Re=f*j-x*C,nt=g*j-x*I,kt=V*ie-G*ee,_t=V*se-H*ee,Ot=V*fe-X*ee,Kt=G*se-H*ie,Rt=G*fe-X*ie,Ct=H*fe-X*se,dt=Pe*Ct-me*Rt+ge*Kt+Ce*Ot-Re*_t+nt*kt;return dt?(u[0]=(C*Ct-I*Rt+j*Kt)*(dt=1/dt),u[1]=(g*Rt-f*Ct-x*Kt)*dt,u[2]=(ie*nt-se*Re+fe*Ce)*dt,u[3]=(H*Re-G*nt-X*Ce)*dt,u[4]=(I*Ot-b*Ct-j*_t)*dt,u[5]=(s*Ct-g*Ot+x*_t)*dt,u[6]=(se*ge-ee*nt-fe*me)*dt,u[7]=(V*nt-H*ge+X*me)*dt,u[8]=(b*Rt-C*Ot+j*kt)*dt,u[9]=(f*Ot-s*Rt-x*kt)*dt,u[10]=(ee*Re-ie*ge+fe*Pe)*dt,u[11]=(G*ge-V*Re-X*Pe)*dt,u[12]=(C*_t-b*Kt-I*kt)*dt,u[13]=(s*Kt-f*_t+g*kt)*dt,u[14]=(ie*me-ee*Ce-se*Pe)*dt,u[15]=(V*Ce-G*me+H*Pe)*dt,u):null},d.aC=wt,d.aD=function(u){var a=u[0],s=u[1];return Math.sqrt(a*a+s*s)},d.aE=function(u){return u[0]=0,u[1]=0,u},d.aF=function(u,a,s){return u[0]=a[0]*s,u[1]=a[1]*s,u},d.aG=C1,d.aH=ut,d.aI=function(u,a,s,f){const g=a.y-u.y,x=a.x-u.x,b=f.y-s.y,C=f.x-s.x,I=b*x-C*g;if(I===0)return null;const j=(C*(u.y-s.y)-b*(u.x-s.x))/I;return new _(u.x+j*x,u.y+j*g)},d.aJ=ek,d.aK=Yc,d.aL=function(u){let a=1/0,s=1/0,f=-1/0,g=-1/0;for(const x of u)a=Math.min(a,x.x),s=Math.min(s,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return[a,s,f,g]},d.aM=aa,d.aN=yt,d.aO=function(u,a,s,f,g=!1){if(!s[0]&&!s[1])return[0,0];const x=g?f==="map"?-u.bearingInRadians:0:f==="viewport"?u.bearingInRadians:0;if(x){const b=Math.sin(x),C=Math.cos(x);s=[s[0]*C-s[1]*b,s[0]*b+s[1]*C]}return[g?s[0]:yt(a,s[0],u.zoom),g?s[1]:yt(a,s[1],u.zoom)]},d.aQ=E1,d.aR=X1,d.aS=Qt,d.aT=Y1,d.aU=gi,d.aV=nh,d.aW=ye,d.aX=Yt,d.aY=st,d.aZ=zt,d.a_=gM,d.aa=mm,d.ab=25,d.ac=I1,d.ad=u=>{const a=window.document.createElement("video");return a.muted=!0,new Promise((s=>{a.onloadstart=()=>{s(a)};for(const f of u){const g=window.document.createElement("source");Pt(f)||(a.crossOrigin="Anonymous"),g.src=f,a.appendChild(g)}}))},d.ae=We,d.af=function(){return ct++},d.ag=v,d.ah=zg,d.ai=Tv,d.aj=$u,d.ak=ml,d.al=bM,d.am=function(u){const a={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,f,g,x)=>{const b=g||x;return a[f]=!b||b.toLowerCase(),""})),a["max-age"]){const s=parseInt(a["max-age"],10);isNaN(s)?delete a["max-age"]:a["max-age"]=s}return a},d.an=tr,d.ao=85.051129,d.ap=Wt,d.aq=function(u){return Math.pow(2,u)},d.ar=ae,d.as=pM,d.at=function(u){return Math.log(u)/Math.LN2},d.au=function(u){var a=u[0],s=u[1];return a*a+s*s},d.av=function(u){if(!u.length)return new Set;const a=Math.max(...u.map((I=>I.canonical.z)));let s=1/0,f=-1/0,g=1/0,x=-1/0;const b=[];for(const I of u){const{x:j,y:V,z:G}=I.canonical,H=Math.pow(2,a-G),X=j*H,ee=V*H;b.push({id:I,x:X,y:ee}),X<s&&(s=X),X>f&&(f=X),ee<g&&(g=ee),ee>x&&(x=ee)}const C=new Set;for(const I of b)I.x!==s&&I.x!==f&&I.y!==g&&I.y!==x||C.add(I.id);return C},d.aw=function(u,a){const s=Math.abs(2*u.wrap)-+(u.wrap<0),f=Math.abs(2*a.wrap)-+(a.wrap<0);return u.overscaledZ-a.overscaledZ||f-s||a.canonical.y-u.canonical.y||a.canonical.x-u.canonical.x},d.ax=class{constructor(u,a){this.max=u,this.onRemove=a,this.reset()}reset(){for(const u in this.data)for(const a of this.data[u])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(u,a,s){const f=u.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const g={value:a,timeout:void 0};if(s!==void 0&&(g.timeout=setTimeout((()=>{this.remove(u,g)}),s)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const a=this.data[u].shift();return a.timeout&&clearTimeout(a.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),a.value}getByKey(u){const a=this.data[u];return a?a[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,a){if(!this.has(u))return this;const s=u.wrapped().key,f=a===void 0?0:this.data[s].indexOf(a),g=this.data[s][f];return this.data[s].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(g.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(u){const a=[];for(const s in this.data)for(const f of this.data[s])u(f.value)||a.push(f);for(const s of a)this.remove(s.value.tileID,s)}},d.ay=function(u,a){let s=0,f=0;if(u.kind==="constant")f=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:b}=u,C=g?tr(ea.interpolationFactor(g,a,x,b),0,1):0;u.kind==="camera"?f=ni.number(u.minSize,u.maxSize,C):s=C}return{uSizeT:s,uSize:f}},d.b=Xi,d.b$=fl,d.b0=xe,d.b1=function(u){var a=new re(3);return a[0]=u[0],a[1]=u[1],a[2]=u[2],a},d.b2=function(u,a,s){return u[0]=a[0]-s[0],u[1]=a[1]-s[1],u[2]=a[2]-s[2],u},d.b3=function(u,a){var s=a[0],f=a[1],g=a[2],x=s*s+f*f+g*g;return x>0&&(x=1/Math.sqrt(x)),u[0]=a[0]*x,u[1]=a[1]*x,u[2]=a[2]*x,u},d.b4=Ee,d.b5=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]},d.b6=function(u,a,s){return u[0]=a[0]*s[0],u[1]=a[1]*s[1],u[2]=a[2]*s[2],u[3]=a[3]*s[3],u},d.b7=ne,d.b8=function(u,a,s){const f=a[0]*s[0]+a[1]*s[1]+a[2]*s[2];return f===0?null:(-(u[0]*s[0]+u[1]*s[1]+u[2]*s[2])-s[3])/f},d.b9=Xe,d.bA=function(u,a,s,f){return u[0]=a[0]+s[0]*f,u[1]=a[1]+s[1]*f,u[2]=a[2]+s[2]*f,u},d.bB=gt,d.bC=function(u,a,s){var f=s[0],g=s[1],x=s[2],b=s[3],C=a[0],I=a[1],j=a[2],V=g*j-x*I,G=x*C-f*j,H=f*I-g*C;return u[0]=C+b*(V+=V)+g*(H+=H)-x*(G+=G),u[1]=I+b*G+x*V-f*H,u[2]=j+b*H+f*G-g*V,u},d.bD=function(u,a,s){const f=(function(I){var j=I[3],V=I[4],G=I[5],H=I[6],X=I[7],ee=I[8];return I[0]*(ee*V-G*X)+I[1]*(-ee*j+G*H)+I[2]*(X*j-V*H)})([u[0],u[1],u[2],a[0],a[1],a[2],s[0],s[1],s[2]]);if(f===0)return null;const g=Ee([],[a[0],a[1],a[2]],[s[0],s[1],s[2]]),x=Ee([],[s[0],s[1],s[2]],[u[0],u[1],u[2]]),b=Ee([],[u[0],u[1],u[2]],[a[0],a[1],a[2]]),C=$e([],g,-u[3]);return xe(C,C,$e([],x,-a[3])),xe(C,C,$e([],b,-s[3])),$e(C,C,1/f),C},d.bE=A1,d.bF=function(){return new Float64Array(4)},d.bG=function(u,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[0]*Math.cos(f)-g[1]*Math.sin(f),x[1]=g[0]*Math.sin(f)+g[1]*Math.cos(f),x[2]=g[2],u[0]=x[0]+s[0],u[1]=x[1]+s[1],u[2]=x[2]+s[2],u},d.bH=function(u,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[0],x[1]=g[1]*Math.cos(f)-g[2]*Math.sin(f),x[2]=g[1]*Math.sin(f)+g[2]*Math.cos(f),u[0]=x[0]+s[0],u[1]=x[1]+s[1],u[2]=x[2]+s[2],u},d.bI=function(u,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[2]*Math.sin(f)+g[0]*Math.cos(f),x[1]=g[1],x[2]=g[2]*Math.cos(f)-g[0]*Math.sin(f),u[0]=x[0]+s[0],u[1]=x[1]+s[1],u[2]=x[2]+s[2],u},d.bJ=function(u,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[0],b=a[1],C=a[2],I=a[3],j=a[8],V=a[9],G=a[10],H=a[11];return a!==u&&(u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[0]=x*g-j*f,u[1]=b*g-V*f,u[2]=C*g-G*f,u[3]=I*g-H*f,u[8]=x*f+j*g,u[9]=b*f+V*g,u[10]=C*f+G*g,u[11]=I*f+H*g,u},d.bK=function(u,a){const s=Oe(u,360),f=Oe(a,360),g=f-s,x=f>s?g-360:g+360;return Math.abs(g)<Math.abs(x)?g:x},d.bL=function(u){return u[0]=0,u[1]=0,u[2]=0,u},d.bM=function(u,a,s,f){const g=Math.sqrt(u*u+a*a),x=Math.sqrt(s*s+f*f);u/=g,a/=g,s/=x,f/=x;const b=Math.acos(u*s+a*f);return-a*s+u*f>0?b:-b},d.bN=function(u,a){const s=Oe(u,2*Math.PI),f=Oe(a,2*Math.PI);return Math.min(Math.abs(s-f),Math.abs(s-f+2*Math.PI),Math.abs(s-f-2*Math.PI))},d.bO=function(){const u={},a=tt.$version;for(const s in tt.$root){const f=tt.$root[s];if(f.required){let g=null;g=s==="version"?a:f.type==="array"?[]:{},g!=null&&(u[s]=g)}}return u},d.bP=it,d.bQ=Xn,d.bR=function u(a,s){if(Array.isArray(a)){if(!Array.isArray(s)||a.length!==s.length)return!1;for(let f=0;f<a.length;f++)if(!u(a[f],s[f]))return!1;return!0}if(typeof a=="object"&&a!==null&&s!==null){if(typeof s!="object"||Object.keys(a).length!==Object.keys(s).length)return!1;for(const f in a)if(!u(a[f],s[f]))return!1;return!0}return a===s},d.bS=function(u){u=u.slice();const a=Object.create(null);for(let s=0;s<u.length;s++)a[u[s].id]=u[s];for(let s=0;s<u.length;s++)"ref"in u[s]&&(u[s]=ti(u[s],a[u[s].ref]));return u},d.bT=function(u,a){if(u.type==="custom")return new Q6(u,a);switch(u.type){case"background":return new Y6(u,a);case"circle":return new Df(u,a);case"color-relief":return new x1(u,a);case"fill":return new _0(u,a);case"fill-extrusion":return new w1(u,a);case"heatmap":return new uv(u,a);case"hillshade":return new Qc(u,a);case"line":return new bv(u,a);case"raster":return new Jl(u,a);case"symbol":return new j0(u,a)}},d.bU=u=>u.type==="raster",d.bV=St,d.bW=function(u,a){if(!u)return[{command:"setStyle",args:[a]}];let s=[];try{if(!Ir(u.version,a.version))return[{command:"setStyle",args:[a]}];Ir(u.center,a.center)||s.push({command:"setCenter",args:[a.center]}),Ir(u.state,a.state)||s.push({command:"setGlobalState",args:[a.state]}),Ir(u.centerAltitude,a.centerAltitude)||s.push({command:"setCenterAltitude",args:[a.centerAltitude]}),Ir(u.zoom,a.zoom)||s.push({command:"setZoom",args:[a.zoom]}),Ir(u.bearing,a.bearing)||s.push({command:"setBearing",args:[a.bearing]}),Ir(u.pitch,a.pitch)||s.push({command:"setPitch",args:[a.pitch]}),Ir(u.roll,a.roll)||s.push({command:"setRoll",args:[a.roll]}),Ir(u.sprite,a.sprite)||s.push({command:"setSprite",args:[a.sprite]}),Ir(u.glyphs,a.glyphs)||s.push({command:"setGlyphs",args:[a.glyphs]}),Ir(u.transition,a.transition)||s.push({command:"setTransition",args:[a.transition]}),Ir(u.light,a.light)||s.push({command:"setLight",args:[a.light]}),Ir(u.terrain,a.terrain)||s.push({command:"setTerrain",args:[a.terrain]}),Ir(u.sky,a.sky)||s.push({command:"setSky",args:[a.sky]}),Ir(u.projection,a.projection)||s.push({command:"setProjection",args:[a.projection]});const f={},g=[];(function(b,C,I,j){let V;for(V in C=C||{},b=b||{})Object.prototype.hasOwnProperty.call(b,V)&&(Object.prototype.hasOwnProperty.call(C,V)||yn(V,I,j));for(V in C)Object.prototype.hasOwnProperty.call(C,V)&&(Object.prototype.hasOwnProperty.call(b,V)?Ir(b[V],C[V])||(b[V].type==="geojson"&&C[V].type==="geojson"&&ur(b,C,V)?Zr(I,{command:"setGeoJSONSourceData",args:[V,C[V].data]}):ln(V,C,I,j)):Vn(V,C,I))})(u.sources,a.sources,g,f);const x=[];u.layers&&u.layers.forEach((b=>{"source"in b&&f[b.source]?s.push({command:"removeLayer",args:[b.id]}):x.push(b)})),s=s.concat(g),(function(b,C,I){C=C||[];const j=(b=b||[]).map(Ye),V=C.map(Ye),G=b.reduce(mt,{}),H=C.reduce(mt,{}),X=j.slice(),ee=Object.create(null);let ie,se,fe,Pe,me;for(let ge=0,Ce=0;ge<j.length;ge++)ie=j[ge],Object.prototype.hasOwnProperty.call(H,ie)?Ce++:(Zr(I,{command:"removeLayer",args:[ie]}),X.splice(X.indexOf(ie,Ce),1));for(let ge=0,Ce=0;ge<V.length;ge++)ie=V[V.length-1-ge],X[X.length-1-ge]!==ie&&(Object.prototype.hasOwnProperty.call(G,ie)?(Zr(I,{command:"removeLayer",args:[ie]}),X.splice(X.lastIndexOf(ie,X.length-Ce),1)):Ce++,Pe=X[X.length-ge],Zr(I,{command:"addLayer",args:[H[ie],Pe]}),X.splice(X.length-ge,0,ie),ee[ie]=!0);for(let ge=0;ge<V.length;ge++)if(ie=V[ge],se=G[ie],fe=H[ie],!ee[ie]&&!Ir(se,fe))if(Ir(se.source,fe.source)&&Ir(se["source-layer"],fe["source-layer"])&&Ir(se.type,fe.type)){for(me in Ie(se.layout,fe.layout,I,ie,null,"setLayoutProperty"),Ie(se.paint,fe.paint,I,ie,null,"setPaintProperty"),Ir(se.filter,fe.filter)||Zr(I,{command:"setFilter",args:[ie,fe.filter]}),Ir(se.minzoom,fe.minzoom)&&Ir(se.maxzoom,fe.maxzoom)||Zr(I,{command:"setLayerZoomRange",args:[ie,fe.minzoom,fe.maxzoom]}),se)Object.prototype.hasOwnProperty.call(se,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Ie(se[me],fe[me],I,ie,me.slice(6),"setPaintProperty"):Ir(se[me],fe[me])||Zr(I,{command:"setLayerProperty",args:[ie,me,fe[me]]}));for(me in fe)Object.prototype.hasOwnProperty.call(fe,me)&&!Object.prototype.hasOwnProperty.call(se,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Ie(se[me],fe[me],I,ie,me.slice(6),"setPaintProperty"):Ir(se[me],fe[me])||Zr(I,{command:"setLayerProperty",args:[ie,me,fe[me]]}))}else Zr(I,{command:"removeLayer",args:[ie]}),Pe=X[X.lastIndexOf(ie)+1],Zr(I,{command:"addLayer",args:[fe,Pe]})})(x,a.layers,s)}catch(f){console.warn("Unable to compute style diff:",f),s=[{command:"setStyle",args:[a]}]}return s},d.bX=function(u){const a=[],s=u.id;return s===void 0&&a.push({message:`layers.${s}: missing required property "id"`}),u.render===void 0&&a.push({message:`layers.${s}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&a.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),a},d.bY=Lt,d.bZ=ir,d.b_=class extends Fa{constructor(u,a){super(u,a),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},d.ba=function(u,a,s){return u[0]=a[0]*s,u[1]=a[1]*s,u[2]=a[2]*s,u[3]=a[3]*s,u},d.bb=function(u,a){return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]+u[3]},d.bc=vM,d.bd=Ng,d.be=function(u,a,s,f,g){var x=1/Math.tan(a/2);if(u[0]=x/s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=x,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,g!=null&&g!==1/0){var b=1/(f-g);u[10]=(g+f)*b,u[14]=2*g*f*b}else u[10]=-1,u[14]=-2*f;return u},d.bf=function(u){var a=new re(16);return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a},d.bg=function(u,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[0],b=a[1],C=a[2],I=a[3],j=a[4],V=a[5],G=a[6],H=a[7];return a!==u&&(u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[0]=x*g+j*f,u[1]=b*g+V*f,u[2]=C*g+G*f,u[3]=I*g+H*f,u[4]=j*g-x*f,u[5]=V*g-b*f,u[6]=G*g-C*f,u[7]=H*g-I*f,u},d.bh=function(u,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[4],b=a[5],C=a[6],I=a[7],j=a[8],V=a[9],G=a[10],H=a[11];return a!==u&&(u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]),u[4]=x*g+j*f,u[5]=b*g+V*f,u[6]=C*g+G*f,u[7]=I*g+H*f,u[8]=j*g-x*f,u[9]=V*g-b*f,u[10]=G*g-C*f,u[11]=H*g-I*f,u},d.bi=function(){const u=new Float32Array(16);return ae(u),u},d.bj=function(){const u=new Float64Array(16);return ae(u),u},d.bk=function(){return new Float64Array(16)},d.bl=function(u,a,s){const f=new Float64Array(4);return gt(f,u,a-90,s),f},d.bm=function(u,a,s,f){var g,x,b,C,I,j=a[0],V=a[1],G=a[2],H=a[3],X=s[0],ee=s[1],ie=s[2],se=s[3];return(x=j*X+V*ee+G*ie+H*se)<0&&(x=-x,X=-X,ee=-ee,ie=-ie,se=-se),1-x>Q?(g=Math.acos(x),b=Math.sin(g),C=Math.sin((1-f)*g)/b,I=Math.sin(f*g)/b):(C=1-f,I=f),u[0]=C*j+I*X,u[1]=C*V+I*ee,u[2]=C*G+I*ie,u[3]=C*H+I*se,u},d.bn=function(u){const a=new Float64Array(9);(function(x,b){var C=b[0],I=b[1],j=b[2],V=b[3],G=C+C,H=I+I,X=j+j,ee=C*G,ie=I*G,se=I*H,fe=j*G,Pe=j*H,me=j*X,ge=V*G,Ce=V*H,Re=V*X;x[0]=1-se-me,x[3]=ie-Re,x[6]=fe+Ce,x[1]=ie+Re,x[4]=1-ee-me,x[7]=Pe-ge,x[2]=fe-Ce,x[5]=Pe+ge,x[8]=1-ee-se})(a,u);const s=zt(-Math.asin(tr(a[2],-1,1)));let f,g;return Math.hypot(a[5],a[8])<.001?(f=0,g=-zt(Math.atan2(a[3],a[4]))):(f=zt(a[5]===0&&a[8]===0?0:Math.atan2(a[5],a[8])),g=zt(a[1]===0&&a[0]===0?0:Math.atan2(a[1],a[0]))),{roll:f,pitch:s+90,bearing:g}},d.bo=function(u,a){return u.roll==a.roll&&u.pitch==a.pitch&&u.bearing==a.bearing},d.bp=Br,d.bq=dl,d.br=ih,d.bs=ah,d.bt=oc,d.bu=et,d.bv=Mt,d.bw=Ji,d.bx=function(u,a,s,f,g){return et(f,g,tr((u-a)/(s-a),0,1))},d.by=Oe,d.bz=function(){return new Float64Array(3)},d.c=Ae,d.c$=function(u,a,s,f,g){return o(this,void 0,void 0,(function*(){if(K())try{return yield Be(u,a,s,f,g)}catch{}return(function(x,b,C,I,j){const V=x.width,G=x.height;rt&&bt||(rt=new OffscreenCanvas(V,G),bt=rt.getContext("2d",{willReadFrequently:!0})),rt.width=V,rt.height=G,bt.drawImage(x,0,0,V,G);const H=bt.getImageData(b,C,I,j);return bt.clearRect(0,0,V,G),H.data})(u,a,s,f,g)}))},d.c0=class extends Fa{constructor(u,a){super(u,a),this.current=oo}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let a=1;a<16;a++)if(u[a]!==this.current[a]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},d.c1=Fs,d.c2=class extends Fa{constructor(u,a){super(u,a),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},d.c3=class extends Fa{constructor(u,a){super(u,a),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},d.c4=te,d.c5=function(u,a){var s=Math.sin(a),f=Math.cos(a);return u[0]=f,u[1]=s,u[2]=0,u[3]=-s,u[4]=f,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},d.c6=function(u,a,s){var f=a[0],g=a[1],x=a[2];return u[0]=f*s[0]+g*s[3]+x*s[6],u[1]=f*s[1]+g*s[4]+x*s[7],u[2]=f*s[2]+g*s[5]+x*s[8],u},d.c7=function(u,a,s,f,g,x,b){var C=1/(a-s),I=1/(f-g),j=1/(x-b);return u[0]=-2*C,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*I,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*j,u[11]=0,u[12]=(a+s)*C,u[13]=(g+f)*I,u[14]=(b+x)*j,u[15]=1,u},d.c8=class extends Fa{constructor(u,a){super(u,a),this.current=new Array}set(u){if(u!=this.current){this.current=u;const a=new Float32Array(4*u.length);for(let s=0;s<u.length;s++)a[4*s]=u[s].r,a[4*s+1]=u[s].g,a[4*s+2]=u[s].b,a[4*s+3]=u[s].a;this.gl.uniform4fv(this.location,a)}}},d.c9=class extends Fa{constructor(u,a){super(u,a),this.current=new Array}set(u){if(u!=this.current){this.current=u;const a=new Float32Array(u);this.gl.uniform1fv(this.location,a)}}},d.cA=function(u,a){return ze[a]&&"touches"in u},d.cB=function(u){return ze[u]||ue[u]},d.cC=function(u,a,s){var f=a[0],g=a[1];return u[0]=s[0]*f+s[4]*g+s[12],u[1]=s[1]*f+s[5]*g+s[13],u},d.cD=function(u,a){const{x:s,y:f}=Pv.fromLngLat(a);return!(u<0||u>25||f<0||f>=1||s<0||s>=1)},d.cE=function(u,a){return u[0]=a[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=a[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=a[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},d.cF=class extends eu{},d.cG=NV,d.cI=Ve,d.cJ=function(u,a){Ae.REGISTERED_PROTOCOLS[u]=a},d.cK=function(u){delete Ae.REGISTERED_PROTOCOLS[u]},d.cL=function(u,a){const s={};for(let g=0;g<u.length;g++){const x=a&&a[u[g].id]||ol(u[g]);a&&(a[u[g].id]=x);let b=s[x];b||(b=s[x]=[]),b.push(u[g])}const f=[];for(const g in s)f.push(s[g]);return f},d.cM=Jt,d.cN=xM,d.cO=QM,d.cP=lt,d.cQ=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=Qe/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const a=u.bucket.layers[0],s=a.layout,f=a._unevaluatedLayout._values,g={layoutIconSize:f["icon-size"].possiblyEvaluate(new Mn(u.bucket.zoom+1),u.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Mn(u.bucket.zoom+1),u.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Mn(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=u.bucket.textSizeData;g.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Mn(j),u.canonical),f["text-size"].possiblyEvaluate(new Mn(V),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=u.bucket.iconSizeData;g.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Mn(j),u.canonical),f["icon-size"].possiblyEvaluate(new Mn(V),u.canonical)]}const x=s.get("text-line-height")*aa,b=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",C=s.get("text-keep-upright"),I=s.get("text-size");for(const j of u.bucket.features){const V=s.get("text-font").evaluate(j,{},u.canonical).join(","),G=I.evaluate(j,{},u.canonical),H=g.layoutTextSize.evaluate(j,{},u.canonical),X=g.layoutIconSize.evaluate(j,{},u.canonical),ee={horizontal:{},vertical:void 0},ie=j.text;let se,fe=[0,0];if(ie){const ge=ie.toString(),Ce=s.get("text-letter-spacing").evaluate(j,{},u.canonical)*aa,Re=Yp(ge)?Ce:0,nt=s.get("text-anchor").evaluate(j,{},u.canonical),kt=hk(a,j,u.canonical);if(!kt){const Rt=s.get("text-radial-offset").evaluate(j,{},u.canonical);fe=Rt?ck(nt,[Rt*aa,K1]):s.get("text-offset").evaluate(j,{},u.canonical).map((Ct=>Ct*aa))}let _t=b?"center":s.get("text-justify").evaluate(j,{},u.canonical);const Ot=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(j,{},u.canonical)*aa:1/0,Kt=()=>{u.bucket.allowVerticalPlacement&&Xl(ge)&&(ee.vertical=ft(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,Ot,x,nt,"left",Re,fe,d.az.vertical,!0,H,G))};if(!b&&kt){const Rt=new Set;if(_t==="auto")for(let dt=0;dt<kt.values.length;dt+=2)Rt.add(X1(kt.values[dt]));else Rt.add(_t);let Ct=!1;for(const dt of Rt)if(!ee.horizontal[dt])if(Ct)ee.horizontal[dt]=ee.horizontal[0];else{const sr=ft(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,Ot,x,"center",dt,Re,fe,d.az.horizontal,!1,H,G);sr&&(ee.horizontal[dt]=sr,Ct=sr.positionedLines.length===1)}Kt()}else{_t==="auto"&&(_t=X1(nt));const Rt=ft(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,Ot,x,nt,_t,Re,fe,d.az.horizontal,!1,H,G);Rt&&(ee.horizontal[_t]=Rt),Kt(),Xl(ge)&&b&&C&&(ee.vertical=ft(ie,u.glyphMap,u.glyphPositions,u.imagePositions,V,Ot,x,nt,_t,Re,fe,d.az.vertical,!1,H,G))}}let Pe=!1;if(j.icon&&j.icon.name){const ge=u.imageMap[j.icon.name];ge&&(se=lh(u.imagePositions[j.icon.name],s.get("icon-offset").evaluate(j,{},u.canonical),s.get("icon-anchor").evaluate(j,{},u.canonical)),Pe=!!ge.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Pe:u.bucket.sdfIcons!==Pe&&Tr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ge.pixelRatio!==u.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const me=fk(ee.horizontal)||ee.vertical;u.bucket.iconsInText=!!me&&me.iconsInText,(me||se)&&jV(u.bucket,j,ee,se,u.imageMap,g,H,X,fe,Pe,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},d.cR=lm,d.cS=yv,d.cT=Ff,d.cU=function(u){const a=new p;return(function(s,f){for(const g in s.layers)f.writeMessage(3,wV,s.layers[g])})(u,a),a.finish()},d.cV=function(u,a,s,f,g,x){let b=tk(u,a,s,g,0);return b=tk(b,a,f,x,1),b},d.cW=class{constructor(u){this.maxEntries=u,this.map=new Map}get(u){const a=this.map.get(u);return a!==void 0&&(this.map.delete(u),this.map.set(u,a)),a}set(u,a){if(this.map.has(u))this.map.delete(u);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(u,a)}clear(){this.map.clear()}},d.cX=b0,d.cY=p,d.cZ=XM,d.c_=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},d.ca=class extends cl{},d.cb=A0,d.cc=class extends Wn{},d.cd=am,d.ce=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},d.cf=lv,d.cg=function(u,a,s){var f=a[0],g=a[1],x=a[2],b=s[3]*f+s[7]*g+s[11]*x+s[15];return u[0]=(s[0]*f+s[4]*g+s[8]*x+s[12])/(b=b||1),u[1]=(s[1]*f+s[5]*g+s[9]*x+s[13])/b,u[2]=(s[2]*f+s[6]*g+s[10]*x+s[14])/b,u},d.ch=class extends Yu{},d.ci=class extends i{},d.cj=function(u,a){return u[0]===a[0]&&u[1]===a[1]&&u[2]===a[2]&&u[3]===a[3]&&u[4]===a[4]&&u[5]===a[5]&&u[6]===a[6]&&u[7]===a[7]&&u[8]===a[8]&&u[9]===a[9]&&u[10]===a[10]&&u[11]===a[11]&&u[12]===a[12]&&u[13]===a[13]&&u[14]===a[14]&&u[15]===a[15]},d.ck=function(u,a){var s=u[0],f=u[1],g=u[2],x=u[3],b=u[4],C=u[5],I=u[6],j=u[7],V=u[8],G=u[9],H=u[10],X=u[11],ee=u[12],ie=u[13],se=u[14],fe=u[15],Pe=a[0],me=a[1],ge=a[2],Ce=a[3],Re=a[4],nt=a[5],kt=a[6],_t=a[7],Ot=a[8],Kt=a[9],Rt=a[10],Ct=a[11],dt=a[12],sr=a[13],nr=a[14],lr=a[15];return Math.abs(s-Pe)<=Q*Math.max(1,Math.abs(s),Math.abs(Pe))&&Math.abs(f-me)<=Q*Math.max(1,Math.abs(f),Math.abs(me))&&Math.abs(g-ge)<=Q*Math.max(1,Math.abs(g),Math.abs(ge))&&Math.abs(x-Ce)<=Q*Math.max(1,Math.abs(x),Math.abs(Ce))&&Math.abs(b-Re)<=Q*Math.max(1,Math.abs(b),Math.abs(Re))&&Math.abs(C-nt)<=Q*Math.max(1,Math.abs(C),Math.abs(nt))&&Math.abs(I-kt)<=Q*Math.max(1,Math.abs(I),Math.abs(kt))&&Math.abs(j-_t)<=Q*Math.max(1,Math.abs(j),Math.abs(_t))&&Math.abs(V-Ot)<=Q*Math.max(1,Math.abs(V),Math.abs(Ot))&&Math.abs(G-Kt)<=Q*Math.max(1,Math.abs(G),Math.abs(Kt))&&Math.abs(H-Rt)<=Q*Math.max(1,Math.abs(H),Math.abs(Rt))&&Math.abs(X-Ct)<=Q*Math.max(1,Math.abs(X),Math.abs(Ct))&&Math.abs(ee-dt)<=Q*Math.max(1,Math.abs(ee),Math.abs(dt))&&Math.abs(ie-sr)<=Q*Math.max(1,Math.abs(ie),Math.abs(sr))&&Math.abs(se-nr)<=Q*Math.max(1,Math.abs(se),Math.abs(nr))&&Math.abs(fe-lr)<=Q*Math.max(1,Math.abs(fe),Math.abs(lr))},d.cl=function(u,a){return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u},d.cm=u=>u.type==="symbol",d.cn=u=>u.type==="circle",d.co=u=>u.type==="heatmap",d.cp=u=>u.type==="line",d.cq=u=>u.type==="fill",d.cr=u=>u.type==="fill-extrusion",d.cs=u=>u.type==="hillshade",d.ct=u=>u.type==="color-relief",d.cu=u=>u.type==="background",d.cv=u=>u.type==="custom",d.cw=Dt,d.cx=function(u,a,s){const f=je(a.x-s.x,a.y-s.y),g=je(u.x-s.x,u.y-s.y),x=Math.atan2(f[0]*g[1]-f[1]*g[0],(function(b,C){return b[0]*C[0]+b[1]*C[1]})(f,g));return zt(x)},d.cy=Ke,d.cz=function(u,a){return ue[a]&&(u instanceof MouseEvent||u instanceof WheelEvent)},d.d=Pt,d.d0=hv,d.d1=S,d.d2=class{constructor(u,a){this.layers={[Tv]:this},this.name=Tv,this.version=a?a.version:1,this.extent=a?a.extent:4096,this.length=u.length,this.features=u}feature(u){return new bV(this.features[u],this.extent)}},d.d3=Vu,d.d4=ll,d.e=$t,d.f=u=>o(void 0,void 0,void 0,(function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(a)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),d.g=Je,d.h=u=>new Promise(((a,s)=>{const f=new Image;f.onload=()=>{a(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=Ii}))},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(u)],{type:"image/png"});f.src=u.byteLength?URL.createObjectURL(g):Ii})),d.i=tn,d.j=(u,a)=>At($t(u,{type:"json"}),a),d.k=Kr,d.l=Mr,d.m=At,d.n=(u,a)=>At($t(u,{type:"arrayBuffer"}),a),d.o=function(u){return new p(u).readFields(Ut,[])},d.p=Pr,d.q=function(u){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(u))},d.r=Rf,d.s=rr,d.t=xi,d.u=tt,d.v=Os,d.w=Tr,d.x=Ql,d.y=Zl,d.z=Zc})),l("worker",["./shared"],(function(d){class o{constructor(ue,le){this.keyCache={},ue&&this.replace(ue,le)}replace(ue,le){this._layerConfigs={},this._layers={},this.update(ue,[],le)}update(ue,le,pe){for(const Ae of ue){this._layerConfigs[Ae.id]=Ae;const Je=this._layers[Ae.id]=d.bT(Ae,pe);Je._featureFilter=d.aj(Je.filter,pe),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of le)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const Me=d.cL(Object.values(this._layerConfigs),this.keyCache);for(const Ae of Me){const Je=Ae.map((Xt=>this._layers[Xt.id])),Ze=Je[0];if(Ze.isHidden())continue;const Ve=Ze.source||"";let it=this.familiesBySource[Ve];it||(it=this.familiesBySource[Ve]={});const At=Ze.sourceLayer||d.ai;let Pt=it[At];Pt||(Pt=it[At]=[]),Pt.push(Je)}}}class _{constructor(ue){const le={},pe=[];for(const Ze in ue){const Ve=ue[Ze],it=le[Ze]={};for(const At in Ve){const Pt=Ve[+At];if(!Pt||Pt.bitmap.width===0||Pt.bitmap.height===0)continue;const Xt={x:0,y:0,w:Pt.bitmap.width+2,h:Pt.bitmap.height+2};pe.push(Xt),it[At]={rect:Xt,metrics:Pt.metrics}}}const{w:Me,h:Ae}=d.p(pe),Je=new d.r({width:Me||1,height:Ae||1});for(const Ze in ue){const Ve=ue[Ze];for(const it in Ve){const At=Ve[+it];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const Pt=le[Ze][it].rect;d.r.copy(At.bitmap,Je,{x:0,y:0},{x:Pt.x+1,y:Pt.y+1},At.bitmap)}}this.image=Je,this.positions=le}}d.cM("GlyphAtlas",_);class S{constructor(ue){this.tileID=new d.a2(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.uid=ue.uid,this.zoom=ue.zoom,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ue.showCollisionBoxes,this.collectResourceTiming=!!ue.collectResourceTiming,this.returnDependencies=!!ue.returnDependencies,this.promoteId=ue.promoteId,this.inFlightDependencies=[]}parse(ue,le,pe,Me,Ae){return d._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ue,this.collisionBoxArray=new d.ag;const Je=new d.cN(Object.keys(ue.layers).sort()),Ze=new d.cO(this.tileID,this.promoteId);Ze.bucketLayerIDs=[];const Ve={},it={featureIndex:Ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:pe,subdivisionGranularity:Ae},At=le.familiesBySource[this.source];for(const ur in At){const Ie=ue.layers[ur];if(!Ie)continue;Ie.version===1&&d.w(`Vector tile source "${this.source}" layer "${ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ye=Je.encode(ur),mt=[];for(let We=0;We<Ie.length;We++){const Gt=Ie.feature(We),cr=Ze.getId(Gt,ur);mt.push({feature:Gt,id:cr,index:We,sourceLayerIndex:Ye})}for(const We of At[ur]){const Gt=We[0];Gt.source!==this.source&&d.w(`layer.source = ${Gt.source} does not equal this.source = ${this.source}`),Gt.isHidden(this.zoom,!0)||(P(We,this.zoom,pe),(Ve[Gt.id]=Gt.createBucket({index:Ze.bucketLayerIDs.length,layers:We,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ye,sourceID:this.source})).populate(mt,it,this.tileID.canonical),Ze.bucketLayerIDs.push(We.map((cr=>cr.id))))}}const Pt=d.bY(it.glyphDependencies,(ur=>Object.keys(ur).map(Number)));this.inFlightDependencies.forEach((ur=>ur==null?void 0:ur.abort())),this.inFlightDependencies=[];let Xt=Promise.resolve({});if(Object.keys(Pt).length){const ur=new AbortController;this.inFlightDependencies.push(ur),Xt=Me.sendAsync({type:"GG",data:{stacks:Pt,source:this.source,tileID:this.tileID,type:"glyphs"}},ur)}const or=Object.keys(it.iconDependencies);let Mr=Promise.resolve({});if(or.length){const ur=new AbortController;this.inFlightDependencies.push(ur),Mr=Me.sendAsync({type:"GI",data:{icons:or,source:this.source,tileID:this.tileID,type:"icons"}},ur)}const Kr=Object.keys(it.patternDependencies);let Ur=Promise.resolve({});if(Kr.length){const ur=new AbortController;this.inFlightDependencies.push(ur),Ur=Me.sendAsync({type:"GI",data:{icons:Kr,source:this.source,tileID:this.tileID,type:"patterns"}},ur)}const tt=it.dashDependencies;let sn=Promise.resolve({});if(Object.keys(tt).length){const ur=new AbortController;this.inFlightDependencies.push(ur),sn=Me.sendAsync({type:"GDA",data:{dashes:tt}},ur)}const[ti,Ir,Zr,Vn]=yield Promise.all([Xt,Mr,Ur,sn]),yn=new _(ti),ln=new d.cP(Ir,Zr);for(const ur in Ve){const Ie=Ve[ur];Ie instanceof d.ah?(P(Ie.layers,this.zoom,pe),d.cQ({bucket:Ie,glyphMap:ti,glyphPositions:yn.positions,imageMap:Ir,imagePositions:ln.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:it.subdivisionGranularity})):Ie.hasDependencies&&(Ie instanceof d.cR||Ie instanceof d.cS||Ie instanceof d.cT)&&(P(Ie.layers,this.zoom,pe),Ie.addFeatures(it,this.tileID.canonical,ln.patternPositions,Vn))}return this.status="done",{buckets:Object.values(Ve).filter((ur=>!ur.isEmpty())),featureIndex:Ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,imageAtlas:ln,dashPositions:Vn,glyphMap:this.returnDependencies?ti:null,iconMap:this.returnDependencies?Ir:null,glyphPositions:this.returnDependencies?yn.positions:null}}))}}function P(ze,ue,le){const pe=new d.H(ue);for(const Me of ze)Me.recalculate(pe,le)}class M{constructor(ue,le,pe,Me,Ae){this.type=ue,this.properties=pe||{},this.extent=Ae,this.pointsArray=le,this.id=Me}loadGeometry(){return this.pointsArray.map((ue=>ue.map((le=>new d.P(le.x,le.y)))))}}class O{constructor(ue,le,pe){this.version=2,this._myFeatures=ue,this.name=le,this.length=ue.length,this.extent=pe}feature(ue){return this._myFeatures[ue]}}class z{constructor(){this.layers={}}addLayer(ue){this.layers[ue.name]=ue}}function B(ze){let ue=d.cU(ze);return ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),{vectorTile:ze,rawData:ue.buffer}}function F(ze,ue,le){const{extent:pe}=ze,Me=Math.pow(2,le.z-ue.z),Ae=(le.x-ue.x*Me)*pe,Je=(le.y-ue.y*Me)*pe,Ze=[];for(let Ve=0;Ve<ze.length;Ve++){const it=ze.feature(Ve);let At=it.loadGeometry();for(const Xt of At)for(const or of Xt)or.x=or.x*Me-Ae,or.y=or.y*Me-Je;const Pt=128;At=d.cV(At,it.type,-Pt,-Pt,pe+Pt,pe+Pt),At.length!==0&&Ze.push(new M(it.type,At,it.properties,it.id,pe))}return new O(Ze,ze.name,pe)}class L{constructor(ue,le,pe){this.actor=ue,this.layerIndex=le,this.availableImages=pe,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new d.cW(1e3)}loadVectorTile(ue,le){return d._(this,void 0,void 0,(function*(){const pe=yield d.n(ue.request,le);try{return{vectorTile:ue.encoding!=="mlt"?new d.cX(new d.cY(pe.data)):new d.cZ(pe.data),rawData:pe.data,cacheControl:pe.cacheControl,expires:pe.expires}}catch(Me){const Ae=new Uint8Array(pe.data);let Je=`Unable to parse the tile at ${ue.request.url}, `;throw Je+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Me.message}`,new Error(Je)}}))}loadTile(ue){return d._(this,void 0,void 0,(function*(){const{uid:le,overzoomParameters:pe}=ue;pe&&(ue.request=pe.overzoomRequest);const Me=!!(ue&&ue.request&&ue.request.collectResourceTiming)&&new d.c_(ue.request),Ae=new S(ue);this.loading[le]=Ae;const Je=new AbortController;Ae.abort=Je;try{const Ze=yield this.loadVectorTile(ue,Je);if(delete this.loading[le],!Ze)return null;if(pe){const Xt=this._getOverzoomTile(ue,Ze.vectorTile);Ze.rawData=Xt.rawData,Ze.vectorTile=Xt.vectorTile}const Ve=Ze.rawData,it={};Ze.expires&&(it.expires=Ze.expires),Ze.cacheControl&&(it.cacheControl=Ze.cacheControl);const At={};if(Me){const Xt=Me.finish();Xt&&(At.resourceTiming=JSON.parse(JSON.stringify(Xt)))}Ae.vectorTile=Ze.vectorTile;const Pt=Ae.parse(Ze.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);this.loaded[le]=Ae,this.fetching[le]={rawTileData:Ve,cacheControl:it,resourceTiming:At};try{const Xt=yield Pt;return d.e({rawTileData:Ve.slice(0),encoding:ue.encoding},Xt,it,At)}finally{delete this.fetching[le]}}catch(Ze){throw delete this.loading[le],Ae.status="done",this.loaded[le]=Ae,Ze}}))}_getOverzoomTile(ue,le){const{tileID:pe,source:Me,overzoomParameters:Ae}=ue,{maxZoomTileID:Je}=Ae,Ze=`${Je.key}_${pe.key}`,Ve=this.overzoomedTileResultCache.get(Ze);if(Ve)return Ve;const it=new z,At=this.layerIndex.familiesBySource[Me];for(const Xt in At){const or=le.layers[Xt];if(!or)continue;const Mr=F(or,Je,pe.canonical);Mr.length>0&&it.addLayer(Mr)}const Pt=B(it);return this.overzoomedTileResultCache.set(Ze,Pt),Pt}reloadTile(ue){return d._(this,void 0,void 0,(function*(){const le=ue.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const pe=this.loaded[le];if(pe.showCollisionBoxes=ue.showCollisionBoxes,pe.status==="parsing"){const Me=yield pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);let Ae;if(this.fetching[le]){const{rawTileData:Je,cacheControl:Ze,resourceTiming:Ve}=this.fetching[le];delete this.fetching[le],Ae=d.e({rawTileData:Je.slice(0),encoding:ue.encoding},Me,Ze,Ve)}else Ae=Me;return Ae}if(pe.status==="done"&&pe.vectorTile)return pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity)}))}abortTile(ue){return d._(this,void 0,void 0,(function*(){const le=this.loading,pe=ue.uid;le&&le[pe]&&le[pe].abort&&(le[pe].abort.abort(),delete le[pe])}))}removeTile(ue){return d._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ue.uid]&&delete this.loaded[ue.uid]}))}}class K{constructor(){this.loaded={}}loadTile(ue){return d._(this,void 0,void 0,(function*(){const{uid:le,encoding:pe,rawImageData:Me,redFactor:Ae,greenFactor:Je,blueFactor:Ze,baseShift:Ve}=ue,it=Me.width+2,At=Me.height+2,Pt=d.b(Me)?new d.R({width:it,height:At},yield d.c$(Me,-1,-1,it,At)):Me,Xt=new d.d0(le,Pt,pe,Ae,Je,Ze,Ve);return this.loaded=this.loaded||{},this.loaded[le]=Xt,Xt}))}removeTile(ue){const le=this.loaded,pe=ue.uid;le&&le[pe]&&delete le[pe]}}var Q,re,te=(function(){if(re)return Q;function ze(le,pe){if(le.length!==0){ue(le[0],pe);for(var Me=1;Me<le.length;Me++)ue(le[Me],!pe)}}function ue(le,pe){for(var Me=0,Ae=0,Je=0,Ze=le.length,Ve=Ze-1;Je<Ze;Ve=Je++){var it=(le[Je][0]-le[Ve][0])*(le[Ve][1]+le[Je][1]),At=Me+it;Ae+=Math.abs(Me)>=Math.abs(it)?Me-At+it:it-At+Me,Me=At}Me+Ae>=0!=!!pe&&le.reverse()}return re=1,Q=function le(pe,Me){var Ae,Je=pe&&pe.type;if(Je==="FeatureCollection")for(Ae=0;Ae<pe.features.length;Ae++)le(pe.features[Ae],Me);else if(Je==="GeometryCollection")for(Ae=0;Ae<pe.geometries.length;Ae++)le(pe.geometries[Ae],Me);else if(Je==="Feature")le(pe.geometry,Me);else if(Je==="Polygon")ze(pe.coordinates,Me);else if(Je==="MultiPolygon")for(Ae=0;Ae<pe.coordinates.length;Ae++)ze(pe.coordinates[Ae],Me);return pe}})(),ae=d.d1(te);const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},ne=Math.fround||(be=new Float32Array(1),ze=>(be[0]=+ze,be[0]));var be;class xe{constructor(ue){this.options=Object.assign(Object.create(he),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:le,minZoom:pe,maxZoom:Me}=this.options;le&&console.time("total time");const Ae=`prepare ${ue.length} points`;le&&console.time(Ae),this.points=ue;const Je=[];for(let Ve=0;Ve<ue.length;Ve++){const it=ue[Ve];if(!it.geometry)continue;const[At,Pt]=it.geometry.coordinates,Xt=ne(Ne(At)),or=ne(Xe(Pt));Je.push(Xt,or,1/0,Ve,-1,1),this.options.reduce&&Je.push(0)}let Ze=this.trees[Me+1]=this._createTree(Je);le&&console.timeEnd(Ae);for(let Ve=Me;Ve>=pe;Ve--){const it=+Date.now();Ze=this.trees[Ve]=this._createTree(this._cluster(Ze,Ve)),le&&console.log("z%d: %d clusters in %dms",Ve,Ze.numItems,+Date.now()-it)}return le&&console.timeEnd("total time"),this}getClusters(ue,le){let pe=((ue[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,ue[1]));let Ae=ue[2]===180?180:((ue[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)pe=-180,Ae=180;else if(pe>Ae){const Pt=this.getClusters([pe,Me,180,Je],le),Xt=this.getClusters([-180,Me,Ae,Je],le);return Pt.concat(Xt)}const Ze=this.trees[this._limitZoom(le)],Ve=Ze.range(Ne(pe),Xe(Je),Ne(Ae),Xe(Me)),it=Ze.data,At=[];for(const Pt of Ve){const Xt=this.stride*Pt;At.push(it[Xt+5]>1?$e(it,Xt,this.clusterProps):this.points[it[Xt+3]])}return At}getChildren(ue){const le=this._getOriginId(ue),pe=this._getOriginZoom(ue),Me="No cluster with the specified id.",Ae=this.trees[pe];if(!Ae)throw new Error(Me);const Je=Ae.data;if(le*this.stride>=Je.length)throw new Error(Me);const Ze=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Ve=Ae.within(Je[le*this.stride],Je[le*this.stride+1],Ze),it=[];for(const At of Ve){const Pt=At*this.stride;Je[Pt+4]===ue&&it.push(Je[Pt+5]>1?$e(Je,Pt,this.clusterProps):this.points[Je[Pt+3]])}if(it.length===0)throw new Error(Me);return it}getLeaves(ue,le,pe){const Me=[];return this._appendLeaves(Me,ue,le=le||10,pe=pe||0,0),Me}getTile(ue,le,pe){const Me=this.trees[this._limitZoom(ue)],Ae=Math.pow(2,ue),{extent:Je,radius:Ze}=this.options,Ve=Ze/Je,it=(pe-Ve)/Ae,At=(pe+1+Ve)/Ae,Pt={features:[]};return this._addTileFeatures(Me.range((le-Ve)/Ae,it,(le+1+Ve)/Ae,At),Me.data,le,pe,Ae,Pt),le===0&&this._addTileFeatures(Me.range(1-Ve/Ae,it,1,At),Me.data,Ae,pe,Ae,Pt),le===Ae-1&&this._addTileFeatures(Me.range(0,it,Ve/Ae,At),Me.data,-1,pe,Ae,Pt),Pt.features.length?Pt:null}getClusterExpansionZoom(ue){let le=this._getOriginZoom(ue)-1;for(;le<=this.options.maxZoom;){const pe=this.getChildren(ue);if(le++,pe.length!==1)break;ue=pe[0].properties.cluster_id}return le}_appendLeaves(ue,le,pe,Me,Ae){const Je=this.getChildren(le);for(const Ze of Je){const Ve=Ze.properties;if(Ve&&Ve.cluster?Ae+Ve.point_count<=Me?Ae+=Ve.point_count:Ae=this._appendLeaves(ue,Ve.cluster_id,pe,Me,Ae):Ae<Me?Ae++:ue.push(Ze),ue.length===pe)break}return Ae}_createTree(ue){const le=new d.aT(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<ue.length;pe+=this.stride)le.add(ue[pe],ue[pe+1]);return le.finish(),le.data=ue,le}_addTileFeatures(ue,le,pe,Me,Ae,Je){for(const Ze of ue){const Ve=Ze*this.stride,it=le[Ve+5]>1;let At,Pt,Xt;if(it)At=Ee(le,Ve,this.clusterProps),Pt=le[Ve],Xt=le[Ve+1];else{const Kr=this.points[le[Ve+3]];At=Kr.properties;const[Ur,tt]=Kr.geometry.coordinates;Pt=Ne(Ur),Xt=Xe(tt)}const or={type:1,geometry:[[Math.round(this.options.extent*(Pt*Ae-pe)),Math.round(this.options.extent*(Xt*Ae-Me))]],tags:At};let Mr;Mr=it||this.options.generateId?le[Ve+3]:this.points[le[Ve+3]].id,Mr!==void 0&&(or.id=Mr),Je.features.push(or)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,le){const{radius:pe,extent:Me,reduce:Ae,minPoints:Je}=this.options,Ze=pe/(Me*Math.pow(2,le)),Ve=ue.data,it=[],At=this.stride;for(let Pt=0;Pt<Ve.length;Pt+=At){if(Ve[Pt+2]<=le)continue;Ve[Pt+2]=le;const Xt=Ve[Pt],or=Ve[Pt+1],Mr=ue.within(Ve[Pt],Ve[Pt+1],Ze),Kr=Ve[Pt+5];let Ur=Kr;for(const tt of Mr){const sn=tt*At;Ve[sn+2]>le&&(Ur+=Ve[sn+5])}if(Ur>Kr&&Ur>=Je){let tt,sn=Xt*Kr,ti=or*Kr,Ir=-1;const Zr=(Pt/At<<5)+(le+1)+this.points.length;for(const Vn of Mr){const yn=Vn*At;if(Ve[yn+2]<=le)continue;Ve[yn+2]=le;const ln=Ve[yn+5];sn+=Ve[yn]*ln,ti+=Ve[yn+1]*ln,Ve[yn+4]=Zr,Ae&&(tt||(tt=this._map(Ve,Pt,!0),Ir=this.clusterProps.length,this.clusterProps.push(tt)),Ae(tt,this._map(Ve,yn)))}Ve[Pt+4]=Zr,it.push(sn/Ur,ti/Ur,1/0,Zr,-1,Ur),Ae&&it.push(Ir)}else{for(let tt=0;tt<At;tt++)it.push(Ve[Pt+tt]);if(Ur>1)for(const tt of Mr){const sn=tt*At;if(!(Ve[sn+2]<=le)){Ve[sn+2]=le;for(let ti=0;ti<At;ti++)it.push(Ve[sn+ti])}}}}return it}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,le,pe){if(ue[le+5]>1){const Je=this.clusterProps[ue[le+6]];return pe?Object.assign({},Je):Je}const Me=this.points[ue[le+3]].properties,Ae=this.options.map(Me);return pe&&Ae===Me?Object.assign({},Ae):Ae}}function $e(ze,ue,le){return{type:"Feature",id:ze[ue+3],properties:Ee(ze,ue,le),geometry:{type:"Point",coordinates:[(pe=ze[ue],360*(pe-.5)),ut(ze[ue+1])]}};var pe}function Ee(ze,ue,le){const pe=ze[ue+5],Me=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Ae=ze[ue+6],Je=Ae===-1?{}:Object.assign({},le[Ae]);return Object.assign(Je,{cluster:!0,cluster_id:ze[ue+3],point_count:pe,point_count_abbreviated:Me})}function Ne(ze){return ze/360+.5}function Xe(ze){const ue=Math.sin(ze*Math.PI/180),le=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return le<0?0:le>1?1:le}function ut(ze){const ue=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function pt(ze,ue,le,pe){let Me=pe;const Ae=ue+(le-ue>>1);let Je,Ze=le-ue;const Ve=ze[ue],it=ze[ue+1],At=ze[le],Pt=ze[le+1];for(let Xt=ue+3;Xt<le;Xt+=3){const or=gt(ze[Xt],ze[Xt+1],Ve,it,At,Pt);if(or>Me)Je=Xt,Me=or;else if(or===Me){const Mr=Math.abs(Xt-Ae);Mr<Ze&&(Je=Xt,Ze=Mr)}}Me>pe&&(Je-ue>3&&pt(ze,ue,Je,pe),ze[Je+2]=Me,le-Je>3&&pt(ze,Je,le,pe))}function gt(ze,ue,le,pe,Me,Ae){let Je=Me-le,Ze=Ae-pe;if(Je!==0||Ze!==0){const Ve=((ze-le)*Je+(ue-pe)*Ze)/(Je*Je+Ze*Ze);Ve>1?(le=Me,pe=Ae):Ve>0&&(le+=Je*Ve,pe+=Ze*Ve)}return Je=ze-le,Ze=ue-pe,Je*Je+Ze*Ze}function wt(ze,ue,le,pe){const Me={id:ze??null,type:ue,geometry:le,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")je(Me,le);else if(ue==="Polygon")je(Me,le[0]);else if(ue==="MultiLineString")for(const Ae of le)je(Me,Ae);else if(ue==="MultiPolygon")for(const Ae of le)je(Me,Ae[0]);return Me}function je(ze,ue){for(let le=0;le<ue.length;le+=3)ze.minX=Math.min(ze.minX,ue[le]),ze.minY=Math.min(ze.minY,ue[le+1]),ze.maxX=Math.max(ze.maxX,ue[le]),ze.maxY=Math.max(ze.maxY,ue[le+1])}function Qe(ze,ue,le,pe){if(!ue.geometry)return;const Me=ue.geometry.coordinates;if(Me&&Me.length===0)return;const Ae=ue.geometry.type,Je=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let Ze=[],Ve=ue.id;if(le.promoteId?Ve=ue.properties[le.promoteId]:le.generateId&&(Ve=pe||0),Ae==="Point")yt(Me,Ze);else if(Ae==="MultiPoint")for(const it of Me)yt(it,Ze);else if(Ae==="LineString")Oe(Me,Ze,Je,!1);else if(Ae==="MultiLineString"){if(le.lineMetrics){for(const it of Me)Ze=[],Oe(it,Ze,Je,!1),ze.push(wt(Ve,"LineString",Ze,ue.properties));return}et(Me,Ze,Je,!1)}else if(Ae==="Polygon")et(Me,Ze,Je,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const it of ue.geometry.geometries)Qe(ze,{id:Ve,geometry:it,properties:ue.properties},le,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const it of Me){const At=[];et(it,At,Je,!0),Ze.push(At)}}ze.push(wt(Ve,Ae,Ze,ue.properties))}function yt(ze,ue){ue.push(Mt(ze[0]),Dt(ze[1]),0)}function Oe(ze,ue,le,pe){let Me,Ae,Je=0;for(let Ve=0;Ve<ze.length;Ve++){const it=Mt(ze[Ve][0]),At=Dt(ze[Ve][1]);ue.push(it,At,0),Ve>0&&(Je+=pe?(Me*At-it*Ae)/2:Math.sqrt(Math.pow(it-Me,2)+Math.pow(At-Ae,2))),Me=it,Ae=At}const Ze=ue.length-3;ue[2]=1,pt(ue,0,Ze,le),ue[Ze+2]=1,ue.size=Math.abs(Je),ue.start=0,ue.end=ue.size}function et(ze,ue,le,pe){for(let Me=0;Me<ze.length;Me++){const Ae=[];Oe(ze[Me],Ae,le,pe),ue.push(Ae)}}function Mt(ze){return ze/360+.5}function Dt(ze){const ue=Math.sin(ze*Math.PI/180),le=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return le<0?0:le>1?1:le}function Ke(ze,ue,le,pe,Me,Ae,Je,Ze){if(pe/=ue,Ae>=(le/=ue)&&Je<pe)return ze;if(Je<le||Ae>=pe)return null;const Ve=[];for(const it of ze){const At=it.geometry;let Pt=it.type;const Xt=Me===0?it.minX:it.minY,or=Me===0?it.maxX:it.maxY;if(Xt>=le&&or<pe){Ve.push(it);continue}if(or<le||Xt>=pe)continue;let Mr=[];if(Pt==="Point"||Pt==="MultiPoint")tr(At,Mr,le,pe,Me);else if(Pt==="LineString")Ft(At,Mr,le,pe,Me,!1,Ze.lineMetrics);else if(Pt==="MultiLineString")ct(At,Mr,le,pe,Me,!1);else if(Pt==="Polygon")ct(At,Mr,le,pe,Me,!0);else if(Pt==="MultiPolygon")for(const Kr of At){const Ur=[];ct(Kr,Ur,le,pe,Me,!0),Ur.length&&Mr.push(Ur)}if(Mr.length){if(Ze.lineMetrics&&Pt==="LineString"){for(const Kr of Mr)Ve.push(wt(it.id,Pt,Kr,it.tags));continue}Pt!=="LineString"&&Pt!=="MultiLineString"||(Mr.length===1?(Pt="LineString",Mr=Mr[0]):Pt="MultiLineString"),Pt!=="Point"&&Pt!=="MultiPoint"||(Pt=Mr.length===3?"Point":"MultiPoint"),Ve.push(wt(it.id,Pt,Mr,it.tags))}}return Ve.length?Ve:null}function tr(ze,ue,le,pe,Me){for(let Ae=0;Ae<ze.length;Ae+=3){const Je=ze[Ae+Me];Je>=le&&Je<=pe&&Lt(ue,ze[Ae],ze[Ae+1],ze[Ae+2])}}function Ft(ze,ue,le,pe,Me,Ae,Je){let Ze=$t(ze);const Ve=Me===0?ir:St;let it,At,Pt=ze.start;for(let Ur=0;Ur<ze.length-3;Ur+=3){const tt=ze[Ur],sn=ze[Ur+1],ti=ze[Ur+2],Ir=ze[Ur+3],Zr=ze[Ur+4],Vn=Me===0?tt:sn,yn=Me===0?Ir:Zr;let ln=!1;Je&&(it=Math.sqrt(Math.pow(tt-Ir,2)+Math.pow(sn-Zr,2))),Vn<le?yn>le&&(At=Ve(Ze,tt,sn,Ir,Zr,le),Je&&(Ze.start=Pt+it*At)):Vn>pe?yn<pe&&(At=Ve(Ze,tt,sn,Ir,Zr,pe),Je&&(Ze.start=Pt+it*At)):Lt(Ze,tt,sn,ti),yn<le&&Vn>=le&&(At=Ve(Ze,tt,sn,Ir,Zr,le),ln=!0),yn>pe&&Vn<=pe&&(At=Ve(Ze,tt,sn,Ir,Zr,pe),ln=!0),!Ae&&ln&&(Je&&(Ze.end=Pt+it*At),ue.push(Ze),Ze=$t(ze)),Je&&(Pt+=it)}let Xt=ze.length-3;const or=ze[Xt],Mr=ze[Xt+1],Kr=Me===0?or:Mr;Kr>=le&&Kr<=pe&&Lt(Ze,or,Mr,ze[Xt+2]),Xt=Ze.length-3,Ae&&Xt>=3&&(Ze[Xt]!==Ze[0]||Ze[Xt+1]!==Ze[1])&&Lt(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&ue.push(Ze)}function $t(ze){const ue=[];return ue.size=ze.size,ue.start=ze.start,ue.end=ze.end,ue}function ct(ze,ue,le,pe,Me,Ae){for(const Je of ze)Ft(Je,ue,le,pe,Me,Ae,!1)}function Lt(ze,ue,le,pe){ze.push(ue,le,pe)}function ir(ze,ue,le,pe,Me,Ae){const Je=(Ae-ue)/(pe-ue);return Lt(ze,Ae,le+(Me-le)*Je,1),Je}function St(ze,ue,le,pe,Me,Ae){const Je=(Ae-le)/(Me-le);return Lt(ze,ue+(pe-ue)*Je,Ae,1),Je}function Gr(ze,ue){const le=[];for(let pe=0;pe<ze.length;pe++){const Me=ze[pe],Ae=Me.type;let Je;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Je=Tr(Me.geometry,ue);else if(Ae==="MultiLineString"||Ae==="Polygon"){Je=[];for(const Ze of Me.geometry)Je.push(Tr(Ze,ue))}else if(Ae==="MultiPolygon"){Je=[];for(const Ze of Me.geometry){const Ve=[];for(const it of Ze)Ve.push(Tr(it,ue));Je.push(Ve)}}le.push(wt(Me.id,Ae,Je,Me.tags))}return le}function Tr(ze,ue){const le=[];le.size=ze.size,ze.start!==void 0&&(le.start=ze.start,le.end=ze.end);for(let pe=0;pe<ze.length;pe+=3)le.push(ze[pe]+ue,ze[pe+1],ze[pe+2]);return le}function wr(ze,ue){if(ze.transformed)return ze;const le=1<<ze.z,pe=ze.x,Me=ze.y;for(const Ae of ze.features){const Je=Ae.geometry,Ze=Ae.type;if(Ae.geometry=[],Ze===1)for(let Ve=0;Ve<Je.length;Ve+=2)Ae.geometry.push(tn(Je[Ve],Je[Ve+1],ue,le,pe,Me));else for(let Ve=0;Ve<Je.length;Ve++){const it=[];for(let At=0;At<Je[Ve].length;At+=2)it.push(tn(Je[Ve][At],Je[Ve][At+1],ue,le,pe,Me));Ae.geometry.push(it)}}return ze.transformed=!0,ze}function tn(ze,ue,le,pe,Me,Ae){return[Math.round(le*(ze*pe-Me)),Math.round(le*(ue*pe-Ae))]}function Wr(ze,ue,le,pe,Me){const Ae=ue===Me.maxZoom?0:Me.tolerance/((1<<ue)*Me.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:le,y:pe,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ze of ze)Xi(Je,Ze,Ae,Me);return Je}function Xi(ze,ue,le,pe){const Me=ue.geometry,Ae=ue.type,Je=[];if(ze.minX=Math.min(ze.minX,ue.minX),ze.minY=Math.min(ze.minY,ue.minY),ze.maxX=Math.max(ze.maxX,ue.maxX),ze.maxY=Math.max(ze.maxY,ue.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Ze=0;Ze<Me.length;Ze+=3)Je.push(Me[Ze],Me[Ze+1]),ze.numPoints++,ze.numSimplified++;else if(Ae==="LineString")Ii(Je,Me,ze,le,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Ze=0;Ze<Me.length;Ze++)Ii(Je,Me[Ze],ze,le,Ae==="Polygon",Ze===0);else if(Ae==="MultiPolygon")for(let Ze=0;Ze<Me.length;Ze++){const Ve=Me[Ze];for(let it=0;it<Ve.length;it++)Ii(Je,Ve[it],ze,le,!0,it===0)}if(Je.length){let Ze=ue.tags||null;if(Ae==="LineString"&&pe.lineMetrics){Ze={};for(const it in ue.tags)Ze[it]=ue.tags[it];Ze.mapbox_clip_start=Me.start/Me.size,Ze.mapbox_clip_end=Me.end/Me.size}const Ve={geometry:Je,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Ze};ue.id!==null&&(Ve.id=ue.id),ze.features.push(Ve)}}function Ii(ze,ue,le,pe,Me,Ae){const Je=pe*pe;if(pe>0&&ue.size<(Me?Je:pe))return void(le.numPoints+=ue.length/3);const Ze=[];for(let Ve=0;Ve<ue.length;Ve+=3)(pe===0||ue[Ve+2]>Je)&&(le.numSimplified++,Ze.push(ue[Ve],ue[Ve+1])),le.numPoints++;Me&&(function(Ve,it){let At=0;for(let Pt=0,Xt=Ve.length,or=Xt-2;Pt<Xt;or=Pt,Pt+=2)At+=(Ve[Pt]-Ve[or])*(Ve[Pt+1]+Ve[or+1]);if(At>0===it)for(let Pt=0,Xt=Ve.length;Pt<Xt/2;Pt+=2){const or=Ve[Pt],Mr=Ve[Pt+1];Ve[Pt]=Ve[Xt-2-Pt],Ve[Pt+1]=Ve[Xt-1-Pt],Ve[Xt-2-Pt]=or,Ve[Xt-1-Pt]=Mr}})(Ze,Ae),ze.push(Ze)}const Be={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class rt{constructor(ue,le){const pe=(le=this.options=(function(Ae,Je){for(const Ze in Je)Ae[Ze]=Je[Ze];return Ae})(Object.create(Be),le)).debug;if(pe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Me=(function(Ae,Je){const Ze=[];if(Ae.type==="FeatureCollection")for(let Ve=0;Ve<Ae.features.length;Ve++)Qe(Ze,Ae.features[Ve],Je,Ve);else Qe(Ze,Ae.type==="Feature"?Ae:{geometry:Ae},Je);return Ze})(ue,le);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Me=(function(Ae,Je){const Ze=Je.buffer/Je.extent;let Ve=Ae;const it=Ke(Ae,1,-1-Ze,Ze,0,-1,2,Je),At=Ke(Ae,1,1-Ze,2+Ze,0,-1,2,Je);return(it||At)&&(Ve=Ke(Ae,1,-Ze,1+Ze,0,-1,2,Je)||[],it&&(Ve=Gr(it,1).concat(Ve)),At&&(Ve=Ve.concat(Gr(At,-1)))),Ve})(Me,le),Me.length&&this.splitTile(Me,0,0,0),pe&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ue,le,pe,Me,Ae,Je,Ze){const Ve=[ue,le,pe,Me],it=this.options,At=it.debug;for(;Ve.length;){Me=Ve.pop(),pe=Ve.pop(),le=Ve.pop(),ue=Ve.pop();const Pt=1<<le,Xt=bt(le,pe,Me);let or=this.tiles[Xt];if(!or&&(At>1&&console.time("creation"),or=this.tiles[Xt]=Wr(ue,le,pe,Me,it),this.tileCoords.push({z:le,x:pe,y:Me}),At)){At>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,pe,Me,or.numFeatures,or.numPoints,or.numSimplified),console.timeEnd("creation"));const ln=`z${le}`;this.stats[ln]=(this.stats[ln]||0)+1,this.total++}if(or.source=ue,Ae==null){if(le===it.indexMaxZoom||or.numPoints<=it.indexMaxPoints)continue}else{if(le===it.maxZoom||le===Ae)continue;if(Ae!=null){const ln=Ae-le;if(pe!==Je>>ln||Me!==Ze>>ln)continue}}if(or.source=null,ue.length===0)continue;At>1&&console.time("clipping");const Mr=.5*it.buffer/it.extent,Kr=.5-Mr,Ur=.5+Mr,tt=1+Mr;let sn=null,ti=null,Ir=null,Zr=null,Vn=Ke(ue,Pt,pe-Mr,pe+Ur,0,or.minX,or.maxX,it),yn=Ke(ue,Pt,pe+Kr,pe+tt,0,or.minX,or.maxX,it);ue=null,Vn&&(sn=Ke(Vn,Pt,Me-Mr,Me+Ur,1,or.minY,or.maxY,it),ti=Ke(Vn,Pt,Me+Kr,Me+tt,1,or.minY,or.maxY,it),Vn=null),yn&&(Ir=Ke(yn,Pt,Me-Mr,Me+Ur,1,or.minY,or.maxY,it),Zr=Ke(yn,Pt,Me+Kr,Me+tt,1,or.minY,or.maxY,it),yn=null),At>1&&console.timeEnd("clipping"),Ve.push(sn||[],le+1,2*pe,2*Me),Ve.push(ti||[],le+1,2*pe,2*Me+1),Ve.push(Ir||[],le+1,2*pe+1,2*Me),Ve.push(Zr||[],le+1,2*pe+1,2*Me+1)}}getTile(ue,le,pe){ue=+ue,le=+le,pe=+pe;const Me=this.options,{extent:Ae,debug:Je}=Me;if(ue<0||ue>24)return null;const Ze=1<<ue,Ve=bt(ue,le=le+Ze&Ze-1,pe);if(this.tiles[Ve])return wr(this.tiles[Ve],Ae);Je>1&&console.log("drilling down to z%d-%d-%d",ue,le,pe);let it,At=ue,Pt=le,Xt=pe;for(;!it&&At>0;)At--,Pt>>=1,Xt>>=1,it=this.tiles[bt(At,Pt,Xt)];return it&&it.source?(Je>1&&(console.log("found parent tile z%d-%d-%d",At,Pt,Xt),console.time("drilling down")),this.splitTile(it.source,At,Pt,Xt,ue,le,pe),Je>1&&console.timeEnd("drilling down"),this.tiles[Ve]?wr(this.tiles[Ve],Ae):null):null}}function bt(ze,ue,le){return 32*((1<<ze)*le+ue)+ze}class rr extends L{constructor(ue,le,pe,Me=Wt){super(ue,le,pe),this._dataUpdateable=new Map,this._createGeoJSONIndex=Me}loadVectorTile(ue,le){return d._(this,void 0,void 0,(function*(){const pe=ue.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Me=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);return Me?B(new d.d2(Me.features,{version:2,extent:d.a5})):null}))}loadData(ue){return d._(this,void 0,void 0,(function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const pe=this._startPerformance(ue);this._pendingRequest=new AbortController;try{(!this._pendingData||ue.request||ue.data||ue.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ue,this._pendingRequest));const Me=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Me,ue),this.loaded={};const Ae={};return ue.request&&(Ae.data=Me),this._finishPerformance(pe,ue,Ae),Ae}catch(Me){if(delete this._pendingRequest,d.Z(Me))return{abandoned:!0};throw Me}}))}_startPerformance(ue){var le;if(!((le=ue==null?void 0:ue.request)===null||le===void 0)&&le.collectResourceTiming)return new d.c_(ue.request)}_finishPerformance(ue,le,pe){if(!ue)return;const Me=ue.finish();Me&&(pe.resourceTiming={},pe.resourceTiming[le.source]=JSON.parse(JSON.stringify(Me)))}getData(){return d._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ue){const le=this.loaded;return le&&le[ue.uid]?super.reloadTile(ue):this.loadTile(ue)}loadAndProcessGeoJSON(ue,le){return d._(this,void 0,void 0,(function*(){let pe;if(ue.request?pe=yield this.loadGeoJSONFromUrl(ue.request,ue.promoteId,le):ue.data?pe=this._loadGeoJSONFromObject(ue.data,ue.promoteId):ue.dataDiff&&(pe=this._loadGeoJSONFromDiff(ue.dataDiff,ue.promoteId,ue.source)),delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`);return ae(pe,!0),ue.filter&&(pe=this._filterGeoJSON(pe,ue.filter)),pe}))}loadGeoJSONFromUrl(ue,le,pe){return d._(this,void 0,void 0,(function*(){const Me=yield d.j(ue,pe);return this._dataUpdateable=d.a7(Me.data,le),Me.data}))}_loadGeoJSONFromObject(ue,le){return this._dataUpdateable=d.a7(ue,le),ue}_loadGeoJSONFromDiff(ue,le,pe){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${pe}`);d.a8(this._dataUpdateable,ue,le);const Me=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Me)}_filterGeoJSON(ue,le){const pe=d.d3(le,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map((Ae=>`${Ae.key}: ${Ae.message}`)).join(", "));const Me=ue.features.filter((Ae=>pe.value.evaluate({zoom:0},Ae)));return this._toFeatureCollection(Me)}_toFeatureCollection(ue){return{type:"FeatureCollection",features:ue}}removeSource(ue){return d._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ue){return this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId)}getClusterChildren(ue){return this._geoJSONIndex.getChildren(ue.clusterId)}getClusterLeaves(ue){return this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset)}}function Wt(ze,ue){return ue.cluster?new xe((function({superclusterOptions:le,clusterProperties:pe}){if(!pe||!le)return le;const Me={},Ae={},Je={accumulated:null,zoom:0},Ze={properties:null},Ve=Object.keys(pe);for(const it of Ve){const[At,Pt]=pe[it],Xt=d.d3(Pt),or=d.d3(typeof At=="string"?[At,["accumulated"],["get",it]]:At);Me[it]=Xt.value,Ae[it]=or.value}return le.map=it=>{Ze.properties=it;const At={};for(const Pt of Ve)At[Pt]=Me[Pt].evaluate(Je,Ze);return At},le.reduce=(it,At)=>{Ze.properties=At;for(const Pt of Ve)Je.accumulated=it[Pt],it[Pt]=Ae[Pt].evaluate(Je,Ze)},le})(ue)).load(ze.features):(function(le,pe){return new rt(le,pe)})(ze,ue.geojsonVtOptions)}class zt{constructor(ue){this.self=ue,this.actor=new d.L(ue),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(le,pe)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=pe},this.self.addProtocol=d.cJ,this.self.removeProtocol=d.cK,this.self.registerRTLTextPlugin=le=>{d.d4.setMethods(le)},this.actor.registerMessageHandler("LDT",((le,pe)=>this._getDEMWorkerSource(le,pe.source).loadTile(pe))),this.actor.registerMessageHandler("RDT",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(le,pe.source).removeTile(pe)})))),this.actor.registerMessageHandler("GCEZ",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterExpansionZoom(pe)})))),this.actor.registerMessageHandler("GCC",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterChildren(pe)})))),this.actor.registerMessageHandler("GCL",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterLeaves(pe)})))),this.actor.registerMessageHandler("LD",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).loadData(pe))),this.actor.registerMessageHandler("GD",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).getData())),this.actor.registerMessageHandler("LT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).loadTile(pe))),this.actor.registerMessageHandler("RT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).reloadTile(pe))),this.actor.registerMessageHandler("AT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).abortTile(pe))),this.actor.registerMessageHandler("RMT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).removeTile(pe))),this.actor.registerMessageHandler("RS",((le,pe)=>d._(this,void 0,void 0,(function*(){if(!this.workerSources[le]||!this.workerSources[le][pe.type]||!this.workerSources[le][pe.type][pe.source])return;const Me=this.workerSources[le][pe.type][pe.source];delete this.workerSources[le][pe.type][pe.source],Me.removeSource!==void 0&&Me.removeSource(pe)})))),this.actor.registerMessageHandler("RM",(le=>d._(this,void 0,void 0,(function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le],this.globalStates.delete(le)})))),this.actor.registerMessageHandler("SR",((le,pe)=>d._(this,void 0,void 0,(function*(){this.referrer=pe})))),this.actor.registerMessageHandler("SRPS",((le,pe)=>this._syncRTLPluginState(le,pe))),this.actor.registerMessageHandler("IS",((le,pe)=>d._(this,void 0,void 0,(function*(){this.self.importScripts(pe)})))),this.actor.registerMessageHandler("SI",((le,pe)=>this._setImages(le,pe))),this.actor.registerMessageHandler("UL",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(le).update(pe.layers,pe.removedIds,this._getGlobalState(le))})))),this.actor.registerMessageHandler("UGS",((le,pe)=>d._(this,void 0,void 0,(function*(){const Me=this._getGlobalState(le);for(const Ae in pe)Me[Ae]=pe[Ae]})))),this.actor.registerMessageHandler("SL",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(le).replace(pe,this._getGlobalState(le))}))))}_getGlobalState(ue){let le=this.globalStates.get(ue);return le||(le={},this.globalStates.set(ue,le)),le}_setImages(ue,le){return d._(this,void 0,void 0,(function*(){this.availableImages[ue]=le;for(const pe in this.workerSources[ue]){const Me=this.workerSources[ue][pe];for(const Ae in Me)Me[Ae].availableImages=le}}))}_syncRTLPluginState(ue,le){return d._(this,void 0,void 0,(function*(){return yield d.d4.syncState(le,this.self.importScripts)}))}_getAvailableImages(ue){let le=this.availableImages[ue];return le||(le=[]),le}_getLayerIndex(ue){let le=this.layerIndexes[ue];return le||(le=this.layerIndexes[ue]=new o),le}_getWorkerSource(ue,le,pe){if(this.workerSources[ue]||(this.workerSources[ue]={}),this.workerSources[ue][le]||(this.workerSources[ue][le]={}),!this.workerSources[ue][le][pe]){const Me={sendAsync:(Ae,Je)=>(Ae.targetMapId=ue,this.actor.sendAsync(Ae,Je))};switch(le){case"vector":this.workerSources[ue][le][pe]=new L(Me,this._getLayerIndex(ue),this._getAvailableImages(ue));break;case"geojson":this.workerSources[ue][le][pe]=new rr(Me,this._getLayerIndex(ue),this._getAvailableImages(ue));break;default:this.workerSources[ue][le][pe]=new this.externalWorkerSourceTypes[le](Me,this._getLayerIndex(ue),this._getAvailableImages(ue))}}return this.workerSources[ue][le][pe]}_getDEMWorkerSource(ue,le){return this.demWorkerSources[ue]||(this.demWorkerSources[ue]={}),this.demWorkerSources[ue][le]||(this.demWorkerSources[ue][le]=new K),this.demWorkerSources[ue][le]}}return d.i(self)&&(self.worker=new zt(self)),zt})),l("index",["exports","./shared"],(function(d,o){var _="5.16.0";function S(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let P,M,O;const z={frame(w,i,c){const m=requestAnimationFrame((E=>{v(),i(E)})),{unsubscribe:v}=o.s(w.signal,"abort",(()=>{v(),cancelAnimationFrame(m),c(new o.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((i,c)=>{this.frame(w,i,c)}))},getImageData(w,i=0){return this.getImageCanvasContext(w).getImageData(-i,-i,w.width+2*i,w.height+2*i)},getImageCanvasContext(w){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=w.width,i.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(P||(P=document.createElement("a")),P.href=w,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)},set prefersReducedMotion(w){O=w}},B=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function F(){return B.getCurrentTime()}class L{static testProp(i){if(!L.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in L.docStyle)return i[c];return i[0]}static create(i,c,m){const v=window.document.createElement(i);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(i,c){i.style[L.transformProp]=c}static addEventListener(i,c,m,v={}){i.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(i,c,m,v={}){i.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",L.suppressClickInternal,!0)}),0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,m){const v=c.boundingClientRect;return new o.P((m.clientX-v.left)/c.x-i.clientLeft,(m.clientY-v.top)/c.y-i.clientTop)}static mousePos(i,c){const m=L.getScale(i);return L.getPoint(i,m,c)}static touchPos(i,c){const m=[],v=L.getScale(i);for(let E=0;E<c.length;E++)m.push(L.getPoint(i,v,c[E]));return m}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const c=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),m=c.querySelectorAll("script");for(const v of m)v.remove();return L.clean(c),c.innerHTML}static isPossiblyDangerous(i,c){const m=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!m.includes("javascript:")&&!m.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const c=i.children;for(const m of c)L.removeAttributes(m),L.clean(m)}static removeAttributes(i){for(const{name:c,value:m}of i.attributes)L.isPossiblyDangerous(c,m)&&i.removeAttribute(c)}}L.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);const K={supported:!1,testSupport:function(w){!te&&re&&(ae?he(w):Q=w)}};let Q,re,te=!1,ae=!1;function he(w){const i=w.createTexture();w.bindTexture(w.TEXTURE_2D,i);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,re),w.isContextLost())return;K.supported=!0}catch{}w.deleteTexture(i),te=!0}var ne;typeof document<"u"&&(re=document.createElement("img"),re.onload=()=>{Q&&he(Q),Q=null,ae=!0},re.onerror=()=>{te=!0,Q=null},re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let i,c,m,v;w.resetRequestQueue=()=>{i=[],c=0,m=0,v={}},w.addThrottleControl=N=>{const U=m++;return v[U]=N,U},w.removeThrottleControl=N=>{delete v[N],k()},w.getImage=(N,U,W=!0)=>new Promise(((J,Y)=>{K.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),i.push({abortController:U,requestParameters:N,supportImageRefresh:W,state:"queued",onError:oe=>{Y(oe)},onSuccess:oe=>{J(oe)}}),k()}));const E=N=>o._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:U,supportImageRefresh:W,onError:J,onSuccess:Y,abortController:oe}=N,ce=W===!1&&!o.i(self)&&!o.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((ve,we)=>ve&&we==="accept"),!0));c++;const ye=ce?D(U,oe):o.m(U,oe);try{const ve=yield ye;delete N.abortController,N.state="completed",ve.data instanceof HTMLImageElement||o.b(ve.data)?Y(ve):ve.data&&Y({data:yield(_e=ve.data,typeof createImageBitmap=="function"?o.f(_e):o.h(_e)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete N.abortController,J(ve)}finally{c--,k()}var _e})),k=()=>{const N=(()=>{for(const U of Object.keys(v))if(v[U]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<N&&i.length>0;U++){const W=i.shift();W.abortController.signal.aborted?U--:E(W)}},D=(N,U)=>new Promise(((W,J)=>{const Y=new Image,oe=N.url,ce=N.credentials;ce&&ce==="include"?Y.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!o.d(oe))&&(Y.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{Y.src="",J(new o.a(U.signal.reason))})),Y.fetchPriority="high",Y.onload=()=>{Y.onerror=Y.onload=null,W({data:Y})},Y.onerror=()=>{Y.onerror=Y.onload=null,U.signal.aborted||J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Y.src=oe}))})(ne||(ne={})),ne.resetRequestQueue();class be{constructor(i){this._transformRequestFn=i??null}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function xe(w){const i=[];if(typeof w=="string")i.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:m,url:v}of w){const E=`${m}${v}`;c.indexOf(E)===-1&&(c.push(E),i.push({id:m,url:v}))}}return i}function $e(w,i,c){try{const m=new URL(w);return m.pathname+=`${i}${c}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ee(w){const{userImage:i}=w;return!!(i&&i.render&&i.render())&&(w.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ne extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const i of Object.keys(this.images))this.removeImage(i);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:m}of this.requestors)m(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new o.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,c){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,E=m&&m.height||c.data.height;return!(i[0]<0||v<i[0]||i[1]<0||E<i[1]||i[2]<0||v<i[2]||i[3]<0||E<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,m=!0){const v=this.getImage(i);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((c,m)=>{let v=!0;if(!this.isLoaded())for(const E of i)this.images[E]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})}))}_getImagesForIds(i){const c={};for(const m of i){let v=this.getImage(m);v||(this.fire(new o.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?c[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],m=this.getImage(i);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new o.I(v,m);this.patterns[i]={bin:v,position:E}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const E in this.patterns)i.push(this.patterns[E].bin);const{w:c,h:m}=o.p(i),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const E in this.patterns){const{bin:k}=this.patterns[E],D=k.x+1,N=k.y+1,U=this.getImage(E).data,W=U.width,J=U.height;o.R.copy(U,v,{x:0,y:0},{x:D,y:N},{width:W,height:J}),o.R.copy(U,v,{x:0,y:J-1},{x:D,y:N-1},{width:W,height:1}),o.R.copy(U,v,{x:0,y:0},{x:D,y:N+J},{width:W,height:1}),o.R.copy(U,v,{x:W-1,y:0},{x:D-1,y:N},{width:1,height:J}),o.R.copy(U,v,{x:0,y:0},{x:D+W,y:N},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||o.w(`Image with ID: "${c}" was not found`),Ee(m)&&this.updateImage(c,m)}}cloneImages(){const i={};for(const c in this.images){const m=this.images[c];i[c]=Object.assign(Object.assign({},m),{data:m.data?m.data.clone():null})}return i}}const Xe=1e20;function ut(w,i,c,m,v,E,k,D,N){for(let U=i;U<i+m;U++)pt(w,c*E+U,E,v,k,D,N);for(let U=c;U<c+v;U++)pt(w,U*E+i,1,m,k,D,N)}function pt(w,i,c,m,v,E,k){E[0]=0,k[0]=-Xe,k[1]=Xe,v[0]=w[i];for(let D=1,N=0,U=0;D<m;D++){v[D]=w[i+D*c];const W=D*D;do{const J=E[N];U=(v[D]-v[J]+W-J*J)/(D-J)/2}while(U<=k[N]&&--N>-1);N++,E[N]=D,k[N]=U,k[N+1]=Xe}for(let D=0,N=0;D<m;D++){for(;k[N+1]<D;)N++;const U=E[N],W=D-U;w[i+D*c]=v[U]+W*W}}const gt=o.v.layout_symbol["text-font"].default.join(",");class wt{constructor(i,c,m){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={},this.lang=m}setURL(i){this.url=i}getGlyphs(i){return o._(this,void 0,void 0,(function*(){const c=[];for(const E in i)for(const k of i[E])c.push(this._getAndCacheGlyphsPromise(E,k));const m=yield Promise.all(c),v={};for(const{stack:E,id:k,glyph:D}of m)v[E]||(v[E]={}),v[E][k]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return v}))}_getAndCacheGlyphsPromise(i,c){return o._(this,void 0,void 0,(function*(){let m=this.entries[i];m||(m=this.entries[i]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[c];return v!==void 0?{stack:i,id:c,glyph:v}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(v=m.glyphs[c]=this._drawGlyph(m,i,c),{stack:i,id:c,glyph:v}):yield this._downloadAndCacheRangePromise(i,c)}))}_downloadAndCacheRangePromise(i,c){return o._(this,void 0,void 0,(function*(){const m=this.entries[i],v=Math.floor(c/256);if(m.ranges[v])return{stack:i,id:c,glyph:null};if(!m.requests[v]){const E=wt.loadGlyphRange(i,v,this.url,this.requestManager);m.requests[v]=E}try{const E=yield m.requests[v];for(const k in E)m.glyphs[+k]=E[+k];return m.ranges[v]=!0,{stack:i,id:c,glyph:E[c]||null}}catch(E){const k=m.glyphs[c]=this._drawGlyph(m,i,c);return this._warnOnMissingGlyphRange(k,v,c,E),{stack:i,id:c,glyph:k}}}))}_warnOnMissingGlyphRange(i,c,m,v){const E=256*c,k=E+255,D=m.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${c}, ${E}-${k}. Rendering codepoint U+${D} locally instead. ${v}`)}_charUsesLocalIdeographFontFamily(i){return!!this.localIdeographFontFamily&&o.q(i)}_drawGlyph(i,c,m){const v=c===gt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(m),E=v?"ideographTinySDF":"tinySDF";i[E]||(i[E]=this._createTinySDF(v?this.localIdeographFontFamily:c));const k=i[E].draw(String.fromCodePoint(m)),D=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(m));return{id:m,bitmap:new o.r({width:k.width||60,height:k.height||60},k.data),metrics:{width:D?0:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:D?0:k.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(i){const c=i?i.split(","):[];c.push("sans-serif");const m=c.map((v=>/[-\w]+/.test(v)?v:`'${CSS.escape(v)}'`)).join(",");return new wt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(i){return/italic/i.test(i)?"italic":/oblique/i.test(i)?"oblique":"normal"}_fontWeight(i){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let m;for(const[v,E]of Object.entries(c))new RegExp(`\\b${v}\\b`,"i").test(i)&&(m=`${E}`);return m}destroy(){for(const i in this.entries){const c=this.entries[i];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}wt.loadGlyphRange=function(w,i,c,m){return o._(this,void 0,void 0,(function*(){const v=256*i,E=v+255,k=m.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${v}-${E}`),"Glyphs"),D=yield o.n(k,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${i}, ${v}-${E}`);const N={};for(const U of o.o(D.data))N[U.id]=U;return N}))},wt.TinySDF=class{constructor({fontSize:w=24,buffer:i=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:k="normal",lang:D=null}={}){this.buffer=i,this.cutoff=m,this.radius=c,this.lang=D;const N=this.size=w+4*i,U=this._createCanvas(N),W=this.ctx=U.getContext("2d",{willReadFrequently:!0});W.font=`${k} ${E} ${w}px ${v}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(w){const i=document.createElement("canvas");return i.width=i.height=w,i}draw(w){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(w),k=Math.ceil(c),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-v))),N=Math.min(this.size-this.buffer,k+Math.ceil(m)),U=D+2*this.buffer,W=N+2*this.buffer,J=Math.max(U*W,0),Y=new Uint8ClampedArray(J),oe={data:Y,width:U,height:W,glyphWidth:D,glyphHeight:N,glyphTop:k,glyphLeft:0,glyphAdvance:i};if(D===0||N===0)return oe;const{ctx:ce,buffer:ye,gridInner:_e,gridOuter:ve}=this;this.lang&&(ce.lang=this.lang),ce.clearRect(ye,ye,D,N),ce.fillText(w,ye,ye+k);const we=ce.getImageData(ye,ye,D,N);ve.fill(Xe,0,J),_e.fill(0,0,J);for(let Le=0;Le<N;Le++)for(let Se=0;Se<D;Se++){const ke=we.data[4*(Le*D+Se)+3]/255;if(ke===0)continue;const Fe=(Le+ye)*U+Se+ye;if(ke===1)ve[Fe]=0,_e[Fe]=Xe;else{const Te=.5-ke;ve[Fe]=Te>0?Te*Te:0,_e[Fe]=Te<0?Te*Te:0}}ut(ve,0,0,U,W,U,this.f,this.v,this.z),ut(_e,ye,ye,D,N,U,this.f,this.v,this.z);for(let Le=0;Le<J;Le++){const Se=Math.sqrt(ve[Le])-Math.sqrt(_e[Le]);Y[Le]=Math.round(255-255*(Se/this.radius+this.cutoff))}return oe}};class je{constructor(){this.specification=o.u.light.position}possiblyEvaluate(i,c){return o.F(i.expression.evaluate(c))}interpolate(i,c,m){return{x:o.G.number(i.x,c.x,m),y:o.G.number(i.y,c.y,m),z:o.G.number(i.z,c.z,m)}}}let Qe;class yt extends o.E{constructor(i){super(),Qe=Qe||new o.t({anchor:new o.D(o.u.light.anchor),position:new je,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Qe,void 0),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(o.y,i,c))for(const m in i){const v=i[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||m.validate!==!1)&&o.B(this,i.call(o.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Oe=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class et extends o.E{constructor(i){super(),this._transitionable=new o.x(Oe,void 0),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(i,c={}){if(!this._validate(o.J,i,c)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in i){const v=i[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m={}){return(m==null?void 0:m.validate)!==!1&&o.B(this,i.call(o.C,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Mt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const m=i.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,c)),this.dashEntry[m]}getDashRanges(i,c,m){const v=[];let E=i.length%2==1?-i[i.length-1]*m:0,k=i[0]*m,D=!0;v.push({left:E,right:k,isDash:D,zeroLength:i[0]===0});let N=i[0];for(let U=1;U<i.length;U++){D=!D;const W=i[U];E=N*m,N+=W,k=N*m,v.push({left:E,right:k,isDash:D,zeroLength:W===0})}return v}addRoundDash(i,c,m){const v=c/2;for(let E=-m;E<=m;E++){const k=this.width*(this.nextRow+m+E);let D=0,N=i[D];for(let U=0;U<this.width;U++){U/N.right>1&&(N=i[++D]);const W=Math.abs(U-N.left),J=Math.abs(U-N.right),Y=Math.min(W,J);let oe;const ce=E/m*(v+1);if(N.isDash){const ye=v-Math.abs(ce);oe=Math.sqrt(Y*Y+ye*ye)}else oe=v-Math.sqrt(Y*Y+ce*ce);this.data[k+U]=Math.max(0,Math.min(255,oe+128))}}}addRegularDash(i){for(let D=i.length-1;D>=0;--D){const N=i[D],U=i[D+1];N.zeroLength?i.splice(D,1):U&&U.isDash===N.isDash&&(U.left=N.left,i.splice(D,1))}const c=i[0],m=i[i.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let E=0,k=i[E];for(let D=0;D<this.width;D++){D/k.right>1&&(k=i[++E]);const N=Math.abs(D-k.left),U=Math.abs(D-k.right),W=Math.min(N,U);this.data[v+D]=Math.max(0,Math.min(255,(k.isDash?W:-W)+128))}}addDash(i,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let E=0;for(let D=0;D<i.length;D++)E+=i[D];if(E!==0){const D=this.width/E,N=this.getDashRanges(i,this.width,D);c?this.addRoundDash(N,D,m):this.addRegularDash(N)}const k={y:this.nextRow+m,height:2*m,width:E};return this.nextRow+=v,this.dirty=!0,k}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Dt="maplibre_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Dt]}numActive(){return Object.keys(this.active).length}}const tr=Math.floor(z.hardwareConcurrency/2);let Ft,$t;function ct(){return Ft||(Ft=new Ke),Ft}Ke.workerCount=o.K(globalThis)?Math.max(Math.min(tr,3),1):1;class Lt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const m=this.workerPool.acquire(c);for(let v=0;v<m.length;v++){const E=new o.L(m[v],c);E.name=`Worker ${v}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:i,data:c}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const m of this.actors)m.registerMessageHandler(i,c)}unregisterMessageHandler(i){for(const c of this.actors)c.unregisterMessageHandler(i)}}function ir(){return $t||($t=new Lt(ct(),o.M),$t.registerMessageHandler("GR",((w,i,c)=>o.m(i,c)))),$t}function St(w,i){const c=o.N();return o.O(c,c,[1,1,0]),o.Q(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.S(c,c,w.calculatePosMatrix(i.toUnwrapped())):c}function Gr(w,i,c,m,v,E,k){var D;const N=(function(Y,oe,ce){if(Y)for(const ye of Y){const _e=oe[ye];if(_e&&_e.source===ce&&_e.type==="fill-extrusion")return!0}else for(const ye in oe){const _e=oe[ye];if(_e.source===ce&&_e.type==="fill-extrusion")return!0}return!1})((D=v==null?void 0:v.layers)!==null&&D!==void 0?D:null,i,w.id),U=E.maxPitchScaleFactor(),W=w.tilesIn(m,U,N);W.sort(Tr);const J=[];for(const Y of W)J.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(i,c,w.getState(),Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,v,E,U,St(E,Y.tileID),k?(oe,ce)=>k(Y.tileID,oe,ce):void 0)});return(function(Y,oe){for(const ce in Y)for(const ye of Y[ce])wr(ye,oe);return Y})((function(Y){const oe={},ce={};for(const ye of Y){const _e=ye.queryResults,ve=ye.wrappedTileID,we=ce[ve]=ce[ve]||{};for(const Le in _e){const Se=_e[Le],ke=we[Le]=we[Le]||{},Fe=oe[Le]=oe[Le]||[];for(const Te of Se)ke[Te.featureIndex]||(ke[Te.featureIndex]=!0,Fe.push(Te))}}return oe})(J),w)}function Tr(w,i){const c=w.tileID,m=i.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function wr(w,i){const c=w.feature,m=i.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=m}function tn(w,i,c){return o._(this,void 0,void 0,(function*(){let m=w;if(w.url?m=(yield o.j(i.transformRequest(w.url,"Source"),c)).data:yield z.frameAsync(c),!m)return null;const v=o.U(o.e(m,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map((E=>E.id))),v}))}class Wr{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof o.V?new o.V(i.lng,i.lat):o.V.convert(i),this}setSouthWest(i){return this._sw=i instanceof o.V?new o.V(i.lng,i.lat):o.V.convert(i),this}extend(i){const c=this._sw,m=this._ne;let v,E;if(i instanceof o.V)v=i,E=i;else{if(!(i instanceof Wr))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Wr.convert(i)):this.extend(o.V.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(o.V.convert(i)):this;if(v=i._sw,E=i._ne,!v||!E)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(E.lng,m.lng),m.lat=Math.max(E.lat,m.lat)):(this._sw=new o.V(v.lng,v.lat),this._ne=new o.V(E.lng,E.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:m}=o.V.convert(i);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}intersects(i){if(!((i=Wr.convert(i)).getNorth()>=this.getSouth()&&i.getSouth()<=this.getNorth()))return!1;const c=Math.abs(this.getEast()-this.getWest()),m=Math.abs(i.getEast()-i.getWest());if(c>=360||m>=360)return!0;const v=o.W(this.getWest(),-180,180),E=o.W(this.getEast(),-180,180),k=o.W(i.getWest(),-180,180),D=o.W(i.getEast(),-180,180),N=v>=E,U=k>=D;return!(!N||!U)||(N?D>=v||k<=E:U?E>=k||v<=D:k<=E&&D>=v)}static convert(i){return i instanceof Wr?i:i&&new Wr(i)}static fromLngLat(i,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*i.lat);return new Wr(new o.V(i.lng-v,i.lat-m),new o.V(i.lng+v,i.lat+m))}adjustAntiMeridian(){const i=new o.V(this._sw.lng,this._sw.lat),c=new o.V(this._ne.lng,this._ne.lat);return new Wr(i,i.lng>c.lng?new o.V(c.lng+360,c.lat):c)}}class Xi{constructor(i,c,m){this.bounds=Wr.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),m=Math.floor(o.Y(this.bounds.getWest())*c),v=Math.floor(o.X(this.bounds.getNorth())*c),E=Math.ceil(o.Y(this.bounds.getEast())*c),k=Math.ceil(o.X(this.bounds.getSouth())*c);return i.x>=m&&i.x<E&&i.y>=v&&i.y<k}}class Ii extends o.E{constructor(i,c,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),i&&(o.e(this,i),i.bounds&&(this.tileBounds=new Xi(i.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this._loaded=!0,o.Z(i)||this.fire(new o.k(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(i)};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((E,k)=>{i.reloadPromise={resolve:E,reject:k}}))}else i.actor=this.dispatcher.getActor(),v="LT";i.abortController=new AbortController;try{const E=yield i.actor.sendAsync({type:v,data:m},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,E)}catch(E){if(delete i.abortController,i.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(i,null)}}))}_getOverzoomParameters(i){if(i.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=i.tileID.scaledTo(this.maxzoom).canonical,m=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(m,"Tile")}}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const m=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(m.resolve).catch(m.reject)}}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Be extends o.E{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.U(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(i=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Xi(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return o.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const m=yield ne.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,E=v.gl,k=m.data;i.texture=this.map.painter.getTileTexture(k.width),i.texture?i.texture.update(k,{useMipmap:!0}):(i.texture=new o.T(v,k,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}}))}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class rt extends Be{constructor(i,c,m,v){super(i,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const v=yield ne.getImage(m,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(v&&v.data){const E=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&i.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const k=o.b(E)&&o.$()?E:yield this.readImageNow(E),D={type:this.type,uid:i.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const N=yield i.actor.sendAsync({type:"LDT",data:D});i.dem=N,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(v){if(delete i.abortController,i.aborted)i.state="unloaded";else if(v)throw i.state="errored",v}}))}readImageNow(i){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const c=i.width+2,m=i.height+2;try{return new o.R({width:c,height:m},yield o.a1(i,-1,-1,c,m))}catch{}}return z.getImageData(i,1)}))}_getNeighboringTiles(i){const c=i.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,E=c.x===0?i.wrap-1:i.wrap,k=(c.x+1+m)%m,D=c.x+1===m?i.wrap+1:i.wrap,N={};return N[new o.a2(i.overscaledZ,E,c.z,v,c.y).key]={backfilled:!1},N[new o.a2(i.overscaledZ,D,c.z,k,c.y).key]={backfilled:!1},c.y>0&&(N[new o.a2(i.overscaledZ,E,c.z,v,c.y-1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,D,c.z,k,c.y-1).key]={backfilled:!1}),c.y+1<m&&(N[new o.a2(i.overscaledZ,E,c.z,v,c.y+1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,D,c.z,k,c.y+1).key]={backfilled:!1}),N}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}function bt(w){return w.type==="GeometryCollection"?w.geometries.map((i=>i.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function rr(w){const i=new Wr;let c;switch(w.type){case"FeatureCollection":c=w.features.map((m=>bt(m.geometry))).flat(1/0);break;case"Feature":c=bt(w.geometry);break;default:c=bt(w)}if(c.length==0)return i;for(let m=0;m<c.length-1;m+=2)i.extend([c[m],c[m+1]]);return i}class Wt extends o.E{constructor(i,c,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=m.getActor(),this.setEventedParent(v),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(i){return i*(o.a5/this.tileSize)}_getClusterMaxZoom(i){const c=i?Math.round(i):this.maxzoom-1;return Number.isInteger(i)||i===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${i}" rounded to "${c}"`),c}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i,c){this._data=typeof i=="string"?{url:i}:{geojson:i},this._pendingWorkerUpdate={data:i};const m=this._updateWorkerData();return c?m:this}updateData(i,c){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,i);const m=this._updateWorkerData();return c?m:this}getData(){return o._(this,void 0,void 0,(function*(){const i=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return rr(yield this.getData())}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(i.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:m}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:i,diff:c}=this._pendingWorkerUpdate,m=o.e({type:this.type},this.workerOptions);i!==void 0?(typeof i=="string"?(m.request=this.map._requestManager.transformRequest(z.resolveURL(i),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=i,this._pendingWorkerUpdate.data=void 0):c&&(m.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:m});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));v.data&&(this._data={geojson:v.data});const E=this._applyDiffToSource(c),k=this._getShouldReloadTileOptions(E);let D=null;v.resourceTiming&&v.resourceTiming[this.id]&&(D=v.resourceTiming[this.id].slice(0));const N={dataType:"source"};this._collectResourceTiming&&D&&D.length>0&&o.e(N,{resourceTiming:D}),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"content",shouldReloadTileOptions:k})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(v))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(i){if(!i)return;const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const v=o.a7(this._data.geojson,c);if(!v)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:v}}if(!this._data.updateable)return;const m=o.a8(this._data.updateable,i,c);return i.removeAll||this._options.cluster?void 0:m}_getShouldReloadTileOptions(i){if(i)return{affectedBounds:i.filter(Boolean).map((c=>rr(c)))}}shouldReloadTile(i,{affectedBounds:c}){if(i.state==="loading")return!0;if(i.state==="unloaded")return!1;const{buffer:m,extent:v}=this.workerOptions.geojsonVtOptions,E=(function({x:k,y:D,z:N},U=0){const W=o.a3((k-U)/Math.pow(2,N)),J=o.a4((D+1+U)/Math.pow(2,N)),Y=o.a3((k+1+U)/Math.pow(2,N)),oe=o.a4((D-U)/Math.pow(2,N));return new Wr([W,J],[Y,oe])})(i.tileID.canonical,m/v);for(const k of c)if(E.intersects(k))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const m={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:m},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(v,this.map.painter,c==="RT")}))}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class zt extends o.E{constructor(i,c,m,v){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(o.a9.fromLngLat);var m;return this.tileID=(function(v){const E=o.aa.fromPoints(v),k=E.width(),D=E.height(),N=Math.max(k,D),U=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),W=Math.pow(2,U);return new o.ac(U,Math.floor((E.minX+E.maxX)/2*W),Math.floor((E.minY+E.maxY)/2*W))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.texture||(this.texture=new o.T(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const E=this.tiles[v];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){const{minX:c,minY:m,maxX:v,maxY:E}=o.aa.fromPoints(i),k={};for(let D=0;D<=o.ab;D++){const N=Math.pow(2,D),U=Math.floor(c*N),W=Math.floor(m*N),J=Math.floor(v*N),Y=Math.floor(E*N),oe=(U%N+N)%N,ce=J%N,ye=Math.floor(U/N),_e=Math.floor(J/N);k[D]={minWrap:ye,maxWrap:_e,minTileXWrapped:oe,maxTileXWrapped:ce,minTileY:W,maxTileY:Y}}return k}}class ze extends zt{constructor(i,c,m,v){super(i,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.ad(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new o.k(new o.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const E=this.tiles[v];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ue extends zt{constructor(i,c,m,v){super(i,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((E=>!Array.isArray(E)||E.length!==2||E.some((k=>typeof k!="number"))))||this.fire(new o.k(new o.ae(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ae(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.ae(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ae(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ae(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,m=c.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(c,this.canvas,m.RGBA,{premultiply:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let v=!1;for(const E in this.tiles){const k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const le={},pe=w=>{switch(w){case"geojson":return Wt;case"image":return zt;case"raster":return Be;case"raster-dem":return rt;case"vector":return Ii;case"video":return ze;case"canvas":return ue}return le[w]},Me="RTLPluginLoaded";class Ae extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ir()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return o._(this,arguments,void 0,(function*(c,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Me))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Je=null;function Ze(){return Je||(Je=new Ae),Je}var Ve,it;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(Ve||(Ve={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(it||(it={}));class At{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=i,this.uid=o.af(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(i){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(i||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:i,fadingDirection:c,fadingParentID:m,fadeEndTime:v}){this.resetFadeLogic(),this.fadingRole=i,this.fadingDirection=c,this.fadingParentID=m,this.fadeEndTime=v}setSelfFadeLogic(i){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=i}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=F(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData,this.latestFeatureIndex.encoding=i.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(v,E){const k={};if(!E)return k;for(const D of v){const N=D.layerIds.map((U=>E.getLayer(U))).filter(Boolean);if(N.length!==0){D.layers=N,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map((U=>N.filter((W=>W.id===U))[0])));for(const U of N)k[U.id]=D}}return k})(i.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof o.ah){if(this.hasSymbolBuckets=!0,!m)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof o.ah&&E.hasRTLText){this.hasRTLText=!0,Ze().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(E))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),this.dashPositions=i.dashPositions}else this.collisionBoxArray=new o.ag}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,m,v,E,k,D,N,U,W,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:E,scale:k,tileSize:this.tileSize,pixelPosMatrix:W,transform:N,params:D,queryPadding:this.queryPadding*U,getElevation:J},i,c,m):{}}querySourceFeatures(i,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),E=c&&c.sourceLayer?c.sourceLayer:"",k=v[o.ai]||v[E];if(!k)return;const D=o.aj(c==null?void 0:c.filter,c==null?void 0:c.globalState),{z:N,x:U,y:W}=this.tileID.canonical,J={z:N,x:U,y:W};for(let Y=0;Y<k.length;Y++){const oe=k.feature(Y);if(D.needGeometry){const _e=o.ak(oe,!0);if(!D.filter(new o.H(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!D.filter(new o.H(this.tileID.overscaledZ),oe))continue;const ce=m.getId(oe,E),ye=new o.al(oe,N,U,W,ce);ye.tile=J,i.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const m=o.am(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const E=this.expirationTime-c;E?this.expirationTime=m+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const E=this.buckets[v],k=E.layers[0].sourceLayer||o.ai,D=m[k],N=i[k];if(!D||!N||Object.keys(N).length===0)continue;E.update(N,D,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=c&&c.style&&c.style.getLayer(v);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(E)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(i){this.symbolFadeHoldUntil=F()+i}setDependencies(i,c){const m={};for(const v of c)m[v]=!0;this.dependencies[i]=m}hasDependency(i,c){for(const m of i){const v=this.dependencies[m];if(v){for(const E of c)if(v[E])return!0}}return!1}}class Pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,m){const v=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},o.e(this.stateChanges[i][v],m),this.deletedStates[i]===null){this.deletedStates[i]={};for(const E in this.state[i])E!==v&&(this.deletedStates[i][E]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const E in this.state[i][v])m[E]||(this.deletedStates[i][v][E]=null)}else for(const E in m)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][E]===null&&delete this.deletedStates[i][v][E]}removeFeatureState(i,c,m){if(this.deletedStates[i]===null)return;const v=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&c!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,c){const m=String(c),v=o.e({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const E=this.deletedStates[i][c];if(E===null)return{};for(const k in E)delete v[k]}return v}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const k in this.stateChanges[v])this.state[v][k]||(this.state[v][k]={}),o.e(this.state[v][k],this.stateChanges[v][k]),E[k]=this.state[v][k];m[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(this.deletedStates[v]===null)for(const k in this.state[v])E[k]={},this.state[v][k]={};else for(const k in this.deletedStates[v]){if(this.deletedStates[v][k]===null)this.state[v][k]={};else for(const D of Object.keys(this.deletedStates[v][k]))delete this.state[v][k][D];E[k]=this.state[v][k]}m[v]=m[v]||{},o.e(m[v],E)}this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0&&i.setFeatureState(m,c)}}const Xt=89.25;function or(w,i){const c=o.an(i.lat,-o.ao,o.ao);return new o.P(o.Y(i.lng)*w,o.X(c)*w)}function Mr(w,i){return new o.a9(i.x/w,i.y/w).toLngLat()}function Kr(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.ap(90-w.pitch)),Math.tan(o.ap(Xt-w.pitch)))}function Ur(w,i){const c=w.canonical,m=i/o.aq(c.z),v=c.x+Math.pow(2,c.z)*w.wrap,E=o.ar(new Float64Array(16));return o.O(E,E,[v*m,c.y*m,0]),o.Q(E,E,[m/o.a5,m/o.a5,1]),E}function tt(w,i,c,m,v){const E=o.a9.fromLngLat(w,i),k=v*o.as(1,w.lat),{x:D,y:N,z:U}=sn(c,m);return new o.a9(E.x+k*-D,E.y+k*-N,E.z+k*-U)}function sn(w,i){const c=o.ap(w),m=o.ap(i),v=Math.cos(-c),E=Math.sin(c);return{x:E*Math.sin(m),y:-E*Math.cos(m),z:v}}function ti(w,i,c){const m=i.intersectsFrustum(w);if(!c||m===0)return m;const v=i.intersectsPlane(c);return v===0?0:m===2&&v===2?2:1}function Ir(w,i,c){let m=0;const v=(c-i)/10;for(let E=0;E<10;E++)m+=v*Math.pow(Math.cos(i+(E+.5)/10*(c-i)),w);return m}function Zr(w,i){return function(c,m,v,E,k){const D=2*((w-1)/o.at(Math.cos(o.ap(Xt-k))/Math.cos(o.ap(Xt)))-1),N=Math.acos(v/E),U=2*Ir(D-1,0,o.ap(k/2)),W=Math.min(o.ap(Xt),N+o.ap(k/2)),J=Ir(D-1,Math.min(W,N-o.ap(k/2)),W),Y=Math.atan(m/v),oe=Math.hypot(m,v);let ce=c;return ce+=o.at(E/oe/Math.max(.5,Math.cos(o.ap(k/2)))),ce+=D*o.at(Math.cos(Y))/2,ce-=o.at(Math.max(1,J/U/i))/2,ce}}const Vn=Zr(9.314,3);function yn(w,i){const c=(i.roundZoom?Math.round:Math.floor)(w.zoom+o.at(w.tileSize/i.tileSize));return Math.max(0,c)}function ln(w,i){const c=w.getCameraFrustum(),m=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),E=o.a9.fromLngLat(w.center,w.elevation);v.z=E.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const k=w.getCoveringTilesDetailsProvider(),D=k.allowVariableZoom(w,i),N=yn(w,i),U=i.minzoom||0,W=i.maxzoom!==void 0?i.maxzoom:w.maxZoom,J=Math.min(Math.max(0,N),W),Y=Math.pow(2,J),oe=[Y*v.x,Y*v.y,0],ce=[Y*E.x,Y*E.y,0],ye=Math.hypot(E.x-v.x,E.y-v.y),_e=Math.abs(E.z-v.z),ve=Math.hypot(ye,_e),we=ke=>({zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Le=[],Se=[];if(w.renderWorldCopies&&k.allowWorldCopies())for(let ke=1;ke<=3;ke++)Le.push(we(-ke)),Le.push(we(ke));for(Le.push(we(0));Le.length>0;){const ke=Le.pop(),Fe=ke.x,Te=ke.y;let Ge=ke.fullyVisible;const ht={x:Fe,y:Te,z:ke.zoom},at=k.getTileBoundingVolume(ht,ke.wrap,w.elevation,i);if(!Ge){const Vt=ti(c,at,m);if(Vt===0)continue;Ge=Vt===2}const ot=k.distanceToTile2d(v.x,v.y,ht,at);let st=N;D&&(st=(i.calculateTileZoom||Vn)(w.zoom+o.at(w.tileSize/i.tileSize),ot,_e,ve,w.fov)),st=(i.roundZoom?Math.round:Math.floor)(st),st=Math.max(0,st);const Nt=Math.min(st,W);if(ke.wrap=k.getWrap(E,ht,ke.wrap),ke.zoom>=Nt){if(ke.zoom<U)continue;const Vt=J-ke.zoom,It=oe[0]-.5-(Fe<<Vt),Yt=oe[1]-.5-(Te<<Vt),zr=i.reparseOverscaled?Math.max(ke.zoom,st):ke.zoom;Se.push({tileID:new o.a2(ke.zoom===W?zr:ke.zoom,ke.wrap,ke.zoom,Fe,Te),distanceSq:o.au([ce[0]-.5-Fe,ce[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(It*It+Yt*Yt)})}else for(let Vt=0;Vt<4;Vt++)Le.push({zoom:ke.zoom+1,x:(Fe<<1)+Vt%2,y:(Te<<1)+(Vt>>1),wrap:ke.wrap,fullyVisible:Ge})}return Se.sort(((ke,Fe)=>ke.distanceSq-Fe.distanceSq)).map((ke=>ke.tileID))}const ur=o.aa.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function Ie(w){return w==="raster"||w==="image"||w==="video"}function Ye(w,i,c,m,v,E,k){if(!i.hasData())return!1;const{tileID:D,fadingRole:N,fadingDirection:U,fadingParentID:W}=i;if(N===Ve.Base&&U===it.Incoming&&W)return c[W.key]=W,!0;const J=Math.max(D.overscaledZ-v,E);for(let Y=D.overscaledZ-1;Y>=J;Y--){const oe=D.scaledTo(Y),ce=w.getLoadedTile(oe);if(ce)return i.setCrossFadeLogic({fadingRole:Ve.Base,fadingDirection:it.Incoming,fadingParentID:ce.tileID,fadeEndTime:m+k}),ce.setCrossFadeLogic({fadingRole:Ve.Parent,fadingDirection:it.Departing,fadeEndTime:m+k}),c[oe.key]=oe,!0}return!1}function mt(w,i,c,m,v,E){if(!i.hasData())return!1;const k=i.tileID.children(v);let D=We(w,i,k,c,m,v,E);if(D)return!0;for(const N of k)We(w,i,N.children(v),c,m,v,E)&&(D=!0);return D}function We(w,i,c,m,v,E,k){if(c[0].overscaledZ>=E)return!1;let D=!1;for(const N of c){const U=w.getLoadedTile(N);if(!U)continue;const{fadingRole:W,fadingDirection:J,fadingParentID:Y}=U;W===Ve.Base&&J===it.Departing&&Y||(U.setCrossFadeLogic({fadingRole:Ve.Base,fadingDirection:it.Departing,fadingParentID:i.tileID,fadeEndTime:v+k}),i.setCrossFadeLogic({fadingRole:Ve.Parent,fadingDirection:it.Incoming,fadeEndTime:v+k})),m[N.key]=N,D=!0}return D}function Gt(w,i,c,m){const v=w.tileID;return!!w.selfFading||!w.hasData()&&!!i.has(v)&&(w.setSelfFadeLogic(c+m),!0)}function cr(w,i){var c;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let m=i.tileID.canonical.x-w.tileID.canonical.x;const v=i.tileID.canonical.y-w.tileID.canonical.y,E=Math.pow(2,w.tileID.canonical.z),k=i.tileID.key;m===0&&v===0||Math.abs(v)>1||(Math.abs(m)>1&&(Math.abs(m+E)===1?m+=E:Math.abs(m-E)===1&&(m-=E)),i.dem&&w.dem&&(w.dem.backfillBorder(i.dem,m,v),!((c=w.neighboringTiles)===null||c===void 0)&&c[k]&&(w.neighboringTiles[k].backfilled=!0)))}class Sr{constructor(){this._tiles={}}handleWrapJump(i){const c={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+i),c[v.tileID.key]=v}this._tiles=c}setFeatureState(i,c){for(const m in this._tiles)this._tiles[m].setFeatureState(i,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(i=!1){return i?Object.values(this._tiles).map((c=>c.tileID)).sort(o.aw).map((c=>c.key)):Object.keys(this._tiles)}getTileById(i){return this._tiles[i]}setTile(i,c){this._tiles[i]=c}deleteTileById(i){delete this._tiles[i]}getLoadedTile(i){const c=this.getTileById(i.key);return c!=null&&c.hasData()?c:null}isIdRenderable(i,c=!1){var m;return(m=this.getTileById(i))===null||m===void 0?void 0:m.isRenderable(c)}getRenderableIds(i=0,c){const m=[];for(const v of this.getAllIds())this.isIdRenderable(v,c)&&m.push(this.getTileById(v));return c?m.sort(((v,E)=>{const k=v.tileID,D=E.tileID,N=new o.P(k.canonical.x,k.canonical.y)._rotate(-i),U=new o.P(D.canonical.x,D.canonical.y)._rotate(-i);return k.overscaledZ-D.overscaledZ||U.y-N.y||U.x-N.x})).map((v=>v.tileID.key)):m.map((v=>v.tileID)).sort(o.aw).map((v=>v.key))}}class hr extends o.E{constructor(i,c,m){super(),this.id=i,this.dispatcher=m,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,E,k,D)=>{const N=new(pe(E.type))(v,E,k,D);if(N.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${N.id}`);return N})(i,c,m,this),this._inViewTiles=new Sr,this._outOfViewCache=new o.ax(0,(v=>this._unloadTile(v))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Pt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i),this._inViewTiles=new Sr}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,m){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,m)}catch(v){i.state="errored",v.status!==404?this._source.fire(new o.k(v,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new o.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(i),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(i){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,i)}hasRenderableParent(i){const c=i.overscaledZ-1;if(c>=this._source.minzoom){const m=this.getLoadedTile(i.scaledTo(c));if(m)return this._inViewTiles.isIdRenderable(m.tileID.key)}return!1}reload(i,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const m of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(m);c&&!this._source.shouldReloadTile(v,c)||(i?this._reloadTile(m,"expired"):v.state!=="errored"&&this._reloadTile(m,"reloading"))}}}_reloadTile(i,c){return o._(this,void 0,void 0,(function*(){const m=this._inViewTiles.getTileById(i);m&&(m.state!=="loading"&&(m.state=c),yield this._loadTile(m,i,c))}))}_tileLoaded(i,c,m){i.timeAdded=F(),i.selfFading&&(i.fadeEndTime=i.timeAdded+this._rasterFadeDuration),m==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&(function(v,E){var k,D;const N=E.getRenderableIds();for(const U of N){if(!v.neighboringTiles||!v.neighboringTiles[U])continue;const W=E.getTileById(U);v.neighboringTiles[U].backfilled||cr(v,W),!((D=(k=W.neighboringTiles)===null||k===void 0?void 0:k[v.tileID.key])===null||D===void 0)&&D.backfilled||cr(W,v)}})(i,this._inViewTiles),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:i,coord:i.tileID}))}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._inViewTiles.getTileById(i)}_retainLoadedChildren(i,c){const m=this._getLoadedDescendents(c),v=new Set;for(const E of c){const k=m[E.key];if(!(k!=null&&k.length)){v.add(E);continue}const D=E.overscaledZ+hr.maxOverzooming,N=k.filter((J=>J.tileID.overscaledZ<=D));if(!N.length){v.add(E);continue}const U=Math.min(...N.map((J=>J.tileID.overscaledZ))),W=N.filter((J=>J.tileID.overscaledZ===U)).map((J=>J.tileID));for(const J of W)i[J.key]=J;this._areDescendentsComplete(W,U,E.overscaledZ)||v.add(E)}return v}_getLoadedDescendents(i){var c;const m={};for(const v of this._inViewTiles.getAllTiles().filter((E=>E.hasData())))for(const E of i)v.tileID.isChildOf(E)&&(m[c=E.key]||(m[c]=[])).push(v);return m}_areDescendentsComplete(i,c,m){return i.length===1&&i[0].isOverscaled()?i[0].overscaledZ===c:Math.pow(4,c-m)===i.length}getLoadedTile(i){return this._inViewTiles.getLoadedTile(i)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._outOfViewCache.setMaxSize(E)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);this._prevLng=i,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(i,c){if(!this._sourceLoaded||this._paused)return;let m;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new o.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(m=ln(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?i.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter((N=>this._source.hasTile(N))))):m=[],this.usedForTerrain&&(m=this._addTerrainIdealTiles(m));const v=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,v&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=yn(i,this._source),k=this._updateRetainedTiles(m,E),D=Ie(this._source.type);D&&this._rasterFadeDuration>0&&!c&&(function(N,U,W,J,Y,oe,ce){const ye=F(),_e=o.av(U);for(const ve of U){const we=N.getTileById(ve.key);we.fadingDirection!==it.Departing&&we.fadeOpacity!==0||we.resetFadeLogic(),Ye(N,we,W,ye,J,Y,ce)||mt(N,we,W,ye,oe,ce)||Gt(we,_e,ye,ce)||we.resetFadeLogic()}})(this._inViewTiles,m,k,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),D?this._cleanUpRasterTiles(k):this._cleanUpVectorTiles(k)}_cleanUpRasterTiles(i){for(const c of this._inViewTiles.getAllIds())i[c]||this._removeTile(c)}_cleanUpVectorTiles(i){for(const c of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(c);i[c]?m.clearSymbolFadeHold():m.hasSymbolBuckets?m.holdingForSymbolFade()?m.symbolFadeFinished()&&this._removeTile(c):m.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(i){const c=[];for(const m of i)if(m.canonical.z>this._source.minzoom){const v=m.scaledTo(m.canonical.z-1);c.push(v);const E=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));c.push(E)}return i.concat(c)}releaseSymbolFadeTiles(){for(const i of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(i).holdingForSymbolFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var m;const v=new Set;for(const U of i)this._addTile(U).hasData()||v.add(U);const E=i.reduce(((U,W)=>(U[W.key]=W,U)),{}),k=this._retainLoadedChildren(E,v),D={},N=Math.max(c-hr.maxUnderzooming,this._source.minzoom);for(const U of k){let W=this._inViewTiles.getTileById(U.key),J=W==null?void 0:W.wasRequested();for(let Y=U.overscaledZ-1;Y>=N;--Y){const oe=U.scaledTo(Y);if(D[oe.key])break;if(D[oe.key]=!0,W=this.getTile(oe),!W&&J&&(W=this._addTile(oe)),W){const ce=W.hasData();if((ce||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||J)&&(E[oe.key]=oe),J=W.wasRequested(),ce)break}}}return E}_addTile(i){let c=this._inViewTiles.getTileById(i.key);if(c)return c;c=this._outOfViewCache.getAndRemove(i),c&&(c.resetFadeLogic(),this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null));const m=c;return c||(c=new At(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._inViewTiles.setTile(i.key,c),m||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){this._clearTileReloadTimer(i);const m=c.getExpiryTimeout();m&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),m))}_clearTileReloadTimer(i){const c=this._timers[i];c&&(clearTimeout(c),delete this._timers[i])}_resetTileReloadTimers(){for(const i in this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(const i of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(i);this._setTileReloadTimer(i,c)}}refreshTiles(i){for(const c of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||m.state=="errored")&&i.some((v=>v.equals(m.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(i){const c=this._inViewTiles.getTileById(i);c&&(c.uses--,this._inViewTiles.deleteTileById(i),this._clearTileReloadTimer(i),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){i.dataType==="source"&&(i.sourceDataType!=="metadata"?i.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(i.sourceDataChanged,i.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i of this._inViewTiles.getAllIds())this._removeTile(i);this._outOfViewCache.reset()}tilesIn(i,c,m){const v=[],E=this.transform;if(!E)return v;const k=E.getCoveringTilesDetailsProvider().allowWorldCopies(),D=m?E.getCameraQueryGeometry(i):i,N=oe=>E.screenPointToMercatorCoordinate(oe,this.terrain),U=this.transformBbox(i,N,!k),W=this.transformBbox(D,N,!k),J=this.getIds(),Y=o.aa.fromPoints(W);for(let oe=0;oe<J.length;oe++){const ce=this._inViewTiles.getTileById(J[oe]);if(ce.holdingForSymbolFade())continue;const ye=k?[ce.tileID]:[ce.tileID.unwrapTo(-1),ce.tileID.unwrapTo(0)],_e=Math.pow(2,E.zoom-ce.tileID.overscaledZ),ve=c*ce.queryPadding*o.a5/ce.tileSize/_e;for(const we of ye){const Le=Y.map((Se=>we.getTilePoint(new o.a9(Se.x,Se.y))));if(Le.expandBy(ve),Le.intersects(ur)){const Se=U.map((Fe=>we.getTilePoint(Fe))),ke=W.map((Fe=>we.getTilePoint(Fe)));v.push({tile:ce,tileID:k?we:we.unwrapTo(0),queryGeometry:Se,cameraQueryGeometry:ke,scale:_e})}}}return v}transformBbox(i,c,m){let v=i.map(c);if(m){const E=o.aa.fromPoints(i);E.shrinkBy(.001*Math.min(E.width(),E.height()));const k=E.map(c);o.aa.fromPoints(v).covers(k)||(v=v.map((D=>D.x>.5?new o.a9(D.x-1,D.y,D.z):D)))}return v}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map((m=>this._inViewTiles.getTileById(m).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!Ie(this._source.type)||!(function(i,c){if(c<=0)return!1;const m=F();for(const v of i.getAllTiles())if(v.fadeEndTime>=m)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(i){this._rasterFadeDuration=i}setFeatureState(i,c,m){this._state.updateState(i=i||o.ai,c,m)}removeFeatureState(i,c,m){this._state.removeFeatureState(i=i||o.ai,c,m)}getFeatureState(i,c){return this._state.getState(i=i||o.ai,c)}setDependencies(i,c,m){const v=this._inViewTiles.getTileById(i);v&&v.setDependencies(c,m)}reloadTilesForDependencies(i,c){for(const m of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(m).hasDependency(i,c)&&this._reloadTile(m,"reloading");this._outOfViewCache.filter((m=>!m.hasDependency(i,c)))}areTilesLoaded(){for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}}hr.maxUnderzooming=10,hr.maxOverzooming=3;class xt{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=o.an(i,0,1);let c=1,m=this._distances[c];const v=i*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const E=c-1,k=this._distances[E],D=m-k,N=D>0?(v-k)/D:0;return this.points[E].mult(1-N).add(this.points[c].mult(N))}}function Bt(w,i){let c=!0;return w==="always"||w!=="never"&&i!=="never"||(c=!1),c}class Zt{constructor(i,c,m){const v=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(c/m);for(let k=0;k<this.xCellCount*this.yCellCount;k++)v.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,m,v,E){this._forEachCell(c,m,v,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(E)}insertCircle(i,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,c,m,v,E,k){this.boxCells[E].push(k)}_insertCircleCell(i,c,m,v,E,k){this.circleCells[E].push(k)}_query(i,c,m,v,E,k,D){if(m<0||i>this.width||v<0||c>this.height)return[];const N=[];if(i<=0&&c<=0&&this.width<=m&&this.height<=v){if(E)return[{key:null,x1:i,y1:c,x2:m,y2:v}];for(let U=0;U<this.boxKeys.length;U++)N.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const W=this.circles[3*U],J=this.circles[3*U+1],Y=this.circles[3*U+2];N.push({key:this.circleKeys[U],x1:W-Y,y1:J-Y,x2:W+Y,y2:J+Y})}}else this._forEachCell(i,c,m,v,this._queryCell,N,{hitTest:E,overlapMode:k,seenUids:{box:{},circle:{}}},D);return N}query(i,c,m,v){return this._query(i,c,m,v,!1,null)}hitTest(i,c,m,v,E,k){return this._query(i,c,m,v,!0,E,k).length>0}hitTestCircle(i,c,m,v,E){const k=i-m,D=i+m,N=c-m,U=c+m;if(D<0||k>this.width||U<0||N>this.height)return!1;const W=[];return this._forEachCell(k,N,D,U,this._queryCellCircle,W,{hitTest:!0,overlapMode:v,circle:{x:i,y:c,radius:m},seenUids:{box:{},circle:{}}},E),W.length>0}_queryCell(i,c,m,v,E,k,D,N){const{seenUids:U,hitTest:W,overlapMode:J}=D,Y=this.boxCells[E];if(Y!==null){const ce=this.bboxes;for(const ye of Y)if(!U.box[ye]){U.box[ye]=!0;const _e=4*ye,ve=this.boxKeys[ye];if(i<=ce[_e+2]&&c<=ce[_e+3]&&m>=ce[_e+0]&&v>=ce[_e+1]&&(!N||N(ve))&&(!W||!Bt(J,ve.overlapMode))&&(k.push({key:ve,x1:ce[_e],y1:ce[_e+1],x2:ce[_e+2],y2:ce[_e+3]}),W))return!0}}const oe=this.circleCells[E];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!U.circle[ye]){U.circle[ye]=!0;const _e=3*ye,ve=this.circleKeys[ye];if(this._circleAndRectCollide(ce[_e],ce[_e+1],ce[_e+2],i,c,m,v)&&(!N||N(ve))&&(!W||!Bt(J,ve.overlapMode))){const we=ce[_e],Le=ce[_e+1],Se=ce[_e+2];if(k.push({key:ve,x1:we-Se,y1:Le-Se,x2:we+Se,y2:Le+Se}),W)return!0}}}return!1}_queryCellCircle(i,c,m,v,E,k,D,N){const{circle:U,seenUids:W,overlapMode:J}=D,Y=this.boxCells[E];if(Y!==null){const ce=this.bboxes;for(const ye of Y)if(!W.box[ye]){W.box[ye]=!0;const _e=4*ye,ve=this.boxKeys[ye];if(this._circleAndRectCollide(U.x,U.y,U.radius,ce[_e+0],ce[_e+1],ce[_e+2],ce[_e+3])&&(!N||N(ve))&&!Bt(J,ve.overlapMode))return k.push(!0),!0}}const oe=this.circleCells[E];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!W.circle[ye]){W.circle[ye]=!0;const _e=3*ye,ve=this.circleKeys[ye];if(this._circlesCollide(ce[_e],ce[_e+1],ce[_e+2],U.x,U.y,U.radius)&&(!N||N(ve))&&!Bt(J,ve.overlapMode))return k.push(!0),!0}}}_forEachCell(i,c,m,v,E,k,D,N){const U=this._convertToXCellCoord(i),W=this._convertToYCellCoord(c),J=this._convertToXCellCoord(m),Y=this._convertToYCellCoord(v);for(let oe=U;oe<=J;oe++)for(let ce=W;ce<=Y;ce++)if(E.call(this,i,c,m,v,this.xCellCount*ce+oe,k,D,N))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,m,v,E,k){const D=v-i,N=E-c,U=m+k;return U*U>D*D+N*N}_circleAndRectCollide(i,c,m,v,E,k,D){const N=(k-v)/2,U=Math.abs(i-(v+N));if(U>N+m)return!1;const W=(D-E)/2,J=Math.abs(c-(E+W));if(J>W+m)return!1;if(U<=N||J<=W)return!0;const Y=U-N,oe=J-W;return Y*Y+oe*oe<=m*m}}function dr(w,i,c){const m=o.N();if(!w){const{vecSouth:J,vecEast:Y}=Yr(i),oe=S();oe[0]=Y[0],oe[1]=Y[1],oe[2]=J[0],oe[3]=J[1],v=oe,(W=(k=(E=oe)[0])*(U=E[3])-(N=E[2])*(D=E[1]))&&(v[0]=U*(W=1/W),v[1]=-D*W,v[2]=-N*W,v[3]=k*W),m[0]=oe[0],m[1]=oe[1],m[4]=oe[2],m[5]=oe[3]}var v,E,k,D,N,U,W;return o.Q(m,m,[1/c,1/c,1]),m}function Fr(w,i,c,m){if(w){const v=o.N();if(!i){const{vecSouth:E,vecEast:k}=Yr(c);v[0]=k[0],v[1]=k[1],v[4]=E[0],v[5]=E[1]}return o.Q(v,v,[m,m,1]),v}return c.pixelsToClipSpaceMatrix}function Yr(w){const i=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),E=Math.sin(w.bearingInRadians),k=o.aC();k[0]=-v*m*c-E*i,k[1]=-E*m*c+v*i;const D=o.aD(k);D<1e-9?o.aE(k):o.aF(k,k,1/D);const N=o.aC();N[0]=v*m*i-E*c,N[1]=E*m*i+v*c;const U=o.aD(N);return U<1e-9?o.aE(N):o.aF(N,N,1/U),{vecEast:N,vecSouth:k}}function mr(w,i,c,m){let v;m?(v=[w,i,m(w,i),1],o.aH(v,v,c)):(v=[w,i,0,1],$n(v,v,c));const E=v[3];return{point:new o.P(v[0]/E,v[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function ri(w,i){return .5+w/i*.5}function vn(w,i){return w.x>=-i[0]&&w.x<=i[0]&&w.y>=-i[1]&&w.y<=i[1]}function Tn(w,i,c,m,v,E,k,D,N,U,W,J,Y){const oe=c?w.textSizeData:w.iconSizeData,ce=o.ay(oe,i.transform.zoom),ye=[256/i.width*2+1,256/i.height*2+1],_e=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;_e.clear();const ve=w.lineVertexArray,we=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,Le=i.transform.width/i.transform.height;let Se=!1;for(let ke=0;ke<we.length;ke++){const Fe=we.get(ke);if(Fe.hidden||Fe.writingMode===o.az.vertical&&!Se){Da(Fe.numGlyphs,_e);continue}Se=!1;const Te=new o.P(Fe.anchorX,Fe.anchorY),Ge={getElevation:Y,pitchedLabelPlaneMatrix:m,lineVertexArray:ve,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:Te,unwrappedTileID:N,width:U,height:W,translation:J},ht=Oo(Fe.anchorX,Fe.anchorY,Ge);if(!vn(ht.point,ye)){Da(Fe.numGlyphs,_e);continue}const at=ri(i.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),ot=o.aA(oe,ce,Fe),st=E?ot*i.transform.getPitchedTextCorrection(Fe.anchorX,Fe.anchorY,N)/at:ot*at,Nt=La({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Fe,fontSize:st,flip:!1,keepUpright:k,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:D});Se=Nt.useVertical,(Nt.notEnoughRoom||Se||Nt.needsFlipping&&La({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Fe,fontSize:st,flip:!0,keepUpright:k,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:D}).notEnoughRoom)&&Da(Fe.numGlyphs,_e)}c?w.text.dynamicLayoutVertexBuffer.updateData(_e):w.icon.dynamicLayoutVertexBuffer.updateData(_e)}function Ja(w,i,c,m,v,E,k,D){const N=E.glyphStartIndex+E.numGlyphs,U=E.lineStartIndex,W=E.lineStartIndex+E.lineLength,J=i.getoffsetX(E.glyphStartIndex),Y=i.getoffsetX(N-1),oe=Rn(w*J,c,m,v,E.segment,U,W,D,k);if(!oe)return null;const ce=Rn(w*Y,c,m,v,E.segment,U,W,D,k);return ce?D.projectionCache.anyProjectionOccluded?null:{first:oe,last:ce}:null}function bn(w,i,c,m){return w===o.az.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*m?{useVertical:!0}:(w===o.az.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function La(w){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:c,symbol:m,fontSize:v,flip:E,keepUpright:k,glyphOffsetArray:D,dynamicLayoutVertexArray:N,aspectRatio:U,rotateToLine:W}=w,J=v/24,Y=m.lineOffsetX*J,oe=m.lineOffsetY*J;let ce;if(m.numGlyphs>1){const ye=m.glyphStartIndex+m.numGlyphs,_e=m.lineStartIndex,ve=m.lineStartIndex+m.lineLength,we=Ja(J,D,Y,oe,E,m,W,i);if(!we)return{notEnoughRoom:!0};const Le=Io(we.first.point.x,we.first.point.y,i,c),Se=Io(we.last.point.x,we.last.point.y,i,c);if(k&&!E){const ke=bn(m.writingMode,Le,Se,U);if(ke)return ke}ce=[we.first];for(let ke=m.glyphStartIndex+1;ke<ye-1;ke++){const Fe=Rn(J*D.getoffsetX(ke),Y,oe,E,m.segment,_e,ve,i,W);if(!Fe)return{notEnoughRoom:!0};ce.push(Fe)}ce.push(we.last)}else{if(k&&!E){const _e=Qr(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,ve=m.lineStartIndex+m.segment+1,we=new o.P(i.lineVertexArray.getx(ve),i.lineVertexArray.gety(ve)),Le=Qr(we.x,we.y,i),Se=Le.signedDistanceFromCamera>0?Le.point:Yi(i.tileAnchorPoint,we,_e,1,i),ke=Io(_e.x,_e.y,i,c),Fe=Io(Se.x,Se.y,i,c),Te=bn(m.writingMode,ke,Fe,U);if(Te)return Te}const ye=Rn(J*D.getoffsetX(m.glyphStartIndex),Y,oe,E,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,i,W);if(!ye||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[ye]}for(const ye of ce)o.aG(N,ye.point,ye.angle);return{}}function Yi(w,i,c,m,v){const E=w.add(w.sub(i)._unit()),k=Qr(E.x,E.y,v).point,D=c.sub(k);return c.add(D._mult(m/D.mag()))}function Oi(w,i,c){const m=i.projectionCache;if(m.projections[w])return m.projections[w];const v=new o.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),E=Qr(v.x,v.y,i);if(E.signedDistanceFromCamera>0)return m.projections[w]=E.point,m.anyProjectionOccluded=m.anyProjectionOccluded||E.isOccluded,E.point;const k=w-c.direction;return Yi(c.distanceFromAnchor===0?i.tileAnchorPoint:new o.P(i.lineVertexArray.getx(k),i.lineVertexArray.gety(k)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Qr(w,i,c){const m=w+c.translation[0],v=i+c.translation[1];let E;return c.pitchWithMap?(E=mr(m,v,c.pitchedLabelPlaneMatrix,c.getElevation),E.isOccluded=!1):(E=c.transform.projectTileCoordinates(m,v,c.unwrappedTileID,c.getElevation),E.point.x=(.5*E.point.x+.5)*c.width,E.point.y=(.5*-E.point.y+.5)*c.height),E}function Io(w,i,c,m){if(c.pitchWithMap){const v=[w,i,0,1];return o.aH(v,v,m),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-i/c.height*2}}function Oo(w,i,c){return c.transform.projectTileCoordinates(w,i,c.unwrappedTileID,c.getElevation)}function So(w,i,c){return w._unit()._perp()._mult(i*c)}function jr(w,i,c,m,v,E,k,D,N){if(D.projectionCache.offsets[w])return D.projectionCache.offsets[w];const U=c.add(i);if(w+N.direction<m||w+N.direction>=v)return D.projectionCache.offsets[w]=U,U;const W=Oi(w+N.direction,D,N),J=So(W.sub(c),k,N.direction),Y=c.add(J),oe=W.add(J);return D.projectionCache.offsets[w]=o.aI(E,U,Y,oe)||U,D.projectionCache.offsets[w]}function Rn(w,i,c,m,v,E,k,D,N){const U=m?w-i:w+i;let W=U>0?1:-1,J=0;m&&(W*=-1,J=Math.PI),W<0&&(J+=Math.PI);let Y,oe=W>0?E+v:E+v+1;D.projectionCache.cachedAnchorPoint?Y=D.projectionCache.cachedAnchorPoint:(Y=Qr(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=Y);let ce,ye,_e=Y,ve=Y,we=0,Le=0;const Se=Math.abs(U),ke=[];let Fe;for(;we+Le<=Se;){if(oe+=W,oe<E||oe>=k)return null;we+=Le,ve=_e,ye=ce;const ht={absOffsetX:Se,direction:W,distanceFromAnchor:we,previousVertex:ve};if(_e=Oi(oe,D,ht),c===0)ke.push(ve),Fe=_e.sub(ve);else{let at;const ot=_e.sub(ve);at=ot.mag()===0?So(Oi(oe+W,D,ht).sub(_e),c,W):So(ot,c,W),ye||(ye=ve.add(at)),ce=jr(oe,at,_e,E,k,ye,c,D,ht),ke.push(ye),Fe=ce.sub(ye)}Le=Fe.mag()}const Te=Fe._mult((Se-we)/Le)._add(ye||ve),Ge=J+Math.atan2(_e.y-ve.y,_e.x-ve.x);return ke.push(Te),{point:Te,angle:N?Ge:0,path:ke}}const $i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Da(w,i){for(let c=0;c<w;c++){const m=i.length;i.resize(m+4),i.float32.set($i,3*m)}}function $n(w,i,c){const m=i[0],v=i[1];return w[0]=c[0]*m+c[4]*v+c[12],w[1]=c[1]*m+c[5]*v+c[13],w[3]=c[3]*m+c[7]*v+c[15],w}const jn=100;class Ol{constructor(i,c=new Zt(i.width+200,i.height+200,25),m=new Zt(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=m,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+jn,this.screenBottomBoundary=i.height+jn,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,m,v,E,k,D,N,U,W,J,Y){const oe=this.projectAndGetPerspectiveRatio(i.anchorPointX+N[0],i.anchorPointY+N[1],E,W,Y),ce=m*oe.perspectiveRatio;let ye;if(k||D)ye=this._projectCollisionBox(i,ce,v,E,k,D,N,oe,W,J,Y);else{const Fe=oe.x+(J?J.x*ce:0),Te=oe.y+(J?J.y*ce:0);ye={allPointsOccluded:!1,box:[Fe+i.x1*ce,Te+i.y1*ce,Fe+i.x2*ce,Te+i.y2*ce]}}const[_e,ve,we,Le]=ye.box,Se=k?ye.allPointsOccluded:oe.isOccluded;let ke=Se;return ke||(ke=oe.perspectiveRatio<this.perspectiveRatioCutoff),ke||(ke=!this.isInsideGrid(_e,ve,we,Le)),ke||c!=="always"&&this.grid.hitTest(_e,ve,we,Le,c,U)?{box:[_e,ve,we,Le],placeable:!1,offscreen:!1,occluded:Se}:{box:[_e,ve,we,Le],placeable:!0,offscreen:this.isOffscreen(_e,ve,we,Le),occluded:Se}}placeCollisionCircles(i,c,m,v,E,k,D,N,U,W,J,Y,oe,ce){const ye=[],_e=new o.P(c.anchorX,c.anchorY),ve=this.getPerspectiveRatio(_e.x,_e.y,k,ce),we=(U?E*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,k)/ve:E*ve)/o.aM,Le={getElevation:ce,pitchedLabelPlaneMatrix:D,lineVertexArray:m,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:_e,unwrappedTileID:k,width:this.transform.width,height:this.transform.height,translation:oe},Se=Ja(we,v,c.lineOffsetX*we,c.lineOffsetY*we,!1,c,!1,Le);let ke=!1,Fe=!1,Te=!0;if(Se){const Ge=.5*J*ve+Y,ht=new o.P(-100,-100),at=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ot=new xt,st=Se.first,Nt=Se.last;let Vt=[];for(let zr=st.path.length-1;zr>=1;zr--)Vt.push(st.path[zr]);for(let zr=1;zr<Nt.path.length;zr++)Vt.push(Nt.path[zr]);const It=2.5*Ge;if(U){const zr=this.projectPathToScreenSpace(Vt,Le);Vt=zr.some((Sn=>Sn.signedDistanceFromCamera<=0))?[]:zr.map((Sn=>Sn.point))}let Yt=[];if(Vt.length>0){const zr=Vt[0].clone(),Sn=Vt[0].clone();for(let Yn=1;Yn<Vt.length;Yn++)zr.x=Math.min(zr.x,Vt[Yn].x),zr.y=Math.min(zr.y,Vt[Yn].y),Sn.x=Math.max(Sn.x,Vt[Yn].x),Sn.y=Math.max(Sn.y,Vt[Yn].y);Yt=zr.x>=ht.x&&Sn.x<=at.x&&zr.y>=ht.y&&Sn.y<=at.y?[Vt]:Sn.x<ht.x||zr.x>at.x||Sn.y<ht.y||zr.y>at.y?[]:o.aJ([Vt],ht.x,ht.y,at.x,at.y)}for(const zr of Yt){ot.reset(zr,.25*Ge);let Sn=0;Sn=ot.length<=.5*Ge?1:Math.ceil(ot.paddedLength/It)+1;for(let Yn=0;Yn<Sn;Yn++){const On=Yn/Math.max(Sn-1,1),Qn=ot.lerp(On),Ln=Qn.x+jn,Jn=Qn.y+jn;ye.push(Ln,Jn,Ge,0);const oi=Ln-Ge,na=Jn-Ge,Si=Ln+Ge,_n=Jn+Ge;if(Te=Te&&this.isOffscreen(oi,na,Si,_n),Fe=Fe||this.isInsideGrid(oi,na,Si,_n),i!=="always"&&this.grid.hitTestCircle(Ln,Jn,Ge,i,W)&&(ke=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!N&&ke||!Fe||ve<this.perspectiveRatioCutoff?[]:ye,offscreen:Te,collisionDetected:ke}}projectPathToScreenSpace(i,c){const m=(function(v,E){const k=o.N();return o.aB(k,E.pitchedLabelPlaneMatrix),v.map((D=>{const N=mr(D.x,D.y,k,E.getElevation),U=E.transform.projectTileCoordinates(N.point.x,N.point.y,E.unwrappedTileID,E.getElevation);return U.point.x=(.5*U.point.x+.5)*E.width,U.point.y=(.5*-U.point.y+.5)*E.height,U}))})(i,c);return(function(v){let E=0,k=0,D=0,N=0;for(let U=0;U<v.length;U++)v[U].isOccluded?(D=U+1,N=0):(N++,N>k&&(k=N,E=D));return v.slice(E,E+k)})(m)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],m=new o.aa;for(const J of i){const Y=new o.P(J.x+jn,J.y+jn);m.extend(Y),c.push(Y)}const{minX:v,minY:E,maxX:k,maxY:D}=m,N=this.grid.query(v,E,k,D).concat(this.ignoredGrid.query(v,E,k,D)),U={},W={};for(const J of N){const Y=J.key;if(U[Y.bucketInstanceId]===void 0&&(U[Y.bucketInstanceId]={}),U[Y.bucketInstanceId][Y.featureIndex])continue;const oe=[new o.P(J.x1,J.y1),new o.P(J.x2,J.y1),new o.P(J.x2,J.y2),new o.P(J.x1,J.y2)];o.aK(c,oe)&&(U[Y.bucketInstanceId][Y.featureIndex]=!0,W[Y.bucketInstanceId]===void 0&&(W[Y.bucketInstanceId]=[]),W[Y.bucketInstanceId].push(Y.featureIndex))}return W}insertCollisionBox(i,c,m,v,E,k){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:E,collisionGroupID:k,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,m,v,E,k){const D=m?this.ignoredGrid:this.grid,N={bucketInstanceId:v,featureIndex:E,collisionGroupID:k,overlapMode:c};for(let U=0;U<i.length;U+=4)D.insertCircle(N,i[U],i[U+1],i[U+2])}projectAndGetPerspectiveRatio(i,c,m,v,E){if(E){let k;v?(k=[i,c,v(i,c),1],o.aH(k,k,E)):(k=[i,c,0,1],$n(k,k,E));const D=k[3];return{x:(k[0]/D+1)/2*this.transform.width+jn,y:(-k[1]/D+1)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}{const k=this.transform.projectTileCoordinates(i,c,m,v);return{x:(k.point.x+1)/2*this.transform.width+jn,y:(1-k.point.y)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5,isOccluded:k.isOccluded,signedDistanceFromCamera:k.signedDistanceFromCamera}}}getPerspectiveRatio(i,c,m,v){const E=this.transform.projectTileCoordinates(i,c,m,v);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(i,c,m,v){return m<jn||i>=this.screenRightBoundary||v<jn||c>this.screenBottomBoundary}isInsideGrid(i,c,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=o.ar([]);return o.O(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,m,v,E,k,D,N,U,W,J){let Y=1,oe=0,ce=0,ye=1;const _e=i.anchorPointX+D[0],ve=i.anchorPointY+D[1];if(k&&!E){const Vt=this.projectAndGetPerspectiveRatio(_e+1,ve,v,U,J),It=Vt.x-N.x,Yt=Math.atan((Vt.y-N.y)/It)+(It<0?Math.PI:0),zr=Math.sin(Yt),Sn=Math.cos(Yt);Y=Sn,oe=zr,ce=-zr,ye=Sn}else if(!k&&E){const Vt=Yr(this.transform);Y=Vt.vecEast[0],oe=Vt.vecEast[1],ce=Vt.vecSouth[0],ye=Vt.vecSouth[1]}let we=N.x,Le=N.y,Se=c;E&&(we=_e,Le=ve,Se=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Se*=this.transform.getPitchedTextCorrection(_e,ve,v),W||(Se*=o.an(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),W&&(we+=Y*W.x*Se+ce*W.y*Se,Le+=oe*W.x*Se+ye*W.y*Se);const ke=i.x1*Se,Fe=i.x2*Se,Te=(ke+Fe)/2,Ge=i.y1*Se,ht=i.y2*Se,at=(Ge+ht)/2,ot=[{offsetX:ke,offsetY:Ge},{offsetX:Te,offsetY:Ge},{offsetX:Fe,offsetY:Ge},{offsetX:Fe,offsetY:at},{offsetX:Fe,offsetY:ht},{offsetX:Te,offsetY:ht},{offsetX:ke,offsetY:ht},{offsetX:ke,offsetY:at}];let st=[];for(const{offsetX:Vt,offsetY:It}of ot)st.push(new o.P(we+Y*Vt+ce*It,Le+oe*Vt+ye*It));let Nt=!1;if(E){const Vt=st.map((It=>this.projectAndGetPerspectiveRatio(It.x,It.y,v,U,J)));Nt=Vt.some((It=>!It.isOccluded)),st=Vt.map((It=>new o.P(It.x,It.y)))}else Nt=!0;return{box:o.aL(st),allPointsOccluded:!Nt}}}class Pu{constructor(i,c,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class rl{constructor(i,c,m,v,E){this.text=new Pu(i?i.text:null,c,m,E),this.icon=new Pu(i?i.icon:null,c,v,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Eh{constructor(i,c,m){this.text=i,this.icon=c,this.skipFade=m}}class sg{constructor(i,c,m,v,E){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=E}}class lg{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[i]}}function Ac(w,i,c,m,v){const{horizontalAlign:E,verticalAlign:k}=o.aS(w);return new o.P(-(E-.5)*i+m[0]*v,-(k-.5)*c+m[1]*v)}class qd{constructor(i,c,m,v,E){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new Ol(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new lg(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const c=this.terrain;return c?(m,v)=>c.getElevation(i,m,v):null}getBucketParts(i,c,m,v){const E=m.getBucket(c),k=m.latestFeatureIndex;if(!E||!k||c.id!==E.layerIds[0])return;const D=m.collisionBoxArray,N=E.layers[0].layout,U=E.layers[0].paint,W=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),J=m.tileSize/o.a5,Y=m.tileID.toUnwrapped(),oe=N.get("text-rotation-alignment")==="map",ce=o.aN(m,1,this.transform.zoom),ye=o.aO(this.collisionIndex.transform,m,U.get("text-translate"),U.get("text-translate-anchor")),_e=o.aO(this.collisionIndex.transform,m,U.get("icon-translate"),U.get("icon-translate-anchor")),ve=dr(oe,this.transform,ce);this.retainedQueryData[E.bucketInstanceId]=new sg(E.bucketInstanceId,k,E.sourceLayerIndex,E.index,m.tileID);const we={bucket:E,layout:N,translationText:ye,translationIcon:_e,unwrappedTileID:Y,pitchedLabelPlaneMatrix:ve,scale:W,textPixelRatio:J,holdingForFade:m.holdingForSymbolFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:o.ay(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(v)for(const Le of E.sortKeyRanges){const{sortKey:Se,symbolInstanceStart:ke,symbolInstanceEnd:Fe}=Le;i.push({sortKey:Se,symbolInstanceStart:ke,symbolInstanceEnd:Fe,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,c,m,v,E,k,D,N,U,W,J,Y,oe,ce,ye,_e,ve,we,Le,Se){const ke=o.aP[i.textAnchor],Fe=[i.textOffset0,i.textOffset1],Te=Ac(ke,m,v,Fe,E),Ge=this.collisionIndex.placeCollisionBox(c,Y,N,U,W,D,k,_e,J.predicate,Le,Te,Se);if((!we||this.collisionIndex.placeCollisionBox(we,Y,N,U,W,D,k,ve,J.predicate,Le,Te,Se).placeable)&&Ge.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:Fe,width:m,height:v,anchor:ke,textBoxScale:E,prevAnchor:ht},this.markUsedJustification(ce,ke,oe,ye),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ye,oe),this.placedOrientations[oe.crossTileID]=ye),{shift:Te,placedGlyphBoxes:Ge}}}placeLayerBucketPart(i,c,m){const{bucket:v,layout:E,translationText:k,translationIcon:D,unwrappedTileID:N,pitchedLabelPlaneMatrix:U,textPixelRatio:W,holdingForFade:J,collisionBoxArray:Y,partiallyEvaluatedTextSize:oe,collisionGroup:ce}=i.parameters,ye=E.get("text-optional"),_e=E.get("icon-optional"),ve=o.aQ(E,"text-overlap","text-allow-overlap"),we=ve==="always",Le=o.aQ(E,"icon-overlap","icon-allow-overlap"),Se=Le==="always",ke=E.get("text-rotation-alignment")==="map",Fe=E.get("text-pitch-alignment")==="map",Te=E.get("icon-text-fit")!=="none",Ge=E.get("symbol-z-order")==="viewport-y",ht=we&&(Se||!v.hasIconData()||_e),at=Se&&(we||!v.hasTextData()||ye);!v.collisionArrays&&Y&&v.deserializeCollisionBoxes(Y);const ot=this.retainedQueryData[v.bucketInstanceId].tileID,st=this._getTerrainElevationFunc(ot),Nt=this.transform.getFastPathSimpleProjectionMatrix(ot),Vt=(It,Yt,zr)=>{var Sn,Yn;if(c[It.crossTileID])return;if(J)return void(this.placements[It.crossTileID]=new Eh(!1,!1,!1));let On=!1,Qn=!1,Ln=!0,Jn=null,oi={box:null,placeable:!1,offscreen:null,occluded:!1},na={placeable:!1},Si=null,_n=null,qi=null,cs=0,Ns=0,hs=0;Yt.textFeatureIndex?cs=Yt.textFeatureIndex:It.useRuntimeCollisionCircles&&(cs=It.featureIndex),Yt.verticalTextFeatureIndex&&(Ns=Yt.verticalTextFeatureIndex);const Fa=Yt.textBox;if(Fa){const oo=zn=>{let Dn=o.az.horizontal;if(v.allowVerticalPlacement&&!zn&&this.prevPlacement){const zi=this.prevPlacement.placedOrientations[It.crossTileID];zi&&(this.placedOrientations[It.crossTileID]=zi,Dn=zi,this.markUsedOrientation(v,Dn,It))}return Dn},Bs=(zn,Dn)=>{if(v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Yt.verticalTextBox){for(const zi of v.writingModes)if(zi===o.az.vertical?(oi=Dn(),na=oi):oi=zn(),oi&&oi.placeable)break}else oi=zn()},Uo=It.textAnchorOffsetStartIndex,qo=It.textAnchorOffsetEndIndex;if(qo===Uo){const zn=(Dn,zi)=>{const Gi=this.collisionIndex.placeCollisionBox(Dn,ve,W,ot,N,Fe,ke,k,ce.predicate,st,void 0,Nt);return Gi&&Gi.placeable&&(this.markUsedOrientation(v,zi,It),this.placedOrientations[It.crossTileID]=zi),Gi};Bs((()=>zn(Fa,o.az.horizontal)),(()=>{const Dn=Yt.verticalTextBox;return v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Dn?zn(Dn,o.az.vertical):{box:null,offscreen:null}})),oo(oi&&oi.placeable)}else{let zn=o.aP[(Yn=(Sn=this.prevPlacement)===null||Sn===void 0?void 0:Sn.variableOffsets[It.crossTileID])===null||Yn===void 0?void 0:Yn.anchor];const Dn=(Gi,Ba,ba)=>{const ru=Gi.x2-Gi.x1,bg=Gi.y2-Gi.y1,em=It.textBoxScale,Tf=Te&&Le==="never"?Ba:null;let pl=null,Vs=ve==="never"?1:2,ml="never";zn&&Vs++;for(let rd=0;rd<Vs;rd++){for(let Mf=Uo;Mf<qo;Mf++){const nd=v.textAnchorOffsets.get(Mf);if(zn&&nd.textAnchor!==zn)continue;const Yc=this.attemptAnchorPlacement(nd,Gi,ru,bg,em,ke,Fe,W,ot,N,ce,ml,It,v,ba,k,D,Tf,st);if(Yc&&(pl=Yc.placedGlyphBoxes,pl&&pl.placeable))return On=!0,Jn=Yc.shift,pl}zn?zn=null:ml=ve}return m&&!pl&&(pl={box:this.collisionIndex.placeCollisionBox(Fa,"always",W,ot,N,Fe,ke,k,ce.predicate,st,void 0,Nt).box,offscreen:!1,placeable:!1,occluded:!1}),pl};Bs((()=>Dn(Fa,Yt.iconBox,o.az.horizontal)),(()=>{const Gi=Yt.verticalTextBox;return v.allowVerticalPlacement&&(!oi||!oi.placeable)&&It.numVerticalGlyphVertices>0&&Gi?Dn(Gi,Yt.verticalIconBox,o.az.vertical):{box:null,occluded:!0,offscreen:null}})),oi&&(On=oi.placeable,Ln=oi.offscreen);const zi=oo(oi&&oi.placeable);if(!On&&this.prevPlacement){const Gi=this.prevPlacement.variableOffsets[It.crossTileID];Gi&&(this.variableOffsets[It.crossTileID]=Gi,this.markUsedJustification(v,Gi.anchor,It,zi))}}}if(Si=oi,On=Si&&Si.placeable,Ln=Si&&Si.offscreen,It.useRuntimeCollisionCircles&&It.centerJustifiedTextSymbolIndex>=0){const oo=v.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),Bs=o.aA(v.textSizeData,oe,oo),Uo=E.get("text-padding");_n=this.collisionIndex.placeCollisionCircles(ve,oo,v.lineVertexArray,v.glyphOffsetArray,Bs,N,U,m,Fe,ce.predicate,It.collisionCircleDiameter,Uo,k,st),_n.circles.length&&_n.collisionDetected&&!m&&o.w("Collisions detected, but collision boxes are not shown"),On=we||_n.circles.length>0&&!_n.collisionDetected,Ln=Ln&&_n.offscreen}if(Yt.iconFeatureIndex&&(hs=Yt.iconFeatureIndex),Yt.iconBox){const oo=Bs=>this.collisionIndex.placeCollisionBox(Bs,Le,W,ot,N,Fe,ke,D,ce.predicate,st,Te&&Jn?Jn:void 0,Nt);na&&na.placeable&&Yt.verticalIconBox?(qi=oo(Yt.verticalIconBox),Qn=qi.placeable):(qi=oo(Yt.iconBox),Qn=qi.placeable),Ln=Ln&&qi.offscreen}const dl=ye||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,Fs=_e||It.numIconVertices===0;dl||Fs?Fs?dl||(Qn=Qn&&On):On=Qn&&On:Qn=On=Qn&&On;const fl=Qn&&qi.placeable;if(On&&Si.placeable&&this.collisionIndex.insertCollisionBox(Si.box,ve,E.get("text-ignore-placement"),v.bucketInstanceId,na&&na.placeable&&Ns?Ns:cs,ce.ID),fl&&this.collisionIndex.insertCollisionBox(qi.box,Le,E.get("icon-ignore-placement"),v.bucketInstanceId,hs,ce.ID),_n&&On&&this.collisionIndex.insertCollisionCircles(_n.circles,ve,E.get("text-ignore-placement"),v.bucketInstanceId,cs,ce.ID),m&&this.storeCollisionData(v.bucketInstanceId,zr,Yt,Si,qi,_n),It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Eh((On||ht)&&!(Si!=null&&Si.occluded),(Qn||at)&&!(qi!=null&&qi.occluded),Ln||v.justReloaded),c[It.crossTileID]=!0};if(Ge){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Yt=It.length-1;Yt>=0;--Yt){const zr=It[Yt];Vt(v.symbolInstances.get(zr),v.collisionArrays[zr],zr)}}else for(let It=i.symbolInstanceStart;It<i.symbolInstanceEnd;It++)Vt(v.symbolInstances.get(It),v.collisionArrays[It],It);v.justReloaded=!1}storeCollisionData(i,c,m,v,E,k){if(m.textBox||m.iconBox){let D,N;this.collisionBoxArrays.has(i)?D=this.collisionBoxArrays.get(i):(D=new Map,this.collisionBoxArrays.set(i,D)),D.has(c)?N=D.get(c):(N={text:null,icon:null},D.set(c,N)),m.textBox&&(N.text=v.box),m.iconBox&&(N.icon=E.box)}if(k){let D=this.collisionCircleArrays[i];D===void 0&&(D=this.collisionCircleArrays[i]=[]);for(let N=0;N<k.circles.length;N+=4)D.push(k.circles[N+0]-jn),D.push(k.circles[N+1]-jn),D.push(k.circles[N+2]),D.push(k.collisionDetected?1:0)}}markUsedJustification(i,c,m,v){let E;E=v===o.az.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[o.aR(c)];const k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const D of k)D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=E>=0&&D!==E?0:m.crossTileID)}markUsedOrientation(i,c,m){const v=c===o.az.horizontal||c===o.az.horizontalOnly?c:0,E=c===o.az.vertical?c:0,k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const D of k)i.text.placedSymbolArray.get(D).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,E=c?c.opacities:{},k=c?c.variableOffsets:{},D=c?c.placedOrientations:{};for(const N in this.placements){const U=this.placements[N],W=E[N];W?(this.opacities[N]=new rl(W,v,U.text,U.icon),m=m||U.text!==W.text.placed||U.icon!==W.icon.placed):(this.opacities[N]=new rl(null,v,U.text,U.icon,U.skipFade),m=m||U.text||U.icon)}for(const N in E){const U=E[N];if(!this.opacities[N]){const W=new rl(U,v,!1,!1);W.isHidden()||(this.opacities[N]=W,m=m||U.text.placed||U.icon.placed)}}for(const N in k)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=k[N]);for(const N in D)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=D[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const m={};for(const v of c){const E=v.getBucket(i);E&&v.latestFeatureIndex&&i.id===E.layerIds[0]&&this.updateBucketOpacities(E,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(i,c,m,v){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const E=i.layers[0],k=E.layout,D=new rl(null,0,!1,!1,!0),N=k.get("text-allow-overlap"),U=k.get("icon-allow-overlap"),W=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=k.get("text-rotation-alignment")==="map",Y=k.get("text-pitch-alignment")==="map",oe=k.get("icon-text-fit")!=="none",ce=new rl(null,0,N&&(U||!i.hasIconData()||k.get("icon-optional")),U&&(N||!i.hasTextData()||k.get("text-optional")),!0);!i.collisionArrays&&v&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(v);const ye=(ve,we,Le)=>{for(let Se=0;Se<we/4;Se++)ve.opacityVertexArray.emplaceBack(Le);ve.hasVisibleVertices=ve.hasVisibleVertices||Le!==Ic},_e=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ve=0;ve<i.symbolInstances.length;ve++){const we=i.symbolInstances.get(ve),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Se,crossTileID:ke}=we;let Fe=this.opacities[ke];m[ke]?Fe=D:Fe||(Fe=ce,this.opacities[ke]=Fe),m[ke]=!0;const Te=we.numIconVertices>0,Ge=this.placedOrientations[we.crossTileID],ht=Ge===o.az.vertical,at=Ge===o.az.horizontal||Ge===o.az.horizontalOnly;if(Le>0||Se>0){const st=Gd(Fe.text);ye(i.text,Le,ht?Ic:st),ye(i.text,Se,at?Ic:st);const Nt=Fe.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach((Yt=>{Yt>=0&&(i.text.placedSymbolArray.get(Yt).hidden=Nt||ht?1:0)})),we.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Nt||at?1:0);const Vt=this.variableOffsets[we.crossTileID];Vt&&this.markUsedJustification(i,Vt.anchor,we,Ge);const It=this.placedOrientations[we.crossTileID];It&&(this.markUsedJustification(i,"left",we,It),this.markUsedOrientation(i,It,we))}if(Te){const st=Gd(Fe.icon),Nt=!(oe&&we.verticalPlacedIconSymbolIndex&&ht);we.placedIconSymbolIndex>=0&&(ye(i.icon,we.numIconVertices,Nt?st:Ic),i.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ye(i.icon,we.numVerticalIconVertices,Nt?Ic:st),i.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}const ot=_e&&_e.has(ve)?_e.get(ve):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const st=i.collisionArrays[ve];if(st){let Nt=new o.P(0,0);if(st.textBox||st.verticalTextBox){let Vt=!0;if(W){const It=this.variableOffsets[ke];It?(Nt=Ac(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),J&&Nt._rotate(Y?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Vt=!1}if(st.textBox||st.verticalTextBox){let It;st.textBox&&(It=ht),st.verticalTextBox&&(It=at),Ch(i.textCollisionBox.collisionVertexArray,Fe.text.placed,!Vt||It,ot.text,Nt.x,Nt.y)}}if(st.iconBox||st.verticalIconBox){const Vt=!!(!at&&st.verticalIconBox);let It;st.iconBox&&(It=Vt),st.verticalIconBox&&(It=!Vt),Ch(i.iconCollisionBox.collisionVertexArray,Fe.icon.placed,It,ot.icon,oe?Nt.x:0,oe?Nt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Ch(w,i,c,m,v,E){m&&m.length!==0||(m=[0,0,0,0]);const k=m[0]-jn,D=m[1]-jn,N=m[2]-jn,U=m[3]-jn;w.emplaceBack(i?1:0,c?1:0,v||0,E||0,k,D),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,N,D),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,N,U),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,k,U)}const Eu=Math.pow(2,25),Mp=Math.pow(2,24),kp=Math.pow(2,17),mn=Math.pow(2,16),Th=Math.pow(2,9),Ap=Math.pow(2,8),Ll=Math.pow(2,1);function Gd(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const i=w.placed?1:0,c=Math.floor(127*w.opacity);return c*Eu+i*Mp+c*kp+i*mn+c*Th+i*Ap+c*Ll+i}const Ic=0;class nl{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,m,v,E){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(k,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort(((D,N)=>D.sortKey-N.sortKey)));this._currentPartIndex<k.length;)if(c.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,E())return!0;return!1}}class Dl{constructor(i,c,m,v,E,k,D,N){this.placement=new qd(i,c,k,D,N),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(i,c,m){const v=F(),E=()=>!this._forceFullPlacement&&F()-v>2;for(;this._currentPlacementIndex>=0;){const k=c[i[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=D)&&(!k.maxzoom||k.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new nl(k)),this._inProgressLayer.continuePlacement(m[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Br=512/o.a5/2;class Ts{constructor(i,c,m){this.tileID=i,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let E=0;E<c.length;E++){const k=c.get(E),D=k.key,N=v.get(D);N?N.push(k):v.set(D,[k])}for(const[E,k]of v){const D={positions:k.map((N=>({x:Math.floor(N.anchorX*Br),y:Math.floor(N.anchorY*Br)}))),crossTileIDs:k.map((N=>N.crossTileID))};if(D.positions.length>128){const N=new o.aT(D.positions.length,16,Uint16Array);for(const{x:U,y:W}of D.positions)N.add(U,W);N.finish(),delete D.positions,D.index=N}this._symbolsByKey[E]=D}}getScaledCoordinates(i,c){const{x:m,y:v,z:E}=this.tileID.canonical,{x:k,y:D,z:N}=c.canonical,U=Br/Math.pow(2,N-E),W=(D*o.a5+i.anchorY)*U,J=v*o.a5*Br;return{x:Math.floor((k*o.a5+i.anchorX)*U-m*o.a5*Br),y:Math.floor(W-J)}}findMatches(i,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<i.length;E++){const k=i.get(E);if(k.crossTileID)continue;const D=this._symbolsByKey[k.key];if(!D)continue;const N=this.getScaledCoordinates(k,c);if(D.index){const U=D.index.range(N.x-v,N.y-v,N.x+v,N.y+v).sort();for(const W of U){const J=D.crossTileIDs[W];if(!m[J]){m[J]=!0,k.crossTileID=J;break}}}else if(D.positions)for(let U=0;U<D.positions.length;U++){const W=D.positions[U],J=D.crossTileIDs[U];if(Math.abs(W.x-N.x)<=v&&Math.abs(W.y-N.y)<=v&&!m[J]){m[J]=!0,k.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class Rl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ms{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],E={};for(const k in v){const D=v[k];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+c),E[D.tileID.key]=D}this.indexes[m]=E}this.lng=i}addBucket(i,c,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const E in this.indexes){const k=this.indexes[E];if(Number(E)>i.overscaledZ)for(const D in k){const N=k[D];N.tileID.isChildOf(i)&&N.findMatches(c.symbolInstances,i,v)}else{const D=k[i.scaledTo(Number(E)).key];D&&D.findMatches(c.symbolInstances,i,v)}}for(let E=0;E<c.symbolInstances.length;E++){const k=c.symbolInstances.get(E);k.crossTileID||(k.crossTileID=m.generate(),v[k.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ts(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[i][v]}removeStaleBuckets(i){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const E in v)i[v[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[E]),delete v[E],c=!0)}return c}}class Qi{constructor(){this.layerIndexes={},this.crossTileIDs=new Rl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,m){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new Ms);let E=!1;const k={};v.handleWrapJump(m);for(const D of c){const N=D.getBucket(i);N&&i.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(D.tileID,N,this.crossTileIDs)&&(E=!0),k[N.bucketInstanceId]=!0)}return v.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach((m=>{c[m]=!0}));for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}var Li="void main() {fragColor=vec4(1.0);}";const wn={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Lr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Lr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr(Li,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Lr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Lr(Li,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Lr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Lr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Lr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Lr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Lr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Lr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Lr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Lr(w,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(v):v,D={};return{fragmentSource:w=w.replace(c,((N,U,W,J,Y)=>(D[Y]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
in ${W} ${J} ${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = u_${Y};
#endif
`))),vertexSource:i=i.replace(c,((N,U,W,J,Y)=>{const oe=J==="float"?"vec2":"vec4",ce=Y.match(/color/)?"color":oe;return D[Y]?U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${oe} a_${Y};
out ${W} ${J} ${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = a_${Y};
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = unpack_mix_${ce}(a_${Y}, u_${Y}_t);
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${oe} a_${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = a_${Y};
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = unpack_mix_${ce}(a_${Y}, u_${Y}_t);
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`})),staticAttributes:m,staticUniforms:k}}class In{constructor(i,c,m){this.vertexBuffer=i,this.indexBuffer=c,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Lo=o.aU([{name:"a_pos",type:"Int16",components:2}]);const Ra="#define PROJECTION_MERCATOR",eo="mercator";class Ji{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return eo}get shaderDefine(){return Ra}get shaderPreludeCode(){return wn.projectionMercator}get vertexShaderPreludeCode(){return wn.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,c,m,v,E){if(this._cachedMesh)return this._cachedMesh;const k=new o.aW;k.emplaceBack(0,0),k.emplaceBack(o.a5,0),k.emplaceBack(0,o.a5),k.emplaceBack(o.a5,o.a5);const D=i.createVertexBuffer(k,Lo.members),N=o.aX.simpleSegment(0,0,4,2),U=new o.aY;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const W=i.createIndexBuffer(U);return this._cachedMesh=new In(D,W,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class Cu{constructor(i=0,c=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=m,this.right=v}interpolate(i,c,m){return c.top!=null&&i.top!=null&&(this.top=o.G.number(i.top,c.top,m)),c.bottom!=null&&i.bottom!=null&&(this.bottom=o.G.number(i.bottom,c.bottom,m)),c.left!=null&&i.left!=null&&(this.left=o.G.number(i.left,c.left,m)),c.right!=null&&i.right!=null&&(this.right=o.G.number(i.right,c.right,m)),this}getCenter(i,c){const m=o.an((this.left+i-this.right)/2,0,i),v=o.an((this.top+c-this.bottom)/2,0,c);return new o.P(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Cu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jl(w,i){if(!w.renderWorldCopies||w.lngRange)return;const c=i.lng-w.center.lng;i.lng+=c>180?-360:c<-180?360:0}function Zn(w){return Math.max(0,Math.floor(w))}class Jo{constructor(i,c){var m;this.applyConstrain=(v,E)=>this._constrainOverride!==null?this._constrainOverride(v,E):this._callbacks.defaultConstrain(v,E),this._callbacks=i,this._tileSize=512,this._renderWorldCopies=(c==null?void 0:c.renderWorldCopies)===void 0||!!(c!=null&&c.renderWorldCopies),this._minZoom=(c==null?void 0:c.minZoom)||0,this._maxZoom=(c==null?void 0:c.maxZoom)||22,this._minPitch=(c==null?void 0:c.minPitch)==null?0:c==null?void 0:c.minPitch,this._maxPitch=(c==null?void 0:c.maxPitch)==null?60:c==null?void 0:c.maxPitch,this._constrainOverride=(m=c==null?void 0:c.constrainOverride)!==null&&m!==void 0?m:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Zn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Cu,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,c,m){this._constrainOverride=i.constrainOverride,this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=Zn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new Cu(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!m&&i.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get constrainOverride(){return this._constrainOverride}setConstrainOverride(i){i===void 0&&(i=null),this._constrainOverride!==i&&(this._constrainOverride=i,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const c=o.W(i,-180,180)*Math.PI/180;var m,v,E,k,D,N,U,W,J;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=S(),m=this._rotationMatrix,E=-this._bearingInRadians,k=(v=this._rotationMatrix)[0],D=v[1],N=v[2],U=v[3],W=Math.sin(E),J=Math.cos(E),m[0]=k*J+N*W,m[1]=D*J+U*W,m[2]=k*-W+N*J,m[3]=D*-W+U*J)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const c=o.an(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const c=i/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aZ(this._fovInRadians)}setFov(i){i=o.an(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=o.ap(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const c=this.applyConstrain(this._center,i).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aq(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,c){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,m){this._unmodified=!1,this._edgeInsets.interpolate(i,c,m),this.constrainInternal(),this._calcMatrices()}resize(i,c,m=!0){this._width=i,this._height=c,m&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Wr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ao,o.ao])}getCameraQueryGeometry(i,c){if(c.length===1)return[c[0],i];{const{minX:m,minY:v,maxX:E,maxY:k}=o.aa.fromPoints(c).extend(i);return[new o.P(m,v),new o.P(E,v),new o.P(E,k),new o.P(m,k),new o.P(m,v)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:m}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(m),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=o.ar(new Float64Array(16));o.Q(i,i,[this._width/2,-this._height/2,1]),o.O(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=o.ar(new Float64Array(16)),o.Q(i,i,[1,-1,1]),o.O(i,i,[-1,-1,0]),o.Q(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,c,m,v){const E=m!==void 0?m:this.bearing,k=v=v!==void 0?v:this.pitch,{distanceToCenter:D,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,k),{x:U,y:W}=sn(k,E),J=o.a9.fromLngLat(i,c);let Y,oe,ce=o.a_(1,J.y),ye=0;do{if(ye+=1,ye>10)break;oe=D/ce,Y=new o.a9(J.x+U*oe,J.y+W*oe),ce=1/Y.meterInMercatorCoordinateUnits()}while(Math.abs(D-oe*ce)>1e-12);return{center:Y.toLngLat(),elevation:N,zoom:o.at(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const c=1/this.worldSize,m=o.as(1,this.center.lat)*this.worldSize,v=o.a9.fromLngLat(this.center,this.elevation),E=v.x/c,k=v.y/c,D=v.z/c,N=this.pitch,U=this.bearing,{x:W,y:J,z:Y}=sn(N,U),oe=this.cameraToCenterDistance,ce=E+oe*-W,ye=k+oe*-J,_e=D+oe*Y,{distanceToCenter:ve,clampedElevation:we}=this._distanceToCenterFromAltElevationPitch(_e/m,i,N),Le=ve*m,Se=new o.a9((ce+W*Le)*c,(ye+J*Le)*c,0).toLngLat(),ke=o.as(1,Se.lat),Fe=o.at(this.height/2/Math.tan(this.fovInRadians/2)/ve/ke/this.tileSize);this._elevation=we,this._center=Se,this.setZoom(Fe)}_distanceToCenterFromAltElevationPitch(i,c,m){const v=-Math.cos(o.ap(m)),E=i-c;let k,D=c;return v*E>=0||Math.abs(v)<.1?(k=1e4,D=i+k*v):k=-E/v,{distanceToCenter:k,clampedElevation:D}}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=o.as(1,this.center.lat)*this.worldSize;return tt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const c=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/c,i.canonical.y/c,1/c/o.a5,1/c/o.a5]}}class ja{constructor(i,c){this.min=i,this.max=c,this.center=o.a$([],o.b0([],this.min,this.max),.5)}quadrant(i){const c=[i%2==0,i<2],m=o.b1(this.min),v=o.b1(this.max);for(let E=0;E<c.length;E++)m[E]=c[E]?this.min[E]:this.center[E],v[E]=c[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new ja(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let c=!0;for(let m=0;m<i.planes.length;m++){const v=this.intersectsPlane(i.planes[m]);if(v===0)return 0;v===1&&(c=!1)}return c?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let c=i[3],m=i[3];for(let v=0;v<3;v++)i[v]>0?(c+=i[v]*this.min[v],m+=i[v]*this.max[v]):(m+=i[v]*this.min[v],c+=i[v]*this.max[v]);return c>=0?2:m<0?0:1}}class Tu{distanceToTile2d(i,c,m,v){const E=v.distanceX([i,c]),k=v.distanceY([i,c]);return Math.hypot(E,k)}getWrap(i,c,m){return m}getTileBoundingVolume(i,c,m,v){var E,k;let D=0,N=0;if(v!=null&&v.terrain){const W=new o.a2(i.z,c,i.z,i.x,i.y),J=v.terrain.getMinMaxElevation(W);D=(E=J.minElevation)!==null&&E!==void 0?E:Math.min(0,m),N=(k=J.maxElevation)!==null&&k!==void 0?k:Math.max(0,m)}const U=1<<i.z;return new ja([c+i.x/U,i.y/U,D],[c+(i.x+1)/U,(i.y+1)/U,N])}allowVariableZoom(i,c){const m=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,v=o.an(78.5-m/2,0,60);return!!c.terrain||i.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class to{constructor(i,c,m){this.points=i,this.planes=c,this.aabb=m}static fromInvProjectionMatrix(i,c=1,m=0,v,E){const k=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],D=Math.pow(2,m),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Y=>(function(oe,ce,ye,_e){const ve=o.aH([],oe,ce),we=1/ve[3]/ye*_e;return o.b6(ve,ve,[we,we,1/ve[3],we])})(Y,i,c,D)));v&&(function(Y,oe,ce,ye){const _e=ye?4:0,ve=ye?0:4;let we=0;const Le=[],Se=[];for(let Te=0;Te<4;Te++){const Ge=o.b2([],Y[Te+ve],Y[Te+_e]),ht=o.b7(Ge);o.a$(Ge,Ge,1/ht),Le.push(ht),Se.push(Ge)}for(let Te=0;Te<4;Te++){const Ge=o.b8(Y[Te+_e],Se[Te],ce);we=Ge!==null&&Ge>=0?Math.max(we,Ge):Math.max(we,Le[Te])}const ke=(function(Te,Ge){const ht=o.b2([],Te[Ge[0]],Te[Ge[1]]),at=o.b2([],Te[Ge[2]],Te[Ge[1]]),ot=[0,0,0,0];return o.b3(ot,o.b4([],ht,at)),ot[3]=-o.b5(ot,Te[Ge[0]]),ot})(Y,oe),Fe=(function(Te,Ge){const ht=o.b9(Te),at=o.ba([],Te,1/ht),ot=o.b2([],Ge,o.a$([],at,o.b5(Ge,at))),st=o.b9(ot);if(st>0){const Nt=Math.sqrt(1-at[3]*at[3]),Vt=o.a$([],at,-at[3]),It=o.b0([],Vt,o.a$([],ot,Nt/st));return o.bb(Ge,It)}return null})(ce,ke);if(Fe!==null){const Te=Fe/o.b5(Se[0],ke);we=Math.min(we,Te)}for(let Te=0;Te<4;Te++){const Ge=Math.min(we,Le[Te]);Y[Te+ve]=[Y[Te+_e][0]+Se[Te][0]*Ge,Y[Te+_e][1]+Se[Te][1]*Ge,Y[Te+_e][2]+Se[Te][2]*Ge,1]}})(N,k[0],v,E);const U=k.map((Y=>{const oe=o.b2([],N[Y[0]],N[Y[1]]),ce=o.b2([],N[Y[2]],N[Y[1]]),ye=o.b3([],o.b4([],oe,ce)),_e=-o.b5(ye,N[Y[1]]);return ye.concat(_e)})),W=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],J=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Y of N)for(let oe=0;oe<3;oe++)W[oe]=Math.min(W[oe],Y[oe]),J[oe]=Math.max(J[oe],Y[oe]);return new to(N,U,new ja(W,J))}}class Mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c,m=!0){this._helper.resize(i,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,c){}constructor(i){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,m)=>{m=o.an(+m,this.minZoom,this.maxZoom);const v={center:new o.V(c.lng,c.lat),zoom:m};let E=this._helper._lngRange;if(!this._helper._renderWorldCopies&&E===null){const Se=179.9999999999;E=[-Se,Se]}const k=this.tileSize*o.aq(v.zoom);let D=0,N=k,U=0,W=k,J=0,Y=0;const{x:oe,y:ce}=this.size;if(this._helper._latRange){const Se=this._helper._latRange;D=o.X(Se[1])*k,N=o.X(Se[0])*k,N-D<ce&&(J=ce/(N-D))}E&&(U=o.W(o.Y(E[0])*k,0,k),W=o.W(o.Y(E[1])*k,0,k),W<U&&(W+=k),W-U<oe&&(Y=oe/(W-U)));const{x:ye,y:_e}=or(k,c);let ve,we;const Le=Math.max(Y||0,J||0);if(Le){const Se=new o.P(Y?(W+U)/2:ye,J?(N+D)/2:_e);return v.center=Mr(k,Se).wrap(),v.zoom+=o.at(Le),v}if(this._helper._latRange){const Se=ce/2;_e-Se<D&&(we=D+Se),_e+Se>N&&(we=N-Se)}if(E){const Se=(U+W)/2;let ke=ye;this._helper._renderWorldCopies&&(ke=o.W(ye,Se-k/2,Se+k/2));const Fe=oe/2;ke-Fe<U&&(ve=U+Fe),ke+Fe>W&&(ve=W-Fe)}if(ve!==void 0||we!==void 0){const Se=new o.P(ve??ye,we??_e);v.center=Mr(k,Se).wrap()}return v},this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._coveringTilesDetailsProvider=new Tu}clone(){const i=new Mu;return i.apply(this,!1),i}apply(i,c,m){this._helper.apply(i,c,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const c=[new o.bc(0,i)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new o.P(0,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),k=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),D=Math.floor(Math.min(m.x,v.x,E.x,k.x)),N=Math.floor(Math.max(m.x,v.x,E.x,k.x)),U=1;for(let W=D-U;W<=N+U;W++)W!==0&&c.push(new o.bc(W,i))}return c}getCameraFrustum(){return to.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const c=this.screenPointToLocation(this.centerPoint,i),m=i?i.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(i,c){const m=o.as(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,m),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),k=o.a9.fromLngLat(i),D=new o.a9(k.x-(v.x-E.x),k.y-(v.y-E.y));this.setCenter(D==null?void 0:D.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,c){return c?this.coordinatePoint(o.a9.fromLngLat(i),c.getElevationForLngLat(i,this),this._pixelMatrix3D):this.coordinatePoint(o.a9.fromLngLat(i))}screenPointToLocation(i,c){var m;return(m=this.screenPointToMercatorCoordinate(i,c))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(i,c){if(c){const m=c.pointCoordinate(i);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,c){const m=c||0,v=[i.x,i.y,0,1],E=[i.x,i.y,1,1];o.aH(v,v,this._pixelMatrixInverse),o.aH(E,E,this._pixelMatrixInverse);const k=v[3],D=E[3],N=v[1]/k,U=E[1]/D,W=v[2]/k,J=E[2]/D,Y=W===J?0:(m-W)/(J-W);return new o.a9(o.G.number(v[0]/k,E[0]/D,Y)/this.worldSize,o.G.number(N,U,Y)/this.worldSize,m)}coordinatePoint(i,c=0,m=this._pixelMatrix){const v=[i.x*this.worldSize,i.y*this.worldSize,c,1];return o.aH(v,v,m),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const i=Math.max(0,this._helper._height/2-Kr(this));return new Wr().extend(this.screenPointToLocation(new o.P(0,i))).extend(this.screenPointToLocation(new o.P(this._helper._width,i))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(i,c){return c?c.pointCoordinate(i)!=null:i.y>this.height/2-Kr(this)}calculatePosMatrix(i,c=!1,m){var v;const E=(v=i.key)!==null&&v!==void 0?v:o.bd(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),k=c?this._alignedPosMatrixCache:this._posMatrixCache;if(k.has(E)){const U=k.get(E);return m?U.f32:U.f64}const D=Ur(i,this.worldSize);o.S(D,c?this._alignedProjMatrix:this._viewProjMatrix,D);const N={f64:D,f32:new Float32Array(D)};return k.set(E,N),m?N.f32:N.f64}calculateFogMatrix(i){const c=i.key,m=this._fogMatrixCacheF32;if(m.has(c))return m.get(c);const v=Ur(i,this.worldSize);return o.S(v,this._fogMatrix,v),m.set(c,new Float32Array(v)),m.get(c)}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}_calculateNearFarZIfNeeded(i,c,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=i-v*this._helper._pixelPerMeter/Math.cos(c),k=v<0?E:i,D=Math.PI/2+this.pitchInRadians,N=o.ap(this.fov)*(Math.abs(Math.cos(o.ap(this.roll)))*this.height+Math.abs(Math.sin(o.ap(this.roll)))*this.width)/this.height*(.5+m.y/this.height),U=Math.sin(N)*k/Math.sin(o.an(Math.PI-D-N,.01,Math.PI-.01)),W=Kr(this),J=Math.atan(W/this._helper.cameraToCenterDistance),Y=o.ap(.75),oe=J>Y?2*J*(.5+m.y/(2*W)):Y,ce=Math.sin(oe)*k/Math.sin(o.an(Math.PI-D-oe,.01,Math.PI-.01)),ye=Math.min(U,ce);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ye+k),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,c=or(this.worldSize,this.center),m=c.x,v=c.y;this._helper._pixelPerMeter=o.as(1,this.center.lat)*this.worldSize;const E=o.ap(Math.min(this.pitch,Xt)),k=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E));let D;this._calculateNearFarZIfNeeded(k,E,i),D=new Float64Array(16),o.be(D,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aB(this._invProjMatrix,D),D[8]=2*-i.x/this._helper._width,D[9]=2*i.y/this._helper._height,this._projectionMatrix=o.bf(D),o.Q(D,D,[1,-1,1]),o.O(D,D,[0,0,-this._helper.cameraToCenterDistance]),o.bg(D,D,-this.rollInRadians),o.bh(D,D,this.pitchInRadians),o.bg(D,D,-this.bearingInRadians),o.O(D,D,[-m,-v,0]),this._mercatorMatrix=o.Q([],D,[this.worldSize,this.worldSize,this.worldSize]),o.Q(D,D,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,D),o.O(D,D,[0,0,-this.elevation]),this._viewProjMatrix=D,this._invViewProjMatrix=o.aB([],D);const N=[0,0,-1,1];o.aH(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.be(this._fogMatrix,this.fovInRadians,this.width/this.height,k,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-m,-v,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,D);const U=this._helper._width%2/2,W=this._helper._height%2/2,J=Math.cos(this.bearingInRadians),Y=Math.sin(-this.bearingInRadians),oe=m-Math.round(m)+J*U+Y*W,ce=v-Math.round(v)+J*W+Y*U,ye=new Float64Array(D);if(o.O(ye,ye,[oe>.5?oe-1:oe,ce>.5?ce-1:ce,0]),this._alignedProjMatrix=ye,D=o.aB(new Float64Array(16),this._pixelMatrix),!D)throw new Error("failed to invert matrix");this._pixelMatrixInverse=D,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return o.aH(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=o.as(1,this.center.lat)*this.worldSize;return tt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,c){const m=o.a9.fromLngLat(i),v=[m.x*this.worldSize,m.y*this.worldSize,c,1];return o.aH(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(i){const{overscaledTileID:c,aligned:m,applyTerrainMatrix:v}=i,E=this._helper.getMercatorTileCoordinates(c),k=c?this.calculatePosMatrix(c,m,!0):null;let D;return D=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:k||o.bi(),{mainMatrix:D,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:D}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,c,m){return 1}transformLightDirection(i){return o.b1(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,c,m,v){const E=this.calculatePosMatrix(m);let k;v?(k=[i,c,v(i,c),1],o.aH(k,k,E)):(k=[i,c,0,1],$n(k,k,E));const D=k[3];return{point:new o.P(k[0]/D,k[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}populateCache(i){for(const c of i)this.calculatePosMatrix(c)}getMatrixForModel(i,c){const m=o.a9.fromLngLat(i,c),v=m.meterInMercatorCoordinateUnits(),E=o.bj();return o.O(E,E,[m.x,m.y,m.z]),o.bg(E,E,Math.PI),o.bh(E,E,Math.PI/2),o.Q(E,E,[-v,v,v]),E}getProjectionDataForCustomLayer(i=!0){const c=new o.a2(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:i}),v=Ur(c,this.worldSize);o.S(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const E=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],k=o.bk();return o.Q(k,v,E),m.fallbackMatrix=k,m.mainMatrix=k,m}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function es(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Mh(w){if(w.useSlerp)if(w.k<1){const i=o.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=o.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);o.bm(m,i,c,w.k);const v=o.bn(m);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(o.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function kh(w,i,c,m,v){const E=v.padding,k=or(v.worldSize,c.getNorthWest()),D=or(v.worldSize,c.getNorthEast()),N=or(v.worldSize,c.getSouthEast()),U=or(v.worldSize,c.getSouthWest()),W=o.ap(-m),J=k.rotate(W),Y=D.rotate(W),oe=N.rotate(W),ce=U.rotate(W),ye=new o.P(Math.max(J.x,Y.x,ce.x,oe.x),Math.max(J.y,Y.y,ce.y,oe.y)),_e=new o.P(Math.min(J.x,Y.x,ce.x,oe.x),Math.min(J.y,Y.y,ce.y,oe.y)),ve=ye.sub(_e),we=(v.width-(E.left+E.right+i.left+i.right))/ve.x,Le=(v.height-(E.top+E.bottom+i.top+i.bottom))/ve.y;if(Le<0||we<0)return void es();const Se=Math.min(o.at(v.scale*Math.min(we,Le)),w.maxZoom),ke=o.P.convert(w.offset),Fe=new o.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(o.ap(m)),Te=ke.add(Fe).mult(v.scale/o.aq(Se));return{center:Mr(v.worldSize,k.add(N).div(2).sub(Te)),zoom:Se,bearing:m}}class zl{get useGlobeControls(){return!1}handlePanInertia(i,c){const m=i.mag(),v=Math.abs(Kr(c));return{easingOffset:i.mult(Math.min(.75*v/m,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(i,c){i.bearingDelta&&c.setBearing(c.bearing+i.bearingDelta),i.pitchDelta&&c.setPitch(c.pitch+i.pitchDelta),i.rollDelta&&c.setRoll(c.roll+i.rollDelta),i.zoomDelta&&c.setZoom(c.zoom+i.zoomDelta)}handleMapControlsPan(i,c,m){i.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(m,i.around)}cameraForBoxAndBearing(i,c,m,v,E){return kh(i,c,m,v,E)}handleJumpToCenterZoom(i,c){i.zoom!==(c.zoom!==void 0?+c.zoom:i.zoom)&&i.setZoom(+c.zoom),c.center!==void 0&&i.setCenter(o.V.convert(c.center))}handleEaseTo(i,c){const m=i.zoom,v=i.padding,E={roll:i.roll,pitch:i.pitch,bearing:i.bearing},k={roll:c.roll===void 0?i.roll:c.roll,pitch:c.pitch===void 0?i.pitch:c.pitch,bearing:c.bearing===void 0?i.bearing:c.bearing},D=c.zoom!==void 0,N=!i.isPaddingEqual(c.padding);let U=!1;const W=D?+c.zoom:i.zoom;let J=i.centerPoint.add(c.offsetAsPoint);const Y=i.screenPointToLocation(J),{center:oe,zoom:ce}=i.applyConstrain(o.V.convert(c.center||Y),W??m);jl(i,oe);const ye=or(i.worldSize,Y),_e=or(i.worldSize,oe).sub(ye),ve=o.aq(ce-m);return U=ce!==m,{easeFunc:we=>{if(U&&i.setZoom(o.G.number(m,ce,we)),o.bo(E,k)||Mh({startEulerAngles:E,endEulerAngles:k,tr:i,k:we,useSlerp:E.roll!=k.roll}),N&&(i.interpolatePadding(v,c.padding,we),J=i.centerPoint.add(c.offsetAsPoint)),c.around)i.setLocationAtPoint(c.around,c.aroundPoint);else{const Le=o.aq(i.zoom-m),Se=ce>m?Math.min(2,ve):Math.max(.5,ve),ke=Math.pow(Se,1-we),Fe=Mr(i.worldSize,ye.add(_e.mult(we*ke)).mult(Le));i.setLocationAtPoint(i.renderWorldCopies?Fe.wrap():Fe,J)}},isZooming:U,elevationCenter:oe}}handleFlyTo(i,c){const m=c.zoom!==void 0,v=i.zoom,E=i.applyConstrain(o.V.convert(c.center||c.locationAtOffset),m?+c.zoom:v),k=E.center,D=E.zoom;jl(i,k);const N=or(i.worldSize,c.locationAtOffset),U=or(i.worldSize,k).sub(N),W=U.mag(),J=o.aq(D-v);let Y;if(c.minZoom!==void 0){const oe=Math.min(+c.minZoom,v,D),ce=i.applyConstrain(k,oe).zoom;Y=o.aq(ce-v)}return{easeFunc:(oe,ce,ye,_e)=>{i.setZoom(oe===1?D:v+o.at(ce));const ve=oe===1?k:Mr(i.worldSize,N.add(U.mult(ye)).mult(ce));i.setLocationAtPoint(i.renderWorldCopies?ve.wrap():ve,_e)},scaleOfZoom:J,targetCenter:k,scaleOfMinZoom:Y,pixelPathLength:W}}}class un{constructor(i,c,m){this.blendFunction=i,this.blendColor=c,this.mask=m}}un.Replace=[1,0],un.disabled=new un(un.Replace,o.bp.transparent,[!1,!1,!1,!1]),un.unblended=new un(un.Replace,o.bp.transparent,[!0,!0,!0,!0]),un.alphaBlended=new un([1,771],o.bp.transparent,[!0,!0,!0,!0]);const Nl=2305;class Xr{constructor(i,c,m){this.enable=i,this.mode=c,this.frontFace=m}}Xr.disabled=new Xr(!1,1029,Nl),Xr.backCCW=new Xr(!0,1029,Nl),Xr.frontCCW=new Xr(!0,1028,Nl);class Vr{constructor(i,c,m){this.func=i,this.mask=c,this.range=m}}Vr.ReadOnly=!1,Vr.ReadWrite=!0,Vr.disabled=new Vr(519,Vr.ReadOnly,[0,1]);const il=7680;class Jr{constructor(i,c,m,v,E,k){this.test=i,this.ref=c,this.mask=m,this.fail=v,this.depthFail=E,this.pass=k}}Jr.disabled=new Jr({func:519,mask:0},0,0,il,il,il);const Oc=new WeakMap;function hi(w){var i;if(Oc.has(w))return Oc.get(w);{const c=(i=w.getParameter(w.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Oc.set(w,c),c}}class ts{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const c=i.context,m=c.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new o.aW;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const E=new o.aY;E.emplaceBack(0,1,2),this._fullscreenTriangle=new In(c.createVertexBuffer(v,Lo.members),c.createIndexBuffer(E),o.aX.simpleSegment(0,0,v.length,E.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(m.TEXTURE1);const k=m.createTexture();m.bindTexture(m.TEXTURE_2D,k),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(k),hi(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,c){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,c=i.gl;i.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,c){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:o.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,Vr.disabled,Jr.disabled,un.unblended,Xr.disabled,((E,k)=>({u_input:E,u_output_expected:k}))(i,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&hi(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const E=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&hi(i)){const c=i.clientWaitSync(this._readbackQueue.sync,0,0);if(c===i.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ts._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let c=0;return c+=i[0]/256,c+=i[1]/65536,c+=i[2]/16777216,i[3]<127&&(c=-c),c/128}}const ks=o.a5/128;function Lc(w,i){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,m=c+(w.generateBorders?2:0),v=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),E=m+1,k=v+1,D=w.generateBorders?-1:0,N=w.generateBorders||w.extendToNorthPole?-1:0,U=c+(w.generateBorders?1:0),W=c+(w.generateBorders||w.extendToSouthPole?1:0),J=E*k,Y=m*v*6,oe=E*k>65536;if(oe&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ce=oe||i==="32bit",ye=new Int16Array(2*J);let _e=0;for(let Le=N;Le<=W;Le++)for(let Se=D;Se<=U;Se++){let ke=Se/c*o.a5;Se===-1&&(ke=-ks),Se===c+1&&(ke=o.a5+ks);let Fe=Le/c*o.a5;Le===-1&&(Fe=w.extendToNorthPole?o.br:-ks),Le===c+1&&(Fe=w.extendToSouthPole?o.bs:o.a5+ks),ye[_e++]=ke,ye[_e++]=Fe}const ve=ce?new Uint32Array(Y):new Uint16Array(Y);let we=0;for(let Le=0;Le<v;Le++)for(let Se=0;Se<m;Se++){const ke=Se+1+Le*E,Fe=Se+(Le+1)*E,Te=Se+1+(Le+1)*E;ve[we++]=Se+Le*E,ve[we++]=Fe,ve[we++]=ke,ve[we++]=ke,ve[we++]=Fe,ve[we++]=Te}return{vertices:ye.buffer.slice(0),indices:ve.buffer.slice(0),uses32bitIndices:ce}}const Ah=new o.aV({fill:new o.bt(128,2),line:new o.bt(512,0),tile:new o.bt(128,32),stencil:new o.bt(128,1),circle:3});class Ih{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return wn.projectionGlobe}get vertexShaderPreludeCode(){return wn.projectionMercator.vertexSource}get subdivisionGranularity(){return Ah}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new ts(i));const c=o.X(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,m),E=F();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=E);const k=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bv(k))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,c,m,v,E){const k=(E==="stencil"?Ah.stencil:Ah.tile).getGranularityForZoomLevel(c.z);return this._getMesh(i,{granularity:k,generateBorders:m,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(i,c){const m=this._getMeshKey(c);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=(function(E,k){const D=Lc(k,"16bit"),N=o.aW.deserialize({arrayBuffer:D.vertices,length:D.vertices.byteLength/2/2}),U=o.aY.deserialize({arrayBuffer:D.indices,length:D.indices.byteLength/2/3});return new In(E.createVertexBuffer(N,Lo.members),E.createIndexBuffer(U),o.aX.simpleSegment(0,0,N.length,U.length))})(i,c);return this._tileMeshCache[m]=v,v}recalculate(i){}hasTransition(){const i=F();let c=!1;return c=c||(i-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const Ip=new o.t({type:new o.D(o.u.projection.type)});class Dc extends o.E{constructor(i){super(),this._transitionable=new o.x(Ip,void 0),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new Ji,this._verticalPerspectiveProjection=new Ih}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof o.bw){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,c,m,v,E){return this.currentProjection.getMeshFromTileID(i,c,m,v,E)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function ea(w){const i=ku(w.worldSize,w.center.lat);return 2*Math.PI*i}function rs(w,i,c,m,v){const E=1/(1<<v),k=i/o.a5*E+m*E,D=o.by((w/o.a5*E+c*E)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI,U=Math.cos(N),W=new Float64Array(3);return W[0]=Math.sin(D)*U,W[1]=Math.sin(N),W[2]=Math.cos(D)*U,W}function ni(w){return(function(i,c){const m=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(i)*m,v[1]=Math.sin(c),v[2]=Math.cos(i)*m,v})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function ku(w,i){return w/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Op(w){const i=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const m=w[0]/c,v=Math.acos(w[2]/c),E=(m>0?v:-v)/Math.PI*180;return new o.V(o.W(E,-180,180),i)}return new o.V(0,i)}function Au(w){return Math.cos(w*Math.PI/180)}function pi(w,i){const c=Au(w),m=Au(i);return o.at(m/c)}function ug(w,i){const c=w.rotate(i.bearingInRadians),m=i.zoom+pi(i.center.lat,0),v=o.bu(1/Au(i.center.lat),1/Au(Math.min(Math.abs(i.center.lat),60)),o.bx(m,7,3,0,1)),E=360/ea({worldSize:i.worldSize,center:{lat:i.center.lat}});return new o.V(i.center.lng-c.x*E*v,o.an(i.center.lat+c.y*E,-o.ao,o.ao))}function Lp(w){const i=.5*w,c=Math.sin(i),m=Math.cos(i);return Math.log(c+m)-Math.log(m-c)}function cg(w,i,c,m){const v=w.lat+c*m;if(Math.abs(c)>1){const E=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,k=Math.abs(w.lat+c)*Math.PI/180,D=Lp(E+m*(k-E)),N=Lp(E),U=Lp(k);return new o.V(w.lng+i*((D-N)/(U-N)),v)}return new o.V(w.lng+i*m,v)}class ev{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=i}swapBuffers(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(i,c,m,v){const E=`${i.z}_${i.x}_${i.y}_${v!=null&&v.terrain?"t":""}`,k=this._cache.get(E);if(k)return k;const D=this._cachePrevious.get(E);if(D)return this._cache.set(E,D),D;const N=this._boundingVolumeFactory(i,c,m,v);return this._cache.set(E,N),this._hadAnyChanges=!0,N}}class Iu{constructor(i,c,m,v){this.min=m,this.max=v,this.points=i,this.planes=c}static fromAabb(i,c){const m=[];for(let v=0;v<8;v++)m.push([1&~v?i[0]:c[0],(v>>1&1)==1?c[1]:i[1],(v>>2&1)==1?c[2]:i[2]]);return new Iu(m,[[-1,0,0,c[0]],[1,0,0,-i[0]],[0,-1,0,c[1]],[0,1,0,-i[1]],[0,0,-1,c[2]],[0,0,1,-i[2]]],i,c)}static fromCenterSizeAngles(i,c,m){const v=o.bB([],m[0],m[1],m[2]),E=o.bC([],[c[0],0,0],v),k=o.bC([],[0,c[1],0],v),D=o.bC([],[0,0,c[2]],v),N=[...i],U=[...i];for(let J=0;J<8;J++)for(let Y=0;Y<3;Y++){const oe=i[Y]+E[Y]*(1&~J?-1:1)+k[Y]*((J>>1&1)==1?1:-1)+D[Y]*((J>>2&1)==1?1:-1);N[Y]=Math.min(N[Y],oe),U[Y]=Math.max(U[Y],oe)}const W=[];for(let J=0;J<8;J++){const Y=[...i];o.b0(Y,Y,o.a$([],E,1&~J?-1:1)),o.b0(Y,Y,o.a$([],k,(J>>1&1)==1?1:-1)),o.b0(Y,Y,o.a$([],D,(J>>2&1)==1?1:-1)),W.push(Y)}return new Iu(W,[[...E,-o.b5(E,W[0])],[...k,-o.b5(k,W[0])],[...D,-o.b5(D,W[0])],[-E[0],-E[1],-E[2],-o.b5(E,W[7])],[-k[0],-k[1],-k[2],-o.b5(k,W[7])],[-D[0],-D[1],-D[2],-o.b5(D,W[7])]],N,U)}intersectsFrustum(i){let c=!0;const m=this.points.length,v=this.planes.length,E=i.planes.length,k=i.points.length;for(let D=0;D<E;D++){const N=i.planes[D];let U=0;for(let W=0;W<m;W++){const J=this.points[W];N[0]*J[0]+N[1]*J[1]+N[2]*J[2]+N[3]>=0&&U++}if(U===0)return 0;U<m&&(c=!1)}if(c)return 2;for(let D=0;D<v;D++){const N=this.planes[D];let U=0;for(let W=0;W<k;W++){const J=i.points[W];N[0]*J[0]+N[1]*J[1]+N[2]*J[2]+N[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(i){const c=this.points.length;let m=0;for(let v=0;v<c;v++){const E=this.points[v];i[0]*E[0]+i[1]*E[1]+i[2]*E[2]+i[3]>=0&&m++}return m===c?2:m===0?0:1}}function Wd(w,i,c){const m=w-i;return m<0?-m:Math.max(0,m-c)}function Rc(w,i,c,m,v){const E=w-c;let k;return k=E<0?Math.min(-E,1+E-v):E>1?Math.min(Math.max(E-v,0),1-E):0,Math.max(k,Wd(i,m,v))}class Dp{constructor(){this._boundingVolumeCache=new ev(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(i,c,m,v){const E=1<<m.z,k=1/E,D=m.x/E,N=m.y/E;let U=2;return U=Math.min(U,Rc(i,c,D,N,k)),U=Math.min(U,Rc(i,c,D+.5,-N-k,k)),U=Math.min(U,Rc(i,c,D+.5,2-N-k,k)),U}getWrap(i,c,m){const v=1<<c.z,E=1/v,k=c.x/v,D=Wd(i.x,k,E),N=Wd(i.x,k-1,E),U=Wd(i.x,k+1,E),W=Math.min(D,N,U);return W===U?1:W===N?-1:0}allowVariableZoom(i,c){return yn(i,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(i,c,m,v){return this._boundingVolumeCache.getTileBoundingVolume(i,c,m,v)}_computeTileBoundingVolume(i,c,m,v){var E,k;let D=0,N=0;if(v!=null&&v.terrain){const U=new o.a2(i.z,c,i.z,i.x,i.y),W=v.terrain.getMinMaxElevation(U);D=(E=W.minElevation)!==null&&E!==void 0?E:Math.min(0,m),N=(k=W.maxElevation)!==null&&k!==void 0?k:Math.max(0,m)}if(D/=o.bE,N/=o.bE,D+=1,N+=1,i.z<=0)return Iu.fromAabb([-N,-N,-N],[N,N,N]);if(i.z===1)return Iu.fromAabb([i.x===0?-N:0,i.y===0?0:-N,-N],[i.x===0?0:N,i.y===0?N:0,N]);{const U=[rs(0,0,i.x,i.y,i.z),rs(o.a5,0,i.x,i.y,i.z),rs(o.a5,o.a5,i.x,i.y,i.z),rs(0,o.a5,i.x,i.y,i.z)],W=[];for(const ot of U)W.push(o.a$([],ot,N));if(N!==D)for(const ot of U)W.push(o.a$([],ot,D));i.y===0&&W.push([0,1,0]),i.y===(1<<i.z)-1&&W.push([0,-1,0]);const J=[1,1,1],Y=[-1,-1,-1];for(const ot of W)for(let st=0;st<3;st++)J[st]=Math.min(J[st],ot[st]),Y[st]=Math.max(Y[st],ot[st]);const oe=rs(o.a5/2,o.a5/2,i.x,i.y,i.z),ce=o.b4([],[0,1,0],oe);o.b3(ce,ce);const ye=o.b4([],oe,ce);o.b3(ye,ye);const _e=o.b4([],U[2],U[1]);o.b3(_e,_e);const ve=o.b4([],U[0],U[3]);o.b3(ve,ve),W.push(o.a$([],oe,N)),i.y>=(1<<i.z)/2&&W.push(o.a$([],rs(o.a5/2,0,i.x,i.y,i.z),N)),i.y<(1<<i.z)/2&&W.push(o.a$([],rs(o.a5/2,o.a5,i.x,i.y,i.z),N));const we=Oh(oe,W),Le=Oh(ye,W),Se=[-oe[0],-oe[1],-oe[2],we.max],ke=[oe[0],oe[1],oe[2],-we.min],Fe=[-ye[0],-ye[1],-ye[2],Le.max],Te=[ye[0],ye[1],ye[2],-Le.min],Ge=[..._e,0],ht=[...ve,0],at=[];return i.y===0?at.push(o.bD(ht,Ge,Se),o.bD(ht,Ge,ke)):at.push(o.bD(Fe,Ge,Se),o.bD(Fe,Ge,ke),o.bD(Fe,ht,Se),o.bD(Fe,ht,ke)),i.y===(1<<i.z)-1?at.push(o.bD(ht,Ge,Se),o.bD(ht,Ge,ke)):at.push(o.bD(Te,Ge,Se),o.bD(Te,Ge,ke),o.bD(Te,ht,Se),o.bD(Te,ht,ke)),new Iu(at,[Se,ke,Fe,Te,Ge,ht],J,Y)}}}function Oh(w,i){let c=1/0,m=-1/0;for(const v of i){const E=o.b5(w,v);c=Math.min(c,E),m=Math.max(m,E)}return{min:c,max:m}}class Fl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c){this._helper.resize(i,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(i){this._cachedClippingPlane=o.bF(),this._projectionMatrix=o.bj(),this._globeViewProjMatrix32f=o.bi(),this._globeViewProjMatrixNoCorrection=o.bj(),this._globeViewProjMatrixNoCorrectionInverted=o.bj(),this._globeProjMatrixInverted=o.bj(),this._cameraPosition=o.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,m)=>{const v=o.an(c.lat,-o.ao,o.ao),E=o.an(+m,this.minZoom+pi(0,v),this.maxZoom);return{center:new o.V(c.lng,v),zoom:E}},this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._coveringTilesDetailsProvider=new Dp}clone(){const i=new Fl;return i.apply(this,!1),i}apply(i,c,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(i,c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=o.bz();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:c,applyGlobeMatrix:m}=i,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const c=this.pitchInRadians,m=this.cameraToCenterDistance/i,v=Math.sin(c)*m,E=Math.cos(c)*m+1,k=1/Math.sqrt(v*v+E*E)*1;let D=-v,N=E;const U=Math.sqrt(D*D+N*N);D/=U,N/=U;const W=[0,D,N];o.bG(W,W,[0,0,0],-this.bearingInRadians),o.bH(W,W,[0,0,0],-1*this.center.lat*Math.PI/180),o.bI(W,W,[0,0,0],this.center.lng*Math.PI/180);const J=1/o.b7(W);return o.a$(W,W,J),[...W,-k*J]}isLocationOccluded(i){return!this.isSurfacePointVisible(ni(i))}transformLightDirection(i){const c=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),E=[Math.sin(c)*v,Math.sin(m),Math.cos(c)*v],k=[E[2],0,-E[0]],D=[0,0,0];o.b4(D,k,E),o.b3(k,k),o.b3(D,D);const N=[0,0,0];return o.b3(N,[k[0]*i[0]+D[0]*i[1]+E[0]*i[2],k[1]*i[0]+D[1]*i[1]+E[1]*i[2],k[2]*i[0]+D[2]*i[1]+E[2]*i[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,c,m){const v=(function(D,N,U){const W=1/(1<<U.z);return new o.a9(D/o.a5*W+U.x*W,N/o.a5*W+U.y*W)})(i,c,m.canonical),E=(k=v.y,[o.by(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI]);var k;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(i,c,m,v){const E=m.canonical,k=rs(i,c,E.x,E.y,E.z),D=1+(v?v(i,c):0)/o.bE,N=[k[0]*D,k[1]*D,k[2]*D,1];o.aH(N,N,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,W=U[0]*k[0]+U[1]*k[1]+U[2]*k[2]+U[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:W}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=ku(this.worldSize,this.center.lat),c=o.bk(),m=o.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),o.be(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=o.bf(c),this._globeProjMatrixInverted=o.bk(),o.aB(this._globeProjMatrixInverted,c),o.O(c,c,[0,0,-this.cameraToCenterDistance]),o.bg(c,c,this.rollInRadians),o.bh(c,c,-this.pitchInRadians),o.bg(c,c,this.bearingInRadians),o.O(c,c,[0,0,-i]);const E=o.bz();E[0]=i,E[1]=i,E[2]=i,o.bh(m,c,this.center.lat*Math.PI/180),o.bJ(m,m,-this.center.lng*Math.PI/180),o.Q(m,m,E),this._globeViewProjMatrixNoCorrection=m,o.bh(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bJ(c,c,-this.center.lng*Math.PI/180),o.Q(c,c,E),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),o.aB(this._globeViewProjMatrixNoCorrectionInverted,m);const k=o.bz();this._cameraPosition=o.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/i,o.bG(this._cameraPosition,this._cameraPosition,k,-this.rollInRadians),o.bH(this._cameraPosition,this._cameraPosition,k,this.pitchInRadians),o.bG(this._cameraPosition,this._cameraPosition,k,-this.bearingInRadians),o.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bH(this._cameraPosition,this._cameraPosition,k,-this.center.lat*Math.PI/180),o.bI(this._cameraPosition,this._cameraPosition,k,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const D=o.bf(this._globeViewProjMatrixNoCorrectionInverted);o.Q(D,D,[1,1,-1]),this._cachedFrustum=to.fromInvProjectionMatrix(D,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(i){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.bk();return o.ar(c),c}getVisibleUnwrappedCoordinates(i){return[new o.bc(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ni(i);o.a$(m,m,1+c/o.bE);const v=o.bF();return o.aH(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(i){}getBounds(){const i=.5*this.width,c=.5*this.height,m=[new o.P(0,0),new o.P(i,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(i,this.height),new o.P(0,this.height),new o.P(0,c)],v=[];for(const J of m)v.push(this.unprojectScreenPoint(J));let E=0,k=0,D=0,N=0;const U=this.center;for(const J of v){const Y=o.bK(U.lng,J.lng),oe=o.bK(U.lat,J.lat);Y<k&&(k=Y),Y>E&&(E=Y),oe<N&&(N=oe),oe>D&&(D=oe)}const W=[U.lng+k,U.lat+N,U.lng+E,U.lat+D];return this.isSurfacePointOnScreen([0,1,0])&&(W[3]=90,W[0]=-180,W[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(W[1]=-90,W[0]=-180,W[2]=180),new Wr(W)}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}setLocationAtPoint(i,c){const m=ni(this.unprojectScreenPoint(c)),v=ni(i),E=o.bz();o.bL(E);const k=o.bz();o.bI(k,m,E,-this.center.lng*Math.PI/180),o.bH(k,k,E,this.center.lat*Math.PI/180);const D=v[0]*v[0]+v[2]*v[2],N=k[0]*k[0];if(D<N)return;const U=Math.sqrt(D-N),W=-U,J=o.bM(v[0],v[2],k[0],U),Y=o.bM(v[0],v[2],k[0],W),oe=o.bz();o.bI(oe,v,E,-J);const ce=o.bM(oe[1],oe[2],k[1],k[2]),ye=o.bz();o.bI(ye,v,E,-Y);const _e=o.bM(ye[1],ye[2],k[1],k[2]),ve=.5*Math.PI,we=ce>=-ve&&ce<=ve,Le=_e>=-ve&&_e<=ve;let Se,ke;if(we&&Le){const ht=this.center.lng*Math.PI/180,at=this.center.lat*Math.PI/180;o.bN(J,ht)+o.bN(ce,at)<o.bN(Y,ht)+o.bN(_e,at)?(Se=J,ke=ce):(Se=Y,ke=_e)}else if(we)Se=J,ke=ce;else{if(!Le)return;Se=Y,ke=_e}const Fe=Se/Math.PI*180,Te=ke/Math.PI*180,Ge=this.center.lat;this.setCenter(new o.V(Fe,o.an(Te,-90,90))),this.setZoom(this.zoom+pi(Ge,this.center.lat))}locationToScreenPoint(i,c){const m=ni(i);if(c){const v=c.getElevationForLngLatZoom(i,this._helper._tileZoom);o.a$(m,m,1+v/o.bE)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(i){const c=o.bF();return o.aH(c,[...i,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,c){if(c){const m=c.pointCoordinate(i);if(m)return m}return o.a9.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,c){var m;return(m=this.screenPointToMercatorCoordinate(i,c))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(i,c){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(i){const c=o.bF();c[0]=i.x/this.width*2-1,c[1]=-1*(i.y/this.height*2-1),c[2]=1,c[3]=1,o.aH(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const m=o.bz();m[0]=c[0]-this._cameraPosition[0],m[1]=c[1]-this._cameraPosition[1],m[2]=c[2]-this._cameraPosition[2];const v=o.bz();return o.b3(v,m),v}isSurfacePointVisible(i){const c=this._cachedClippingPlane;return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const c=o.bF();return o.aH(c,[...i,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(i,c){const m=o.b5(i,c),v=o.bz(),E=o.bz();o.a$(E,c,m),o.b2(v,i,E);const k=1-o.b5(v,v);if(k<0)return null;const D=o.b5(i,i)-1,N=-m+(m<0?1:-1)*Math.sqrt(k),U=D/N,W=N;return{tMin:Math.min(U,W),tMax:Math.max(U,W)}}unprojectScreenPoint(i){const c=this._cameraPosition,m=this.getRayDirectionFromPixel(i),v=this.rayPlanetIntersection(c,m);if(v){const W=o.bz();o.b0(W,c,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const J=o.bz();return o.b3(J,W),Op(J)}const E=this._cachedClippingPlane,k=E[0]*m[0]+E[1]*m[1]+E[2]*m[2],D=-o.bb(E,c)/k,N=o.bz();if(D>0)o.b0(N,c,[m[0]*D,m[1]*D,m[2]*D]);else{const W=o.bz();o.b0(W,c,[2*m[0],2*m[1],2*m[2]]);const J=o.bb(this._cachedClippingPlane,W);o.b2(N,W,[this._cachedClippingPlane[0]*J,this._cachedClippingPlane[1]*J,this._cachedClippingPlane[2]*J])}const U=(function(W){const J=o.bz();return J[0]=W[0]*-W[3],J[1]=W[1]*-W[3],J[2]=W[2]*-W[3],{center:J,radius:Math.sqrt(1-W[3]*W[3])}})(E);return Op((function(W,J,Y){const oe=o.bz();o.b2(oe,Y,W);const ce=o.bz();return o.bA(ce,W,oe,J/o.b9(oe)),ce})(U.center,U.radius,N))}getMatrixForModel(i,c){const m=o.V.convert(i),v=1/o.bE,E=o.bj();return o.bJ(E,E,m.lng/180*Math.PI),o.bh(E,E,-m.lat/180*Math.PI),o.O(E,E,[0,0,1+c/o.bE]),o.bh(E,E,.5*Math.PI),o.Q(E,E,[v,v,v]),E}getProjectionDataForCustomLayer(i=!0){const c=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:i});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(i){}}class jc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c,m=!0){this._helper.resize(i,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,c){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(i){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,m)=>this.currentTransform.defaultConstrain(c,m),this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._globeness=1,this._mercatorTransform=new Mu,this._verticalPerspectiveTransform=new Fl}clone(){const i=new jc;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this,!1),i}apply(i,c){this._helper.apply(i,c),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const c=this._mercatorTransform.getProjectionData(i),m=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:c.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return o.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,c,m){const v=this._mercatorTransform.getPitchedTextCorrection(i,c,m),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,c,m);return o.bu(v,E,this._globeness)}projectTileCoordinates(i,c,m,v){return this.currentTransform.projectTileCoordinates(i,c,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,c){return this.currentTransform.lngLatToCameraDepth(i,c)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}setLocationAtPoint(i,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,c),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(i,c),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(i,c){return this.currentTransform.locationToScreenPoint(i,c)}screenPointToMercatorCoordinate(i,c){return this.currentTransform.screenPointToMercatorCoordinate(i,c)}screenPointToLocation(i,c){return this.currentTransform.screenPointToLocation(i,c)}isPointOnMapSurface(i,c){return this.currentTransform.isPointOnMapSurface(i,c)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,c){return this.currentTransform.getMatrixForModel(i,c)}getProjectionDataForCustomLayer(i=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return c;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return m.fallbackMatrix=c.mainMatrix,m}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Di{get useGlobeControls(){return!0}handlePanInertia(i,c){const m=ug(i,c);return Math.abs(m.lng-c.center.lng)>180&&(m.lng=c.center.lng+179.5*Math.sign(m.lng-c.center.lng)),{easingCenter:m,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,c){const m=i.around,v=c.screenPointToLocation(m);i.bearingDelta&&c.setBearing(c.bearing+i.bearingDelta),i.pitchDelta&&c.setPitch(c.pitch+i.pitchDelta),i.rollDelta&&c.setRoll(c.roll+i.rollDelta);const E=c.zoom;i.zoomDelta&&c.setZoom(c.zoom+i.zoomDelta);const k=c.zoom-E;if(k===0)return;const D=o.bK(c.center.lng,v.lng),N=D/(Math.abs(D/180)+1),U=o.bK(c.center.lat,v.lat),W=c.getRayDirectionFromPixel(m),J=c.cameraPosition,Y=-1*o.b5(J,W),oe=o.bz();o.b0(oe,J,[W[0]*Y,W[1]*Y,W[2]*Y]);const ce=o.b7(oe)-1,ye=Math.exp(.5*-Math.max(ce-.3,0)),_e=ku(c.worldSize,c.center.lat)/Math.min(c.width,c.height),ve=o.bx(_e,.9,.5,1,.25),we=(1-o.aq(-k))*Math.min(ye,ve),Le=c.center.lat,Se=c.zoom,ke=new o.V(c.center.lng+N*we,o.an(c.center.lat+U*we,-o.ao,o.ao));c.setLocationAtPoint(v,m);const Fe=c.center,Te=o.bx(Math.abs(D),45,85,0,1),Ge=o.bx(_e,.75,.35,0,1),ht=Math.pow(Math.max(Te,Ge),.25),at=o.bK(Fe.lng,ke.lng),ot=o.bK(Fe.lat,ke.lat);c.setCenter(new o.V(Fe.lng+at*ht,Fe.lat+ot*ht).wrap()),c.setZoom(Se+pi(Le,c.center.lat))}handleMapControlsPan(i,c,m){if(!i.panDelta)return;const v=c.center.lat,E=c.zoom;c.setCenter(ug(i.panDelta,c).wrap()),c.setZoom(E+pi(v,c.center.lat))}cameraForBoxAndBearing(i,c,m,v,E){const k=kh(i,c,m,v,E),D=c.left/E.width*2-1,N=(E.width-c.right)/E.width*2-1,U=c.top/E.height*-2+1,W=(E.height-c.bottom)/E.height*-2+1,J=o.bK(m.getWest(),m.getEast())<0,Y=J?m.getEast():m.getWest(),oe=J?m.getWest():m.getEast(),ce=Math.max(m.getNorth(),m.getSouth()),ye=Math.min(m.getNorth(),m.getSouth()),_e=Y+.5*o.bK(Y,oe),ve=ce+.5*o.bK(ce,ye),we=E.clone();we.setCenter(k.center),we.setBearing(k.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(k.zoom);const Le=we.modelViewProjectionMatrix,Se=[ni(m.getNorthWest()),ni(m.getNorthEast()),ni(m.getSouthWest()),ni(m.getSouthEast()),ni(new o.V(oe,ve)),ni(new o.V(Y,ve)),ni(new o.V(_e,ce)),ni(new o.V(_e,ye))],ke=ni(k.center);let Fe=Number.POSITIVE_INFINITY;for(const Te of Se)D<0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"x",D))),N>0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"x",N))),U>0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"y",U))),W<0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"y",W)));if(Number.isFinite(Fe)&&Fe!==0)return k.zoom=we.zoom+o.at(Fe),k;es()}handleJumpToCenterZoom(i,c){const m=i.center.lat,v=i.applyConstrain(c.center?o.V.convert(c.center):i.center,i.zoom).center;i.setCenter(v.wrap());const E=c.zoom!==void 0?+c.zoom:i.zoom+pi(m,v.lat);i.zoom!==E&&i.setZoom(E)}handleEaseTo(i,c){const m=i.zoom,v=i.center,E=i.padding,k={roll:i.roll,pitch:i.pitch,bearing:i.bearing},D={roll:c.roll===void 0?i.roll:c.roll,pitch:c.pitch===void 0?i.pitch:c.pitch,bearing:c.bearing===void 0?i.bearing:c.bearing},N=c.zoom!==void 0,U=!i.isPaddingEqual(c.padding);let W=!1;const J=c.center?o.V.convert(c.center):v,Y=i.applyConstrain(J,m).center;jl(i,Y);const oe=i.clone();oe.setCenter(Y),oe.setZoom(N?+c.zoom:m+pi(v.lat,J.lat)),oe.setBearing(c.bearing);const ce=new o.P(o.an(i.centerPoint.x+c.offsetAsPoint.x,0,i.width),o.an(i.centerPoint.y+c.offsetAsPoint.y,0,i.height));oe.setLocationAtPoint(Y,ce);const ye=(c.offset&&c.offsetAsPoint.mag())>0?oe.center:Y,_e=N?+c.zoom:m+pi(v.lat,ye.lat),ve=m+pi(v.lat,0),we=_e+pi(ye.lat,0),Le=o.bK(v.lng,ye.lng),Se=o.bK(v.lat,ye.lat),ke=o.aq(we-ve);return W=_e!==m,{easeFunc:Fe=>{if(o.bo(k,D)||Mh({startEulerAngles:k,endEulerAngles:D,tr:i,k:Fe,useSlerp:k.roll!=D.roll}),U&&i.interpolatePadding(E,c.padding,Fe),c.around)o.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(c.around,c.aroundPoint);else{const Te=we>ve?Math.min(2,ke):Math.max(.5,ke),Ge=Math.pow(Te,1-Fe),ht=cg(v,Le,Se,Fe*Ge);i.setCenter(ht.wrap())}if(W){const Te=o.G.number(ve,we,Fe)+pi(0,i.center.lat);i.setZoom(Te)}},isZooming:W,elevationCenter:ye}}handleFlyTo(i,c){const m=c.zoom!==void 0,v=i.center,E=i.zoom,k=i.padding,D=!i.isPaddingEqual(c.padding),N=i.applyConstrain(o.V.convert(c.center||c.locationAtOffset),E).center,U=m?+c.zoom:i.zoom+pi(i.center.lat,N.lat),W=i.clone();W.setCenter(N),W.setZoom(U),W.setBearing(c.bearing);const J=new o.P(o.an(i.centerPoint.x+c.offsetAsPoint.x,0,i.width),o.an(i.centerPoint.y+c.offsetAsPoint.y,0,i.height));W.setLocationAtPoint(N,J);const Y=W.center;jl(i,Y);const oe=(function(Se,ke,Fe){const Te=ni(ke),Ge=ni(Fe),ht=o.b5(Te,Ge),at=Math.acos(ht),ot=ea(Se);return at/(2*Math.PI)*ot})(i,v,Y),ce=E+pi(v.lat,0),ye=U+pi(Y.lat,0),_e=o.aq(ye-ce);let ve;if(typeof c.minZoom=="number"){const Se=+c.minZoom+pi(Y.lat,0),ke=Math.min(Se,ce,ye)+pi(0,Y.lat),Fe=i.applyConstrain(Y,ke).zoom+pi(Y.lat,0);ve=o.aq(Fe-ce)}const we=o.bK(v.lng,Y.lng),Le=o.bK(v.lat,Y.lat);return{easeFunc:(Se,ke,Fe,Te)=>{const Ge=cg(v,we,Le,Fe);D&&i.interpolatePadding(k,c.padding,Se);const ht=Se===1?Y:Ge;i.setCenter(ht.wrap());const at=ce+o.at(ke);i.setZoom(Se===1?U:at+pi(0,ht.lat))},scaleOfZoom:_e,targetCenter:Y,scaleOfMinZoom:ve,pixelPathLength:oe}}static solveVectorScale(i,c,m,v,E){const k=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],D=[m[3],m[7],m[11],m[15]],N=i[0]*k[0]+i[1]*k[1]+i[2]*k[2],U=i[0]*D[0]+i[1]*D[1]+i[2]*D[2],W=c[0]*k[0]+c[1]*k[1]+c[2]*k[2],J=c[0]*D[0]+c[1]*D[1]+c[2]*D[2];return W+E*U===N+E*J||D[3]*(N-W)+k[3]*(J-U)+N*J==W*U?null:(W+k[3]-E*J-E*D[3])/(W-N-E*J+E*U)}static getLesserNonNegativeNonNull(i,c){return c!==null&&c>=0&&c<i?c:i}}class hg{constructor(i){this._globe=i,this._mercatorCameraHelper=new zl,this._verticalPerspectiveCameraHelper=new Di}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,c){return this.currentHelper.handlePanInertia(i,c)}handleMapControlsRollPitchBearingZoom(i,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,c)}handleMapControlsPan(i,c,m){this.currentHelper.handleMapControlsPan(i,c,m)}cameraForBoxAndBearing(i,c,m,v,E){return this.currentHelper.cameraForBoxAndBearing(i,c,m,v,E)}handleJumpToCenterZoom(i,c){this.currentHelper.handleJumpToCenterZoom(i,c)}handleEaseTo(i,c){return this.currentHelper.handleEaseTo(i,c)}handleFlyTo(i,c){return this.currentHelper.handleFlyTo(i,c)}}const Ou=(w,i)=>o.B(w,i&&i.filter((c=>c.identifier!=="source.canvas"))),Lh=o.bO();class Lu extends o.E{constructor(i,c={}){var m,v;super(),this._rtlPluginLoaded=()=>{for(const k in this.tileManagers){const D=this.tileManagers[k].getSource().type;D!=="vector"&&D!=="geojson"||this.tileManagers[k].reload()}},this.map=i,this.dispatcher=new Lt(ct(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((k,D)=>this.getGlyphs(k,D))),this.dispatcher.registerMessageHandler("GI",((k,D)=>this.getImages(k,D))),this.dispatcher.registerMessageHandler("GDA",((k,D)=>this.getDashes(k,D))),this.imageManager=new Ne,this.imageManager.setEventedParent(this);const E=((m=i._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new wt(i._requestManager,c.localIdeographFontFamily,E),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new Qi,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bP()),Ze().on(Me,this._rtlPluginLoaded),this.on("data",(k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const D=this.tileManagers[k.sourceId];if(!D)return;const N=D.getSource();if(N&&N.vectorLayerIds)for(const U in this._layers){const W=this._layers[U];W.source===N.id&&this._validateLayer(W)}}))}_setInitialValues(){var i;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((i=this.crossTileSymbolIndex)===null||i===void 0?void 0:i.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(i,c){var m,v,E;this._checkLoaded();const k=c===null?(E=(v=(m=this.stylesheet.state)===null||m===void 0?void 0:m[i])===null||v===void 0?void 0:v.default)!==null&&E!==void 0?E:null:c;if(o.bR(k,this._globalState[i]))return this;this._globalState[i]=k,this._applyGlobalStateChanges([i])}getGlobalState(){return this._globalState}setGlobalState(i){this._checkLoaded();const c=[];for(const m in i)!o.bR(this._globalState[m],i[m].default)&&(c.push(m),this._globalState[m]=i[m].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(i){if(i.length===0)return;const c=new Set,m={};for(const v of i){m[v]=this._globalState[v];for(const E in this._layers){const k=this._layers[E],D=k.getLayoutAffectingGlobalStateRefs(),N=k.getPaintAffectingGlobalStateRefs(),U=k.getVisibilityAffectingGlobalStateRefs();if(D.has(v)&&c.add(k.source),N.has(v))for(const{name:W,value:J}of N.get(v))this._updatePaintProperty(k,W,J);U!=null&&U.has(v)&&(k.recalculateVisibility(),this._updateLayer(k))}}this.dispatcher.broadcast("UGS",m);for(const v in this.tileManagers)c.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(i,c={},m){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const E=this._loadStyleRequest;o.j(v,this._loadStyleRequest).then((k=>{this._loadStyleRequest=null,this._load(k.data,c,m)})).catch((k=>{this._loadStyleRequest=null,k&&!E.signal.aborted&&this.fire(new o.k(k))}))}loadJSON(i,c={},m){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,m)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Lh,{validate:!1})}_load(i,c,m){var v,E;let k=c.transformStyle?c.transformStyle(m,i):i;if(!c.validate||!Ou(this,o.C(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const D in k.sources)this.addSource(D,k.sources[D],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var i,c,m;const v=o.bS(this.stylesheet.layers);this.setGlobalState((i=this.stylesheet.state)!==null&&i!==void 0?i:null),this.dispatcher.broadcast("SL",v),this._order=v.map((E=>E.id)),this._layers={},this._serializedLayers=null;for(const E of v){const k=o.bT(E,this._globalState);if(k.setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=k,o.bU(k)&&this.tileManagers[k.source]){const D=(m=(c=E.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&m!==void 0?m:k.paint.get("raster-fade-duration");this.tileManagers[k.source].setRasterFadeDuration(D)}}}_loadSprite(i,c=!1,m=void 0){this.imageManager.setLoaded(!1);const v=new AbortController;let E;this._spriteRequest=v,(function(k,D,N,U){return o._(this,void 0,void 0,(function*(){const W=xe(k),J=N>1?"@2x":"",Y={},oe={};for(const{id:ce,url:ye}of W){const _e=D.transformRequest($e(ye,J,".json"),"SpriteJSON");Y[ce]=o.j(_e,U);const ve=D.transformRequest($e(ye,J,".png"),"SpriteImage");oe[ce]=ne.getImage(ve,U)}return yield Promise.all([...Object.values(Y),...Object.values(oe)]),(function(ce,ye){return o._(this,void 0,void 0,(function*(){const _e={};for(const ve in ce){_e[ve]={};const we=z.getImageCanvasContext((yield ye[ve]).data),Le=(yield ce[ve]).data;for(const Se in Le){const{width:ke,height:Fe,x:Te,y:Ge,sdf:ht,pixelRatio:at,stretchX:ot,stretchY:st,content:Nt,textFitWidth:Vt,textFitHeight:It}=Le[Se];_e[ve][Se]={data:null,pixelRatio:at,sdf:ht,stretchX:ot,stretchY:st,content:Nt,textFitWidth:Vt,textFitHeight:It,spriteData:{width:ke,height:Fe,x:Te,y:Ge,context:we}}}}return _e}))})(Y,oe)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((k=>{if(this._spriteRequest=null,k)for(const D in k){this._spritesImagesIds[D]=[];const N=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter((U=>!(U in k))):[];for(const U of N)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in k[D]){const W=D==="default"?U:`${D}:${U}`;this._spritesImagesIds[D].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,k[D][U],!1):this.imageManager.addImage(W,k[D][U]),c&&(this._changedImages[W]=!0)}}})).catch((k=>{this._spriteRequest=null,E=k,v.signal.aborted||this.fire(new o.k(E))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),m&&m(E)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(i){const c=this.tileManagers[i.source];if(!c)return;const m=i.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.tileManagers)if(!this.tileManagers[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,c=!1){const m=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c?o.bV(m):m);const v=[];for(const E of i)if(m[E]){const k=c?o.bV(m[E]):m[E];v.push(k)}return v}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(i[m]=v.serialize())}return i}hasTransitions(){var i,c,m;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.tileManagers)if(this.tileManagers[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(v.length||E.length)&&this._updateWorkerLayers(v,E);for(const k in this._updatedSources){const D=this._updatedSources[k];if(D==="reload")this._reloadSource(k);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.tileManagers){const E=this.tileManagers[v];m[v]=E.used,E.used=!1}for(const v of this._order){const E=this._layers[v];E.recalculate(i,this._availableImages),!E.isHidden(i.zoom)&&E.source&&(this.tileManagers[E.source].used=!0)}for(const v in m){const E=this.tileManagers[v];!!m[v]!=!!E.used&&E.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.tileManagers)this.tileManagers[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var m;this._checkLoaded();const v=this.serialize();if(i=c.transformStyle?c.transformStyle(v,i):i,((m=c.validate)===null||m===void 0||m)&&Ou(this,o.C(i)))return!1;(i=o.bV(i)).layers=o.bS(i.layers);const E=o.bW(v,i),k=this._getOperationsToPerform(E);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const D of k.operations)D();return this.stylesheet=i,this._serializedLayers=null,this.fire(new o.l("style.load",{style:this})),!0}_getOperationsToPerform(i){const c=[],m=[];for(const v of i)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":c.push((()=>{}));break;default:m.push(v.command)}return{operations:c,unimplemented:m}}addImage(i,c){if(this.getImage(i))return this.fire(new o.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new o.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,m={}){if(this._checkLoaded(),this.tileManagers[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.C.source,`sources.${i}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.tileManagers[i]=new hr(i,c,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:i}))),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new o.k(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const c=this.tileManagers[i];delete this.tileManagers[i],delete this._updatedSources[i],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const m=this.tileManagers[i].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(i){return this.tileManagers[i]&&this.tileManagers[i].getSource()}addLayer(i,c,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new o.k(new Error(`Layer "${v}" already exists on this map.`)));let E;if(i.type==="custom"){if(Ou(this,o.bX(i)))return;E=o.bT(i,this._globalState)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(v,i.source),i=o.bV(i),i=o.e(i,{source:v})),this._validate(o.C.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;E=o.bT(i,this._globalState),this._validateLayer(E),E.setEventedParent(this,{layer:{id:v}})}const k=c?this._order.indexOf(c):this._order.length;if(c&&k===-1)this.fire(new o.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(k,0,v),this._layerOrderChanged=!0,this._layers[v]=E,this._removedLayers[v]&&E.source&&E.type!=="custom"){const D=this._removedLayers[v];delete this._removedLayers[v],D.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.tileManagers[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new o.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new o.k(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!o.bR(v.filter,c))return c==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(o.C.filter,`layers.${v.id}.filter`,c,null,m)||(v.setFilter(o.bV(c)),this._updateLayer(v)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return o.bV(this.getLayer(i).filter)}setLayoutProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?o.bR(E.getLayoutProperty(c),m)||(E.setLayoutProperty(c,m,v),this._updateLayer(E)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const m=this.getLayer(i);if(m)return m.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?o.bR(E.getPaintProperty(c),m)||this._updatePaintProperty(E,c,m,v):this.fire(new o.k(new Error(`Cannot style non-existing layer "${i}".`)))}_updatePaintProperty(i,c,m,v={}){i.setPaintProperty(c,m,v)&&this._updateLayer(i),o.bU(i)&&c==="raster-fade-duration"&&this.tileManagers[i.source].setRasterFadeDuration(m),this._changed=!0,this._updatedPaintProps[i.id]=!0,this._serializedLayers=null}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const m=i.source,v=i.sourceLayer,E=this.tileManagers[m];if(E===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const k=E.getSource().type;k==="geojson"&&v?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||v?(i.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(v,i.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const m=i.source,v=this.tileManagers[m];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const E=v.getSource().type,k=E==="vector"?i.sourceLayer:void 0;E!=="vector"||k?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(k,i.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,m=i.sourceLayer,v=this.tileManagers[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(i.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=o.bY(this.tileManagers,(E=>E.serialize())),c=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return o.bZ({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:i,layers:c,terrain:m},(E=>E!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.tileManagers[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.tileManagers[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=k=>this._layers[k].type==="fill-extrusion",m={},v=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(c(D)){m[D]=k;for(const N of i){const U=N[D];if(U)for(const W of U)v.push(W)}}}v.sort(((k,D)=>D.intersectionZ-k.intersectionZ));const E=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(c(D))for(let N=v.length-1;N>=0;N--){const U=v[N].feature;if(m[U.layer.id]<k)break;E.push(U),v.pop()}else for(const N of i){const U=N[D];if(U)for(const W of U)E.push(W.feature)}}return E}queryRenderedFeatures(i,c,m){c&&c.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of c.layers){const W=this._layers[U];if(!W)return this.fire(new o.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];v[W.source]=!0}}const E=[];c.availableImages=this._availableImages;const k=this._serializedAllLayers(),D=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:D,globalState:this._globalState});for(const U in this.tileManagers)c.layers&&!v[U]||E.push(Gr(this.tileManagers[U],this._layers,k,i,N,m,this.map.terrain?(W,J,Y)=>this.map.terrain.getElevation(W,J,Y):void 0));return this.placement&&E.push((function(U,W,J,Y,oe,ce,ye){const _e={},ve=ce.queryRenderedSymbols(Y),we=[];for(const Le of Object.keys(ve).map(Number))we.push(ye[Le]);we.sort(Tr);for(const Le of we){const Se=Le.featureIndex.lookupSymbolFeatures(ve[Le.bucketInstanceId],W,Le.bucketIndex,Le.sourceLayerIndex,{filterSpec:oe.filter,globalState:oe.globalState},oe.layers,oe.availableImages,U);for(const ke in Se){const Fe=_e[ke]=_e[ke]||[],Te=Se[ke];Te.sort(((Ge,ht)=>{const at=Le.featureSortOrder;if(at){const ot=at.indexOf(Ge.featureIndex);return at.indexOf(ht.featureIndex)-ot}return ht.featureIndex-Ge.featureIndex}));for(const Ge of Te)Fe.push(Ge)}}return(function(Le,Se,ke){for(const Fe in Le)for(const Te of Le[Fe])wr(Te,ke[Se[Fe].source]);return Le})(_e,U,J)})(this._layers,k,this.tileManagers,i,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(i,c){c!=null&&c.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.tileManagers[i];return m?(function(v,E){const k=v.getRenderableIds().map((U=>v.getTileByID(U))),D=[],N={};for(let U=0;U<k.length;U++){const W=k[U],J=W.tileID.canonical.key;N[J]||(N[J]=!0,W.querySourceFeatures(D,E))}return D})(m,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const k in i)if(!o.bR(i[k],m[k])){v=!0;break}if(!v)return;const E={now:F(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(E)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!i&&!m)return;if(i&&!m)v=!0;else if(!i&&m)v=!0;else for(const k in i)if(!o.bR(i[k],m[k])){v=!0;break}if(!v)return;const E={now:F(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(E)}_setProjectionInternal(i){const c=(function(m,v){const E={constrainOverride:v};if(Array.isArray(m)){const k=new Dc({type:m});return{projection:k,transform:new jc(E),cameraHelper:new hg(k)}}switch(m){case"mercator":return{projection:new Ji,transform:new Mu(E),cameraHelper:new zl};case"globe":{const k=new Dc({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:k,transform:new jc(E),cameraHelper:new hg(k)}}case"vertical-perspective":return{projection:new Ih,transform:new Fl(E),cameraHelper:new Di};default:return o.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new Ji,transform:new Mu(E),cameraHelper:new zl}}})(i,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const m in this.tileManagers)this.tileManagers[m].reload()}_validate(i,c,m,v,E={}){return(!E||E.validate!==!1)&&Ou(this,i.call(o.C,o.e({key:c,style:this.serialize(),value:m,styleSpec:o.u},v)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ze().off(Me,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const m=this.tileManagers[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.tileManagers[i].clearTiles()}_reloadSource(i){this.tileManagers[i].resume(),this.tileManagers[i].reload()}_updateSources(i){for(const c in this.tileManagers)this.tileManagers[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.tileManagers)this._reloadSource(i)}_updatePlacement(i,c,m,v,E=!1){let k=!1,D=!1;const N={};for(const U of this._order){const W=this._layers[U];if(W.type!=="symbol")continue;if(!N[W.source]){const Y=this.tileManagers[W.source];N[W.source]=Y.getRenderableIds(!0).map((oe=>Y.getTileByID(oe))).sort(((oe,ce)=>ce.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ce.tileID)?-1:1)))}const J=this.crossTileSymbolIndex.addLayer(W,N[W.source],i.center.lng);k=k||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(F(),i.zoom))&&(this.pauseablePlacement=new Dl(i,this.map.terrain,this._order,E,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(F()),D=!0),k&&this.pauseablePlacement.placement.setStale()),D||k)for(const U of this._order){const W=this._layers[U];W.type==="symbol"&&this.placement.updateLayerOpacities(W,N[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(F())}_releaseSymbolFadeTiles(){for(const i in this.tileManagers)this.tileManagers[i].releaseSymbolFadeTiles()}getImages(i,c){return o._(this,void 0,void 0,(function*(){const m=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.tileManagers[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),m}))}getGlyphs(i,c){return o._(this,void 0,void 0,(function*(){const m=yield this.glyphManager.getGlyphs(c.stacks),v=this.tileManagers[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),m}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(o.C.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}getDashes(i,c){return o._(this,void 0,void 0,(function*(){const m={};for(const[v,E]of Object.entries(c.dashes))m[v]=this.lineAtlas.getDash(E.dasharray,E.round);return m}))}addSprite(i,c,m={},v){this._checkLoaded();const E=[{id:i,url:c}],k=[...xe(this.stylesheet.sprite),...E];this._validate(o.C.sprite,"sprite",k,null,m)||(this.stylesheet.sprite=k,this._loadSprite(E,!0,v))}removeSprite(i){this._checkLoaded();const c=xe(this.stylesheet.sprite);if(c.find((m=>m.id===i))){if(this._spritesImagesIds[i])for(const m of this._spritesImagesIds[i])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex((m=>m.id===i)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(i,c={},m){this._checkLoaded(),i&&this._validate(o.C.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,m):(this._unloadSprite(),m&&m(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const i in this.tileManagers){const c=this.tileManagers[i];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const i in this._layers){const c=this._layers[i];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var tv=o.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Hd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,m,v,E,k,D,N,U){this.context=i;let W=this.boundPaintVertexBuffers.length!==v.length;for(let J=0;!W&&J<v.length;J++)this.boundPaintVertexBuffers[J]!==v[J]&&(W=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||W||this.boundIndexBuffer!==E||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==U?this.freshBind(c,m,v,E,k,D,N,U):(i.bindVertexArray.set(this.vao),D&&D.bind(),E&&E.dynamicDraw&&E.bind(),N&&N.bind(),U&&U.bind())}freshBind(i,c,m,v,E,k,D,N){const U=i.numAttributes,W=this.context,J=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=N,c.enableAttributes(J,i);for(const Y of m)Y.enableAttributes(J,i);k&&k.enableAttributes(J,i),D&&D.enableAttributes(J,i),N&&N.enableAttributes(J,i),c.bind(),c.setVertexAttribPointers(J,i,E);for(const Y of m)Y.bind(),Y.setVertexAttribPointers(J,i,E);k&&(k.bind(),k.setVertexAttribPointers(J,i,E)),v&&v.bind(),D&&(D.bind(),D.setVertexAttribPointers(J,i,E)),N&&(N.bind(),N.setVertexAttribPointers(J,i,E)),W.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rv=(w,i,c,m,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:i,u_fog_color:c?c.properties.get("fog-color"):o.bp.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(m):0,u_horizon_color:c?c.properties.get("horizon-color"):o.bp.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),zc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Zd(w){const i=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const m=w[c].split(" ");i.push(m.pop())}return i}class Kd{constructor(i,c,m,v,E,k,D,N,U=[]){const W=i.gl;this.program=W.createProgram();const J=Zd(c.staticAttributes),Y=m?m.getBinderAttributes():[],oe=J.concat(Y),ce=wn.prelude.staticUniforms?Zd(wn.prelude.staticUniforms):[],ye=D.staticUniforms?Zd(D.staticUniforms):[],_e=c.staticUniforms?Zd(c.staticUniforms):[],ve=m?m.getBinderUniforms():[],we=ce.concat(ye).concat(_e).concat(ve),Le=[];for(const at of we)Le.indexOf(at)<0&&Le.push(at);const Se=m?m.defines():[];hi(W)&&Se.unshift("#version 300 es"),E&&Se.push("#define OVERDRAW_INSPECTOR;"),k&&Se.push("#define TERRAIN3D;"),N&&Se.push(N),U&&Se.push(...U);let ke=Se.concat(wn.prelude.fragmentSource,D.fragmentSource,c.fragmentSource).join(`
`),Fe=Se.concat(wn.prelude.vertexSource,D.vertexSource,c.vertexSource).join(`
`);hi(W)||(ke=(function(at){return at.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ke),Fe=(function(at){return at.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Fe));const Te=W.createShader(W.FRAGMENT_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(Te,ke),W.compileShader(Te),!W.getShaderParameter(Te,W.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${W.getShaderInfoLog(Te)}`);W.attachShader(this.program,Te);const Ge=W.createShader(W.VERTEX_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(Ge,Fe),W.compileShader(Ge),!W.getShaderParameter(Ge,W.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${W.getShaderInfoLog(Ge)}`);W.attachShader(this.program,Ge),this.attributes={};const ht={};this.numAttributes=oe.length;for(let at=0;at<this.numAttributes;at++)oe[at]&&(W.bindAttribLocation(this.program,at,oe[at]),this.attributes[oe[at]]=at);if(W.linkProgram(this.program),!W.getProgramParameter(this.program,W.LINK_STATUS))throw new Error(`Program failed to link: ${W.getProgramInfoLog(this.program)}`);W.deleteShader(Ge),W.deleteShader(Te);for(let at=0;at<Le.length;at++){const ot=Le[at];if(ot&&!ht[ot]){const st=W.getUniformLocation(this.program,ot);st&&(ht[ot]=st)}}this.fixedUniforms=v(i,ht),this.terrainUniforms=((at,ot)=>({u_depth:new o.b_(at,ot.u_depth),u_terrain:new o.b_(at,ot.u_terrain),u_terrain_dim:new o.bq(at,ot.u_terrain_dim),u_terrain_matrix:new o.c0(at,ot.u_terrain_matrix),u_terrain_unpack:new o.c1(at,ot.u_terrain_unpack),u_terrain_exaggeration:new o.bq(at,ot.u_terrain_exaggeration)}))(i,ht),this.projectionUniforms=((at,ot)=>({u_projection_matrix:new o.c0(at,ot.u_projection_matrix),u_projection_tile_mercator_coords:new o.c1(at,ot.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c1(at,ot.u_projection_clipping_plane),u_projection_transition:new o.bq(at,ot.u_projection_transition),u_projection_fallback_matrix:new o.c0(at,ot.u_projection_fallback_matrix)}))(i,ht),this.binderUniforms=m?m.getUniforms(i,ht):[]}draw(i,c,m,v,E,k,D,N,U,W,J,Y,oe,ce,ye,_e,ve,we,Le){const Se=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(E),i.setCullFace(k),N){i.activeTexture.set(Se.TEXTURE2),Se.bindTexture(Se.TEXTURE_2D,N.depthTexture),i.activeTexture.set(Se.TEXTURE3),Se.bindTexture(Se.TEXTURE_2D,N.texture);for(const Fe in this.terrainUniforms)this.terrainUniforms[Fe].set(N[Fe])}if(U)for(const Fe in U)this.projectionUniforms[zc[Fe]].set(U[Fe]);if(D)for(const Fe in this.fixedUniforms)this.fixedUniforms[Fe].set(D[Fe]);_e&&_e.setUniforms(i,this.binderUniforms,ce,{zoom:ye});let ke=0;switch(c){case Se.LINES:ke=2;break;case Se.TRIANGLES:ke=3;break;case Se.LINE_STRIP:ke=1}for(const Fe of oe.get()){const Te=Fe.vaos||(Fe.vaos={});(Te[W]||(Te[W]=new Hd)).bind(i,this,J,_e?_e.getPaintVertexBuffers():[],Y,Fe.vertexOffset,ve,we,Le),Se.drawElements(c,Fe.primitiveLength*ke,Se.UNSIGNED_SHORT,Fe.primitiveOffset*ke*2)}}}function Nc(w,i,c){const m=1/o.aN(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,k=E*(c.tileID.canonical.x+c.tileID.wrap*v),D=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[k>>16,D>>16],u_pixel_coord_lower:[65535&k,65535&D]}}const Rp=(w,i,c,m)=>{const v=w.style.light,E=v.properties.get("position"),k=[E.x,E.y,E.z],D=o.c4();v.properties.get("anchor")==="viewport"&&o.c5(D,w.transform.bearingInRadians),o.c6(k,k,D);const N=w.transform.transformLightDirection(k),U=v.properties.get("color");return{u_lightpos:k,u_lightpos_globe:N,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+i,u_opacity:c,u_fill_translate:m}},Xd=(w,i,c,m,v,E,k)=>o.e(Rp(w,i,c,m),Nc(E,w,k),{u_height_factor:-Math.pow(2,v.overscaledZ)/k.tileSize/8}),Yd=(w,i,c,m)=>o.e(Nc(i,w,c),{u_fill_translate:m}),jp=(w,i)=>({u_world:w,u_fill_translate:i}),zp=(w,i,c,m,v)=>o.e(Yd(w,i,c,v),{u_world:m}),Np=(w,i,c,m,v)=>{const E=w.transform;let k,D,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const U=o.aN(i,1,E.zoom);k=!0,D=[U,U],N=U/(o.a5*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*v}else k=!1,D=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+k,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:D,u_globe_extrude_scale:N,u_translate:m}},Do=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),dg=w=>({u_viewport_size:[w.width,w.height]}),Fp=(w,i=1)=>({u_color:w,u_overlay:0,u_overlay_scale:i}),Fc=(w,i,c,m)=>{const v=o.aN(w,1,i)/(o.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:o.aN(w,1,i),u_intensity:c,u_globe_extrude_scale:v}},Bp=(w,i,c,m)=>{const v=o.N();o.c7(v,0,w.width,w.height,0,0,1);const E=w.context.gl;return{u_matrix:v,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:c,u_color_ramp:m,u_opacity:i.paint.get("heatmap-opacity")}},Dh=(w,i,c)=>{const m=c.paint.get("hillshade-accent-color");let v;switch(c.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const E=c.getIlluminationProperties();for(let k=0;k<E.directionRadians.length;k++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[k]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:jh(0,i.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:m,u_method:v,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},Rh=(w,i)=>{const c=i.stride,m=o.N();return o.c7(m,0,o.a5,-o.a5,0,0,1),o.O(m,m,[0,-o.a5,0]),{u_matrix:m,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:i.getUnpackVector()}};function jh(w,i){const c=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new o.a9(0,m/c).toLngLat().lat,new o.a9(0,(m+1)/c).toLngLat().lat]}const fg=(w,i,c=0)=>({u_image:0,u_unpack:i.getUnpackVector(),u_dimension:[i.stride,i.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),Bl=(w,i,c,m)=>{const v=w.transform;return{u_translation:zh(w,i,c),u_ratio:m/o.aN(i,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},pg=(w,i,c,m,v)=>o.e(Bl(w,i,c,m),{u_image:0,u_image_height:v}),Qd=(w,i,c,m,v)=>{const E=w.transform,k=Ro(i,E);return{u_translation:zh(w,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:m/o.aN(i,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[k,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Jd=(w,i,c,m,v)=>{const E=Ro(i,w.transform);return o.e(Bl(w,i,c,m),{u_tileratio:E,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image:0,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Bc=(w,i,c,m,v,E)=>{const k=Ro(i,w.transform);return o.e(Bl(w,i,c,m),{u_image:0,u_image_height:E,u_tileratio:k,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image_dash:1,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Ro(w,i){return 1/o.aN(w,1,i.tileZoom)}function zh(w,i,c){return o.aO(w.transform,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const ef=(w,i,c,m,v)=>{return{u_tl_parent:w,u_scale_parent:i,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Vp(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var E,k};function Vp(w){w*=Math.PI/180;const i=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const $p=(w,i,c,m,v,E,k,D,N,U,W,J,Y)=>{const oe=k.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:oe.width/oe.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_label_plane_matrix:D,u_coord_matrix:N,u_is_text:+W,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:E,u_texsize:J,u_texture:0,u_translation:U,u_pitched_scale:Y}},tf=(w,i,c,m,v,E,k,D,N,U,W,J,Y,oe)=>{const ce=k.transform;return o.e($p(w,i,c,m,v,E,k,D,N,U,W,J,oe),{u_gamma_scale:m?Math.cos(ce.pitch*Math.PI/180)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},Du=(w,i,c,m,v,E,k,D,N,U,W,J,Y)=>o.e(tf(w,i,c,m,v,E,k,D,N,U,!0,W,0,Y),{u_texsize_icon:J,u_texture_icon:1}),Up=(w,i)=>({u_opacity:w,u_color:i}),ns=(w,i,c,m,v)=>o.e((function(E,k,D,N){const U=D.imageManager.getPattern(E.from.toString()),W=D.imageManager.getPattern(E.to.toString()),{width:J,height:Y}=D.imageManager.getPixelSize(),oe=Math.pow(2,N.tileID.overscaledZ),ce=N.tileSize*Math.pow(2,D.transform.tileZoom)/oe,ye=ce*(N.tileID.canonical.x+N.tileID.wrap*oe),_e=ce*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[J,Y],u_mix:k.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/o.aN(N,1,D.transform.tileZoom),u_pixel_coord_upper:[ye>>16,_e>>16],u_pixel_coord_lower:[65535&ye,65535&_e]}})(c,v,i,m),{u_opacity:w}),Vc=(w,i)=>{},mg={fillExtrusion:(w,i)=>({u_lightpos:new o.c2(w,i.u_lightpos),u_lightpos_globe:new o.c2(w,i.u_lightpos_globe),u_lightintensity:new o.bq(w,i.u_lightintensity),u_lightcolor:new o.c2(w,i.u_lightcolor),u_vertical_gradient:new o.bq(w,i.u_vertical_gradient),u_opacity:new o.bq(w,i.u_opacity),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillExtrusionPattern:(w,i)=>({u_lightpos:new o.c2(w,i.u_lightpos),u_lightpos_globe:new o.c2(w,i.u_lightpos_globe),u_lightintensity:new o.bq(w,i.u_lightintensity),u_lightcolor:new o.c2(w,i.u_lightcolor),u_vertical_gradient:new o.bq(w,i.u_vertical_gradient),u_height_factor:new o.bq(w,i.u_height_factor),u_opacity:new o.bq(w,i.u_opacity),u_fill_translate:new o.c3(w,i.u_fill_translate),u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade)}),fill:(w,i)=>({u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillPattern:(w,i)=>({u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillOutline:(w,i)=>({u_world:new o.c3(w,i.u_world),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillOutlinePattern:(w,i)=>({u_world:new o.c3(w,i.u_world),u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade),u_fill_translate:new o.c3(w,i.u_fill_translate)}),circle:(w,i)=>({u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_scale_with_map:new o.b_(w,i.u_scale_with_map),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_extrude_scale:new o.c3(w,i.u_extrude_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_globe_extrude_scale:new o.bq(w,i.u_globe_extrude_scale),u_translate:new o.c3(w,i.u_translate)}),collisionBox:(w,i)=>({u_pixel_extrude_scale:new o.c3(w,i.u_pixel_extrude_scale)}),collisionCircle:(w,i)=>({u_viewport_size:new o.c3(w,i.u_viewport_size)}),debug:(w,i)=>({u_color:new o.b$(w,i.u_color),u_overlay:new o.b_(w,i.u_overlay),u_overlay_scale:new o.bq(w,i.u_overlay_scale)}),depth:Vc,clippingMask:Vc,heatmap:(w,i)=>({u_extrude_scale:new o.bq(w,i.u_extrude_scale),u_intensity:new o.bq(w,i.u_intensity),u_globe_extrude_scale:new o.bq(w,i.u_globe_extrude_scale)}),heatmapTexture:(w,i)=>({u_matrix:new o.c0(w,i.u_matrix),u_world:new o.c3(w,i.u_world),u_image:new o.b_(w,i.u_image),u_color_ramp:new o.b_(w,i.u_color_ramp),u_opacity:new o.bq(w,i.u_opacity)}),hillshade:(w,i)=>({u_image:new o.b_(w,i.u_image),u_latrange:new o.c3(w,i.u_latrange),u_exaggeration:new o.bq(w,i.u_exaggeration),u_altitudes:new o.c9(w,i.u_altitudes),u_azimuths:new o.c9(w,i.u_azimuths),u_accent:new o.b$(w,i.u_accent),u_method:new o.b_(w,i.u_method),u_shadows:new o.c8(w,i.u_shadows),u_highlights:new o.c8(w,i.u_highlights)}),hillshadePrepare:(w,i)=>({u_matrix:new o.c0(w,i.u_matrix),u_image:new o.b_(w,i.u_image),u_dimension:new o.c3(w,i.u_dimension),u_zoom:new o.bq(w,i.u_zoom),u_unpack:new o.c1(w,i.u_unpack)}),colorRelief:(w,i)=>({u_image:new o.b_(w,i.u_image),u_unpack:new o.c1(w,i.u_unpack),u_dimension:new o.c3(w,i.u_dimension),u_elevation_stops:new o.b_(w,i.u_elevation_stops),u_color_stops:new o.b_(w,i.u_color_stops),u_color_ramp_size:new o.b_(w,i.u_color_ramp_size),u_opacity:new o.bq(w,i.u_opacity)}),line:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels)}),lineGradient:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_image_height:new o.bq(w,i.u_image_height)}),linePattern:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_texsize:new o.c3(w,i.u_texsize),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_image:new o.b_(w,i.u_image),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade)}),lineSDF:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_mix:new o.bq(w,i.u_mix),u_tileratio:new o.bq(w,i.u_tileratio),u_crossfade_from:new o.bq(w,i.u_crossfade_from),u_crossfade_to:new o.bq(w,i.u_crossfade_to),u_lineatlas_width:new o.bq(w,i.u_lineatlas_width),u_lineatlas_height:new o.bq(w,i.u_lineatlas_height)}),lineGradientSDF:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_image_height:new o.bq(w,i.u_image_height),u_tileratio:new o.bq(w,i.u_tileratio),u_crossfade_from:new o.bq(w,i.u_crossfade_from),u_crossfade_to:new o.bq(w,i.u_crossfade_to),u_image_dash:new o.b_(w,i.u_image_dash),u_mix:new o.bq(w,i.u_mix),u_lineatlas_width:new o.bq(w,i.u_lineatlas_width),u_lineatlas_height:new o.bq(w,i.u_lineatlas_height)}),raster:(w,i)=>({u_tl_parent:new o.c3(w,i.u_tl_parent),u_scale_parent:new o.bq(w,i.u_scale_parent),u_buffer_scale:new o.bq(w,i.u_buffer_scale),u_fade_t:new o.bq(w,i.u_fade_t),u_opacity:new o.bq(w,i.u_opacity),u_image0:new o.b_(w,i.u_image0),u_image1:new o.b_(w,i.u_image1),u_brightness_low:new o.bq(w,i.u_brightness_low),u_brightness_high:new o.bq(w,i.u_brightness_high),u_saturation_factor:new o.bq(w,i.u_saturation_factor),u_contrast_factor:new o.bq(w,i.u_contrast_factor),u_spin_weights:new o.c2(w,i.u_spin_weights),u_coords_top:new o.c1(w,i.u_coords_top),u_coords_bottom:new o.c1(w,i.u_coords_bottom)}),symbolIcon:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texture:new o.b_(w,i.u_texture),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),symbolSDF:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texture:new o.b_(w,i.u_texture),u_gamma_scale:new o.bq(w,i.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_is_halo:new o.b_(w,i.u_is_halo),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),symbolTextAndIcon:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texsize_icon:new o.c3(w,i.u_texsize_icon),u_texture:new o.b_(w,i.u_texture),u_texture_icon:new o.b_(w,i.u_texture_icon),u_gamma_scale:new o.bq(w,i.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_is_halo:new o.b_(w,i.u_is_halo),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),background:(w,i)=>({u_opacity:new o.bq(w,i.u_opacity),u_color:new o.b$(w,i.u_color)}),backgroundPattern:(w,i)=>({u_opacity:new o.bq(w,i.u_opacity),u_image:new o.b_(w,i.u_image),u_pattern_tl_a:new o.c3(w,i.u_pattern_tl_a),u_pattern_br_a:new o.c3(w,i.u_pattern_br_a),u_pattern_tl_b:new o.c3(w,i.u_pattern_tl_b),u_pattern_br_b:new o.c3(w,i.u_pattern_br_b),u_texsize:new o.c3(w,i.u_texsize),u_mix:new o.bq(w,i.u_mix),u_pattern_size_a:new o.c3(w,i.u_pattern_size_a),u_pattern_size_b:new o.c3(w,i.u_pattern_size_b),u_scale_a:new o.bq(w,i.u_scale_a),u_scale_b:new o.bq(w,i.u_scale_b),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bq(w,i.u_tile_units_to_pixels)}),terrain:(w,i)=>({u_texture:new o.b_(w,i.u_texture),u_ele_delta:new o.bq(w,i.u_ele_delta),u_fog_matrix:new o.c0(w,i.u_fog_matrix),u_fog_color:new o.b$(w,i.u_fog_color),u_fog_ground_blend:new o.bq(w,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bq(w,i.u_fog_ground_blend_opacity),u_horizon_color:new o.b$(w,i.u_horizon_color),u_horizon_fog_blend:new o.bq(w,i.u_horizon_fog_blend),u_is_globe_mode:new o.bq(w,i.u_is_globe_mode)}),terrainDepth:(w,i)=>({u_ele_delta:new o.bq(w,i.u_ele_delta)}),terrainCoords:(w,i)=>({u_texture:new o.b_(w,i.u_texture),u_terrain_coords_id:new o.bq(w,i.u_terrain_coords_id),u_ele_delta:new o.bq(w,i.u_ele_delta)}),projectionErrorMeasurement:(w,i)=>({u_input:new o.bq(w,i.u_input),u_output_expected:new o.bq(w,i.u_output_expected)}),atmosphere:(w,i)=>({u_sun_pos:new o.c2(w,i.u_sun_pos),u_atmosphere_blend:new o.bq(w,i.u_atmosphere_blend),u_globe_position:new o.c2(w,i.u_globe_position),u_globe_radius:new o.bq(w,i.u_globe_radius),u_inv_proj_matrix:new o.c0(w,i.u_inv_proj_matrix)}),sky:(w,i)=>({u_sky_color:new o.b$(w,i.u_sky_color),u_horizon_color:new o.b$(w,i.u_horizon_color),u_horizon:new o.c3(w,i.u_horizon),u_horizon_normal:new o.c3(w,i.u_horizon_normal),u_sky_horizon_blend:new o.bq(w,i.u_sky_horizon_blend),u_sky_blend:new o.bq(w,i.u_sky_blend)})};class gg{constructor(i,c,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yg{constructor(i,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const E=i.gl;this.buffer=E.createBuffer(),i.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,m){for(let v=0;v<this.attributes.length;v++){const E=this.attributes[v],k=c.attributes[E.name];k!==void 0&&i.vertexAttribPointer(k,E.components,i[qp[E.type]],!1,this.itemSize,E.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class cn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rf extends cn{getDefault(){return o.bp.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class nf extends cn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class al extends cn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Nh extends cn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class is extends cn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ru extends cn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ju extends cn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class za extends cn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class zu extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class af extends cn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class of extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class As extends cn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Fh extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Bh extends cn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class $c extends cn{getDefault(){return o.bp.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Vh extends cn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Gp extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Nu extends cn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Po extends cn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class sf extends cn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class $h extends cn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Hr extends cn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class lf extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Uh extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class vg extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Uc extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _g extends cn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ii extends cn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const m=this.gl;hi(m)?m.bindVertexArray(i):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class uf extends cn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class cf extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Fu extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Bu extends cn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Vu extends Bu{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Vl extends Bu{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class qc extends Bu{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const $l="Framebuffer is not complete";class qh{constructor(i,c,m,v,E){this.context=i,this.width=c,this.height=m;const k=i.gl,D=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Vu(i,D),v)this.depthAttachment=E?new qc(i,D):new Vl(i,D);else if(E)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error($l)}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class hf{constructor(i){var c,m;if(this.gl=i,this.clearColor=new rf(this),this.clearDepth=new nf(this),this.clearStencil=new al(this),this.colorMask=new Nh(this),this.depthMask=new is(this),this.stencilMask=new Ru(this),this.stencilFunc=new ju(this),this.stencilOp=new za(this),this.stencilTest=new zu(this),this.depthRange=new af(this),this.depthTest=new of(this),this.depthFunc=new As(this),this.blend=new Fh(this),this.blendFunc=new Bh(this),this.blendColor=new $c(this),this.blendEquation=new Vh(this),this.cullFace=new Gp(this),this.cullFaceSide=new Nu(this),this.frontFace=new Po(this),this.program=new sf(this),this.activeTexture=new $h(this),this.viewport=new Hr(this),this.bindFramebuffer=new lf(this),this.bindRenderbuffer=new Uh(this),this.bindTexture=new vg(this),this.bindVertexBuffer=new Uc(this),this.bindElementBuffer=new _g(this),this.bindVertexArray=new ii(this),this.pixelStoreUnpack=new uf(this),this.pixelStoreUnpackPremultiplyAlpha=new cf(this),this.pixelStoreUnpackFlipY=new Fu(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),hi(i)){this.HALF_FLOAT=i.HALF_FLOAT;const v=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=i.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const v=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new gg(this,i,c)}createVertexBuffer(i,c,m){return new yg(this,i,c,m)}createRenderbuffer(i,c,m){const v=this.gl,E=v.createRenderbuffer();return this.bindRenderbuffer.set(E),v.renderbufferStorage(v.RENDERBUFFER,i,c,m),this.bindRenderbuffer.set(null),E}createFramebuffer(i,c,m,v){return new qh(this,i,c,m,v)}clear({color:i,depth:c,stencil:m}){const v=this.gl;let E=0;i&&(E|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(E|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(E|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(E)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){o.bR(i.blendFunction,un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return hi(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return hi(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let Ul;function ql(w,i,c,m,v){const E=w.context,k=w.transform,D=E.gl,N=w.useProgram("collisionBox"),U=[];let W=0,J=0;for(let ve=0;ve<m.length;ve++){const we=m[ve],Le=i.getTile(we).getBucket(c);if(!Le)continue;const Se=v?Le.textCollisionBox:Le.iconCollisionBox,ke=Le.collisionCircleArray;ke.length>0&&(U.push({circleArray:ke,circleOffset:J,coord:we}),W+=ke.length/4,J=W),Se&&N.draw(E,D.LINES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,Do(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(we),k.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,null,w.transform.zoom,null,null,Se.collisionVertexBuffer)}if(!v||!U.length)return;const Y=w.useProgram("collisionCircle"),oe=new o.ca;oe.resize(4*W),oe._trim();let ce=0;for(const ve of U)for(let we=0;we<ve.circleArray.length/4;we++){const Le=4*we,Se=ve.circleArray[Le+0],ke=ve.circleArray[Le+1],Fe=ve.circleArray[Le+2],Te=ve.circleArray[Le+3];oe.emplace(ce++,Se,ke,Fe,Te,0),oe.emplace(ce++,Se,ke,Fe,Te,1),oe.emplace(ce++,Se,ke,Fe,Te,2),oe.emplace(ce++,Se,ke,Fe,Te,3)}(!Ul||Ul.length<2*W)&&(Ul=(function(ve){const we=2*ve,Le=new o.cc;Le.resize(we),Le._trim();for(let Se=0;Se<we;Se++){const ke=6*Se;Le.uint16[ke+0]=4*Se+0,Le.uint16[ke+1]=4*Se+1,Le.uint16[ke+2]=4*Se+2,Le.uint16[ke+3]=4*Se+2,Le.uint16[ke+4]=4*Se+3,Le.uint16[ke+5]=4*Se+0}return Le})(W));const ye=E.createIndexBuffer(Ul,!0),_e=E.createVertexBuffer(oe,o.cb.members,!0);for(const ve of U){const we=dg(w.transform);Y.draw(E,D.TRIANGLES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,we,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve.coord),null,c.id,_e,ye,o.aX.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,w.transform.zoom,null,null,null)}_e.destroy(),ye.destroy()}const Gc=o.ar(new Float32Array(16));function df(w,i,c,m,v,E){const{horizontalAlign:k,verticalAlign:D}=o.aS(w);return new o.P((-(k-.5)*i/v+m[0])*E,(-(D-.5)*c/v+m[1])*E)}function $u(w,i,c,m,v,E){const k=i.tileAnchorPoint.add(new o.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let D=m.mult(E);c||(D=D.rotate(-v));const N=k.add(D);return mr(N.x,N.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(c){const D=Qr(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(w),N=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return w.add(m.rotate(N))}return w.add(m)}function Wp(w,i,c,m,v,E,k,D,N,U,W,J){const Y=w.text.placedSymbolArray,oe=w.text.dynamicLayoutVertexArray,ce=w.icon.dynamicLayoutVertexArray,ye={};oe.clear();for(let _e=0;_e<Y.length;_e++){const ve=Y.get(_e),we=ve.hidden||!ve.crossTileID||w.allowVerticalPlacement&&!ve.placedOrientation?null:m[ve.crossTileID];if(we){const Le=new o.P(ve.anchorX,ve.anchorY),Se={getElevation:J,width:v.width,height:v.height,pitchedLabelPlaneMatrix:E,pitchWithMap:c,transform:v,tileAnchorPoint:Le,translation:U,unwrappedTileID:W},ke=c?Oo(Le.x,Le.y,Se):Qr(Le.x,Le.y,Se),Fe=ri(v.cameraToCenterDistance,ke.signedDistanceFromCamera);let Te=o.aA(w.textSizeData,D,ve)*Fe/o.aM;c&&(Te*=w.tilePixelRatio/k);const{width:Ge,height:ht,anchor:at,textOffset:ot,textBoxScale:st}=we,Nt=df(at,Ge,ht,ot,st,Te),Vt=v.getPitchedTextCorrection(Le.x+U[0],Le.y+U[1],W),It=$u(ke.point,Se,i,Nt,-v.bearingInRadians,Vt),Yt=w.allowVerticalPlacement&&ve.placedOrientation===o.az.vertical?Math.PI/2:0;for(let zr=0;zr<ve.numGlyphs;zr++)o.aG(oe,It,Yt);N&&ve.associatedIconIndex>=0&&(ye[ve.associatedIconIndex]={shiftedAnchor:It,angle:Yt})}else Da(ve.numGlyphs,oe)}if(N){ce.clear();const _e=w.icon.placedSymbolArray;for(let ve=0;ve<_e.length;ve++){const we=_e.get(ve);if(we.hidden)Da(we.numGlyphs,ce);else{const Le=ye[ve];if(Le)for(let Se=0;Se<we.numGlyphs;Se++)o.aG(ce,Le.shiftedAnchor,Le.angle);else Da(we.numGlyphs,ce)}}w.icon.dynamicLayoutVertexBuffer.updateData(ce)}w.text.dynamicLayoutVertexBuffer.updateData(oe)}function ff(w,i,c){return c.iconsInText&&i?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Uu(w,i,c,m,v,E,k,D,N,U,W,J,Y){const oe=w.context,ce=oe.gl,ye=w.transform,_e=D==="map",ve=N==="map",we=D!=="viewport"&&c.layout.get("symbol-placement")!=="point",Le=_e&&!ve&&!we,Se=!c.layout.get("symbol-sort-key").isConstant();let ke=!1;const Fe=w.getDepthModeForSublayer(0,Vr.ReadOnly),Te=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],ht=ye.getCircleRadiusCorrection();for(const at of m){const ot=i.getTile(at),st=ot.getBucket(c);if(!st)continue;const Nt=v?st.text:st.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const Vt=Nt.programConfigurations.get(c.id),It=v||st.sdfIcons,Yt=v?st.textSizeData:st.iconSizeData,zr=ve||ye.pitch!==0,Sn=w.useProgram(ff(It,v,st),Vt),Yn=o.ay(Yt,ye.zoom),On=w.style.map.terrain&&w.style.map.terrain.getTerrainData(at);let Qn,Ln,Jn,oi,na=[0,0],Si=null;if(v)Ln=ot.glyphAtlasTexture,Jn=ce.LINEAR,Qn=ot.glyphAtlasTexture.size,st.iconsInText&&(na=ot.imageAtlasTexture.size,Si=ot.imageAtlasTexture,oi=zr||w.options.rotating||w.options.zooming||Yt.kind==="composite"||Yt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const zn=c.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;Ln=ot.imageAtlasTexture,Jn=It||w.options.rotating||w.options.zooming||zn||zr?ce.LINEAR:ce.NEAREST,Qn=ot.imageAtlasTexture.size}const _n=o.aN(ot,1,w.transform.zoom),qi=dr(_e,w.transform,_n),cs=o.N();o.aB(cs,qi);const Ns=Fr(ve,_e,w.transform,_n),hs=o.aO(ye,ot,E,k),Fa=ye.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),dl=Te&&st.hasTextData(),Fs=c.layout.get("icon-text-fit")!=="none"&&dl&&st.hasIconData();if(we){const zn=w.style.map.terrain?(zi,Gi)=>w.style.map.terrain.getElevation(at,zi,Gi):null,Dn=c.layout.get("text-rotation-alignment")==="map";Tn(st,w,v,qi,cs,ve,U,Dn,at.toUnwrapped(),ye.width,ye.height,hs,zn)}const fl=v&&Te||Fs,oo=we||fl?Gc:ve?qi:w.transform.clipSpaceToPixelsMatrix,Bs=It&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Uo;Uo=It?st.iconsInText?Du(Yt.kind,Yn,Le,ve,we,fl,w,oo,Ns,hs,Qn,na,ht):tf(Yt.kind,Yn,Le,ve,we,fl,w,oo,Ns,hs,v,Qn,0,ht):$p(Yt.kind,Yn,Le,ve,we,fl,w,oo,Ns,hs,v,Qn,ht);const qo={program:Sn,buffers:Nt,uniformValues:Uo,projectionData:Fa,atlasTexture:Ln,atlasTextureIcon:Si,atlasInterpolation:Jn,atlasInterpolationIcon:oi,isSDF:It,hasHalo:Bs};if(Se&&st.canOverlap){ke=!0;const zn=Nt.segments.get();for(const Dn of zn)Ge.push({segments:new o.aX([Dn]),sortKey:Dn.sortKey,state:qo,terrainData:On})}else Ge.push({segments:Nt.segments,sortKey:0,state:qo,terrainData:On})}ke&&Ge.sort(((at,ot)=>at.sortKey-ot.sortKey));for(const at of Ge){const ot=at.state;if(oe.activeTexture.set(ce.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,ce.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(oe.activeTexture.set(ce.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),ot.isSDF){const st=ot.uniformValues;ot.hasHalo&&(st.u_is_halo=1,pf(ot.buffers,at.segments,c,w,ot.program,Fe,W,J,st,ot.projectionData,at.terrainData)),st.u_is_halo=0}pf(ot.buffers,at.segments,c,w,ot.program,Fe,W,J,ot.uniformValues,ot.projectionData,at.terrainData)}}function pf(w,i,c,m,v,E,k,D,N,U,W){const J=m.context;v.draw(J,J.gl.TRIANGLES,E,k,D,Xr.backCCW,N,W,U,c.id,w.layoutVertexBuffer,w.indexBuffer,i,c.paint,m.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Hp(w,i,c,m,v){const E=w.context,k=E.gl,D=Jr.disabled,N=new un([k.ONE,k.ONE],o.bp.transparent,[!0,!0,!0,!0]),U=i.getBucket(c);if(!U)return;const W=m.key;let J=c.heatmapFbos.get(W);J||(J=Gh(E,i.tileSize,i.tileSize),c.heatmapFbos.set(W,J)),E.bindFramebuffer.set(J.framebuffer),E.viewport.set([0,0,i.tileSize,i.tileSize]),E.clear({color:o.bp.transparent});const Y=U.programConfigurations.get(c.id),oe=w.useProgram("heatmap",Y,!v),ce=w.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ye=w.style.map.terrain.getTerrainData(m);oe.draw(E,k.TRIANGLES,Vr.disabled,D,N,Xr.disabled,Fc(i,w.transform.zoom,c.paint.get("heatmap-intensity"),1),ye,ce,c.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,c.paint,w.transform.zoom,Y)}function xg(w,i,c,m,v){const E=w.context,k=E.gl,D=w.transform;E.setColorMode(w.colorModeForRenderPass());const N=Wc(E,i),U=c.key,W=i.heatmapFbos.get(U);if(!W)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,W.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1),N.bind(k.LINEAR,k.CLAMP_TO_EDGE);const J=D.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(E,k.TRIANGLES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,Bp(w,i,0,1),null,J,i.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,i.paint,D.zoom),W.destroy(),i.heatmapFbos.delete(U)}function Gh(w,i,c){var m,v;const E=w.gl,k=E.createTexture();E.bindTexture(E.TEXTURE_2D,k),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);const D=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:E.UNSIGNED_BYTE,N=(v=w.RGBA16F)!==null&&v!==void 0?v:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,N,i,c,0,E.RGBA,D,null);const U=w.createFramebuffer(i,c,!1,!1);return U.colorAttachment.set(k),U}function Wc(w,i){return i.colorRampTexture||(i.colorRampTexture=new o.T(w,i.colorRamp,w.gl.RGBA)),i.colorRampTexture}function ol(w,i,c,m,v,E,k,D){let N=256;if(v.stepInterpolant){const U=i.getSource().maxzoom,W=k.canonical.z===U?Math.ceil(1<<w.transform.maxZoom-k.canonical.z):1;N=o.an(o.ce(E.maxLineLength/o.a5*1024*W),256,c.maxTextureSize)}return D.gradient=o.cf({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:D.gradient||void 0,clips:E.lineClipsArray}),D.texture?D.texture.update(D.gradient):D.texture=new o.T(c,D.gradient,m.RGBA),D.version=v.gradientVersion,D.texture}function Zp(w,i,c,m,v){w.activeTexture.set(i.TEXTURE0),c.imageAtlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),m.updatePaintBuffers(v)}function Un(w,i,c,m,v,E){(v||w.lineAtlas.dirty)&&(i.activeTexture.set(c.TEXTURE0),w.lineAtlas.bind(i)),m.updatePaintBuffers(E)}function _a(w,i,c,m,v,E,k){const D=E.gradients[v.id];let N=D.texture;v.gradientVersion!==D.version&&(N=ol(w,i,c,m,v,E,k,D)),c.activeTexture.set(m.TEXTURE0),N.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}function fa(w,i,c,m,v,E,k,D,N){const U=E.gradients[v.id];let W=U.texture;v.gradientVersion!==U.version&&(W=ol(w,i,c,m,v,E,k,U)),c.activeTexture.set(m.TEXTURE0),W.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE),c.activeTexture.set(m.TEXTURE1),w.lineAtlas.bind(c),D.updatePaintBuffers(N)}function jo(w,i,c,m,v){if(!c||!m||!m.imageAtlas)return;const E=m.imageAtlas.patternPositions;let k=E[c.to.toString()],D=E[c.from.toString()];if(!k&&D&&(k=D),!D&&k&&(D=k),!k||!D){const N=v.getPaintProperty(i);k=E[N],D=E[N]}k&&D&&w.setConstantPatternPositions(k,D)}function qu(w,i,c,m,v,E,k,D){const N=w.context.gl,U="fill-pattern",W=c.paint.get(U),J=W&&W.constantOr(1),Y=c.getCrossfadeParameters();let oe,ce,ye,_e,ve;const we=w.transform,Le=c.paint.get("fill-translate"),Se=c.paint.get("fill-translate-anchor");k?(ce=J&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=N.LINES):(ce=J?"fillPattern":"fill",oe=N.TRIANGLES);const ke=W.constantOr(null);for(const Fe of m){const Te=i.getTile(Fe);if(J&&!Te.patternsLoaded())continue;const Ge=Te.getBucket(c);if(!Ge)continue;const ht=Ge.programConfigurations.get(c.id),at=w.useProgram(ce,ht),ot=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe);J&&(w.context.activeTexture.set(N.TEXTURE0),Te.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ht.updatePaintBuffers(Y)),jo(ht,U,ke,Te,c);const st=we.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),Nt=o.aO(we,Te,Le,Se);if(k){_e=Ge.indexBuffer2,ve=Ge.segments2;const It=[N.drawingBufferWidth,N.drawingBufferHeight];ye=ce==="fillOutlinePattern"&&J?zp(w,Y,Te,It,Nt):jp(It,Nt)}else _e=Ge.indexBuffer,ve=Ge.segments,ye=J?Yd(w,Y,Te,Nt):{u_fill_translate:Nt};const Vt=w.stencilModeForClipping(Fe);at.draw(w.context,oe,v,Vt,E,Xr.backCCW,ye,ot,st,c.id,Ge.layoutVertexBuffer,_e,ve,c.paint,w.transform.zoom,ht)}}function mf(w,i,c,m,v,E,k,D){const N=w.context,U=N.gl,W="fill-extrusion-pattern",J=c.paint.get(W),Y=J.constantOr(1),oe=c.getCrossfadeParameters(),ce=c.paint.get("fill-extrusion-opacity"),ye=J.constantOr(null),_e=w.transform;for(const ve of m){const we=i.getTile(ve),Le=we.getBucket(c);if(!Le)continue;const Se=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),ke=Le.programConfigurations.get(c.id),Fe=w.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",ke);Y&&(w.context.activeTexture.set(U.TEXTURE0),we.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ke.updatePaintBuffers(oe));const Te=_e.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!D,applyTerrainMatrix:!0});jo(ke,W,ye,we,c);const Ge=o.aO(_e,we,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ht=c.paint.get("fill-extrusion-vertical-gradient"),at=Y?Xd(w,ht,ce,Ge,ve,oe,we):Rp(w,ht,ce,Ge);Fe.draw(N,N.gl.TRIANGLES,v,E,k,Xr.backCCW,at,Se,Te,c.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,c.paint,w.transform.zoom,ke,w.style.map.terrain&&Le.centroidVertexBuffer)}}function Gl(w,i,c,m,v,E,k,D,N){var U;const W=w.style.projection,J=w.context,Y=w.transform,oe=J.gl,ce=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],ye=w.useProgram("hillshade",null,!1,ce),_e=!w.options.moving;for(const ve of m){const we=i.getTile(ve),Le=we.fbo;if(!Le)continue;const Se=W.getMeshFromTileID(J,ve.canonical,D,!0,"raster"),ke=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(ve);J.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,Le.colorAttachment.get());const Fe=Y.getProjectionData({overscaledTileID:ve,aligned:_e,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ye.draw(J,oe.TRIANGLES,E,v[ve.overscaledZ],k,Xr.backCCW,Dh(w,we,c),ke,Fe,c.id,Se.vertexBuffer,Se.indexBuffer,Se.segments)}}function as(w,i,c,m,v,E,k,D,N){var U;const W=w.style.projection,J=w.context,Y=w.transform,oe=J.gl,ce=w.useProgram("colorRelief"),ye=!w.options.moving;let _e=!0,ve=0;for(const we of m){const Le=i.getTile(we),Se=Le.dem;if(_e){const at=oe.getParameter(oe.MAX_TEXTURE_SIZE),{elevationTexture:ot,colorTexture:st}=c.getColorRampTextures(J,at,Se.getUnpackVector());J.activeTexture.set(oe.TEXTURE1),ot.bind(oe.NEAREST,oe.CLAMP_TO_EDGE),J.activeTexture.set(oe.TEXTURE4),st.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),_e=!1,ve=ot.size[0]}if(!Se||!Se.data)continue;const ke=Se.stride,Fe=Se.getPixels();if(J.activeTexture.set(oe.TEXTURE0),J.pixelStoreUnpackPremultiplyAlpha.set(!1),Le.demTexture=Le.demTexture||w.getTileTexture(ke),Le.demTexture){const at=Le.demTexture;at.update(Fe,{premultiply:!1}),at.bind(oe.LINEAR,oe.CLAMP_TO_EDGE)}else Le.demTexture=new o.T(J,Fe,oe.RGBA,{premultiply:!1}),Le.demTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE);const Te=W.getMeshFromTileID(J,we.canonical,D,!0,"raster"),Ge=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(we),ht=Y.getProjectionData({overscaledTileID:we,aligned:ye,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ce.draw(J,oe.TRIANGLES,E,v[we.overscaledZ],k,Xr.backCCW,fg(c,Le.dem,ve),Ge,ht,c.id,Te.vertexBuffer,Te.indexBuffer,Te.segments)}}const os=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function ss(w,i,c,m,v,E,k,D,N=!1,U=!1){const W=m[m.length-1].overscaledZ,J=w.context,Y=J.gl,oe=w.useProgram("raster"),ce=w.transform,ye=w.style.projection,_e=w.colorModeForRenderPass(),ve=!w.options.moving,we=c.paint.get("raster-opacity"),Le=c.paint.get("raster-resampling"),Se=c.paint.get("raster-fade-duration"),ke=!!w.style.map.terrain;for(const Fe of m){const Te=w.getDepthModeForSublayer(Fe.overscaledZ-W,we===1?Vr.ReadWrite:Vr.ReadOnly,Y.LESS),Ge=i.getTile(Fe),ht=Le==="nearest"?Y.NEAREST:Y.LINEAR;J.activeTexture.set(Y.TEXTURE0),Ge.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),J.activeTexture.set(Y.TEXTURE1);const{parentTile:at,parentScaleBy:ot,parentTopLeft:st,fadeValues:Nt}=Wh(Ge,i,Se,ke);Ge.fadeOpacity=Nt.tileOpacity,at?(at.fadeOpacity=Nt.parentTileOpacity,at.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST)):Ge.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),Ge.texture.useMipmap&&J.extTextureFilterAnisotropic&&w.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,J.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,J.extTextureFilterAnisotropicMax);const Vt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe),It=ce.getProjectionData({overscaledTileID:Fe,aligned:ve,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Yt=ef(st,ot,Nt.fadeMix,c,D),zr=ye.getMeshFromTileID(J,Fe.canonical,E,k,"raster");oe.draw(J,Y.TRIANGLES,Te,v?v[Fe.overscaledZ]:Jr.disabled,_e,N?Xr.frontCCW:Xr.backCCW,Yt,Vt,It,c.id,zr.vertexBuffer,zr.indexBuffer,zr.segments)}}function Wh(w,i,c,m){const v={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||m)return v;if(w.fadingParentID){const E=i.getLoadedTile(w.fadingParentID);if(!E)return v;const k=Math.pow(2,E.tileID.overscaledZ-w.tileID.overscaledZ),D=[w.tileID.canonical.x*k%1,w.tileID.canonical.y*k%1],N=(function(U,W,J){const Y=F(),oe=(Y-W.timeAdded)/J,ce=U.fadingDirection===it.Incoming,ye=o.an((Y-U.timeAdded)/J,0,1),_e=o.an(1-oe,0,1),ve=ce?ye:_e;return{tileOpacity:ve,parentTileOpacity:ce?_e:ye,fadeMix:{opacity:1,mix:1-ve}}})(w,E,c);return{parentTile:E,parentScaleBy:k,parentTopLeft:D,fadeValues:N}}if(w.selfFading){const E=(function(k,D){const N=(F()-k.timeAdded)/D,U=o.an(N,0,1);return{tileOpacity:U,fadeMix:{opacity:U,mix:0}}})(w,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:E}}return v}const gf=new o.bp(1,0,0,1),Gu=new o.bp(0,1,0,1),sl=new o.bp(0,0,1,1),Kn=new o.bp(1,0,1,1),gn=new o.bp(0,1,1,1);function Is(w,i,c,m){ra(w,0,i+c/2,w.transform.width,c,m)}function ta(w,i,c,m){ra(w,i-c/2,0,c,w.transform.height,m)}function ra(w,i,c,m,v,E){const k=w.context,D=k.gl;D.enable(D.SCISSOR_TEST),D.scissor(i*w.pixelRatio,c*w.pixelRatio,m*w.pixelRatio,v*w.pixelRatio),k.clear({color:E}),D.disable(D.SCISSOR_TEST)}function Wl(w,i,c){const m=w.context,v=m.gl,E=w.useProgram("debug"),k=Vr.disabled,D=Jr.disabled,N=w.colorModeForRenderPass(),U="$debug",W=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const J=i.getTileByID(c.key).latestRawTileData,Y=Math.floor((J&&J.byteLength||0)/1024),oe=i.getTile(c).tileSize,ce=512/Math.min(oe,512)*(c.overscaledZ/w.transform.zoom)*.5;let ye=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ye+=` => ${c.overscaledZ}`),(function(ve,we){ve.initDebugOverlayCanvas();const Le=ve.debugOverlayCanvas,Se=ve.context.gl,ke=ve.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,Le.width,Le.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(we,5,5),ke.strokeText(we,5,5),ve.debugOverlayTexture.update(Le),ve.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)})(w,`${ye} ${Y}kB`);const _e=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(m,v.TRIANGLES,k,D,un.alphaBlended,Xr.disabled,Fp(o.bp.transparent,ce),null,_e,U,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),E.draw(m,v.LINE_STRIP,k,D,N,Xr.disabled,Fp(o.bp.red),W,_e,U,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Hl(w,i,c,m){const{isRenderingGlobe:v}=m,E=w.context,k=E.gl,D=w.transform,N=w.colorModeForRenderPass(),U=w.getDepthModeFor3D(),W=w.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height]);for(const J of c){const Y=i.getTerrainMesh(J.tileID),oe=w.renderToTexture.getTexture(J),ce=i.getTerrainData(J.tileID);E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,oe.texture);const ye=i.getMeshFrameDelta(D.zoom),_e=D.calculateFogMatrix(J.tileID.toUnwrapped()),ve=rv(ye,_e,w.style.sky,D.pitch,v),we=D.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});W.draw(E,k.TRIANGLES,U,Jr.disabled,N,Xr.backCCW,ve,ce,we,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}function xa(w,i){if(!i.mesh){const c=new o.aW;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const m=new o.aY;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),i.mesh=new In(w.createVertexBuffer(c,Lo.members),w.createIndexBuffer(m),o.aX.simpleSegment(0,0,c.length,m.length))}return i.mesh}class Hh{constructor(i,c){this.context=new hf(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=hr.maxOverzooming+hr.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qi}resize(i,c,m){if(this.width=Math.floor(i*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,c=new o.aW;c.emplaceBack(0,0),c.emplaceBack(o.a5,0),c.emplaceBack(0,o.a5),c.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=i.createVertexBuffer(c,Lo.members),this.tileExtentSegments=o.aX.simpleSegment(0,0,4,2);const m=new o.aW;m.emplaceBack(0,0),m.emplaceBack(o.a5,0),m.emplaceBack(0,o.a5),m.emplaceBack(o.a5,o.a5),this.debugBuffer=i.createVertexBuffer(m,Lo.members),this.debugSegments=o.aX.simpleSegment(0,0,4,5);const v=new o.ch;v.emplaceBack(0,0,0,0),v.emplaceBack(o.a5,0,o.a5,0),v.emplaceBack(0,o.a5,0,o.a5),v.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=i.createVertexBuffer(v,tv.members),this.rasterBoundsSegments=o.aX.simpleSegment(0,0,4,2);const E=new o.aW;E.emplaceBack(0,0),E.emplaceBack(o.a5,0),E.emplaceBack(0,o.a5),E.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(E,Lo.members),this.rasterBoundsSegmentsPosOnly=o.aX.simpleSegment(0,0,4,5);const k=new o.aW;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(k,Lo.members),this.viewportSegments=o.aX.simpleSegment(0,0,4,2);const D=new o.ci;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(D);const N=new o.aY;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(N);const U=this.context.gl;this.stencilClearMode=new Jr({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new In(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=o.N();o.c7(m,0,this.width,this.height,0,0,1),o.Q(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(i,c.TRIANGLES,Vr.disabled,this.stencilClearMode,un.disabled,Xr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c,m){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(un.disabled),v.setDepthMode(Vr.disabled);const E={};for(const k of c)E[k.key]=this.nextStencilID++;this._renderTileMasks(E,c,m,!0),this._renderTileMasks(E,c,m,!1),this._tileClippingMaskIDs=E}_renderTileMasks(i,c,m,v){const E=this.context,k=E.gl,D=this.style.projection,N=this.transform,U=this.useProgram("clippingMask");for(const W of c){const J=i[W.key],Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(W),oe=D.getMeshFromTileID(this.context,W.canonical,v,!0,"stencil"),ce=N.getProjectionData({overscaledTileID:W,applyGlobeMatrix:!m,applyTerrainMatrix:!0});U.draw(E,k.TRIANGLES,Vr.disabled,new Jr({func:k.ALWAYS,mask:0},J,255,k.KEEP,k.KEEP,k.REPLACE),un.disabled,m?Xr.disabled:Xr.backCCW,null,Y,ce,"$clipping",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}_renderTilesDepthBuffer(){const i=this.context,c=i.gl,m=this.style.projection,v=this.transform,E=this.useProgram("depth"),k=this.getDepthModeFor3D(),D=ln(v,{tileSize:v.tileSize});for(const N of D){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),W=m.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),J=v.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(i,c.TRIANGLES,k,Jr.disabled,un.disabled,Xr.backCCW,null,U,J,"$clipping",W.vertexBuffer,W.indexBuffer,W.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Jr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Jr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const c=this.context.gl,m=i.sort(((k,D)=>D.overscaledZ-k.overscaledZ)),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const k={};for(let D=0;D<E;D++)k[D+v]=new Jr({func:c.GEQUAL,mask:255},D+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[k,m]}return[{[v]:Jr.disabled},m]}stencilConfigForOverlapTwoPass(i){const c=this.context.gl,m=i.sort(((k,D)=>D.overscaledZ-k.overscaledZ)),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(this.clearStencil(),E>1){const k={},D={};for(let N=0;N<E;N++)k[N+v]=new Jr({func:c.GREATER,mask:255},E+1+N,255,c.KEEP,c.KEEP,c.REPLACE),D[N+v]=new Jr({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*E+1,[k,D,m]}return this.nextStencilID=3,[{[v]:new Jr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new Jr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new un([i.CONSTANT_COLOR,i.ONE],new o.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?un.unblended:un.alphaBlended}getDepthModeForSublayer(i,c,m){if(!this.opaquePassEnabledForLayer())return Vr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Vr(m||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new Vr(this.context.gl.LEQUAL,Vr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){var m,v;this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(F()),this.imageManager.beginFrame();const E=this.style._order,k=this.style.tileManagers,D={},N={},U={},W={isRenderingToTexture:!1,isRenderingGlobe:((m=i.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const Y in k){const oe=k[Y];oe.used&&oe.prepare(this.context),D[Y]=oe.getVisibleCoordinates(!1),N[Y]=D[Y].slice().reverse(),U[Y]=oe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<E.length;Y++)if(this.style._layers[E[Y]].is3D()){this.opaquePassCutoff=Y;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Y of E){const oe=this.style._layers[Y];if(!oe.hasOffscreenPass()||oe.isHidden(this.transform.zoom))continue;const ce=N[oe.source];(oe.type==="custom"||ce.length)&&this.renderLayer(this,k[oe.source],oe,ce,W)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:Y=>this.useProgram(Y)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.bp.black:o.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Y,oe){const ce=Y.context,ye=ce.gl,_e=((Fe,Te,Ge)=>{const ht=Math.cos(Te.rollInRadians),at=Math.sin(Te.rollInRadians),ot=Kr(Te),st=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Fe.properties.get("sky-color"),u_horizon_color:Fe.properties.get("horizon-color"),u_horizon:[(Te.width/2-ot*at)*Ge,(Te.height/2+ot*ht)*Ge],u_horizon_normal:[-at,ht],u_sky_horizon_blend:Fe.properties.get("sky-horizon-blend")*Te.height/2*Ge,u_sky_blend:st}})(oe,Y.style.map.transform,Y.pixelRatio),ve=new Vr(ye.LEQUAL,Vr.ReadWrite,[0,1]),we=Jr.disabled,Le=Y.colorModeForRenderPass(),Se=Y.useProgram("sky"),ke=xa(ce,oe);Se.draw(ce,ye.TRIANGLES,ve,we,Le,Xr.disabled,_e,null,void 0,"sky",ke.vertexBuffer,ke.indexBuffer,ke.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[E[this.currentLayer]],oe=k[Y.source],ce=D[Y.source];this._renderTileClippingMasks(Y,ce,!1),this.renderLayer(this,oe,Y,ce,W)}this.renderPass="translucent";let J=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){const Y=this.style._layers[E[this.currentLayer]],oe=k[Y.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Y,W))continue;this.opaquePassEnabledForLayer()||J||(J=!0,W.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ce=(Y.type==="symbol"?U:N)[Y.source];this._renderTileClippingMasks(Y,D[Y.source],!!this.renderToTexture),this.renderLayer(this,oe,Y,ce,W)}if(W.isRenderingGlobe&&(function(Y,oe,ce){const ye=Y.context,_e=ye.gl,ve=Y.useProgram("atmosphere"),we=new Vr(_e.LEQUAL,Vr.ReadOnly,[0,1]),Le=Y.transform,Se=(function(st,Nt){const Vt=st.properties.get("position"),It=[-Vt.x,-Vt.y,-Vt.z],Yt=o.ar(new Float64Array(16));return st.properties.get("anchor")==="map"&&(o.bg(Yt,Yt,Nt.rollInRadians),o.bh(Yt,Yt,-Nt.pitchInRadians),o.bg(Yt,Yt,Nt.bearingInRadians),o.bh(Yt,Yt,Nt.center.lat*Math.PI/180),o.bJ(Yt,Yt,-Nt.center.lng*Math.PI/180)),o.cg(It,It,Yt),It})(ce,Y.transform),ke=Le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Fe=oe.properties.get("atmosphere-blend")*ke.projectionTransition;if(Fe===0)return;const Te=ku(Le.worldSize,Le.center.lat),Ge=Le.inverseProjectionMatrix,ht=new Float64Array(4);ht[3]=1,o.aH(ht,ht,Le.modelViewProjectionMatrix),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1,o.aH(ht,ht,Ge),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1;const at=((st,Nt,Vt,It,Yt)=>({u_sun_pos:st,u_atmosphere_blend:Nt,u_globe_position:Vt,u_globe_radius:It,u_inv_proj_matrix:Yt}))(Se,Fe,[ht[0],ht[1],ht[2]],Te,Ge),ot=xa(ye,oe);ve.draw(ye,_e.TRIANGLES,we,Jr.disabled,un.alphaBlended,Xr.disabled,at,null,null,"atmosphere",ot.vertexBuffer,ot.indexBuffer,ot.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Y=(function(oe,ce){let ye=null;const _e=Object.values(oe._layers).flatMap((Se=>Se.source&&!Se.isHidden(ce)?[oe.tileManagers[Se.source]]:[])),ve=_e.filter((Se=>Se.getSource().type==="vector")),we=_e.filter((Se=>Se.getSource().type!=="vector")),Le=Se=>{(!ye||ye.getSource().maxzoom<Se.getSource().maxzoom)&&(ye=Se)};return ve.forEach((Se=>Le(Se))),ye||we.forEach((Se=>Le(Se))),ye})(this.style,this.transform.zoom);Y&&(function(oe,ce,ye){for(let _e=0;_e<ye.length;_e++)Wl(oe,ce,ye[_e])})(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&(function(Y){const oe=Y.transform.padding;Is(Y,Y.transform.height-(oe.top||0),3,gf),Is(Y,oe.bottom||0,3,Gu),ta(Y,oe.left||0,3,sl),ta(Y,Y.transform.width-(oe.right||0),3,Kn);const ce=Y.transform.centerPoint;(function(ye,_e,ve,we){ra(ye,_e-1,ve-10,2,20,we),ra(ye,_e-10,ve-1,20,2,we)})(Y,ce.x,Y.transform.height-ce.y,gn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=i?!o.cj(c,m):!o.ck(c,m)),v||(v=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(o.cl(c,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(E,k){const D=E.context,N=D.gl,U=E.transform,W=un.unblended,J=new Vr(N.LEQUAL,Vr.ReadWrite,[0,1]),Y=k.tileManager.getRenderableTiles(),oe=E.useProgram("terrainDepth");D.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),D.clear({color:o.bp.transparent,depth:1});for(const ce of Y){const ye=k.getTerrainMesh(ce.tileID),_e=k.getTerrainData(ce.tileID),ve=U.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:k.getMeshFrameDelta(U.zoom)};oe.draw(D,N.TRIANGLES,J,Jr.disabled,W,Xr.backCCW,we,_e,ve,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain),(function(E,k){const D=E.context,N=D.gl,U=E.transform,W=un.unblended,J=new Vr(N.LEQUAL,Vr.ReadWrite,[0,1]),Y=k.getCoordsTexture(),oe=k.tileManager.getRenderableTiles(),ce=E.useProgram("terrainCoords");D.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),D.clear({color:o.bp.transparent,depth:1}),k.coordsIndex=[];for(const ye of oe){const _e=k.getTerrainMesh(ye.tileID),ve=k.getTerrainData(ye.tileID);D.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Y.texture);const we={u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(U.zoom)},Le=U.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(D,N.TRIANGLES,J,Jr.disabled,W,Xr.backCCW,we,ve,Le,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments),k.coordsIndex.push(ye.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain))}renderLayer(i,c,m,v,E){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,o.cm(m)?(function(k,D,N,U,W,J){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=J,oe=Jr.disabled,ce=k.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ye,_e,ve,we,Le,Se,ke,Fe,Te){const Ge=_e.transform,ht=_e.style.map.terrain,at=Le==="map",ot=Se==="map";for(const st of ye){const Nt=we.getTile(st),Vt=Nt.getBucket(ve);if(!Vt||!Vt.text||!Vt.text.segments.get().length)continue;const It=o.ay(Vt.textSizeData,Ge.zoom),Yt=o.aN(Nt,1,_e.transform.zoom),zr=dr(at,_e.transform,Yt),Sn=ve.layout.get("icon-text-fit")!=="none"&&Vt.hasIconData();if(It){const Yn=Math.pow(2,Ge.zoom-Nt.tileID.overscaledZ),On=ht?(Qn,Ln)=>ht.getElevation(st,Qn,Ln):null;Wp(Vt,at,ot,Te,Ge,zr,Yn,It,Sn,o.aO(Ge,Nt,ke,Fe),st.toUnwrapped(),On)}}})(U,k,N,D,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),W),N.paint.get("icon-opacity").constantOr(1)!==0&&Uu(k,D,N,U,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),oe,ce,Y),N.paint.get("text-opacity").constantOr(1)!==0&&Uu(k,D,N,U,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),oe,ce,Y),D.map.showCollisionBoxes&&(ql(k,D,N,U,!0),ql(k,D,N,U,!1))})(i,c,m,v,this.style.placement.variableOffsets,E):o.cn(m)?(function(k,D,N,U,W){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=N.paint.get("circle-opacity"),oe=N.paint.get("circle-stroke-width"),ce=N.paint.get("circle-stroke-opacity"),ye=!N.layout.get("circle-sort-key").isConstant();if(Y.constantOr(1)===0&&(oe.constantOr(1)===0||ce.constantOr(1)===0))return;const _e=k.context,ve=_e.gl,we=k.transform,Le=k.getDepthModeForSublayer(0,Vr.ReadOnly),Se=Jr.disabled,ke=k.colorModeForRenderPass(),Fe=[],Te=we.getCircleRadiusCorrection();for(let Ge=0;Ge<U.length;Ge++){const ht=U[Ge],at=D.getTile(ht),ot=at.getBucket(N);if(!ot)continue;const st=N.paint.get("circle-translate"),Nt=N.paint.get("circle-translate-anchor"),Vt=o.aO(we,at,st,Nt),It=ot.programConfigurations.get(N.id),Yt=k.useProgram("circle",It),zr=ot.layoutVertexBuffer,Sn=ot.indexBuffer,Yn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ht),On={programConfiguration:It,program:Yt,layoutVertexBuffer:zr,indexBuffer:Sn,uniformValues:Np(k,at,N,Vt,Te),terrainData:Yn,projectionData:we.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!J,applyTerrainMatrix:!0})};if(ye){const Qn=ot.segments.get();for(const Ln of Qn)Fe.push({segments:new o.aX([Ln]),sortKey:Ln.sortKey,state:On})}else Fe.push({segments:ot.segments,sortKey:0,state:On})}ye&&Fe.sort(((Ge,ht)=>Ge.sortKey-ht.sortKey));for(const Ge of Fe){const{programConfiguration:ht,program:at,layoutVertexBuffer:ot,indexBuffer:st,uniformValues:Nt,terrainData:Vt,projectionData:It}=Ge.state;at.draw(_e,ve.TRIANGLES,Le,Se,ke,Xr.backCCW,Nt,Vt,It,N.id,ot,st,Ge.segments,N.paint,k.transform.zoom,ht)}})(i,c,m,v,E):o.co(m)?(function(k,D,N,U,W){if(N.paint.get("heatmap-opacity")===0)return;const J=k.context,{isRenderingToTexture:Y,isRenderingGlobe:oe}=W;if(k.style.map.terrain){for(const ce of U){const ye=D.getTile(ce);D.hasRenderableParent(ce)||(k.renderPass==="offscreen"?Hp(k,ye,N,ce,oe):k.renderPass==="translucent"&&xg(k,N,ce,Y,oe))}J.viewport.set([0,0,k.width,k.height])}else k.renderPass==="offscreen"?(function(ce,ye,_e,ve){const we=ce.context,Le=we.gl,Se=ce.transform,ke=Jr.disabled,Fe=new un([Le.ONE,Le.ONE],o.bp.transparent,[!0,!0,!0,!0]);(function(Te,Ge,ht){const at=Te.gl;Te.activeTexture.set(at.TEXTURE1),Te.viewport.set([0,0,Ge.width/4,Ge.height/4]);let ot=ht.heatmapFbos.get(o.cd);ot?(at.bindTexture(at.TEXTURE_2D,ot.colorAttachment.get()),Te.bindFramebuffer.set(ot.framebuffer)):(ot=Gh(Te,Ge.width/4,Ge.height/4),ht.heatmapFbos.set(o.cd,ot))})(we,ce,_e),we.clear({color:o.bp.transparent});for(let Te=0;Te<ve.length;Te++){const Ge=ve[Te];if(ye.hasRenderableParent(Ge))continue;const ht=ye.getTile(Ge),at=ht.getBucket(_e);if(!at)continue;const ot=at.programConfigurations.get(_e.id),st=ce.useProgram("heatmap",ot),Nt=Se.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Vt=Se.getCircleRadiusCorrection();st.draw(we,Le.TRIANGLES,Vr.disabled,ke,Fe,Xr.backCCW,Fc(ht,Se.zoom,_e.paint.get("heatmap-intensity"),Vt),null,Nt,_e.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,_e.paint,Se.zoom,ot)}we.viewport.set([0,0,ce.width,ce.height])})(k,D,N,U):k.renderPass==="translucent"&&(function(ce,ye){const _e=ce.context,ve=_e.gl;_e.setColorMode(ce.colorModeForRenderPass());const we=ye.heatmapFbos.get(o.cd);we&&(_e.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,we.colorAttachment.get()),_e.activeTexture.set(ve.TEXTURE1),Wc(_e,ye).bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(_e,ve.TRIANGLES,Vr.disabled,Jr.disabled,ce.colorModeForRenderPass(),Xr.disabled,Bp(ce,ye,0,1),null,null,ye.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,ye.paint,ce.transform.zoom))})(k,N)})(i,c,m,v,E):o.cp(m)?(function(k,D,N,U,W){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=N.paint.get("line-opacity"),oe=N.paint.get("line-width");if(Y.constantOr(1)===0||oe.constantOr(1)===0)return;const ce=k.getDepthModeForSublayer(0,Vr.ReadOnly),ye=k.colorModeForRenderPass(),_e=N.paint.get("line-dasharray"),ve=_e.constantOr(1),we=N.paint.get("line-pattern"),Le=we.constantOr(1),Se=N.paint.get("line-gradient"),ke=N.getCrossfadeParameters();let Fe;Fe=Le?"linePattern":ve&&Se?"lineGradientSDF":ve?"lineSDF":Se?"lineGradient":"line";const Te=k.context,Ge=Te.gl,ht=k.transform;let at=!0;for(const ot of U){const st=D.getTile(ot);if(Le&&!st.patternsLoaded())continue;const Nt=st.getBucket(N);if(!Nt)continue;const Vt=Nt.programConfigurations.get(N.id),It=k.context.program.get(),Yt=k.useProgram(Fe,Vt),zr=at||Yt.program!==It,Sn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ot),Yn=we.constantOr(null),On=_e&&_e.constantOr(null);if(Yn&&st.imageAtlas){const na=st.imageAtlas,Si=na.patternPositions[Yn.to.toString()],_n=na.patternPositions[Yn.from.toString()];Si&&_n&&Vt.setConstantPatternPositions(Si,_n)}else if(On){const na=N.layout.get("line-cap")==="round",Si=k.lineAtlas.getDash(On.to,na),_n=k.lineAtlas.getDash(On.from,na);Vt.setConstantDashPositions(Si,_n)}const Qn=ht.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Ln=ht.getPixelScale();let Jn;Le?(Jn=Qd(k,st,N,Ln,ke),Zp(Te,Ge,st,Vt,ke)):ve&&Se?(Jn=Bc(k,st,N,Ln,ke,Nt.lineClipsArray.length),fa(k,D,Te,Ge,N,Nt,ot,Vt,ke)):ve?(Jn=Jd(k,st,N,Ln,ke),Un(k,Te,Ge,Vt,zr,ke)):Se?(Jn=pg(k,st,N,Ln,Nt.lineClipsArray.length),_a(k,D,Te,Ge,N,Nt,ot)):Jn=Bl(k,st,N,Ln);const oi=k.stencilModeForClipping(ot);Yt.draw(Te,Ge.TRIANGLES,ce,oi,ye,Xr.disabled,Jn,Sn,Qn,N.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,N.paint,k.transform.zoom,Vt,Nt.layoutVertexBuffer2),at=!1}})(i,c,m,v,E):o.cq(m)?(function(k,D,N,U,W){const J=N.paint.get("fill-color"),Y=N.paint.get("fill-opacity");if(Y.constantOr(1)===0)return;const{isRenderingToTexture:oe}=W,ce=k.colorModeForRenderPass(),ye=N.paint.get("fill-pattern"),_e=k.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&J.constantOr(o.bp.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===_e){const ve=k.getDepthModeForSublayer(1,k.renderPass==="opaque"?Vr.ReadWrite:Vr.ReadOnly);qu(k,D,N,U,ve,ce,!1,oe)}if(k.renderPass==="translucent"&&N.paint.get("fill-antialias")){const ve=k.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,Vr.ReadOnly);qu(k,D,N,U,ve,ce,!0,oe)}})(i,c,m,v,E):o.cr(m)?(function(k,D,N,U,W){const J=N.paint.get("fill-extrusion-opacity");if(J===0)return;const{isRenderingToTexture:Y}=W;if(k.renderPass==="translucent"){const oe=new Vr(k.context.gl.LEQUAL,Vr.ReadWrite,k.depthRangeFor3D);if(J!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))mf(k,D,N,U,oe,Jr.disabled,un.disabled,Y),mf(k,D,N,U,oe,k.stencilModeFor3D(),k.colorModeForRenderPass(),Y);else{const ce=k.colorModeForRenderPass();mf(k,D,N,U,oe,Jr.disabled,ce,Y)}}})(i,c,m,v,E):o.cs(m)?(function(k,D,N,U,W){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=k.context,oe=k.style.projection.useSubdivision,ce=k.getDepthModeForSublayer(0,Vr.ReadOnly),ye=k.colorModeForRenderPass();if(k.renderPass==="offscreen")(function(_e,ve,we,Le,Se,ke,Fe){const Te=_e.context,Ge=Te.gl;for(const ht of we){const at=ve.getTile(ht),ot=at.dem;if(!ot||!ot.data||!at.needsHillshadePrepare)continue;const st=ot.dim,Nt=ot.stride,Vt=ot.getPixels();if(Te.activeTexture.set(Ge.TEXTURE1),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||_e.getTileTexture(Nt),at.demTexture){const Yt=at.demTexture;Yt.update(Vt,{premultiply:!1}),Yt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else at.demTexture=new o.T(Te,Vt,Ge.RGBA,{premultiply:!1}),at.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Te.activeTexture.set(Ge.TEXTURE0);let It=at.fbo;if(!It){const Yt=new o.T(Te,{width:st,height:st,data:null},Ge.RGBA);Yt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),It=at.fbo=Te.createFramebuffer(st,st,!0,!1),It.colorAttachment.set(Yt.texture)}Te.bindFramebuffer.set(It.framebuffer),Te.viewport.set([0,0,st,st]),_e.useProgram("hillshadePrepare").draw(Te,Ge.TRIANGLES,Se,ke,Fe,Xr.disabled,Rh(at.tileID,ot),null,null,Le.id,_e.rasterBoundsBuffer,_e.quadTriangleIndexBuffer,_e.rasterBoundsSegments),at.needsHillshadePrepare=!1}})(k,D,U,N,ce,Jr.disabled,ye),Y.viewport.set([0,0,k.width,k.height]);else if(k.renderPass==="translucent")if(oe){const[_e,ve,we]=k.stencilConfigForOverlapTwoPass(U);Gl(k,D,N,we,_e,ce,ye,!1,J),Gl(k,D,N,we,ve,ce,ye,!0,J)}else{const[_e,ve]=k.getStencilConfigForOverlapAndUpdateStencilID(U);Gl(k,D,N,ve,_e,ce,ye,!1,J)}})(i,c,m,v,E):o.ct(m)?(function(k,D,N,U,W){if(k.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:J}=W,Y=k.style.projection.useSubdivision,oe=k.getDepthModeForSublayer(0,Vr.ReadOnly),ce=k.colorModeForRenderPass();if(Y){const[ye,_e,ve]=k.stencilConfigForOverlapTwoPass(U);as(k,D,N,ve,ye,oe,ce,!1,J),as(k,D,N,ve,_e,oe,ce,!0,J)}else{const[ye,_e]=k.getStencilConfigForOverlapAndUpdateStencilID(U);as(k,D,N,_e,ye,oe,ce,!1,J)}})(i,c,m,v,E):o.bU(m)?(function(k,D,N,U,W){if(k.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:J}=W,Y=D.getSource(),oe=k.style.projection.useSubdivision;if(Y instanceof zt)ss(k,D,N,U,null,!1,!1,Y.tileCoords,Y.flippedWindingOrder,J);else if(oe){const[ce,ye,_e]=k.stencilConfigForOverlapTwoPass(U);ss(k,D,N,_e,ce,!1,!0,os,!1,J),ss(k,D,N,_e,ye,!0,!0,os,!1,J)}else{const[ce,ye]=k.getStencilConfigForOverlapAndUpdateStencilID(U);ss(k,D,N,ye,ce,!1,!0,os,!1,J)}})(i,c,m,v,E):o.cu(m)?(function(k,D,N,U,W){const J=N.paint.get("background-color"),Y=N.paint.get("background-opacity");if(Y===0)return;const{isRenderingToTexture:oe}=W,ce=k.context,ye=ce.gl,_e=k.style.projection,ve=k.transform,we=ve.tileSize,Le=N.paint.get("background-pattern");if(k.isPatternMissing(Le))return;const Se=!Le&&J.a===1&&Y===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Se)return;const ke=Jr.disabled,Fe=k.getDepthModeForSublayer(0,Se==="opaque"?Vr.ReadWrite:Vr.ReadOnly),Te=k.colorModeForRenderPass(),Ge=k.useProgram(Le?"backgroundPattern":"background"),ht=U||ln(ve,{tileSize:we,terrain:k.style.map.terrain});Le&&(ce.activeTexture.set(ye.TEXTURE0),k.imageManager.bind(k.context));const at=N.getCrossfadeParameters();for(const ot of ht){const st=ve.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),Nt=Le?ns(Y,k,Le,{tileID:ot,tileSize:we},at):Up(Y,J),Vt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ot),It=_e.getMeshFromTileID(ce,ot.canonical,!1,!0,"raster");Ge.draw(ce,ye.TRIANGLES,Fe,ke,Te,Xr.backCCW,Nt,Vt,st,N.id,It.vertexBuffer,It.indexBuffer,It.segments)}})(i,0,m,v,E):o.cv(m)&&(function(k,D,N,U){const{isRenderingGlobe:W}=U,J=k.context,Y=N.implementation,oe=k.style.projection,ce=k.transform,ye=ce.getProjectionDataForCustomLayer(W),_e={farZ:ce.farZ,nearZ:ce.nearZ,fov:ce.fov*Math.PI/180,modelViewProjectionMatrix:ce.modelViewProjectionMatrix,projectionMatrix:ce.projectionMatrix,shaderData:{variantName:oe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${oe.shaderPreludeCode.vertexSource}`,define:oe.shaderDefine},defaultProjectionData:ye},ve=Y.renderingMode?Y.renderingMode:"2d";if(k.renderPass==="offscreen"){const we=Y.prerender;we&&(k.setCustomLayerDefaults(),J.setColorMode(k.colorModeForRenderPass()),we.call(Y,J.gl,_e),J.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),J.setColorMode(k.colorModeForRenderPass()),J.setStencilMode(Jr.disabled);const we=ve==="3d"?k.getDepthModeFor3D():k.getDepthModeForSublayer(0,Vr.ReadOnly);J.setDepthMode(we),Y.render(J.gl,_e),J.setDirty(),k.setBaseState(),J.bindFramebuffer.set(null)}})(i,0,m,E))}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!c||!m}useProgram(i,c,m=!1,v=[]){this.cache=this.cache||{};const E=!!this.style.map.terrain,k=this.style.projection,D=m?wn.projectionMercator:k.shaderPreludeCode,N=m?Ra:k.shaderDefine,U=i+(c?c.cacheKey:"")+`/${m?eo:k.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[U]||(this.cache[U]=new Kd(this.context,wn[i],c,mg[i],this._showOverdrawInspector,E,D,N,v)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var i,c;if(this._tileTextures){for(const m in this._tileTextures){const v=this._tileTextures[m];if(v)for(const E of v)E.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((i=this.tileExtentMesh.vertexBuffer)===null||i===void 0||i.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const m in this.cache){const v=this.cache[m];v&&v.program&&this.context.gl.deleteProgram(v.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}function yf(w,i){let c,m=!1,v=null,E=null;const k=()=>{v=null,m&&(w.apply(E,c),v=setTimeout(k,i),m=!1)};return(...D)=>(m=!0,E=this,c=D,v||k(),v)}class vf{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(m=v)})),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const m=c.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let E=window.location.hash.replace(v,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let k=window.location.href.replace(/(#.+)?$/,E);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=yf(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,v),k=Math.round(c.lng*E)/E,D=Math.round(c.lat*E)/E,N=this._map.getBearing(),U=this._map.getPitch();let W="";if(W+=i?`/${k}/${D}/${m}`:`${m}/${D}/${k}`,(N||U)&&(W+="/"+Math.round(10*N)/10),U&&(W+=`/${Math.round(U)}`),this._hashName){const J=this._hashName;let Y=!1;const oe=window.location.hash.slice(1).split("&").map((ce=>{const ye=ce.split("=")[0];return ye===J?(Y=!0,`${ye}=${W}`):ce})).filter((ce=>ce));return Y||oe.push(`${J}=${W}`),`#${oe.join("&")}`}return`#${W}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new o.V(+i[2],+i[1])}catch{return!1}const c=+i[0],m=+(i[3]||0),v=+(i[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const ls={linearity:.3,easing:o.cw(0,0,.3,1)},Kp=o.e({deceleration:2500,maxSpeed:1400},ls),Ri=o.e({deceleration:20,maxSpeed:1400},ls),ro=o.e({deceleration:1e3,maxSpeed:360},ls),_f=o.e({deceleration:1e3,maxSpeed:90},ls),zo=o.e({deceleration:1e3,maxSpeed:360},ls);class nv{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:F(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=F();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,c.roll+=E.rollDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const E=Os(c.pan.mag(),m,o.e({},Kp,i||{})),k=c.pan.mult(E.amount/c.pan.mag()),D=this._map.cameraHelper.handlePanInertia(k,this._map.transform);v.center=D.easingCenter,v.offset=D.easingOffset,No(v,E)}if(c.zoom){const E=Os(c.zoom,m,Ri);v.zoom=this._map.transform.zoom+E.amount,No(v,E)}if(c.bearing){const E=Os(c.bearing,m,ro);v.bearing=this._map.transform.bearing+o.an(E.amount,-179,179),No(v,E)}if(c.pitch){const E=Os(c.pitch,m,_f);v.pitch=this._map.transform.pitch+E.amount,No(v,E)}if(c.roll){const E=Os(c.roll,m,zo);v.roll=this._map.transform.roll+o.an(E.amount,-179,179),No(v,E)}if(v.zoom||v.bearing){const E=c.pinchAround===void 0?c.around:c.pinchAround;v.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function No(w,i){(!w.duration||w.duration<i.duration)&&(w.duration=i.duration,w.easing=i.easing)}function Os(w,i,c){const{maxSpeed:m,linearity:v,deceleration:E}=c,k=o.an(w*v/(i/1e3),-m,m),D=Math.abs(k)/(E*v);return{easing:c.easing,duration:1e3*D,amount:k*(D/2)}}class mi extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(i,m);const E=L.mousePos(c.getCanvas(),m),k=c.unproject(E);super(i,o.e({point:E,lngLat:k,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class Zl extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){const v=i==="touchend"?m.changedTouches:m.touches,E=L.touchPos(c.getCanvasContainer(),v),k=E.map((N=>c.unproject(N))),D=E.reduce(((N,U,W,J)=>N.add(U.div(J.length))),new o.P(0,0));super(i,{points:E,point:D,lngLats:k,lngLat:c.unproject(D),originalEvent:m}),this._defaultPrevented=!1}}class Zh extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}}class Fo{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Zh(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new mi(i.type,this._map,i))}mouseup(i){this._map.fire(new mi(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new mi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new mi(i.type,this._map,i))}mouseover(i){this._map.fire(new mi(i.type,this._map,i))}mouseout(i){this._map.fire(new mi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Zl(i.type,this._map,i))}touchmove(i){this._map.fire(new Zl(i.type,this._map,i))}touchend(i){this._map.fire(new Zl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Zl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bo{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new mi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new mi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vo{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(o.P.convert(i),this._map.terrain)}}class no{constructor(i,c){this._map=i,this._tr=new Vo(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(L.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=L.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const E=Math.min(v.x,m.x),k=Math.max(v.x,m.x),D=Math.min(v.y,m.y),N=Math.max(v.y,m.y);L.setTransform(this._box,`translate(${E}px,${D}px)`),this._box.style.width=k-E+"px",this._box.style.height=N-D+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const m=this._startPos,v=c;if(this.reset(),L.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:i})),{cameraAnimation:E=>E.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new o.l(i,{originalEvent:c}))}}function Ui(w,i){if(w.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${i.length}`);const c={};for(let m=0;m<w.length;m++)c[w[m].identifier]=i[m];return c}class Jt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=(function(v){const E=new o.P(0,0);for(const k of v)E._add(k);return E.div(v.length)})(c),this.touches=Ui(m,c)))}touchmove(i,c,m){if(this.aborted||!this.centroid)return;const v=Ui(m,c);for(const E in this.touches){const k=v[E];(!k||k.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(i,c,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Kh{constructor(i){this.singleTap=new Jt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,m){this.singleTap.touchstart(i,c,m)}touchmove(i,c,m){this.singleTap.touchmove(i,c,m)}touchend(i,c,m){const v=this.singleTap.touchend(i,c,m);if(v){const E=i.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(v)<30;if(E&&k||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Xh{constructor(i){this._tr=new Vo(i),this._zoomIn=new Kh({numTouches:1,numTaps:2}),this._zoomOut=new Kh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,m){this._zoomIn.touchstart(i,c,m),this._zoomOut.touchstart(i,c,m)}touchmove(i,c,m){this._zoomIn.touchmove(i,c,m),this._zoomOut.touchmove(i,c,m)}touchend(i,c,m){const v=this._zoomIn.touchend(i,c,m),E=this._zoomOut.touchend(i,c,m),k=this._tr;return v?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(v)},{originalEvent:i})}):E?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(E)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kl{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&L.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const pa=0,ma=2,Xn={[pa]:1,[ma]:2};class Na{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=L.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(c,m){const v=Xn[m];return c.buttons===void 0||(c.buttons&v)!==v})(i,this._eventButton)}isValidEndEvent(i){return L.mouseButton(i)===this._eventButton}}class xf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class Xp{constructor(i=new Na({checkCorrectEvent:()=>!0}),c=new xf){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(i,c,m){return i instanceof MouseEvent?c(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?m(i):void 0}startMove(i){this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(i){this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Xl=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=i=>{i.preventDefault()}};class Yp{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,c,m){return this._calculateTransform(i,c,m)}touchmove(i,c,m){if(this._active){if(!this._shouldBePrevented(m.length))return i.preventDefault(),this._calculateTransform(i,c,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,c,m){this._calculateTransform(i,c,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,m){m.length>0&&(this._active=!0);const v=Ui(m,c),E=new o.P(0,0),k=new o.P(0,0);let D=0;for(const U in v){const W=v[U],J=this._touches[U];J&&(E._add(W),k._add(W.sub(J)),D++,v[U]=W)}if(this._touches=v,this._shouldBePrevented(D)||!k.mag())return;const N=k.div(D);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(D),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,E]=this._firstTwoTouches,k=Wu(m,c,v),D=Wu(m,c,E);if(!k||!D)return;const N=this._aroundCenter?null:k.add(D).div(2);return this._move([k,D],N,i)}touchend(i,c,m){if(!this._firstTwoTouches)return;const[v,E]=this._firstTwoTouches,k=Wu(m,c,v),D=Wu(m,c,E);k&&D||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Wu(w,i,c){for(let m=0;m<w.length;m++)if(w[m].identifier===c)return i[m]}function Qp(w,i){return Math.log(w/i)/Math.LN2}class Yl extends Yh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qp(this._distance,m),pinchAround:c}}}function bf(w,i){return 180*w.angleWith(i)/Math.PI}class Jp extends Yh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,m){const v=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bf(this._vector,v),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,m=bf(i,this._startVector);return Math.abs(m)<c}}function Hu(w){return Math.abs(w.y)>Math.abs(w.x)}class Qh extends Yh{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,m){super.touchstart(i,c,m),this._currentTouchCount=m.length}_start(i){this._lastPoints=i,Hu(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=i[0].sub(this._lastPoints[0]),E=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,E,m.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,m){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,E=c.mag()>=2;if(!v&&!E)return;if(!v||!E)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const k=i.y>0==c.y>0;return Hu(i)&&Hu(c)&&k}}const ll={panStep:100,bearingStep:15,pitchStep:10};class Mn{constructor(i){this._tr=new Vo(i);const c=ll;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,m=0,v=0,E=0,k=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),E=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),E=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),k=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:D=>{const N=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:Hc,zoom:c?Math.round(N.zoom)+c*(i.shiftKey?2:1):N.zoom,bearing:N.bearing+m*this._bearingStep,pitch:N.pitch+v*this._pitchStep,offset:[-E*this._panStep,-k*this._panStep],center:N.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hc(w){return w*(2-w)}const Zc=4.000244140625,Zu=1/450;class Ku{constructor(i,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=i,this._tr=new Vo(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Zu}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=F(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Zc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=L.mousePos(this._map.getCanvas(),i),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(o.V.convert(m.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const D=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=D),typeof this._targetZoom=="number"&&(this._targetZoom+=D)}if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>Zc?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&N!==0&&(N=1/N);const U=typeof this._targetZoom!="number"?i.scale:o.aq(this._targetZoom);this._targetZoom=i.applyConstrain(i.getCameraLngLat(),o.at(U*N)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let E,k=!1;if(this._type==="wheel"&&m&&v){const D=F()-this._lastWheelEventTime,N=Math.min((D+5)/200,1),U=v(N);E=o.G.number(m,c,U),N<1?this._frameId||(this._frameId=!0):k=!0}else E=c,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!k,zoomDelta:E-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=o.cy;if(this._prevEase){const m=this._prevEase,v=(F()-m.start)/m.duration,E=m.easing(v+.01)-m.easing(v),k=.27/Math.sqrt(E*E+1e-4)*.01,D=Math.sqrt(.0729-k*k);c=o.cw(k,D,.25,1)}return this._prevEase={start:F(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ql{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class wf{constructor(i){this._tr=new Vo(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sf{constructor(){this._tap=new Kh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],E=i.timeStamp-this._tapTime<500,k=this._tapPoint.dist(v)<30;E&&k?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(i,c,m)}touchmove(i,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],E=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(i,c,m)}touchend(i,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(i,c,m);v&&(this._tapTime=i.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pf{constructor(i,c,m){this._el=i,this._mousePan=c,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eo{constructor(i,c,m,v){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=c,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ls{constructor(i,c,m,v){this._el=i,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ar{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=L.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=m,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(L.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:i,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const gr=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Xu extends o.l{}function Jh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class $o{constructor(i,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,E)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=v.type==="renderFrame"?void 0:v,D={needsRenderFrame:!1},N={},U={};for(const{handlerName:Y,handler:oe,allowed:ce}of this._handlers){if(!oe.isEnabled())continue;let ye;if(this._blockedByActive(U,ce,Y))oe.reset();else if(oe[E||v.type]){if(o.cz(v,E||v.type)){const _e=L.mousePos(this._map.getCanvas(),v);ye=oe[E||v.type](v,_e)}else if(o.cA(v,E||v.type)){const _e=this._getMapTouches(v.touches),ve=L.touchPos(this._map.getCanvas(),_e);ye=oe[E||v.type](v,ve,_e)}else o.cB(E||v.type)||(ye=oe[E||v.type](v));this.mergeHandlerResult(D,N,ye,Y,k),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()}(ye||oe.isActive())&&(U[Y]=oe)}const W={};for(const Y in this._previousActiveHandlers)U[Y]||(W[Y]=k);this._previousActiveHandlers=U,(Object.keys(W).length||Jh(D))&&(this._changes.push([D,N,W]),this._triggerRenderFrame()),(Object.keys(U).length||Jh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=D;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nv(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,E,k]of this._listeners)L.addEventListener(v,E,v===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[i,c,m]of this._listeners)L.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Fo(c,i));const v=c.boxZoom=new no(c,i);this._add("boxZoom",v),i.interactive&&i.boxZoom&&v.enable();const E=c.cooperativeGestures=new ar(c,i.cooperativeGestures);this._add("cooperativeGestures",E),i.cooperativeGestures&&E.enable();const k=new Xh(c),D=new wf(c);c.doubleClickZoom=new Ql(D,k),this._add("tapZoom",k),this._add("clickZoom",D),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Sf;this._add("tapDragZoom",N);const U=c.touchPitch=new Qh(c);this._add("touchPitch",U),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const W=()=>c.project(c.getCenter()),J=(function({enable:Se,clickTolerance:ke,aroundCenter:Fe=!0,minPixelCenterThreshold:Te=100,rotateDegreesPerPixelMoved:Ge=.8},ht){const at=new Na({checkCorrectEvent:ot=>L.mouseButton(ot)===0&&ot.ctrlKey||L.mouseButton(ot)===2&&!ot.ctrlKey});return new Kl({clickTolerance:ke,move:(ot,st)=>{const Nt=ht();if(Fe&&Math.abs(Nt.y-ot.y)>Te)return{bearingDelta:o.cx(new o.P(ot.x,st.y),st,Nt)};let Vt=(st.x-ot.x)*Ge;return Fe&&st.y<Nt.y&&(Vt=-Vt),{bearingDelta:Vt}},moveStateManager:at,enable:Se,assignEvents:Xl})})(i,W),Y=(function({enable:Se,clickTolerance:ke,pitchDegreesPerPixelMoved:Fe=-.5}){const Te=new Na({checkCorrectEvent:Ge=>L.mouseButton(Ge)===0&&Ge.ctrlKey||L.mouseButton(Ge)===2});return new Kl({clickTolerance:ke,move:(Ge,ht)=>({pitchDelta:(ht.y-Ge.y)*Fe}),moveStateManager:Te,enable:Se,assignEvents:Xl})})(i),oe=(function({enable:Se,clickTolerance:ke,rollDegreesPerPixelMoved:Fe=.3},Te){const Ge=new Na({checkCorrectEvent:ht=>L.mouseButton(ht)===2&&ht.ctrlKey});return new Kl({clickTolerance:ke,move:(ht,at)=>{const ot=Te();let st=(at.x-ht.x)*Fe;return at.y<ot.y&&(st=-st),{rollDelta:st}},moveStateManager:Ge,enable:Se,assignEvents:Xl})})(i,W);c.dragRotate=new Eo(i,J,Y,oe),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate","mouseRoll"]),this._add("mouseRoll",oe,["mousePitch"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const ce=(function({enable:Se,clickTolerance:ke}){const Fe=new Na({checkCorrectEvent:Te=>L.mouseButton(Te)===0&&!Te.ctrlKey});return new Kl({clickTolerance:ke,move:(Te,Ge)=>({around:Ge,panDelta:Ge.sub(Te)}),activateOnStart:!0,moveStateManager:Fe,enable:Se,assignEvents:Xl})})(i),ye=new Yp(i,c);c.dragPan=new Pf(m,ce,ye),this._add("mousePan",ce),this._add("touchPan",ye,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const _e=new Jp,ve=new Yl;c.touchZoomRotate=new Ls(m,ve,_e,N),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate),this._add("blockableMapEvent",new Bo(c));const we=c.scrollZoom=new Ku(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",we,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const Le=c.keyboard=new Mn(c);this._add("keyboard",Le),i.interactive&&i.keyboard&&c.keyboard.enable()}_add(i,c,m){this._handlers.push({handlerName:i,handler:c,allowed:m}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gr(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,m){for(const v in i)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const m of i)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(i,c,m,v,E){if(!m)return;o.e(i,m);const k={handlerName:v,originalEvent:m.originalEvent||E};m.zoomDelta!==void 0&&(c.zoom=k),m.panDelta!==void 0&&(c.drag=k),m.rollDelta!==void 0&&(c.roll=k),m.pitchDelta!==void 0&&(c.pitch=k),m.bearingDelta!==void 0&&(c.rotate=k)}_applyChanges(){const i={},c={},m={};for(const[v,E,k]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(i.rollDelta=(i.rollDelta||0)+v.rollDelta),v.around!==void 0&&(i.around=v.around),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),o.e(c,E),o.e(m,k);this._updateMapTransform(i,c,m),this._changes=[]}_updateMapTransform(i,c,m){const v=this._map,E=v._getTransformForUpdate(),k=v.terrain;if(!(Jh(i)||k&&this._terrainMovement))return this._fireEvents(c,m,!0);v._stop(!0);let{panDelta:D,zoomDelta:N,bearingDelta:U,pitchDelta:W,rollDelta:J,around:Y,pinchAround:oe}=i;oe!==void 0&&(Y=oe),Y=Y||v.transform.centerPoint,k&&!E.isPointOnMapSurface(Y)&&(Y=E.centerPoint);const ce={panDelta:D,zoomDelta:N,rollDelta:J,pitchDelta:W,bearingDelta:U,around:Y};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(Y)&&(Y=E.centerPoint);const ye=Y.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(D?Y.sub(D):Y);this._handleMapControls({terrain:k,tr:E,deltasForHelper:ce,preZoomAroundLoc:ye,combinedEventsInProgress:c,panDelta:D}),v._applyUpdatedTransform(E),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,m,!0)}_handleMapControls({terrain:i,tr:c,deltasForHelper:m,preZoomAroundLoc:v,combinedEventsInProgress:E,panDelta:k}){const D=this._map.cameraHelper;if(D.handleMapControlsRollPitchBearingZoom(m,c),i)return D.useGlobeControls?(this._terrainMovement||!E.drag&&!E.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void D.handleMapControlsPan(m,c,v)):this._terrainMovement||!E.drag&&!E.zoom?void(E.drag&&this._terrainMovement&&k?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(k))):D.handleMapControlsPan(m,c,v)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void D.handleMapControlsPan(m,c,v));D.handleMapControlsPan(m,c,v)}_fireEvents(i,c,m){const v=gr(this._eventsInProgress),E=gr(i),k={};for(const J in i){const{originalEvent:Y}=i[J];this._eventsInProgress[J]||(k[`${J}start`]=Y),this._eventsInProgress[J]=i[J]}!v&&E&&this._fireEvent("movestart",E.originalEvent);for(const J in k)this._fireEvent(J,k[J]);E&&this._fireEvent("move",E.originalEvent);for(const J in i){const{originalEvent:Y}=i[J];this._fireEvent(J,Y)}const D={};let N;for(const J in this._eventsInProgress){const{handlerName:Y,originalEvent:oe}=this._eventsInProgress[J];this._handlersById[Y].isActive()||(delete this._eventsInProgress[J],N=c[Y]||oe,D[`${J}end`]=N)}for(const J in D)this._fireEvent(J,D[J]);const U=gr(this._eventsInProgress),W=(v||E)&&!U;if(W&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const J=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&J.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(J)}if(m&&W){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!J||!J.essential&&z.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),Y(this._map.getBearing())&&this._map.resetNorth()):(Y(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new o.l(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new Xu("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xi extends o.E{constructor(i,c,m){super(),this._renderFrameCallback=()=>{const v=Math.min((F()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=m.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(i,c){i.apply(this.transform,!0),this.transform=i,this.cameraHelper=c}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,c){return this.jumpTo({elevation:i},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,c,m){return i=o.P.convert(i).mult(-1),this.panTo(this.transform.center,o.e({offset:i},c),m)}panTo(i,c,m){return this.easeTo(o.e({center:i},c),m)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,m){return this.easeTo(o.e({zoom:i},c),m)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,c){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,m){return this.easeTo(o.e({bearing:i},c),m)}resetNorth(i,c){return this.rotateTo(0,o.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}getRoll(){return this.transform.roll}setRoll(i,c){return this.jumpTo({roll:i},c),this}cameraForBounds(i,c){i=Wr.convert(i).adjustAntiMeridian();const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,c)}_cameraForBoxAndBearing(i,c,m,v){const E={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const U=v.padding;v.padding={top:U,bottom:U,right:U,left:U}}const k=o.e(E,v.padding);v.padding=k;const D=this.transform,N=new Wr(i,c);return this.cameraHelper.cameraForBoxAndBearing(v,k,N,m,D)}fitBounds(i,c,m){return this._fitInternal(this.cameraForBounds(i,c),c,m)}fitScreenCoordinates(i,c,m,v,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(i)),this.transform.screenPointToLocation(o.P.convert(c)),m,v),v,E)}_fitInternal(i,c,m){return i?(delete(c=o.e(i,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(i,c){this.stop();const m=this._getTransformForUpdate();let v=!1,E=!1,k=!1;const D=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,i);const N=m.zoom!==D;return"elevation"in i&&m.elevation!==+i.elevation&&m.setElevation(+i.elevation),"bearing"in i&&m.bearing!==+i.bearing&&(v=!0,m.setBearing(+i.bearing)),"pitch"in i&&m.pitch!==+i.pitch&&(E=!0,m.setPitch(+i.pitch)),"roll"in i&&m.roll!==+i.roll&&(k=!0,m.setRoll(+i.roll)),i.padding==null||m.isPaddingEqual(i.padding)||m.setPadding(i.padding),this._applyUpdatedTransform(m),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),v&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),E&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),k&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(i,c,m,v=0){const E=o.a9.fromLngLat(i,c),k=o.a9.fromLngLat(m,v),D=k.x-E.x,N=k.y-E.y,U=k.z-E.z,W=Math.hypot(D,N,U);if(W===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(D,N),Y=o.at(this.transform.cameraToCenterDistance/W/this.transform.tileSize),oe=180*Math.atan2(D,-N)/Math.PI;let ce=180*Math.acos(J/W)/Math.PI;return ce=U<0?90-ce:90+ce,{center:k.toLngLat(),elevation:v,zoom:Y,pitch:ce,bearing:oe}}calculateCameraOptionsFromCameraLngLatAltRotation(i,c,m,v,E){const k=this.transform.calculateCenterFromCameraLngLatAlt(i,c,m,v);return{center:k.center,elevation:k.elevation,zoom:k.zoom,bearing:m,pitch:v,roll:E}}easeTo(i,c){this._stop(!1,i.easeId),((i=o.e({offset:[0,0],duration:500,easing:o.cy},i)).animate===!1||!i.essential&&z.prefersReducedMotion)&&(i.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),E=m.pitch,k=m.roll,D="bearing"in i?this._normalizeBearing(i.bearing,v):v,N="pitch"in i?+i.pitch:E,U="roll"in i?this._normalizeBearing(i.roll,k):k,W="padding"in i?i.padding:m.padding,J=o.P.convert(i.offset);let Y,oe;i.around&&(Y=o.V.convert(i.around),oe=m.locationToScreenPoint(Y));const ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ye=this.cameraHelper.handleEaseTo(m,{bearing:D,pitch:N,roll:U,padding:W,around:Y,aroundPoint:oe,offsetAsPoint:J,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||v!==D,this._pitching=this._pitching||N!==E,this._rolling=this._rolling||U!==k,this._padding=!m.isPaddingEqual(W),this._zooming=this._zooming||ye.isZooming,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,ce),this.terrain&&this._prepareElevation(ye.elevationCenter),this._ease((_e=>{ye.easeFunc(_e),this.terrain&&!i.freezeElevation&&this._updateElevation(_e),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(_e=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,_e)}),i),this}_prepareEase(i,c,m={}){this._moving=!0,c||m.moving||this.fire(new o.l("movestart",i)),this._zooming&&!m.zooming&&this.fire(new o.l("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new o.l("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new o.l("pitchstart",i)),this._rolling&&!m.rolling&&this.fire(new o.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(m-(c-(m*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const c=i.getCameraLngLat(),m=i.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,i.zoom):0;if(m<v){const E=this.calculateCameraOptionsFromTo(c,v,i.center,i.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(i){const c=[];if(c.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&c.push((v=>this.transformCameraUpdate(v))),!c.length)return;const m=i.clone();for(const v of c){const E=m.clone(),{center:k,zoom:D,roll:N,pitch:U,bearing:W,elevation:J}=v(E);k&&E.setCenter(k),J!==void 0&&E.setElevation(J),D!==void 0&&E.setZoom(D),N!==void 0&&E.setRoll(N),U!==void 0&&E.setPitch(U),W!==void 0&&E.setBearing(W),m.apply(E,!1)}this.transform.apply(m,!1)}_fireMoveEvents(i){this.fire(new o.l("move",i)),this._zooming&&this.fire(new o.l("zoom",i)),this._rotating&&this.fire(new o.l("rotate",i)),this._pitching&&this.fire(new o.l("pitch",i)),this._rolling&&this.fire(new o.l("roll",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,E=this._pitching,k=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new o.l("zoomend",i)),v&&this.fire(new o.l("rotateend",i)),E&&this.fire(new o.l("pitchend",i)),k&&this.fire(new o.l("rollend",i)),this.fire(new o.l("moveend",i))}flyTo(i,c){if(!i.essential&&z.prefersReducedMotion){const st=o.U(i,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(st,c)}this.stop(),i=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cy},i);const m=this._getTransformForUpdate(),v=m.bearing,E=m.pitch,k=m.roll,D=m.padding,N="bearing"in i?this._normalizeBearing(i.bearing,v):v,U="pitch"in i?+i.pitch:E,W="roll"in i?this._normalizeBearing(i.roll,k):k,J="padding"in i?i.padding:m.padding,Y=o.P.convert(i.offset);let oe=m.centerPoint.add(Y);const ce=m.screenPointToLocation(oe),ye=this.cameraHelper.handleFlyTo(m,{bearing:N,pitch:U,roll:W,padding:J,locationAtOffset:ce,offsetAsPoint:Y,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let _e=i.curve;const ve=Math.max(m.width,m.height),we=ve/ye.scaleOfZoom,Le=ye.pixelPathLength;typeof ye.scaleOfMinZoom=="number"&&(_e=Math.sqrt(ve/ye.scaleOfMinZoom/Le*2));const Se=_e*_e;function ke(st){const Nt=(we*we-ve*ve+(st?-1:1)*Se*Se*Le*Le)/(2*(st?we:ve)*Se*Le);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function Fe(st){return(Math.exp(st)-Math.exp(-st))/2}function Te(st){return(Math.exp(st)+Math.exp(-st))/2}const Ge=ke(!1);let ht=function(st){return Te(Ge)/Te(Ge+_e*st)},at=function(st){return ve*((Te(Ge)*(Fe(Nt=Ge+_e*st)/Te(Nt))-Fe(Ge))/Se)/Le;var Nt},ot=(ke(!0)-Ge)/_e;if(Math.abs(Le)<2e-6||!isFinite(ot)){if(Math.abs(ve-we)<1e-6)return this.easeTo(i,c);const st=we<ve?-1:1;ot=Math.abs(Math.log(we/ve))/_e,at=()=>0,ht=Nt=>Math.exp(st*_e*Nt)}return i.duration="duration"in i?+i.duration:1e3*ot/("screenSpeed"in i?+i.screenSpeed/_e:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=v!==N,this._pitching=U!==E,this._rolling=W!==k,this._padding=!m.isPaddingEqual(J),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ye.targetCenter),this._ease((st=>{const Nt=st*ot,Vt=1/ht(Nt),It=at(Nt);this._rotating&&m.setBearing(o.G.number(v,N,st)),this._pitching&&m.setPitch(o.G.number(E,U,st)),this._rolling&&m.setRoll(o.G.number(k,W,st)),this._padding&&(m.interpolatePadding(D,J,st),oe=m.centerPoint.add(Y)),ye.easeFunc(st,Vt,It,oe),this.terrain&&!i.freezeElevation&&this._updateElevation(st),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return i||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(i,c,m){m.animate===!1||m.duration===0?(i(1),c()):(this._easeStart=F(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=o.W(i,-180,180);const m=Math.abs(i-c);return Math.abs(i-360-c)<m&&(i-=360),Math.abs(i+360-c)<m&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(i),this.transform):null}}const io={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ef{constructor(i=io){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const m=this._map._getUIString(`AttributionControl.${c}`);i.title=m,i.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.tileManagers;for(const v in c){const E=c[v];if(E.used||E.usedForTerrain){const k=E.getSource();k.attribution&&i.indexOf(k.attribution)<0&&i.push(k.attribution)}}i=i.filter((v=>String(v).trim())),i.sort(((v,E)=>v.length-E.length)),i=i.filter(((v,E)=>{for(let k=E+1;k<i.length;k++)if(i[k].indexOf(v)>=0)return!1;return!0}));const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=L.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ds{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl");const c=L.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Jl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Cf=o.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Kc extends o.E{constructor(i){super(),this._lastTilesetChange=F(),this.tileManager=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(i,c){this.tileManager.update(i,c),this._renderableTilesKeys=[];const m={};for(const v of ln(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),o.c7(v.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[v.key]=new At(v,this.tileSize),this._lastTilesetChange=F());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(i){for(const c in this._tiles){const m=this._tiles[c];(!i||m.tileID.equals(i)||m.tileID.isChildOf(i)||i.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,c){return c?this._getTerrainCoordsForTileRanges(i,c):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,E=i.clone(),k=o.bk();if(v.canonical.equals(i.canonical))o.c7(k,0,o.a5,o.a5,0,0,1);else if(v.canonical.isChildOf(i.canonical)){const D=v.canonical.z-i.canonical.z,N=v.canonical.x-(v.canonical.x>>D<<D),U=v.canonical.y-(v.canonical.y>>D<<D),W=o.a5>>D;o.c7(k,0,W,W,0,0,1),o.O(k,k,[-N*W,-U*W,0])}else{if(!i.canonical.isChildOf(v.canonical))continue;{const D=i.canonical.z-v.canonical.z,N=i.canonical.x-(i.canonical.x>>D<<D),U=i.canonical.y-(i.canonical.y>>D<<D),W=o.a5>>D;o.c7(k,0,o.a5,o.a5,0,0,1),o.O(k,k,[N*W,U*W,0]),o.Q(k,k,[1/2**D,1/2**D,0])}}E.terrainRttPosMatrix32f=new Float32Array(k),c[m]=E}return c}_getTerrainCoordsForTileRanges(i,c){const m={};for(const v of this._renderableTilesKeys){const E=this._tiles[v].tileID;if(!this._isWithinTileRanges(E,c))continue;const k=i.clone(),D=o.bk();if(E.canonical.z===i.canonical.z){const N=i.canonical.x-E.canonical.x+i.wrap*(1<<i.canonical.z),U=i.canonical.y-E.canonical.y;o.c7(D,0,o.a5,o.a5,0,0,1),o.O(D,D,[N*o.a5,U*o.a5,0])}else if(E.canonical.z>i.canonical.z){const N=E.canonical.z-i.canonical.z,U=E.canonical.x-(E.canonical.x>>N<<N)+i.wrap*(1<<E.canonical.z),W=E.canonical.y-(E.canonical.y>>N<<N),J=i.canonical.x-(E.canonical.x>>N),Y=i.canonical.y-(E.canonical.y>>N),oe=o.a5>>N;o.c7(D,0,oe,oe,0,0,1),o.O(D,D,[-U*oe+J*o.a5,-W*oe+Y*o.a5,0])}else{const N=i.canonical.z-E.canonical.z,U=i.canonical.x-(i.canonical.x>>N<<N)+i.wrap*(1<<i.canonical.z),W=i.canonical.y-(i.canonical.y>>N<<N),J=(i.canonical.x>>N)-E.canonical.x,Y=(i.canonical.y>>N)-E.canonical.y,oe=o.a5<<N;o.c7(D,0,oe,oe,0,0,1),o.O(D,D,[U*o.a5+J*oe,W*o.a5+Y*oe,0])}k.terrainRttPosMatrix32f=new Float32Array(D),m[v]=k}return m}getSourceTile(i,c){const m=this.tileManager._source;let v=i.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(v).key);let E=this.findTileInCaches(this._sourceTileCache[i.key]);if(!(E!=null&&E.dem)&&c)for(;v>=m.minzoom&&!(E!=null&&E.dem);)E=this.findTileInCaches(i.scaledTo(v--).key);return E}findTileInCaches(i){let c=this.tileManager.getTileByID(i);return c||(c=this.tileManager._outOfViewCache.getByKey(i),c)}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,c){const m=c[i.canonical.z];return!!m&&(i.wrap>m.minWrap||i.wrap<m.maxWrap||i.canonical.x>=m.minTileXWrapped&&i.canonical.x<=m.maxTileXWrapped&&i.canonical.y>=m.minTileY&&i.canonical.y<=m.maxTileY)}}class qn{constructor(i,c,m){this._meshCache={},this.painter=i,this.tileManager=new Kc(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,m,v=o.a5){var E;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const k=this.getTerrainData(i),D=(E=k.tile)===null||E===void 0?void 0:E.dem;if(!D)return 0;const N=o.cC([],[c/v*o.a5,m/v*o.a5],k.u_terrain_matrix),U=[N[0]*D.dim,N[1]*D.dim],W=Math.floor(U[0]),J=Math.floor(U[1]),Y=U[0]-W,oe=U[1]-J;return D.get(W,J)*(1-Y)*(1-oe)+D.get(W+1,J)*Y*(1-oe)+D.get(W,J+1)*(1-Y)*oe+D.get(W+1,J+1)*Y*oe}getElevationForLngLatZoom(i,c){if(!o.cD(c,i.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(m,v%o.a5,E%o.a5,o.a5)}getElevationForLngLat(i,c){const m=ln(c,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let v=0;for(const E of m)E.canonical.z>v&&(v=Math.min(E.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(i,v)}getElevation(i,c,m,v=o.a5){return this.getDEMElevation(i,c,m,v)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const v=this.painter.context,E=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(v,E,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ar([])}const c=this.tileManager.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new o.T(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c.toString()+c.tileID.key+i.key;if(m&&!this._demMatrixCache[m]){const v=this.tileManager.getSource().maxzoom;let E=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=v?E=i.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=i.canonical.x-(i.canonical.x>>E<<E),D=i.canonical.y-(i.canonical.y>>E<<E),N=o.cE(new Float64Array(16),[1/(o.a5<<E),1/(o.a5<<E),0]);o.O(N,N,[k*o.a5,D*o.a5,0]),this._demMatrixCache[i.key]={matrix:N,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,k=0;E<this._coordsTextureSize;E++)for(let D=0;D<this._coordsTextureSize;D++,k+=4)c[k+0]=255&D,c[k+1]=255&E,c[k+2]=D>>8<<4|E>>8,c[k+3]=0;const m=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new o.T(i,m,i.gl.RGBA,{premultiply:!1});return v.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),m=this.painter.context,v=m.gl,E=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(E,D-k-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),U=c[1]+((15&c[2])<<8),W=this.coordsIndex[255-c[3]],J=W&&this.tileManager.getTileByID(W);if(!J)return null;const Y=this._coordsTextureSize,oe=(1<<J.tileID.canonical.z)*Y;return new o.a9((J.tileID.canonical.x*Y+N)/oe+J.tileID.wrap,(J.tileID.canonical.y*Y+U)/oe,this.getElevation(J.tileID,N,U,Y))}depthAtPoint(i){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(i){var c;const m=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=m&&i.canonical.y===0,E=m&&i.canonical.y===(1<<i.canonical.z)-1,k=`m_${v?"n":""}_${E?"s":""}`;if(this._meshCache[k])return this._meshCache[k];const D=this.painter.context,N=new o.cF,U=new o.aY,W=this.meshSize,J=o.a5/W,Y=W*W;for(let Te=0;Te<=W;Te++)for(let Ge=0;Ge<=W;Ge++)N.emplaceBack(Ge*J,Te*J,0);for(let Te=0;Te<Y;Te+=W+1)for(let Ge=0;Ge<W;Ge++)U.emplaceBack(Ge+Te,W+Ge+Te+1,W+Ge+Te+2),U.emplaceBack(Ge+Te,W+Ge+Te+2,Ge+Te+1);const oe=N.length,ce=oe+(W+1),ye=(W+1)*W,_e=v?o.br:0,ve=v?0:1,we=E?o.bs:o.a5,Le=E?0:1;for(let Te=0;Te<=W;Te++)N.emplaceBack(Te*J,_e,ve);for(let Te=0;Te<=W;Te++)N.emplaceBack(Te*J,we,Le);for(let Te=0;Te<W;Te++)U.emplaceBack(ye+Te,ce+Te,ce+Te+1),U.emplaceBack(ye+Te,ce+Te+1,ye+Te+1),U.emplaceBack(0+Te,oe+Te+1,oe+Te),U.emplaceBack(0+Te,0+Te+1,oe+Te+1);const Se=N.length,ke=Se+2*(W+1);for(const Te of[0,1])for(let Ge=0;Ge<=W;Ge++)for(const ht of[0,1])N.emplaceBack(Te*o.a5,Ge*J,ht);for(let Te=0;Te<2*W;Te+=2)U.emplaceBack(Se+Te,Se+Te+1,Se+Te+3),U.emplaceBack(Se+Te,Se+Te+3,Se+Te+2),U.emplaceBack(ke+Te,ke+Te+3,ke+Te+1),U.emplaceBack(ke+Te,ke+Te+2,ke+Te+3);const Fe=new In(D.createVertexBuffer(N,Cf.members),D.createIndexBuffer(U),o.aX.simpleSegment(0,0,N.length,U.length));return this._meshCache[k]=Fe,Fe}getMeshFrameDelta(i){return 2*Math.PI*o.bE/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,c){var m;if(!o.cD(c,i.wrap()))return 0;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(i,c){const m=o.a9.fromLngLat(i.wrap()),v=(1<<c)*o.a5,E=m.x*v,k=m.y*v,D=Math.floor(E/o.a5),N=Math.floor(k/o.a5);return{tileID:new o.a2(c,0,c,D,N),mercatorX:E,mercatorY:k}}}class gi{constructor(i,c,m){this._context=i,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:i,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>i.id!==c)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const us={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ao{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new gi(i.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=i._order.filter((m=>!i._layers[m].isHidden(c))),this._coordsAscending={};for(const m in i.tileManagers){this._coordsAscending[m]={};const v=i.tileManagers[m].getVisibleCoordinates(),E=i.tileManagers[m].getSource(),k=E instanceof zt?E.terrainTileRanges:null;for(const D of v){const N=this.terrain.tileManager.getTerrainCoords(D,k);for(const U in N)this._coordsAscending[m][U]||(this._coordsAscending[m][U]=[]),this._coordsAscending[m][U].push(N[U])}}this._coordsAscendingStr={};for(const m of i._order){const v=i._layers[m],E=v.source;if(us[v.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(const k in this._coordsAscending[E])this._coordsAscendingStr[E][k]=this._coordsAscending[E][k].map((D=>D.key)).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsAscendingStr){const E=this._coordsAscendingStr[v][m.tileID.key];E&&E!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(i,c){if(i.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=i.type,E=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(us[v]&&(this._prevType&&us[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(us[this._prevType]||us[v]&&k){this._prevType=v;const D=this._stacks.length-1,N=this._stacks[D]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(Hl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[D]){const J=this.pool.getObjectForId(U.rtt[D].id);if(J.stamp===U.rtt[D].stamp){this.pool.useObject(J);continue}}const W=this.pool.getOrCreateFreeObject();this.pool.useObject(W),this.pool.stampObject(W),U.rtt[D]={id:W.id,stamp:W.stamp},E.context.bindFramebuffer.set(W.fbo.framebuffer),E.context.clear({color:o.bp.transparent,stencil:0}),E.currentStencilSource=void 0;for(let J=0;J<N.length;J++){const Y=E.style._layers[N[J]],oe=Y.source?this._coordsAscending[Y.source][U.tileID.key]:[U.tileID];E.context.viewport.set([0,0,W.fbo.width,W.fbo.height]),E._renderTileClippingMasks(Y,oe,!0),E.renderLayer(E,E.style.tileManagers[Y.source],Y,oe,m),Y.source&&(U.rttCoords[Y.source]=this._coordsAscendingStr[Y.source][U.tileID.key])}}return Hl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),us[v]}return!1}}const eu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Yu=_,Rs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:io,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},ed={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class js{constructor(i,c,m=!1){this.mousedown=E=>{this.startMove(E,L.mousePos(this.element,E)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,L.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHandler.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),L.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new Xp;this._rotatePitchHandler=new Kl({clickTolerance:3,move:(E,k)=>{const D=c.getBoundingClientRect(),N=new o.P((D.bottom-D.top)/2,(D.right-D.left)/2);return{bearingDelta:o.cx(new o.P(E.x,k.y),k,N),pitchDelta:m?-.5*(k.y-E.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=i,L.addEventListener(c,"mousedown",this.mousedown),L.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(c,"touchcancel",this.reset)}startMove(i,c){this._rotatePitchHandler.dragStart(i,c),L.disableDrag()}move(i,c){const m=this.map,{bearingDelta:v,pitchDelta:E}=this._rotatePitchHandler.dragMove(i,c)||{};v&&m.setBearing(m.getBearing()+v),E&&m.setPitch(m.getPitch()+E)}off(){const i=this.element;L.removeEventListener(i,"mousedown",this.mousedown),L.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend),L.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend)}}let zs;function Xc(w,i,c,m=!1){if(m||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();const v=new o.V(w.lng,w.lat);if(w=new o.V(w.lng,w.lat),i){const E=new o.V(w.lng-360,w.lat),k=new o.V(w.lng+360,w.lat),D=c.locationToScreenPoint(w).distSqr(i);c.locationToScreenPoint(E).distSqr(i)<D?w=E:c.locationToScreenPoint(k).distSqr(i)<D&&(w=k)}for(;Math.abs(w.lng-c.center.lng)>180;){const E=c.locationToScreenPoint(w);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:v}const Gn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qu(w,i,c){const m=w.classList;for(const v in Gn)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${i}`)}class Ju extends o.E{constructor(i){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=Xc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${Gn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${v}`),z.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=o.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div");const c=L.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const E=L.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const k=L.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const D=L.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of N){const we=L.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ve.rx),we.setAttributeNS(null,"ry",ve.ry),D.appendChild(we)}const U=L.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const W=L.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(W);const J=L.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const Y=L.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(Y);const oe=L.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const ce=L.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=L.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const _e=L.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),ce.appendChild(ye),ce.appendChild(_e),k.appendChild(D),k.appendChild(U),k.appendChild(J),k.appendChild(oe),k.appendChild(ce),c.appendChild(k),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Qu(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=o.V.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,m;const v=(c=this._map)===null||c===void 0?void 0:c.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!v||E){const oe=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==oe&&(this._element.style.opacity=oe))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const k=this._map,D=k.terrain.depthAtPoint(this._pos),N=k.terrain.getElevationForLngLat(this._lngLat,k.transform);if(k.transform.lngLatToCameraDepth(this._lngLat,N)-D<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/k.transform.pixelsPerMeter,W=Math.sin(k.getPitch()*Math.PI/180)*U,J=k.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Y=k.transform.lngLatToCameraDepth(this._lngLat,N+W)-J>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=o.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return(this._opacity===void 0||i===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const td={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ul=0,cl=!1;const hl={maxWidth:100,unit:"metric"};function Wn(w,i,c){const m=c&&c.maxWidth||100,v=w._container.clientHeight/2,E=w._container.clientWidth/2,k=w.unproject([E-m/2,v]),D=w.unproject([E+m/2,v]),N=Math.round(w.project(D).x-w.project(k).x),U=Math.min(m,N,w._container.clientWidth),W=k.distanceTo(D);if(c&&c.unit==="imperial"){const J=3.2808*W;J>5280?ai(i,U,J/5280,w._getUIString("ScaleControl.Miles")):ai(i,U,J,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?ai(i,U,W/1852,w._getUIString("ScaleControl.NauticalMiles")):W>=1e3?ai(i,U,W/1e3,w._getUIString("ScaleControl.Kilometers")):ai(i,U,W,w._getUIString("ScaleControl.Meters"))}function ai(w,i,c,m){const v=(function(E){const k=Math.pow(10,`${Math.floor(E)}`.length-1);let D=E/k;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:(function(N){const U=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*U)/U})(D),k*D})(c);w.style.width=i*(v/c)+"px",w.innerHTML=`${v}&nbsp;${m}`}const ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},ec=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tu(w){if(w){if(typeof w=="number"){const i=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(i,i),"top-right":new o.P(-i,i),bottom:new o.P(0,-w),"bottom-left":new o.P(i,-i),"bottom-right":new o.P(-i,-i),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const i=o.P.convert(w);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return tu(new o.P(0,0))}const tc=_;d.AJAXError=o.cI,d.Event=o.l,d.Evented=o.E,d.LngLat=o.V,d.MercatorCoordinate=o.a9,d.Point=o.P,d.addProtocol=o.cJ,d.config=o.c,d.removeProtocol=o.cK,d.AttributionControl=Ef,d.BoxZoomHandler=no,d.CanvasSource=ue,d.CooperativeGesturesHandler=ar,d.DoubleClickZoomHandler=Ql,d.DragPanHandler=Pf,d.DragRotateHandler=Eo,d.EdgeInsets=Cu,d.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Wt,d.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new o.V(i.coords.longitude,i.coords.latitude),m=i.coords.accuracy,v=this._map.getBearing(),E=o.e({bearing:v},this.options.fitBoundsOptions),k=Wr.fromLngLat(c,m);this._map.fitBounds(k,E,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new o.V(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ju({element:this._dotElement}),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ju({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const m=(c==null?void 0:c[0])instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},td,w)}onAdd(w){return this._map=w,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(i=!1){if(zs!==void 0&&!i)return zs;if(window.navigator.permissions===void 0)return zs=!!window.navigator.geolocation,zs;try{zs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{zs=!!window.navigator.geolocation}return zs}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ul=0,cl=!1}_isOutOfMapMaxBounds(w){const i=this._map.getMaxBounds(),c=w.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const i=this._map.project(w),c=this._map.unproject([i.x+100,i.y]),m=w.distanceTo(c)/100,v=2*this._accuracy/m;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ul--,cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ul++,ul>1?(w={maximumAge:6e5,timeout:0},cl=!0):(w=this.options.positionOptions,cl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const i=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=L.create("button","maplibregl-ctrl-globe",this._container),L.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=vf,d.ImageSource=zt,d.KeyboardHandler=Mn,d.LngLatBounds=Wr,d.LogoControl=Ds,d.Map=class extends xi{constructor(w){var i,c;o.cG.mark(o.cH.create);const m=Object.assign(Object.assign(Object.assign({},Rs),w),{canvasContextAttributes:Object.assign(Object.assign({},Rs.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new Mu,E=new zl;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),m.transformConstrain!==null&&v.setConstrainOverride(m.transformConstrain),super(v,E,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Jl,this._controls=[],this._mapId=o.af(),this._lostContextStyle={style:null,images:null},this._contextLost=D=>{D.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[U]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${U}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:D}))},this._contextRestored=D=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new o.l("webglcontextrestored",{originalEvent:D}))},this._onMapScroll=D=>{if(D.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},eu),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this._zoomLevelsToOverscale=m.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=m.transformCameraUpdate,this.transformConstrain=m.transformConstrain,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,m.reduceMotion!==void 0&&(z.prefersReducedMotion=m.reduceMotion),this._imageQueueHandle=ne.addThrottleControl((()=>this.isMoving())),this._requestManager=new be(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let D=!1;const N=yf((U=>{this._trackResize&&!this._removed&&(this.resize(U),this.redraw())}),50);this._resizeObserver=new ResizeObserver((U=>{D?N(U):D=!0})),this._resizeObserver.observe(this._container)}this.handlers=new $o(this,m),this._hash=m.hash&&new vf(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.e({},m.fitBoundsOptions,{duration:0}))));const k=typeof m.style=="string"||((c=(i=m.style)===null||i===void 0?void 0:i.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,k),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Ef(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Ds,m.logoPosition),this.on("style.load",(()=>{if(k||this._resizeTransform(),this.transform.unmodified){const D=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(D)}})),this.on("data",(D=>{this._update(D.dataType==="style"),this.fire(new o.l(`${D.dataType}data`,D))})),this.on("dataloading",(D=>{this.fire(new o.l(`${D.dataType}dataloading`,D))})),this.on("dataabort",(D=>{this.fire(new o.l("sourcedataabort",D))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,i){return this.style.setGlobalStateProperty(w,i),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,i){if(i===void 0&&(i=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(w);return i>-1&&this._controls.splice(i,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return ln(this.transform,w)}calculateCameraOptionsFromTo(w,i,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLat(c,this.transform)),super.calculateCameraOptionsFromTo(w,i,c,m)}resize(w,i=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(i);const c=!this._moving;return c&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),c&&this.fire(new o.l("moveend",w)),this}_resizeInternal(w=!0){const[i,c]=this._containerDimensions(),m=this._getClampedPixelRatio(i,c);if(this._resizeCanvas(i,c,m),this.painter.resize(i,c,m),this.painter.overLimit()){const v=this.painter.context.gl;this._maxCanvasSize=[v.drawingBufferWidth,v.drawingBufferHeight];const E=this._getClampedPixelRatio(i,c);this._resizeCanvas(i,c,E),this.painter.resize(i,c,E)}this._resizeTransform(w)}_resizeTransform(w=!0){var i;const[c,m]=this._containerDimensions();this.transform.resize(c,m,w),(i=this._requestedCameraState)===null||i===void 0||i.resize(c,m,w)}_getClampedPixelRatio(w,i){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),E=w*v,k=i*v;return Math.min(E>c?c/E:1,k>m?m/k:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Wr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const i=this._getTransformForUpdate();return i.setMinZoom(w),this._applyUpdatedTransform(i),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const i=this._getTransformForUpdate();return i.setMaxZoom(w),this._applyUpdatedTransform(i),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,i,c){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:i,listener:c,delegates:{mousemove:E=>{const k=i.filter((N=>this.getLayer(N))),D=k.length!==0?this.queryRenderedFeatures(E.point,{layers:k}):[];D.length?m||(m=!0,c.call(this,new mi(w,this,E.originalEvent,{features:D}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:i,listener:c,delegates:{mousemove:k=>{const D=i.filter((N=>this.getLayer(N)));(D.length!==0?this.queryRenderedFeatures(k.point,{layers:D}):[]).length?m=!0:m&&(m=!1,c.call(this,new mi(w,this,k.originalEvent)))},mouseout:k=>{m&&(m=!1,c.call(this,new mi(w,this,k.originalEvent)))}}}}{const m=v=>{const E=i.filter((D=>this.getLayer(D))),k=E.length!==0?this.queryRenderedFeatures(v.point,{layers:E}):[];k.length&&(v.features=k,c.call(this,v),delete v.features)};return{layers:i,listener:c,delegates:{[w]:m}}}}_saveDelegatedListener(w,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(i)}_removeDelegatedListener(w,i,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let v=0;v<m.length;v++){const E=m[v];if(E.listener===c&&E.layers.length===i.length&&E.layers.every((k=>i.includes(k)))){for(const k in E.delegates)this.off(k,E.delegates[k]);return void m.splice(v,1)}}}on(w,i,c){if(c===void 0)return super.on(w,i);const m=typeof i=="string"?[i]:i,v=this._createDelegatedListener(w,m,c);this._saveDelegatedListener(w,v);for(const E in v.delegates)this.on(E,v.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,c)}}}once(w,i,c){if(c===void 0)return super.once(w,i);const m=typeof i=="string"?[i]:i,v=this._createDelegatedListener(w,m,c);for(const E in v.delegates){const k=v.delegates[E];v.delegates[E]=(...D)=>{this._removeDelegatedListener(w,m,c),k(...D)}}this._saveDelegatedListener(w,v);for(const E in v.delegates)this.once(E,v.delegates[E]);return this}off(w,i,c){return c===void 0?super.off(w,i):(this._removeDelegatedListener(w,typeof i=="string"?[i]:i,c),this)}queryRenderedFeatures(w,i){if(!this.style)return[];let c;const m=w instanceof o.P||Array.isArray(w),v=m?w:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(m?{}:w)||{},v instanceof o.P||typeof v[0]=="number")c=[o.P.convert(v)];else{const E=o.P.convert(v[0]),k=o.P.convert(v[1]);c=[E,new o.P(k.x,E.y),k,new o.P(E.x,k.y),E]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(w,i){return this.style.querySourceFeatures(w,i)}setStyle(w,i){return(i=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(w,i))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const i=this._locale[w];if(i==null)throw new Error(`Missing UI string '${w}'`);return i}_updateStyle(w,i){var c,m;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,i)));const v=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Lu(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,i,v):this.style.loadJSON(w,i,v),this):((m=(c=this.style)===null||c===void 0?void 0:c.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,i){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");o.j(c,new AbortController).then((m=>{this._updateDiff(m.data,i)})).catch((m=>{m&&this.fire(new o.k(m))}))}else typeof w=="object"&&this._updateDiff(w,i)}_updateDiff(w,i){try{this.style.setState(w,i)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,i)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,i){return this._lazyInitEmptyStyle(),this.style.addSource(w,i),this._update(!0)}isSourceLoaded(w){const i=this.style&&this.style.tileManagers[w];if(i!==void 0)return i.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const i=this.style.tileManagers[w.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new qn(this.painter,i,w),this.painter.renderToTexture=new ao(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var m;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=c.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,i;return(i=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const i of Object.values(w))if(!i.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,i,c){if(c){const m=this.getSource(c);if(!m)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);m.calculateTileZoom=Zr(Math.max(1,w),Math.max(1,i))}else for(const m in this.style.tileManagers)this.style.tileManagers[m].getSource().calculateTileZoom=Zr(Math.max(1,w),Math.max(1,i));return this._update(!0),this}refreshTiles(w,i){const c=this.style.tileManagers[w];if(!c)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);i===void 0?c.reload(!0):c.refreshTiles(i.map((m=>new o.ac(m.z,m.x,m.y))))}addImage(w,i,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:E,stretchY:k,content:D,textFitWidth:N,textFitHeight:U}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||o.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:W,height:J,data:Y}=i,oe=i;return this.style.addImage(w,{data:new o.R({width:W,height:J},new Uint8Array(Y)),pixelRatio:m,stretchX:E,stretchY:k,content:D,textFitWidth:N,textFitHeight:U,sdf:v,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,w),this}}{const{width:W,height:J,data:Y}=z.getImageData(i);this.style.addImage(w,{data:new o.R({width:W,height:J},Y),pixelRatio:m,stretchX:E,stretchY:k,content:D,textFitWidth:N,textFitHeight:U,sdf:v,version:0})}}updateImage(w,i){const c=this.style.getImage(w);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||o.b(i)?z.getImageData(i):i,{width:v,height:E,data:k}=m;if(v===void 0||E===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||E!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(i instanceof HTMLImageElement||o.b(i));return c.data.replace(k,D),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return ne.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,i){return this._lazyInitEmptyStyle(),this.style.addLayer(w,i),this._update(!0)}moveLayer(w,i){return this.style.moveLayer(w,i),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,i,c){return this.style.setLayerZoomRange(w,i,c),this._update(!0)}setFilter(w,i,c={}){return this.style.setFilter(w,i,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,i,c,m={}){return this.style.setPaintProperty(w,i,c,m),this._update(!0)}getPaintProperty(w,i){return this.style.getPaintProperty(w,i)}setLayoutProperty(w,i,c,m={}){return this.style.setLayoutProperty(w,i,c,m),this._update(!0)}getLayoutProperty(w,i){return this.style.getLayoutProperty(w,i)}setGlyphs(w,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,i,c,(m=>{m||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,i,(c=>{c||this._update(!0)})),this}setLight(w,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,i){return this.style.setFeatureState(w,i),this._update()}removeFeatureState(w,i){return this.style.removeFeatureState(w,i),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,i=0;return this._container&&(w=this._container.clientWidth||400,i=this._container.clientHeight||300),[w,i]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const i=this._canvasContainer=L.create("div","maplibregl-canvas-container",w);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=L.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((k=>{E[k]=L.create("div",`maplibregl-ctrl-${k} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,i,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",(m=>{i={requestedAttributes:w},m&&(i.statusMessage=m.statusMessage,i.type=m.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const m="Failed to initialize WebGL";throw i?(i.message=m,new Error(JSON.stringify(i))):new Error(m)}this.painter=new Hh(c,this.transform),K.testSupport(c)}migrateProjection(w,i){super.migrateProjection(w,i),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var i,c,m,v,E;const k=this._idleTriggered?this._fadeDuration:0,D=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const J=this.transform.zoom,Y=F();this.style.zoomHistory.update(J,Y);const oe=new o.H(J,{now:Y,fadeDuration:k,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ce=oe.crossFadingFactor();ce===1&&ce===this._crossFadingFactor||(N=!0,this._crossFadingFactor=ce),this.style.update(oe)}const U=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==D;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,k,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cG.mark(o.cH.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const W=this._sourcesDirty||this._styleDirty||this._placementDirty;return W||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||W||(this._fullyLoaded=!0,o.cG.mark(o.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cG.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,(w=>{o.cG.frame(w),this._frameRequest=null;try{this._render(w)}catch(i){if(!o.Z(i)&&!(function(c){return c.message===$l})(i))throw i}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Yu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},d.MapMouseEvent=mi,d.MapTouchEvent=Zl,d.MapWheelEvent=Zh,d.Marker=Ju,d.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),m=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);i.title=m,i.setAttribute("aria-label",m)},this.options=o.e({},ed,w),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),L.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),L.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=L.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new js(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,i){const c=L.create("button",w,this._container);return c.type="button",c.addEventListener("click",i),c}},d.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=L.create("div","maplibregl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Xc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const c=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=tu(this.options.offset);if(!m){const k=this._container.offsetWidth,D=this._container.offsetHeight,N=(function(W){var J,Y,oe,ce;return W?{top:(J=W.top)!==null&&J!==void 0?J:0,right:(Y=W.right)!==null&&Y!==void 0?Y:0,bottom:(oe=W.bottom)!==null&&oe!==void 0?oe:0,left:(ce=W.left)!==null&&ce!==void 0?ce:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let U;U=c.y+v.bottom.y<D+N.top?["top"]:c.y>this._map.transform.height-D-N.bottom?["bottom"]:[],c.x<k/2+N.left?U.push("left"):c.x>this._map.transform.width-k/2-N.right&&U.push("right"),m=U.length===0?"bottom":U.join("-")}let E=c.add(v[m]);this.options.subpixelPositioning||(E=E.round()),L.setTransform(this._container,`${Gn[m]} translate(${E.x}px,${E.y}px)`),Qu(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ji),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const i=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=w;m=c.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(ec);w&&w.focus()}},d.RasterDEMTileSource=rt,d.RasterTileSource=Be,d.ScaleControl=class{constructor(w){this._onMove=()=>{Wn(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Wn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},hl),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Ku,d.Style=Lu,d.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Qh,d.TwoFingersTouchRotateHandler=Jp,d.TwoFingersTouchZoomHandler=Yl,d.TwoFingersTouchZoomRotateHandler=Ls,d.VectorTileSource=Ii,d.VideoSource=ze,d.addSourceType=(w,i)=>o._(void 0,void 0,void 0,(function*(){if(pe(w))throw new Error(`A source type called "${w}" already exists.`);((c,m)=>{le[c]=m})(w,i)})),d.clearPrewarmedResources=function(){const w=Ft;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Dt),Ft=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=Lc,d.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Ze().getRTLTextPluginStatus()},d.getVersion=function(){return tc},d.getWorkerCount=function(){return Ke.workerCount},d.getWorkerUrl=function(){return o.c.WORKER_URL},d.importScriptInWorkers=function(w){return ir().broadcast("IS",w)},d.isTimeFrozen=function(){return B.isFrozen()},d.now=F,d.prewarm=function(){ct().acquire(Dt)},d.restoreNow=function(){B.restoreNow()},d.setMaxParallelImageRequests=function(w){o.c.MAX_PARALLEL_IMAGE_REQUESTS=w},d.setNow=function(w){B.setNow(w)},d.setRTLTextPlugin=function(w,i){return Ze().setRTLTextPlugin(w,i)},d.setWorkerCount=function(w){Ke.workerCount=w},d.setWorkerUrl=function(w){o.c.WORKER_URL=w}}));var h=r;return h}))})(Nx)),Nx.exports}var jH=RH();const vN=Ph(jH);function _N(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=_N(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Hn(){for(var e,t,r=0,n="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=_N(e))&&(n&&(n+=" "),n+=t);return n}const zH=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},NH=(e,t)=>({classGroupId:e,validator:t}),xN=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),lb="-",yI=[],FH="arbitrary..",BH=e=>{const t=$H(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return VH(d);const o=d.split(lb),_=o[0]===""&&o.length>1?1:0;return bN(o,_,t)},getConflictingClassGroupIds:(d,o)=>{if(o){const _=n[d],S=r[d];return _?S?zH(S,_):_:S||yI}return r[d]||yI}}},bN=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const l=e[t],h=r.nextPart.get(l);if(h){const S=bN(e,t+1,h);if(S)return S}const d=r.validators;if(d===null)return;const o=t===0?e.join(lb):e.slice(t).join(lb),_=d.length;for(let S=0;S<_;S++){const P=d[S];if(P.validator(o))return P.classGroupId}},VH=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?FH+n:void 0})(),$H=e=>{const{theme:t,classGroups:r}=e;return UH(r,t)},UH=(e,t)=>{const r=xN();for(const n in e){const l=e[n];TC(l,r,n,t)}return r},TC=(e,t,r,n)=>{const l=e.length;for(let h=0;h<l;h++){const d=e[h];qH(d,t,r,n)}},qH=(e,t,r,n)=>{if(typeof e=="string"){GH(e,t,r);return}if(typeof e=="function"){WH(e,t,r,n);return}HH(e,t,r,n)},GH=(e,t,r)=>{const n=e===""?t:wN(t,e);n.classGroupId=r},WH=(e,t,r,n)=>{if(ZH(e)){TC(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(NH(r,e))},HH=(e,t,r,n)=>{const l=Object.entries(e),h=l.length;for(let d=0;d<h;d++){const[o,_]=l[d];TC(_,wN(t,o),r,n)}},wN=(e,t)=>{let r=e;const n=t.split(lb),l=n.length;for(let h=0;h<l;h++){const d=n[h];let o=r.nextPart.get(d);o||(o=xN(),r.nextPart.set(d,o)),r=o}return r},ZH=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,KH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const l=(h,d)=>{r[h]=d,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(h){let d=r[h];if(d!==void 0)return d;if((d=n[h])!==void 0)return l(h,d),d},set(h,d){h in r?r[h]=d:l(h,d)}}},X2="!",vI=":",XH=[],_I=(e,t,r,n,l)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:l}),YH=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=l=>{const h=[];let d=0,o=0,_=0,S;const P=l.length;for(let F=0;F<P;F++){const L=l[F];if(d===0&&o===0){if(L===vI){h.push(l.slice(_,F)),_=F+1;continue}if(L==="/"){S=F;continue}}L==="["?d++:L==="]"?d--:L==="("?o++:L===")"&&o--}const M=h.length===0?l:l.slice(_);let O=M,z=!1;M.endsWith(X2)?(O=M.slice(0,-1),z=!0):M.startsWith(X2)&&(O=M.slice(1),z=!0);const B=S&&S>_?S-_:void 0;return _I(h,z,O,B)};if(t){const l=t+vI,h=n;n=d=>d.startsWith(l)?h(d.slice(l.length)):_I(XH,!1,d,void 0,!0)}if(r){const l=n;n=h=>r({className:h,parseClassName:l})}return n},QH=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let l=[];for(let h=0;h<r.length;h++){const d=r[h],o=d[0]==="[",_=t.has(d);o||_?(l.length>0&&(l.sort(),n.push(...l),l=[]),n.push(d)):l.push(d)}return l.length>0&&(l.sort(),n.push(...l)),n}},JH=e=>({cache:KH(e.cacheSize),parseClassName:YH(e),sortModifiers:QH(e),...BH(e)}),eZ=/\s+/,tZ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:l,sortModifiers:h}=t,d=[],o=e.trim().split(eZ);let _="";for(let S=o.length-1;S>=0;S-=1){const P=o[S],{isExternal:M,modifiers:O,hasImportantModifier:z,baseClassName:B,maybePostfixModifierPosition:F}=r(P);if(M){_=P+(_.length>0?" "+_:_);continue}let L=!!F,K=n(L?B.substring(0,F):B);if(!K){if(!L){_=P+(_.length>0?" "+_:_);continue}if(K=n(B),!K){_=P+(_.length>0?" "+_:_);continue}L=!1}const Q=O.length===0?"":O.length===1?O[0]:h(O).join(":"),re=z?Q+X2:Q,te=re+K;if(d.indexOf(te)>-1)continue;d.push(te);const ae=l(K,L);for(let he=0;he<ae.length;++he){const ne=ae[he];d.push(re+ne)}_=P+(_.length>0?" "+_:_)}return _},rZ=(...e)=>{let t=0,r,n,l="";for(;t<e.length;)(r=e[t++])&&(n=SN(r))&&(l&&(l+=" "),l+=n);return l},SN=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=SN(e[n]))&&(r&&(r+=" "),r+=t);return r},nZ=(e,...t)=>{let r,n,l,h;const d=_=>{const S=t.reduce((P,M)=>M(P),e());return r=JH(S),n=r.cache.get,l=r.cache.set,h=o,o(_)},o=_=>{const S=n(_);if(S)return S;const P=tZ(_,r);return l(_,P),P};return h=d,(..._)=>h(rZ(..._))},iZ=[],qa=e=>{const t=r=>r[e]||iZ;return t.isThemeGetter=!0,t},PN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aZ=/^\d+\/\d+$/,oZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,uZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zg=e=>aZ.test(e),hn=e=>!!e&&!Number.isNaN(Number(e)),Hf=e=>!!e&&Number.isInteger(Number(e)),MS=e=>e.endsWith("%")&&hn(e.slice(0,-1)),pd=e=>oZ.test(e),hZ=()=>!0,dZ=e=>sZ.test(e)&&!lZ.test(e),CN=()=>!1,fZ=e=>uZ.test(e),pZ=e=>cZ.test(e),mZ=e=>!Er(e)&&!Cr(e),gZ=e=>By(e,kN,CN),Er=e=>PN.test(e),bm=e=>By(e,AN,dZ),kS=e=>By(e,bZ,hn),xI=e=>By(e,TN,CN),yZ=e=>By(e,MN,pZ),cx=e=>By(e,IN,fZ),Cr=e=>EN.test(e),zv=e=>Vy(e,AN),vZ=e=>Vy(e,wZ),bI=e=>Vy(e,TN),_Z=e=>Vy(e,kN),xZ=e=>Vy(e,MN),hx=e=>Vy(e,IN,!0),By=(e,t,r)=>{const n=PN.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Vy=(e,t,r=!1)=>{const n=EN.exec(e);return n?n[1]?t(n[1]):r:!1},TN=e=>e==="position"||e==="percentage",MN=e=>e==="image"||e==="url",kN=e=>e==="length"||e==="size"||e==="bg-size",AN=e=>e==="length",bZ=e=>e==="number",wZ=e=>e==="family-name",IN=e=>e==="shadow",SZ=()=>{const e=qa("color"),t=qa("font"),r=qa("text"),n=qa("font-weight"),l=qa("tracking"),h=qa("leading"),d=qa("breakpoint"),o=qa("container"),_=qa("spacing"),S=qa("radius"),P=qa("shadow"),M=qa("inset-shadow"),O=qa("text-shadow"),z=qa("drop-shadow"),B=qa("blur"),F=qa("perspective"),L=qa("aspect"),K=qa("ease"),Q=qa("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ae=()=>[...te(),Cr,Er],he=()=>["auto","hidden","clip","visible","scroll"],ne=()=>["auto","contain","none"],be=()=>[Cr,Er,_],xe=()=>[Zg,"full","auto",...be()],$e=()=>[Hf,"none","subgrid",Cr,Er],Ee=()=>["auto",{span:["full",Hf,Cr,Er]},Hf,Cr,Er],Ne=()=>[Hf,"auto",Cr,Er],Xe=()=>["auto","min","max","fr",Cr,Er],ut=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],pt=()=>["start","end","center","stretch","center-safe","end-safe"],gt=()=>["auto",...be()],wt=()=>[Zg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...be()],je=()=>[e,Cr,Er],Qe=()=>[...te(),bI,xI,{position:[Cr,Er]}],yt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Oe=()=>["auto","cover","contain",_Z,gZ,{size:[Cr,Er]}],et=()=>[MS,zv,bm],Mt=()=>["","none","full",S,Cr,Er],Dt=()=>["",hn,zv,bm],Ke=()=>["solid","dashed","dotted","double"],tr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ft=()=>[hn,MS,bI,xI],$t=()=>["","none",B,Cr,Er],ct=()=>["none",hn,Cr,Er],Lt=()=>["none",hn,Cr,Er],ir=()=>[hn,Cr,Er],St=()=>[Zg,"full",...be()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[pd],breakpoint:[pd],color:[hZ],container:[pd],"drop-shadow":[pd],ease:["in","out","in-out"],font:[mZ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[pd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[pd],shadow:[pd],spacing:["px",hn],text:[pd],"text-shadow":[pd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zg,Er,Cr,L]}],container:["container"],columns:[{columns:[hn,Er,Cr,o]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ae()}],overflow:[{overflow:he()}],"overflow-x":[{"overflow-x":he()}],"overflow-y":[{"overflow-y":he()}],overscroll:[{overscroll:ne()}],"overscroll-x":[{"overscroll-x":ne()}],"overscroll-y":[{"overscroll-y":ne()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:xe()}],"inset-x":[{"inset-x":xe()}],"inset-y":[{"inset-y":xe()}],start:[{start:xe()}],end:[{end:xe()}],top:[{top:xe()}],right:[{right:xe()}],bottom:[{bottom:xe()}],left:[{left:xe()}],visibility:["visible","invisible","collapse"],z:[{z:[Hf,"auto",Cr,Er]}],basis:[{basis:[Zg,"full","auto",o,...be()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[hn,Zg,"auto","initial","none",Er]}],grow:[{grow:["",hn,Cr,Er]}],shrink:[{shrink:["",hn,Cr,Er]}],order:[{order:[Hf,"first","last","none",Cr,Er]}],"grid-cols":[{"grid-cols":$e()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":Ne()}],"col-end":[{"col-end":Ne()}],"grid-rows":[{"grid-rows":$e()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":Ne()}],"row-end":[{"row-end":Ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Xe()}],"auto-rows":[{"auto-rows":Xe()}],gap:[{gap:be()}],"gap-x":[{"gap-x":be()}],"gap-y":[{"gap-y":be()}],"justify-content":[{justify:[...ut(),"normal"]}],"justify-items":[{"justify-items":[...pt(),"normal"]}],"justify-self":[{"justify-self":["auto",...pt()]}],"align-content":[{content:["normal",...ut()]}],"align-items":[{items:[...pt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...pt(),{baseline:["","last"]}]}],"place-content":[{"place-content":ut()}],"place-items":[{"place-items":[...pt(),"baseline"]}],"place-self":[{"place-self":["auto",...pt()]}],p:[{p:be()}],px:[{px:be()}],py:[{py:be()}],ps:[{ps:be()}],pe:[{pe:be()}],pt:[{pt:be()}],pr:[{pr:be()}],pb:[{pb:be()}],pl:[{pl:be()}],m:[{m:gt()}],mx:[{mx:gt()}],my:[{my:gt()}],ms:[{ms:gt()}],me:[{me:gt()}],mt:[{mt:gt()}],mr:[{mr:gt()}],mb:[{mb:gt()}],ml:[{ml:gt()}],"space-x":[{"space-x":be()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":be()}],"space-y-reverse":["space-y-reverse"],size:[{size:wt()}],w:[{w:[o,"screen",...wt()]}],"min-w":[{"min-w":[o,"screen","none",...wt()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[d]},...wt()]}],h:[{h:["screen","lh",...wt()]}],"min-h":[{"min-h":["screen","lh","none",...wt()]}],"max-h":[{"max-h":["screen","lh",...wt()]}],"font-size":[{text:["base",r,zv,bm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Cr,kS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",MS,Er]}],"font-family":[{font:[vZ,Er,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,Cr,Er]}],"line-clamp":[{"line-clamp":[hn,"none",Cr,kS]}],leading:[{leading:[h,...be()]}],"list-image":[{"list-image":["none",Cr,Er]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Cr,Er]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:je()}],"text-color":[{text:je()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[hn,"from-font","auto",Cr,bm]}],"text-decoration-color":[{decoration:je()}],"underline-offset":[{"underline-offset":[hn,"auto",Cr,Er]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:be()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Cr,Er]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Cr,Er]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Qe()}],"bg-repeat":[{bg:yt()}],"bg-size":[{bg:Oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hf,Cr,Er],radial:["",Cr,Er],conic:[Hf,Cr,Er]},xZ,yZ]}],"bg-color":[{bg:je()}],"gradient-from-pos":[{from:et()}],"gradient-via-pos":[{via:et()}],"gradient-to-pos":[{to:et()}],"gradient-from":[{from:je()}],"gradient-via":[{via:je()}],"gradient-to":[{to:je()}],rounded:[{rounded:Mt()}],"rounded-s":[{"rounded-s":Mt()}],"rounded-e":[{"rounded-e":Mt()}],"rounded-t":[{"rounded-t":Mt()}],"rounded-r":[{"rounded-r":Mt()}],"rounded-b":[{"rounded-b":Mt()}],"rounded-l":[{"rounded-l":Mt()}],"rounded-ss":[{"rounded-ss":Mt()}],"rounded-se":[{"rounded-se":Mt()}],"rounded-ee":[{"rounded-ee":Mt()}],"rounded-es":[{"rounded-es":Mt()}],"rounded-tl":[{"rounded-tl":Mt()}],"rounded-tr":[{"rounded-tr":Mt()}],"rounded-br":[{"rounded-br":Mt()}],"rounded-bl":[{"rounded-bl":Mt()}],"border-w":[{border:Dt()}],"border-w-x":[{"border-x":Dt()}],"border-w-y":[{"border-y":Dt()}],"border-w-s":[{"border-s":Dt()}],"border-w-e":[{"border-e":Dt()}],"border-w-t":[{"border-t":Dt()}],"border-w-r":[{"border-r":Dt()}],"border-w-b":[{"border-b":Dt()}],"border-w-l":[{"border-l":Dt()}],"divide-x":[{"divide-x":Dt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Dt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ke(),"hidden","none"]}],"divide-style":[{divide:[...Ke(),"hidden","none"]}],"border-color":[{border:je()}],"border-color-x":[{"border-x":je()}],"border-color-y":[{"border-y":je()}],"border-color-s":[{"border-s":je()}],"border-color-e":[{"border-e":je()}],"border-color-t":[{"border-t":je()}],"border-color-r":[{"border-r":je()}],"border-color-b":[{"border-b":je()}],"border-color-l":[{"border-l":je()}],"divide-color":[{divide:je()}],"outline-style":[{outline:[...Ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[hn,Cr,Er]}],"outline-w":[{outline:["",hn,zv,bm]}],"outline-color":[{outline:je()}],shadow:[{shadow:["","none",P,hx,cx]}],"shadow-color":[{shadow:je()}],"inset-shadow":[{"inset-shadow":["none",M,hx,cx]}],"inset-shadow-color":[{"inset-shadow":je()}],"ring-w":[{ring:Dt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:je()}],"ring-offset-w":[{"ring-offset":[hn,bm]}],"ring-offset-color":[{"ring-offset":je()}],"inset-ring-w":[{"inset-ring":Dt()}],"inset-ring-color":[{"inset-ring":je()}],"text-shadow":[{"text-shadow":["none",O,hx,cx]}],"text-shadow-color":[{"text-shadow":je()}],opacity:[{opacity:[hn,Cr,Er]}],"mix-blend":[{"mix-blend":[...tr(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":tr()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[hn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ft()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ft()}],"mask-image-linear-from-color":[{"mask-linear-from":je()}],"mask-image-linear-to-color":[{"mask-linear-to":je()}],"mask-image-t-from-pos":[{"mask-t-from":Ft()}],"mask-image-t-to-pos":[{"mask-t-to":Ft()}],"mask-image-t-from-color":[{"mask-t-from":je()}],"mask-image-t-to-color":[{"mask-t-to":je()}],"mask-image-r-from-pos":[{"mask-r-from":Ft()}],"mask-image-r-to-pos":[{"mask-r-to":Ft()}],"mask-image-r-from-color":[{"mask-r-from":je()}],"mask-image-r-to-color":[{"mask-r-to":je()}],"mask-image-b-from-pos":[{"mask-b-from":Ft()}],"mask-image-b-to-pos":[{"mask-b-to":Ft()}],"mask-image-b-from-color":[{"mask-b-from":je()}],"mask-image-b-to-color":[{"mask-b-to":je()}],"mask-image-l-from-pos":[{"mask-l-from":Ft()}],"mask-image-l-to-pos":[{"mask-l-to":Ft()}],"mask-image-l-from-color":[{"mask-l-from":je()}],"mask-image-l-to-color":[{"mask-l-to":je()}],"mask-image-x-from-pos":[{"mask-x-from":Ft()}],"mask-image-x-to-pos":[{"mask-x-to":Ft()}],"mask-image-x-from-color":[{"mask-x-from":je()}],"mask-image-x-to-color":[{"mask-x-to":je()}],"mask-image-y-from-pos":[{"mask-y-from":Ft()}],"mask-image-y-to-pos":[{"mask-y-to":Ft()}],"mask-image-y-from-color":[{"mask-y-from":je()}],"mask-image-y-to-color":[{"mask-y-to":je()}],"mask-image-radial":[{"mask-radial":[Cr,Er]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ft()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ft()}],"mask-image-radial-from-color":[{"mask-radial-from":je()}],"mask-image-radial-to-color":[{"mask-radial-to":je()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":te()}],"mask-image-conic-pos":[{"mask-conic":[hn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ft()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ft()}],"mask-image-conic-from-color":[{"mask-conic-from":je()}],"mask-image-conic-to-color":[{"mask-conic-to":je()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Qe()}],"mask-repeat":[{mask:yt()}],"mask-size":[{mask:Oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Cr,Er]}],filter:[{filter:["","none",Cr,Er]}],blur:[{blur:$t()}],brightness:[{brightness:[hn,Cr,Er]}],contrast:[{contrast:[hn,Cr,Er]}],"drop-shadow":[{"drop-shadow":["","none",z,hx,cx]}],"drop-shadow-color":[{"drop-shadow":je()}],grayscale:[{grayscale:["",hn,Cr,Er]}],"hue-rotate":[{"hue-rotate":[hn,Cr,Er]}],invert:[{invert:["",hn,Cr,Er]}],saturate:[{saturate:[hn,Cr,Er]}],sepia:[{sepia:["",hn,Cr,Er]}],"backdrop-filter":[{"backdrop-filter":["","none",Cr,Er]}],"backdrop-blur":[{"backdrop-blur":$t()}],"backdrop-brightness":[{"backdrop-brightness":[hn,Cr,Er]}],"backdrop-contrast":[{"backdrop-contrast":[hn,Cr,Er]}],"backdrop-grayscale":[{"backdrop-grayscale":["",hn,Cr,Er]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[hn,Cr,Er]}],"backdrop-invert":[{"backdrop-invert":["",hn,Cr,Er]}],"backdrop-opacity":[{"backdrop-opacity":[hn,Cr,Er]}],"backdrop-saturate":[{"backdrop-saturate":[hn,Cr,Er]}],"backdrop-sepia":[{"backdrop-sepia":["",hn,Cr,Er]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":be()}],"border-spacing-x":[{"border-spacing-x":be()}],"border-spacing-y":[{"border-spacing-y":be()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Cr,Er]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[hn,"initial",Cr,Er]}],ease:[{ease:["linear","initial",K,Cr,Er]}],delay:[{delay:[hn,Cr,Er]}],animate:[{animate:["none",Q,Cr,Er]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[F,Cr,Er]}],"perspective-origin":[{"perspective-origin":ae()}],rotate:[{rotate:ct()}],"rotate-x":[{"rotate-x":ct()}],"rotate-y":[{"rotate-y":ct()}],"rotate-z":[{"rotate-z":ct()}],scale:[{scale:Lt()}],"scale-x":[{"scale-x":Lt()}],"scale-y":[{"scale-y":Lt()}],"scale-z":[{"scale-z":Lt()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Cr,Er,"","none","gpu","cpu"]}],"transform-origin":[{origin:ae()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:St()}],"translate-x":[{"translate-x":St()}],"translate-y":[{"translate-y":St()}],"translate-z":[{"translate-z":St()}],"translate-none":["translate-none"],accent:[{accent:je()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:je()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Cr,Er]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":be()}],"scroll-mx":[{"scroll-mx":be()}],"scroll-my":[{"scroll-my":be()}],"scroll-ms":[{"scroll-ms":be()}],"scroll-me":[{"scroll-me":be()}],"scroll-mt":[{"scroll-mt":be()}],"scroll-mr":[{"scroll-mr":be()}],"scroll-mb":[{"scroll-mb":be()}],"scroll-ml":[{"scroll-ml":be()}],"scroll-p":[{"scroll-p":be()}],"scroll-px":[{"scroll-px":be()}],"scroll-py":[{"scroll-py":be()}],"scroll-ps":[{"scroll-ps":be()}],"scroll-pe":[{"scroll-pe":be()}],"scroll-pt":[{"scroll-pt":be()}],"scroll-pr":[{"scroll-pr":be()}],"scroll-pb":[{"scroll-pb":be()}],"scroll-pl":[{"scroll-pl":be()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Cr,Er]}],fill:[{fill:["none",...je()]}],"stroke-w":[{stroke:[hn,zv,bm,kS]}],stroke:[{stroke:["none",...je()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PZ=nZ(SZ);function vh(...e){return PZ(Hn(e))}function AS(){return typeof document>"u"?null:document.documentElement.classList.contains("dark")?"dark":document.documentElement.classList.contains("light")?"light":null}function EZ(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function CZ(e){const[t,r]=A.useState(()=>AS()??EZ());return A.useEffect(()=>{if(e)return;const n=new MutationObserver(()=>{const d=AS();d&&r(d)});n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const l=window.matchMedia("(prefers-color-scheme: dark)"),h=d=>{AS()||r(d.matches?"dark":"light")};return l.addEventListener("change",h),()=>{n.disconnect(),l.removeEventListener("change",h)}},[e]),e??t}const ON=A.createContext(null);function Iw(){const e=A.useContext(ON);if(!e)throw new Error("useMap must be used within a Map component");return e}const wI={dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",light:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json"},TZ=()=>$.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:$.jsxs("div",{className:"flex gap-1",children:[$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse"}),$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse [animation-delay:150ms]"}),$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse [animation-delay:300ms]"})]})}),MZ=A.forwardRef(function({children:t,theme:r,styles:n,projection:l,...h},d){const o=A.useRef(null),[_,S]=A.useState(null),[P,M]=A.useState(!1),[O,z]=A.useState(!1),B=A.useRef(null),F=A.useRef(null),L=CZ(r),K=A.useMemo(()=>({dark:(n==null?void 0:n.dark)??wI.dark,light:(n==null?void 0:n.light)??wI.light}),[n]);A.useImperativeHandle(d,()=>_,[_]);const Q=A.useCallback(()=>{F.current&&(clearTimeout(F.current),F.current=null)},[]);A.useEffect(()=>{if(!o.current)return;const te=L==="dark"?K.dark:K.light;B.current=te;const ae=new vN.Map({container:o.current,style:te,renderWorldCopies:!1,attributionControl:{compact:!0},...h}),he=()=>{Q(),F.current=setTimeout(()=>{z(!0),l&&ae.setProjection(l)},100)},ne=()=>M(!0);return ae.on("load",ne),ae.on("styledata",he),S(ae),()=>{Q(),ae.off("load",ne),ae.off("styledata",he),ae.remove(),M(!1),z(!1),S(null)}},[]),A.useEffect(()=>{if(!_||!L)return;const te=L==="dark"?K.dark:K.light;B.current!==te&&(Q(),B.current=te,z(!1),_.setStyle(te,{diff:!0}))},[_,L,K,Q]);const re=A.useMemo(()=>({map:_,isLoaded:P&&O}),[_,P,O]);return $.jsx(ON.Provider,{value:re,children:$.jsxs("div",{ref:o,className:"relative w-full h-full",children:[!P&&$.jsx(TZ,{}),_&&t]})})}),LN=A.createContext(null);function kZ(){const e=A.useContext(LN);if(!e)throw new Error("Marker components must be used within MapMarker");return e}function SI({longitude:e,latitude:t,children:r,onClick:n,onMouseEnter:l,onMouseLeave:h,onDragStart:d,onDrag:o,onDragEnd:_,draggable:S=!1,...P}){const{map:M}=Iw(),O=A.useMemo(()=>{var be,xe,$e;const K=new vN.Marker({...P,element:document.createElement("div"),draggable:S}).setLngLat([e,t]),Q=Ee=>n==null?void 0:n(Ee),re=Ee=>l==null?void 0:l(Ee),te=Ee=>h==null?void 0:h(Ee);(be=K.getElement())==null||be.addEventListener("click",Q),(xe=K.getElement())==null||xe.addEventListener("mouseenter",re),($e=K.getElement())==null||$e.addEventListener("mouseleave",te);const ae=()=>{const Ee=K.getLngLat();d==null||d({lng:Ee.lng,lat:Ee.lat})},he=()=>{const Ee=K.getLngLat();o==null||o({lng:Ee.lng,lat:Ee.lat})},ne=()=>{const Ee=K.getLngLat();_==null||_({lng:Ee.lng,lat:Ee.lat})};return K.on("dragstart",ae),K.on("drag",he),K.on("dragend",ne),K},[]);A.useEffect(()=>{if(M)return O.addTo(M),()=>{O.remove()}},[M]),(O.getLngLat().lng!==e||O.getLngLat().lat!==t)&&O.setLngLat([e,t]),O.isDraggable()!==S&&O.setDraggable(S);const z=O.getOffset(),B=P.offset??[0,0],[F,L]=Array.isArray(B)?B:[B.x,B.y];return(z.x!==F||z.y!==L)&&O.setOffset(B),O.getRotation()!==P.rotation&&O.setRotation(P.rotation??0),O.getRotationAlignment()!==P.rotationAlignment&&O.setRotationAlignment(P.rotationAlignment??"auto"),O.getPitchAlignment()!==P.pitchAlignment&&O.setPitchAlignment(P.pitchAlignment??"auto"),$.jsx(LN.Provider,{value:{marker:O,map:M},children:r})}function PI({children:e,className:t}){const{marker:r}=kZ();return Cc.createPortal($.jsx("div",{className:vh("relative cursor-pointer",t),children:e||$.jsx(AZ,{})}),r.getElement())}function AZ(){return $.jsx("div",{className:"relative h-4 w-4 rounded-full border-2 border-white bg-blue-500 shadow-lg"})}function EI({children:e,className:t,position:r="top"}){const n={top:"bottom-full mb-1",bottom:"top-full mt-1"};return $.jsx("div",{className:vh("absolute left-1/2 -translate-x-1/2 whitespace-nowrap","text-[10px] font-medium text-foreground",n[r],t),children:e})}function IZ({id:e,coordinates:t,color:r="#4285F4",width:n=3,opacity:l=.8,dashArray:h,onClick:d,onMouseEnter:o,onMouseLeave:_,interactive:S=!0}){const{map:P,isLoaded:M}=Iw(),O=A.useId(),z=e??O,B=`route-source-${z}`,F=`route-layer-${z}`;return A.useEffect(()=>{if(!(!M||!P))return P.addSource(B,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}}}),P.addLayer({id:F,type:"line",source:B,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":r,"line-width":n,"line-opacity":l,...h&&{"line-dasharray":h}}}),()=>{try{P.getLayer(F)&&P.removeLayer(F),P.getSource(B)&&P.removeSource(B)}catch{}}},[M,P]),A.useEffect(()=>{if(!M||!P||t.length<2)return;const L=P.getSource(B);L&&L.setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}})},[M,P,t,B]),A.useEffect(()=>{!M||!P||!P.getLayer(F)||(P.setPaintProperty(F,"line-color",r),P.setPaintProperty(F,"line-width",n),P.setPaintProperty(F,"line-opacity",l),h&&P.setPaintProperty(F,"line-dasharray",h))},[M,P,F,r,n,l,h]),A.useEffect(()=>{if(!M||!P||!S)return;const L=()=>{d==null||d()},K=()=>{P.getCanvas().style.cursor="pointer",o==null||o()},Q=()=>{P.getCanvas().style.cursor="",_==null||_()};return P.on("click",F,L),P.on("mouseenter",F,K),P.on("mouseleave",F,Q),()=>{P.off("click",F,L),P.off("mouseenter",F,K),P.off("mouseleave",F,Q)}},[M,P,F,d,o,_,S]),null}function CI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ow(...e){return t=>{let r=!1;const n=e.map(l=>{const h=CI(l,t);return!r&&typeof h=="function"&&(r=!0),h});if(r)return()=>{for(let l=0;l<n.length;l++){const h=n[l];typeof h=="function"?h():CI(e[l],null)}}}}function vp(...e){return A.useCallback(Ow(...e),e)}var OZ=Symbol.for("react.lazy"),ub=aw[" use ".trim().toString()];function LZ(e){return typeof e=="object"&&e!==null&&"then"in e}function DN(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===OZ&&"_payload"in e&&LZ(e._payload)}function DZ(e){const t=jZ(e),r=A.forwardRef((n,l)=>{let{children:h,...d}=n;DN(h)&&typeof ub=="function"&&(h=ub(h._payload));const o=A.Children.toArray(h),_=o.find(NZ);if(_){const S=_.props.children,P=o.map(M=>M===_?A.Children.count(S)>1?A.Children.only(null):A.isValidElement(S)?S.props.children:null:M);return $.jsx(t,{...d,ref:l,children:A.isValidElement(S)?A.cloneElement(S,void 0,P):null})}return $.jsx(t,{...d,ref:l,children:h})});return r.displayName=`${e}.Slot`,r}var RZ=DZ("Slot");function jZ(e){const t=A.forwardRef((r,n)=>{let{children:l,...h}=r;if(DN(l)&&typeof ub=="function"&&(l=ub(l._payload)),A.isValidElement(l)){const d=BZ(l),o=FZ(h,l.props);return l.type!==A.Fragment&&(o.ref=n?Ow(n,d):d),A.cloneElement(l,o)}return A.Children.count(l)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zZ=Symbol("radix.slottable");function NZ(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zZ}function FZ(e,t){const r={...t};for(const n in t){const l=e[n],h=t[n];/^on[A-Z]/.test(n)?l&&h?r[n]=(...o)=>{const _=h(...o);return l(...o),_}:l&&(r[n]=l):n==="style"?r[n]={...l,...h}:n==="className"&&(r[n]=[l,h].filter(Boolean).join(" "))}return{...e,...r}}function BZ(e){var n,l;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const TI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,MI=Hn,VZ=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return MI(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:h}=t,d=Object.keys(l).map(S=>{const P=r==null?void 0:r[S],M=h==null?void 0:h[S];if(P===null)return null;const O=TI(P)||TI(M);return l[S][O]}),o=r&&Object.entries(r).reduce((S,P)=>{let[M,O]=P;return O===void 0||(S[M]=O),S},{}),_=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((S,P)=>{let{class:M,className:O,...z}=P;return Object.entries(z).every(B=>{let[F,L]=B;return Array.isArray(L)?L.includes({...h,...o}[F]):{...h,...o}[F]===L})?[...S,M,O]:S},[]);return MI(e,d,_,r==null?void 0:r.class,r==null?void 0:r.className)},$Z=VZ("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function UZ({className:e,variant:t,size:r,asChild:n=!1,...l}){const h=n?RZ:"button";return $.jsx(h,{"data-slot":"button",className:vh($Z({variant:t,size:r,className:e})),...l})}function qZ({bounds:e}){const t=Iw();return A.useEffect(()=>{if(!e||!t)return;const r=t.map||(typeof t.getMap=="function"?t.getMap():null)||t;!r||typeof r.fitBounds!="function"||r.fitBounds([[e.minLng,e.minLat],[e.maxLng,e.maxLat]],{padding:{top:50,bottom:50,left:50,right:50},maxZoom:12,duration:800})},[t,e]),null}function GZ(){const e=Iw(),t=()=>(e==null?void 0:e.map)||(typeof(e==null?void 0:e.getMap)=="function"?e.getMap():null)||e,r=()=>{const l=t();l!=null&&l.zoomIn&&l.zoomIn({duration:300})},n=()=>{const l=t();l!=null&&l.zoomOut&&l.zoomOut({duration:300})};return $.jsxs("div",{className:"absolute bottom-20 right-3 flex flex-col gap-2 z-10",children:[$.jsx("button",{onClick:r,className:"w-9 h-9 bg-white rounded-md shadow border flex items-center justify-center text-lg hover:bg-gray-100 cursor-pointer",children:"+"}),$.jsx("button",{onClick:n,className:"w-9 h-9 bg-white rounded-md shadow border flex items-center justify-center text-lg hover:bg-gray-100 cursor-pointer",children:""})]})}const WZ=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`},HZ=e=>`${(e/1e3).toFixed(1)} km`;function ZZ({locationCoordinates:e}){var z,B,F,L,K,Q;const[t,r]=A.useState([]),[n,l]=A.useState(0),[h,d]=A.useState(!0),[o,_]=A.useState(null),S=A.useCallback(re=>{if(!re||re.length<2)return null;const te=re.map(he=>he.lng),ae=re.map(he=>he.lat);return{minLng:Math.min(...te),maxLng:Math.max(...te),minLat:Math.min(...ae),maxLat:Math.max(...ae)}},[]);A.useEffect(()=>{e&&e.length===2&&_(S(e))},[e,S]),A.useEffect(()=>{async function re(){var ae,he,ne,be,xe;if(!e||e.length<2||!((ae=e[0])!=null&&ae.lng)||!((he=e[0])!=null&&he.lat)||!((ne=e[1])!=null&&ne.lng)||!((be=e[1])!=null&&be.lat)){d(!1),r([]);return}try{d(!0);const $e=e[0],Ee=e[1],Ne=await fetch(`https://router.project-osrm.org/route/v1/driving/${$e.lng},${$e.lat};${Ee.lng},${Ee.lat}?overview=full&geometries=geojson&alternatives=true`);if(!Ne.ok)throw new Error("Route fetch failed");const Xe=await Ne.json();Xe.code==="Ok"&&((xe=Xe.routes)==null?void 0:xe.length)>0?r(Xe.routes.map((ut,pt)=>({coordinates:ut.geometry.coordinates,duration:ut.duration,distance:ut.distance,index:pt}))):r([])}catch{r([])}finally{d(!1)}}const te=setTimeout(re,300);return()=>clearTimeout(te)},[e]);const P=()=>{if(!o)return{center:[4.9,52.3],zoom:1};const re=(o.minLng+o.maxLng)/2,te=(o.minLat+o.maxLat)/2;return{center:[re,te],zoom:7}},M=t.slice().sort((re,te)=>re.index===n?-1:te.index===n?1:0),O=P();return $.jsx("div",{children:$.jsxs("div",{className:"bg-white p-8 rounded-2xl border",children:[$.jsx("h1",{className:"title",children:"Route Map"}),$.jsxs("div",{className:"h-[500px] w-full relative mt-4 rounded-lg overflow-hidden border border-gray-200",children:[$.jsxs(MZ,{center:O.center,zoom:O.zoom,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",children:[o&&$.jsx(qZ,{bounds:o}),$.jsx(GZ,{}),M.map(re=>{const te=re.index===n;return $.jsx(IZ,{coordinates:re.coordinates,color:te?"#6366f1":"#94a3b8",width:te?6:4,opacity:te?1:.5,onClick:()=>l(re.index)},re.index)}),((z=e==null?void 0:e[0])==null?void 0:z.lng)&&((B=e==null?void 0:e[0])==null?void 0:B.lat)&&$.jsx(SI,{longitude:e[0].lng,latitude:e[0].lat,children:$.jsxs(PI,{children:[$.jsxs("div",{className:"relative",children:[$.jsx("div",{className:"size-5 rounded-full bg-green-500 border-2 border-white shadow-lg"}),$.jsx("div",{className:"absolute -top-2 -left-2 size-9 rounded-full bg-green-500/20 animate-ping "})]}),$.jsx(EI,{position:"top",children:e[0].name||"Origin"})]})}),((F=e==null?void 0:e[1])==null?void 0:F.lng)&&((L=e==null?void 0:e[1])==null?void 0:L.lat)&&$.jsx(SI,{longitude:e[1].lng,latitude:e[1].lat,children:$.jsxs(PI,{children:[$.jsxs("div",{className:"relative",children:[$.jsx("div",{className:"size-5 rounded-full bg-red-500 border-2 border-white shadow-lg"}),$.jsx("div",{className:"absolute -top-2 -left-2 size-9 rounded-full bg-red-500/20 animate-ping"})]}),$.jsx(EI,{position:"bottom",children:e[1].name||"Destination"})]})})]}),t.length>0&&$.jsx("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:t.map((re,te)=>{const ae=te===n;return $.jsxs(UZ,{variant:ae?"default":"secondary",size:"sm",onClick:()=>l(te),className:ae?"cursor-pointer":"bg-[#0f0f0f] text-white hover:bg-[#1a1a1a] cursor-pointer",children:[$.jsx(d_,{className:"size-3.5 mr-2"}),WZ(re.duration)," "," ",HZ(re.distance)]},te)})}),h&&(e==null?void 0:e.length)===2&&$.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80",children:$.jsx(D7,{className:"size-8 animate-spin text-blue-600"})}),(e==null?void 0:e.length)===2&&$.jsx("div",{className:"absolute bottom-3 right-3 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg border",children:$.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[$.jsxs("div",{className:"flex items-center gap-1.5",children:[$.jsx("div",{className:"size-3 rounded-full bg-green-500"}),$.jsx("span",{className:"font-medium",children:((K=e[0])==null?void 0:K.name)||"Origin"})]}),$.jsx("span",{className:"text-gray-400",children:""}),$.jsxs("div",{className:"flex items-center gap-1.5",children:[$.jsx("div",{className:"size-3 rounded-full bg-red-500"}),$.jsx("span",{className:"font-medium",children:((Q=e[1])==null?void 0:Q.name)||"Destination"})]})]})})]})]})})}function KZ(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:$.jsx("path",{d:"M6.66667 9.33333C7.37391 9.33333 8.05219 9.05238 8.55229 8.55229C9.05238 8.05219 9.33333 7.37391 9.33333 6.66667C9.33333 5.95942 9.05238 5.28115 8.55229 4.78105C8.05219 4.28095 7.37391 4 6.66667 4C5.95942 4 5.28115 4.28095 4.78105 4.78105C4.28095 5.28115 4 5.95942 4 6.66667C4 7.37391 4.28095 8.05219 4.78105 8.55229C5.28115 9.05238 5.95942 9.33333 6.66667 9.33333ZM6.66667 9.33333V22C6.66667 23.2377 7.15833 24.4247 8.0335 25.2998C8.90867 26.175 10.0957 26.6667 11.3333 26.6667C12.571 26.6667 13.758 26.175 14.6332 25.2998C15.5083 24.4247 16 23.2377 16 22V10C16 8.76232 16.4917 7.57534 17.3668 6.70017C18.242 5.825 19.429 5.33333 20.6667 5.33333C21.9043 5.33333 23.0913 5.825 23.9665 6.70017C24.8417 7.57534 25.3333 8.76232 25.3333 10V28M25.3333 28L21.3333 24M25.3333 28L29.3333 24",stroke:"#637381",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function RN(e,[t,r]){return Math.min(r,Math.max(t,e))}function ry(e,t,{checkForDefaultPrevented:r=!0}={}){return function(l){if(e==null||e(l),r===!1||!l.defaultPrevented)return t==null?void 0:t(l)}}function jN(e,t=[]){let r=[];function n(h,d){const o=A.createContext(d),_=r.length;r=[...r,d];const S=M=>{var K;const{scope:O,children:z,...B}=M,F=((K=O==null?void 0:O[e])==null?void 0:K[_])||o,L=A.useMemo(()=>B,Object.values(B));return $.jsx(F.Provider,{value:L,children:z})};S.displayName=h+"Provider";function P(M,O){var F;const z=((F=O==null?void 0:O[e])==null?void 0:F[_])||o,B=A.useContext(z);if(B)return B;if(d!==void 0)return d;throw new Error(`\`${M}\` must be used within \`${h}\``)}return[S,P]}const l=()=>{const h=r.map(d=>A.createContext(d));return function(o){const _=(o==null?void 0:o[e])||h;return A.useMemo(()=>({[`__scope${e}`]:{...o,[e]:_}}),[o,_])}};return l.scopeName=e,[n,XZ(l,...t)]}function XZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(h){const d=n.reduce((o,{useScope:_,scopeName:S})=>{const M=_(h)[`__scope${S}`];return{...o,...M}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}var zN=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},YZ=aw[" useInsertionEffect ".trim().toString()]||zN;function QZ({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[l,h,d]=JZ({defaultProp:t,onChange:r}),o=e!==void 0,_=o?e:l;{const P=A.useRef(e!==void 0);A.useEffect(()=>{const M=P.current;M!==o&&console.warn(`${n} is changing from ${M?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),P.current=o},[o,n])}const S=A.useCallback(P=>{var M;if(o){const O=eK(P)?P(e):P;O!==e&&((M=d.current)==null||M.call(d,O))}else h(P)},[o,e,h,d]);return[_,S]}function JZ({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),l=A.useRef(r),h=A.useRef(t);return YZ(()=>{h.current=t},[t]),A.useEffect(()=>{var d;l.current!==r&&((d=h.current)==null||d.call(h,r),l.current=r)},[r,l]),[r,n,h]}function eK(e){return typeof e=="function"}var tK=A.createContext(void 0);function rK(e){const t=A.useContext(tK);return e||t||"ltr"}function nK(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function iK(e){const[t,r]=A.useState(void 0);return zN(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const h=l[0];let d,o;if("borderBoxSize"in h){const _=h.borderBoxSize,S=Array.isArray(_)?_[0]:_;d=S.inlineSize,o=S.blockSize}else d=e.offsetWidth,o=e.offsetHeight;r({width:d,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}function aK(e){const t=oK(e),r=A.forwardRef((n,l)=>{const{children:h,...d}=n,o=A.Children.toArray(h),_=o.find(lK);if(_){const S=_.props.children,P=o.map(M=>M===_?A.Children.count(S)>1?A.Children.only(null):A.isValidElement(S)?S.props.children:null:M);return $.jsx(t,{...d,ref:l,children:A.isValidElement(S)?A.cloneElement(S,void 0,P):null})}return $.jsx(t,{...d,ref:l,children:h})});return r.displayName=`${e}.Slot`,r}function oK(e){const t=A.forwardRef((r,n)=>{const{children:l,...h}=r;if(A.isValidElement(l)){const d=cK(l),o=uK(h,l.props);return l.type!==A.Fragment&&(o.ref=n?Ow(n,d):d),A.cloneElement(l,o)}return A.Children.count(l)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sK=Symbol("radix.slottable");function lK(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sK}function uK(e,t){const r={...t};for(const n in t){const l=e[n],h=t[n];/^on[A-Z]/.test(n)?l&&h?r[n]=(...o)=>{const _=h(...o);return l(...o),_}:l&&(r[n]=l):n==="style"?r[n]={...l,...h}:n==="className"&&(r[n]=[l,h].filter(Boolean).join(" "))}return{...e,...r}}function cK(e){var n,l;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var hK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q_=hK.reduce((e,t)=>{const r=aK(`Primitive.${t}`),n=A.forwardRef((l,h)=>{const{asChild:d,...o}=l,_=d?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(_,{...o,ref:h})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function kI(e){const t=dK(e),r=A.forwardRef((n,l)=>{const{children:h,...d}=n,o=A.Children.toArray(h),_=o.find(pK);if(_){const S=_.props.children,P=o.map(M=>M===_?A.Children.count(S)>1?A.Children.only(null):A.isValidElement(S)?S.props.children:null:M);return $.jsx(t,{...d,ref:l,children:A.isValidElement(S)?A.cloneElement(S,void 0,P):null})}return $.jsx(t,{...d,ref:l,children:h})});return r.displayName=`${e}.Slot`,r}function dK(e){const t=A.forwardRef((r,n)=>{const{children:l,...h}=r;if(A.isValidElement(l)){const d=gK(l),o=mK(h,l.props);return l.type!==A.Fragment&&(o.ref=n?Ow(n,d):d),A.cloneElement(l,o)}return A.Children.count(l)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fK=Symbol("radix.slottable");function pK(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fK}function mK(e,t){const r={...t};for(const n in t){const l=e[n],h=t[n];/^on[A-Z]/.test(n)?l&&h?r[n]=(...o)=>{const _=h(...o);return l(...o),_}:l&&(r[n]=l):n==="style"?r[n]={...l,...h}:n==="className"&&(r[n]=[l,h].filter(Boolean).join(" "))}return{...e,...r}}function gK(e){var n,l;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function yK(e){const t=e+"CollectionProvider",[r,n]=jN(t),[l,h]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=F=>{const{scope:L,children:K}=F,Q=ui.useRef(null),re=ui.useRef(new Map).current;return $.jsx(l,{scope:L,itemMap:re,collectionRef:Q,children:K})};d.displayName=t;const o=e+"CollectionSlot",_=kI(o),S=ui.forwardRef((F,L)=>{const{scope:K,children:Q}=F,re=h(o,K),te=vp(L,re.collectionRef);return $.jsx(_,{ref:te,children:Q})});S.displayName=o;const P=e+"CollectionItemSlot",M="data-radix-collection-item",O=kI(P),z=ui.forwardRef((F,L)=>{const{scope:K,children:Q,...re}=F,te=ui.useRef(null),ae=vp(L,te),he=h(P,K);return ui.useEffect(()=>(he.itemMap.set(te,{ref:te,...re}),()=>void he.itemMap.delete(te))),$.jsx(O,{[M]:"",ref:ae,children:Q})});z.displayName=P;function B(F){const L=h(e+"CollectionConsumer",F);return ui.useCallback(()=>{const Q=L.collectionRef.current;if(!Q)return[];const re=Array.from(Q.querySelectorAll(`[${M}]`));return Array.from(L.itemMap.values()).sort((he,ne)=>re.indexOf(he.ref.current)-re.indexOf(ne.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:d,Slot:S,ItemSlot:z},B,n]}var NN=["PageUp","PageDown"],FN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$y="Slider",[Y2,vK,_K]=yK($y),[VN]=jN($y,[_K]),[xK,Lw]=VN($y),$N=A.forwardRef((e,t)=>{const{name:r,min:n=0,max:l=100,step:h=1,orientation:d="horizontal",disabled:o=!1,minStepsBetweenThumbs:_=0,defaultValue:S=[n],value:P,onValueChange:M=()=>{},onValueCommit:O=()=>{},inverted:z=!1,form:B,...F}=e,L=A.useRef(new Set),K=A.useRef(0),re=d==="horizontal"?bK:wK,[te=[],ae]=QZ({prop:P,defaultProp:S,onChange:Ee=>{var Xe;(Xe=[...L.current][K.current])==null||Xe.focus(),M(Ee)}}),he=A.useRef(te);function ne(Ee){const Ne=TK(te,Ee);$e(Ee,Ne)}function be(Ee){$e(Ee,K.current)}function xe(){const Ee=he.current[K.current];te[K.current]!==Ee&&O(te)}function $e(Ee,Ne,{commit:Xe}={commit:!1}){const ut=IK(h),pt=OK(Math.round((Ee-n)/h)*h+n,ut),gt=RN(pt,[n,l]);ae((wt=[])=>{const je=EK(wt,gt,Ne);if(AK(je,_*h)){K.current=je.indexOf(gt);const Qe=String(je)!==String(wt);return Qe&&Xe&&O(je),Qe?je:wt}else return wt})}return $.jsx(xK,{scope:e.__scopeSlider,name:r,disabled:o,min:n,max:l,valueIndexToChangeRef:K,thumbs:L.current,values:te,orientation:d,form:B,children:$.jsx(Y2.Provider,{scope:e.__scopeSlider,children:$.jsx(Y2.Slot,{scope:e.__scopeSlider,children:$.jsx(re,{"aria-disabled":o,"data-disabled":o?"":void 0,...F,ref:t,onPointerDown:ry(F.onPointerDown,()=>{o||(he.current=te)}),min:n,max:l,inverted:z,onSlideStart:o?void 0:ne,onSlideMove:o?void 0:be,onSlideEnd:o?void 0:xe,onHomeKeyDown:()=>!o&&$e(n,0,{commit:!0}),onEndKeyDown:()=>!o&&$e(l,te.length-1,{commit:!0}),onStepKeyDown:({event:Ee,direction:Ne})=>{if(!o){const pt=NN.includes(Ee.key)||Ee.shiftKey&&FN.includes(Ee.key)?10:1,gt=K.current,wt=te[gt],je=h*pt*Ne;$e(wt+je,gt,{commit:!0})}}})})})})});$N.displayName=$y;var[UN,qN]=VN($y,{startEdge:"left",endEdge:"right",size:"width",direction:1}),bK=A.forwardRef((e,t)=>{const{min:r,max:n,dir:l,inverted:h,onSlideStart:d,onSlideMove:o,onSlideEnd:_,onStepKeyDown:S,...P}=e,[M,O]=A.useState(null),z=vp(t,re=>O(re)),B=A.useRef(void 0),F=rK(l),L=F==="ltr",K=L&&!h||!L&&h;function Q(re){const te=B.current||M.getBoundingClientRect(),ae=[0,te.width],ne=MC(ae,K?[r,n]:[n,r]);return B.current=te,ne(re-te.left)}return $.jsx(UN,{scope:e.__scopeSlider,startEdge:K?"left":"right",endEdge:K?"right":"left",direction:K?1:-1,size:"width",children:$.jsx(GN,{dir:F,"data-orientation":"horizontal",...P,ref:z,style:{...P.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:re=>{const te=Q(re.clientX);d==null||d(te)},onSlideMove:re=>{const te=Q(re.clientX);o==null||o(te)},onSlideEnd:()=>{B.current=void 0,_==null||_()},onStepKeyDown:re=>{const ae=BN[K?"from-left":"from-right"].includes(re.key);S==null||S({event:re,direction:ae?-1:1})}})})}),wK=A.forwardRef((e,t)=>{const{min:r,max:n,inverted:l,onSlideStart:h,onSlideMove:d,onSlideEnd:o,onStepKeyDown:_,...S}=e,P=A.useRef(null),M=vp(t,P),O=A.useRef(void 0),z=!l;function B(F){const L=O.current||P.current.getBoundingClientRect(),K=[0,L.height],re=MC(K,z?[n,r]:[r,n]);return O.current=L,re(F-L.top)}return $.jsx(UN,{scope:e.__scopeSlider,startEdge:z?"bottom":"top",endEdge:z?"top":"bottom",size:"height",direction:z?1:-1,children:$.jsx(GN,{"data-orientation":"vertical",...S,ref:M,style:{...S.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:F=>{const L=B(F.clientY);h==null||h(L)},onSlideMove:F=>{const L=B(F.clientY);d==null||d(L)},onSlideEnd:()=>{O.current=void 0,o==null||o()},onStepKeyDown:F=>{const K=BN[z?"from-bottom":"from-top"].includes(F.key);_==null||_({event:F,direction:K?-1:1})}})})}),GN=A.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:l,onSlideEnd:h,onHomeKeyDown:d,onEndKeyDown:o,onStepKeyDown:_,...S}=e,P=Lw($y,r);return $.jsx(q_.span,{...S,ref:t,onKeyDown:ry(e.onKeyDown,M=>{M.key==="Home"?(d(M),M.preventDefault()):M.key==="End"?(o(M),M.preventDefault()):NN.concat(FN).includes(M.key)&&(_(M),M.preventDefault())}),onPointerDown:ry(e.onPointerDown,M=>{const O=M.target;O.setPointerCapture(M.pointerId),M.preventDefault(),P.thumbs.has(O)?O.focus():n(M)}),onPointerMove:ry(e.onPointerMove,M=>{M.target.hasPointerCapture(M.pointerId)&&l(M)}),onPointerUp:ry(e.onPointerUp,M=>{const O=M.target;O.hasPointerCapture(M.pointerId)&&(O.releasePointerCapture(M.pointerId),h(M))})})}),WN="SliderTrack",HN=A.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,l=Lw(WN,r);return $.jsx(q_.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...n,ref:t})});HN.displayName=WN;var Q2="SliderRange",ZN=A.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,l=Lw(Q2,r),h=qN(Q2,r),d=A.useRef(null),o=vp(t,d),_=l.values.length,S=l.values.map(O=>YN(O,l.min,l.max)),P=_>1?Math.min(...S):0,M=100-Math.max(...S);return $.jsx(q_.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...n,ref:o,style:{...e.style,[h.startEdge]:P+"%",[h.endEdge]:M+"%"}})});ZN.displayName=Q2;var J2="SliderThumb",KN=A.forwardRef((e,t)=>{const r=vK(e.__scopeSlider),[n,l]=A.useState(null),h=vp(t,o=>l(o)),d=A.useMemo(()=>n?r().findIndex(o=>o.ref.current===n):-1,[r,n]);return $.jsx(SK,{...e,ref:h,index:d})}),SK=A.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:l,...h}=e,d=Lw(J2,r),o=qN(J2,r),[_,S]=A.useState(null),P=vp(t,Q=>S(Q)),M=_?d.form||!!_.closest("form"):!0,O=iK(_),z=d.values[n],B=z===void 0?0:YN(z,d.min,d.max),F=CK(n,d.values.length),L=O==null?void 0:O[o.size],K=L?MK(L,B,o.direction):0;return A.useEffect(()=>{if(_)return d.thumbs.add(_),()=>{d.thumbs.delete(_)}},[_,d.thumbs]),$.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${B}% + ${K}px)`},children:[$.jsx(Y2.ItemSlot,{scope:e.__scopeSlider,children:$.jsx(q_.span,{role:"slider","aria-label":e["aria-label"]||F,"aria-valuemin":d.min,"aria-valuenow":z,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...h,ref:P,style:z===void 0?{display:"none"}:e.style,onFocus:ry(e.onFocus,()=>{d.valueIndexToChangeRef.current=n})})}),M&&$.jsx(XN,{name:l??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:z},n)]})});KN.displayName=J2;var PK="RadioBubbleInput",XN=A.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const l=A.useRef(null),h=vp(l,n),d=nK(t);return A.useEffect(()=>{const o=l.current;if(!o)return;const _=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(_,"value").set;if(d!==t&&P){const M=new Event("input",{bubbles:!0});P.call(o,t),o.dispatchEvent(M)}},[d,t]),$.jsx(q_.input,{style:{display:"none"},...r,ref:h,defaultValue:t})});XN.displayName=PK;function EK(e=[],t,r){const n=[...e];return n[r]=t,n.sort((l,h)=>l-h)}function YN(e,t,r){const h=100/(r-t)*(e-t);return RN(h,[0,100])}function CK(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function TK(e,t){if(e.length===1)return 0;const r=e.map(l=>Math.abs(l-t)),n=Math.min(...r);return r.indexOf(n)}function MK(e,t,r){const n=e/2,h=MC([0,50],[0,n]);return(n-h(t)*r)*r}function kK(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function AK(e,t){if(t>0){const r=kK(e);return Math.min(...r)>=t}return!0}function MC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function IK(e){return(String(e).split(".")[1]||"").length}function OK(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var LK=$N,DK=HN,RK=ZN,jK=KN;function AI({className:e,defaultValue:t,value:r,min:n=0,max:l=100,...h}){const d=A.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[n,l],[r,t,n,l]);return $.jsxs(LK,{"data-slot":"slider",defaultValue:t,value:r,min:n,max:l,className:vh("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...h,children:[$.jsx(DK,{"data-slot":"slider-track",className:vh("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-2 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:$.jsx(RK,{"data-slot":"slider-range",className:vh("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(o,_)=>$.jsx(jK,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},_))]})}function zK({onSuccess:e,onError:t}){const r=Mc();return ig({mutationKey:["calculateRoute"],mutationFn:async n=>{const l=await r.post("/plan-trip/",n);return l==null?void 0:l.data},onSuccess:e,onError:t})}const IS={name:"Amsterdam",lng:4.9041,lat:52.3676,address:"Amsterdam, Netherlands"},OS={name:"Rotterdam",lng:4.4777,lat:51.9244,address:"Rotterdam, Netherlands"};function NK({vehicleData:e,setLocationCoordinates:t}){const r=Sp(),[n,l]=A.useState({startingCharge:80,minArrivalCharge:50}),{register:h,control:d,handleSubmit:o,setValue:_,watch:S,formState:{errors:P}}=U_({defaultValues:{origin:null,destination:null,originCoordinates:null,destinationCoordinates:null}}),{mutate:M,isPending:O}=zK({onSuccess:ne=>{r("/route-analysis-results",{state:ne})},onError:ne=>{console.log(ne)}}),z=A.useRef(null),B=A.useRef(null),F=S("origin"),L=S("destination"),K=S("originCoordinates"),Q=S("destinationCoordinates"),re=ne=>!ne||!ne.geometry?null:{name:ne.name||ne.formatted_address,address:ne.formatted_address,lng:ne.geometry.location.lng(),lat:ne.geometry.location.lat()},te=async ne=>!window.google||!ne?null:new Promise(be=>{new window.google.maps.Geocoder().geocode({address:ne},($e,Ee)=>{if(Ee==="OK"&&$e[0]){const Ne=$e[0].geometry.location;be({name:ne,address:ne,lng:Ne.lng(),lat:Ne.lat()})}else console.warn("Geocode was not successful for the following reason:",Ee),be(null)})});A.useEffect(()=>{K&&Q&&t([K,Q])},[K,Q,t]),A.useEffect(()=>{const be=setTimeout(async()=>{if(F&&F.trim()!==""){if(F===IS.address){_("originCoordinates",IS);return}const xe=await te(F);xe&&_("originCoordinates",xe)}},1e3);return()=>clearTimeout(be)},[F,_]),A.useEffect(()=>{const be=setTimeout(async()=>{if(L&&L.trim()!==""){if(L===OS.address){_("destinationCoordinates",OS);return}const xe=await te(L);xe&&_("destinationCoordinates",xe)}},1e3);return()=>clearTimeout(be)},[L,_]),A.useEffect(()=>{if(window.google){if(z.current){const ne=new window.google.maps.places.Autocomplete(z.current,{types:["(cities)"]});ne.addListener("place_changed",()=>{const be=ne.getPlace();if(be!=null&&be.formatted_address){_("origin",be.formatted_address);const xe=re(be);xe&&_("originCoordinates",xe)}})}if(B.current){const ne=new window.google.maps.places.Autocomplete(B.current,{types:["(cities)"]});ne.addListener("place_changed",()=>{const be=ne.getPlace();if(be!=null&&be.formatted_address){_("destination",be.formatted_address);const xe=re(be);xe&&_("destinationCoordinates",xe)}})}}},[_]);const ae=async ne=>{let be=ne.originCoordinates,xe=ne.destinationCoordinates;t([be,xe]),(!be||be.address!==ne.origin)&&(be=await te(ne.origin)||IS),(!xe||xe.address!==ne.destination)&&(xe=await te(ne.destination)||OS);const $e={vehicle_id:e==null?void 0:e.id,origin:ne.origin,destination:ne.destination,start_soc:n.startingCharge,min_arrival_soc:n.minArrivalCharge};M($e)},he=(ne,be)=>{l(xe=>({...xe,[be]:ne[0]}))};return $.jsxs("div",{className:"bg-white p-8 rounded-2xl border",children:[$.jsxs("form",{onSubmit:o(ae),children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title",children:"Route Planning"}),$.jsx("p",{className:"paragraph mt-2",children:"Enter your journey details and we'll calculate optimal charging stop"})]}),$.jsxs("div",{className:"mt-6 border rounded-2xl p-4",children:[$.jsx("h1",{className:"title",children:"Trip Details"}),$.jsxs("div",{className:"mt-4",children:[$.jsx("h1",{className:"paragraph text-[#212B36]!",children:"Origin"}),$.jsxs("div",{className:"flex items-center text-base bg-white border border-gray-500/30 rounded-lg p-3 mt-2",children:[$.jsx(sN,{strokeWidth:1.5,className:"text-[#637381] mr-3"}),$.jsx("input",{...h("origin",{required:!0}),ref:z,className:"outline-none text-gray-500 bg-transparent w-full",type:"text",placeholder:"Enter your origin"})]})]}),$.jsxs("div",{className:"mt-4",children:[$.jsxs("div",{className:"relative flex items-center",children:[$.jsx("h1",{className:"paragraph text-[#212B36]!",children:"Destination"}),$.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-y-1/2",children:$.jsx(KZ,{})})]}),$.jsxs("div",{className:"flex items-center text-base bg-white border border-gray-500/30 rounded-lg p-3 mt-2",children:[$.jsx(Z7,{strokeWidth:1.5,className:"text-[#637381] mr-3"}),$.jsx("input",{...h("destination",{required:!0}),ref:B,className:"outline-none text-gray-500 bg-transparent w-full",type:"text",placeholder:"Enter your destination"})]})]})]}),$.jsxs("div",{className:"my-6 border p-3 rounded-lg",children:[$.jsxs("h1",{className:"title flex items-center gap-2",children:[$.jsx(_7,{strokeWidth:1.5})," Battery Constraints"]}),$.jsxs("div",{className:"mt-6",children:[$.jsx("h1",{className:"title2 font-medium",children:"Starting Charge"}),$.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[$.jsx(AI,{value:[n.startingCharge],max:100,step:1,onValueChange:ne=>he(ne,"startingCharge")}),$.jsxs("span",{className:"w-[5ch]",children:[n.startingCharge,"%"]})]})]}),$.jsxs("div",{className:"mt-6",children:[$.jsx("h1",{className:"title2 font-medium",children:"Min. Arrival Charge"}),$.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[$.jsx(AI,{value:[n.minArrivalCharge],max:100,step:1,onValueChange:ne=>he(ne,"minArrivalCharge")}),$.jsxs("span",{className:"w-[5ch]",children:[n.minArrivalCharge,"%"]})]})]})]}),$.jsxs("div",{className:"bg-[#e5ecfa] p-3 rounded-lg",children:[$.jsxs("h1",{className:"title text-black! flex items-center gap-2",children:[$.jsx(aN,{size:30,strokeWidth:1})," Selected Vehicle"]}),$.jsxs("div",{className:"mt-3 flex justify-between",children:[$.jsxs("div",{className:"space-y-2",children:[$.jsxs("h1",{className:"title2",children:["Model:"," ",$.jsx("span",{className:"text-[#637381]",children:e==null?void 0:e.name})]}),$.jsxs("h1",{className:"title2",children:["Power:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.power_kw," KWh"]})]}),$.jsxs("h1",{className:"title2",children:["Battery:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.nominal_battery_capacity_kwh," kWh"]})]})]}),$.jsxs("div",{className:"space-y-2 text-end",children:[$.jsxs("h1",{className:"title2",children:["Type:"," ",$.jsx("span",{className:"text-[#637381] capitalize",children:e==null?void 0:e.vehicle_type})]}),$.jsxs("h1",{className:"title2",children:["Weight:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.weight_kg," kg"]})]}),$.jsxs("h1",{className:"title2",children:["Frontal Area:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.frontal_area_m2," m"]})]})]})]})]}),$.jsx(wy,{type:"submit",className:"w-full bg-[#212B36] text-white py-3 rounded-lg mt-4 flex justify-center items-center",disabled:O,children:O?"Calculating...":$.jsxs($.Fragment,{children:["Calculate Route ",$.jsx(z7,{})]})})]}),O&&$.jsx(gp,{})]})}function f_(e){"@babel/helpers - typeof";return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f_(e)}function FK(e,t){if(f_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(f_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BK(e){var t=FK(e,"string");return f_(t)=="symbol"?t:t+""}function jt(e,t,r){return(t=BK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LS,II;function VK(){if(II)return LS;II=1;var e=function(r,n,l,h,d,o,_,S){if(!r){var P;if(n===void 0)P=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var M=[l,h,d,o,_,S],O=0;P=new Error(n.replace(/%s/g,function(){return M[O++]})),P.name="Invariant Violation"}throw P.framesToPop=1,P}};return LS=e,LS}var $K=VK(),Za=QN($K),on=A.createContext(null);function UK(){Za(!!A.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=A.useContext(on);return Za(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}function qK(e,t,r){return Object.keys(e).reduce(function(l,h){return t(l,e[h],h)},r)}function GK(e,t){Object.keys(e).forEach(r=>t(e[r],r))}function WK(e,t,r,n){var l={},h=(d,o)=>{var _=r[o];_!==t[o]&&(l[o]=_,d(n,_))};return GK(e,h),l}function HK(e,t,r){var n=qK(r,function(h,d,o){return typeof e[o]=="function"&&h.push(google.maps.event.addListener(t,d,e[o])),h},[]);return n}function ZK(e){google.maps.event.removeListener(e)}function Cn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];e.forEach(ZK)}function xn(e){var{updaterMap:t,eventMap:r,prevProps:n,nextProps:l,instance:h}=e,d=HK(l,h,r);return WK(t,n,l,h),d}function KK(e){var{children:t,options:r,id:n,mapContainerStyle:l,mapContainerClassName:h,center:d,onClick:o,onDblClick:_,onDrag:S,onDragEnd:P,onDragStart:M,onMouseMove:O,onMouseOut:z,onMouseOver:B,onMouseDown:F,onMouseUp:L,onRightClick:K,onCenterChanged:Q,onLoad:re,onUnmount:te}=e,[ae,he]=A.useState(null),ne=A.useRef(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null),[Lt,ir]=A.useState(null);return A.useEffect(()=>{r&&ae!==null&&ae.setOptions(r)},[ae,r]),A.useEffect(()=>{ae!==null&&typeof d<"u"&&ae.setCenter(d)},[ae,d]),A.useEffect(()=>{ae&&_&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(ae,"dblclick",_)))},[_]),A.useEffect(()=>{ae&&P&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(ae,"dragend",P)))},[P]),A.useEffect(()=>{ae&&M&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(ae,"dragstart",M)))},[M]),A.useEffect(()=>{ae&&F&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(ae,"mousedown",F)))},[F]),A.useEffect(()=>{ae&&O&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(ae,"mousemove",O)))},[O]),A.useEffect(()=>{ae&&z&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(ae,"mouseout",z)))},[z]),A.useEffect(()=>{ae&&B&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(ae,"mouseover",B)))},[B]),A.useEffect(()=>{ae&&L&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(ae,"mouseup",L)))},[L]),A.useEffect(()=>{ae&&K&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(ae,"rightclick",K)))},[K]),A.useEffect(()=>{ae&&o&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(ae,"click",o)))},[o]),A.useEffect(()=>{ae&&S&&(Lt!==null&&google.maps.event.removeListener(Lt),ir(google.maps.event.addListener(ae,"drag",S)))},[S]),A.useEffect(()=>{ae&&Q&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(ae,"center_changed",Q)))},[o]),A.useEffect(()=>{var St=ne.current===null?null:new google.maps.Map(ne.current,r);return he(St),St!==null&&re&&re(St),()=>{St!==null&&te&&te(St)}},[]),$.jsx("div",{id:n,ref:ne,style:l,className:h,children:$.jsx(on.Provider,{value:ae,children:ae!==null?t:null})})}A.memo(KK);function OI(e,t,r,n,l,h,d){try{var o=e[h](d),_=o.value}catch(S){return void r(S)}o.done?t(_):Promise.resolve(_).then(n,l)}function JN(e){return function(){var t=this,r=arguments;return new Promise(function(n,l){var h=e.apply(t,r);function d(_){OI(h,n,l,d,o,"next",_)}function o(_){OI(h,n,l,d,o,"throw",_)}d(void 0)})}}function eF(e){var{googleMapsApiKey:t,googleMapsClientId:r,version:n="weekly",language:l,region:h,libraries:d,channel:o,mapIds:_,authReferrerPolicy:S,apiUrl:P="https://maps.googleapis.com"}=e,M=[];return Za(t&&r||!(t&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?M.push("key=".concat(t)):r&&M.push("client=".concat(r)),n&&M.push("v=".concat(n)),l&&M.push("language=".concat(l)),h&&M.push("region=".concat(h)),d&&d.length&&M.push("libraries=".concat(d.sort().join(","))),o&&M.push("channel=".concat(o)),_&&_.length&&M.push("map_ids=".concat(_.join(","))),S&&M.push("auth_referrer_policy=".concat(S)),M.push("loading=async"),M.push("callback=initMap"),"".concat(P,"/maps/api/js?").concat(M.join("&"))}var Am=typeof document<"u";function tF(e){var{url:t,id:r,nonce:n}=e;return Am?new Promise(function(h,d){var o=document.getElementById(r),_=window;if(o){var S=o.getAttribute("data-state");if(o.src===t&&S!=="error"){if(S==="ready")return h(r);var P=_.initMap,M=o.onerror;_.initMap=function(){P&&P(),h(r)},o.onerror=function(z){M&&M(z),d(z)};return}else o.remove()}var O=document.createElement("script");O.type="text/javascript",O.src=t,O.id=r,O.async=!0,O.nonce=n||"",O.onerror=function(B){O.setAttribute("data-state","error"),d(B)},_.initMap=function(){O.setAttribute("data-state","ready"),h(r)},document.head.appendChild(O)}).catch(l=>{throw console.error("injectScript error: ",l),l}):Promise.reject(new Error("document is undefined"))}function LI(e){var t=e.href;return t&&(t.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:e.tagName.toLowerCase()==="style"&&e.styleSheet&&e.styleSheet.cssText&&e.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(e.styleSheet.cssText="",!0):e.tagName.toLowerCase()==="style"&&e.innerHTML&&e.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(e.innerHTML="",!0):e.tagName.toLowerCase()==="style"&&!e.styleSheet&&!e.innerHTML}function rF(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(l,h){return LI(l)||Reflect.apply(t,e,[l,h]),l};var r=e.appendChild.bind(e);e.appendChild=function(l){return LI(l)||Reflect.apply(r,e,[l]),l}}}var Nv=!1;function nF(){return $.jsx("div",{children:"Loading..."})}var eE={id:"script-loader",version:"weekly"};class iF extends A.PureComponent{constructor(){super(...arguments),jt(this,"check",null),jt(this,"state",{loaded:!1}),jt(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),jt(this,"isCleaningUp",JN(function*(){function t(r){if(!Nv)r();else if(Am)var n=window.setInterval(function(){Nv||(window.clearInterval(n),r())},1)}return new Promise(t)})),jt(this,"cleanup",()=>{Nv=!0;var t=document.getElementById(this.props.id);t&&t.parentNode&&t.parentNode.removeChild(t),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),jt(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&rF(),Za(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var t={id:this.props.id,nonce:this.props.nonce,url:eF(this.props)};tF(t).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),jt(this,"getRef",t=>{this.check=t})}componentDidMount(){if(Am){if(window.google&&window.google.maps&&!Nv){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(t){this.props.libraries!==t.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Am&&t.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Am){this.cleanup();var t=()=>{this.check||(delete window.google,Nv=!1)};window.setTimeout(t,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return $.jsxs($.Fragment,{children:[$.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||$.jsx(nF,{})]})}}jt(iF,"defaultProps",eE);function XK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function kC(e,t){if(e==null)return{};var r,n,l=XK(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}var DI;function YK(e){var{id:t=eE.id,version:r=eE.version,nonce:n,googleMapsApiKey:l,googleMapsClientId:h,language:d,region:o,libraries:_,preventGoogleFontsLoading:S,channel:P,mapIds:M,authReferrerPolicy:O,apiUrl:z="https://maps.googleapis.com"}=e,B=A.useRef(!1),[F,L]=A.useState(!1),[K,Q]=A.useState(void 0);A.useEffect(function(){return B.current=!0,()=>{B.current=!1}},[]),A.useEffect(function(){Am&&S&&rF()},[S]),A.useEffect(function(){F&&Za(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[F]);var re=eF({version:r,googleMapsApiKey:l,googleMapsClientId:h,language:d,region:o,libraries:_,channel:P,mapIds:M,authReferrerPolicy:O,apiUrl:z});A.useEffect(function(){if(!Am)return;function he(){B.current&&(L(!0),DI=re)}if(window.google&&window.google.maps&&DI===re){he();return}tF({id:t,url:re,nonce:n}).then(he).catch(function(be){B.current&&Q(be),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(l||"-",") or Client ID (").concat(h||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(be)})},[t,re,n]);var te=A.useRef(void 0);return A.useEffect(function(){te.current&&_!==te.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),te.current=_},[_]),{isLoaded:F,loadError:K,url:re}}var QK=["loadingElement","onLoad","onError","onUnmount","children"],JK=$.jsx(nF,{});function eX(e){var{loadingElement:t,onLoad:r,onError:n,onUnmount:l,children:h}=e,d=kC(e,QK),{isLoaded:o,loadError:_}=YK(d);return A.useEffect(function(){o&&typeof r=="function"&&r()},[o,r]),A.useEffect(function(){_&&typeof n=="function"&&n(_)},[_,n]),A.useEffect(function(){return()=>{l&&l()}},[l]),o?h:t||JK}A.memo(eX);var RI;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(RI||(RI={}));function jI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function cb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var zI={},NI={options(e,t){e.setOptions(t)}};function tX(e){var{options:t,onLoad:r,onUnmount:n}=e,l=A.useContext(on),[h,d]=A.useState(null);return A.useEffect(()=>{h!==null&&h.setMap(l)},[l]),A.useEffect(()=>{t&&h!==null&&h.setOptions(t)},[h,t]),A.useEffect(()=>{var o=new google.maps.TrafficLayer(cb(cb({},t),{},{map:l}));return d(o),r&&r(o),()=>{h!==null&&(n&&n(h),h.setMap(null))}},[]),null}A.memo(tX);class rX extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{trafficLayer:null}),jt(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),jt(this,"registeredEvents",[])}componentDidMount(){var t=new google.maps.TrafficLayer(cb(cb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:NI,eventMap:zI,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{trafficLayer:t}},this.setTrafficLayerCallback)}componentDidUpdate(t){this.state.trafficLayer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:NI,eventMap:zI,prevProps:t,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Cn(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}jt(rX,"contextType",on);function nX(e){var{onLoad:t,onUnmount:r}=e,n=A.useContext(on),[l,h]=A.useState(null);return A.useEffect(()=>{l!==null&&l.setMap(n)},[n]),A.useEffect(()=>{var d=new google.maps.BicyclingLayer;return h(d),d.setMap(n),t&&t(d),()=>{d!==null&&(r&&r(d),d.setMap(null))}},[]),null}A.memo(nX);class iX extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{bicyclingLayer:null}),jt(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var t=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:t}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}jt(iX,"contextType",on);function aX(e){var{onLoad:t,onUnmount:r}=e,n=A.useContext(on),[l,h]=A.useState(null);return A.useEffect(()=>{l!==null&&l.setMap(n)},[n]),A.useEffect(()=>{var d=new google.maps.TransitLayer;return h(d),d.setMap(n),t&&t(d),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}A.memo(aX);class oX extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{transitLayer:null}),jt(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var t=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:t}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}jt(oX,"contextType",on);function FI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function hb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var BI={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},VI={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};function sX(e){var{options:t,drawingMode:r,onCircleComplete:n,onMarkerComplete:l,onOverlayComplete:h,onPolygonComplete:d,onPolylineComplete:o,onRectangleComplete:_,onLoad:S,onUnmount:P}=e,M=A.useContext(on),[O,z]=A.useState(null),[B,F]=A.useState(null),[L,K]=A.useState(null),[Q,re]=A.useState(null),[te,ae]=A.useState(null),[he,ne]=A.useState(null),[be,xe]=A.useState(null);return A.useEffect(()=>{O!==null&&O.setMap(M)},[M]),A.useEffect(()=>{t&&O!==null&&O.setOptions(t)},[O,t]),A.useEffect(()=>{O!==null&&O.setDrawingMode(r??null)},[O,r]),A.useEffect(()=>{O&&n&&(B!==null&&google.maps.event.removeListener(B),F(google.maps.event.addListener(O,"circlecomplete",n)))},[O,n]),A.useEffect(()=>{O&&l&&(L!==null&&google.maps.event.removeListener(L),K(google.maps.event.addListener(O,"markercomplete",l)))},[O,l]),A.useEffect(()=>{O&&h&&(Q!==null&&google.maps.event.removeListener(Q),re(google.maps.event.addListener(O,"overlaycomplete",h)))},[O,h]),A.useEffect(()=>{O&&d&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(O,"polygoncomplete",d)))},[O,d]),A.useEffect(()=>{O&&o&&(he!==null&&google.maps.event.removeListener(he),ne(google.maps.event.addListener(O,"polylinecomplete",o)))},[O,o]),A.useEffect(()=>{O&&_&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(O,"rectanglecomplete",_)))},[O,_]),A.useEffect(()=>{Za(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var $e=new google.maps.drawing.DrawingManager(hb(hb({},t),{},{map:M}));return r&&$e.setDrawingMode(r),n&&F(google.maps.event.addListener($e,"circlecomplete",n)),l&&K(google.maps.event.addListener($e,"markercomplete",l)),h&&re(google.maps.event.addListener($e,"overlaycomplete",h)),d&&ae(google.maps.event.addListener($e,"polygoncomplete",d)),o&&ne(google.maps.event.addListener($e,"polylinecomplete",o)),_&&xe(google.maps.event.addListener($e,"rectanglecomplete",_)),z($e),S&&S($e),()=>{O!==null&&(B&&google.maps.event.removeListener(B),L&&google.maps.event.removeListener(L),Q&&google.maps.event.removeListener(Q),te&&google.maps.event.removeListener(te),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),P&&P(O),O.setMap(null))}},[]),null}A.memo(sX);class lX extends A.PureComponent{constructor(t){super(t),jt(this,"registeredEvents",[]),jt(this,"state",{drawingManager:null}),jt(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Za(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var t=new google.maps.drawing.DrawingManager(hb(hb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:VI,eventMap:BI,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{drawingManager:t}},this.setDrawingManagerCallback)}componentDidUpdate(t){this.state.drawingManager!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:VI,eventMap:BI,prevProps:t,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Cn(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}jt(lX,"contextType",on);function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var UI={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},qI={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},db={};function uX(e){var{position:t,options:r,clusterer:n,noClustererRedraw:l,children:h,draggable:d,visible:o,animation:_,clickable:S,cursor:P,icon:M,label:O,opacity:z,shape:B,title:F,zIndex:L,onClick:K,onDblClick:Q,onDrag:re,onDragEnd:te,onDragStart:ae,onMouseOut:he,onMouseOver:ne,onMouseUp:be,onMouseDown:xe,onRightClick:$e,onClickableChanged:Ee,onCursorChanged:Ne,onAnimationChanged:Xe,onDraggableChanged:ut,onFlatChanged:pt,onIconChanged:gt,onPositionChanged:wt,onShapeChanged:je,onTitleChanged:Qe,onVisibleChanged:yt,onZindexChanged:Oe,onLoad:et,onUnmount:Mt}=e,Dt=A.useContext(on),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null),[ir,St]=A.useState(null),[Gr,Tr]=A.useState(null),[wr,tn]=A.useState(null),[Wr,Xi]=A.useState(null),[Ii,Be]=A.useState(null),[rt,bt]=A.useState(null),[rr,Wt]=A.useState(null),[zt,ze]=A.useState(null),[ue,le]=A.useState(null),[pe,Me]=A.useState(null),[Ae,Je]=A.useState(null),[Ze,Ve]=A.useState(null),[it,At]=A.useState(null),[Pt,Xt]=A.useState(null),[or,Mr]=A.useState(null),[Kr,Ur]=A.useState(null),[tt,sn]=A.useState(null),[ti,Ir]=A.useState(null),[Zr,Vn]=A.useState(null);A.useEffect(()=>{Ke!==null&&Ke.setMap(Dt)},[Dt]),A.useEffect(()=>{typeof r<"u"&&Ke!==null&&Ke.setOptions(r)},[Ke,r]),A.useEffect(()=>{typeof d<"u"&&Ke!==null&&Ke.setDraggable(d)},[Ke,d]),A.useEffect(()=>{t&&Ke!==null&&Ke.setPosition(t)},[Ke,t]),A.useEffect(()=>{typeof o<"u"&&Ke!==null&&Ke.setVisible(o)},[Ke,o]),A.useEffect(()=>{Ke==null||Ke.setAnimation(_)},[Ke,_]),A.useEffect(()=>{Ke&&S!==void 0&&Ke.setClickable(S)},[Ke,S]),A.useEffect(()=>{Ke&&P!==void 0&&Ke.setCursor(P)},[Ke,P]),A.useEffect(()=>{Ke&&M!==void 0&&Ke.setIcon(M)},[Ke,M]),A.useEffect(()=>{Ke&&O!==void 0&&Ke.setLabel(O)},[Ke,O]),A.useEffect(()=>{Ke&&z!==void 0&&Ke.setOpacity(z)},[Ke,z]),A.useEffect(()=>{Ke&&B!==void 0&&Ke.setShape(B)},[Ke,B]),A.useEffect(()=>{Ke&&F!==void 0&&Ke.setTitle(F)},[Ke,F]),A.useEffect(()=>{Ke&&L!==void 0&&Ke.setZIndex(L)},[Ke,L]),A.useEffect(()=>{Ke&&Q&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(Ke,"dblclick",Q)))},[Q]),A.useEffect(()=>{Ke&&te&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(Ke,"dragend",te)))},[te]),A.useEffect(()=>{Ke&&ae&&(ir!==null&&google.maps.event.removeListener(ir),St(google.maps.event.addListener(Ke,"dragstart",ae)))},[ae]),A.useEffect(()=>{Ke&&xe&&(Gr!==null&&google.maps.event.removeListener(Gr),Tr(google.maps.event.addListener(Ke,"mousedown",xe)))},[xe]),A.useEffect(()=>{Ke&&he&&(wr!==null&&google.maps.event.removeListener(wr),tn(google.maps.event.addListener(Ke,"mouseout",he)))},[he]),A.useEffect(()=>{Ke&&ne&&(Wr!==null&&google.maps.event.removeListener(Wr),Xi(google.maps.event.addListener(Ke,"mouseover",ne)))},[ne]),A.useEffect(()=>{Ke&&be&&(Ii!==null&&google.maps.event.removeListener(Ii),Be(google.maps.event.addListener(Ke,"mouseup",be)))},[be]),A.useEffect(()=>{Ke&&$e&&(rt!==null&&google.maps.event.removeListener(rt),bt(google.maps.event.addListener(Ke,"rightclick",$e)))},[$e]),A.useEffect(()=>{Ke&&K&&(rr!==null&&google.maps.event.removeListener(rr),Wt(google.maps.event.addListener(Ke,"click",K)))},[K]),A.useEffect(()=>{Ke&&re&&(zt!==null&&google.maps.event.removeListener(zt),ze(google.maps.event.addListener(Ke,"drag",re)))},[re]),A.useEffect(()=>{Ke&&Ee&&(ue!==null&&google.maps.event.removeListener(ue),le(google.maps.event.addListener(Ke,"clickable_changed",Ee)))},[Ee]),A.useEffect(()=>{Ke&&Ne&&(pe!==null&&google.maps.event.removeListener(pe),Me(google.maps.event.addListener(Ke,"cursor_changed",Ne)))},[Ne]),A.useEffect(()=>{Ke&&Xe&&(Ae!==null&&google.maps.event.removeListener(Ae),Je(google.maps.event.addListener(Ke,"animation_changed",Xe)))},[Xe]),A.useEffect(()=>{Ke&&ut&&(Ze!==null&&google.maps.event.removeListener(Ze),Ve(google.maps.event.addListener(Ke,"draggable_changed",ut)))},[ut]),A.useEffect(()=>{Ke&&pt&&(it!==null&&google.maps.event.removeListener(it),At(google.maps.event.addListener(Ke,"flat_changed",pt)))},[pt]),A.useEffect(()=>{Ke&&gt&&(Pt!==null&&google.maps.event.removeListener(Pt),Xt(google.maps.event.addListener(Ke,"icon_changed",gt)))},[gt]),A.useEffect(()=>{Ke&&wt&&(or!==null&&google.maps.event.removeListener(or),Mr(google.maps.event.addListener(Ke,"position_changed",wt)))},[wt]),A.useEffect(()=>{Ke&&je&&(Kr!==null&&google.maps.event.removeListener(Kr),Ur(google.maps.event.addListener(Ke,"shape_changed",je)))},[je]),A.useEffect(()=>{Ke&&Qe&&(tt!==null&&google.maps.event.removeListener(tt),sn(google.maps.event.addListener(Ke,"title_changed",Qe)))},[Qe]),A.useEffect(()=>{Ke&&yt&&(ti!==null&&google.maps.event.removeListener(ti),Ir(google.maps.event.addListener(Ke,"visible_changed",yt)))},[yt]),A.useEffect(()=>{Ke&&Oe&&(Zr!==null&&google.maps.event.removeListener(Zr),Vn(google.maps.event.addListener(Ke,"zindex_changed",Oe)))},[Oe]),A.useEffect(()=>{var ln=ly(ly(ly({},r||db),n?db:{map:Dt}),{},{position:t}),ur=new google.maps.Marker(ln);return n?n.addMarker(ur,!!l):ur.setMap(Dt),t&&ur.setPosition(t),typeof o<"u"&&ur.setVisible(o),typeof d<"u"&&ur.setDraggable(d),typeof S<"u"&&ur.setClickable(S),typeof P=="string"&&ur.setCursor(P),M&&ur.setIcon(M),typeof O<"u"&&ur.setLabel(O),typeof z<"u"&&ur.setOpacity(z),B&&ur.setShape(B),typeof F=="string"&&ur.setTitle(F),typeof L=="number"&&ur.setZIndex(L),Q&&$t(google.maps.event.addListener(ur,"dblclick",Q)),te&&Lt(google.maps.event.addListener(ur,"dragend",te)),ae&&St(google.maps.event.addListener(ur,"dragstart",ae)),xe&&Tr(google.maps.event.addListener(ur,"mousedown",xe)),he&&tn(google.maps.event.addListener(ur,"mouseout",he)),ne&&Xi(google.maps.event.addListener(ur,"mouseover",ne)),be&&Be(google.maps.event.addListener(ur,"mouseup",be)),$e&&bt(google.maps.event.addListener(ur,"rightclick",$e)),K&&Wt(google.maps.event.addListener(ur,"click",K)),re&&ze(google.maps.event.addListener(ur,"drag",re)),Ee&&le(google.maps.event.addListener(ur,"clickable_changed",Ee)),Ne&&Me(google.maps.event.addListener(ur,"cursor_changed",Ne)),Xe&&Je(google.maps.event.addListener(ur,"animation_changed",Xe)),ut&&Ve(google.maps.event.addListener(ur,"draggable_changed",ut)),pt&&At(google.maps.event.addListener(ur,"flat_changed",pt)),gt&&Xt(google.maps.event.addListener(ur,"icon_changed",gt)),wt&&Mr(google.maps.event.addListener(ur,"position_changed",wt)),je&&Ur(google.maps.event.addListener(ur,"shape_changed",je)),Qe&&sn(google.maps.event.addListener(ur,"title_changed",Qe)),yt&&Ir(google.maps.event.addListener(ur,"visible_changed",yt)),Oe&&Vn(google.maps.event.addListener(ur,"zindex_changed",Oe)),tr(ur),et&&et(ur),()=>{Ft!==null&&google.maps.event.removeListener(Ft),ct!==null&&google.maps.event.removeListener(ct),ir!==null&&google.maps.event.removeListener(ir),Gr!==null&&google.maps.event.removeListener(Gr),wr!==null&&google.maps.event.removeListener(wr),Wr!==null&&google.maps.event.removeListener(Wr),Ii!==null&&google.maps.event.removeListener(Ii),rt!==null&&google.maps.event.removeListener(rt),rr!==null&&google.maps.event.removeListener(rr),ue!==null&&google.maps.event.removeListener(ue),pe!==null&&google.maps.event.removeListener(pe),Ae!==null&&google.maps.event.removeListener(Ae),Ze!==null&&google.maps.event.removeListener(Ze),it!==null&&google.maps.event.removeListener(it),Pt!==null&&google.maps.event.removeListener(Pt),or!==null&&google.maps.event.removeListener(or),tt!==null&&google.maps.event.removeListener(tt),ti!==null&&google.maps.event.removeListener(ti),Zr!==null&&google.maps.event.removeListener(Zr),Mt&&Mt(ur),n?n.removeMarker(ur,!!l):ur&&ur.setMap(null)}},[]);var yn=A.useMemo(()=>h?A.Children.map(h,ln=>{if(!A.isValidElement(ln))return ln;var ur=ln;return A.cloneElement(ur,{anchor:Ke})}):null,[h,Ke]);return $.jsx($.Fragment,{children:yn})||null}A.memo(uX);class cX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[])}componentDidMount(){var t=this;return JN(function*(){var r=ly(ly(ly({},t.props.options||db),t.props.clusterer?db:{map:t.context}),{},{position:t.props.position});t.marker=new google.maps.Marker(r),t.props.clusterer?t.props.clusterer.addMarker(t.marker,!!t.props.noClustererRedraw):t.marker.setMap(t.context),t.registeredEvents=xn({updaterMap:qI,eventMap:UI,prevProps:{},nextProps:t.props,instance:t.marker}),t.props.onLoad&&t.props.onLoad(t.marker)})()}componentDidUpdate(t){this.marker&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:qI,eventMap:UI,prevProps:t,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Cn(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var t=this.props.children?A.Children.map(this.props.children,r=>{if(!A.isValidElement(r))return r;var n=r;return A.cloneElement(n,{anchor:this.marker})}):null;return t||null}}jt(cX,"contextType",on);var hX=(function(){function e(t,r){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(t){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var n=r.getMaxZoom(),l=this.cluster.getBounds(),h=r.getMap();h!==null&&"fitBounds"in h&&h.fitBounds(l),this.timeOut=window.setTimeout(function(){var d=r.getMap();if(d!==null){"fitBounds"in d&&d.fitBounds(l);var o=d.getZoom()||0;n!==null&&o>n&&d.setZoom(n+1)}},100)}t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var t;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(t=this.getPanes())===null||t===void 0||t.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var t=this.getPosFromLatLng(this.center);this.div.style.top=t!==null?"".concat(t.y,"px"):"0",this.div.style.left=t!==null?"".concat(t.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var t,r,n,l,h,d;if(this.div&&this.center){var o=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,_=this.backgroundPosition.split(" "),S=parseInt(((t=_[0])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),P=parseInt(((r=_[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),M=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(M!==null?"".concat(M.y,"px"):"0","; left: ").concat(M!==null?"".concat(M.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var O=document.createElement("img");O.alt=o,O.src=this.url,O.width=this.width,O.height=this.height,O.setAttribute("style","position: absolute; top: ".concat(P,"px; left: ").concat(S,"px")),this.cluster.getClusterer().enableRetinaIcons||(O.style.clip="rect(-".concat(P,"px, -").concat(S+this.width,"px, -").concat(P+this.height,", -").concat(S,")"));var z=document.createElement("div");z.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(z.innerText="".concat((l=this.sums)===null||l===void 0?void 0:l.text)),!((h=this.sums)===null||h===void 0)&&h.html&&(z.innerHTML="".concat((d=this.sums)===null||d===void 0?void 0:d.html)),this.div.innerHTML="",this.div.appendChild(O),this.div.appendChild(z),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(t){this.sums=t;var r=this.cluster.getClusterer().getStyles(),n=r[Math.min(r.length-1,Math.max(0,t.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(t){this.center=t},e.prototype.getPosFromLatLng=function(t){var r=this.getProjection().fromLatLngToDivPixel(t);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},e})(),dX=(function(){function e(t){this.markerClusterer=t,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new hX(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),n=0,l=r;n<l.length;n++){var h=l[n],d=h.getPosition();d&&t.extend(d)}return t},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(t){var r;if(this.isMarkerAlreadyAdded(t))return!1;if(this.center){if(this.averageCenter){var n=t.getPosition();if(n){var l=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(l-1)+n.lat())/l,(this.center.lng()*(l-1)+n.lng())/l),this.calculateBounds()}}}else{var n=t.getPosition();n&&(this.center=n,this.calculateBounds())}t.isAdded=!0,this.markers.push(t);var h=this.markers.length,d=this.markerClusterer.getMaxZoom(),o=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(d!==null&&typeof o<"u"&&o>d)t.getMap()!==this.map&&t.setMap(this.map);else if(h<this.minClusterSize)t.getMap()!==this.map&&t.setMap(this.map);else if(h===this.minClusterSize)for(var _=0,S=this.markers;_<S.length;_++){var P=S[_];P.setMap(null)}else t.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(t){if(this.bounds!==null){var r=t.getPosition();if(r)return this.bounds.contains(r)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var t,r=this.markers.length,n=this.markerClusterer.getMaxZoom(),l=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(n!==null&&typeof l<"u"&&l>n){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},e.prototype.isMarkerAlreadyAdded=function(t){if(this.markers.includes)return this.markers.includes(t);for(var r=0;r<this.markers.length;r++)if(t===this.markers[r])return!0;return!1},e})();function fX(e,t){var r=e.length,n=r.toString().length,l=Math.min(n,t);return{text:r.toString(),index:l,title:""}}var pX=2e3,mX=500,gX="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",yX="png",vX=[53,56,66,78,90],_X="cluster",aF=(function(){function e(t,r,n){r===void 0&&(r=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||gX,this.imageExtension=n.imageExtension||yX,this.imageSizes=n.imageSizes||vX,this.calculator=n.calculator||fX,this.batchSize=n.batchSize||pX,this.batchSizeIE=n.batchSizeIE||mX,this.clusterClass=n.clusterClass||_X,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var t,r;this.resetViewport(!1),(((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var t=this.getMap();this.activeMap=t,this.ready=!0,this.repaint(),t!==null&&(this.listeners=[google.maps.event.addListener(t,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(t,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var t=0,r=this.markers;t<r.length;t++){var n=r[t];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var l=0,h=this.clusters;l<h.length;l++){var d=h[l];d.remove()}this.clusters=[];for(var o=0,_=this.listeners;o<_.length;o++){var S=_[o];google.maps.event.removeListener(S)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var t=0;t<this.imageSizes.length;t++)this.styles.push({url:"".concat(this.imagePath+(t+1),".").concat(this.imageExtension),height:this.imageSizes[t]||0,width:this.imageSizes[t]||0})},e.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),r=new google.maps.LatLngBounds,n=0,l=t;n<l.length;n++){var h=l[n],d=h.getPosition();d&&r.extend(d)}var o=this.getMap();o!==null&&"fitBounds"in o&&o.fitBounds(r)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(t){this.gridSize=t},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(t){this.minClusterSize=t},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(t){this.maxZoom=t},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(t){this.styles=t},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(t){this.title=t},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(t){this.zoomOnClick=t},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(t){this.averageCenter=t},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(t){this.ignoreHidden=t},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons=t},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(t){this.imageExtension=t},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(t){this.imagePath=t},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(t){this.imageSizes=t},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(t){this.calculator=t},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(t){this.batchSizeIE=t},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(t){this.clusterClass=t},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(t,r){this.pushMarkerTo(t),r||this.redraw()},e.prototype.addMarkers=function(t,r){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var l=t[n];l&&this.pushMarkerTo(l)}r||this.redraw()},e.prototype.pushMarkerTo=function(t){var r=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",function(){r.ready&&(t.isAdded=!1,r.repaint())}),t.isAdded=!1,this.markers.push(t)},e.prototype.removeMarker_=function(t){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(t);else for(var n=0;n<this.markers.length;n++)if(t===this.markers[n]){r=n;break}return r===-1?!1:(t.setMap(null),this.markers.splice(r,1),!0)},e.prototype.removeMarker=function(t,r){var n=this.removeMarker_(t);return!r&&n&&this.repaint(),n},e.prototype.removeMarkers=function(t,r){for(var n=!1,l=0,h=t;l<h.length;l++){var d=h[l];n=n||this.removeMarker_(d)}return!r&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var t=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,l=t;n<l.length;n++){var h=l[n];h.remove()}},0)},e.prototype.getExtendedBounds=function(t){var r=this.getProjection(),n=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var l=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()));if(l!==null&&(l.x-=this.gridSize,l.y+=this.gridSize),n!==null){var h=r.fromDivPixelToLatLng(n);h!==null&&t.extend(h)}if(l!==null){var d=r.fromDivPixelToLatLng(l);d!==null&&t.extend(d)}return t},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(t){for(var r=0,n=this.clusters;r<n.length;r++){var l=n[r];l.remove()}this.clusters=[];for(var h=0,d=this.markers;h<d.length;h++){var o=d[h];o.isAdded=!1,t&&o.setMap(null)}},e.prototype.distanceBetweenPoints=function(t,r){var n=6371,l=(r.lat()-t.lat())*Math.PI/180,h=(r.lng()-t.lng())*Math.PI/180,d=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(h/2)*Math.sin(h/2);return n*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},e.prototype.isMarkerInBounds=function(t,r){var n=t.getPosition();return n?r.contains(n):!1},e.prototype.addToClosestCluster=function(t){for(var r,n=4e4,l=null,h=0,d=this.clusters;h<d.length;h++){var o=d[h];r=o;var _=r.getCenter(),S=t.getPosition();if(_&&S){var P=this.distanceBetweenPoints(_,S);P<n&&(n=P,l=r)}}l&&l.isMarkerInClusterBounds(t)?l.addMarker(t):(r=new dX(this),r.addMarker(t),this.clusters.push(r))},e.prototype.createClusters=function(t){var r=this;if(this.ready){t===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),l=n!==null&&("getBounds"in n)?n.getBounds():null,h=(n==null?void 0:n.getZoom())||0,d=h>3?new google.maps.LatLngBounds(l==null?void 0:l.getSouthWest(),l==null?void 0:l.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(d),_=Math.min(t+this.batchSize,this.markers.length),S=t;S<_;S++){var P=this.markers[S];P&&!P.isAdded&&this.isMarkerInBounds(P,o)&&(!this.ignoreHidden||this.ignoreHidden&&P.getVisible())&&this.addToClosestCluster(P)}if(_<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(_)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var M=0,O=this.clusters;M<O.length;M++){var z=O[M];z.updateIcon()}}}},e.prototype.extend=function(t,r){return(function(l){for(var h in l.prototype){var d=h;this.prototype[d]=l.prototype[d]}return this}).apply(t,[r])},e})();function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function xX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var uu={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Nn={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},bX={};function wX(e){var{children:t,options:r,averageCenter:n,batchSizeIE:l,calculator:h,clusterClass:d,enableRetinaIcons:o,gridSize:_,ignoreHidden:S,imageExtension:P,imagePath:M,imageSizes:O,maxZoom:z,minimumClusterSize:B,styles:F,title:L,zoomOnClick:K,onClick:Q,onClusteringBegin:re,onClusteringEnd:te,onMouseOver:ae,onMouseOut:he,onLoad:ne,onUnmount:be}=e,[xe,$e]=A.useState(null),Ee=A.useContext(on),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null);return A.useEffect(()=>{xe&&he&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(xe,uu.onMouseOut,he)))},[he]),A.useEffect(()=>{xe&&ae&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(xe,uu.onMouseOver,ae)))},[ae]),A.useEffect(()=>{xe&&Q&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(xe,uu.onClick,Q)))},[Q]),A.useEffect(()=>{xe&&re&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(xe,uu.onClusteringBegin,re)))},[re]),A.useEffect(()=>{xe&&te&&(gt!==null&&google.maps.event.removeListener(gt),pt(google.maps.event.addListener(xe,uu.onClusteringEnd,te)))},[te]),A.useEffect(()=>{typeof n<"u"&&xe!==null&&Nn.averageCenter(xe,n)},[xe,n]),A.useEffect(()=>{typeof l<"u"&&xe!==null&&Nn.batchSizeIE(xe,l)},[xe,l]),A.useEffect(()=>{typeof h<"u"&&xe!==null&&Nn.calculator(xe,h)},[xe,h]),A.useEffect(()=>{typeof d<"u"&&xe!==null&&Nn.clusterClass(xe,d)},[xe,d]),A.useEffect(()=>{typeof o<"u"&&xe!==null&&Nn.enableRetinaIcons(xe,o)},[xe,o]),A.useEffect(()=>{typeof _<"u"&&xe!==null&&Nn.gridSize(xe,_)},[xe,_]),A.useEffect(()=>{typeof S<"u"&&xe!==null&&Nn.ignoreHidden(xe,S)},[xe,S]),A.useEffect(()=>{typeof P<"u"&&xe!==null&&Nn.imageExtension(xe,P)},[xe,P]),A.useEffect(()=>{typeof M<"u"&&xe!==null&&Nn.imagePath(xe,M)},[xe,M]),A.useEffect(()=>{typeof O<"u"&&xe!==null&&Nn.imageSizes(xe,O)},[xe,O]),A.useEffect(()=>{typeof z<"u"&&xe!==null&&Nn.maxZoom(xe,z)},[xe,z]),A.useEffect(()=>{typeof B<"u"&&xe!==null&&Nn.minimumClusterSize(xe,B)},[xe,B]),A.useEffect(()=>{typeof F<"u"&&xe!==null&&Nn.styles(xe,F)},[xe,F]),A.useEffect(()=>{typeof L<"u"&&xe!==null&&Nn.title(xe,L)},[xe,L]),A.useEffect(()=>{typeof K<"u"&&xe!==null&&Nn.zoomOnClick(xe,K)},[xe,K]),A.useEffect(()=>{if(Ee){var et=xX({},r||bX),Mt=new aF(Ee,[],et);return n&&Nn.averageCenter(Mt,n),l&&Nn.batchSizeIE(Mt,l),h&&Nn.calculator(Mt,h),d&&Nn.clusterClass(Mt,d),o&&Nn.enableRetinaIcons(Mt,o),_&&Nn.gridSize(Mt,_),S&&Nn.ignoreHidden(Mt,S),P&&Nn.imageExtension(Mt,P),M&&Nn.imagePath(Mt,M),O&&Nn.imageSizes(Mt,O),z&&Nn.maxZoom(Mt,z),B&&Nn.minimumClusterSize(Mt,B),F&&Nn.styles(Mt,F),L&&Nn.title(Mt,L),K&&Nn.zoomOnClick(Mt,K),he&&Qe(google.maps.event.addListener(Mt,uu.onMouseOut,he)),ae&&Oe(google.maps.event.addListener(Mt,uu.onMouseOver,ae)),Q&&Xe(google.maps.event.addListener(Mt,uu.onClick,Q)),re&&pt(google.maps.event.addListener(Mt,uu.onClusteringBegin,re)),te&&wt(google.maps.event.addListener(Mt,uu.onClusteringEnd,te)),$e(Mt),ne&&ne(Mt),()=>{je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),be&&be(Mt)}}},[]),xe!==null&&t(xe)||null}A.memo(wX);class SX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{markerClusterer:null}),jt(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var t=new aF(this.context,[],this.props.options);this.registeredEvents=xn({updaterMap:Nn,eventMap:uu,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({markerClusterer:t}),this.setClustererCallback)}}componentDidUpdate(t){this.state.markerClusterer&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:Nn,eventMap:uu,prevProps:t,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Cn(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}jt(SX,"contextType",on);function WI(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var oF=(function(){function e(t){t===void 0&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",t.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),typeof t.visible>"u"&&(typeof t.isHidden>"u"?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var t=this,r=function(P){P.returnValue=!1,P.preventDefault&&P.preventDefault(),t.enableEventPropagation||WI(P)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var l=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-l.left-l.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var h=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],d=0,o=h;d<o.length;d++){var _=o[d];this.eventListeners.push(google.maps.event.addListener(this.div,_,WI))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){t.div&&(t.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var t="";return this.closeBoxURL!==""&&(t='<img alt=""',t+=' aria-hidden="true"',t+=" src='"+this.closeBoxURL+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin+";",t+="'>"),t},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(t){if(this.div&&!t){var r=this.getMap();if(r instanceof google.maps.Map){var n=0,l=0,h=r.getBounds();h&&!h.contains(this.position)&&r.setCenter(this.position);var d=r.getDiv(),o=d.offsetWidth,_=d.offsetHeight,S=this.pixelOffset.width,P=this.pixelOffset.height,M=this.div.offsetWidth,O=this.div.offsetHeight,z=this.infoBoxClearance.width,B=this.infoBoxClearance.height,F=this.getProjection(),L=F.fromLatLngToContainerPixel(this.position);L!==null&&(L.x<-S+z?n=L.x+S-z:L.x+M+S+z>o&&(n=L.x+M+S+z-o),this.alignBottom?L.y<-P+B+O?l=L.y+P-B-O:L.y+P+B>_&&(l=L.y+P+B-_):L.y<-P+B?l=L.y+P-B:L.y+O+P+B>_&&(l=L.y+O+P+B-_)),n===0&&l===0||r.panBy(n,l)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var t=this.boxStyle;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.div.style[r]=t[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var t={top:0,bottom:0,left:0,right:0};if(!this.div)return t;if(document.defaultView){var r=this.div.ownerDocument,n=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;n&&(t.top=parseInt(n.borderTopWidth||"",10)||0,t.bottom=parseInt(n.borderBottomWidth||"",10)||0,t.left=parseInt(n.borderLeftWidth||"",10)||0,t.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var l=this.div.currentStyle;l&&(t.top=parseInt(l.borderTopWidth||"",10)||0,t.bottom=parseInt(l.borderBottomWidth||"",10)||0,t.left=parseInt(l.borderLeftWidth||"",10)||0,t.right=parseInt(l.borderRightWidth||"",10)||0)}return t},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var t=this.getProjection(),r=t.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(t){t===void 0&&(t={}),typeof t.boxClass<"u"&&(this.boxClass=t.boxClass,this.setBoxStyle()),typeof t.boxStyle<"u"&&(this.boxStyle=t.boxStyle,this.setBoxStyle()),typeof t.content<"u"&&this.setContent(t.content),typeof t.disableAutoPan<"u"&&(this.disableAutoPan=t.disableAutoPan),typeof t.maxWidth<"u"&&(this.maxWidth=t.maxWidth),typeof t.pixelOffset<"u"&&(this.pixelOffset=t.pixelOffset),typeof t.alignBottom<"u"&&(this.alignBottom=t.alignBottom),typeof t.position<"u"&&this.setPosition(t.position),typeof t.zIndex<"u"&&this.setZIndex(t.zIndex),typeof t.closeBoxMargin<"u"&&(this.closeBoxMargin=t.closeBoxMargin),typeof t.closeBoxURL<"u"&&(this.closeBoxURL=t.closeBoxURL),typeof t.infoBoxClearance<"u"&&(this.infoBoxClearance=t.infoBoxClearance),typeof t.isHidden<"u"&&(this.isHidden=t.isHidden),typeof t.visible<"u"&&(this.isHidden=!t.visible),typeof t.enableEventPropagation<"u"&&(this.enableEventPropagation=t.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(t){this.content=t,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position=t,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(t){this.isHidden=!t,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(t){this.zIndex=t,this.div&&(this.div.style.zIndex=t+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var t=this.getMap();return typeof t>"u"||t===null?!1:!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(t,r){var n=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var l=r.getPosition();n.setPosition(l)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){n.setMap(r.map)})),this.setMap(t),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var t=0,r=this.eventListeners;t<r.length;t++){var n=r[t];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(t,r){return(function(l){for(var h in l.prototype)Object.prototype.hasOwnProperty.call(this,h)||(this.prototype[h]=l.prototype[h]);return this}).apply(t,[r])},e})(),PX=["position"],EX=["position"];function HI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var ZI={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},KI={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},CX={};function TX(e){var{children:t,anchor:r,options:n,position:l,zIndex:h,onCloseClick:d,onDomReady:o,onContentChanged:_,onPositionChanged:S,onZindexChanged:P,onLoad:M,onUnmount:O}=e,z=A.useContext(on),[B,F]=A.useState(null),[L,K]=A.useState(null),[Q,re]=A.useState(null),[te,ae]=A.useState(null),[he,ne]=A.useState(null),[be,xe]=A.useState(null),$e=A.useRef(null);return A.useEffect(()=>{z&&B!==null&&(B.close(),r?B.open(z,r):B.getPosition()&&B.open(z))},[z,B,r]),A.useEffect(()=>{n&&B!==null&&B.setOptions(n)},[B,n]),A.useEffect(()=>{if(l&&B!==null){var Ee=l instanceof google.maps.LatLng?l:new google.maps.LatLng(l.lat,l.lng);B.setPosition(Ee)}},[l]),A.useEffect(()=>{typeof h=="number"&&B!==null&&B.setZIndex(h)},[h]),A.useEffect(()=>{B&&d&&(L!==null&&google.maps.event.removeListener(L),K(google.maps.event.addListener(B,"closeclick",d)))},[d]),A.useEffect(()=>{B&&o&&(Q!==null&&google.maps.event.removeListener(Q),re(google.maps.event.addListener(B,"domready",o)))},[o]),A.useEffect(()=>{B&&_&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(B,"content_changed",_)))},[_]),A.useEffect(()=>{B&&S&&(he!==null&&google.maps.event.removeListener(he),ne(google.maps.event.addListener(B,"position_changed",S)))},[S]),A.useEffect(()=>{B&&P&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(B,"zindex_changed",P)))},[P]),A.useEffect(()=>{if(z){var Ee=n||CX,{position:Ne}=Ee,Xe=kC(Ee,PX),ut;Ne&&!(Ne instanceof google.maps.LatLng)&&(ut=new google.maps.LatLng(Ne.lat,Ne.lng));var pt=new oF(fb(fb({},Xe),ut?{position:ut}:{}));$e.current=document.createElement("div"),F(pt),d&&K(google.maps.event.addListener(pt,"closeclick",d)),o&&re(google.maps.event.addListener(pt,"domready",o)),_&&ae(google.maps.event.addListener(pt,"content_changed",_)),S&&ne(google.maps.event.addListener(pt,"position_changed",S)),P&&xe(google.maps.event.addListener(pt,"zindex_changed",P)),pt.setContent($e.current),r?pt.open(z,r):pt.getPosition()?pt.open(z):Za(!1,"You must provide either an anchor or a position prop for <InfoBox>."),M&&M(pt)}return()=>{B!==null&&(L&&google.maps.event.removeListener(L),te&&google.maps.event.removeListener(te),Q&&google.maps.event.removeListener(Q),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),O&&O(B),B.close())}},[]),$e.current?Cc.createPortal(A.Children.only(t),$e.current):null}A.memo(TX);class MX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",null),jt(this,"state",{infoBox:null}),jt(this,"open",(t,r)=>{r?this.context!==null&&t.open(this.context,r):t.getPosition()?this.context!==null&&t.open(this.context):Za(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),jt(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var t=this.props.options||{},{position:r}=t,n=kC(t,EX),l;r&&!(r instanceof google.maps.LatLng)&&(l=new google.maps.LatLng(r.lat,r.lng));var h=new oF(fb(fb({},n),l?{position:l}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=xn({updaterMap:KI,eventMap:ZI,prevProps:{},nextProps:this.props,instance:h}),this.setState({infoBox:h},this.setInfoBoxCallback)}componentDidUpdate(t){var{infoBox:r}=this.state;r!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:KI,eventMap:ZI,prevProps:t,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:t}=this.props,{infoBox:r}=this.state;r!==null&&(t&&t(r),Cn(this.registeredEvents),r.close())}render(){return this.containerElement?Cc.createPortal(A.Children.only(this.props.children),this.containerElement):null}}jt(MX,"contextType",on);var DS,XI;function kX(){return XI||(XI=1,DS=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,l,h;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(l=n;l--!==0;)if(!e(t[l],r[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(h=Object.keys(t),n=h.length,n!==Object.keys(r).length)return!1;for(l=n;l--!==0;)if(!Object.prototype.hasOwnProperty.call(r,h[l]))return!1;for(l=n;l--!==0;){var d=h[l];if(!e(t[d],r[d]))return!1}return!0}return t!==t&&r!==r}),DS}var AX=kX(),YI=QN(AX),QI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],RS=1,Fv=8;class AC{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,n]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var l=n>>4;if(l!==RS)throw new Error("Got v".concat(l," data when expected v").concat(RS,"."));var h=QI[n&15];if(!h)throw new Error("Unrecognized array type.");var[d]=new Uint16Array(t,2,1),[o]=new Uint32Array(t,4,1);return new AC(o,d,h,t)}constructor(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,l=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var h=QI.indexOf(this.ArrayType),d=t*2*this.ArrayType.BYTES_PER_ELEMENT,o=t*this.IndexArrayType.BYTES_PER_ELEMENT,_=(8-o%8)%8;if(h<0)throw new Error("Unexpected typed array class: ".concat(n,"."));l&&l instanceof ArrayBuffer?(this.data=l,this.ids=new this.IndexArrayType(this.data,Fv,t),this.coords=new this.ArrayType(this.data,Fv+o+_,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(Fv+d+o+_),this.ids=new this.IndexArrayType(this.data,Fv,t),this.coords=new this.ArrayType(this.data,Fv+o+_,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(RS<<4)+h]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=r,n}finish(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return tE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,n,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:h,coords:d,nodeSize:o}=this,_=[0,h.length-1,0],S=[];_.length;){var P=_.pop()||0,M=_.pop()||0,O=_.pop()||0;if(M-O<=o){for(var z=O;z<=M;z++){var B=d[2*z],F=d[2*z+1];B>=t&&B<=n&&F>=r&&F<=l&&S.push(h[z])}continue}var L=O+M>>1,K=d[2*L],Q=d[2*L+1];K>=t&&K<=n&&Q>=r&&Q<=l&&S.push(h[L]),(P===0?t<=K:r<=Q)&&(_.push(O),_.push(L-1),_.push(1-P)),(P===0?n>=K:l>=Q)&&(_.push(L+1),_.push(M),_.push(1-P))}return S}within(t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:l,coords:h,nodeSize:d}=this,o=[0,l.length-1,0],_=[],S=n*n;o.length;){var P=o.pop()||0,M=o.pop()||0,O=o.pop()||0;if(M-O<=d){for(var z=O;z<=M;z++)JI(h[2*z],h[2*z+1],t,r)<=S&&_.push(l[z]);continue}var B=O+M>>1,F=h[2*B],L=h[2*B+1];JI(F,L,t,r)<=S&&_.push(l[B]),(P===0?t-n<=F:r-n<=L)&&(o.push(O),o.push(B-1),o.push(1-P)),(P===0?t+n>=F:r+n>=L)&&(o.push(B+1),o.push(M),o.push(1-P))}return _}}function tE(e,t,r,n,l,h){if(!(l-n<=r)){var d=n+l>>1;sF(e,t,d,n,l,h),tE(e,t,r,n,d-1,1-h),tE(e,t,r,d+1,l,1-h)}}function sF(e,t,r,n,l,h){for(;l>n;){if(l-n>600){var d=l-n+1,o=r-n+1,_=Math.log(d),S=.5*Math.exp(2*_/3),P=.5*Math.sqrt(_*S*(d-S)/d)*(o-d/2<0?-1:1),M=Math.max(n,Math.floor(r-o*S/d+P)),O=Math.min(l,Math.floor(r+(d-o)*S/d+P));sF(e,t,r,M,O,h)}var z=t[2*r+h],B=n,F=l;for(Bv(e,t,n,r),t[2*l+h]>z&&Bv(e,t,n,l);B<F;){for(Bv(e,t,B,F),B++,F--;t[2*B+h]<z;)B++;for(;t[2*F+h]>z;)F--}t[2*n+h]===z?Bv(e,t,n,F):(F++,Bv(e,t,F,l)),F<=r&&(n=F+1),r<=F&&(l=F-1)}}function Bv(e,t,r,n){jS(e,r,n),jS(t,2*r,2*n),jS(t,2*r+1,2*n+1)}function jS(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function JI(e,t,r,n){var l=e-r,h=t-n;return l*l+h*h}var IX={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},eO=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),wm=2,Xf=3,zS=4,Kf=5,lF=6;class OX{constructor(t){this.options=Object.assign(Object.create(IX),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){var{log:r,minZoom:n,maxZoom:l}=this.options;r&&console.time("total time");var h="prepare ".concat(t.length," points");r&&console.time(h),this.points=t;for(var d=[],o=0;o<t.length;o++){var _=t[o];if(_.geometry){var[S,P]=_.geometry.coordinates,M=eO(dx(S)),O=eO(fx(P));d.push(M,O,1/0,o,-1,1),this.options.reduce&&d.push(0)}}var z=this.trees[l+1]=this._createTree(d);r&&console.timeEnd(h);for(var B=l;B>=n;B--){var F=+Date.now();z=this.trees[B]=this._createTree(this._cluster(z,B)),r&&console.log("z%d: %d clusters in %dms",B,z.numItems,+Date.now()-F)}return r&&console.timeEnd("total time"),this}getClusters(t,r){var n=((t[0]+180)%360+360)%360-180,l=Math.max(-90,Math.min(90,t[1])),h=t[2]===180?180:((t[2]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,h=180;else if(n>h){var o=this.getClusters([n,l,180,d],r),_=this.getClusters([-180,l,h,d],r);return o.concat(_)}var S=this.trees[this._limitZoom(r)],P=S.range(dx(n),fx(d),dx(h),fx(l)),M=S.data,O=[];for(var z of P){var B=this.stride*z;O.push(M[B+Kf]>1?tO(M,B,this.clusterProps):this.points[M[B+Xf]])}return O}getChildren(t){var r=this._getOriginId(t),n=this._getOriginZoom(t),l="No cluster with the specified id.",h=this.trees[n];if(!h)throw new Error(l);var d=h.data;if(r*this.stride>=d.length)throw new Error(l);var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),_=d[r*this.stride],S=d[r*this.stride+1],P=h.within(_,S,o),M=[];for(var O of P){var z=O*this.stride;d[z+zS]===t&&M.push(d[z+Kf]>1?tO(d,z,this.clusterProps):this.points[d[z+Xf]])}if(M.length===0)throw new Error(l);return M}getLeaves(t,r,n){r=r||10,n=n||0;var l=[];return this._appendLeaves(l,t,r,n,0),l}getTile(t,r,n){var l=this.trees[this._limitZoom(t)],h=Math.pow(2,t),{extent:d,radius:o}=this.options,_=o/d,S=(n-_)/h,P=(n+1+_)/h,M={features:[]};return this._addTileFeatures(l.range((r-_)/h,S,(r+1+_)/h,P),l.data,r,n,h,M),r===0&&this._addTileFeatures(l.range(1-_/h,S,1,P),l.data,h,n,h,M),r===h-1&&this._addTileFeatures(l.range(0,S,_/h,P),l.data,-1,n,h,M),M.features.length?M:null}getClusterExpansionZoom(t){for(var r=this._getOriginZoom(t)-1;r<=this.options.maxZoom;){var n=this.getChildren(t);if(r++,n.length!==1)break;t=n[0].properties.cluster_id}return r}_appendLeaves(t,r,n,l,h){var d=this.getChildren(r);for(var o of d){var _=o.properties;if(_&&_.cluster?h+_.point_count<=l?h+=_.point_count:h=this._appendLeaves(t,_.cluster_id,n,l,h):h<l?h++:t.push(o),t.length===n)break}return h}_createTree(t){for(var r=new AC(t.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<t.length;n+=this.stride)r.add(t[n],t[n+1]);return r.finish(),r.data=t,r}_addTileFeatures(t,r,n,l,h,d){for(var o of t){var _=o*this.stride,S=r[_+Kf]>1,P=void 0,M=void 0,O=void 0;if(S)P=uF(r,_,this.clusterProps),M=r[_],O=r[_+1];else{var z=this.points[r[_+Xf]];P=z.properties;var[B,F]=z.geometry.coordinates;M=dx(B),O=fx(F)}var L={type:1,geometry:[[Math.round(this.options.extent*(M*h-n)),Math.round(this.options.extent*(O*h-l))]],tags:P},K=void 0;S||this.options.generateId?K=r[_+Xf]:K=this.points[r[_+Xf]].id,K!==void 0&&(L.id=K),d.features.push(L)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,r){for(var{radius:n,extent:l,reduce:h,minPoints:d}=this.options,o=n/(l*Math.pow(2,r)),_=t.data,S=[],P=this.stride,M=0;M<_.length;M+=P)if(!(_[M+wm]<=r)){_[M+wm]=r;var O=_[M],z=_[M+1],B=t.within(_[M],_[M+1],o),F=_[M+Kf],L=F;for(var K of B){var Q=K*P;_[Q+wm]>r&&(L+=_[Q+Kf])}if(L>F&&L>=d){var re=O*F,te=z*F,ae=void 0,he=-1,ne=((M/P|0)<<5)+(r+1)+this.points.length;for(var be of B){var xe=be*P;if(!(_[xe+wm]<=r)){_[xe+wm]=r;var $e=_[xe+Kf];re+=_[xe]*$e,te+=_[xe+1]*$e,_[xe+zS]=ne,h&&(ae||(ae=this._map(_,M,!0),he=this.clusterProps.length,this.clusterProps.push(ae)),h(ae,this._map(_,xe)))}}_[M+zS]=ne,S.push(re/L,te/L,1/0,ne,-1,L),h&&S.push(he)}else{for(var Ee=0;Ee<P;Ee++)S.push(_[M+Ee]);if(L>1)for(var Ne of B){var Xe=Ne*P;if(!(_[Xe+wm]<=r)){_[Xe+wm]=r;for(var ut=0;ut<P;ut++)S.push(_[Xe+ut])}}}}return S}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,r,n){if(t[r+Kf]>1){var l=this.clusterProps[t[r+lF]];return n?Object.assign({},l):l}var h=this.points[t[r+Xf]].properties,d=this.options.map(h);return n&&d===h?Object.assign({},d):d}}function tO(e,t,r){return{type:"Feature",id:e[t+Xf],properties:uF(e,t,r),geometry:{type:"Point",coordinates:[LX(e[t]),DX(e[t+1])]}}}function uF(e,t,r){var n=e[t+Kf],l=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,h=e[t+lF],d=h===-1?{}:Object.assign({},r[h]);return Object.assign(d,{cluster:!0,cluster_id:e[t+Xf],point_count:n,point_count_abbreviated:l})}function dx(e){return e/360+.5}function fx(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function LX(e){return(e-.5)*360}function DX(e){var t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function RX(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r}class Cl{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,r){this.isAdvancedMarker(t)?t.map=r:t.setMap(r)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class rE{constructor(t){var{markers:r,position:n}=t;this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var t=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)t.extend(Cl.getPosition(r));return t}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>Cl.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(Cl.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class jX{constructor(t){var{maxZoom:r=16}=t;this.maxZoom=r}noop(t){var{markers:r}=t;return zX(r)}}var zX=e=>{var t=e.map(r=>new rE({position:Cl.getPosition(r),markers:[r]}));return t};class NX extends jX{constructor(t){var{maxZoom:r,radius:n=60}=t,l=RX(t,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new OX(Object.assign({maxZoom:this.maxZoom,radius:n},l))}calculate(t){var r=!1,n={zoom:t.map.getZoom()};if(!YI(t.markers,this.markers)){r=!0,this.markers=[...t.markers];var l=this.markers.map(h=>{var d=Cl.getPosition(h),o=[d.lng(),d.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:o},properties:{marker:h}}});this.superCluster.load(l)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!YI(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:r}}cluster(t){var{map:r}=t;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(n=>this.transformCluster(n))}transformCluster(t){var{geometry:{coordinates:[r,n]},properties:l}=t;if(l.cluster)return new rE({markers:this.superCluster.getLeaves(l.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:n,lng:r}});var h=l.marker;return new rE({markers:[h],position:Cl.getPosition(h)})}}class FX{constructor(t,r){this.markers={sum:t.length};var n=r.map(h=>h.count),l=n.reduce((h,d)=>h+d,0);this.clusters={count:r.length,markers:{mean:l/r.length,sum:l,min:Math.min(...n),max:Math.max(...n)}}}}class BX{render(t,r,n){var{count:l,position:h}=t,d=l>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(d,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(l,`</text>
</svg>`),_="Cluster of ".concat(l," markers"),S=Number(google.maps.Marker.MAX_ZINDEX)+l;if(Cl.isAdvancedMarkerAvailable(n)){var P=new DOMParser,M=P.parseFromString(o,"image/svg+xml").documentElement;M.setAttribute("transform","translate(0 25)");var O={map:n,position:h,zIndex:S,title:_,content:M};return new google.maps.marker.AdvancedMarkerElement(O)}var z={position:h,zIndex:S,title:_,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(z)}}function VX(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}class IC{constructor(){VX(IC,google.maps.OverlayView)}}var r_;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"})(r_||(r_={}));var $X=(e,t,r)=>{r.fitBounds(t.bounds)};class UX extends IC{constructor(t){var{map:r,markers:n=[],algorithmOptions:l={},algorithm:h=new NX(l),renderer:d=new BX,onClusterClick:o=$X}=t;super(),this.markers=[...n],this.clusters=[],this.algorithm=h,this.renderer=d,this.onClusterClick=o,r&&this.setMap(r)}addMarker(t,r){this.markers.includes(t)||(this.markers.push(t),r||this.render())}addMarkers(t,r){t.forEach(n=>{this.addMarker(n,!0)}),r||this.render()}removeMarker(t,r){var n=this.markers.indexOf(t);return n===-1?!1:(Cl.setMap(t,null),this.markers.splice(n,1),r||this.render(),!0)}removeMarkers(t,r){var n=!1;return t.forEach(l=>{n=this.removeMarker(l,!0)||n}),n&&!r&&this.render(),n}clearMarkers(t){this.markers.length=0,t||this.render()}render(){var t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,r_.CLUSTERING_BEGIN,this);var{clusters:r,changed:n}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(n||n==null){var l=new Set;for(var h of r)h.markers.length==1&&l.add(h.markers[0]);var d=[];for(var o of this.clusters)o.marker!=null&&(o.markers.length==1?l.has(o.marker)||Cl.setMap(o.marker,null):d.push(o.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>d.forEach(_=>Cl.setMap(_,null)))}google.maps.event.trigger(this,r_.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>Cl.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){var t=new FX(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,t,r),n.markers.forEach(l=>Cl.setMap(l,null)),this.onClusterClick&&n.marker.addListener("click",l=>{google.maps.event.trigger(this,r_.CLUSTER_CLICK,n),this.onClusterClick(l,n,r)})),Cl.setMap(n.marker,r)})}}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function nO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qX(e){var t=UK(),[r,n]=A.useState(null);return A.useEffect(()=>{if(t&&r===null){var l=new UX(nO(nO({},e),{},{map:t}));n(l)}},[t]),r}function GX(e){var{children:t,options:r}=e,n=qX(r);return n!==null?t(n):null}A.memo(GX);var iO={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},aO={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};function WX(e){var{children:t,anchor:r,options:n,position:l,zIndex:h,onCloseClick:d,onDomReady:o,onContentChanged:_,onPositionChanged:S,onZindexChanged:P,onLoad:M,onUnmount:O}=e,z=A.useContext(on),[B,F]=A.useState(null),[L,K]=A.useState(null),[Q,re]=A.useState(null),[te,ae]=A.useState(null),[he,ne]=A.useState(null),[be,xe]=A.useState(null),$e=A.useRef(null);return A.useEffect(()=>{B!==null&&(B.close(),r?B.open(z,r):B.getPosition()&&B.open(z))},[z,B,r]),A.useEffect(()=>{n&&B!==null&&B.setOptions(n)},[B,n]),A.useEffect(()=>{l&&B!==null&&B.setPosition(l)},[l]),A.useEffect(()=>{typeof h=="number"&&B!==null&&B.setZIndex(h)},[h]),A.useEffect(()=>{B&&d&&(L!==null&&google.maps.event.removeListener(L),K(google.maps.event.addListener(B,"closeclick",d)))},[d]),A.useEffect(()=>{B&&o&&(Q!==null&&google.maps.event.removeListener(Q),re(google.maps.event.addListener(B,"domready",o)))},[o]),A.useEffect(()=>{B&&_&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(B,"content_changed",_)))},[_]),A.useEffect(()=>{B&&S&&(he!==null&&google.maps.event.removeListener(he),ne(google.maps.event.addListener(B,"position_changed",S)))},[S]),A.useEffect(()=>{B&&P&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(B,"zindex_changed",P)))},[P]),A.useEffect(()=>{var Ee=new google.maps.InfoWindow(n);return F(Ee),$e.current=document.createElement("div"),d&&K(google.maps.event.addListener(Ee,"closeclick",d)),o&&re(google.maps.event.addListener(Ee,"domready",o)),_&&ae(google.maps.event.addListener(Ee,"content_changed",_)),S&&ne(google.maps.event.addListener(Ee,"position_changed",S)),P&&xe(google.maps.event.addListener(Ee,"zindex_changed",P)),Ee.setContent($e.current),l&&Ee.setPosition(l),h&&Ee.setZIndex(h),r?Ee.open(z,r):Ee.getPosition()?Ee.open(z):Za(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),M&&M(Ee),()=>{L&&google.maps.event.removeListener(L),te&&google.maps.event.removeListener(te),Q&&google.maps.event.removeListener(Q),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),O&&O(Ee),Ee.close()}},[]),$e.current?Cc.createPortal(A.Children.only(t),$e.current):null}A.memo(WX);class HX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",null),jt(this,"state",{infoWindow:null}),jt(this,"open",(t,r)=>{r?t.open(this.context,r):t.getPosition()?t.open(this.context):Za(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),jt(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var t=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=xn({updaterMap:aO,eventMap:iO,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({infoWindow:t}),this.setInfoWindowCallback)}componentDidUpdate(t){this.state.infoWindow!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:aO,eventMap:iO,prevProps:t,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Cn(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Cc.createPortal(A.Children.only(this.props.children),this.containerElement):null}}jt(HX,"contextType",on);function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var sO={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},lO={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},ZX={};function KX(e){var{options:t,draggable:r,editable:n,visible:l,path:h,onDblClick:d,onDragEnd:o,onDragStart:_,onMouseDown:S,onMouseMove:P,onMouseOut:M,onMouseOver:O,onMouseUp:z,onRightClick:B,onClick:F,onDrag:L,onLoad:K,onUnmount:Q}=e,re=A.useContext(on),[te,ae]=A.useState(null),[he,ne]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null);return A.useEffect(()=>{te!==null&&te.setMap(re)},[re]),A.useEffect(()=>{typeof t<"u"&&te!==null&&te.setOptions(t)},[te,t]),A.useEffect(()=>{typeof r<"u"&&te!==null&&te.setDraggable(r)},[te,r]),A.useEffect(()=>{typeof n<"u"&&te!==null&&te.setEditable(n)},[te,n]),A.useEffect(()=>{typeof l<"u"&&te!==null&&te.setVisible(l)},[te,l]),A.useEffect(()=>{typeof h<"u"&&te!==null&&te.setPath(h)},[te,h]),A.useEffect(()=>{te&&d&&(he!==null&&google.maps.event.removeListener(he),ne(google.maps.event.addListener(te,"dblclick",d)))},[d]),A.useEffect(()=>{te&&o&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(te,"dragend",o)))},[o]),A.useEffect(()=>{te&&_&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(te,"dragstart",_)))},[_]),A.useEffect(()=>{te&&S&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(te,"mousedown",S)))},[S]),A.useEffect(()=>{te&&P&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(te,"mousemove",P)))},[P]),A.useEffect(()=>{te&&M&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(te,"mouseout",M)))},[M]),A.useEffect(()=>{te&&O&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(te,"mouseover",O)))},[O]),A.useEffect(()=>{te&&z&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(te,"mouseup",z)))},[z]),A.useEffect(()=>{te&&B&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(te,"rightclick",B)))},[B]),A.useEffect(()=>{te&&F&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(te,"click",F)))},[F]),A.useEffect(()=>{te&&L&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(te,"drag",L)))},[L]),A.useEffect(()=>{var $t=new google.maps.Polyline(pb(pb({},t||ZX),{},{map:re}));return h&&$t.setPath(h),typeof l<"u"&&$t.setVisible(l),typeof n<"u"&&$t.setEditable(n),typeof r<"u"&&$t.setDraggable(r),d&&ne(google.maps.event.addListener($t,"dblclick",d)),o&&xe(google.maps.event.addListener($t,"dragend",o)),_&&Ee(google.maps.event.addListener($t,"dragstart",_)),S&&Xe(google.maps.event.addListener($t,"mousedown",S)),P&&pt(google.maps.event.addListener($t,"mousemove",P)),M&&wt(google.maps.event.addListener($t,"mouseout",M)),O&&Qe(google.maps.event.addListener($t,"mouseover",O)),z&&Oe(google.maps.event.addListener($t,"mouseup",z)),B&&Mt(google.maps.event.addListener($t,"rightclick",B)),F&&Ke(google.maps.event.addListener($t,"click",F)),L&&Ft(google.maps.event.addListener($t,"drag",L)),ae($t),K&&K($t),()=>{he!==null&&google.maps.event.removeListener(he),be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),Q&&Q($t),$t.setMap(null)}},[]),null}A.memo(KX);class XX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{polyline:null}),jt(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var t=new google.maps.Polyline(pb(pb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:lO,eventMap:sO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{polyline:t}},this.setPolylineCallback)}componentDidUpdate(t){this.state.polyline!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:lO,eventMap:sO,prevProps:t,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Cn(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}jt(XX,"contextType",on);function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function cO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var hO={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},dO={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};function YX(e){var{options:t,draggable:r,editable:n,visible:l,path:h,paths:d,onDblClick:o,onDragEnd:_,onDragStart:S,onMouseDown:P,onMouseMove:M,onMouseOut:O,onMouseOver:z,onMouseUp:B,onRightClick:F,onClick:L,onDrag:K,onLoad:Q,onUnmount:re,onEdit:te}=e,ae=A.useContext(on),[he,ne]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null);return A.useEffect(()=>{he!==null&&he.setMap(ae)},[ae]),A.useEffect(()=>{typeof t<"u"&&he!==null&&he.setOptions(t)},[he,t]),A.useEffect(()=>{typeof r<"u"&&he!==null&&he.setDraggable(r)},[he,r]),A.useEffect(()=>{typeof n<"u"&&he!==null&&he.setEditable(n)},[he,n]),A.useEffect(()=>{typeof l<"u"&&he!==null&&he.setVisible(l)},[he,l]),A.useEffect(()=>{typeof h<"u"&&he!==null&&he.setPath(h)},[he,h]),A.useEffect(()=>{typeof d<"u"&&he!==null&&he.setPaths(d)},[he,d]),A.useEffect(()=>{he&&typeof o=="function"&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(he,"dblclick",o)))},[o]),A.useEffect(()=>{he&&(google.maps.event.addListener(he.getPath(),"insert_at",()=>{te==null||te(he)}),google.maps.event.addListener(he.getPath(),"set_at",()=>{te==null||te(he)}),google.maps.event.addListener(he.getPath(),"remove_at",()=>{te==null||te(he)}))},[he,te]),A.useEffect(()=>{he&&typeof _=="function"&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(he,"dragend",_)))},[_]),A.useEffect(()=>{he&&typeof S=="function"&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(he,"dragstart",S)))},[S]),A.useEffect(()=>{he&&typeof P=="function"&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(he,"mousedown",P)))},[P]),A.useEffect(()=>{he&&typeof M=="function"&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(he,"mousemove",M)))},[M]),A.useEffect(()=>{he&&typeof O=="function"&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(he,"mouseout",O)))},[O]),A.useEffect(()=>{he&&typeof z=="function"&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(he,"mouseover",z)))},[z]),A.useEffect(()=>{he&&typeof B=="function"&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(he,"mouseup",B)))},[B]),A.useEffect(()=>{he&&typeof F=="function"&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(he,"rightclick",F)))},[F]),A.useEffect(()=>{he&&typeof L=="function"&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(he,"click",L)))},[L]),A.useEffect(()=>{he&&typeof K=="function"&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(he,"drag",K)))},[K]),A.useEffect(()=>{var Lt=new google.maps.Polygon(cO(cO({},t),{},{map:ae}));return h&&Lt.setPath(h),d&&Lt.setPaths(d),typeof l<"u"&&Lt.setVisible(l),typeof n<"u"&&Lt.setEditable(n),typeof r<"u"&&Lt.setDraggable(r),o&&xe(google.maps.event.addListener(Lt,"dblclick",o)),_&&Ee(google.maps.event.addListener(Lt,"dragend",_)),S&&Xe(google.maps.event.addListener(Lt,"dragstart",S)),P&&pt(google.maps.event.addListener(Lt,"mousedown",P)),M&&wt(google.maps.event.addListener(Lt,"mousemove",M)),O&&Qe(google.maps.event.addListener(Lt,"mouseout",O)),z&&Oe(google.maps.event.addListener(Lt,"mouseover",z)),B&&Mt(google.maps.event.addListener(Lt,"mouseup",B)),F&&Ke(google.maps.event.addListener(Lt,"rightclick",F)),L&&Ft(google.maps.event.addListener(Lt,"click",L)),K&&ct(google.maps.event.addListener(Lt,"drag",K)),ne(Lt),Q&&Q(Lt),()=>{be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),tr!==null&&google.maps.event.removeListener(tr),re&&re(Lt),Lt.setMap(null)}},[]),null}A.memo(YX);class QX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[])}componentDidMount(){var t=this.props.options||{};this.polygon=new google.maps.Polygon(t),this.polygon.setMap(this.context),this.registeredEvents=xn({updaterMap:dO,eventMap:hO,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(t){this.polygon&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:dO,eventMap:hO,prevProps:t,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Cn(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}jt(QX,"contextType",on);function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function mb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var pO={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},mO={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};function JX(e){var{options:t,bounds:r,draggable:n,editable:l,visible:h,onDblClick:d,onDragEnd:o,onDragStart:_,onMouseDown:S,onMouseMove:P,onMouseOut:M,onMouseOver:O,onMouseUp:z,onRightClick:B,onClick:F,onDrag:L,onBoundsChanged:K,onLoad:Q,onUnmount:re}=e,te=A.useContext(on),[ae,he]=A.useState(null),[ne,be]=A.useState(null),[xe,$e]=A.useState(null),[Ee,Ne]=A.useState(null),[Xe,ut]=A.useState(null),[pt,gt]=A.useState(null),[wt,je]=A.useState(null),[Qe,yt]=A.useState(null),[Oe,et]=A.useState(null),[Mt,Dt]=A.useState(null),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null);return A.useEffect(()=>{ae!==null&&ae.setMap(te)},[te]),A.useEffect(()=>{typeof t<"u"&&ae!==null&&ae.setOptions(t)},[ae,t]),A.useEffect(()=>{typeof n<"u"&&ae!==null&&ae.setDraggable(n)},[ae,n]),A.useEffect(()=>{typeof l<"u"&&ae!==null&&ae.setEditable(l)},[ae,l]),A.useEffect(()=>{typeof h<"u"&&ae!==null&&ae.setVisible(h)},[ae,h]),A.useEffect(()=>{typeof r<"u"&&ae!==null&&ae.setBounds(r)},[ae,r]),A.useEffect(()=>{ae&&d&&(ne!==null&&google.maps.event.removeListener(ne),be(google.maps.event.addListener(ae,"dblclick",d)))},[d]),A.useEffect(()=>{ae&&o&&(xe!==null&&google.maps.event.removeListener(xe),$e(google.maps.event.addListener(ae,"dragend",o)))},[o]),A.useEffect(()=>{ae&&_&&(Ee!==null&&google.maps.event.removeListener(Ee),Ne(google.maps.event.addListener(ae,"dragstart",_)))},[_]),A.useEffect(()=>{ae&&S&&(Xe!==null&&google.maps.event.removeListener(Xe),ut(google.maps.event.addListener(ae,"mousedown",S)))},[S]),A.useEffect(()=>{ae&&P&&(pt!==null&&google.maps.event.removeListener(pt),gt(google.maps.event.addListener(ae,"mousemove",P)))},[P]),A.useEffect(()=>{ae&&M&&(wt!==null&&google.maps.event.removeListener(wt),je(google.maps.event.addListener(ae,"mouseout",M)))},[M]),A.useEffect(()=>{ae&&O&&(Qe!==null&&google.maps.event.removeListener(Qe),yt(google.maps.event.addListener(ae,"mouseover",O)))},[O]),A.useEffect(()=>{ae&&z&&(Oe!==null&&google.maps.event.removeListener(Oe),et(google.maps.event.addListener(ae,"mouseup",z)))},[z]),A.useEffect(()=>{ae&&B&&(Mt!==null&&google.maps.event.removeListener(Mt),Dt(google.maps.event.addListener(ae,"rightclick",B)))},[B]),A.useEffect(()=>{ae&&F&&(Ke!==null&&google.maps.event.removeListener(Ke),tr(google.maps.event.addListener(ae,"click",F)))},[F]),A.useEffect(()=>{ae&&L&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(ae,"drag",L)))},[L]),A.useEffect(()=>{ae&&K&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(ae,"bounds_changed",K)))},[K]),A.useEffect(()=>{var ir=new google.maps.Rectangle(mb(mb({},t),{},{map:te}));return typeof h<"u"&&ir.setVisible(h),typeof l<"u"&&ir.setEditable(l),typeof n<"u"&&ir.setDraggable(n),typeof r<"u"&&ir.setBounds(r),d&&be(google.maps.event.addListener(ir,"dblclick",d)),o&&$e(google.maps.event.addListener(ir,"dragend",o)),_&&Ne(google.maps.event.addListener(ir,"dragstart",_)),S&&ut(google.maps.event.addListener(ir,"mousedown",S)),P&&gt(google.maps.event.addListener(ir,"mousemove",P)),M&&je(google.maps.event.addListener(ir,"mouseout",M)),O&&yt(google.maps.event.addListener(ir,"mouseover",O)),z&&et(google.maps.event.addListener(ir,"mouseup",z)),B&&Dt(google.maps.event.addListener(ir,"rightclick",B)),F&&tr(google.maps.event.addListener(ir,"click",F)),L&&$t(google.maps.event.addListener(ir,"drag",L)),K&&Lt(google.maps.event.addListener(ir,"bounds_changed",K)),he(ir),Q&&Q(ir),()=>{ne!==null&&google.maps.event.removeListener(ne),xe!==null&&google.maps.event.removeListener(xe),Ee!==null&&google.maps.event.removeListener(Ee),Xe!==null&&google.maps.event.removeListener(Xe),pt!==null&&google.maps.event.removeListener(pt),wt!==null&&google.maps.event.removeListener(wt),Qe!==null&&google.maps.event.removeListener(Qe),Oe!==null&&google.maps.event.removeListener(Oe),Mt!==null&&google.maps.event.removeListener(Mt),Ke!==null&&google.maps.event.removeListener(Ke),Ft!==null&&google.maps.event.removeListener(Ft),ct!==null&&google.maps.event.removeListener(ct),re&&re(ir),ir.setMap(null)}},[]),null}A.memo(JX);let eY=class extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{rectangle:null}),jt(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var t=new google.maps.Rectangle(mb(mb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:mO,eventMap:pO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{rectangle:t}},this.setRectangleCallback)}componentDidUpdate(t){this.state.rectangle!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:mO,eventMap:pO,prevProps:t,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Cn(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}};jt(eY,"contextType",on);function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var yO={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},vO={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},tY={};function rY(e){var{options:t,center:r,radius:n,draggable:l,editable:h,visible:d,onDblClick:o,onDragEnd:_,onDragStart:S,onMouseDown:P,onMouseMove:M,onMouseOut:O,onMouseOver:z,onMouseUp:B,onRightClick:F,onClick:L,onDrag:K,onCenterChanged:Q,onRadiusChanged:re,onLoad:te,onUnmount:ae}=e,he=A.useContext(on),[ne,be]=A.useState(null),[xe,$e]=A.useState(null),[Ee,Ne]=A.useState(null),[Xe,ut]=A.useState(null),[pt,gt]=A.useState(null),[wt,je]=A.useState(null),[Qe,yt]=A.useState(null),[Oe,et]=A.useState(null),[Mt,Dt]=A.useState(null),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null),[ir,St]=A.useState(null),[Gr,Tr]=A.useState(null);return A.useEffect(()=>{ne!==null&&ne.setMap(he)},[he]),A.useEffect(()=>{typeof t<"u"&&ne!==null&&ne.setOptions(t)},[ne,t]),A.useEffect(()=>{typeof l<"u"&&ne!==null&&ne.setDraggable(l)},[ne,l]),A.useEffect(()=>{typeof h<"u"&&ne!==null&&ne.setEditable(h)},[ne,h]),A.useEffect(()=>{typeof d<"u"&&ne!==null&&ne.setVisible(d)},[ne,d]),A.useEffect(()=>{typeof n=="number"&&ne!==null&&ne.setRadius(n)},[ne,n]),A.useEffect(()=>{typeof r<"u"&&ne!==null&&ne.setCenter(r)},[ne,r]),A.useEffect(()=>{ne&&o&&(xe!==null&&google.maps.event.removeListener(xe),$e(google.maps.event.addListener(ne,"dblclick",o)))},[o]),A.useEffect(()=>{ne&&_&&(Ee!==null&&google.maps.event.removeListener(Ee),Ne(google.maps.event.addListener(ne,"dragend",_)))},[_]),A.useEffect(()=>{ne&&S&&(Xe!==null&&google.maps.event.removeListener(Xe),ut(google.maps.event.addListener(ne,"dragstart",S)))},[S]),A.useEffect(()=>{ne&&P&&(pt!==null&&google.maps.event.removeListener(pt),gt(google.maps.event.addListener(ne,"mousedown",P)))},[P]),A.useEffect(()=>{ne&&M&&(wt!==null&&google.maps.event.removeListener(wt),je(google.maps.event.addListener(ne,"mousemove",M)))},[M]),A.useEffect(()=>{ne&&O&&(Qe!==null&&google.maps.event.removeListener(Qe),yt(google.maps.event.addListener(ne,"mouseout",O)))},[O]),A.useEffect(()=>{ne&&z&&(Oe!==null&&google.maps.event.removeListener(Oe),et(google.maps.event.addListener(ne,"mouseover",z)))},[z]),A.useEffect(()=>{ne&&B&&(Mt!==null&&google.maps.event.removeListener(Mt),Dt(google.maps.event.addListener(ne,"mouseup",B)))},[B]),A.useEffect(()=>{ne&&F&&(Ke!==null&&google.maps.event.removeListener(Ke),tr(google.maps.event.addListener(ne,"rightclick",F)))},[F]),A.useEffect(()=>{ne&&L&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(ne,"click",L)))},[L]),A.useEffect(()=>{ne&&K&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(ne,"drag",K)))},[K]),A.useEffect(()=>{ne&&Q&&(ir!==null&&google.maps.event.removeListener(ir),St(google.maps.event.addListener(ne,"center_changed",Q)))},[L]),A.useEffect(()=>{ne&&re&&(Gr!==null&&google.maps.event.removeListener(Gr),Tr(google.maps.event.addListener(ne,"radius_changed",re)))},[re]),A.useEffect(()=>{var wr=new google.maps.Circle(gb(gb({},t||tY),{},{map:he}));return typeof n=="number"&&wr.setRadius(n),typeof r<"u"&&wr.setCenter(r),typeof n=="number"&&wr.setRadius(n),typeof d<"u"&&wr.setVisible(d),typeof h<"u"&&wr.setEditable(h),typeof l<"u"&&wr.setDraggable(l),o&&$e(google.maps.event.addListener(wr,"dblclick",o)),_&&Ne(google.maps.event.addListener(wr,"dragend",_)),S&&ut(google.maps.event.addListener(wr,"dragstart",S)),P&&gt(google.maps.event.addListener(wr,"mousedown",P)),M&&je(google.maps.event.addListener(wr,"mousemove",M)),O&&yt(google.maps.event.addListener(wr,"mouseout",O)),z&&et(google.maps.event.addListener(wr,"mouseover",z)),B&&Dt(google.maps.event.addListener(wr,"mouseup",B)),F&&tr(google.maps.event.addListener(wr,"rightclick",F)),L&&$t(google.maps.event.addListener(wr,"click",L)),K&&Lt(google.maps.event.addListener(wr,"drag",K)),Q&&St(google.maps.event.addListener(wr,"center_changed",Q)),re&&Tr(google.maps.event.addListener(wr,"radius_changed",re)),be(wr),te&&te(wr),()=>{xe!==null&&google.maps.event.removeListener(xe),Ee!==null&&google.maps.event.removeListener(Ee),Xe!==null&&google.maps.event.removeListener(Xe),pt!==null&&google.maps.event.removeListener(pt),wt!==null&&google.maps.event.removeListener(wt),Qe!==null&&google.maps.event.removeListener(Qe),Oe!==null&&google.maps.event.removeListener(Oe),Mt!==null&&google.maps.event.removeListener(Mt),Ke!==null&&google.maps.event.removeListener(Ke),Ft!==null&&google.maps.event.removeListener(Ft),ir!==null&&google.maps.event.removeListener(ir),Gr!==null&&google.maps.event.removeListener(Gr),ae&&ae(wr),wr.setMap(null)}},[]),null}A.memo(rY);class nY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{circle:null}),jt(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var t=new google.maps.Circle(gb(gb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:vO,eventMap:yO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{circle:t}},this.setCircleCallback)}componentDidUpdate(t){this.state.circle!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:vO,eventMap:yO,prevProps:t,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var t;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Cn(this.registeredEvents),(t=this.state.circle)===null||t===void 0||t.setMap(null)}}render(){return null}}jt(nY,"contextType",on);function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var xO={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},bO={add(e,t){e.add(t)},addgeojson(e,t,r){e.addGeoJson(t,r)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,r,n){e.loadGeoJson(t,r,n)},overridestyle(e,t,r){e.overrideStyle(t,r)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};function iY(e){var{options:t,onClick:r,onDblClick:n,onMouseDown:l,onMouseMove:h,onMouseOut:d,onMouseOver:o,onMouseUp:_,onRightClick:S,onAddFeature:P,onRemoveFeature:M,onRemoveProperty:O,onSetGeometry:z,onSetProperty:B,onLoad:F,onUnmount:L}=e,K=A.useContext(on),[Q,re]=A.useState(null),[te,ae]=A.useState(null),[he,ne]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null);return A.useEffect(()=>{Q!==null&&Q.setMap(K)},[K]),A.useEffect(()=>{Q&&n&&(te!==null&&google.maps.event.removeListener(te),ae(google.maps.event.addListener(Q,"dblclick",n)))},[n]),A.useEffect(()=>{Q&&l&&(he!==null&&google.maps.event.removeListener(he),ne(google.maps.event.addListener(Q,"mousedown",l)))},[l]),A.useEffect(()=>{Q&&h&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(Q,"mousemove",h)))},[h]),A.useEffect(()=>{Q&&d&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(Q,"mouseout",d)))},[d]),A.useEffect(()=>{Q&&o&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(Q,"mouseover",o)))},[o]),A.useEffect(()=>{Q&&_&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(Q,"mouseup",_)))},[_]),A.useEffect(()=>{Q&&S&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(Q,"rightclick",S)))},[S]),A.useEffect(()=>{Q&&r&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(Q,"click",r)))},[r]),A.useEffect(()=>{Q&&P&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(Q,"addfeature",P)))},[P]),A.useEffect(()=>{Q&&M&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(Q,"removefeature",M)))},[M]),A.useEffect(()=>{Q&&O&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(Q,"removeproperty",O)))},[O]),A.useEffect(()=>{Q&&z&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(Q,"setgeometry",z)))},[z]),A.useEffect(()=>{Q&&B&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(Q,"setproperty",B)))},[B]),A.useEffect(()=>{if(K!==null){var Lt=new google.maps.Data(yb(yb({},t),{},{map:K}));n&&ae(google.maps.event.addListener(Lt,"dblclick",n)),l&&ne(google.maps.event.addListener(Lt,"mousedown",l)),h&&xe(google.maps.event.addListener(Lt,"mousemove",h)),d&&Ee(google.maps.event.addListener(Lt,"mouseout",d)),o&&Xe(google.maps.event.addListener(Lt,"mouseover",o)),_&&pt(google.maps.event.addListener(Lt,"mouseup",_)),S&&wt(google.maps.event.addListener(Lt,"rightclick",S)),r&&Qe(google.maps.event.addListener(Lt,"click",r)),P&&Oe(google.maps.event.addListener(Lt,"addfeature",P)),M&&Mt(google.maps.event.addListener(Lt,"removefeature",M)),O&&Ke(google.maps.event.addListener(Lt,"removeproperty",O)),z&&Ft(google.maps.event.addListener(Lt,"setgeometry",z)),B&&ct(google.maps.event.addListener(Lt,"setproperty",B)),re(Lt),F&&F(Lt)}return()=>{Q&&(te!==null&&google.maps.event.removeListener(te),he!==null&&google.maps.event.removeListener(he),be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),tr!==null&&google.maps.event.removeListener(tr),$t!==null&&google.maps.event.removeListener($t),L&&L(Q),Q.setMap(null))}},[]),null}A.memo(iY);class aY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{data:null}),jt(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var t=new google.maps.Data(yb(yb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:bO,eventMap:xO,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({data:t}),this.setDataCallback)}}componentDidUpdate(t){this.state.data!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:bO,eventMap:xO,prevProps:t,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Cn(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}jt(aY,"contextType",on);function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var PO={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},EO={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class oY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{kmlLayer:null}),jt(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var t=new google.maps.KmlLayer(SO(SO({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:EO,eventMap:PO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{kmlLayer:t}},this.setKmlLayerCallback)}componentDidUpdate(t){this.state.kmlLayer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:EO,eventMap:PO,prevProps:t,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Cn(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}jt(oY,"contextType",on);function cF(e,t){return typeof t=="function"?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function sY(e,t){return new t(e.lat,e.lng)}function lY(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function uY(e,t,r){return e instanceof t?e:r(e,t)}function cY(e,t,r){return e instanceof t?e:r(e,t)}function hY(e,t,r){var n=e&&e.fromLatLngToDivPixel(r.getNorthEast()),l=e&&e.fromLatLngToDivPixel(r.getSouthWest());return n&&l?{left:"".concat(l.x+t.x,"px"),top:"".concat(n.y+t.y,"px"),width:"".concat(n.x-l.x-t.x,"px"),height:"".concat(l.y-n.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}function dY(e,t,r){var n=e&&e.fromLatLngToDivPixel(r);if(n){var{x:l,y:h}=n;return{left:"".concat(l+t.x,"px"),top:"".concat(h+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}function hF(e,t,r,n){return r!==void 0?hY(e,t,cY(r,google.maps.LatLngBounds,lY)):dY(e,t,uY(n,google.maps.LatLng,sY))}function fY(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height}function CO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function pY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mY(e,t,r,n,l){class h extends google.maps.OverlayView{constructor(o,_,S,P){super(),this.container=o,this.pane=_,this.position=S,this.bounds=P}onAdd(){var o,_=(o=this.getPanes())===null||o===void 0?void 0:o[this.pane];_==null||_.appendChild(this.container)}draw(){var o=this.getProjection(),_=pY({},this.container?cF(this.container,l):{x:0,y:0}),S=hF(o,_,this.bounds,this.position);for(var[P,M]of Object.entries(S))this.container.style[P]=M}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new h(e,t,r,n)}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MO(e){if(!e)return"";var t=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng);return t+""}function kO(e){if(!e)return"";var t=e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west));return t+""}function yY(e){var{position:t,bounds:r,mapPaneName:n,zIndex:l,onLoad:h,onUnmount:d,getPixelPositionOffset:o,children:_}=e,S=A.useContext(on),P=A.useMemo(()=>{var O=document.createElement("div");return O.style.position="absolute",O},[]),M=A.useMemo(()=>mY(P,n,t,r,o),[P,n,t,r]);return A.useEffect(()=>(h==null||h(M),M==null||M.setMap(S),()=>{d==null||d(M),M==null||M.setMap(null)}),[S,M]),A.useEffect(()=>{P.style.zIndex="".concat(l)},[l,P]),Cc.createPortal(_,P)}A.memo(yY);class Uy extends A.PureComponent{constructor(t){super(t),jt(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),jt(this,"updatePane",()=>{var n=this.props.mapPaneName,l=this.overlayView.getPanes();Za(!!n,"OverlayView requires props.mapPaneName but got %s",n),l?this.setState({paneEl:l[n]}):this.setState({paneEl:null})}),jt(this,"onAdd",()=>{var n,l;this.updatePane(),(n=(l=this.props).onLoad)===null||n===void 0||n.call(l,this.overlayView)}),jt(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),l=gY({x:0,y:0},this.containerRef.current?cF(this.containerRef.current,this.props.getPixelPositionOffset):{}),h=hF(n,l,this.props.bounds,this.props.position);if(!fY(h,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var d,o,_,S;this.setState({containerStyle:{top:(d=h.top)!==null&&d!==void 0?d:0,left:(o=h.left)!==null&&o!==void 0?o:0,width:(_=h.width)!==null&&_!==void 0?_:0,height:(S=h.height)!==null&&S!==void 0?S:0,position:"absolute"}})}}),jt(this,"draw",()=>{this.onPositionElement()}),jt(this,"onRemove",()=>{var n,l;this.setState(()=>({paneEl:null})),(n=(l=this.props).onUnmount)===null||n===void 0||n.call(l,this.overlayView)}),this.containerRef=A.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(t){var r=MO(t.position),n=MO(this.props.position),l=kO(t.bounds),h=kO(this.props.bounds);(r!==n||l!==h)&&this.overlayView.draw(),t.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var t=this.state.paneEl;return t?Cc.createPortal($.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:A.Children.only(this.props.children)}),t):null}}jt(Uy,"FLOAT_PANE","floatPane");jt(Uy,"MAP_PANE","mapPane");jt(Uy,"MARKER_LAYER","markerLayer");jt(Uy,"OVERLAY_LAYER","overlayLayer");jt(Uy,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");jt(Uy,"contextType",on);function vY(){}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function IO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var OO={onDblClick:"dblclick",onClick:"click"},LO={opacity(e,t){e.setOpacity(t)}};function _Y(e){var{url:t,bounds:r,options:n,visible:l}=e,h=A.useContext(on),d=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),o=A.useMemo(()=>new google.maps.GroundOverlay(t,d,n),[]);return A.useEffect(()=>{o!==null&&o.setMap(h)},[h]),A.useEffect(()=>{typeof t<"u"&&o!==null&&(o.set("url",t),o.setMap(h))},[o,t]),A.useEffect(()=>{typeof l<"u"&&o!==null&&o.setOpacity(l?1:0)},[o,l]),A.useEffect(()=>{var _=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&o!==null&&(o.set("bounds",_),o.setMap(h))},[o,r]),null}A.memo(_Y);class dF extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{groundOverlay:null}),jt(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Za(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var t=new google.maps.GroundOverlay(this.props.url,this.props.bounds,IO(IO({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:LO,eventMap:OO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{groundOverlay:t}},this.setGroundOverlayCallback)}componentDidUpdate(t){this.state.groundOverlay!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:LO,eventMap:OO,prevProps:t,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}jt(dF,"defaultProps",{onLoad:vY});jt(dF,"contextType",on);function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var RO={},jO={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};function xY(e){var{data:t,onLoad:r,onUnmount:n,options:l}=e,h=A.useContext(on),[d,o]=A.useState(null);return A.useEffect(()=>{google.maps.visualization||Za(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),A.useEffect(()=>{Za(!!t,"data property is required in HeatmapLayer %s",t)},[t]),A.useEffect(()=>{d!==null&&d.setMap(h)},[h]),A.useEffect(()=>{l&&d!==null&&d.setOptions(l)},[d,l]),A.useEffect(()=>{var _=new google.maps.visualization.HeatmapLayer(vb(vb({},l),{},{data:t,map:h}));return o(_),r&&r(_),()=>{d!==null&&(n&&n(d),d.setMap(null))}},[]),null}A.memo(xY);class bY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{heatmapLayer:null}),jt(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Za(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Za(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var t=new google.maps.visualization.HeatmapLayer(vb(vb({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=xn({updaterMap:jO,eventMap:RO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{heatmapLayer:t}},this.setHeatmapLayerCallback)}componentDidUpdate(t){Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:jO,eventMap:RO,prevProps:t,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Cn(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}jt(bY,"contextType",on);var zO={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},NO={register(e,t,r){e.registerPanoProvider(t,r)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class wY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{streetViewPanorama:null}),jt(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var t,r,n=(t=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&t!==void 0?t:null;this.registeredEvents=xn({updaterMap:NO,eventMap:zO,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(t){this.state.streetViewPanorama!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:NO,eventMap:zO,prevProps:t,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Cn(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}jt(wY,"contextType",on);class SY extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{streetViewService:null}),jt(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var t=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:t}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}jt(SY,"contextType",on);var FO={onDirectionsChanged:"directions_changed"},BO={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class PY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{directionsRenderer:null}),jt(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var t=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=xn({updaterMap:BO,eventMap:FO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{directionsRenderer:t}},this.setDirectionsRendererCallback)}componentDidUpdate(t){this.state.directionsRenderer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:BO,eventMap:FO,prevProps:t,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Cn(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}jt(PY,"contextType",on);var VO={onPlacesChanged:"places_changed"},$O={bounds(e,t){e.setBounds(t)}};class EY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",A.createRef()),jt(this,"state",{searchBox:null}),jt(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Za(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var t=this.containerElement.current.querySelector("input");if(t!==null){var r=new google.maps.places.SearchBox(t,this.props.options);this.registeredEvents=xn({updaterMap:$O,eventMap:VO,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(t){this.state.searchBox!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:$O,eventMap:VO,prevProps:t,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Cn(this.registeredEvents))}render(){return $.jsx("div",{ref:this.containerElement,children:A.Children.only(this.props.children)})}}jt(EY,"contextType",on);var UO={onPlaceChanged:"place_changed"},qO={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class fF extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",A.createRef()),jt(this,"state",{autocomplete:null}),jt(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var t;Za(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(t=this.containerElement.current)===null||t===void 0?void 0:t.querySelector("input");if(r){var n=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=xn({updaterMap:qO,eventMap:UO,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(t){Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:qO,eventMap:UO,prevProps:t,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Cn(this.registeredEvents)}render(){return $.jsx("div",{ref:this.containerElement,className:this.props.className,children:A.Children.only(this.props.children)})}}jt(fF,"defaultProps",{className:""});jt(fF,"contextType",on);function CY(){var l;const e=(l=tl().state)==null?void 0:l.data,[t,r]=A.useState(),n=["places"];return $.jsxs("div",{className:"grid grid-cols-8 p-10 gap-8",children:[$.jsx("div",{className:"col-span-3 ",children:$.jsx(iF,{googleMapsApiKey:"AIzaSyA58I9jdRgr0_yQC8jG23iFIjK7w5wY_pA",libraries:n,children:$.jsx(NK,{vehicleData:e,setLocationCoordinates:r})})}),$.jsx("div",{className:"col-span-5",children:$.jsx(ZZ,{locationCoordinates:t})})]})}function TY(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["vehicles"],queryFn:async()=>(await e.get("/history/")).data});return{allHistory:t,isAllHistoryLoading:r,isAllHistoryError:n}}function MY(){return $.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-24 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"}),$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"})]})})]})}function kY({id:e}){const t=Mc(),{data:r,isLoading:n,isError:l}=zy({queryKey:["pdfExport"],queryFn:async()=>(await t.get(`/history/${e}/download/?type=pdf`)).data,enabled:!!e});return{pdfExport:r,isPdfExportLoading:n,isPdfExportError:l}}function AY({id:e}){const t=Mc(),{data:r,isLoading:n,isError:l}=zy({queryKey:["singleHistoryDetails"],queryFn:async()=>(await t.get(`/history/${e}/`)).data,enabled:!!e});return{singleHistoryDetails:r,isSingleHistoryDetailsLoading:n,isSingleHistoryDetailsError:l}}function IY(){return $.jsxs("div",{className:"p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-8",children:[$.jsx("div",{className:"h-8 bg-gray-200 rounded-full w-32 animate-pulse"}),$.jsx("div",{className:"h-4 bg-gray-200 rounded w-40 animate-pulse"})]}),$.jsxs("div",{className:"mb-8",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full animate-pulse"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-100 mt-1"})]}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-48 animate-pulse"})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full animate-pulse"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-100 mt-1"})]}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-56 animate-pulse"})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("div",{className:"flex flex-col items-center",children:$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"})}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-32 animate-pulse"})]})]})]})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[$.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-40 animate-pulse"})]}),$.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-48 animate-pulse"})]})]})]}),$.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),$.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 animate-pulse"})]}),$.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 animate-pulse"})]})]})]})]})]})}function OY({itemData:e,onClose:t}){const{singleHistoryDetails:r,isSingleHistoryDetailsLoading:n,isSingleHistoryDetailsError:l}=AY({id:e==null?void 0:e.id}),h=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=S=>{switch(S){case"completed":return"bg-green-100 text-green-800";case"running":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},o=S=>{switch(S){case"completed":return $.jsx(C7,{className:"w-5 h-5"});case"running":return $.jsx(d_,{className:"w-5 h-5"});case"pending":return $.jsx(d_,{className:"w-5 h-5"});default:return null}},_=S=>{const P=(S*.621371).toFixed(2);return`${S.toFixed(2)} km (${P} mi)`};return $.jsx("div",{className:"w-full h-full fixed top-0 left-0 backdrop-blur-[10px] bg-black/30 z-50 flex items-center justify-center p-4",children:$.jsxs("div",{className:"w-full max-w-[800px] bg-white border border-gray-200 rounded-2xl shadow-2xl",children:[$.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Trip Details"}),$.jsx("p",{className:"text-gray-500 mt-1",children:"Complete journey information"})]}),$.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:$.jsx(J7,{className:"w-6 h-6 text-gray-500"})})]}),n?$.jsx(IY,{}):$.jsxs("div",{className:"p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-8",children:[$.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${d(r==null?void 0:r.status)}`,children:[o(r==null?void 0:r.status),$.jsx("span",{className:"font-semibold capitalize",children:r==null?void 0:r.status})]}),$.jsxs("div",{className:"text-gray-500 text-sm",children:[$.jsx(S7,{className:"w-4 h-4 inline mr-2"}),h(r==null?void 0:r.created_at)]})]}),$.jsxs("div",{className:"mb-8",children:[$.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(F7,{className:"w-5 h-5"}),"Route"]}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-200 mt-1"})]}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Origin"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.origin})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-200 mt-1"})]}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Destination"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.destination})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("div",{className:"flex flex-col items-center",children:$.jsx(sN,{className:"w-5 h-5 text-red-500"})}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Total Distance"}),$.jsx("p",{className:"font-medium",children:_(r==null?void 0:r.total_distance_km)})]})]})]})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[$.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl",children:[$.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(aN,{className:"w-5 h-5"}),"Vehicle Details"]}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Model"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.vehicle})]}),$.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle Type"}),$.jsx("p",{className:"font-medium",children:"Electric Vehicle (EV)"})]})]})]}),$.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl",children:[$.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(b7,{className:"w-5 h-5"}),"Energy Consumption"]}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Energy Used"}),$.jsxs("p",{className:"font-medium text-2xl text-blue-600",children:[r==null?void 0:r.energy_used_kwh.toFixed(2)," kWh"]})]}),$.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Efficiency"}),$.jsxs("p",{className:"font-medium",children:[((r==null?void 0:r.total_distance_km)/(r==null?void 0:r.energy_used_kwh)).toFixed(2)," ","km/kWh"]})]})]})]})]})]}),l&&$.jsx("div",{className:"py-20 text-center text-black text-lg font-semibold",children:"Something went wrong! Please try again"})]})})}function LY(){var F;const[e,t]=A.useState(""),[r,n]=A.useState({show:!1,data:null}),{allHistory:l,isAllHistoryLoading:h,isAllHistoryError:d}=TY(),o=L=>{switch(L){case"running":return"bg-blue-100 text-blue-700 border border-blue-300";case"pending":return"bg-yellow-100 text-yellow-700 border border-yellow-300";case"completed":return"bg-green-100 text-green-700 border border-green-300";default:return"bg-gray-100 text-gray-700"}},_=(F=l==null?void 0:l.results)==null?void 0:F.filter(L=>(L==null?void 0:L.route_name.toLowerCase().includes(e.toLowerCase()))||(L==null?void 0:L.vehicle.toLowerCase().includes(e.toLowerCase()))),S=L=>{n({show:!0,data:L})},[P,M]=A.useState(null),{pdfExport:O,isPdfExportLoading:z}=kY({id:P});O&&O.download_url&&window.open(O.download_url,"_blank","noopener,noreferrer");const B=L=>{M(L==null?void 0:L.id)};return $.jsxs("div",{className:" bg-white rounded-lg mt-8 border p-8",children:[$.jsxs("div",{className:"",children:[$.jsxs("div",{className:"flex justify-between items-start mb-6",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Route Calculations History"}),$.jsx("p",{className:"text-gray-500",children:"View and manage EV route simulations"})]}),$.jsx(wc,{to:"/vechile",children:$.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium shadow-sm transition-colors",children:[$.jsx(U7,{size:20}),"New Ev Route Simulation"]})})]}),$.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6 p-4 flex gap-4",children:$.jsxs("div",{className:"flex-1 relative",children:[$.jsx(W7,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),$.jsx("input",{type:"text",placeholder:"Search the route name and vehicle",value:e,onChange:L=>t(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),$.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:$.jsxs("div",{className:"overflow-x-auto",children:[$.jsxs("table",{className:"w-full",children:[$.jsx("thead",{children:$.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Route Name"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Vehicle"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Date"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Distance"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Energy Usage"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),$.jsxs("tbody",{className:"divide-y divide-gray-200",children:[_==null?void 0:_.map((L,K)=>$.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L==null?void 0:L.route_name}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L==null?void 0:L.vehicle}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L==null?void 0:L.date}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L==null?void 0:L.distance_km}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:L==null?void 0:L.energy_kwh}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("span",{className:`inline-block px-4 py-1.5 rounded-md text-sm font-medium capitalize ${o(L==null?void 0:L.status)}`,children:L==null?void 0:L.status})}),$.jsx("td",{className:"px-6 py-4",children:$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("button",{onClick:()=>S(L),type:"button",className:"text-gray-600 hover:text-gray-900 transition-colors",children:$.jsx(I7,{size:20})}),$.jsx("button",{onClick:()=>B(L),type:"button",className:"text-gray-600 hover:text-gray-900 transition-colors",children:$.jsx(k7,{size:20})})]})})]},K)),(_==null?void 0:_.length)===0&&!h&&$.jsx("tr",{children:$.jsx("td",{colSpan:7,className:"px-6 py-10 text-sm text-gray-600 text-center",children:"No History Found!"})}),h&&!d&&$.jsx($.Fragment,{children:[...Array(5)].map((L,K)=>$.jsx(MY,{},K))})]})]}),d&&!h&&$.jsx("div",{className:"flex items-center justify-center py-20",children:$.jsx("p",{className:"text-xl text-black/60 font-semibold",children:"Something Went Wrong! Please Try Again!"})})]})})]}),z&&$.jsx(gp,{}),(r==null?void 0:r.show)&&$.jsx(OY,{itemData:r==null?void 0:r.data,onClose:()=>n({show:!1,data:null})})]})}function DY(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["historyAnalytics"],queryFn:async()=>(await e.get("/history/analytics/")).data});return{historyAnalytics:t,isHistoryAnalyticsLoading:r,isHistoryAnalyticsError:n}}function RY(){const{historyAnalytics:e}=DY(),t=[{id:1,title:"Total Distance",value:(e==null?void 0:e.total_distance_mi)||0,unit:"mi",extraInfo:"Route Optimized for efficiency",icon:lN},{id:2,title:"Energy Consumed",value:(e==null?void 0:e.total_energy_kwh)||0,unit:"kWh",extraInfo:`Avg. ${(e==null?void 0:e.avg_consumption_wh_per_mi)||0} Wh/mi`,icon:iN},{id:3,title:"Trip Duration",value:(e==null?void 0:e.avg_trip_duration)||0,extraInfo:"Includes 0 charging stops",icon:d_},{id:4,title:"Arrival SoC",value:(e==null?void 0:e.avg_arrival_soc)||0,extraInfo:"Started at 90%",icon:oN}];return $.jsx("div",{children:$.jsx("div",{className:"grid lg:grid-cols-4 gap-6",children:t==null?void 0:t.map(r=>$.jsxs("div",{className:"bg-white p-6 rounded-2xl border  space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-2 justify-between ",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title text-[#4F586D]! ",children:r==null?void 0:r.title}),$.jsxs("p",{className:"paragraph mt-4 text-lg font-medium",children:[$.jsx("span",{className:"text-[32px] text-black",children:r==null?void 0:r.value})," ",r==null?void 0:r.unit]})]}),$.jsx("div",{className:"bg-gray-200 p-2 rounded-full flex items-center justify-center",children:$.jsx(r.icon,{size:24})})]}),$.jsxs("p",{className:"paragraph mt-2 flex items-center gap-2",children:[$.jsx("span",{className:"text-[#20A157]",children:$.jsx(uN,{})})," ",r==null?void 0:r.extraInfo]})]},r==null?void 0:r.id))})})}function jY(){return $.jsxs("div",{className:"p-10",children:[$.jsx(RY,{}),$.jsx(LY,{})]})}function zY(e){return kw({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M133,124.64a6,6,0,0,1,.6,5.59l-16,40a6,6,0,1,1-11.14-4.46L119.14,134H96a6,6,0,0,1-5.57-8.23l16-40a6,6,0,0,1,11.14,4.46L104.86,122H128A6,6,0,0,1,133,124.64Zm113-38V168a22,22,0,0,1-44,0V128a10,10,0,0,0-10-10H174v92h18a6,6,0,0,1,0,12H32a6,6,0,0,1,0-12H50V56A22,22,0,0,1,72,34h80a22,22,0,0,1,22,22v50h18a22,22,0,0,1,22,22v40a10,10,0,0,0,20,0V86.63a9.93,9.93,0,0,0-2.93-7.07L211.76,60.24a6,6,0,0,1,8.48-8.48l19.32,19.31A21.88,21.88,0,0,1,246,86.63ZM162,210V56a10,10,0,0,0-10-10H72A10,10,0,0,0,62,56V210Z"},child:[]}]})(e)}function NY({ChargingStops:e}){return $.jsxs("div",{className:"w-full bg-white p-6 rounded-lg border",children:[$.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[$.jsx(zY,{size:26,className:"text-gray-600"}),$.jsx("h2",{className:"title",children:"Charging Stops"})]}),$.jsxs("div",{className:"w-full h-full space-y-4",children:[e==null?void 0:e.map((t,r)=>$.jsxs("div",{className:"rounded-xl border p-4 bg-[#F1FAF7] flex flex-col gap-2",children:[$.jsxs("p",{className:"font-semibold text-gray-800",children:["Station name: ",t==null?void 0:t.name]}),$.jsxs("div",{className:"flex items-start justify-between text-sm text-gray-700",children:[$.jsxs("div",{children:[$.jsxs("p",{children:["Charger power: ",t==null?void 0:t.charger_power_kw," KW"]}),$.jsxs("p",{className:"text-[#4CBF82] font-medium",children:["Arrival Battery: ",t==null?void 0:t.arrival_soc]})]}),$.jsxs("div",{className:"text-right",children:[$.jsxs("p",{children:["Distance: ",t==null?void 0:t.distance_from_route_km," km"]}),$.jsxs("p",{children:["Charging Time: ",t==null?void 0:t.charge_time_min," min"]})]})]})]},r)),(e==null?void 0:e.length)===0&&$.jsx("div",{className:"w-full h-full flex items-center justify-center text-lg font-medium",children:"No charging stops found."})]})]})}var FY=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function OC(e){if(typeof e!="string")return!1;var t=FY;return t.includes(e)}var BY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],VY=new Set(BY);function pF(e){return typeof e!="string"?!1:VY.has(e)}function mF(e){return typeof e=="string"&&e.startsWith("data-")}function vu(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(pF(r)||mF(r))&&(t[r]=e[r]);return t}function G_(e){if(e==null)return null;if(A.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vu(t)}return typeof e=="object"&&!Array.isArray(e)?vu(e):null}function Ps(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(pF(r)||mF(r)||OC(r))&&(t[r]=e[r]);return t}function $Y(e){return e==null?null:A.isValidElement(e)?Ps(e.props):typeof e=="object"&&!Array.isArray(e)?Ps(e):null}var UY=["children","width","height","viewBox","className","style","title","desc"];function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nE.apply(null,arguments)}function qY(e,t){if(e==null)return{};var r,n,l=GY(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function GY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LC=A.forwardRef((e,t)=>{var{children:r,width:n,height:l,viewBox:h,className:d,style:o,title:_,desc:S}=e,P=qY(e,UY),M=h||{width:n,height:l,x:0,y:0},O=Hn("recharts-surface",d);return A.createElement("svg",nE({},Ps(P),{className:O,width:n,height:l,style:o,viewBox:"".concat(M.x," ").concat(M.y," ").concat(M.width," ").concat(M.height),ref:t}),A.createElement("title",null,_),A.createElement("desc",null,S),r)}),WY=["children","className"];function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iE.apply(null,arguments)}function HY(e,t){if(e==null)return{};var r,n,l=ZY(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ZY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Es=A.forwardRef((e,t)=>{var{children:r,className:n}=e,l=HY(e,WY),h=Hn("recharts-layer",n);return A.createElement("g",iE({className:h},Ps(l),{ref:t}),r)}),gF=A.createContext(null),KY=()=>A.useContext(gF);function wi(e){return function(){return e}}const yF=Math.cos,_b=Math.sin,kc=Math.sqrt,xb=Math.PI,Dw=2*xb,aE=Math.PI,oE=2*aE,Sm=1e-6,XY=oE-Sm;function vF(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function YY(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vF;const r=10**t;return function(n){this._+=n[0];for(let l=1,h=n.length;l<h;++l)this._+=Math.round(arguments[l]*r)/r+n[l]}}class QY{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vF:YY(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,l){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+l}`}bezierCurveTo(t,r,n,l,h,d){this._append`C${+t},${+r},${+n},${+l},${this._x1=+h},${this._y1=+d}`}arcTo(t,r,n,l,h){if(t=+t,r=+r,n=+n,l=+l,h=+h,h<0)throw new Error(`negative radius: ${h}`);let d=this._x1,o=this._y1,_=n-t,S=l-r,P=d-t,M=o-r,O=P*P+M*M;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(O>Sm)if(!(Math.abs(M*_-S*P)>Sm)||!h)this._append`L${this._x1=t},${this._y1=r}`;else{let z=n-d,B=l-o,F=_*_+S*S,L=z*z+B*B,K=Math.sqrt(F),Q=Math.sqrt(O),re=h*Math.tan((aE-Math.acos((F+O-L)/(2*K*Q)))/2),te=re/Q,ae=re/K;Math.abs(te-1)>Sm&&this._append`L${t+te*P},${r+te*M}`,this._append`A${h},${h},0,0,${+(M*z>P*B)},${this._x1=t+ae*_},${this._y1=r+ae*S}`}}arc(t,r,n,l,h,d){if(t=+t,r=+r,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(l),_=n*Math.sin(l),S=t+o,P=r+_,M=1^d,O=d?l-h:h-l;this._x1===null?this._append`M${S},${P}`:(Math.abs(this._x1-S)>Sm||Math.abs(this._y1-P)>Sm)&&this._append`L${S},${P}`,n&&(O<0&&(O=O%oE+oE),O>XY?this._append`A${n},${n},0,1,${M},${t-o},${r-_}A${n},${n},0,1,${M},${this._x1=S},${this._y1=P}`:O>Sm&&this._append`A${n},${n},0,${+(O>=aE)},${M},${this._x1=t+n*Math.cos(h)},${this._y1=r+n*Math.sin(h)}`)}rect(t,r,n,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+l}h${-n}Z`}toString(){return this._}}function DC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new QY(t)}function RC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _F(e){this._context=e}_F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rw(e){return new _F(e)}function xF(e){return e[0]}function bF(e){return e[1]}function wF(e,t){var r=wi(!0),n=null,l=Rw,h=null,d=DC(o);e=typeof e=="function"?e:e===void 0?xF:wi(e),t=typeof t=="function"?t:t===void 0?bF:wi(t);function o(_){var S,P=(_=RC(_)).length,M,O=!1,z;for(n==null&&(h=l(z=d())),S=0;S<=P;++S)!(S<P&&r(M=_[S],S,_))===O&&((O=!O)?h.lineStart():h.lineEnd()),O&&h.point(+e(M,S,_),+t(M,S,_));if(z)return h=null,z+""||null}return o.x=function(_){return arguments.length?(e=typeof _=="function"?_:wi(+_),o):e},o.y=function(_){return arguments.length?(t=typeof _=="function"?_:wi(+_),o):t},o.defined=function(_){return arguments.length?(r=typeof _=="function"?_:wi(!!_),o):r},o.curve=function(_){return arguments.length?(l=_,n!=null&&(h=l(n)),o):l},o.context=function(_){return arguments.length?(_==null?n=h=null:h=l(n=_),o):n},o}function px(e,t,r){var n=null,l=wi(!0),h=null,d=Rw,o=null,_=DC(S);e=typeof e=="function"?e:e===void 0?xF:wi(+e),t=typeof t=="function"?t:wi(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?bF:wi(+r);function S(M){var O,z,B,F=(M=RC(M)).length,L,K=!1,Q,re=new Array(F),te=new Array(F);for(h==null&&(o=d(Q=_())),O=0;O<=F;++O){if(!(O<F&&l(L=M[O],O,M))===K)if(K=!K)z=O,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),B=O-1;B>=z;--B)o.point(re[B],te[B]);o.lineEnd(),o.areaEnd()}K&&(re[O]=+e(L,O,M),te[O]=+t(L,O,M),o.point(n?+n(L,O,M):re[O],r?+r(L,O,M):te[O]))}if(Q)return o=null,Q+""||null}function P(){return wF().defined(l).curve(d).context(h)}return S.x=function(M){return arguments.length?(e=typeof M=="function"?M:wi(+M),n=null,S):e},S.x0=function(M){return arguments.length?(e=typeof M=="function"?M:wi(+M),S):e},S.x1=function(M){return arguments.length?(n=M==null?null:typeof M=="function"?M:wi(+M),S):n},S.y=function(M){return arguments.length?(t=typeof M=="function"?M:wi(+M),r=null,S):t},S.y0=function(M){return arguments.length?(t=typeof M=="function"?M:wi(+M),S):t},S.y1=function(M){return arguments.length?(r=M==null?null:typeof M=="function"?M:wi(+M),S):r},S.lineX0=S.lineY0=function(){return P().x(e).y(t)},S.lineY1=function(){return P().x(e).y(r)},S.lineX1=function(){return P().x(n).y(t)},S.defined=function(M){return arguments.length?(l=typeof M=="function"?M:wi(!!M),S):l},S.curve=function(M){return arguments.length?(d=M,h!=null&&(o=d(h)),S):d},S.context=function(M){return arguments.length?(M==null?h=o=null:o=d(h=M),S):h},S}class SF{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function JY(e){return new SF(e,!0)}function eQ(e){return new SF(e,!1)}const jC={draw(e,t){const r=kc(t/xb);e.moveTo(r,0),e.arc(0,0,r,0,Dw)}},tQ={draw(e,t){const r=kc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},PF=kc(1/3),rQ=PF*2,nQ={draw(e,t){const r=kc(t/rQ),n=r*PF;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},iQ={draw(e,t){const r=kc(t),n=-r/2;e.rect(n,n,r,r)}},aQ=.8908130915292852,EF=_b(xb/10)/_b(7*xb/10),oQ=_b(Dw/10)*EF,sQ=-yF(Dw/10)*EF,lQ={draw(e,t){const r=kc(t*aQ),n=oQ*r,l=sQ*r;e.moveTo(0,-r),e.lineTo(n,l);for(let h=1;h<5;++h){const d=Dw*h/5,o=yF(d),_=_b(d);e.lineTo(_*r,-o*r),e.lineTo(o*n-_*l,_*n+o*l)}e.closePath()}},NS=kc(3),uQ={draw(e,t){const r=-kc(t/(NS*3));e.moveTo(0,r*2),e.lineTo(-NS*r,-r),e.lineTo(NS*r,-r),e.closePath()}},ou=-.5,su=kc(3)/2,sE=1/kc(12),cQ=(sE/2+1)*3,hQ={draw(e,t){const r=kc(t/cQ),n=r/2,l=r*sE,h=n,d=r*sE+r,o=-h,_=d;e.moveTo(n,l),e.lineTo(h,d),e.lineTo(o,_),e.lineTo(ou*n-su*l,su*n+ou*l),e.lineTo(ou*h-su*d,su*h+ou*d),e.lineTo(ou*o-su*_,su*o+ou*_),e.lineTo(ou*n+su*l,ou*l-su*n),e.lineTo(ou*h+su*d,ou*d-su*h),e.lineTo(ou*o+su*_,ou*_-su*o),e.closePath()}};function dQ(e,t){let r=null,n=DC(l);e=typeof e=="function"?e:wi(e||jC),t=typeof t=="function"?t:wi(t===void 0?64:+t);function l(){let h;if(r||(r=h=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),h)return r=null,h+""||null}return l.type=function(h){return arguments.length?(e=typeof h=="function"?h:wi(h),l):e},l.size=function(h){return arguments.length?(t=typeof h=="function"?h:wi(+h),l):t},l.context=function(h){return arguments.length?(r=h??null,l):r},l}function bb(){}function wb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function CF(e){this._context=e}CF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fQ(e){return new CF(e)}function TF(e){this._context=e}TF.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pQ(e){return new TF(e)}function MF(e){this._context=e}MF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mQ(e){return new MF(e)}function kF(e){this._context=e}kF.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function gQ(e){return new kF(e)}function GO(e){return e<0?-1:1}function WO(e,t,r){var n=e._x1-e._x0,l=t-e._x1,h=(e._y1-e._y0)/(n||l<0&&-0),d=(r-e._y1)/(l||n<0&&-0),o=(h*l+d*n)/(n+l);return(GO(h)+GO(d))*Math.min(Math.abs(h),Math.abs(d),.5*Math.abs(o))||0}function HO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function FS(e,t,r){var n=e._x0,l=e._y0,h=e._x1,d=e._y1,o=(h-n)/3;e._context.bezierCurveTo(n+o,l+o*t,h-o,d-o*r,h,d)}function Sb(e){this._context=e}Sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FS(this,this._t0,HO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,FS(this,HO(this,r=WO(this,e,t)),r);break;default:FS(this,this._t0,r=WO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function AF(e){this._context=new IF(e)}(AF.prototype=Object.create(Sb.prototype)).point=function(e,t){Sb.prototype.point.call(this,t,e)};function IF(e){this._context=e}IF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,l,h){this._context.bezierCurveTo(t,e,n,r,h,l)}};function yQ(e){return new Sb(e)}function vQ(e){return new AF(e)}function OF(e){this._context=e}OF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=ZO(e),l=ZO(t),h=0,d=1;d<r;++h,++d)this._context.bezierCurveTo(n[0][h],l[0][h],n[1][h],l[1][h],e[d],t[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ZO(e){var t,r=e.length-1,n,l=new Array(r),h=new Array(r),d=new Array(r);for(l[0]=0,h[0]=2,d[0]=e[0]+2*e[1],t=1;t<r-1;++t)l[t]=1,h[t]=4,d[t]=4*e[t]+2*e[t+1];for(l[r-1]=2,h[r-1]=7,d[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=l[t]/h[t-1],h[t]-=n,d[t]-=n*d[t-1];for(l[r-1]=d[r-1]/h[r-1],t=r-2;t>=0;--t)l[t]=(d[t]-l[t+1])/h[t];for(h[r-1]=(e[r]+l[r-1])/2,t=0;t<r-1;++t)h[t]=2*e[t+1]-l[t+1];return[l,h]}function _Q(e){return new OF(e)}function jw(e,t){this._context=e,this._t=t}jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function xQ(e){return new jw(e,.5)}function bQ(e){return new jw(e,0)}function wQ(e){return new jw(e,1)}function Cy(e,t){if((d=e.length)>1)for(var r=1,n,l,h=e[t[0]],d,o=h.length;r<d;++r)for(l=h,h=e[t[r]],n=0;n<o;++n)h[n][1]+=h[n][0]=isNaN(l[n][1])?l[n][0]:l[n][1]}function lE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function SQ(e,t){return e[t]}function PQ(e){const t=[];return t.key=e,t}function EQ(){var e=wi([]),t=lE,r=Cy,n=SQ;function l(h){var d=Array.from(e.apply(this,arguments),PQ),o,_=d.length,S=-1,P;for(const M of h)for(o=0,++S;o<_;++o)(d[o][S]=[0,+n(M,d[o].key,S,h)]).data=M;for(o=0,P=RC(t(d));o<_;++o)d[P[o]].index=o;return r(d,P),d}return l.keys=function(h){return arguments.length?(e=typeof h=="function"?h:wi(Array.from(h)),l):e},l.value=function(h){return arguments.length?(n=typeof h=="function"?h:wi(+h),l):n},l.order=function(h){return arguments.length?(t=h==null?lE:typeof h=="function"?h:wi(Array.from(h)),l):t},l.offset=function(h){return arguments.length?(r=h??Cy,l):r},l}function CQ(e,t){if((n=e.length)>0){for(var r,n,l=0,h=e[0].length,d;l<h;++l){for(d=r=0;r<n;++r)d+=e[r][l][1]||0;if(d)for(r=0;r<n;++r)e[r][l][1]/=d}Cy(e,t)}}function TQ(e,t){if((l=e.length)>0){for(var r=0,n=e[t[0]],l,h=n.length;r<h;++r){for(var d=0,o=0;d<l;++d)o+=e[d][r][1]||0;n[r][1]+=n[r][0]=-o/2}Cy(e,t)}}function MQ(e,t){if(!(!((d=e.length)>0)||!((h=(l=e[t[0]]).length)>0))){for(var r=0,n=1,l,h,d;n<h;++n){for(var o=0,_=0,S=0;o<d;++o){for(var P=e[t[o]],M=P[n][1]||0,O=P[n-1][1]||0,z=(M-O)/2,B=0;B<o;++B){var F=e[t[B]],L=F[n][1]||0,K=F[n-1][1]||0;z+=L-K}_+=M,S+=z*M}l[n-1][1]+=l[n-1][0]=r,_&&(r-=S/_)}l[n-1][1]+=l[n-1][0]=r,Cy(e,t)}}var BS={},VS={},KO;function kQ(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(VS)),VS}var $S={},XO;function LF(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})($S)),$S}var US={},YO;function zC(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(US)),US}var qS={},GS={},QO;function AQ(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(GS)),GS}var JO;function NC(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AQ(),r=zC();function n(l){if(Array.isArray(l))return l.map(r.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const h=[],d=l.length;if(d===0)return h;let o=0,_="",S="",P=!1;for(l.charCodeAt(0)===46&&(h.push(""),o++);o<d;){const M=l[o];S?M==="\\"&&o+1<d?(o++,_+=l[o]):M===S?S="":_+=M:P?M==='"'||M==="'"?S=M:M==="]"?(P=!1,h.push(_),_=""):_+=M:M==="["?(P=!0,_&&(h.push(_),_="")):M==="."?_&&(h.push(_),_=""):_+=M,o++}return _&&h.push(_),h}e.toPath=n})(qS)),qS}var eL;function FC(){return eL||(eL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kQ(),r=LF(),n=zC(),l=NC();function h(o,_,S){if(o==null)return S;switch(typeof _){case"string":{if(t.isUnsafeProperty(_))return S;const P=o[_];return P===void 0?r.isDeepKey(_)?h(o,l.toPath(_),S):S:P}case"number":case"symbol":{typeof _=="number"&&(_=n.toKey(_));const P=o[_];return P===void 0?S:P}default:{if(Array.isArray(_))return d(o,_,S);if(Object.is(_==null?void 0:_.valueOf(),-0)?_="-0":_=String(_),t.isUnsafeProperty(_))return S;const P=o[_];return P===void 0?S:P}}}function d(o,_,S){if(_.length===0)return S;let P=o;for(let M=0;M<_.length;M++){if(P==null||t.isUnsafeProperty(_[M]))return S;P=P[_[M]]}return P===void 0?S:P}e.get=h})(BS)),BS}var WS,tL;function IQ(){return tL||(tL=1,WS=FC().get),WS}var OQ=IQ();const Ty=Ph(OQ);var Ys=e=>e===0?0:e>0?1:-1,_u=e=>typeof e=="number"&&e!=+e,Id=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_r=e=>(typeof e=="number"||e instanceof Number)&&!_u(e),bh=e=>_r(e)||typeof e=="string",LQ=0,p_=e=>{var t=++LQ;return"".concat(e||"").concat(t)},Pc=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_r(t)&&typeof t!="string")return n;var h;if(Id(t)){if(r==null)return n;var d=t.indexOf("%");h=r*parseFloat(t.slice(0,d))/100}else h=+t;return _u(h)&&(h=n),l&&r!=null&&h>r&&(h=r),h},DF=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Hi(e,t,r){return _r(e)&&_r(t)?e+r*(t-e):t}function RF(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ty(n,t))===r)}var Zi=e=>e===null||typeof e>"u",W_=e=>Zi(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function DQ(e){return e!=null}function H_(){}var RQ=["type","size","sizeType"];function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uE.apply(null,arguments)}function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function nL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){jQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jQ(e,t,r){return(t=zQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zQ(e){var t=NQ(e,"string");return typeof t=="symbol"?t:t+""}function NQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FQ(e,t){if(e==null)return{};var r,n,l=BQ(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function BQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jF={symbolCircle:jC,symbolCross:tQ,symbolDiamond:nQ,symbolSquare:iQ,symbolStar:lQ,symbolTriangle:uQ,symbolWye:hQ},VQ=Math.PI/180,$Q=e=>{var t="symbol".concat(W_(e));return jF[t]||jC},UQ=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*VQ;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},qQ=(e,t)=>{jF["symbol".concat(W_(e))]=t},BC=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,l=FQ(e,RQ),h=nL(nL({},l),{},{type:t,size:r,sizeType:n}),d="circle";typeof t=="string"&&(d=t);var o=()=>{var O=$Q(d),z=dQ().type(O).size(UQ(r,n,d)),B=z();if(B!==null)return B},{className:_,cx:S,cy:P}=h,M=Ps(h);return _r(S)&&_r(P)&&_r(r)?A.createElement("path",uE({},M,{className:Hn("recharts-symbols",_),transform:"translate(".concat(S,", ").concat(P,")"),d:o()})):null};BC.registerSymbol=qQ;var zF=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,VC=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(l=>{OC(l)&&(n[l]=(h=>r[l](r,h)))}),n},GQ=(e,t,r)=>n=>(e(t,r,n),null),zw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(l=>{var h=e[l];OC(l)&&typeof h=="function"&&(n||(n={}),n[l]=GQ(h,t,r))}),n};function iL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function WQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(r),!0).forEach(function(n){HQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HQ(e,t,r){return(t=ZQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZQ(e){var t=KQ(e,"string");return typeof t=="symbol"?t:t+""}function KQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(e,t){var r=WQ({},e),n=t,l=Object.keys(t),h=l.reduce((d,o)=>(d[o]===void 0&&n[o]!==void 0&&(d[o]=n[o]),d),r);return h}function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(null,arguments)}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function XQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){YQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YQ(e,t,r){return(t=QQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQ(e){var t=JQ(e,"string");return typeof t=="symbol"?t:t+""}function JQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cu=32,eJ={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function tJ(e){var{data:t,iconType:r,inactiveColor:n}=e,l=cu/2,h=cu/6,d=cu/3,o=t.inactive?n:t.color,_=r??t.type;if(_==="none")return null;if(_==="plainline"){var S;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(S=t.payload)===null||S===void 0?void 0:S.strokeDasharray,x1:0,y1:l,x2:cu,y2:l,className:"recharts-legend-icon"})}if(_==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(l,"h").concat(d,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*d,",").concat(l,`
            H`).concat(cu,"M").concat(2*d,",").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(d,",").concat(l),className:"recharts-legend-icon"});if(_==="rect")return A.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(cu/8,"h").concat(cu,"v").concat(cu*3/4,"h").concat(-cu,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var P=XQ({},t);return delete P.legendIcon,A.cloneElement(t.legendIcon,P)}return A.createElement(BC,{fill:o,cx:l,cy:l,size:cu,sizeType:"diameter",type:_})}function rJ(e){var{payload:t,iconSize:r,layout:n,formatter:l,inactiveColor:h,iconType:d}=e,o={x:0,y:0,width:cu,height:cu},_={display:n==="horizontal"?"inline-block":"block",marginRight:10},S={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((P,M)=>{var O=P.formatter||l,z=Hn({"recharts-legend-item":!0,["legend-item-".concat(M)]:!0,inactive:P.inactive});if(P.type==="none")return null;var B=P.inactive?h:P.color,F=O?O(P.value,P,M):P.value;return A.createElement("li",Pb({className:z,style:_,key:"legend-item-".concat(M)},zw(e,P,M)),A.createElement(LC,{width:r,height:r,viewBox:o,style:S,"aria-label":"".concat(F," legend icon")},A.createElement(tJ,{data:P,iconType:d,inactiveColor:h})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:B}},F))})}var nJ=e=>{var t=Ao(e,eJ),{payload:r,layout:n,align:l}=t;if(!r||!r.length)return null;var h={padding:0,margin:0,textAlign:n==="horizontal"?l:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:h},A.createElement(rJ,Pb({},t,{payload:r})))},HS={},ZS={},oL;function iJ(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const l=new Map;for(let h=0;h<r.length;h++){const d=r[h],o=n(d);l.has(o)||l.set(o,d)}return Array.from(l.values())}e.uniqBy=t})(ZS)),ZS}var KS={},sL;function NF(){return sL||(sL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(KS)),KS}var XS={},YS={},QS={},lL;function aJ(){return lL||(lL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(QS)),QS}var uL;function $C(){return uL||(uL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aJ();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(YS)),YS}var JS={},cL;function oJ(){return cL||(cL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(JS)),JS}var hL;function sJ(){return hL||(hL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$C(),r=oJ();function n(l){return r.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=n})(XS)),XS}var eP={},tP={},dL;function lJ(){return dL||(dL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FC();function r(n){return function(l){return t.get(l,n)}}e.property=r})(tP)),tP}var rP={},nP={},iP={},aP={},fL;function FF(){return fL||(fL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(aP)),aP}var oP={},pL;function BF(){return pL||(pL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(oP)),oP}var sP={},mL;function VF(){return mL||(mL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(sP)),sP}var gL;function uJ(){return gL||(gL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FF(),r=BF(),n=VF();function l(P,M,O){return typeof O!="function"?l(P,M,()=>{}):h(P,M,function z(B,F,L,K,Q,re){const te=O(B,F,L,K,Q,re);return te!==void 0?!!te:h(B,F,z,re)},new Map)}function h(P,M,O,z){if(M===P)return!0;switch(typeof M){case"object":return d(P,M,O,z);case"function":return Object.keys(M).length>0?h(P,{...M},O,z):n.eq(P,M);default:return t.isObject(P)?typeof M=="string"?M==="":!0:n.eq(P,M)}}function d(P,M,O,z){if(M==null)return!0;if(Array.isArray(M))return _(P,M,O,z);if(M instanceof Map)return o(P,M,O,z);if(M instanceof Set)return S(P,M,O,z);const B=Object.keys(M);if(P==null)return B.length===0;if(B.length===0)return!0;if(z!=null&&z.has(M))return z.get(M)===P;z==null||z.set(M,P);try{for(let F=0;F<B.length;F++){const L=B[F];if(!r.isPrimitive(P)&&!(L in P)||M[L]===void 0&&P[L]!==void 0||M[L]===null&&P[L]!==null||!O(P[L],M[L],L,P,M,z))return!1}return!0}finally{z==null||z.delete(M)}}function o(P,M,O,z){if(M.size===0)return!0;if(!(P instanceof Map))return!1;for(const[B,F]of M.entries()){const L=P.get(B);if(O(L,F,B,P,M,z)===!1)return!1}return!0}function _(P,M,O,z){if(M.length===0)return!0;if(!Array.isArray(P))return!1;const B=new Set;for(let F=0;F<M.length;F++){const L=M[F];let K=!1;for(let Q=0;Q<P.length;Q++){if(B.has(Q))continue;const re=P[Q];let te=!1;if(O(re,L,F,P,M,z)&&(te=!0),te){B.add(Q),K=!0;break}}if(!K)return!1}return!0}function S(P,M,O,z){return M.size===0?!0:P instanceof Set?_([...P],[...M],O,z):!1}e.isMatchWith=l,e.isSetMatch=S})(iP)),iP}var yL;function $F(){return yL||(yL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uJ();function r(n,l){return t.isMatchWith(n,l,()=>{})}e.isMatch=r})(nP)),nP}var lP={},uP={},cP={},vL;function cJ(){return vL||(vL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(cP)),cP}var hP={},_L;function UF(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(hP)),hP}var dP={},xL;function qF(){return xL||(xL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",l="[object Boolean]",h="[object Arguments]",d="[object Symbol]",o="[object Date]",_="[object Map]",S="[object Set]",P="[object Array]",M="[object Function]",O="[object ArrayBuffer]",z="[object Object]",B="[object Error]",F="[object DataView]",L="[object Uint8Array]",K="[object Uint8ClampedArray]",Q="[object Uint16Array]",re="[object Uint32Array]",te="[object BigUint64Array]",ae="[object Int8Array]",he="[object Int16Array]",ne="[object Int32Array]",be="[object BigInt64Array]",xe="[object Float32Array]",$e="[object Float64Array]";e.argumentsTag=h,e.arrayBufferTag=O,e.arrayTag=P,e.bigInt64ArrayTag=be,e.bigUint64ArrayTag=te,e.booleanTag=l,e.dataViewTag=F,e.dateTag=o,e.errorTag=B,e.float32ArrayTag=xe,e.float64ArrayTag=$e,e.functionTag=M,e.int16ArrayTag=he,e.int32ArrayTag=ne,e.int8ArrayTag=ae,e.mapTag=_,e.numberTag=n,e.objectTag=z,e.regexpTag=t,e.setTag=S,e.stringTag=r,e.symbolTag=d,e.uint16ArrayTag=Q,e.uint32ArrayTag=re,e.uint8ArrayTag=L,e.uint8ClampedArrayTag=K})(dP)),dP}var fP={},bL;function hJ(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(fP)),fP}var wL;function GF(){return wL||(wL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cJ(),r=UF(),n=qF(),l=BF(),h=hJ();function d(P,M){return o(P,void 0,P,new Map,M)}function o(P,M,O,z=new Map,B=void 0){const F=B==null?void 0:B(P,M,O,z);if(F!==void 0)return F;if(l.isPrimitive(P))return P;if(z.has(P))return z.get(P);if(Array.isArray(P)){const L=new Array(P.length);z.set(P,L);for(let K=0;K<P.length;K++)L[K]=o(P[K],K,O,z,B);return Object.hasOwn(P,"index")&&(L.index=P.index),Object.hasOwn(P,"input")&&(L.input=P.input),L}if(P instanceof Date)return new Date(P.getTime());if(P instanceof RegExp){const L=new RegExp(P.source,P.flags);return L.lastIndex=P.lastIndex,L}if(P instanceof Map){const L=new Map;z.set(P,L);for(const[K,Q]of P)L.set(K,o(Q,K,O,z,B));return L}if(P instanceof Set){const L=new Set;z.set(P,L);for(const K of P)L.add(o(K,void 0,O,z,B));return L}if(typeof Buffer<"u"&&Buffer.isBuffer(P))return P.subarray();if(h.isTypedArray(P)){const L=new(Object.getPrototypeOf(P)).constructor(P.length);z.set(P,L);for(let K=0;K<P.length;K++)L[K]=o(P[K],K,O,z,B);return L}if(P instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&P instanceof SharedArrayBuffer)return P.slice(0);if(P instanceof DataView){const L=new DataView(P.buffer.slice(0),P.byteOffset,P.byteLength);return z.set(P,L),_(L,P,O,z,B),L}if(typeof File<"u"&&P instanceof File){const L=new File([P],P.name,{type:P.type});return z.set(P,L),_(L,P,O,z,B),L}if(typeof Blob<"u"&&P instanceof Blob){const L=new Blob([P],{type:P.type});return z.set(P,L),_(L,P,O,z,B),L}if(P instanceof Error){const L=new P.constructor;return z.set(P,L),L.message=P.message,L.name=P.name,L.stack=P.stack,L.cause=P.cause,_(L,P,O,z,B),L}if(P instanceof Boolean){const L=new Boolean(P.valueOf());return z.set(P,L),_(L,P,O,z,B),L}if(P instanceof Number){const L=new Number(P.valueOf());return z.set(P,L),_(L,P,O,z,B),L}if(P instanceof String){const L=new String(P.valueOf());return z.set(P,L),_(L,P,O,z,B),L}if(typeof P=="object"&&S(P)){const L=Object.create(Object.getPrototypeOf(P));return z.set(P,L),_(L,P,O,z,B),L}return P}function _(P,M,O=P,z,B){const F=[...Object.keys(M),...t.getSymbols(M)];for(let L=0;L<F.length;L++){const K=F[L],Q=Object.getOwnPropertyDescriptor(P,K);(Q==null||Q.writable)&&(P[K]=o(M[K],K,O,z,B))}}function S(P){switch(r.getTag(P)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=o,e.copyProperties=_})(uP)),uP}var SL;function dJ(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(lP)),lP}var PL;function fJ(){return PL||(PL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$F(),r=dJ();function n(l){return l=r.cloneDeep(l),h=>t.isMatch(h,l)}e.matches=n})(rP)),rP}var pP={},mP={},gP={},EL;function pJ(){return EL||(EL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF(),r=qF();function n(l,h){return t.cloneDeepWith(l,(d,o,_,S)=>{const P=h==null?void 0:h(d,o,_,S);if(P!==void 0)return P;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case r.numberTag:case r.stringTag:case r.booleanTag:{const M=new l.constructor(l==null?void 0:l.valueOf());return t.copyProperties(M,l),M}case r.argumentsTag:{const M={};return t.copyProperties(M,l),M.length=l.length,M[Symbol.iterator]=l[Symbol.iterator],M}default:return}})}e.cloneDeepWith=n})(gP)),gP}var CL;function mJ(){return CL||(CL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pJ();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(mP)),mP}var yP={},vP={},TL;function WF(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,l=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<l;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(vP)),vP}var _P={},ML;function gJ(){return ML||(ML=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UF();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(_P)),_P}var kL;function yJ(){return kL||(kL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LF(),r=WF(),n=gJ(),l=NC();function h(d,o){let _;if(Array.isArray(o)?_=o:typeof o=="string"&&t.isDeepKey(o)&&(d==null?void 0:d[o])==null?_=l.toPath(o):_=[o],_.length===0)return!1;let S=d;for(let P=0;P<_.length;P++){const M=_[P];if((S==null||!Object.hasOwn(S,M))&&!((Array.isArray(S)||n.isArguments(S))&&r.isIndex(M)&&M<S.length))return!1;S=S[M]}return!0}e.has=h})(yP)),yP}var AL;function vJ(){return AL||(AL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$F(),r=zC(),n=mJ(),l=FC(),h=yJ();function d(o,_){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return _=n.cloneDeep(_),function(S){const P=l.get(S,o);return P===void 0?h.has(S,o):_===void 0?P===void 0:t.isMatch(P,_)}}e.matchesProperty=d})(pP)),pP}var IL;function _J(){return IL||(IL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NF(),r=lJ(),n=fJ(),l=vJ();function h(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?l.matchesProperty(d[0],d[1]):n.matches(d);case"string":case"symbol":case"number":return r.property(d)}}e.iteratee=h})(eP)),eP}var OL;function xJ(){return OL||(OL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iJ(),r=NF(),n=sJ(),l=_J();function h(d,o=r.identity){return n.isArrayLikeObject(d)?t.uniqBy(Array.from(d),l.iteratee(o)):[]}e.uniqBy=h})(HS)),HS}var xP,LL;function bJ(){return LL||(LL=1,xP=xJ().uniqBy),xP}var wJ=bJ();const DL=Ph(wJ);function HF(e,t,r){return t===!0?DL(e,r):typeof t=="function"?DL(e,t):e}var bP={exports:{}},wP={},SP={exports:{}},PP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RL;function SJ(){if(RL)return PP;RL=1;var e=Dy();function t(M,O){return M===O&&(M!==0||1/M===1/O)||M!==M&&O!==O}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,l=e.useEffect,h=e.useLayoutEffect,d=e.useDebugValue;function o(M,O){var z=O(),B=n({inst:{value:z,getSnapshot:O}}),F=B[0].inst,L=B[1];return h(function(){F.value=z,F.getSnapshot=O,_(F)&&L({inst:F})},[M,z,O]),l(function(){return _(F)&&L({inst:F}),M(function(){_(F)&&L({inst:F})})},[M]),d(z),z}function _(M){var O=M.getSnapshot;M=M.value;try{var z=O();return!r(M,z)}catch{return!0}}function S(M,O){return O()}var P=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:o;return PP.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:P,PP}var jL;function PJ(){return jL||(jL=1,SP.exports=SJ()),SP.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL;function EJ(){if(zL)return wP;zL=1;var e=Dy(),t=PJ();function r(S,P){return S===P&&(S!==0||1/S===1/P)||S!==S&&P!==P}var n=typeof Object.is=="function"?Object.is:r,l=t.useSyncExternalStore,h=e.useRef,d=e.useEffect,o=e.useMemo,_=e.useDebugValue;return wP.useSyncExternalStoreWithSelector=function(S,P,M,O,z){var B=h(null);if(B.current===null){var F={hasValue:!1,value:null};B.current=F}else F=B.current;B=o(function(){function K(he){if(!Q){if(Q=!0,re=he,he=O(he),z!==void 0&&F.hasValue){var ne=F.value;if(z(ne,he))return te=ne}return te=he}if(ne=te,n(re,he))return ne;var be=O(he);return z!==void 0&&z(ne,be)?(re=he,ne):(re=he,te=be)}var Q=!1,re,te,ae=M===void 0?null:M;return[function(){return K(P())},ae===null?void 0:function(){return K(ae())}]},[P,M,O,z]);var L=l(S,B[0],B[1]);return d(function(){F.hasValue=!0,F.value=L},[L]),_(L),L},wP}var NL;function CJ(){return NL||(NL=1,bP.exports=EJ()),bP.exports}var TJ=CJ(),UC=A.createContext(null),MJ=e=>e,Ki=()=>{var e=A.useContext(UC);return e?e.store.dispatch:MJ},Fx=()=>{},kJ=()=>Fx,AJ=(e,t)=>e===t;function Or(e){var t=A.useContext(UC);return TJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:kJ,t?t.store.getState:Fx,t?t.store.getState:Fx,t?e:Fx,AJ)}var EP={},CP={},TP={},FL;function IJ(){return FL||(FL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,l,h)=>{if(n!==l){const d=t(n),o=t(l);if(d===o&&d===0){if(n<l)return h==="desc"?1:-1;if(n>l)return h==="desc"?-1:1}return h==="desc"?o-d:d-o}return 0};e.compareValues=r})(TP)),TP}var MP={},kP={},BL;function ZF(){return BL||(BL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(kP)),kP}var VL;function OJ(){return VL||(VL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZF(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function l(h,d){return Array.isArray(h)?!1:typeof h=="number"||typeof h=="boolean"||h==null||t.isSymbol(h)?!0:typeof h=="string"&&(n.test(h)||!r.test(h))||d!=null&&Object.hasOwn(d,h)}e.isKey=l})(MP)),MP}var $L;function LJ(){return $L||($L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IJ(),r=OJ(),n=NC();function l(h,d,o,_){if(h==null)return[];o=_?void 0:o,Array.isArray(h)||(h=Object.values(h)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(z=>String(z));const S=(z,B)=>{let F=z;for(let L=0;L<B.length&&F!=null;++L)F=F[B[L]];return F},P=(z,B)=>B==null||z==null?B:typeof z=="object"&&"key"in z?Object.hasOwn(B,z.key)?B[z.key]:S(B,z.path):typeof z=="function"?z(B):Array.isArray(z)?S(B,z):typeof B=="object"?B[z]:B,M=d.map(z=>(Array.isArray(z)&&z.length===1&&(z=z[0]),z==null||typeof z=="function"||Array.isArray(z)||r.isKey(z)?z:{key:z,path:n.toPath(z)}));return h.map(z=>({original:z,criteria:M.map(B=>P(B,z))})).slice().sort((z,B)=>{for(let F=0;F<M.length;F++){const L=t.compareValues(z.criteria[F],B.criteria[F],o[F]);if(L!==0)return L}return 0}).map(z=>z.original)}e.orderBy=l})(CP)),CP}var AP={},UL;function DJ(){return UL||(UL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const l=[],h=Math.floor(n),d=(o,_)=>{for(let S=0;S<o.length;S++){const P=o[S];Array.isArray(P)&&_<h?d(P,_+1):l.push(P)}};return d(r,0),l}e.flatten=t})(AP)),AP}var IP={},qL;function KF(){return qL||(qL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WF(),r=$C(),n=FF(),l=VF();function h(d,o,_){return n.isObject(_)&&(typeof o=="number"&&r.isArrayLike(_)&&t.isIndex(o)&&o<_.length||typeof o=="string"&&o in _)?l.eq(_[o],d):!1}e.isIterateeCall=h})(IP)),IP}var GL;function RJ(){return GL||(GL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LJ(),r=DJ(),n=KF();function l(h,...d){const o=d.length;return o>1&&n.isIterateeCall(h,d[0],d[1])?d=[]:o>2&&n.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(h,r.flatten(d),["asc"])}e.sortBy=l})(EP)),EP}var OP,WL;function jJ(){return WL||(WL=1,OP=RJ().sortBy),OP}var zJ=jJ();const Nw=Ph(zJ);var XF=e=>e.legend.settings,NJ=e=>e.legend.size,FJ=e=>e.legend.payload,BJ=Tt([FJ,XF],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Nw(n,r):n});function VJ(){return Or(BJ)}var mx=1;function YF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=A.useState({height:0,left:0,top:0,width:0}),n=A.useCallback(l=>{if(l!=null){var h=l.getBoundingClientRect(),d={height:h.height,left:h.left,top:h.top,width:h.width};(Math.abs(d.height-t.height)>mx||Math.abs(d.left-t.left)>mx||Math.abs(d.top-t.top)>mx||Math.abs(d.width-t.width)>mx)&&r({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}var $J={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},QF=Yo({name:"chartLayout",initialState:$J,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,l,h;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(h=t.payload.left)!==null&&h!==void 0?h:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:UJ,setLayout:qJ,setChartSize:GJ,setScale:WJ}=QF.actions,HJ=QF.reducer;function JF(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(n){ZJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZJ(e,t,r){return(t=KJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KJ(e){var t=XJ(e,"string");return typeof t=="symbol"?t:t+""}function XJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(e,t,r){return Zi(e)||Zi(t)?r:bh(t)?Ty(e,t,r):typeof t=="function"?t(e):r}var YJ=(e,t,r)=>{if(t&&r){var{width:n,height:l}=r,{align:h,verticalAlign:d,layout:o}=t;if((o==="vertical"||o==="horizontal"&&d==="middle")&&h!=="center"&&_r(e[h]))return ny(ny({},e),{},{[h]:e[h]+(n||0)});if((o==="horizontal"||o==="vertical"&&h==="center")&&d!=="middle"&&_r(e[d]))return ny(ny({},e),{},{[d]:e[d]+(l||0)})}return e},zd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",eB=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var l,h,d=e.map(o=>(o.coordinate===t&&(l=!0),o.coordinate===r&&(h=!0),o.coordinate));return l||d.push(t),h||d.push(r),d},tB=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:l,range:h,scale:d,realScaleType:o,isCategorical:_,categoricalDomain:S,tickCount:P,ticks:M,niceTicks:O,axisType:z}=e;if(!d)return null;var B=o==="scaleBand"&&d.bandwidth?d.bandwidth()/2:2,F=l==="category"&&d.bandwidth?d.bandwidth()/B:0;if(F=z==="angleAxis"&&h&&h.length>=2?Ys(h[0]-h[1])*2*F:F,M||O){var L=(M||O||[]).map((K,Q)=>{var re=n?n.indexOf(K):K;return{coordinate:d(re)+F,value:K,offset:F,index:Q}});return L.filter(K=>!_u(K.coordinate))}return _&&S?S.map((K,Q)=>({coordinate:d(K)+F,value:K,index:Q,offset:F})):d.ticks&&P!=null?d.ticks(P).map((K,Q)=>({coordinate:d(K)+F,value:K,offset:F,index:Q})):d.domain().map((K,Q)=>({coordinate:d(K)+F,value:n?n[K]:K,index:Q,offset:F}))},ZL=1e-4,QJ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),l=Math.min(n[0],n[1])-ZL,h=Math.max(n[0],n[1])+ZL,d=e(t[0]),o=e(t[r-1]);(d<l||d>h||o<l||o>h)&&e.domain([t[0],t[r-1]])}},JJ=(e,t)=>{if(!t||t.length!==2||!_r(t[0])||!_r(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!_r(e[0])||e[0]<r)&&(l[0]=r),(!_r(e[1])||e[1]>n)&&(l[1]=n),l[0]>n&&(l[0]=n),l[1]<r&&(l[1]=r),l},eee=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var l=0,h=0,d=0;d<t;++d){var o=_u(e[d][r][1])?e[d][r][0]:e[d][r][1];o>=0?(e[d][r][0]=l,e[d][r][1]=l+o,l=e[d][r][1]):(e[d][r][0]=h,e[d][r][1]=h+o,h=e[d][r][1])}},tee=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var l=0,h=0;h<t;++h){var d=_u(e[h][r][1])?e[h][r][0]:e[h][r][1];d>=0?(e[h][r][0]=l,e[h][r][1]=l+d,l=e[h][r][1]):(e[h][r][0]=0,e[h][r][1]=0)}},ree={sign:eee,expand:CQ,none:Cy,silhouette:TQ,wiggle:MQ,positive:tee},nee=(e,t,r)=>{var n=ree[r],l=EQ().keys(t).value((h,d)=>Number(Ha(h,d,0))).order(lE).offset(n);return l(e)};function rB(e){return e==null?void 0:String(e)}function KL(e){var{axis:t,ticks:r,bandSize:n,entry:l,index:h,dataKey:d}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Zi(l[t.dataKey])){var o=RF(r,"value",l[t.dataKey]);if(o)return o.coordinate+n/2}return r[h]?r[h].coordinate+n/2:null}var _=Ha(l,Zi(d)?t.dataKey:d);return Zi(_)?null:t.scale(_)}var XL=e=>{var{axis:t,ticks:r,offset:n,bandSize:l,entry:h,index:d}=e;if(t.type==="category")return r[d]?r[d].coordinate+n:null;var o=Ha(h,t.dataKey,t.scale.domain()[d]);return Zi(o)?null:t.scale(o)-l/2+n},iee=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return n<=0&&l>=0?0:l<0?l:n}return r[0]},aee=e=>{var t=e.flat(2).filter(_r);return[Math.min(...t),Math.max(...t)]},oee=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],see=(e,t,r)=>{if(e!=null)return oee(Object.keys(e).reduce((n,l)=>{var h=e[l],{stackedData:d}=h,o=d.reduce((_,S)=>{var P=JF(S,t,r),M=aee(P);return[Math.min(_[0],M[0]),Math.max(_[1],M[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},YL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,QL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,My=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var l=Nw(t,P=>P.coordinate),h=1/0,d=1,o=l.length;d<o;d++){var _=l[d],S=l[d-1];h=Math.min((_.coordinate||0)-(S.coordinate||0),h)}return h===1/0?0:h}return r?void 0:0};function JL(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:l,name:h}=e;return ny(ny({},t),{},{dataKey:r,payload:n,value:l,name:h})}function Fw(e,t){if(e)return String(e);if(typeof t=="string")return t}var lee=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},uee=(e,t)=>t==="centric"?e.angle:e.radius,Nd=e=>e.layout.width,Fd=e=>e.layout.height,cee=e=>e.layout.scale,nB=e=>e.layout.margin,Bw=Tt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vw=Tt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hee="data-recharts-item-index",dee="data-recharts-item-data-key",Z_=60;function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){fee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fee(e,t,r){return(t=pee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=mee(e,"string");return typeof t=="symbol"?t:t+""}function mee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gee=e=>e.brush.height;function yee(e){var t=Vw(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:Z_;return r+l}return r},0)}function vee(e){var t=Vw(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var l=typeof n.width=="number"?n.width:Z_;return r+l}return r},0)}function _ee(e){var t=Bw(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function xee(e){var t=Bw(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var bo=Tt([Nd,Fd,nB,gee,yee,vee,_ee,xee,XF,NJ],(e,t,r,n,l,h,d,o,_,S)=>{var P={left:(r.left||0)+l,right:(r.right||0)+h},M={top:(r.top||0)+d,bottom:(r.bottom||0)+o},O=gx(gx({},M),P),z=O.bottom;O.bottom+=n,O=YJ(O,_,S);var B=e-O.left-O.right,F=t-O.top-O.bottom;return gx(gx({brushBottom:z},O),{},{width:Math.max(B,0),height:Math.max(F,0)})}),bee=Tt(bo,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),qC=Tt(Nd,Fd,(e,t)=>({x:0,y:0,width:e,height:t})),wee=A.createContext(null),Qo=()=>A.useContext(wee)!=null,$w=e=>e.brush,Uw=Tt([$w,bo,nB],(e,t,r)=>({height:e.height,x:_r(e.x)?e.x:t.left,y:_r(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:_r(e.width)?e.width:t.width})),LP={},DP={},RP={},tD;function See(){return tD||(tD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:l,edges:h}={}){let d,o=null;const _=h!=null&&h.includes("leading"),S=h==null||h.includes("trailing"),P=()=>{o!==null&&(r.apply(d,o),d=void 0,o=null)},M=()=>{S&&P(),F()};let O=null;const z=()=>{O!=null&&clearTimeout(O),O=setTimeout(()=>{O=null,M()},n)},B=()=>{O!==null&&(clearTimeout(O),O=null)},F=()=>{B(),d=void 0,o=null},L=()=>{P()},K=function(...Q){if(l!=null&&l.aborted)return;d=this,o=Q;const re=O==null;z(),_&&re&&P()};return K.schedule=z,K.cancel=F,K.flush=L,l==null||l.addEventListener("abort",F,{once:!0}),K}e.debounce=t})(RP)),RP}var rD;function Pee(){return rD||(rD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=See();function r(n,l=0,h={}){typeof h!="object"&&(h={});const{leading:d=!1,trailing:o=!0,maxWait:_}=h,S=Array(2);d&&(S[0]="leading"),o&&(S[1]="trailing");let P,M=null;const O=t.debounce(function(...F){P=n.apply(this,F),M=null},l,{edges:S}),z=function(...F){return _!=null&&(M===null&&(M=Date.now()),Date.now()-M>=_)?(P=n.apply(this,F),M=Date.now(),O.cancel(),O.schedule(),P):(O.apply(this,F),P)},B=()=>(O.flush(),P);return z.cancel=O.cancel,z.flush=B,z}e.debounce=r})(DP)),DP}var nD;function Eee(){return nD||(nD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pee();function r(n,l=0,h={}){const{leading:d=!0,trailing:o=!0}=h;return t.debounce(n,l,{leading:d,maxWait:l,trailing:o})}e.throttle=r})(LP)),LP}var jP,iD;function Cee(){return iD||(iD=1,jP=Eee().throttle),jP}var Tee=Cee();const Mee=Ph(Tee);var Eb=function(t,r){for(var n=arguments.length,l=new Array(n>2?n-2:0),h=2;h<n;h++)l[h-2]=arguments[h];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(r.replace(/%s/g,()=>l[d++]))}},iB=(e,t,r)=>{var{width:n="100%",height:l="100%",aspect:h,maxHeight:d}=r,o=Id(n)?e:Number(n),_=Id(l)?t:Number(l);return h&&h>0&&(o?_=o/h:_&&(o=_*h),d&&_!=null&&_>d&&(_=d)),{calculatedWidth:o,calculatedHeight:_}},kee={width:0,height:0,overflow:"visible"},Aee={width:0,overflowX:"visible"},Iee={height:0,overflowY:"visible"},Oee={},Lee=e=>{var{width:t,height:r}=e,n=Id(t),l=Id(r);return n&&l?kee:n?Aee:l?Iee:Oee};function Dee(e){var{width:t,height:r,aspect:n}=e,l=t,h=r;return l===void 0&&h===void 0?(l="100%",h="100%"):l===void 0?l=n&&n>0?void 0:"100%":h===void 0&&(h=n&&n>0?void 0:"100%"),{width:l,height:h}}function Ai(e){return Number.isFinite(e)}function wh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function cE(){return cE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cE.apply(null,arguments)}function aD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function oD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(r),!0).forEach(function(n){Ree(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ree(e,t,r){return(t=jee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e){var t=zee(e,"string");return typeof t=="symbol"?t:t+""}function zee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aB=A.createContext({width:-1,height:-1});function Nee(e){return wh(e.width)&&wh(e.height)}function oB(e){var{children:t,width:r,height:n}=e,l=A.useMemo(()=>({width:r,height:n}),[r,n]);return Nee(l)?A.createElement(aB.Provider,{value:l},t):null}var GC=()=>A.useContext(aB),Fee=A.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:l,height:h,minWidth:d=0,minHeight:o,maxHeight:_,children:S,debounce:P=0,id:M,className:O,onResize:z,style:B={}}=e,F=A.useRef(null),L=A.useRef();L.current=z,A.useImperativeHandle(t,()=>F.current);var[K,Q]=A.useState({containerWidth:n.width,containerHeight:n.height}),re=A.useCallback((be,xe)=>{Q($e=>{var Ee=Math.round(be),Ne=Math.round(xe);return $e.containerWidth===Ee&&$e.containerHeight===Ne?$e:{containerWidth:Ee,containerHeight:Ne}})},[]);A.useEffect(()=>{if(F.current==null||typeof ResizeObserver>"u")return H_;var be=Ne=>{var Xe,{width:ut,height:pt}=Ne[0].contentRect;re(ut,pt),(Xe=L.current)===null||Xe===void 0||Xe.call(L,ut,pt)};P>0&&(be=Mee(be,P,{trailing:!0,leading:!1}));var xe=new ResizeObserver(be),{width:$e,height:Ee}=F.current.getBoundingClientRect();return re($e,Ee),xe.observe(F.current),()=>{xe.disconnect()}},[re,P]);var{containerWidth:te,containerHeight:ae}=K;Eb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:he,calculatedHeight:ne}=iB(te,ae,{width:l,height:h,aspect:r,maxHeight:_});return Eb(he!=null&&he>0||ne!=null&&ne>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,he,ne,l,h,d,o,r),A.createElement("div",{id:M?"".concat(M):void 0,className:Hn("recharts-responsive-container",O),style:oD(oD({},B),{},{width:l,height:h,minWidth:d,minHeight:o,maxHeight:_}),ref:F},A.createElement("div",{style:Lee({width:l,height:h})},A.createElement(oB,{width:he,height:ne},S)))}),sB=A.forwardRef((e,t)=>{var r=GC();if(wh(r.width)&&wh(r.height))return e.children;var{width:n,height:l}=Dee({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:h,calculatedHeight:d}=iB(void 0,void 0,{width:n,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return _r(h)&&_r(d)?A.createElement(oB,{width:h,height:d},e.children):A.createElement(Fee,cE({},e,{width:n,height:l,ref:t}))});function lB(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var qw=()=>{var e,t=Qo(),r=Or(bee),n=Or(Uw),l=(e=Or($w))===null||e===void 0?void 0:e.padding;return!t||!n||!l?r:{width:n.width-l.left-l.right,height:n.height-l.top-l.bottom,x:l.left,y:l.top}},Bee={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},uB=()=>{var e;return(e=Or(bo))!==null&&e!==void 0?e:Bee},WC=()=>Or(Nd),HC=()=>Or(Fd),Vee=()=>Or(e=>e.layout.margin),Bn=e=>e.layout.layoutType,qy=()=>Or(Bn),$ee=()=>{var e=qy();if(e==="horizontal"||e==="vertical")return e},Uee=()=>{var e=qy();return e!==void 0},Gw=e=>{var t=Ki(),r=Qo(),{width:n,height:l}=e,h=GC(),d=n,o=l;return h&&(d=h.width>0?h.width:n,o=h.height>0?h.height:l),A.useEffect(()=>{!r&&wh(d)&&wh(o)&&t(GJ({width:d,height:o}))},[t,r,d,o]),null},cB=Symbol.for("immer-nothing"),sD=Symbol.for("immer-draftable"),Il=Symbol.for("immer-state");function _c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var m_=Object.getPrototypeOf;function ky(e){return!!e&&!!e[Il]}function Ym(e){var t;return e?hB(e)||Array.isArray(e)||!!e[sD]||!!((t=e.constructor)!=null&&t[sD])||K_(e)||Hw(e):!1}var qee=Object.prototype.constructor.toString(),lD=new WeakMap;function hB(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=lD.get(r);return n===void 0&&(n=Function.toString.call(r),lD.set(r,n)),n===qee}function Cb(e,t,r=!0){Ww(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((n,l)=>t(l,n,e))}function Ww(e){const t=e[Il];return t?t.type_:Array.isArray(e)?1:K_(e)?2:Hw(e)?3:0}function hE(e,t){return Ww(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dB(e,t,r){const n=Ww(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Gee(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function K_(e){return e instanceof Map}function Hw(e){return e instanceof Set}function Pm(e){return e.copy_||e.base_}function dE(e,t){if(K_(e))return new Map(e);if(Hw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=hB(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Il];let l=Reflect.ownKeys(n);for(let h=0;h<l.length;h++){const d=l[h],o=n[d];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[d]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[d]})}return Object.create(m_(e),n)}else{const n=m_(e);if(n!==null&&r)return{...e};const l=Object.create(n);return Object.assign(l,e)}}function ZC(e,t=!1){return Zw(e)||ky(e)||!Ym(e)||(Ww(e)>1&&Object.defineProperties(e,{set:yx,add:yx,clear:yx,delete:yx}),Object.freeze(e),t&&Object.values(e).forEach(r=>ZC(r,!0))),e}function Wee(){_c(2)}var yx={value:Wee};function Zw(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Hee={};function Qm(e){const t=Hee[e];return t||_c(0,e),t}var g_;function fB(){return g_}function Zee(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uD(e,t){t&&(Qm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fE(e){pE(e),e.drafts_.forEach(Kee),e.drafts_=null}function pE(e){e===g_&&(g_=e.parent_)}function cD(e){return g_=Zee(g_,e)}function Kee(e){const t=e[Il];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hD(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Il].modified_&&(fE(t),_c(4)),Ym(e)&&(e=Tb(t,e),t.parent_||Mb(t,e)),t.patches_&&Qm("Patches").generateReplacementPatches_(r[Il].base_,e,t.patches_,t.inversePatches_)):e=Tb(t,r,[]),fE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cB?e:void 0}function Tb(e,t,r){if(Zw(t))return t;const n=e.immer_.shouldUseStrictIteration(),l=t[Il];if(!l)return Cb(t,(h,d)=>dD(e,l,t,h,d,r),n),t;if(l.scope_!==e)return t;if(!l.modified_)return Mb(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const h=l.copy_;let d=h,o=!1;l.type_===3&&(d=new Set(h),h.clear(),o=!0),Cb(d,(_,S)=>dD(e,l,h,_,S,r,o),n),Mb(e,h,!1),r&&e.patches_&&Qm("Patches").generatePatches_(l,r,e.patches_,e.inversePatches_)}return l.copy_}function dD(e,t,r,n,l,h,d){if(l==null||typeof l!="object"&&!d)return;const o=Zw(l);if(!(o&&!d)){if(ky(l)){const _=h&&t&&t.type_!==3&&!hE(t.assigned_,n)?h.concat(n):void 0,S=Tb(e,l,_);if(dB(r,n,S),ky(S))e.canAutoFreeze_=!1;else return}else d&&r.add(l);if(Ym(l)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===l&&o)return;Tb(e,l),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(K_(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Mb(e,l)}}}function Mb(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ZC(t,r)}function Xee(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=n,h=KC;r&&(l=[n],h=y_);const{revoke:d,proxy:o}=Proxy.revocable(l,h);return n.draft_=o,n.revoke_=d,o}var KC={get(e,t){if(t===Il)return e;const r=Pm(e);if(!hE(r,t))return Yee(e,r,t);const n=r[t];return e.finalized_||!Ym(n)?n:n===zP(e.base_,t)?(NP(e),e.copy_[t]=gE(n,e)):n},has(e,t){return t in Pm(e)},ownKeys(e){return Reflect.ownKeys(Pm(e))},set(e,t,r){const n=pB(Pm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const l=zP(Pm(e),t),h=l==null?void 0:l[Il];if(h&&h.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Gee(r,l)&&(r!==void 0||hE(e.base_,t)))return!0;NP(e),mE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return zP(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,NP(e),mE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Pm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){_c(11)},getPrototypeOf(e){return m_(e.base_)},setPrototypeOf(){_c(12)}},y_={};Cb(KC,(e,t)=>{y_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});y_.deleteProperty=function(e,t){return y_.set.call(this,e,t,void 0)};y_.set=function(e,t,r){return KC.set.call(this,e[0],t,r,e[0])};function zP(e,t){const r=e[Il];return(r?Pm(r):e)[t]}function Yee(e,t,r){var l;const n=pB(t,r);return n?"value"in n?n.value:(l=n.get)==null?void 0:l.call(e.draft_):void 0}function pB(e,t){if(!(t in e))return;let r=m_(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=m_(r)}}function mE(e){e.modified_||(e.modified_=!0,e.parent_&&mE(e.parent_))}function NP(e){e.copy_||(e.copy_=dE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Qee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const h=r;r=t;const d=this;return function(_=h,...S){return d.produce(_,P=>r.call(this,P,...S))}}typeof r!="function"&&_c(6),n!==void 0&&typeof n!="function"&&_c(7);let l;if(Ym(t)){const h=cD(this),d=gE(t,void 0);let o=!0;try{l=r(d),o=!1}finally{o?fE(h):pE(h)}return uD(h,n),hD(l,h)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===cB&&(l=void 0),this.autoFreeze_&&ZC(l,!0),n){const h=[],d=[];Qm("Patches").generateReplacementPatches_(t,l,h,d),n(h,d)}return l}else _c(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...o)=>this.produceWithPatches(d,_=>t(_,...o));let n,l;return[this.produce(t,r,(d,o)=>{n=d,l=o}),n,l]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ym(e)||_c(8),ky(e)&&(e=Jee(e));const t=cD(this),r=gE(e,void 0);return r[Il].isManual_=!0,pE(t),r}finishDraft(e,t){const r=e&&e[Il];(!r||!r.isManual_)&&_c(9);const{scope_:n}=r;return uD(n,t),hD(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const n=Qm("Patches").applyPatches_;return ky(e)?n(e,t):this.produce(e,l=>n(l,t))}};function gE(e,t){const r=K_(e)?Qm("MapSet").proxyMap_(e,t):Hw(e)?Qm("MapSet").proxySet_(e,t):Xee(e,t);return(t?t.scope_:fB()).drafts_.push(r),r}function Jee(e){return ky(e)||_c(10,e),mB(e)}function mB(e){if(!Ym(e)||Zw(e))return e;const t=e[Il];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=dE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=dE(e,!0);return Cb(r,(l,h)=>{dB(r,l,mB(h))},n),t&&(t.finalized_=!1),r}var ete=new Qee;ete.produce;var tte={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gB=Yo({name:"legend",initialState:tte,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Bi()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,l=bc(e).payload.indexOf(r);l>-1&&(e.payload[l]=n)},prepare:Bi()},removeLegendPayload:{reducer(e,t){var r=bc(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Bi()}}}),{setLegendSize:fD,setLegendSettings:rte,addLegendPayload:nte,replaceLegendPayload:ite,removeLegendPayload:ate}=gB.actions,ote=gB.reducer,ste=["contextPayload"];function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yE.apply(null,arguments)}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){lte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lte(e,t,r){return(t=ute(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ute(e){var t=cte(e,"string");return typeof t=="symbol"?t:t+""}function cte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hte(e,t){if(e==null)return{};var r,n,l=dte(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function dte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fte(e){return e.value}function pte(e){var{contextPayload:t}=e,r=hte(e,ste),n=HF(t,e.payloadUniqBy,fte),l=Ay(Ay({},r),{},{payload:n});return A.isValidElement(e.content)?A.cloneElement(e.content,l):typeof e.content=="function"?A.createElement(e.content,l):A.createElement(nJ,l)}function mte(e,t,r,n,l,h){var{layout:d,align:o,verticalAlign:_}=t,S,P;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&d==="vertical"?S={left:((n||0)-h.width)/2}:S=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(_==="middle"?P={top:((l||0)-h.height)/2}:P=_==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ay(Ay({},S),P)}function gte(e){var t=Ki();return A.useEffect(()=>{t(rte(e))},[t,e]),null}function yte(e){var t=Ki();return A.useEffect(()=>(t(fD(e)),()=>{t(fD({width:0,height:0}))}),[t,e]),null}function vte(e,t,r,n){return e==="vertical"&&_r(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var _te={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function yB(e){var t=Ao(e,_te),r=VJ(),n=KY(),l=Vee(),{width:h,height:d,wrapperStyle:o,portal:_}=t,[S,P]=YF([r]),M=WC(),O=HC();if(M==null||O==null)return null;var z=M-((l==null?void 0:l.left)||0)-((l==null?void 0:l.right)||0),B=vte(t.layout,d,h,z),F=_?o:Ay(Ay({position:"absolute",width:(B==null?void 0:B.width)||h||"auto",height:(B==null?void 0:B.height)||d||"auto"},mte(o,t,l,M,O,S)),o),L=_??n;if(L==null||r==null)return null;var K=A.createElement("div",{className:"recharts-legend-wrapper",style:F,ref:P},A.createElement(gte,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!_&&A.createElement(yte,{width:S.width,height:S.height}),A.createElement(pte,yE({},t,B,{margin:l,chartWidth:M,chartHeight:O,contextPayload:r})));return Cc.createPortal(K,L)}yB.displayName="Legend";function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vE.apply(null,arguments)}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function FP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xte(e,t,r){return(t=bte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bte(e){var t=wte(e,"string");return typeof t=="symbol"?t:t+""}function wte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ste(e){return Array.isArray(e)&&bh(e[0])&&bh(e[1])?e.join(" ~ "):e}var Pte=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:l={},payload:h,formatter:d,itemSorter:o,wrapperClassName:_,labelClassName:S,label:P,labelFormatter:M,accessibilityLayer:O=!1}=e,z=()=>{if(h&&h.length){var ae={padding:0,margin:0},he=(o?Nw(h,o):h).map((ne,be)=>{if(ne.type==="none")return null;var xe=ne.formatter||d||Ste,{value:$e,name:Ee}=ne,Ne=$e,Xe=Ee;if(xe){var ut=xe($e,Ee,ne,be,h);if(Array.isArray(ut))[Ne,Xe]=ut;else if(ut!=null)Ne=ut;else return null}var pt=FP({display:"block",paddingTop:4,paddingBottom:4,color:ne.color||"#000"},n);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(be),style:pt},bh(Xe)?A.createElement("span",{className:"recharts-tooltip-item-name"},Xe):null,bh(Xe)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},Ne),A.createElement("span",{className:"recharts-tooltip-item-unit"},ne.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:ae},he)}return null},B=FP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),F=FP({margin:0},l),L=!Zi(P),K=L?P:"",Q=Hn("recharts-default-tooltip",_),re=Hn("recharts-tooltip-label",S);L&&M&&h!==void 0&&h!==null&&(K=M(P,h));var te=O?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",vE({className:Q,style:B},te),A.createElement("p",{className:re,style:F},A.isValidElement(K)?K:"".concat(K)),z())},Vv="recharts-tooltip-wrapper",Ete={visibility:"hidden"};function Cte(e){var{coordinate:t,translateX:r,translateY:n}=e;return Hn(Vv,{["".concat(Vv,"-right")]:_r(r)&&t&&_r(t.x)&&r>=t.x,["".concat(Vv,"-left")]:_r(r)&&t&&_r(t.x)&&r<t.x,["".concat(Vv,"-bottom")]:_r(n)&&t&&_r(t.y)&&n>=t.y,["".concat(Vv,"-top")]:_r(n)&&t&&_r(t.y)&&n<t.y})}function gD(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:l,position:h,reverseDirection:d,tooltipDimension:o,viewBox:_,viewBoxDimension:S}=e;if(h&&_r(h[n]))return h[n];var P=r[n]-o-(l>0?l:0),M=r[n]+l;if(t[n])return d[n]?P:M;var O=_[n];if(O==null)return 0;if(d[n]){var z=P,B=O;return z<B?Math.max(M,O):Math.max(P,O)}if(S==null)return 0;var F=M+o,L=O+S;return F>L?Math.max(P,O):Math.max(M,O)}function Tte(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Mte(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:l,reverseDirection:h,tooltipBox:d,useTranslate3d:o,viewBox:_}=e,S,P,M;return d.height>0&&d.width>0&&r?(P=gD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:l,reverseDirection:h,tooltipDimension:d.width,viewBox:_,viewBoxDimension:_.width}),M=gD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:l,reverseDirection:h,tooltipDimension:d.height,viewBox:_,viewBoxDimension:_.height}),S=Tte({translateX:P,translateY:M,useTranslate3d:o})):S=Ete,{cssProperties:S,cssClasses:Cte({translateX:P,translateY:M,coordinate:r})}}function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(n){_E(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _E(e,t,r){return(t=kte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=Ate(e,"string");return typeof t=="symbol"?t:t+""}function Ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ite extends A.PureComponent{constructor(){super(...arguments),_E(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_E(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,l,h;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(l=(h=this.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:l,children:h,coordinate:d,hasPayload:o,isAnimationActive:_,offset:S,position:P,reverseDirection:M,useTranslate3d:O,viewBox:z,wrapperStyle:B,lastBoundingBox:F,innerRef:L,hasPortalFromProps:K}=this.props,{cssClasses:Q,cssProperties:re}=Mte({allowEscapeViewBox:r,coordinate:d,offsetTopLeft:S,position:P,reverseDirection:M,tooltipBox:{height:F.height,width:F.width},useTranslate3d:O,viewBox:z}),te=K?{}:vx(vx({transition:_&&t?"transform ".concat(n,"ms ").concat(l):void 0},re),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),ae=vx(vx({},te),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},B);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:Q,style:ae,ref:L},h)}}var vB=()=>{var e;return(e=Or(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xE.apply(null,arguments)}function vD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function _D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vD(Object(r),!0).forEach(function(n){Ote(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ote(e,t,r){return(t=Lte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lte(e){var t=Dte(e,"string");return typeof t=="symbol"?t:t+""}function Dte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xD={curveBasisClosed:pQ,curveBasisOpen:mQ,curveBasis:fQ,curveBumpX:JY,curveBumpY:eQ,curveLinearClosed:gQ,curveLinear:Rw,curveMonotoneX:yQ,curveMonotoneY:vQ,curveNatural:_Q,curveStep:xQ,curveStepAfter:wQ,curveStepBefore:bQ},kb=e=>Ai(e.x)&&Ai(e.y),bD=e=>e.base!=null&&kb(e.base)&&kb(e),$v=e=>e.x,Uv=e=>e.y,Rte=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(W_(e));return(r==="curveMonotone"||r==="curveBump")&&t?xD["".concat(r).concat(t==="vertical"?"Y":"X")]:xD[r]||Rw},jte=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:l,connectNulls:h=!1}=e,d=Rte(t,l),o=h?r.filter(kb):r,_;if(Array.isArray(n)){var S=r.map((z,B)=>_D(_D({},z),{},{base:n[B]}));l==="vertical"?_=px().y(Uv).x1($v).x0(z=>z.base.x):_=px().x($v).y1(Uv).y0(z=>z.base.y);var P=_.defined(bD).curve(d),M=h?S.filter(bD):S;return P(M)}l==="vertical"&&_r(n)?_=px().y(Uv).x1($v).x0(n):_r(n)?_=px().x($v).y1(Uv).y0(n):_=wF().x($v).y(Uv);var O=_.defined(kb).curve(d);return O(o)},n_=e=>{var{className:t,points:r,path:n,pathRef:l}=e;if((!r||!r.length)&&!n)return null;var h=r&&r.length?jte(e):n;return A.createElement("path",xE({},vu(e),VC(e),{className:Hn("recharts-curve",t),d:h===null?void 0:h,ref:l}))},zte=["x","y","top","left","width","height","className"];function bE(){return bE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bE.apply(null,arguments)}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Nte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){Fte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fte(e,t,r){return(t=Bte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bte(e){var t=Vte(e,"string");return typeof t=="symbol"?t:t+""}function Vte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $te(e,t){if(e==null)return{};var r,n,l=Ute(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Ute(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qte=(e,t,r,n,l,h)=>"M".concat(e,",").concat(l,"v").concat(n,"M").concat(h,",").concat(t,"h").concat(r),Gte=e=>{var{x:t=0,y:r=0,top:n=0,left:l=0,width:h=0,height:d=0,className:o}=e,_=$te(e,zte),S=Nte({x:t,y:r,top:n,left:l,width:h,height:d},_);return!_r(t)||!_r(r)||!_r(h)||!_r(d)||!_r(n)||!_r(l)?null:A.createElement("path",bE({},Ps(S),{className:Hn("recharts-cross",o),d:qte(t,r,h,d,n,l)}))};function Wte(e,t,r,n){var l=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-l,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function PD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(n){Hte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hte(e,t,r){return(t=Zte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zte(e){var t=Kte(e,"string");return typeof t=="symbol"?t:t+""}function Kte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xte=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),_B=(e,t,r)=>e.map(n=>"".concat(Xte(n)," ").concat(t,"ms ").concat(r)).join(","),Yte=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(l=>n.includes(l))),v_=(e,t)=>Object.keys(t).reduce((r,n)=>PD(PD({},r),{},{[n]:e(n,t[n])}),{});function ED(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ED(Object(r),!0).forEach(function(n){Qte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ED(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qte(e,t,r){return(t=Jte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jte(e){var t=ere(e,"string");return typeof t=="symbol"?t:t+""}function ere(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ab=(e,t,r)=>e+(t-e)*r,wE=e=>{var{from:t,to:r}=e;return t!==r},xB=(e,t,r)=>{var n=v_((l,h)=>{if(wE(h)){var[d,o]=e(h.from,h.to,h.velocity);return Ga(Ga({},h),{},{from:d,velocity:o})}return h},t);return r<1?v_((l,h)=>wE(h)?Ga(Ga({},h),{},{velocity:Ab(h.velocity,n[l].velocity,r),from:Ab(h.from,n[l].from,r)}):h,t):xB(e,n,r-1)};function tre(e,t,r,n,l,h){var d,o=n.reduce((O,z)=>Ga(Ga({},O),{},{[z]:{from:e[z],velocity:0,to:t[z]}}),{}),_=()=>v_((O,z)=>z.from,o),S=()=>!Object.values(o).filter(wE).length,P=null,M=O=>{d||(d=O);var z=O-d,B=z/r.dt;o=xB(r,o,B),l(Ga(Ga(Ga({},e),t),_())),d=O,S()||(P=h.setTimeout(M))};return()=>(P=h.setTimeout(M),()=>{var O;(O=P)===null||O===void 0||O()})}function rre(e,t,r,n,l,h,d){var o=null,_=l.reduce((M,O)=>Ga(Ga({},M),{},{[O]:[e[O],t[O]]}),{}),S,P=M=>{S||(S=M);var O=(M-S)/n,z=v_((F,L)=>Ab(...L,r(O)),_);if(h(Ga(Ga(Ga({},e),t),z)),O<1)o=d.setTimeout(P);else{var B=v_((F,L)=>Ab(...L,r(1)),_);h(Ga(Ga(Ga({},e),t),B))}};return()=>(o=d.setTimeout(P),()=>{var M;(M=o)===null||M===void 0||M()})}const nre=(e,t,r,n,l,h)=>{var d=Yte(e,t);return r==null?()=>(l(Ga(Ga({},e),t)),()=>{}):r.isStepper===!0?tre(e,t,r,d,l,h):rre(e,t,r,n,d,l,h)};var Ib=1e-4,bB=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],wB=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),CD=(e,t)=>r=>{var n=bB(e,t);return wB(n,r)},ire=(e,t)=>r=>{var n=bB(e,t),l=[...n.map((h,d)=>h*d).slice(1),0];return wB(l,r)},are=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l,h=r[0].split("(");if(h[0]==="cubic-bezier"&&((l=h[1])===null||l===void 0?void 0:l.split(")")[0].split(",").length)===4){var d=h[1].split(")")[0].split(",").map(o=>parseFloat(o));return[d[0],d[1],d[2],d[3]]}}}return r.length===4?r:[0,0,1,1]},ore=(e,t,r,n)=>{var l=CD(e,r),h=CD(t,n),d=ire(e,r),o=S=>S>1?1:S<0?0:S,_=S=>{for(var P=S>1?1:S,M=P,O=0;O<8;++O){var z=l(M)-P,B=d(M);if(Math.abs(z-P)<Ib||B<Ib)return h(M);M=o(M-z/B)}return h(M)};return _.isStepper=!1,_},TD=function(){return ore(...are(...arguments))},sre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:l=17}=t,h=(d,o,_)=>{var S=-(d-o)*r,P=_*n,M=_+(S-P)*l/1e3,O=_*l/1e3+d;return Math.abs(O-o)<Ib&&Math.abs(M)<Ib?[o,0]:[O,M]};return h.isStepper=!0,h.dt=l,h},lre=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TD(e);case"spring":return sre();default:if(e.split("(")[0]==="cubic-bezier")return TD(e)}return typeof e=="function"?e:null};function ure(e){var t,r=()=>null,n=!1,l=null,h=d=>{if(!n){if(Array.isArray(d)){if(!d.length)return;var o=d,[_,...S]=o;if(typeof _=="number"){l=e.setTimeout(h.bind(null,S),_);return}h(_),l=e.setTimeout(h.bind(null,S));return}typeof d=="string"&&(t=d,r(t)),typeof d=="object"&&(t=d,r(t)),typeof d=="function"&&d()}};return{stop:()=>{n=!0},start:d=>{n=!1,l&&(l(),l=null),h(d)},subscribe:d=>(r=d,()=>{r=()=>null}),getTimeoutController:()=>e}}class cre{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),l=null,h=d=>{d-n>=r?t(d):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(h))};return l=requestAnimationFrame(h),()=>{l!=null&&cancelAnimationFrame(l)}}}function hre(){return ure(new cre)}var dre=A.createContext(hre);function fre(e,t){var r=A.useContext(dre);return A.useMemo(()=>t??r(e),[e,t,r])}var pre=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Gy={devToolsEnabled:!1,isSsr:pre()},mre={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},MD={t:0},BP={t:1};function Kw(e){var t=Ao(e,mre),{isActive:r,canBegin:n,duration:l,easing:h,begin:d,onAnimationEnd:o,onAnimationStart:_,children:S}=t,P=r==="auto"?!Gy.isSsr:r,M=fre(t.animationId,t.animationManager),[O,z]=A.useState(P?MD:BP),B=A.useRef(null);return A.useEffect(()=>{P||z(BP)},[P]),A.useEffect(()=>{if(!P||!n)return H_;var F=nre(MD,BP,lre(h),l,z,M.getTimeoutController()),L=()=>{B.current=F()};return M.start([_,d,L,l,o]),()=>{M.stop(),B.current&&B.current(),o()}},[P,n,l,h,d,_,o,M]),S(O.t)}function Xw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=A.useRef(p_(t)),n=A.useRef(e);return n.current!==e&&(r.current=p_(t),n.current=e),r.current}var gre=["radius"],yre=["radius"];function kD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function AD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(r),!0).forEach(function(n){vre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vre(e,t,r){return(t=_re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _re(e){var t=xre(e,"string");return typeof t=="symbol"?t:t+""}function xre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ob.apply(null,arguments)}function ID(e,t){if(e==null)return{};var r,n,l=bre(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function bre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OD=(e,t,r,n,l)=>{var h=Math.min(Math.abs(r)/2,Math.abs(n)/2),d=n>=0?1:-1,o=r>=0?1:-1,_=n>=0&&r>=0||n<0&&r<0?1:0,S;if(h>0&&l instanceof Array){for(var P=[0,0,0,0],M=0,O=4;M<O;M++)P[M]=l[M]>h?h:l[M];S="M".concat(e,",").concat(t+d*P[0]),P[0]>0&&(S+="A ".concat(P[0],",").concat(P[0],",0,0,").concat(_,",").concat(e+o*P[0],",").concat(t)),S+="L ".concat(e+r-o*P[1],",").concat(t),P[1]>0&&(S+="A ".concat(P[1],",").concat(P[1],",0,0,").concat(_,`,
        `).concat(e+r,",").concat(t+d*P[1])),S+="L ".concat(e+r,",").concat(t+n-d*P[2]),P[2]>0&&(S+="A ".concat(P[2],",").concat(P[2],",0,0,").concat(_,`,
        `).concat(e+r-o*P[2],",").concat(t+n)),S+="L ".concat(e+o*P[3],",").concat(t+n),P[3]>0&&(S+="A ".concat(P[3],",").concat(P[3],",0,0,").concat(_,`,
        `).concat(e,",").concat(t+n-d*P[3])),S+="Z"}else if(h>0&&l===+l&&l>0){var z=Math.min(h,l);S="M ".concat(e,",").concat(t+d*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+o*z,",").concat(t,`
            L `).concat(e+r-o*z,",").concat(t,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+r,",").concat(t+d*z,`
            L `).concat(e+r,",").concat(t+n-d*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+r-o*z,",").concat(t+n,`
            L `).concat(e+o*z,",").concat(t+n,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e,",").concat(t+n-d*z," Z")}else S="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return S},LD={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SB=e=>{var t=Ao(e,LD),r=A.useRef(null),[n,l]=A.useState(-1);A.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var wt=r.current.getTotalLength();wt&&l(wt)}catch{}},[]);var{x:h,y:d,width:o,height:_,radius:S,className:P}=t,{animationEasing:M,animationDuration:O,animationBegin:z,isAnimationActive:B,isUpdateAnimationActive:F}=t,L=A.useRef(o),K=A.useRef(_),Q=A.useRef(h),re=A.useRef(d),te=A.useMemo(()=>({x:h,y:d,width:o,height:_,radius:S}),[h,d,o,_,S]),ae=Xw(te,"rectangle-");if(h!==+h||d!==+d||o!==+o||_!==+_||o===0||_===0)return null;var he=Hn("recharts-rectangle",P);if(!F){var ne=Ps(t),{radius:be}=ne,xe=ID(ne,gre);return A.createElement("path",Ob({},xe,{radius:typeof S=="number"?S:void 0,className:he,d:OD(h,d,o,_,S)}))}var $e=L.current,Ee=K.current,Ne=Q.current,Xe=re.current,ut="0px ".concat(n===-1?1:n,"px"),pt="".concat(n,"px 0px"),gt=_B(["strokeDasharray"],O,typeof M=="string"?M:LD.animationEasing);return A.createElement(Kw,{animationId:ae,key:ae,canBegin:n>0,duration:O,easing:M,isActive:F,begin:z},wt=>{var je=Hi($e,o,wt),Qe=Hi(Ee,_,wt),yt=Hi(Ne,h,wt),Oe=Hi(Xe,d,wt);r.current&&(L.current=je,K.current=Qe,Q.current=yt,re.current=Oe);var et;B?wt>0?et={transition:gt,strokeDasharray:pt}:et={strokeDasharray:ut}:et={strokeDasharray:pt};var Mt=Ps(t),{radius:Dt}=Mt,Ke=ID(Mt,yre);return A.createElement("path",Ob({},Ke,{radius:typeof S=="number"?S:void 0,className:he,d:OD(yt,Oe,je,Qe,S),ref:r,style:AD(AD({},et),t.style)}))})};function DD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function RD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DD(Object(r),!0).forEach(function(n){wre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wre(e,t,r){return(t=Sre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sre(e){var t=Pre(e,"string");return typeof t=="symbol"?t:t+""}function Pre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lb=Math.PI/180,Ere=e=>e*180/Math.PI,ko=(e,t,r,n)=>({x:e+Math.cos(-Lb*n)*r,y:t+Math.sin(-Lb*n)*r}),Cre=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Tre=(e,t)=>{var{x:r,y:n}=e,{x:l,y:h}=t;return Math.sqrt((r-l)**2+(n-h)**2)},Mre=(e,t)=>{var{x:r,y:n}=e,{cx:l,cy:h}=t,d=Tre({x:r,y:n},{x:l,y:h});if(d<=0)return{radius:d,angle:0};var o=(r-l)/d,_=Math.acos(o);return n>h&&(_=2*Math.PI-_),{radius:d,angle:Ere(_),angleInRadian:_}},kre=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),l=Math.floor(r/360),h=Math.min(n,l);return{startAngle:t-h*360,endAngle:r-h*360}},Are=(e,t)=>{var{startAngle:r,endAngle:n}=t,l=Math.floor(r/360),h=Math.floor(n/360),d=Math.min(l,h);return e+d*360},Ire=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:l,angle:h}=Mre({x:r,y:n},t),{innerRadius:d,outerRadius:o}=t;if(l<d||l>o||l===0)return null;var{startAngle:_,endAngle:S}=kre(t),P=h,M;if(_<=S){for(;P>S;)P-=360;for(;P<_;)P+=360;M=P>=_&&P<=S}else{for(;P>_;)P-=360;for(;P<S;)P+=360;M=P>=S&&P<=_}return M?RD(RD({},t),{},{radius:l,angle:Are(P,t)}):null};function PB(e){var{cx:t,cy:r,radius:n,startAngle:l,endAngle:h}=e,d=ko(t,r,n,l),o=ko(t,r,n,h);return{points:[d,o],cx:t,cy:r,radius:n,startAngle:l,endAngle:h}}function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SE.apply(null,arguments)}var Ore=(e,t)=>{var r=Ys(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},_x=e=>{var{cx:t,cy:r,radius:n,angle:l,sign:h,isExternal:d,cornerRadius:o,cornerIsExternal:_}=e,S=o*(d?1:-1)+n,P=Math.asin(o/S)/Lb,M=_?l:l+h*P,O=ko(t,r,S,M),z=ko(t,r,n,M),B=_?l-h*P:l,F=ko(t,r,S*Math.cos(P*Lb),B);return{center:O,circleTangency:z,lineTangency:F,theta:P}},EB=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:h,endAngle:d}=e,o=Ore(h,d),_=h+o,S=ko(t,r,l,h),P=ko(t,r,l,_),M="M ".concat(S.x,",").concat(S.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(h>_),`,
    `).concat(P.x,",").concat(P.y,`
  `);if(n>0){var O=ko(t,r,n,h),z=ko(t,r,n,_);M+="L ".concat(z.x,",").concat(z.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(h<=_),`,
            `).concat(O.x,",").concat(O.y," Z")}else M+="L ".concat(t,",").concat(r," Z");return M},Lre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:l,cornerRadius:h,forceCornerRadius:d,cornerIsExternal:o,startAngle:_,endAngle:S}=e,P=Ys(S-_),{circleTangency:M,lineTangency:O,theta:z}=_x({cx:t,cy:r,radius:l,angle:_,sign:P,cornerRadius:h,cornerIsExternal:o}),{circleTangency:B,lineTangency:F,theta:L}=_x({cx:t,cy:r,radius:l,angle:S,sign:-P,cornerRadius:h,cornerIsExternal:o}),K=o?Math.abs(_-S):Math.abs(_-S)-z-L;if(K<0)return d?"M ".concat(O.x,",").concat(O.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):EB({cx:t,cy:r,innerRadius:n,outerRadius:l,startAngle:_,endAngle:S});var Q="M ".concat(O.x,",").concat(O.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(P<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(K>180),",").concat(+(P<0),",").concat(B.x,",").concat(B.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(P<0),",").concat(F.x,",").concat(F.y,`
  `);if(n>0){var{circleTangency:re,lineTangency:te,theta:ae}=_x({cx:t,cy:r,radius:n,angle:_,sign:P,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),{circleTangency:he,lineTangency:ne,theta:be}=_x({cx:t,cy:r,radius:n,angle:S,sign:-P,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),xe=o?Math.abs(_-S):Math.abs(_-S)-ae-be;if(xe<0&&h===0)return"".concat(Q,"L").concat(t,",").concat(r,"Z");Q+="L".concat(ne.x,",").concat(ne.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(P<0),",").concat(he.x,",").concat(he.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(xe>180),",").concat(+(P>0),",").concat(re.x,",").concat(re.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(P<0),",").concat(te.x,",").concat(te.y,"Z")}else Q+="L".concat(t,",").concat(r,"Z");return Q},Dre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CB=e=>{var t=Ao(e,Dre),{cx:r,cy:n,innerRadius:l,outerRadius:h,cornerRadius:d,forceCornerRadius:o,cornerIsExternal:_,startAngle:S,endAngle:P,className:M}=t;if(h<l||S===P)return null;var O=Hn("recharts-sector",M),z=h-l,B=Pc(d,z,0,!0),F;return B>0&&Math.abs(S-P)<360?F=Lre({cx:r,cy:n,innerRadius:l,outerRadius:h,cornerRadius:Math.min(B,z/2),forceCornerRadius:o,cornerIsExternal:_,startAngle:S,endAngle:P}):F=EB({cx:r,cy:n,innerRadius:l,outerRadius:h,startAngle:S,endAngle:P}),A.createElement("path",SE({},Ps(t),{className:O,d:F}))};function Rre(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(zF(t)){if(e==="centric"){var{cx:n,cy:l,innerRadius:h,outerRadius:d,angle:o}=t,_=ko(n,l,h,o),S=ko(n,l,d,o);return[{x:_.x,y:_.y},{x:S.x,y:S.y}]}return PB(t)}}var VP={},$P={},UP={},jD;function jre(){return jD||(jD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZF();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(UP)),UP}var zD;function zre(){return zD||(zD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jre();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})($P)),$P}var ND;function Nre(){return ND||(ND=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KF(),r=zre();function n(l,h,d){d&&typeof d!="number"&&t.isIterateeCall(l,h,d)&&(h=d=void 0),l=r.toFinite(l),h===void 0?(h=l,l=0):h=r.toFinite(h),d=d===void 0?l<h?1:-1:r.toFinite(d);const o=Math.max(Math.ceil((h-l)/(d||1)),0),_=new Array(o);for(let S=0;S<o;S++)_[S]=l,l+=d;return _}e.range=n})(VP)),VP}var qP,FD;function Fre(){return FD||(FD=1,qP=Nre().range),qP}var Bre=Fre();const TB=Ph(Bre);function mp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vre(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XC(e){let t,r,n;e.length!==2?(t=mp,r=(o,_)=>mp(e(o),_),n=(o,_)=>e(o)-_):(t=e===mp||e===Vre?e:$re,r=e,n=e);function l(o,_,S=0,P=o.length){if(S<P){if(t(_,_)!==0)return P;do{const M=S+P>>>1;r(o[M],_)<0?S=M+1:P=M}while(S<P)}return S}function h(o,_,S=0,P=o.length){if(S<P){if(t(_,_)!==0)return P;do{const M=S+P>>>1;r(o[M],_)<=0?S=M+1:P=M}while(S<P)}return S}function d(o,_,S=0,P=o.length){const M=l(o,_,S,P-1);return M>S&&n(o[M-1],_)>-n(o[M],_)?M-1:M}return{left:l,center:d,right:h}}function $re(){return 0}function MB(e){return e===null?NaN:+e}function*Ure(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const qre=XC(mp),X_=qre.right;XC(MB).center;class BD extends Map{constructor(t,r=Hre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,l]of t)this.set(n,l)}get(t){return super.get(VD(this,t))}has(t){return super.has(VD(this,t))}set(t,r){return super.set(Gre(this,t),r)}delete(t){return super.delete(Wre(this,t))}}function VD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Gre({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Wre({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Hre(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Zre(e=mp){if(e===mp)return kB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function kB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Kre=Math.sqrt(50),Xre=Math.sqrt(10),Yre=Math.sqrt(2);function Db(e,t,r){const n=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(n)),h=n/Math.pow(10,l),d=h>=Kre?10:h>=Xre?5:h>=Yre?2:1;let o,_,S;return l<0?(S=Math.pow(10,-l)/d,o=Math.round(e*S),_=Math.round(t*S),o/S<e&&++o,_/S>t&&--_,S=-S):(S=Math.pow(10,l)*d,o=Math.round(e/S),_=Math.round(t/S),o*S<e&&++o,_*S>t&&--_),_<o&&.5<=r&&r<2?Db(e,t,r*2):[o,_,S]}function PE(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[l,h,d]=n?Db(t,e,r):Db(e,t,r);if(!(h>=l))return[];const o=h-l+1,_=new Array(o);if(n)if(d<0)for(let S=0;S<o;++S)_[S]=(h-S)/-d;else for(let S=0;S<o;++S)_[S]=(h-S)*d;else if(d<0)for(let S=0;S<o;++S)_[S]=(l+S)/-d;else for(let S=0;S<o;++S)_[S]=(l+S)*d;return _}function EE(e,t,r){return t=+t,e=+e,r=+r,Db(e,t,r)[2]}function CE(e,t,r){t=+t,e=+e,r=+r;const n=t<e,l=n?EE(t,e,r):EE(e,t,r);return(n?-1:1)*(l<0?1/-l:l)}function $D(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function UD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function AB(e,t,r=0,n=1/0,l){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(l=l===void 0?kB:Zre(l);n>r;){if(n-r>600){const _=n-r+1,S=t-r+1,P=Math.log(_),M=.5*Math.exp(2*P/3),O=.5*Math.sqrt(P*M*(_-M)/_)*(S-_/2<0?-1:1),z=Math.max(r,Math.floor(t-S*M/_+O)),B=Math.min(n,Math.floor(t+(_-S)*M/_+O));AB(e,t,z,B,l)}const h=e[t];let d=r,o=n;for(qv(e,r,t),l(e[n],h)>0&&qv(e,r,n);d<o;){for(qv(e,d,o),++d,--o;l(e[d],h)<0;)++d;for(;l(e[o],h)>0;)--o}l(e[r],h)===0?qv(e,r,o):(++o,qv(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function qv(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Qre(e,t,r){if(e=Float64Array.from(Ure(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return UD(e);if(t>=1)return $D(e);var n,l=(n-1)*t,h=Math.floor(l),d=$D(AB(e,h).subarray(0,h+1)),o=UD(e.subarray(h+1));return d+(o-d)*(l-h)}}function Jre(e,t,r=MB){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,l=(n-1)*t,h=Math.floor(l),d=+r(e[h],h,e),o=+r(e[h+1],h+1,e);return d+(o-d)*(l-h)}}function ene(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var n=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,h=new Array(l);++n<l;)h[n]=e+n*r;return h}function wu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const TE=Symbol("implicit");function YC(){var e=new BD,t=[],r=[],n=TE;function l(h){let d=e.get(h);if(d===void 0){if(n!==TE)return n;e.set(h,d=t.push(h)-1)}return r[d%r.length]}return l.domain=function(h){if(!arguments.length)return t.slice();t=[],e=new BD;for(const d of h)e.has(d)||e.set(d,t.push(d)-1);return l},l.range=function(h){return arguments.length?(r=Array.from(h),l):r.slice()},l.unknown=function(h){return arguments.length?(n=h,l):n},l.copy=function(){return YC(t,r).unknown(n)},wu.apply(l,arguments),l}function QC(){var e=YC().unknown(void 0),t=e.domain,r=e.range,n=0,l=1,h,d,o=!1,_=0,S=0,P=.5;delete e.unknown;function M(){var O=t().length,z=l<n,B=z?l:n,F=z?n:l;h=(F-B)/Math.max(1,O-_+S*2),o&&(h=Math.floor(h)),B+=(F-B-h*(O-_))*P,d=h*(1-_),o&&(B=Math.round(B),d=Math.round(d));var L=ene(O).map(function(K){return B+h*K});return r(z?L.reverse():L)}return e.domain=function(O){return arguments.length?(t(O),M()):t()},e.range=function(O){return arguments.length?([n,l]=O,n=+n,l=+l,M()):[n,l]},e.rangeRound=function(O){return[n,l]=O,n=+n,l=+l,o=!0,M()},e.bandwidth=function(){return d},e.step=function(){return h},e.round=function(O){return arguments.length?(o=!!O,M()):o},e.padding=function(O){return arguments.length?(_=Math.min(1,S=+O),M()):_},e.paddingInner=function(O){return arguments.length?(_=Math.min(1,O),M()):_},e.paddingOuter=function(O){return arguments.length?(S=+O,M()):S},e.align=function(O){return arguments.length?(P=Math.max(0,Math.min(1,O)),M()):P},e.copy=function(){return QC(t(),[n,l]).round(o).paddingInner(_).paddingOuter(S).align(P)},wu.apply(M(),arguments)}function IB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return IB(t())},e}function tne(){return IB(QC.apply(null,arguments).paddingInner(1))}function JC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function OB(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Y_(){}var __=.7,Rb=1/__,uy="\\s*([+-]?\\d+)\\s*",x_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_h="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rne=/^#([0-9a-f]{3,8})$/,nne=new RegExp(`^rgb\\(${uy},${uy},${uy}\\)$`),ine=new RegExp(`^rgb\\(${_h},${_h},${_h}\\)$`),ane=new RegExp(`^rgba\\(${uy},${uy},${uy},${x_}\\)$`),one=new RegExp(`^rgba\\(${_h},${_h},${_h},${x_}\\)$`),sne=new RegExp(`^hsl\\(${x_},${_h},${_h}\\)$`),lne=new RegExp(`^hsla\\(${x_},${_h},${_h},${x_}\\)$`),qD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JC(Y_,b_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GD,formatHex:GD,formatHex8:une,formatHsl:cne,formatRgb:WD,toString:WD});function GD(){return this.rgb().formatHex()}function une(){return this.rgb().formatHex8()}function cne(){return LB(this).formatHsl()}function WD(){return this.rgb().formatRgb()}function b_(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=rne.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?HD(t):r===3?new Qs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?xx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?xx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nne.exec(e))?new Qs(t[1],t[2],t[3],1):(t=ine.exec(e))?new Qs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ane.exec(e))?xx(t[1],t[2],t[3],t[4]):(t=one.exec(e))?xx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sne.exec(e))?XD(t[1],t[2]/100,t[3]/100,1):(t=lne.exec(e))?XD(t[1],t[2]/100,t[3]/100,t[4]):qD.hasOwnProperty(e)?HD(qD[e]):e==="transparent"?new Qs(NaN,NaN,NaN,0):null}function HD(e){return new Qs(e>>16&255,e>>8&255,e&255,1)}function xx(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qs(e,t,r,n)}function hne(e){return e instanceof Y_||(e=b_(e)),e?(e=e.rgb(),new Qs(e.r,e.g,e.b,e.opacity)):new Qs}function ME(e,t,r,n){return arguments.length===1?hne(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}JC(Qs,ME,OB(Y_,{brighter(e){return e=e==null?Rb:Math.pow(Rb,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?__:Math.pow(__,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(Gm(this.r),Gm(this.g),Gm(this.b),jb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZD,formatHex:ZD,formatHex8:dne,formatRgb:KD,toString:KD}));function ZD(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}`}function dne(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}${Im((isNaN(this.opacity)?1:this.opacity)*255)}`}function KD(){const e=jb(this.opacity);return`${e===1?"rgb(":"rgba("}${Gm(this.r)}, ${Gm(this.g)}, ${Gm(this.b)}${e===1?")":`, ${e})`}`}function jb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Im(e){return e=Gm(e),(e<16?"0":"")+e.toString(16)}function XD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xc(e,t,r,n)}function LB(e){if(e instanceof xc)return new xc(e.h,e.s,e.l,e.opacity);if(e instanceof Y_||(e=b_(e)),!e)return new xc;if(e instanceof xc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,l=Math.min(t,r,n),h=Math.max(t,r,n),d=NaN,o=h-l,_=(h+l)/2;return o?(t===h?d=(r-n)/o+(r<n)*6:r===h?d=(n-t)/o+2:d=(t-r)/o+4,o/=_<.5?h+l:2-h-l,d*=60):o=_>0&&_<1?0:d,new xc(d,o,_,e.opacity)}function fne(e,t,r,n){return arguments.length===1?LB(e):new xc(e,t,r,n??1)}function xc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}JC(xc,fne,OB(Y_,{brighter(e){return e=e==null?Rb:Math.pow(Rb,e),new xc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?__:Math.pow(__,e),new xc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,l=2*r-n;return new Qs(GP(e>=240?e-240:e+120,l,n),GP(e,l,n),GP(e<120?e+240:e-120,l,n),this.opacity)},clamp(){return new xc(YD(this.h),bx(this.s),bx(this.l),jb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jb(this.opacity);return`${e===1?"hsl(":"hsla("}${YD(this.h)}, ${bx(this.s)*100}%, ${bx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function YD(e){return e=(e||0)%360,e<0?e+360:e}function bx(e){return Math.max(0,Math.min(1,e||0))}function GP(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const eT=e=>()=>e;function pne(e,t){return function(r){return e+r*t}}function mne(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function gne(e){return(e=+e)==1?DB:function(t,r){return r-t?mne(t,r,e):eT(isNaN(t)?r:t)}}function DB(e,t){var r=t-e;return r?pne(e,r):eT(isNaN(e)?t:e)}const QD=(function e(t){var r=gne(t);function n(l,h){var d=r((l=ME(l)).r,(h=ME(h)).r),o=r(l.g,h.g),_=r(l.b,h.b),S=DB(l.opacity,h.opacity);return function(P){return l.r=d(P),l.g=o(P),l.b=_(P),l.opacity=S(P),l+""}}return n.gamma=e,n})(1);function yne(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),l;return function(h){for(l=0;l<r;++l)n[l]=e[l]*(1-h)+t[l]*h;return n}}function vne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _ne(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,l=new Array(n),h=new Array(r),d;for(d=0;d<n;++d)l[d]=Wy(e[d],t[d]);for(;d<r;++d)h[d]=t[d];return function(o){for(d=0;d<n;++d)h[d]=l[d](o);return h}}function xne(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bne(e,t){var r={},n={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Wy(e[l],t[l]):n[l]=t[l];return function(h){for(l in r)n[l]=r[l](h);return n}}var kE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,WP=new RegExp(kE.source,"g");function wne(e){return function(){return e}}function Sne(e){return function(t){return e(t)+""}}function Pne(e,t){var r=kE.lastIndex=WP.lastIndex=0,n,l,h,d=-1,o=[],_=[];for(e=e+"",t=t+"";(n=kE.exec(e))&&(l=WP.exec(t));)(h=l.index)>r&&(h=t.slice(r,h),o[d]?o[d]+=h:o[++d]=h),(n=n[0])===(l=l[0])?o[d]?o[d]+=l:o[++d]=l:(o[++d]=null,_.push({i:d,x:zb(n,l)})),r=WP.lastIndex;return r<t.length&&(h=t.slice(r),o[d]?o[d]+=h:o[++d]=h),o.length<2?_[0]?Sne(_[0].x):wne(t):(t=_.length,function(S){for(var P=0,M;P<t;++P)o[(M=_[P]).i]=M.x(S);return o.join("")})}function Wy(e,t){var r=typeof t,n;return t==null||r==="boolean"?eT(t):(r==="number"?zb:r==="string"?(n=b_(t))?(t=n,QD):Pne:t instanceof b_?QD:t instanceof Date?xne:vne(t)?yne:Array.isArray(t)?_ne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bne:zb)(e,t)}function tT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ene(e,t){t===void 0&&(t=e,e=Wy);for(var r=0,n=t.length-1,l=t[0],h=new Array(n<0?0:n);r<n;)h[r]=e(l,l=t[++r]);return function(d){var o=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return h[o](d-o)}}function Cne(e){return function(){return e}}function Nb(e){return+e}var JD=[0,1];function ws(e){return e}function AE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Cne(isNaN(t)?NaN:.5)}function Tne(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Mne(e,t,r){var n=e[0],l=e[1],h=t[0],d=t[1];return l<n?(n=AE(l,n),h=r(d,h)):(n=AE(n,l),h=r(h,d)),function(o){return h(n(o))}}function kne(e,t,r){var n=Math.min(e.length,t.length)-1,l=new Array(n),h=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<n;)l[d]=AE(e[d],e[d+1]),h[d]=r(t[d],t[d+1]);return function(o){var _=X_(e,o,1,n)-1;return h[_](l[_](o))}}function Q_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yw(){var e=JD,t=JD,r=Wy,n,l,h,d=ws,o,_,S;function P(){var O=Math.min(e.length,t.length);return d!==ws&&(d=Tne(e[0],e[O-1])),o=O>2?kne:Mne,_=S=null,M}function M(O){return O==null||isNaN(O=+O)?h:(_||(_=o(e.map(n),t,r)))(n(d(O)))}return M.invert=function(O){return d(l((S||(S=o(t,e.map(n),zb)))(O)))},M.domain=function(O){return arguments.length?(e=Array.from(O,Nb),P()):e.slice()},M.range=function(O){return arguments.length?(t=Array.from(O),P()):t.slice()},M.rangeRound=function(O){return t=Array.from(O),r=tT,P()},M.clamp=function(O){return arguments.length?(d=O?!0:ws,P()):d!==ws},M.interpolate=function(O){return arguments.length?(r=O,P()):r},M.unknown=function(O){return arguments.length?(h=O,M):h},function(O,z){return n=O,l=z,P()}}function rT(){return Yw()(ws,ws)}function Ane(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Fb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Iy(e){return e=Fb(Math.abs(e)),e?e[1]:NaN}function Ine(e,t){return function(r,n){for(var l=r.length,h=[],d=0,o=e[0],_=0;l>0&&o>0&&(_+o+1>n&&(o=Math.max(1,n-_)),h.push(r.substring(l-=o,l+o)),!((_+=o+1)>n));)o=e[d=(d+1)%e.length];return h.reverse().join(t)}}function One(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Lne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w_(e){if(!(t=Lne.exec(e)))throw new Error("invalid format: "+e);var t;return new nT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}w_.prototype=nT.prototype;function nT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dne(e){e:for(var t=e.length,r=1,n=-1,l;r<t;++r)switch(e[r]){case".":n=l=r;break;case"0":n===0&&(n=r),l=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(l+1):e}var RB;function Rne(e,t){var r=Fb(e,t);if(!r)return e+"";var n=r[0],l=r[1],h=l-(RB=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,d=n.length;return h===d?n:h>d?n+new Array(h-d+1).join("0"):h>0?n.slice(0,h)+"."+n.slice(h):"0."+new Array(1-h).join("0")+Fb(e,Math.max(0,t+h-1))[0]}function eR(e,t){var r=Fb(e,t);if(!r)return e+"";var n=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+n:n.length>l+1?n.slice(0,l+1)+"."+n.slice(l+1):n+new Array(l-n.length+2).join("0")}const tR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ane,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eR(e*100,t),r:eR,s:Rne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rR(e){return e}var nR=Array.prototype.map,iR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jne(e){var t=e.grouping===void 0||e.thousands===void 0?rR:Ine(nR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?rR:One(nR.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function S(M){M=w_(M);var O=M.fill,z=M.align,B=M.sign,F=M.symbol,L=M.zero,K=M.width,Q=M.comma,re=M.precision,te=M.trim,ae=M.type;ae==="n"?(Q=!0,ae="g"):tR[ae]||(re===void 0&&(re=12),te=!0,ae="g"),(L||O==="0"&&z==="=")&&(L=!0,O="0",z="=");var he=F==="$"?r:F==="#"&&/[boxX]/.test(ae)?"0"+ae.toLowerCase():"",ne=F==="$"?n:/[%p]/.test(ae)?d:"",be=tR[ae],xe=/[defgprs%]/.test(ae);re=re===void 0?6:/[gprs]/.test(ae)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re));function $e(Ee){var Ne=he,Xe=ne,ut,pt,gt;if(ae==="c")Xe=be(Ee)+Xe,Ee="";else{Ee=+Ee;var wt=Ee<0||1/Ee<0;if(Ee=isNaN(Ee)?_:be(Math.abs(Ee),re),te&&(Ee=Dne(Ee)),wt&&+Ee==0&&B!=="+"&&(wt=!1),Ne=(wt?B==="("?B:o:B==="-"||B==="("?"":B)+Ne,Xe=(ae==="s"?iR[8+RB/3]:"")+Xe+(wt&&B==="("?")":""),xe){for(ut=-1,pt=Ee.length;++ut<pt;)if(gt=Ee.charCodeAt(ut),48>gt||gt>57){Xe=(gt===46?l+Ee.slice(ut+1):Ee.slice(ut))+Xe,Ee=Ee.slice(0,ut);break}}}Q&&!L&&(Ee=t(Ee,1/0));var je=Ne.length+Ee.length+Xe.length,Qe=je<K?new Array(K-je+1).join(O):"";switch(Q&&L&&(Ee=t(Qe+Ee,Qe.length?K-Xe.length:1/0),Qe=""),z){case"<":Ee=Ne+Ee+Xe+Qe;break;case"=":Ee=Ne+Qe+Ee+Xe;break;case"^":Ee=Qe.slice(0,je=Qe.length>>1)+Ne+Ee+Xe+Qe.slice(je);break;default:Ee=Qe+Ne+Ee+Xe;break}return h(Ee)}return $e.toString=function(){return M+""},$e}function P(M,O){var z=S((M=w_(M),M.type="f",M)),B=Math.max(-8,Math.min(8,Math.floor(Iy(O)/3)))*3,F=Math.pow(10,-B),L=iR[8+B/3];return function(K){return z(F*K)+L}}return{format:S,formatPrefix:P}}var wx,iT,jB;zne({thousands:",",grouping:[3],currency:["$",""]});function zne(e){return wx=jne(e),iT=wx.format,jB=wx.formatPrefix,wx}function Nne(e){return Math.max(0,-Iy(Math.abs(e)))}function Fne(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Iy(t)/3)))*3-Iy(Math.abs(e)))}function Bne(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Iy(t)-Iy(e))+1}function zB(e,t,r,n){var l=CE(e,t,r),h;switch(n=w_(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(h=Fne(l,d))&&(n.precision=h),jB(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(h=Bne(l,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=h-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(h=Nne(l))&&(n.precision=h-(n.type==="%")*2);break}}return iT(n)}function Ep(e){var t=e.domain;return e.ticks=function(r){var n=t();return PE(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var l=t();return zB(l[0],l[l.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),l=0,h=n.length-1,d=n[l],o=n[h],_,S,P=10;for(o<d&&(S=d,d=o,o=S,S=l,l=h,h=S);P-- >0;){if(S=EE(d,o,r),S===_)return n[l]=d,n[h]=o,t(n);if(S>0)d=Math.floor(d/S)*S,o=Math.ceil(o/S)*S;else if(S<0)d=Math.ceil(d*S)/S,o=Math.floor(o*S)/S;else break;_=S}return e},e}function NB(){var e=rT();return e.copy=function(){return Q_(e,NB())},wu.apply(e,arguments),Ep(e)}function FB(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Nb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return FB(e).unknown(t)},e=arguments.length?Array.from(e,Nb):[0,1],Ep(r)}function BB(e,t){e=e.slice();var r=0,n=e.length-1,l=e[r],h=e[n],d;return h<l&&(d=r,r=n,n=d,d=l,l=h,h=d),e[r]=t.floor(l),e[n]=t.ceil(h),e}function aR(e){return Math.log(e)}function oR(e){return Math.exp(e)}function Vne(e){return-Math.log(-e)}function $ne(e){return-Math.exp(-e)}function Une(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qne(e){return e===10?Une:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Gne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sR(e){return(t,r)=>-e(-t,r)}function aT(e){const t=e(aR,oR),r=t.domain;let n=10,l,h;function d(){return l=Gne(n),h=qne(n),r()[0]<0?(l=sR(l),h=sR(h),e(Vne,$ne)):e(aR,oR),t}return t.base=function(o){return arguments.length?(n=+o,d()):n},t.domain=function(o){return arguments.length?(r(o),d()):r()},t.ticks=o=>{const _=r();let S=_[0],P=_[_.length-1];const M=P<S;M&&([S,P]=[P,S]);let O=l(S),z=l(P),B,F;const L=o==null?10:+o;let K=[];if(!(n%1)&&z-O<L){if(O=Math.floor(O),z=Math.ceil(z),S>0){for(;O<=z;++O)for(B=1;B<n;++B)if(F=O<0?B/h(-O):B*h(O),!(F<S)){if(F>P)break;K.push(F)}}else for(;O<=z;++O)for(B=n-1;B>=1;--B)if(F=O>0?B/h(-O):B*h(O),!(F<S)){if(F>P)break;K.push(F)}K.length*2<L&&(K=PE(S,P,L))}else K=PE(O,z,Math.min(z-O,L)).map(h);return M?K.reverse():K},t.tickFormat=(o,_)=>{if(o==null&&(o=10),_==null&&(_=n===10?"s":","),typeof _!="function"&&(!(n%1)&&(_=w_(_)).precision==null&&(_.trim=!0),_=iT(_)),o===1/0)return _;const S=Math.max(1,n*o/t.ticks().length);return P=>{let M=P/h(Math.round(l(P)));return M*n<n-.5&&(M*=n),M<=S?_(P):""}},t.nice=()=>r(BB(r(),{floor:o=>h(Math.floor(l(o))),ceil:o=>h(Math.ceil(l(o)))})),t}function VB(){const e=aT(Yw()).domain([1,10]);return e.copy=()=>Q_(e,VB()).base(e.base()),wu.apply(e,arguments),e}function lR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oT(e){var t=1,r=e(lR(t),uR(t));return r.constant=function(n){return arguments.length?e(lR(t=+n),uR(t)):t},Ep(r)}function $B(){var e=oT(Yw());return e.copy=function(){return Q_(e,$B()).constant(e.constant())},wu.apply(e,arguments)}function cR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Wne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hne(e){return e<0?-e*e:e*e}function sT(e){var t=e(ws,ws),r=1;function n(){return r===1?e(ws,ws):r===.5?e(Wne,Hne):e(cR(r),cR(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,n()):r},Ep(t)}function lT(){var e=sT(Yw());return e.copy=function(){return Q_(e,lT()).exponent(e.exponent())},wu.apply(e,arguments),e}function Zne(){return lT.apply(null,arguments).exponent(.5)}function hR(e){return Math.sign(e)*e*e}function Kne(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function UB(){var e=rT(),t=[0,1],r=!1,n;function l(h){var d=Kne(e(h));return isNaN(d)?n:r?Math.round(d):d}return l.invert=function(h){return e.invert(hR(h))},l.domain=function(h){return arguments.length?(e.domain(h),l):e.domain()},l.range=function(h){return arguments.length?(e.range((t=Array.from(h,Nb)).map(hR)),l):t.slice()},l.rangeRound=function(h){return l.range(h).round(!0)},l.round=function(h){return arguments.length?(r=!!h,l):r},l.clamp=function(h){return arguments.length?(e.clamp(h),l):e.clamp()},l.unknown=function(h){return arguments.length?(n=h,l):n},l.copy=function(){return UB(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},wu.apply(l,arguments),Ep(l)}function qB(){var e=[],t=[],r=[],n;function l(){var d=0,o=Math.max(1,t.length);for(r=new Array(o-1);++d<o;)r[d-1]=Jre(e,d/o);return h}function h(d){return d==null||isNaN(d=+d)?n:t[X_(r,d)]}return h.invertExtent=function(d){var o=t.indexOf(d);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},h.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let o of d)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(mp),l()},h.range=function(d){return arguments.length?(t=Array.from(d),l()):t.slice()},h.unknown=function(d){return arguments.length?(n=d,h):n},h.quantiles=function(){return r.slice()},h.copy=function(){return qB().domain(e).range(t).unknown(n)},wu.apply(h,arguments)}function GB(){var e=0,t=1,r=1,n=[.5],l=[0,1],h;function d(_){return _!=null&&_<=_?l[X_(n,_,0,r)]:h}function o(){var _=-1;for(n=new Array(r);++_<r;)n[_]=((_+1)*t-(_-r)*e)/(r+1);return d}return d.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,o()):[e,t]},d.range=function(_){return arguments.length?(r=(l=Array.from(_)).length-1,o()):l.slice()},d.invertExtent=function(_){var S=l.indexOf(_);return S<0?[NaN,NaN]:S<1?[e,n[0]]:S>=r?[n[r-1],t]:[n[S-1],n[S]]},d.unknown=function(_){return arguments.length&&(h=_),d},d.thresholds=function(){return n.slice()},d.copy=function(){return GB().domain([e,t]).range(l).unknown(h)},wu.apply(Ep(d),arguments)}function WB(){var e=[.5],t=[0,1],r,n=1;function l(h){return h!=null&&h<=h?t[X_(e,h,0,n)]:r}return l.domain=function(h){return arguments.length?(e=Array.from(h),n=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(h){return arguments.length?(t=Array.from(h),n=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(h){var d=t.indexOf(h);return[e[d-1],e[d]]},l.unknown=function(h){return arguments.length?(r=h,l):r},l.copy=function(){return WB().domain(e).range(t).unknown(r)},wu.apply(l,arguments)}const HP=new Date,ZP=new Date;function Ka(e,t,r,n){function l(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return l.floor=h=>(e(h=new Date(+h)),h),l.ceil=h=>(e(h=new Date(h-1)),t(h,1),e(h),h),l.round=h=>{const d=l(h),o=l.ceil(h);return h-d<o-h?d:o},l.offset=(h,d)=>(t(h=new Date(+h),d==null?1:Math.floor(d)),h),l.range=(h,d,o)=>{const _=[];if(h=l.ceil(h),o=o==null?1:Math.floor(o),!(h<d)||!(o>0))return _;let S;do _.push(S=new Date(+h)),t(h,o),e(h);while(S<h&&h<d);return _},l.filter=h=>Ka(d=>{if(d>=d)for(;e(d),!h(d);)d.setTime(d-1)},(d,o)=>{if(d>=d)if(o<0)for(;++o<=0;)for(;t(d,-1),!h(d););else for(;--o>=0;)for(;t(d,1),!h(d););}),r&&(l.count=(h,d)=>(HP.setTime(+h),ZP.setTime(+d),e(HP),e(ZP),Math.floor(r(HP,ZP))),l.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?l.filter(n?d=>n(d)%h===0:d=>l.count(0,d)%h===0):l)),l}const Bb=Ka(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ka(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Bb);Bb.range;const Pd=1e3,mu=Pd*60,Ed=mu*60,Od=Ed*24,uT=Od*7,dR=Od*30,KP=Od*365,Om=Ka(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getUTCSeconds());Om.range;const cT=Ka(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pd)},(e,t)=>{e.setTime(+e+t*mu)},(e,t)=>(t-e)/mu,e=>e.getMinutes());cT.range;const hT=Ka(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mu)},(e,t)=>(t-e)/mu,e=>e.getUTCMinutes());hT.range;const dT=Ka(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Pd-e.getMinutes()*mu)},(e,t)=>{e.setTime(+e+t*Ed)},(e,t)=>(t-e)/Ed,e=>e.getHours());dT.range;const fT=Ka(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ed)},(e,t)=>(t-e)/Ed,e=>e.getUTCHours());fT.range;const J_=Ka(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mu)/Od,e=>e.getDate()-1);J_.range;const Qw=Ka(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Od,e=>e.getUTCDate()-1);Qw.range;const HB=Ka(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Od,e=>Math.floor(e/Od));HB.range;function ag(e){return Ka(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*mu)/uT)}const Jw=ag(0),Vb=ag(1),Xne=ag(2),Yne=ag(3),Oy=ag(4),Qne=ag(5),Jne=ag(6);Jw.range;Vb.range;Xne.range;Yne.range;Oy.range;Qne.range;Jne.range;function og(e){return Ka(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/uT)}const e1=og(0),$b=og(1),eie=og(2),tie=og(3),Ly=og(4),rie=og(5),nie=og(6);e1.range;$b.range;eie.range;tie.range;Ly.range;rie.range;nie.range;const pT=Ka(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pT.range;const mT=Ka(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mT.range;const Ld=Ka(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ld.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ka(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ld.range;const Dd=Ka(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Dd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ka(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Dd.range;function ZB(e,t,r,n,l,h){const d=[[Om,1,Pd],[Om,5,5*Pd],[Om,15,15*Pd],[Om,30,30*Pd],[h,1,mu],[h,5,5*mu],[h,15,15*mu],[h,30,30*mu],[l,1,Ed],[l,3,3*Ed],[l,6,6*Ed],[l,12,12*Ed],[n,1,Od],[n,2,2*Od],[r,1,uT],[t,1,dR],[t,3,3*dR],[e,1,KP]];function o(S,P,M){const O=P<S;O&&([S,P]=[P,S]);const z=M&&typeof M.range=="function"?M:_(S,P,M),B=z?z.range(S,+P+1):[];return O?B.reverse():B}function _(S,P,M){const O=Math.abs(P-S)/M,z=XC(([,,L])=>L).right(d,O);if(z===d.length)return e.every(CE(S/KP,P/KP,M));if(z===0)return Bb.every(Math.max(CE(S,P,M),1));const[B,F]=d[O/d[z-1][2]<d[z][2]/O?z-1:z];return B.every(F)}return[o,_]}const[iie,aie]=ZB(Dd,mT,e1,HB,fT,hT),[oie,sie]=ZB(Ld,pT,Jw,J_,dT,cT);function XP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function YP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lie(e){var t=e.dateTime,r=e.date,n=e.time,l=e.periods,h=e.days,d=e.shortDays,o=e.months,_=e.shortMonths,S=Wv(l),P=Hv(l),M=Wv(h),O=Hv(h),z=Wv(d),B=Hv(d),F=Wv(o),L=Hv(o),K=Wv(_),Q=Hv(_),re={a:wt,A:je,b:Qe,B:yt,c:null,d:vR,e:vR,f:Iie,g:Vie,G:Uie,H:Mie,I:kie,j:Aie,L:KB,m:Oie,M:Lie,p:Oe,q:et,Q:bR,s:wR,S:Die,u:Rie,U:jie,V:zie,w:Nie,W:Fie,x:null,X:null,y:Bie,Y:$ie,Z:qie,"%":xR},te={a:Mt,A:Dt,b:Ke,B:tr,c:null,d:_R,e:_R,f:Zie,g:iae,G:oae,H:Gie,I:Wie,j:Hie,L:YB,m:Kie,M:Xie,p:Ft,q:$t,Q:bR,s:wR,S:Yie,u:Qie,U:Jie,V:eae,w:tae,W:rae,x:null,X:null,y:nae,Y:aae,Z:sae,"%":xR},ae={a:$e,A:Ee,b:Ne,B:Xe,c:ut,d:gR,e:gR,f:Pie,g:mR,G:pR,H:yR,I:yR,j:xie,L:Sie,m:_ie,M:bie,p:xe,q:vie,Q:Cie,s:Tie,S:wie,u:fie,U:pie,V:mie,w:die,W:gie,x:pt,X:gt,y:mR,Y:pR,Z:yie,"%":Eie};re.x=he(r,re),re.X=he(n,re),re.c=he(t,re),te.x=he(r,te),te.X=he(n,te),te.c=he(t,te);function he(ct,Lt){return function(ir){var St=[],Gr=-1,Tr=0,wr=ct.length,tn,Wr,Xi;for(ir instanceof Date||(ir=new Date(+ir));++Gr<wr;)ct.charCodeAt(Gr)===37&&(St.push(ct.slice(Tr,Gr)),(Wr=fR[tn=ct.charAt(++Gr)])!=null?tn=ct.charAt(++Gr):Wr=tn==="e"?" ":"0",(Xi=Lt[tn])&&(tn=Xi(ir,Wr)),St.push(tn),Tr=Gr+1);return St.push(ct.slice(Tr,Gr)),St.join("")}}function ne(ct,Lt){return function(ir){var St=Gv(1900,void 0,1),Gr=be(St,ct,ir+="",0),Tr,wr;if(Gr!=ir.length)return null;if("Q"in St)return new Date(St.Q);if("s"in St)return new Date(St.s*1e3+("L"in St?St.L:0));if(Lt&&!("Z"in St)&&(St.Z=0),"p"in St&&(St.H=St.H%12+St.p*12),St.m===void 0&&(St.m="q"in St?St.q:0),"V"in St){if(St.V<1||St.V>53)return null;"w"in St||(St.w=1),"Z"in St?(Tr=YP(Gv(St.y,0,1)),wr=Tr.getUTCDay(),Tr=wr>4||wr===0?$b.ceil(Tr):$b(Tr),Tr=Qw.offset(Tr,(St.V-1)*7),St.y=Tr.getUTCFullYear(),St.m=Tr.getUTCMonth(),St.d=Tr.getUTCDate()+(St.w+6)%7):(Tr=XP(Gv(St.y,0,1)),wr=Tr.getDay(),Tr=wr>4||wr===0?Vb.ceil(Tr):Vb(Tr),Tr=J_.offset(Tr,(St.V-1)*7),St.y=Tr.getFullYear(),St.m=Tr.getMonth(),St.d=Tr.getDate()+(St.w+6)%7)}else("W"in St||"U"in St)&&("w"in St||(St.w="u"in St?St.u%7:"W"in St?1:0),wr="Z"in St?YP(Gv(St.y,0,1)).getUTCDay():XP(Gv(St.y,0,1)).getDay(),St.m=0,St.d="W"in St?(St.w+6)%7+St.W*7-(wr+5)%7:St.w+St.U*7-(wr+6)%7);return"Z"in St?(St.H+=St.Z/100|0,St.M+=St.Z%100,YP(St)):XP(St)}}function be(ct,Lt,ir,St){for(var Gr=0,Tr=Lt.length,wr=ir.length,tn,Wr;Gr<Tr;){if(St>=wr)return-1;if(tn=Lt.charCodeAt(Gr++),tn===37){if(tn=Lt.charAt(Gr++),Wr=ae[tn in fR?Lt.charAt(Gr++):tn],!Wr||(St=Wr(ct,ir,St))<0)return-1}else if(tn!=ir.charCodeAt(St++))return-1}return St}function xe(ct,Lt,ir){var St=S.exec(Lt.slice(ir));return St?(ct.p=P.get(St[0].toLowerCase()),ir+St[0].length):-1}function $e(ct,Lt,ir){var St=z.exec(Lt.slice(ir));return St?(ct.w=B.get(St[0].toLowerCase()),ir+St[0].length):-1}function Ee(ct,Lt,ir){var St=M.exec(Lt.slice(ir));return St?(ct.w=O.get(St[0].toLowerCase()),ir+St[0].length):-1}function Ne(ct,Lt,ir){var St=K.exec(Lt.slice(ir));return St?(ct.m=Q.get(St[0].toLowerCase()),ir+St[0].length):-1}function Xe(ct,Lt,ir){var St=F.exec(Lt.slice(ir));return St?(ct.m=L.get(St[0].toLowerCase()),ir+St[0].length):-1}function ut(ct,Lt,ir){return be(ct,t,Lt,ir)}function pt(ct,Lt,ir){return be(ct,r,Lt,ir)}function gt(ct,Lt,ir){return be(ct,n,Lt,ir)}function wt(ct){return d[ct.getDay()]}function je(ct){return h[ct.getDay()]}function Qe(ct){return _[ct.getMonth()]}function yt(ct){return o[ct.getMonth()]}function Oe(ct){return l[+(ct.getHours()>=12)]}function et(ct){return 1+~~(ct.getMonth()/3)}function Mt(ct){return d[ct.getUTCDay()]}function Dt(ct){return h[ct.getUTCDay()]}function Ke(ct){return _[ct.getUTCMonth()]}function tr(ct){return o[ct.getUTCMonth()]}function Ft(ct){return l[+(ct.getUTCHours()>=12)]}function $t(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var Lt=he(ct+="",re);return Lt.toString=function(){return ct},Lt},parse:function(ct){var Lt=ne(ct+="",!1);return Lt.toString=function(){return ct},Lt},utcFormat:function(ct){var Lt=he(ct+="",te);return Lt.toString=function(){return ct},Lt},utcParse:function(ct){var Lt=ne(ct+="",!0);return Lt.toString=function(){return ct},Lt}}}var fR={"-":"",_:" ",0:"0"},wo=/^\s*\d+/,uie=/^%/,cie=/[\\^$*+?|[\]().{}]/g;function Fn(e,t,r){var n=e<0?"-":"",l=(n?-e:e)+"",h=l.length;return n+(h<r?new Array(r-h+1).join(t)+l:l)}function hie(e){return e.replace(cie,"\\$&")}function Wv(e){return new RegExp("^(?:"+e.map(hie).join("|")+")","i")}function Hv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function die(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function fie(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function pie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function mie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function gie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pR(e,t,r){var n=wo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function mR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function yie(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function vie(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function _ie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function gR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function xie(e,t,r){var n=wo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function yR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function bie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function wie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Sie(e,t,r){var n=wo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Pie(e,t,r){var n=wo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Eie(e,t,r){var n=uie.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Cie(e,t,r){var n=wo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Tie(e,t,r){var n=wo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function vR(e,t){return Fn(e.getDate(),t,2)}function Mie(e,t){return Fn(e.getHours(),t,2)}function kie(e,t){return Fn(e.getHours()%12||12,t,2)}function Aie(e,t){return Fn(1+J_.count(Ld(e),e),t,3)}function KB(e,t){return Fn(e.getMilliseconds(),t,3)}function Iie(e,t){return KB(e,t)+"000"}function Oie(e,t){return Fn(e.getMonth()+1,t,2)}function Lie(e,t){return Fn(e.getMinutes(),t,2)}function Die(e,t){return Fn(e.getSeconds(),t,2)}function Rie(e){var t=e.getDay();return t===0?7:t}function jie(e,t){return Fn(Jw.count(Ld(e)-1,e),t,2)}function XB(e){var t=e.getDay();return t>=4||t===0?Oy(e):Oy.ceil(e)}function zie(e,t){return e=XB(e),Fn(Oy.count(Ld(e),e)+(Ld(e).getDay()===4),t,2)}function Nie(e){return e.getDay()}function Fie(e,t){return Fn(Vb.count(Ld(e)-1,e),t,2)}function Bie(e,t){return Fn(e.getFullYear()%100,t,2)}function Vie(e,t){return e=XB(e),Fn(e.getFullYear()%100,t,2)}function $ie(e,t){return Fn(e.getFullYear()%1e4,t,4)}function Uie(e,t){var r=e.getDay();return e=r>=4||r===0?Oy(e):Oy.ceil(e),Fn(e.getFullYear()%1e4,t,4)}function qie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fn(t/60|0,"0",2)+Fn(t%60,"0",2)}function _R(e,t){return Fn(e.getUTCDate(),t,2)}function Gie(e,t){return Fn(e.getUTCHours(),t,2)}function Wie(e,t){return Fn(e.getUTCHours()%12||12,t,2)}function Hie(e,t){return Fn(1+Qw.count(Dd(e),e),t,3)}function YB(e,t){return Fn(e.getUTCMilliseconds(),t,3)}function Zie(e,t){return YB(e,t)+"000"}function Kie(e,t){return Fn(e.getUTCMonth()+1,t,2)}function Xie(e,t){return Fn(e.getUTCMinutes(),t,2)}function Yie(e,t){return Fn(e.getUTCSeconds(),t,2)}function Qie(e){var t=e.getUTCDay();return t===0?7:t}function Jie(e,t){return Fn(e1.count(Dd(e)-1,e),t,2)}function QB(e){var t=e.getUTCDay();return t>=4||t===0?Ly(e):Ly.ceil(e)}function eae(e,t){return e=QB(e),Fn(Ly.count(Dd(e),e)+(Dd(e).getUTCDay()===4),t,2)}function tae(e){return e.getUTCDay()}function rae(e,t){return Fn($b.count(Dd(e)-1,e),t,2)}function nae(e,t){return Fn(e.getUTCFullYear()%100,t,2)}function iae(e,t){return e=QB(e),Fn(e.getUTCFullYear()%100,t,2)}function aae(e,t){return Fn(e.getUTCFullYear()%1e4,t,4)}function oae(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ly(e):Ly.ceil(e),Fn(e.getUTCFullYear()%1e4,t,4)}function sae(){return"+0000"}function xR(){return"%"}function bR(e){return+e}function wR(e){return Math.floor(+e/1e3)}var Kg,JB,e5;lae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lae(e){return Kg=lie(e),JB=Kg.format,Kg.parse,e5=Kg.utcFormat,Kg.utcParse,Kg}function uae(e){return new Date(e)}function cae(e){return e instanceof Date?+e:+new Date(+e)}function gT(e,t,r,n,l,h,d,o,_,S){var P=rT(),M=P.invert,O=P.domain,z=S(".%L"),B=S(":%S"),F=S("%I:%M"),L=S("%I %p"),K=S("%a %d"),Q=S("%b %d"),re=S("%B"),te=S("%Y");function ae(he){return(_(he)<he?z:o(he)<he?B:d(he)<he?F:h(he)<he?L:n(he)<he?l(he)<he?K:Q:r(he)<he?re:te)(he)}return P.invert=function(he){return new Date(M(he))},P.domain=function(he){return arguments.length?O(Array.from(he,cae)):O().map(uae)},P.ticks=function(he){var ne=O();return e(ne[0],ne[ne.length-1],he??10)},P.tickFormat=function(he,ne){return ne==null?ae:S(ne)},P.nice=function(he){var ne=O();return(!he||typeof he.range!="function")&&(he=t(ne[0],ne[ne.length-1],he??10)),he?O(BB(ne,he)):P},P.copy=function(){return Q_(P,gT(e,t,r,n,l,h,d,o,_,S))},P}function hae(){return wu.apply(gT(oie,sie,Ld,pT,Jw,J_,dT,cT,Om,JB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dae(){return wu.apply(gT(iie,aie,Dd,mT,e1,Qw,fT,hT,Om,e5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t1(){var e=0,t=1,r,n,l,h,d=ws,o=!1,_;function S(M){return M==null||isNaN(M=+M)?_:d(l===0?.5:(M=(h(M)-r)*l,o?Math.max(0,Math.min(1,M)):M))}S.domain=function(M){return arguments.length?([e,t]=M,r=h(e=+e),n=h(t=+t),l=r===n?0:1/(n-r),S):[e,t]},S.clamp=function(M){return arguments.length?(o=!!M,S):o},S.interpolator=function(M){return arguments.length?(d=M,S):d};function P(M){return function(O){var z,B;return arguments.length?([z,B]=O,d=M(z,B),S):[d(0),d(1)]}}return S.range=P(Wy),S.rangeRound=P(tT),S.unknown=function(M){return arguments.length?(_=M,S):_},function(M){return h=M,r=M(e),n=M(t),l=r===n?0:1/(n-r),S}}function Cp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function t5(){var e=Ep(t1()(ws));return e.copy=function(){return Cp(e,t5())},Bd.apply(e,arguments)}function r5(){var e=aT(t1()).domain([1,10]);return e.copy=function(){return Cp(e,r5()).base(e.base())},Bd.apply(e,arguments)}function n5(){var e=oT(t1());return e.copy=function(){return Cp(e,n5()).constant(e.constant())},Bd.apply(e,arguments)}function yT(){var e=sT(t1());return e.copy=function(){return Cp(e,yT()).exponent(e.exponent())},Bd.apply(e,arguments)}function fae(){return yT.apply(null,arguments).exponent(.5)}function i5(){var e=[],t=ws;function r(n){if(n!=null&&!isNaN(n=+n))return t((X_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let l of n)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(mp),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,l)=>t(l/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(l,h)=>Qre(e,h/n))},r.copy=function(){return i5(t).domain(e)},Bd.apply(r,arguments)}function r1(){var e=0,t=.5,r=1,n=1,l,h,d,o,_,S=ws,P,M=!1,O;function z(F){return isNaN(F=+F)?O:(F=.5+((F=+P(F))-h)*(n*F<n*h?o:_),S(M?Math.max(0,Math.min(1,F)):F))}z.domain=function(F){return arguments.length?([e,t,r]=F,l=P(e=+e),h=P(t=+t),d=P(r=+r),o=l===h?0:.5/(h-l),_=h===d?0:.5/(d-h),n=h<l?-1:1,z):[e,t,r]},z.clamp=function(F){return arguments.length?(M=!!F,z):M},z.interpolator=function(F){return arguments.length?(S=F,z):S};function B(F){return function(L){var K,Q,re;return arguments.length?([K,Q,re]=L,S=Ene(F,[K,Q,re]),z):[S(0),S(.5),S(1)]}}return z.range=B(Wy),z.rangeRound=B(tT),z.unknown=function(F){return arguments.length?(O=F,z):O},function(F){return P=F,l=F(e),h=F(t),d=F(r),o=l===h?0:.5/(h-l),_=h===d?0:.5/(d-h),n=h<l?-1:1,z}}function a5(){var e=Ep(r1()(ws));return e.copy=function(){return Cp(e,a5())},Bd.apply(e,arguments)}function o5(){var e=aT(r1()).domain([.1,1,10]);return e.copy=function(){return Cp(e,o5()).base(e.base())},Bd.apply(e,arguments)}function s5(){var e=oT(r1());return e.copy=function(){return Cp(e,s5()).constant(e.constant())},Bd.apply(e,arguments)}function vT(){var e=sT(r1());return e.copy=function(){return Cp(e,vT()).exponent(e.exponent())},Bd.apply(e,arguments)}function pae(){return vT.apply(null,arguments).exponent(.5)}const Jv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:QC,scaleDiverging:a5,scaleDivergingLog:o5,scaleDivergingPow:vT,scaleDivergingSqrt:pae,scaleDivergingSymlog:s5,scaleIdentity:FB,scaleImplicit:TE,scaleLinear:NB,scaleLog:VB,scaleOrdinal:YC,scalePoint:tne,scalePow:lT,scaleQuantile:qB,scaleQuantize:GB,scaleRadial:UB,scaleSequential:t5,scaleSequentialLog:r5,scaleSequentialPow:yT,scaleSequentialQuantile:i5,scaleSequentialSqrt:fae,scaleSequentialSymlog:n5,scaleSqrt:Zne,scaleSymlog:$B,scaleThreshold:WB,scaleTime:hae,scaleUtc:dae,tickFormat:zB},Symbol.toStringTag,{value:"Module"}));var Tp=e=>e.chartData,mae=Tt([Tp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),n1=(e,t,r,n)=>n?mae(e):Tp(e);function _p(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ai(t)&&Ai(r))return!0}return!1}function SR(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function l5(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,l,h;if(Ai(r))l=r;else if(typeof r=="function")return;if(Ai(n))h=n;else if(typeof n=="function")return;var d=[l,h];if(_p(d))return d}}function gae(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(_p(n))return SR(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[l,h]=e,d,o;if(l==="auto")t!=null&&(d=Math.min(...t));else if(_r(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t==null?void 0:t[0]))}catch{}else if(typeof l=="string"&&YL.test(l)){var _=YL.exec(l);if(_==null||t==null)d=void 0;else{var S=+_[1];d=t[0]-S}}else d=t==null?void 0:t[0];if(h==="auto")t!=null&&(o=Math.max(...t));else if(_r(h))o=h;else if(typeof h=="function")try{t!=null&&(o=h(t==null?void 0:t[1]))}catch{}else if(typeof h=="string"&&QL.test(h)){var P=QL.exec(h);if(P==null||t==null)o=void 0;else{var M=+P[1];o=t[1]+M}}else o=t==null?void 0:t[1];var O=[d,o];if(_p(O))return t==null?O:SR(O,t,r)}}}var Hy=1e9,yae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xT,Vi=!0,xu="[DecimalError] ",Wm=xu+"Invalid argument: ",_T=xu+"Exponent out of range: ",Zy=Math.floor,Em=Math.pow,vae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ml,_o=1e7,Mi=7,u5=9007199254740991,Ub=Zy(u5/Mi),br={};br.absoluteValue=br.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};br.comparedTo=br.cmp=function(e){var t,r,n,l,h=this;if(e=new h.constructor(e),h.s!==e.s)return h.s||-e.s;if(h.e!==e.e)return h.e>e.e^h.s<0?1:-1;for(n=h.d.length,l=e.d.length,t=0,r=n<l?n:l;t<r;++t)if(h.d[t]!==e.d[t])return h.d[t]>e.d[t]^h.s<0?1:-1;return n===l?0:n>l^h.s<0?1:-1};br.decimalPlaces=br.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mi;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};br.dividedBy=br.div=function(e){return Cd(this,new this.constructor(e))};br.dividedToIntegerBy=br.idiv=function(e){var t=this,r=t.constructor;return _i(Cd(t,new r(e),0,1),r.precision)};br.equals=br.eq=function(e){return!this.cmp(e)};br.exponent=function(){return Oa(this)};br.greaterThan=br.gt=function(e){return this.cmp(e)>0};br.greaterThanOrEqualTo=br.gte=function(e){return this.cmp(e)>=0};br.isInteger=br.isint=function(){return this.e>this.d.length-2};br.isNegative=br.isneg=function(){return this.s<0};br.isPositive=br.ispos=function(){return this.s>0};br.isZero=function(){return this.s===0};br.lessThan=br.lt=function(e){return this.cmp(e)<0};br.lessThanOrEqualTo=br.lte=function(e){return this.cmp(e)<1};br.logarithm=br.log=function(e){var t,r=this,n=r.constructor,l=n.precision,h=l+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ml))throw Error(xu+"NaN");if(r.s<1)throw Error(xu+(r.s?"NaN":"-Infinity"));return r.eq(Ml)?new n(0):(Vi=!1,t=Cd(S_(r,h),S_(e,h),h),Vi=!0,_i(t,l))};br.minus=br.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?d5(t,e):c5(t,(e.s=-e.s,e))};br.modulo=br.mod=function(e){var t,r=this,n=r.constructor,l=n.precision;if(e=new n(e),!e.s)throw Error(xu+"NaN");return r.s?(Vi=!1,t=Cd(r,e,0,1).times(e),Vi=!0,r.minus(t)):_i(new n(r),l)};br.naturalExponential=br.exp=function(){return h5(this)};br.naturalLogarithm=br.ln=function(){return S_(this)};br.negated=br.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};br.plus=br.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?c5(t,e):d5(t,(e.s=-e.s,e))};br.precision=br.sd=function(e){var t,r,n,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Wm+e);if(t=Oa(l)+1,n=l.d.length-1,r=n*Mi+1,n=l.d[n],n){for(;n%10==0;n/=10)r--;for(n=l.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};br.squareRoot=br.sqrt=function(){var e,t,r,n,l,h,d,o=this,_=o.constructor;if(o.s<1){if(!o.s)return new _(0);throw Error(xu+"NaN")}for(e=Oa(o),Vi=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=gh(o.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Zy((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new _(t)):n=new _(l.toString()),r=_.precision,l=d=r+3;;)if(h=n,n=h.plus(Cd(o,h,d+2)).times(.5),gh(h.d).slice(0,d)===(t=gh(n.d)).slice(0,d)){if(t=t.slice(d-3,d+1),l==d&&t=="4999"){if(_i(h,r+1,0),h.times(h).eq(o)){n=h;break}}else if(t!="9999")break;d+=4}return Vi=!0,_i(n,r)};br.times=br.mul=function(e){var t,r,n,l,h,d,o,_,S,P=this,M=P.constructor,O=P.d,z=(e=new M(e)).d;if(!P.s||!e.s)return new M(0);for(e.s*=P.s,r=P.e+e.e,_=O.length,S=z.length,_<S&&(h=O,O=z,z=h,d=_,_=S,S=d),h=[],d=_+S,n=d;n--;)h.push(0);for(n=S;--n>=0;){for(t=0,l=_+n;l>n;)o=h[l]+z[n]*O[l-n-1]+t,h[l--]=o%_o|0,t=o/_o|0;h[l]=(h[l]+t)%_o|0}for(;!h[--d];)h.pop();return t?++r:h.shift(),e.d=h,e.e=r,Vi?_i(e,M.precision):e};br.toDecimalPlaces=br.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Sh(e,0,Hy),t===void 0?t=n.rounding:Sh(t,0,8),_i(r,e+Oa(r)+1,t))};br.toExponential=function(e,t){var r,n=this,l=n.constructor;return e===void 0?r=Jm(n,!0):(Sh(e,0,Hy),t===void 0?t=l.rounding:Sh(t,0,8),n=_i(new l(n),e+1,t),r=Jm(n,!0,e+1)),r};br.toFixed=function(e,t){var r,n,l=this,h=l.constructor;return e===void 0?Jm(l):(Sh(e,0,Hy),t===void 0?t=h.rounding:Sh(t,0,8),n=_i(new h(l),e+Oa(l)+1,t),r=Jm(n.abs(),!1,e+Oa(n)+1),l.isneg()&&!l.isZero()?"-"+r:r)};br.toInteger=br.toint=function(){var e=this,t=e.constructor;return _i(new t(e),Oa(e)+1,t.rounding)};br.toNumber=function(){return+this};br.toPower=br.pow=function(e){var t,r,n,l,h,d,o=this,_=o.constructor,S=12,P=+(e=new _(e));if(!e.s)return new _(Ml);if(o=new _(o),!o.s){if(e.s<1)throw Error(xu+"Infinity");return o}if(o.eq(Ml))return o;if(n=_.precision,e.eq(Ml))return _i(o,n);if(t=e.e,r=e.d.length-1,d=t>=r,h=o.s,d){if((r=P<0?-P:P)<=u5){for(l=new _(Ml),t=Math.ceil(n/Mi+4),Vi=!1;r%2&&(l=l.times(o),ER(l.d,t)),r=Zy(r/2),r!==0;)o=o.times(o),ER(o.d,t);return Vi=!0,e.s<0?new _(Ml).div(l):_i(l,n)}}else if(h<0)throw Error(xu+"NaN");return h=h<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Vi=!1,l=e.times(S_(o,n+S)),Vi=!0,l=h5(l),l.s=h,l};br.toPrecision=function(e,t){var r,n,l=this,h=l.constructor;return e===void 0?(r=Oa(l),n=Jm(l,r<=h.toExpNeg||r>=h.toExpPos)):(Sh(e,1,Hy),t===void 0?t=h.rounding:Sh(t,0,8),l=_i(new h(l),e,t),r=Oa(l),n=Jm(l,e<=r||r<=h.toExpNeg,e)),n};br.toSignificantDigits=br.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Sh(e,1,Hy),t===void 0?t=n.rounding:Sh(t,0,8)),_i(new n(r),e,t)};br.toString=br.valueOf=br.val=br.toJSON=br[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Oa(e),r=e.constructor;return Jm(e,t<=r.toExpNeg||t>=r.toExpPos)};function c5(e,t){var r,n,l,h,d,o,_,S,P=e.constructor,M=P.precision;if(!e.s||!t.s)return t.s||(t=new P(e)),Vi?_i(t,M):t;if(_=e.d,S=t.d,d=e.e,l=t.e,_=_.slice(),h=d-l,h){for(h<0?(n=_,h=-h,o=S.length):(n=S,l=d,o=_.length),d=Math.ceil(M/Mi),o=d>o?d+1:o+1,h>o&&(h=o,n.length=1),n.reverse();h--;)n.push(0);n.reverse()}for(o=_.length,h=S.length,o-h<0&&(h=o,n=S,S=_,_=n),r=0;h;)r=(_[--h]=_[h]+S[h]+r)/_o|0,_[h]%=_o;for(r&&(_.unshift(r),++l),o=_.length;_[--o]==0;)_.pop();return t.d=_,t.e=l,Vi?_i(t,M):t}function Sh(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Wm+e)}function gh(e){var t,r,n,l=e.length-1,h="",d=e[0];if(l>0){for(h+=d,t=1;t<l;t++)n=e[t]+"",r=Mi-n.length,r&&(h+=Yf(r)),h+=n;d=e[t],n=d+"",r=Mi-n.length,r&&(h+=Yf(r))}else if(d===0)return"0";for(;d%10===0;)d/=10;return h+d}var Cd=(function(){function e(n,l){var h,d=0,o=n.length;for(n=n.slice();o--;)h=n[o]*l+d,n[o]=h%_o|0,d=h/_o|0;return d&&n.unshift(d),n}function t(n,l,h,d){var o,_;if(h!=d)_=h>d?1:-1;else for(o=_=0;o<h;o++)if(n[o]!=l[o]){_=n[o]>l[o]?1:-1;break}return _}function r(n,l,h){for(var d=0;h--;)n[h]-=d,d=n[h]<l[h]?1:0,n[h]=d*_o+n[h]-l[h];for(;!n[0]&&n.length>1;)n.shift()}return function(n,l,h,d){var o,_,S,P,M,O,z,B,F,L,K,Q,re,te,ae,he,ne,be,xe=n.constructor,$e=n.s==l.s?1:-1,Ee=n.d,Ne=l.d;if(!n.s)return new xe(n);if(!l.s)throw Error(xu+"Division by zero");for(_=n.e-l.e,ne=Ne.length,ae=Ee.length,z=new xe($e),B=z.d=[],S=0;Ne[S]==(Ee[S]||0);)++S;if(Ne[S]>(Ee[S]||0)&&--_,h==null?Q=h=xe.precision:d?Q=h+(Oa(n)-Oa(l))+1:Q=h,Q<0)return new xe(0);if(Q=Q/Mi+2|0,S=0,ne==1)for(P=0,Ne=Ne[0],Q++;(S<ae||P)&&Q--;S++)re=P*_o+(Ee[S]||0),B[S]=re/Ne|0,P=re%Ne|0;else{for(P=_o/(Ne[0]+1)|0,P>1&&(Ne=e(Ne,P),Ee=e(Ee,P),ne=Ne.length,ae=Ee.length),te=ne,F=Ee.slice(0,ne),L=F.length;L<ne;)F[L++]=0;be=Ne.slice(),be.unshift(0),he=Ne[0],Ne[1]>=_o/2&&++he;do P=0,o=t(Ne,F,ne,L),o<0?(K=F[0],ne!=L&&(K=K*_o+(F[1]||0)),P=K/he|0,P>1?(P>=_o&&(P=_o-1),M=e(Ne,P),O=M.length,L=F.length,o=t(M,F,O,L),o==1&&(P--,r(M,ne<O?be:Ne,O))):(P==0&&(o=P=1),M=Ne.slice()),O=M.length,O<L&&M.unshift(0),r(F,M,L),o==-1&&(L=F.length,o=t(Ne,F,ne,L),o<1&&(P++,r(F,ne<L?be:Ne,L))),L=F.length):o===0&&(P++,F=[0]),B[S++]=P,o&&F[0]?F[L++]=Ee[te]||0:(F=[Ee[te]],L=1);while((te++<ae||F[0]!==void 0)&&Q--)}return B[0]||B.shift(),z.e=_,_i(z,d?h+Oa(z)+1:h)}})();function h5(e,t){var r,n,l,h,d,o,_=0,S=0,P=e.constructor,M=P.precision;if(Oa(e)>16)throw Error(_T+Oa(e));if(!e.s)return new P(Ml);for(Vi=!1,o=M,d=new P(.03125);e.abs().gte(.1);)e=e.times(d),S+=5;for(n=Math.log(Em(2,S))/Math.LN10*2+5|0,o+=n,r=l=h=new P(Ml),P.precision=o;;){if(l=_i(l.times(e),o),r=r.times(++_),d=h.plus(Cd(l,r,o)),gh(d.d).slice(0,o)===gh(h.d).slice(0,o)){for(;S--;)h=_i(h.times(h),o);return P.precision=M,t==null?(Vi=!0,_i(h,M)):h}h=d}}function Oa(e){for(var t=e.e*Mi,r=e.d[0];r>=10;r/=10)t++;return t}function QP(e,t,r){if(t>e.LN10.sd())throw Vi=!0,r&&(e.precision=r),Error(xu+"LN10 precision limit exceeded");return _i(new e(e.LN10),t)}function Yf(e){for(var t="";e--;)t+="0";return t}function S_(e,t){var r,n,l,h,d,o,_,S,P,M=1,O=10,z=e,B=z.d,F=z.constructor,L=F.precision;if(z.s<1)throw Error(xu+(z.s?"NaN":"-Infinity"));if(z.eq(Ml))return new F(0);if(t==null?(Vi=!1,S=L):S=t,z.eq(10))return t==null&&(Vi=!0),QP(F,S);if(S+=O,F.precision=S,r=gh(B),n=r.charAt(0),h=Oa(z),Math.abs(h)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)z=z.times(e),r=gh(z.d),n=r.charAt(0),M++;h=Oa(z),n>1?(z=new F("0."+r),h++):z=new F(n+"."+r.slice(1))}else return _=QP(F,S+2,L).times(h+""),z=S_(new F(n+"."+r.slice(1)),S-O).plus(_),F.precision=L,t==null?(Vi=!0,_i(z,L)):z;for(o=d=z=Cd(z.minus(Ml),z.plus(Ml),S),P=_i(z.times(z),S),l=3;;){if(d=_i(d.times(P),S),_=o.plus(Cd(d,new F(l),S)),gh(_.d).slice(0,S)===gh(o.d).slice(0,S))return o=o.times(2),h!==0&&(o=o.plus(QP(F,S+2,L).times(h+""))),o=Cd(o,new F(M),S),F.precision=L,t==null?(Vi=!0,_i(o,L)):o;o=_,l+=2}}function PR(e,t){var r,n,l;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(n,l),t){if(l-=n,r=r-n-1,e.e=Zy(r/Mi),e.d=[],n=(r+1)%Mi,r<0&&(n+=Mi),n<l){for(n&&e.d.push(+t.slice(0,n)),l-=Mi;n<l;)e.d.push(+t.slice(n,n+=Mi));t=t.slice(n),n=Mi-t.length}else n-=l;for(;n--;)t+="0";if(e.d.push(+t),Vi&&(e.e>Ub||e.e<-Ub))throw Error(_T+r)}else e.s=0,e.e=0,e.d=[0];return e}function _i(e,t,r){var n,l,h,d,o,_,S,P,M=e.d;for(d=1,h=M[0];h>=10;h/=10)d++;if(n=t-d,n<0)n+=Mi,l=t,S=M[P=0];else{if(P=Math.ceil((n+1)/Mi),h=M.length,P>=h)return e;for(S=h=M[P],d=1;h>=10;h/=10)d++;n%=Mi,l=n-Mi+d}if(r!==void 0&&(h=Em(10,d-l-1),o=S/h%10|0,_=t<0||M[P+1]!==void 0||S%h,_=r<4?(o||_)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||_||r==6&&(n>0?l>0?S/Em(10,d-l):0:M[P-1])%10&1||r==(e.s<0?8:7))),t<1||!M[0])return _?(h=Oa(e),M.length=1,t=t-h-1,M[0]=Em(10,(Mi-t%Mi)%Mi),e.e=Zy(-t/Mi)||0):(M.length=1,M[0]=e.e=e.s=0),e;if(n==0?(M.length=P,h=1,P--):(M.length=P+1,h=Em(10,Mi-n),M[P]=l>0?(S/Em(10,d-l)%Em(10,l)|0)*h:0),_)for(;;)if(P==0){(M[0]+=h)==_o&&(M[0]=1,++e.e);break}else{if(M[P]+=h,M[P]!=_o)break;M[P--]=0,h=1}for(n=M.length;M[--n]===0;)M.pop();if(Vi&&(e.e>Ub||e.e<-Ub))throw Error(_T+Oa(e));return e}function d5(e,t){var r,n,l,h,d,o,_,S,P,M,O=e.constructor,z=O.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new O(e),Vi?_i(t,z):t;if(_=e.d,M=t.d,n=t.e,S=e.e,_=_.slice(),d=S-n,d){for(P=d<0,P?(r=_,d=-d,o=M.length):(r=M,n=S,o=_.length),l=Math.max(Math.ceil(z/Mi),o)+2,d>l&&(d=l,r.length=1),r.reverse(),l=d;l--;)r.push(0);r.reverse()}else{for(l=_.length,o=M.length,P=l<o,P&&(o=l),l=0;l<o;l++)if(_[l]!=M[l]){P=_[l]<M[l];break}d=0}for(P&&(r=_,_=M,M=r,t.s=-t.s),o=_.length,l=M.length-o;l>0;--l)_[o++]=0;for(l=M.length;l>d;){if(_[--l]<M[l]){for(h=l;h&&_[--h]===0;)_[h]=_o-1;--_[h],_[l]+=_o}_[l]-=M[l]}for(;_[--o]===0;)_.pop();for(;_[0]===0;_.shift())--n;return _[0]?(t.d=_,t.e=n,Vi?_i(t,z):t):new O(0)}function Jm(e,t,r){var n,l=Oa(e),h=gh(e.d),d=h.length;return t?(r&&(n=r-d)>0?h=h.charAt(0)+"."+h.slice(1)+Yf(n):d>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(l<0?"e":"e+")+l):l<0?(h="0."+Yf(-l-1)+h,r&&(n=r-d)>0&&(h+=Yf(n))):l>=d?(h+=Yf(l+1-d),r&&(n=r-l-1)>0&&(h=h+"."+Yf(n))):((n=l+1)<d&&(h=h.slice(0,n)+"."+h.slice(n)),r&&(n=r-d)>0&&(l+1===d&&(h+="."),h+=Yf(n))),e.s<0?"-"+h:h}function ER(e,t){if(e.length>t)return e.length=t,!0}function f5(e){var t,r,n;function l(h){var d=this;if(!(d instanceof l))return new l(h);if(d.constructor=l,h instanceof l){d.s=h.s,d.e=h.e,d.d=(h=h.d)?h.slice():h;return}if(typeof h=="number"){if(h*0!==0)throw Error(Wm+h);if(h>0)d.s=1;else if(h<0)h=-h,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(h===~~h&&h<1e7){d.e=0,d.d=[h];return}return PR(d,h.toString())}else if(typeof h!="string")throw Error(Wm+h);if(h.charCodeAt(0)===45?(h=h.slice(1),d.s=-1):d.s=1,vae.test(h))PR(d,h);else throw Error(Wm+h)}if(l.prototype=br,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=f5,l.config=l.set=_ae,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return l.config(e),l}function _ae(e){if(!e||typeof e!="object")throw Error(xu+"Object expected");var t,r,n,l=["precision",1,Hy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((n=e[r=l[t]])!==void 0)if(Zy(n)===n&&n>=l[t+1]&&n<=l[t+2])this[r]=n;else throw Error(Wm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Wm+r+": "+n);return this}var xT=f5(yae);Ml=new xT(1);const ci=xT;var xae=e=>e,p5={},m5=e=>e===p5,CR=e=>function t(){return arguments.length===0||arguments.length===1&&m5(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},g5=(e,t)=>e===1?t:CR(function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];var h=n.filter(d=>d!==p5).length;return h>=e?t(...n):g5(e-h,CR(function(){for(var d=arguments.length,o=new Array(d),_=0;_<d;_++)o[_]=arguments[_];var S=n.map(P=>m5(P)?o.shift():P);return t(...S,...o)}))}),bae=e=>g5(e.length,e),IE=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},wae=bae((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Sae=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return xae;var l=r.reverse(),h=l[0],d=l.slice(1);return function(){return d.reduce((o,_)=>_(o),h(...arguments))}},OE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function y5(e){var t;return e===0?t=1:t=Math.floor(new ci(e).abs().log(10).toNumber())+1,t}function v5(e,t,r){for(var n=new ci(e),l=0,h=[];n.lt(t)&&l<1e5;)h.push(n.toNumber()),n=n.add(r),l++;return h}var _5=e=>{var[t,r]=e,[n,l]=[t,r];return t>r&&([n,l]=[r,t]),[n,l]},x5=(e,t,r)=>{if(e.lte(0))return new ci(0);var n=y5(e.toNumber()),l=new ci(10).pow(n),h=e.div(l),d=n!==1?.05:.1,o=new ci(Math.ceil(h.div(d).toNumber())).add(r).mul(d),_=o.mul(l);return t?new ci(_.toNumber()):new ci(Math.ceil(_.toNumber()))},Pae=(e,t,r)=>{var n=new ci(1),l=new ci(e);if(!l.isint()&&r){var h=Math.abs(e);h<1?(n=new ci(10).pow(y5(e)-1),l=new ci(Math.floor(l.div(n).toNumber())).mul(n)):h>1&&(l=new ci(Math.floor(e)))}else e===0?l=new ci(Math.floor((t-1)/2)):r||(l=new ci(Math.floor(e)));var d=Math.floor((t-1)/2),o=Sae(wae(_=>l.add(new ci(_-d).mul(n)).toNumber()),IE);return o(0,t)},b5=function(t,r,n,l){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ci(0),tickMin:new ci(0),tickMax:new ci(0)};var d=x5(new ci(r).sub(t).div(n-1),l,h),o;t<=0&&r>=0?o=new ci(0):(o=new ci(t).add(r).div(2),o=o.sub(new ci(o).mod(d)));var _=Math.ceil(o.sub(t).div(d).toNumber()),S=Math.ceil(new ci(r).sub(o).div(d).toNumber()),P=_+S+1;return P>n?b5(t,r,n,l,h+1):(P<n&&(S=r>0?S+(n-P):S,_=r>0?_:_+(n-P)),{step:d,tickMin:o.sub(new ci(_).mul(d)),tickMax:o.add(new ci(S).mul(d))})},Eae=function(t){var[r,n]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(l,2),[o,_]=_5([r,n]);if(o===-1/0||_===1/0){var S=_===1/0?[o,...IE(0,l-1).map(()=>1/0)]:[...IE(0,l-1).map(()=>-1/0),_];return r>n?OE(S):S}if(o===_)return Pae(o,l,h);var{step:P,tickMin:M,tickMax:O}=b5(o,_,d,h,0),z=v5(M,O.add(new ci(.1).mul(P)),P);return r>n?OE(z):z},Cae=function(t,r){var[n,l]=t,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,o]=_5([n,l]);if(d===-1/0||o===1/0)return[n,l];if(d===o)return[d];var _=Math.max(r,2),S=x5(new ci(o).sub(d).div(_-1),h,0),P=[...v5(new ci(d),new ci(o),S),o];return h===!1&&(P=P.map(M=>Math.round(M))),n>l?OE(P):P},w5=e=>e.rootProps.maxBarSize,Tae=e=>e.rootProps.barGap,S5=e=>e.rootProps.barCategoryGap,Mae=e=>e.rootProps.barSize,i1=e=>e.rootProps.stackOffset,P5=e=>e.rootProps.reverseStackOrder,bT=e=>e.options.chartName,wT=e=>e.rootProps.syncId,E5=e=>e.rootProps.syncMethod,ST=e=>e.options.eventEmitter,kae=e=>e.rootProps.baseValue,xo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},wd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},El={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},a1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Aae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wd.angleAxisId,includeHidden:!1,name:void 0,reversed:wd.reversed,scale:wd.scale,tick:wd.tick,tickCount:void 0,ticks:void 0,type:wd.type,unit:void 0},Iae={allowDataOverflow:El.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:El.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:El.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:El.scale,tick:El.tick,tickCount:El.tickCount,ticks:void 0,type:El.type,unit:void 0},Oae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wd.scale,tick:wd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Lae={allowDataOverflow:El.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:El.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:El.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:El.scale,tick:El.tick,tickCount:El.tickCount,ticks:void 0,type:"category",unit:void 0},PT=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Oae:Aae,ET=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Lae:Iae,o1=e=>e.polarOptions,CT=Tt([Nd,Fd,bo],Cre),C5=Tt([o1,CT],(e,t)=>{if(e!=null)return Pc(e.innerRadius,t,0)}),T5=Tt([o1,CT],(e,t)=>{if(e!=null)return Pc(e.outerRadius,t,t*.8)}),Dae=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},M5=Tt([o1],Dae);Tt([PT,M5],a1);var k5=Tt([CT,C5,T5],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Tt([ET,k5],a1);var A5=Tt([Bn,o1,C5,T5,Nd,Fd],(e,t,r,n,l,h)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:d,cy:o,startAngle:_,endAngle:S}=t;return{cx:Pc(d,l,l/2),cy:Pc(o,h,h/2),innerRadius:r,outerRadius:n,startAngle:_,endAngle:S,clockWise:!1}}}),Xa=(e,t)=>t,s1=(e,t,r)=>r;function l1(e){return e==null?void 0:e.id}function I5(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:l,dataKey:h}=r,d=new Map;return e.forEach(o=>{var _,S=(_=o.data)!==null&&_!==void 0?_:n;if(!(S==null||S.length===0)){var P=l1(o);S.forEach((M,O)=>{var z=h==null||l?O:String(Ha(M,h,null)),B=Ha(M,o.dataKey,0),F;d.has(z)?F=d.get(z):F={},Object.assign(F,{[P]:B}),d.set(z,F)})}}),Array.from(d.values())}function u1(e){return e.stackId!=null&&e.dataKey!=null}var c1=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function h1(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Rae(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ya=e=>{var t=Bn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ky=e=>e.tooltip.settings.axisId;function TR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(r),!0).forEach(function(n){jae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jae(e,t,r){return(t=zae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zae(e){var t=Nae(e,"string");return typeof t=="symbol"?t:t+""}function Nae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LE=[0,"auto"],go={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},O5=(e,t)=>e.cartesianAxis.xAxis[t],Vd=(e,t)=>{var r=O5(e,t);return r??go},yo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:LE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Z_},L5=(e,t)=>e.cartesianAxis.yAxis[t],$d=(e,t)=>{var r=L5(e,t);return r??yo},Fae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},TT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Fae},Cs=(e,t,r)=>{switch(t){case"xAxis":return Vd(e,r);case"yAxis":return $d(e,r);case"zAxis":return TT(e,r);case"angleAxis":return PT(e,r);case"radiusAxis":return ET(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Bae=(e,t,r)=>{switch(t){case"xAxis":return Vd(e,r);case"yAxis":return $d(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},e0=(e,t,r)=>{switch(t){case"xAxis":return Vd(e,r);case"yAxis":return $d(e,r);case"angleAxis":return PT(e,r);case"radiusAxis":return ET(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},D5=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function R5(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var d1=e=>e.graphicalItems.cartesianItems,Vae=Tt([Xa,s1],R5),j5=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),t0=Tt([d1,Cs,Vae],j5,{memoizeOptions:{resultEqualityCheck:h1}}),z5=Tt([t0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(u1)),N5=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$ae=Tt([t0],N5),F5=e=>e.map(t=>t.data).filter(Boolean).flat(1),Uae=Tt([t0],F5,{memoizeOptions:{resultEqualityCheck:h1}}),B5=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:l}=t;return e.length>0?e:r.slice(n,l+1)},MT=Tt([Uae,n1],B5),V5=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ha(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(l=>({value:Ha(l,n)}))):e.map(n=>({value:n})),f1=Tt([MT,Cs,t0],V5);function $5(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Bx(e){if(bh(e)||e instanceof Date){var t=Number(e);if(Ai(t))return t}}function MR(e){if(Array.isArray(e)){var t=[Bx(e[0]),Bx(e[1])];return _p(t)?t:void 0}var r=Bx(e);if(r!=null)return[r,r]}function Rd(e){return e.map(Bx).filter(DQ)}function qae(e,t,r){return!r||typeof t!="number"||_u(t)?[]:r.length?Rd(r.flatMap(n=>{var l=Ha(e,n.dataKey),h,d;if(Array.isArray(l)?[h,d]=l:h=d=l,!(!Ai(h)||!Ai(d)))return[t-h,t+d]})):[]}var Qa=e=>{var t=Ya(e),r=Ky(e);return e0(e,t,r)},r0=Tt([Qa],e=>e==null?void 0:e.dataKey),Gae=Tt([z5,n1,Qa],I5),U5=(e,t,r,n)=>{var l={},h=t.reduce((d,o)=>(o.stackId==null||(d[o.stackId]==null&&(d[o.stackId]=[]),d[o.stackId].push(o)),d),l);return Object.fromEntries(Object.entries(h).map(d=>{var[o,_]=d,S=n?[..._].reverse():_,P=S.map(l1);return[o,{stackedData:nee(e,P,r),graphicalItems:S}]}))},P_=Tt([Gae,z5,i1,P5],U5),q5=(e,t,r,n)=>{var{dataStartIndex:l,dataEndIndex:h}=t;if(n==null&&r!=="zAxis"){var d=see(e,l,h);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},Wae=Tt([Cs],e=>e.allowDataOverflow),kT=e=>{var t;if(e==null||!("domain"in e))return LE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Rd(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:LE},G5=Tt([Cs],kT),W5=Tt([G5,Wae],l5),Hae=Tt([P_,Tp,Xa,W5],q5,{memoizeOptions:{resultEqualityCheck:c1}}),AT=e=>e.errorBars,Zae=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>$5(r,n)),Gb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var l=r.filter(Boolean);if(l.length!==0){var h=l.flat(),d=Math.min(...h),o=Math.max(...h);return[d,o]}},H5=(e,t,r,n,l)=>{var h,d;if(r.length>0&&e.forEach(o=>{r.forEach(_=>{var S,P,M=(S=n[_.id])===null||S===void 0?void 0:S.filter(K=>$5(l,K)),O=Ha(o,(P=t.dataKey)!==null&&P!==void 0?P:_.dataKey),z=qae(o,O,M);if(z.length>=2){var B=Math.min(...z),F=Math.max(...z);(h==null||B<h)&&(h=B),(d==null||F>d)&&(d=F)}var L=MR(O);L!=null&&(h=h==null?L[0]:Math.min(h,L[0]),d=d==null?L[1]:Math.max(d,L[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var _=MR(Ha(o,t.dataKey));_!=null&&(h=h==null?_[0]:Math.min(h,_[0]),d=d==null?_[1]:Math.max(d,_[1]))}),Ai(h)&&Ai(d))return[h,d]},Kae=Tt([MT,Cs,$ae,AT,Xa],H5,{memoizeOptions:{resultEqualityCheck:c1}});function Xae(e){var{value:t}=e;if(bh(t)||t instanceof Date)return t}var Yae=(e,t,r)=>{var n=e.map(Xae).filter(l=>l!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&DF(n))?TB(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Z5=e=>e.referenceElements.dots,Xy=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Qae=Tt([Z5,Xa,s1],Xy),K5=e=>e.referenceElements.areas,Jae=Tt([K5,Xa,s1],Xy),X5=e=>e.referenceElements.lines,eoe=Tt([X5,Xa,s1],Xy),Y5=(e,t)=>{var r=Rd(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},toe=Tt(Qae,Xa,Y5),Q5=(e,t)=>{var r=Rd(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},roe=Tt([Jae,Xa],Q5);function noe(e){var t;if(e.x!=null)return Rd([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Rd(r)}function ioe(e){var t;if(e.y!=null)return Rd([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Rd(r)}var J5=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?noe(n):ioe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},aoe=Tt([eoe,Xa],J5),ooe=Tt(toe,aoe,roe,(e,t,r)=>Gb(e,r,t)),e4=(e,t,r,n,l,h,d,o)=>{if(r!=null)return r;var _=d==="vertical"&&o==="xAxis"||d==="horizontal"&&o==="yAxis",S=_?Gb(n,h,l):Gb(h,l);return gae(t,S,e.allowDataOverflow)},soe=Tt([Cs,G5,W5,Hae,Kae,ooe,Bn,Xa],e4,{memoizeOptions:{resultEqualityCheck:c1}}),loe=[0,1],t4=(e,t,r,n,l,h,d)=>{if(!((e==null||r==null||r.length===0)&&d===void 0)){var{dataKey:o,type:_}=e,S=zd(t,h);if(S&&o==null){var P;return TB(0,(P=r==null?void 0:r.length)!==null&&P!==void 0?P:0)}return _==="category"?Yae(n,e,S):l==="expand"?loe:d}},IT=Tt([Cs,Bn,MT,f1,i1,Xa,soe],t4),r4=(e,t,r,n,l)=>{if(e!=null){var{scale:h,type:d}=e;if(h==="auto")return t==="radial"&&l==="radiusAxis"?"band":t==="radial"&&l==="angleAxis"?"linear":d==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":d==="category"?"band":"linear";if(typeof h=="string"){var o="scale".concat(W_(h));return o in Jv?o:"point"}}},n0=Tt([Cs,Bn,D5,bT,Xa],r4);function uoe(e){if(e!=null){if(e in Jv)return Jv[e]();var t="scale".concat(W_(e));if(t in Jv)return Jv[t]()}}function OT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var l=uoe(t);if(l!=null){var h=l.domain(r).range(n);return QJ(h),h}}}var n4=(e,t,r)=>{var n=kT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&_p(e))return Eae(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&_p(e))return Cae(e,t.tickCount,t.allowDecimals)}},LT=Tt([IT,e0,n0],n4),i4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&_p(t)&&Array.isArray(r)&&r.length>0){var l=t[0],h=r[0],d=t[1],o=r[r.length-1];return[Math.min(l,h),Math.max(d,o)]}return t},coe=Tt([Cs,IT,LT,Xa],i4),hoe=Tt(f1,Cs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Rd(e.map(o=>o.value))).sort((o,_)=>o-_);if(n.length<2)return 1/0;var l=n[n.length-1]-n[0];if(l===0)return 1/0;for(var h=0;h<n.length-1;h++){var d=n[h+1]-n[h];r=Math.min(r,d)}return r/l}}),a4=Tt(hoe,Bn,S5,bo,(e,t,r,n)=>n,(e,t,r,n,l)=>{if(!Ai(e))return 0;var h=t==="vertical"?n.height:n.width;if(l==="gap")return e*h/2;if(l==="no-gap"){var d=Pc(r,e*h),o=e*h/2;return o-d-(o-d)/h*d}return 0}),doe=(e,t)=>{var r=Vd(e,t);return r==null||typeof r.padding!="string"?0:a4(e,"xAxis",t,r.padding)},foe=(e,t)=>{var r=$d(e,t);return r==null||typeof r.padding!="string"?0:a4(e,"yAxis",t,r.padding)},poe=Tt(Vd,doe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((r=l.left)!==null&&r!==void 0?r:0)+t,right:((n=l.right)!==null&&n!==void 0?n:0)+t}}),moe=Tt($d,foe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((r=l.top)!==null&&r!==void 0?r:0)+t,bottom:((n=l.bottom)!==null&&n!==void 0?n:0)+t}}),goe=Tt([bo,poe,Uw,$w,(e,t,r)=>r],(e,t,r,n,l)=>{var{padding:h}=n;return l?[h.left,r.width-h.right]:[e.left+t.left,e.left+e.width-t.right]}),yoe=Tt([bo,Bn,moe,Uw,$w,(e,t,r)=>r],(e,t,r,n,l,h)=>{var{padding:d}=l;return h?[n.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),i0=(e,t,r,n)=>{var l;switch(t){case"xAxis":return goe(e,r,n);case"yAxis":return yoe(e,r,n);case"zAxis":return(l=TT(e,r))===null||l===void 0?void 0:l.range;case"angleAxis":return M5(e);case"radiusAxis":return k5(e,r);default:return}},o4=Tt([Cs,i0],a1),Yy=Tt([Cs,n0,coe,o4],OT);Tt([t0,AT,Xa],Zae);function s4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var p1=(e,t)=>t,m1=(e,t,r)=>r,voe=Tt(Bw,p1,m1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s4)),_oe=Tt(Vw,p1,m1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s4)),l4=(e,t)=>({width:e.width,height:t.height}),xoe=(e,t)=>{var r=typeof t.width=="number"?t.width:Z_;return{width:r,height:e.height}},u4=Tt(bo,Vd,l4),boe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},woe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Soe=Tt(Fd,bo,voe,p1,m1,(e,t,r,n,l)=>{var h={},d;return r.forEach(o=>{var _=l4(t,o);d==null&&(d=boe(t,n,e));var S=n==="top"&&!l||n==="bottom"&&l;h[o.id]=d-Number(S)*_.height,d+=(S?-1:1)*_.height}),h}),Poe=Tt(Nd,bo,_oe,p1,m1,(e,t,r,n,l)=>{var h={},d;return r.forEach(o=>{var _=xoe(t,o);d==null&&(d=woe(t,n,e));var S=n==="left"&&!l||n==="right"&&l;h[o.id]=d-Number(S)*_.width,d+=(S?-1:1)*_.width}),h}),Eoe=(e,t)=>{var r=Vd(e,t);if(r!=null)return Soe(e,r.orientation,r.mirror)},Coe=Tt([bo,Vd,Eoe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r==null?void 0:r[n];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),Toe=(e,t)=>{var r=$d(e,t);if(r!=null)return Poe(e,r.orientation,r.mirror)},Moe=Tt([bo,$d,Toe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var l=r==null?void 0:r[n];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),c4=Tt(bo,$d,(e,t)=>{var r=typeof t.width=="number"?t.width:Z_;return{width:r,height:e.height}}),kR=(e,t,r)=>{switch(t){case"xAxis":return u4(e,r).width;case"yAxis":return c4(e,r).height;default:return}},h4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:l,type:h,dataKey:d}=r,o=zd(e,n),_=t.map(S=>S.value);if(d&&o&&h==="category"&&l&&DF(_))return _}},DT=Tt([Bn,f1,Cs,Xa],h4),d4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:l,scale:h}=r,d=zd(e,n);if(d&&(l==="number"||h!=="auto"))return t.map(o=>o.value)}},RT=Tt([Bn,f1,e0,Xa],d4),AR=Tt([Bn,Bae,n0,Yy,DT,RT,i0,LT,Xa],(e,t,r,n,l,h,d,o,_)=>{if(t!=null){var S=zd(e,_);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:_,categoricalDomain:h,duplicateDomain:l,isCategorical:S,niceTicks:o,range:d,realScaleType:r,scale:n}}}),koe=(e,t,r,n,l,h,d,o,_)=>{if(!(t==null||n==null)){var S=zd(e,_),{type:P,ticks:M,tickCount:O}=t,z=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,B=P==="category"&&n.bandwidth?n.bandwidth()/z:0;B=_==="angleAxis"&&h!=null&&h.length>=2?Ys(h[0]-h[1])*2*B:B;var F=M||l;if(F){var L=F.map((K,Q)=>{var re=d?d.indexOf(K):K;return{index:Q,coordinate:n(re)+B,value:K,offset:B}});return L.filter(K=>Ai(K.coordinate))}return S&&o?o.map((K,Q)=>({coordinate:n(K)+B,value:K,index:Q,offset:B})).filter(K=>Ai(K.coordinate)):n.ticks?n.ticks(O).map(K=>({coordinate:n(K)+B,value:K,offset:B})):n.domain().map((K,Q)=>({coordinate:n(K)+B,value:d?d[K]:K,index:Q,offset:B}))}},f4=Tt([Bn,e0,n0,Yy,LT,i0,DT,RT,Xa],koe),Aoe=(e,t,r,n,l,h,d)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=zd(e,d),{tickCount:_}=t,S=0;return S=d==="angleAxis"&&(n==null?void 0:n.length)>=2?Ys(n[0]-n[1])*2*S:S,o&&h?h.map((P,M)=>({coordinate:r(P)+S,value:P,index:M,offset:S})):r.ticks?r.ticks(_).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,M)=>({coordinate:r(P)+S,value:l?l[P]:P,index:M,offset:S}))}},xp=Tt([Bn,e0,Yy,i0,DT,RT,Xa],Aoe),bp=Tt(Cs,Yy,(e,t)=>{if(!(e==null||t==null))return qb(qb({},e),{},{scale:t})}),Ioe=Tt([Cs,n0,IT,o4],OT);Tt((e,t,r)=>TT(e,r),Ioe,(e,t)=>{if(!(e==null||t==null))return qb(qb({},e),{},{scale:t})});var Ooe=Tt([Bn,Bw,Vw],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),p4=e=>e.options.defaultTooltipEventType,m4=e=>e.options.validateTooltipEventTypes;function g4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function jT(e,t){var r=p4(e),n=m4(e);return g4(t,r,n)}function Loe(e){return Or(t=>jT(t,e))}var y4=(e,t)=>{var r,n=Number(t);if(!(_u(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Doe=e=>e.tooltip.settings,np={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Roe={itemInteraction:{click:np,hover:np},axisInteraction:{click:np,hover:np},keyboardInteraction:np,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},v4=Yo({name:"tooltip",initialState:Roe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Bi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,l=bc(e).tooltipItemPayloads.indexOf(r);l>-1&&(e.tooltipItemPayloads[l]=n)},prepare:Bi()},removeTooltipEntrySettings:{reducer(e,t){var r=bc(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Bi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:joe,replaceTooltipEntrySettings:zoe,removeTooltipEntrySettings:Noe,setTooltipSettingsState:Foe,setActiveMouseOverItemIndex:_4,mouseLeaveItem:Boe,mouseLeaveChart:x4,setActiveClickItemIndex:Voe,setMouseOverAxisIndex:b4,setMouseClickAxisIndex:$oe,setSyncInteraction:DE,setKeyboardInteraction:RE}=v4.actions,Uoe=v4.reducer;function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Sx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){qoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qoe(e,t,r){return(t=Goe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Goe(e){var t=Woe(e,"string");return typeof t=="symbol"?t:t+""}function Woe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hoe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Zoe(e){return e.index!=null}var w4=(e,t,r,n)=>{if(t==null)return np;var l=Hoe(e,t,r);if(l==null)return np;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var h=e.settings.active===!0;if(Zoe(l)){if(h)return Sx(Sx({},l),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Sx(Sx({},np),{},{coordinate:l.coordinate})};function Koe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Xoe(e,t){var r=Koe(e),n=t[0],l=t[1];if(r===void 0)return!1;var h=Math.min(n,l),d=Math.max(n,l);return r>=h&&r<=d}function Yoe(e,t,r){if(r==null||t==null)return!0;var n=Ha(e,t);return n==null||!_p(r)?!0:Xoe(n,r)}var zT=(e,t,r,n)=>{var l=e==null?void 0:e.index;if(l==null)return null;var h=Number(l);if(!Ai(h))return l;var d=0,o=1/0;t.length>0&&(o=t.length-1);var _=Math.max(d,Math.min(h,o)),S=t[_];return S==null||Yoe(S,r,n)?String(_):null},S4=(e,t,r,n,l,h,d,o)=>{if(!(h==null||o==null)){var _=d[0],S=_==null?void 0:o(_.positions,h);if(S!=null)return S;var P=l==null?void 0:l[Number(h)];if(P)switch(r){case"horizontal":return{x:P.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:P.coordinate}}}},P4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;return r==="hover"?l=e.itemInteraction.hover.dataKey:l=e.itemInteraction.click.dataKey,l==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(h=>{var d;return((d=h.settings)===null||d===void 0?void 0:d.dataKey)===l})},a0=e=>e.options.tooltipPayloadSearcher,Qy=e=>e.tooltip;function OR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function LR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(r),!0).forEach(function(n){Qoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qoe(e,t,r){return(t=Joe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Joe(e){var t=ese(e,"string");return typeof t=="symbol"?t:t+""}function ese(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tse(e,t){return e??t}var E4=(e,t,r,n,l,h,d)=>{if(!(t==null||h==null)){var{chartData:o,computedData:_,dataStartIndex:S,dataEndIndex:P}=r,M=[];return e.reduce((O,z)=>{var B,{dataDefinedOnItem:F,settings:L}=z,K=tse(F,o),Q=Array.isArray(K)?JF(K,S,P):K,re=(B=L==null?void 0:L.dataKey)!==null&&B!==void 0?B:n,te=L==null?void 0:L.nameKey,ae;if(n&&Array.isArray(Q)&&!Array.isArray(Q[0])&&d==="axis"?ae=RF(Q,n,l):ae=h(Q,t,_,te),Array.isArray(ae))ae.forEach(ne=>{var be=LR(LR({},L),{},{name:ne.name,unit:ne.unit,color:void 0,fill:void 0});O.push(JL({tooltipEntrySettings:be,dataKey:ne.dataKey,payload:ne.payload,value:Ha(ne.payload,ne.dataKey),name:ne.name}))});else{var he;O.push(JL({tooltipEntrySettings:L,dataKey:re,payload:ae,value:Ha(ae,re),name:(he=Ha(ae,te))!==null&&he!==void 0?he:L==null?void 0:L.name}))}return O},M)}},NT=Tt([Qa,Bn,D5,bT,Ya],r4),rse=Tt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),nse=Tt([Ya,Ky],R5),o0=Tt([rse,Qa,nse],j5,{memoizeOptions:{resultEqualityCheck:h1}}),ise=Tt([o0],e=>e.filter(u1)),ase=Tt([o0],F5,{memoizeOptions:{resultEqualityCheck:h1}}),Jy=Tt([ase,Tp],B5),ose=Tt([ise,Tp,Qa],I5),FT=Tt([Jy,Qa,o0],V5),C4=Tt([Qa],kT),sse=Tt([Qa],e=>e.allowDataOverflow),T4=Tt([C4,sse],l5),lse=Tt([o0],e=>e.filter(u1)),use=Tt([ose,lse,i1,P5],U5),cse=Tt([use,Tp,Ya,T4],q5),hse=Tt([o0],N5),dse=Tt([Jy,Qa,hse,AT,Ya],H5,{memoizeOptions:{resultEqualityCheck:c1}}),fse=Tt([Z5,Ya,Ky],Xy),pse=Tt([fse,Ya],Y5),mse=Tt([K5,Ya,Ky],Xy),gse=Tt([mse,Ya],Q5),yse=Tt([X5,Ya,Ky],Xy),vse=Tt([yse,Ya],J5),_se=Tt([pse,vse,gse],Gb),xse=Tt([Qa,C4,T4,cse,dse,_se,Bn,Ya],e4),s0=Tt([Qa,Bn,Jy,FT,i1,Ya,xse],t4),bse=Tt([s0,Qa,NT],n4),wse=Tt([Qa,s0,bse,Ya],i4),M4=e=>{var t=Ya(e),r=Ky(e),n=!1;return i0(e,t,r,n)},k4=Tt([Qa,M4],a1),A4=Tt([Qa,NT,wse,k4],OT),Sse=Tt([Bn,FT,Qa,Ya],h4),Pse=Tt([Bn,FT,Qa,Ya],d4),Ese=(e,t,r,n,l,h,d,o)=>{if(t){var{type:_}=t,S=zd(e,o);if(n){var P=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,M=_==="category"&&n.bandwidth?n.bandwidth()/P:0;return M=o==="angleAxis"&&l!=null&&(l==null?void 0:l.length)>=2?Ys(l[0]-l[1])*2*M:M,S&&d?d.map((O,z)=>({coordinate:n(O)+M,value:O,index:z,offset:M})):n.domain().map((O,z)=>({coordinate:n(O)+M,value:h?h[O]:O,index:z,offset:M}))}}},Ud=Tt([Bn,Qa,NT,A4,M4,Sse,Pse,Ya],Ese),BT=Tt([p4,m4,Doe],(e,t,r)=>g4(r.shared,e,t)),I4=e=>e.tooltip.settings.trigger,VT=e=>e.tooltip.settings.defaultIndex,l0=Tt([Qy,BT,I4,VT],w4),eg=Tt([l0,Jy,r0,s0],zT),O4=Tt([Ud,eg],y4),L4=Tt([l0],e=>{if(e)return e.dataKey});Tt([l0],e=>{if(e)return e.graphicalItemId});var D4=Tt([Qy,BT,I4,VT],P4),Cse=Tt([Nd,Fd,Bn,bo,Ud,VT,D4,a0],S4),Tse=Tt([l0,Cse],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Mse=Tt([l0],e=>e.active),kse=Tt([D4,eg,Tp,r0,O4,a0,BT],E4),Ase=Tt([kse],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function RR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){Ise(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ise(e,t,r){return(t=Ose(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ose(e){var t=Lse(e,"string");return typeof t=="symbol"?t:t+""}function Lse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dse=()=>Or(Qa),Rse=()=>{var e=Dse(),t=Or(Ud),r=Or(A4);return My(!e||!r?void 0:RR(RR({},e),{},{scale:r}),t)};function jR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Xg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(r),!0).forEach(function(n){jse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jse(e,t,r){return(t=zse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zse(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fse=(e,t,r,n)=>{var l=t.find(h=>h&&h.index===r);if(l){if(e==="horizontal")return{x:l.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:l.coordinate}}return{x:0,y:0}},Bse=(e,t,r,n)=>{var l=t.find(S=>S&&S.index===r);if(l){if(e==="centric"){var h=l.coordinate,{radius:d}=n;return Xg(Xg(Xg({},n),ko(n.cx,n.cy,d,h)),{},{angle:h,radius:d})}var o=l.coordinate,{angle:_}=n;return Xg(Xg(Xg({},n),ko(n.cx,n.cy,o,_)),{},{angle:_,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Vse(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var R4=(e,t,r,n,l)=>{var h,d=-1,o=(h=t==null?void 0:t.length)!==null&&h!==void 0?h:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var _=0;_<o;_++){var S=_>0?r[_-1].coordinate:r[o-1].coordinate,P=r[_].coordinate,M=_>=o-1?r[0].coordinate:r[_+1].coordinate,O=void 0;if(Ys(P-S)!==Ys(M-P)){var z=[];if(Ys(M-P)===Ys(l[1]-l[0])){O=M;var B=P+l[1]-l[0];z[0]=Math.min(B,(B+S)/2),z[1]=Math.max(B,(B+S)/2)}else{O=S;var F=M+l[1]-l[0];z[0]=Math.min(P,(F+P)/2),z[1]=Math.max(P,(F+P)/2)}var L=[Math.min(P,(O+P)/2),Math.max(P,(O+P)/2)];if(e>L[0]&&e<=L[1]||e>=z[0]&&e<=z[1]){({index:d}=r[_]);break}}else{var K=Math.min(S,M),Q=Math.max(S,M);if(e>(K+P)/2&&e<=(Q+P)/2){({index:d}=r[_]);break}}}else if(t){for(var re=0;re<o;re++)if(re===0&&e<=(t[re].coordinate+t[re+1].coordinate)/2||re>0&&re<o-1&&e>(t[re].coordinate+t[re-1].coordinate)/2&&e<=(t[re].coordinate+t[re+1].coordinate)/2||re===o-1&&e>(t[re].coordinate+t[re-1].coordinate)/2){({index:d}=t[re]);break}}return d},j4=()=>Or(bT),$T=(e,t)=>t,z4=(e,t,r)=>r,UT=(e,t,r,n)=>n,$se=Tt(Ud,e=>Nw(e,t=>t.coordinate)),qT=Tt([Qy,$T,z4,UT],w4),GT=Tt([qT,Jy,r0,s0],zT),Use=(e,t,r)=>{if(t!=null){var n=Qy(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},N4=Tt([Qy,$T,z4,UT],P4),Wb=Tt([Nd,Fd,Bn,bo,Ud,UT,N4,a0],S4),qse=Tt([qT,Wb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),F4=Tt([Ud,GT],y4),Gse=Tt([N4,GT,Tp,r0,F4,a0,$T],E4),Wse=Tt([qT,GT],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Hse=(e,t,r,n,l,h,d)=>{if(!(!e||!r||!n||!l)&&Vse(e,d)){var o=lee(e,t),_=R4(o,h,l,r,n),S=Fse(t,l,_,e);return{activeIndex:String(_),activeCoordinate:S}}},Zse=(e,t,r,n,l,h,d)=>{if(!(!e||!n||!l||!h||!r)){var o=Ire(e,r);if(o){var _=uee(o,t),S=R4(_,d,h,n,l),P=Bse(t,h,S,o);return{activeIndex:String(S),activeCoordinate:P}}}},Kse=(e,t,r,n,l,h,d,o)=>{if(!(!e||!t||!n||!l||!h))return t==="horizontal"||t==="vertical"?Hse(e,t,n,l,h,d,o):Zse(e,t,r,n,l,h,d)},Xse=Tt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),Yse=Tt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(xo)),r=Array.from(new Set(t));return r.sort((n,l)=>n-l)},{memoizeOptions:{resultEqualityCheck:Rae}});function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function NR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){Qse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qse(e,t,r){return(t=Jse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jse(e){var t=ele(e,"string");return typeof t=="symbol"?t:t+""}function ele(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tle={},rle={zIndexMap:Object.values(xo).reduce((e,t)=>NR(NR({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),tle)},nle=new Set(Object.values(xo));function ile(e){return nle.has(e)}var B4=Yo({name:"zIndex",initialState:rle,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Bi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!ile(r)&&delete e.zIndexMap[r])},prepare:Bi()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:l}=t.payload;e.zIndexMap[r]?l?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:l?void 0:n,panoramaElementId:l?n:void 0}},prepare:Bi()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Bi()}}}),{registerZIndexPortal:ale,unregisterZIndexPortal:ole,registerZIndexPortalId:sle,unregisterZIndexPortalId:lle}=B4.actions,ule=B4.reducer;function Su(e){var{zIndex:t,children:r}=e,n=Uee(),l=n&&t!==void 0&&t!==0,h=Qo(),d=Ki();A.useLayoutEffect(()=>l?(d(ale({zIndex:t})),()=>{d(ole({zIndex:t}))}):H_,[d,t,l]);var o=Or(S=>Xse(S,t,h));if(!l)return r;if(!o)return null;var _=document.getElementById(o);return _?Cc.createPortal(r,_):null}function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jE.apply(null,arguments)}function FR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Px(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FR(Object(r),!0).forEach(function(n){cle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cle(e,t,r){return(t=hle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hle(e){var t=dle(e,"string");return typeof t=="symbol"?t:t+""}function dle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fle(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return A.isValidElement(t)?A.cloneElement(t,n):A.createElement(r,n)}function ple(e){var t,{coordinate:r,payload:n,index:l,offset:h,tooltipAxisBandSize:d,layout:o,cursor:_,tooltipEventType:S,chartName:P}=e,M=r,O=n,z=l;if(!_||!M||P!=="ScatterChart"&&S!=="axis")return null;var B,F,L;if(P==="ScatterChart")B=M,F=Gte,L=xo.cursorLine;else if(P==="BarChart")B=Wte(o,M,h,d),F=SB,L=xo.cursorRectangle;else if(o==="radial"&&zF(M)){var{cx:K,cy:Q,radius:re,startAngle:te,endAngle:ae}=PB(M);B={cx:K,cy:Q,startAngle:te,endAngle:ae,innerRadius:re,outerRadius:re},F=CB,L=xo.cursorLine}else B={points:Rre(o,M,h)},F=n_,L=xo.cursorLine;var he=typeof _=="object"&&"className"in _?_.className:void 0,ne=Px(Px(Px(Px({stroke:"#ccc",pointerEvents:"none"},h),B),G_(_)),{},{payload:O,payloadIndex:z,className:Hn("recharts-tooltip-cursor",he)});return A.createElement(Su,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:L},A.createElement(fle,{cursor:_,cursorComp:F,cursorProps:ne}))}function mle(e){var t=Rse(),r=uB(),n=qy(),l=j4();return t==null||r==null||n==null||l==null?null:A.createElement(ple,jE({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:l}))}var V4=A.createContext(null),gle=()=>A.useContext(V4),JP={exports:{}},BR;function yle(){return BR||(BR=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function l(_,S,P){this.fn=_,this.context=S,this.once=P||!1}function h(_,S,P,M,O){if(typeof P!="function")throw new TypeError("The listener must be a function");var z=new l(P,M||_,O),B=r?r+S:S;return _._events[B]?_._events[B].fn?_._events[B]=[_._events[B],z]:_._events[B].push(z):(_._events[B]=z,_._eventsCount++),_}function d(_,S){--_._eventsCount===0?_._events=new n:delete _._events[S]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var S=[],P,M;if(this._eventsCount===0)return S;for(M in P=this._events)t.call(P,M)&&S.push(r?M.slice(1):M);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(P)):S},o.prototype.listeners=function(S){var P=r?r+S:S,M=this._events[P];if(!M)return[];if(M.fn)return[M.fn];for(var O=0,z=M.length,B=new Array(z);O<z;O++)B[O]=M[O].fn;return B},o.prototype.listenerCount=function(S){var P=r?r+S:S,M=this._events[P];return M?M.fn?1:M.length:0},o.prototype.emit=function(S,P,M,O,z,B){var F=r?r+S:S;if(!this._events[F])return!1;var L=this._events[F],K=arguments.length,Q,re;if(L.fn){switch(L.once&&this.removeListener(S,L.fn,void 0,!0),K){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,P),!0;case 3:return L.fn.call(L.context,P,M),!0;case 4:return L.fn.call(L.context,P,M,O),!0;case 5:return L.fn.call(L.context,P,M,O,z),!0;case 6:return L.fn.call(L.context,P,M,O,z,B),!0}for(re=1,Q=new Array(K-1);re<K;re++)Q[re-1]=arguments[re];L.fn.apply(L.context,Q)}else{var te=L.length,ae;for(re=0;re<te;re++)switch(L[re].once&&this.removeListener(S,L[re].fn,void 0,!0),K){case 1:L[re].fn.call(L[re].context);break;case 2:L[re].fn.call(L[re].context,P);break;case 3:L[re].fn.call(L[re].context,P,M);break;case 4:L[re].fn.call(L[re].context,P,M,O);break;default:if(!Q)for(ae=1,Q=new Array(K-1);ae<K;ae++)Q[ae-1]=arguments[ae];L[re].fn.apply(L[re].context,Q)}}return!0},o.prototype.on=function(S,P,M){return h(this,S,P,M,!1)},o.prototype.once=function(S,P,M){return h(this,S,P,M,!0)},o.prototype.removeListener=function(S,P,M,O){var z=r?r+S:S;if(!this._events[z])return this;if(!P)return d(this,z),this;var B=this._events[z];if(B.fn)B.fn===P&&(!O||B.once)&&(!M||B.context===M)&&d(this,z);else{for(var F=0,L=[],K=B.length;F<K;F++)(B[F].fn!==P||O&&!B[F].once||M&&B[F].context!==M)&&L.push(B[F]);L.length?this._events[z]=L.length===1?L[0]:L:d(this,z)}return this},o.prototype.removeAllListeners=function(S){var P;return S?(P=r?r+S:S,this._events[P]&&d(this,P)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(JP)),JP.exports}var vle=yle();const _le=Ph(vle);var E_=new _le,zE="recharts.syncEvent.tooltip",VR="recharts.syncEvent.brush";function $4(e,t){if(t){var r=Number.parseInt(t,10);if(!_u(r))return e==null?void 0:e[r]}}var xle={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},U4=Yo({name:"options",initialState:xle,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ble=U4.reducer,{createEventEmitter:wle}=U4.actions;function Sle(e){return e.tooltip.syncInteraction}var Ple={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},q4=Yo({name:"chartData",initialState:Ple,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:$R,setDataStartEndIndexes:Ele,setComputedData:Cme}=q4.actions,Cle=q4.reducer,Tle=["x","y"];function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){Mle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mle(e,t,r){return(t=kle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kle(e){var t=Ale(e,"string");return typeof t=="symbol"?t:t+""}function Ale(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ile(e,t){if(e==null)return{};var r,n,l=Ole(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Ole(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lle(){var e=Or(wT),t=Or(ST),r=Ki(),n=Or(E5),l=Or(Ud),h=qy(),d=qw(),o=Or(_=>_.rootProps.className);A.useEffect(()=>{if(e==null)return H_;var _=(S,P,M)=>{if(t!==M&&e===S){if(n==="index"){var O;if(d&&P!==null&&P!==void 0&&(O=P.payload)!==null&&O!==void 0&&O.coordinate&&P.payload.sourceViewBox){var z=P.payload.coordinate,{x:B,y:F}=z,L=Ile(z,Tle),{x:K,y:Q,width:re,height:te}=P.payload.sourceViewBox,ae=Yg(Yg({},L),{},{x:d.x+(re?(B-K)/re:0)*d.width,y:d.y+(te?(F-Q)/te:0)*d.height});r(Yg(Yg({},P),{},{payload:Yg(Yg({},P.payload),{},{coordinate:ae})}))}else r(P);return}if(l!=null){var he;if(typeof n=="function"){var ne={activeTooltipIndex:P.payload.index==null?void 0:Number(P.payload.index),isTooltipActive:P.payload.active,activeIndex:P.payload.index==null?void 0:Number(P.payload.index),activeLabel:P.payload.label,activeDataKey:P.payload.dataKey,activeCoordinate:P.payload.coordinate},be=n(l,ne);he=l[be]}else n==="value"&&(he=l.find(gt=>String(gt.value)===P.payload.label));var{coordinate:xe}=P.payload;if(he==null||P.payload.active===!1||xe==null||d==null){r(DE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$e,y:Ee}=xe,Ne=Math.min($e,d.x+d.width),Xe=Math.min(Ee,d.y+d.height),ut={x:h==="horizontal"?he.coordinate:Ne,y:h==="horizontal"?Xe:he.coordinate},pt=DE({active:P.payload.active,coordinate:ut,dataKey:P.payload.dataKey,index:String(he.index),label:P.payload.label,sourceViewBox:P.payload.sourceViewBox,graphicalItemId:P.payload.graphicalItemId});r(pt)}}};return E_.on(zE,_),()=>{E_.off(zE,_)}},[o,r,t,e,n,l,h,d])}function Dle(){var e=Or(wT),t=Or(ST),r=Ki();A.useEffect(()=>{if(e==null)return H_;var n=(l,h,d)=>{t!==d&&e===l&&r(Ele(h))};return E_.on(VR,n),()=>{E_.off(VR,n)}},[r,t,e])}function Rle(){var e=Ki();A.useEffect(()=>{e(wle())},[e]),Lle(),Dle()}function jle(e,t,r,n,l,h){var d=Or(z=>Use(z,e,t)),o=Or(ST),_=Or(wT),S=Or(E5),P=Or(Sle),M=P==null?void 0:P.active,O=qw();A.useEffect(()=>{if(!M&&_!=null&&o!=null){var z=DE({active:h,coordinate:r,dataKey:d,index:l,label:typeof n=="number"?String(n):n,sourceViewBox:O,graphicalItemId:void 0});E_.emit(zE,_,z,o)}},[M,r,d,l,n,o,_,S,h,O])}function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function GR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){zle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zle(e,t,r){return(t=Nle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nle(e){var t=Fle(e,"string");return typeof t=="symbol"?t:t+""}function Fle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ble(e){return e.dataKey}function Vle(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(Pte,t)}var WR=[],$le={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ule(e){var t,r,n=Ao(e,$le),{active:l,allowEscapeViewBox:h,animationDuration:d,animationEasing:o,content:_,filterNull:S,isAnimationActive:P,offset:M,payloadUniqBy:O,position:z,reverseDirection:B,useTranslate3d:F,wrapperStyle:L,cursor:K,shared:Q,trigger:re,defaultIndex:te,portal:ae,axisId:he}=n,ne=Ki(),be=typeof te=="number"?String(te):te;A.useEffect(()=>{ne(Foe({shared:Q,trigger:re,axisId:he,active:l,defaultIndex:be}))},[ne,Q,re,he,l,be]);var xe=qw(),$e=vB(),Ee=Loe(Q),{activeIndex:Ne,isActive:Xe}=(t=Or(Ft=>Wse(Ft,Ee,re,be)))!==null&&t!==void 0?t:{},ut=Or(Ft=>Gse(Ft,Ee,re,be)),pt=Or(Ft=>F4(Ft,Ee,re,be)),gt=Or(Ft=>qse(Ft,Ee,re,be)),wt=ut,je=gle(),Qe=(r=l??Xe)!==null&&r!==void 0?r:!1,[yt,Oe]=YF([wt,Qe]),et=Ee==="axis"?pt:void 0;jle(Ee,re,gt,et,Ne,Qe);var Mt=ae??je;if(Mt==null||xe==null||Ee==null)return null;var Dt=wt??WR;Qe||(Dt=WR),S&&Dt.length&&(Dt=HF(Dt.filter(Ft=>Ft.value!=null&&(Ft.hide!==!0||n.includeHidden)),O,Ble));var Ke=Dt.length>0,tr=A.createElement(Ite,{allowEscapeViewBox:h,animationDuration:d,animationEasing:o,isAnimationActive:P,active:Qe,coordinate:gt,hasPayload:Ke,offset:M,position:z,reverseDirection:B,useTranslate3d:F,viewBox:xe,wrapperStyle:L,lastBoundingBox:yt,innerRef:Oe,hasPortalFromProps:!!ae},Vle(_,GR(GR({},n),{},{payload:Dt,label:et,active:Qe,activeIndex:Ne,coordinate:gt,accessibilityLayer:$e})));return A.createElement(A.Fragment,null,Cc.createPortal(tr,Mt),Qe&&A.createElement(mle,{cursor:K,tooltipEventType:Ee,coordinate:gt,payload:Dt,index:Ne}))}var G4=e=>null;G4.displayName="Cell";function qle(e,t,r){return(t=Gle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gle(e){var t=Wle(e,"string");return typeof t=="symbol"?t:t+""}function Wle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Hle{constructor(t){qle(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Zle(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(n){Kle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kle(e,t,r){return(t=Xle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xle(e){var t=Yle(e,"string");return typeof t=="symbol"?t:t+""}function Yle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qle={cacheSize:2e3,enableCache:!0},W4=Zle({},Qle),ZR=new Hle(W4.cacheSize),Jle={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},KR="recharts_measurement_span";function eue(e,t){var r=t.fontSize||"",n=t.fontFamily||"",l=t.fontWeight||"",h=t.fontStyle||"",d=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(l,"|").concat(h,"|").concat(d,"|").concat(o)}var XR=(e,t)=>{try{var r=document.getElementById(KR);r||(r=document.createElement("span"),r.setAttribute("id",KR),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Jle,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},i_=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Gy.isSsr)return{width:0,height:0};if(!W4.enableCache)return XR(t,r);var n=eue(t,r),l=ZR.get(n);if(l)return l;var h=XR(t,r);return ZR.set(n,h),h},YR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,H4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nue=Object.keys(H4),iy="NaN";function iue(e,t){return e*H4[t]}class Ks{static parse(t){var r,[,n,l]=(r=rue.exec(t))!==null&&r!==void 0?r:[];return new Ks(parseFloat(n),l??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,_u(t)&&(this.unit=""),r!==""&&!tue.test(r)&&(this.num=NaN,this.unit=""),nue.includes(r)&&(this.num=iue(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _u(this.num)}}function Z4(e){if(e.includes(iy))return iy;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,l,h]=(r=YR.exec(t))!==null&&r!==void 0?r:[],d=Ks.parse(n??""),o=Ks.parse(h??""),_=l==="*"?d.multiply(o):d.divide(o);if(_.isNaN())return iy;t=t.replace(YR,_.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var S,[,P,M,O]=(S=QR.exec(t))!==null&&S!==void 0?S:[],z=Ks.parse(P??""),B=Ks.parse(O??""),F=M==="+"?z.add(B):z.subtract(B);if(F.isNaN())return iy;t=t.replace(QR,F.toString())}return t}var JR=/\(([^()]*)\)/;function aue(e){for(var t=e,r;(r=JR.exec(t))!=null;){var[,n]=r;t=t.replace(JR,Z4(n))}return t}function oue(e){var t=e.replace(/\s+/g,"");return t=aue(t),t=Z4(t),t}function sue(e){try{return oue(e)}catch{return iy}}function e2(e){var t=sue(e.slice(5,-1));return t===iy?"":t}var lue=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],uue=["dx","dy","angle","className","breakAll"];function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NE.apply(null,arguments)}function ej(e,t){if(e==null)return{};var r,n,l=cue(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function cue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K4=/[ \f\n\r\t\v\u2028\u2029]+/,X4=e=>{var{children:t,breakAll:r,style:n}=e;try{var l=[];Zi(t)||(r?l=t.toString().split(""):l=t.toString().split(K4));var h=l.map(o=>({word:o,width:i_(o,n).width})),d=r?0:i_("",n).width;return{wordsWithComputedWidth:h,spaceWidth:d}}catch{return null}};function hue(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Y4=(e,t,r,n)=>e.reduce((l,h)=>{var{word:d,width:o}=h,_=l[l.length-1];if(_&&o!=null&&(t==null||n||_.width+o+r<Number(t)))_.words.push(d),_.width+=o+r;else{var S={words:[d],width:o};l.push(S)}return l},[]),Q4=e=>e.reduce((t,r)=>t.width>r.width?t:r),due="",tj=(e,t,r,n,l,h,d,o)=>{var _=e.slice(0,t),S=X4({breakAll:r,style:n,children:_+due});if(!S)return[!1,[]];var P=Y4(S.wordsWithComputedWidth,h,d,o),M=P.length>l||Q4(P).width>Number(h);return[M,P]},fue=(e,t,r,n,l)=>{var{maxLines:h,children:d,style:o,breakAll:_}=e,S=_r(h),P=String(d),M=Y4(t,n,r,l);if(!S||l)return M;var O=M.length>h||Q4(M).width>Number(n);if(!O)return M;for(var z=0,B=P.length-1,F=0,L;z<=B&&F<=P.length-1;){var K=Math.floor((z+B)/2),Q=K-1,[re,te]=tj(P,Q,_,o,h,n,r,l),[ae]=tj(P,K,_,o,h,n,r,l);if(!re&&!ae&&(z=K+1),re&&ae&&(B=K-1),!re&&ae){L=te;break}F++}return L||M},rj=e=>{var t=Zi(e)?[]:e.toString().split(K4);return[{words:t,width:void 0}]},pue=e=>{var{width:t,scaleToFit:r,children:n,style:l,breakAll:h,maxLines:d}=e;if((t||r)&&!Gy.isSsr){var o,_,S=X4({breakAll:h,children:n,style:l});if(S){var{wordsWithComputedWidth:P,spaceWidth:M}=S;o=P,_=M}else return rj(n);return fue({breakAll:h,children:n,maxLines:d,style:l},o,_,t,!!r)}return rj(n)},J4="#808080",mue={angle:0,breakAll:!1,capHeight:"0.71em",fill:J4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},WT=A.forwardRef((e,t)=>{var r=Ao(e,mue),{x:n,y:l,lineHeight:h,capHeight:d,fill:o,scaleToFit:_,textAnchor:S,verticalAnchor:P}=r,M=ej(r,lue),O=A.useMemo(()=>pue({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:_,style:M.style,width:M.width}),[M.breakAll,M.children,M.maxLines,_,M.style,M.width]),{dx:z,dy:B,angle:F,className:L,breakAll:K}=M,Q=ej(M,uue);if(!bh(n)||!bh(l)||O.length===0)return null;var re=Number(n)+(_r(z)?z:0),te=Number(l)+(_r(B)?B:0);if(!Ai(re)||!Ai(te))return null;var ae;switch(P){case"start":ae=e2("calc(".concat(d,")"));break;case"middle":ae=e2("calc(".concat((O.length-1)/2," * -").concat(h," + (").concat(d," / 2))"));break;default:ae=e2("calc(".concat(O.length-1," * -").concat(h,")"));break}var he=[];if(_){var ne=O[0].width,{width:be}=M;he.push("scale(".concat(_r(be)&&_r(ne)?be/ne:1,")"))}return F&&he.push("rotate(".concat(F,", ").concat(re,", ").concat(te,")")),he.length&&(Q.transform=he.join(" ")),A.createElement("text",NE({},Ps(Q),{ref:t,x:re,y:te,className:Hn("recharts-text",L),textAnchor:S,fill:o.includes("url")?J4:o}),O.map((xe,$e)=>{var Ee=xe.words.join(K?"":" ");return A.createElement("tspan",{x:re,dy:$e===0?ae:h,key:"".concat(Ee,"-").concat($e)},Ee)}))});WT.displayName="Text";var gue=["labelRef"];function yue(e,t){if(e==null)return{};var r,n,l=vue(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function vue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nj(Object(r),!0).forEach(function(n){_ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ue(e,t,r){return(t=xue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xue(e){var t=bue(e,"string");return typeof t=="symbol"?t:t+""}function bue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sd.apply(null,arguments)}var e6=A.createContext(null),wue=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:l,width:h,height:d,children:o}=e,_=A.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:l,width:h,height:d}),[t,r,n,l,h,d]);return A.createElement(e6.Provider,{value:_},o)},t6=()=>{var e=A.useContext(e6),t=qw();return e||lB(t)},Sue=A.createContext(null),Pue=()=>{var e=A.useContext(Sue),t=Or(A5);return e||t},Eue=e=>{var{value:t,formatter:r}=e,n=Zi(e.children)?t:e.children;return typeof r=="function"?r(n):n},HT=e=>e!=null&&typeof e=="function",Cue=(e,t)=>{var r=Ys(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Tue=(e,t,r,n,l)=>{var{offset:h,className:d}=e,{cx:o,cy:_,innerRadius:S,outerRadius:P,startAngle:M,endAngle:O,clockWise:z}=l,B=(S+P)/2,F=Cue(M,O),L=F>=0?1:-1,K,Q;switch(t){case"insideStart":K=M+L*h,Q=z;break;case"insideEnd":K=O-L*h,Q=!z;break;case"end":K=O+L*h,Q=z;break;default:throw new Error("Unsupported position ".concat(t))}Q=F<=0?Q:!Q;var re=ko(o,_,B,K),te=ko(o,_,B,K+(Q?1:-1)*359),ae="M".concat(re.x,",").concat(re.y,`
    A`).concat(B,",").concat(B,",0,1,").concat(Q?0:1,`,
    `).concat(te.x,",").concat(te.y),he=Zi(e.id)?p_("recharts-radial-line-"):e.id;return A.createElement("text",Sd({},n,{dominantBaseline:"central",className:Hn("recharts-radial-bar-label",d)}),A.createElement("defs",null,A.createElement("path",{id:he,d:ae})),A.createElement("textPath",{xlinkHref:"#".concat(he)},r))},Mue=(e,t,r)=>{var{cx:n,cy:l,innerRadius:h,outerRadius:d,startAngle:o,endAngle:_}=e,S=(o+_)/2;if(r==="outside"){var{x:P,y:M}=ko(n,l,d+t,S);return{x:P,y:M,textAnchor:P>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:l,textAnchor:"middle",verticalAnchor:"end"};var O=(h+d)/2,{x:z,y:B}=ko(n,l,O,S);return{x:z,y:B,textAnchor:"middle",verticalAnchor:"middle"}},FE=e=>"cx"in e&&_r(e.cx),kue=(e,t)=>{var{parentViewBox:r,offset:n,position:l}=e,h;r!=null&&!FE(r)&&(h=r);var{x:d,y:o,upperWidth:_,lowerWidth:S,height:P}=t,M=d,O=d+(_-S)/2,z=(M+O)/2,B=(_+S)/2,F=M+_/2,L=P>=0?1:-1,K=L*n,Q=L>0?"end":"start",re=L>0?"start":"end",te=_>=0?1:-1,ae=te*n,he=te>0?"end":"start",ne=te>0?"start":"end";if(l==="top"){var be={x:M+_/2,y:o-K,textAnchor:"middle",verticalAnchor:Q};return ya(ya({},be),h?{height:Math.max(o-h.y,0),width:_}:{})}if(l==="bottom"){var xe={x:O+S/2,y:o+P+K,textAnchor:"middle",verticalAnchor:re};return ya(ya({},xe),h?{height:Math.max(h.y+h.height-(o+P),0),width:S}:{})}if(l==="left"){var $e={x:z-ae,y:o+P/2,textAnchor:he,verticalAnchor:"middle"};return ya(ya({},$e),h?{width:Math.max($e.x-h.x,0),height:P}:{})}if(l==="right"){var Ee={x:z+B+ae,y:o+P/2,textAnchor:ne,verticalAnchor:"middle"};return ya(ya({},Ee),h?{width:Math.max(h.x+h.width-Ee.x,0),height:P}:{})}var Ne=h?{width:B,height:P}:{};return l==="insideLeft"?ya({x:z+ae,y:o+P/2,textAnchor:ne,verticalAnchor:"middle"},Ne):l==="insideRight"?ya({x:z+B-ae,y:o+P/2,textAnchor:he,verticalAnchor:"middle"},Ne):l==="insideTop"?ya({x:M+_/2,y:o+K,textAnchor:"middle",verticalAnchor:re},Ne):l==="insideBottom"?ya({x:O+S/2,y:o+P-K,textAnchor:"middle",verticalAnchor:Q},Ne):l==="insideTopLeft"?ya({x:M+ae,y:o+K,textAnchor:ne,verticalAnchor:re},Ne):l==="insideTopRight"?ya({x:M+_-ae,y:o+K,textAnchor:he,verticalAnchor:re},Ne):l==="insideBottomLeft"?ya({x:O+ae,y:o+P-K,textAnchor:ne,verticalAnchor:Q},Ne):l==="insideBottomRight"?ya({x:O+S-ae,y:o+P-K,textAnchor:he,verticalAnchor:Q},Ne):l&&typeof l=="object"&&(_r(l.x)||Id(l.x))&&(_r(l.y)||Id(l.y))?ya({x:d+Pc(l.x,B),y:o+Pc(l.y,P),textAnchor:"end",verticalAnchor:"end"},Ne):ya({x:F,y:o+P/2,textAnchor:"middle",verticalAnchor:"middle"},Ne)},Aue={angle:0,offset:5,zIndex:xo.label,position:"middle",textBreakAll:!1};function Qf(e){var t=Ao(e,Aue),{viewBox:r,position:n,value:l,children:h,content:d,className:o="",textBreakAll:_,labelRef:S}=t,P=Pue(),M=t6(),O=n==="center"?M:P??M,z,B,F;if(r==null?z=O:FE(r)?z=r:z=lB(r),!z||Zi(l)&&Zi(h)&&!A.isValidElement(d)&&typeof d!="function")return null;var L=ya(ya({},t),{},{viewBox:z});if(A.isValidElement(d)){var{labelRef:K}=L,Q=yue(L,gue);return A.cloneElement(d,Q)}if(typeof d=="function"){if(B=A.createElement(d,L),A.isValidElement(B))return B}else B=Eue(t);var re=Ps(t);if(FE(z)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Tue(t,n,B,re,z);F=Mue(z,t.offset,t.position)}else F=kue(t,z);return A.createElement(Su,{zIndex:t.zIndex},A.createElement(WT,Sd({ref:S,className:Hn("recharts-label",o)},re,F,{textAnchor:hue(re.textAnchor)?re.textAnchor:F.textAnchor,breakAll:_}),B))}Qf.displayName="Label";var Iue=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?A.createElement(Qf,Sd({key:"label-implicit"},n)):bh(e)?A.createElement(Qf,Sd({key:"label-implicit",value:e},n)):A.isValidElement(e)?e.type===Qf?A.cloneElement(e,ya({key:"label-implicit"},n)):A.createElement(Qf,Sd({key:"label-implicit",content:e},n)):HT(e)?A.createElement(Qf,Sd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?A.createElement(Qf,Sd({},e,{key:"label-implicit"},n)):null};function Oue(e){var{label:t,labelRef:r}=e,n=t6();return Iue(t,n,r)||null}var t2={},r2={},ij;function Lue(){return ij||(ij=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(r2)),r2}var n2={},aj;function Due(){return aj||(aj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(n2)),n2}var oj;function Rue(){return oj||(oj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lue(),r=Due(),n=$C();function l(h){if(n.isArrayLike(h))return t.last(r.toArray(h))}e.last=l})(t2)),t2}var i2,sj;function jue(){return sj||(sj=1,i2=Rue().last),i2}var zue=jue();const Nue=Ph(zue);var Fue=["valueAccessor"],Bue=["dataKey","clockWise","id","textBreakAll","zIndex"];function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hb.apply(null,arguments)}function lj(e,t){if(e==null)return{};var r,n,l=Vue(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Vue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $ue=e=>Array.isArray(e.value)?Nue(e.value):e.value,r6=A.createContext(void 0),n6=r6.Provider,i6=A.createContext(void 0);i6.Provider;function Uue(){return A.useContext(r6)}function que(){return A.useContext(i6)}function Vx(e){var{valueAccessor:t=$ue}=e,r=lj(e,Fue),{dataKey:n,clockWise:l,id:h,textBreakAll:d,zIndex:o}=r,_=lj(r,Bue),S=Uue(),P=que(),M=S||P;return!M||!M.length?null:A.createElement(Su,{zIndex:o??xo.label},A.createElement(Es,{className:"recharts-label-list"},M.map((O,z)=>{var B,F=Zi(n)?t(O,z):Ha(O&&O.payload,n),L=Zi(h)?{}:{id:"".concat(h,"-").concat(z)};return A.createElement(Qf,Hb({key:"label-".concat(z)},Ps(O),_,L,{fill:(B=r.fill)!==null&&B!==void 0?B:O.fill,parentViewBox:O.parentViewBox,value:F,textBreakAll:d,viewBox:O.viewBox,index:z,zIndex:0}))})))}Vx.displayName="LabelList";function a6(e){var{label:t}=e;return t?t===!0?A.createElement(Vx,{key:"labelList-implicit"}):A.isValidElement(t)||HT(t)?A.createElement(Vx,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement(Vx,Hb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BE.apply(null,arguments)}var o6=e=>{var{cx:t,cy:r,r:n,className:l}=e,h=Hn("recharts-dot",l);return _r(t)&&_r(r)&&_r(n)?A.createElement("circle",BE({},vu(e),VC(e),{className:h,cx:t,cy:r,r:n})):null},Gue={radiusAxis:{},angleAxis:{}},s6=Yo({name:"polarAxis",initialState:Gue,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Tme,removeRadiusAxis:Mme,addAngleAxis:kme,removeAngleAxis:Ame}=s6.actions,Wue=s6.reducer,a2={exports:{}},fi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uj;function Hue(){if(uj)return fi;uj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.view_transition"),z=Symbol.for("react.client.reference");function B(F){if(typeof F=="object"&&F!==null){var L=F.$$typeof;switch(L){case e:switch(F=F.type,F){case r:case l:case n:case _:case S:case O:return F;default:switch(F=F&&F.$$typeof,F){case d:case o:case M:case P:return F;case h:return F;default:return L}}case t:return L}}}return fi.ContextConsumer=h,fi.ContextProvider=d,fi.Element=e,fi.ForwardRef=o,fi.Fragment=r,fi.Lazy=M,fi.Memo=P,fi.Portal=t,fi.Profiler=l,fi.StrictMode=n,fi.Suspense=_,fi.SuspenseList=S,fi.isContextConsumer=function(F){return B(F)===h},fi.isContextProvider=function(F){return B(F)===d},fi.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===e},fi.isForwardRef=function(F){return B(F)===o},fi.isFragment=function(F){return B(F)===r},fi.isLazy=function(F){return B(F)===M},fi.isMemo=function(F){return B(F)===P},fi.isPortal=function(F){return B(F)===t},fi.isProfiler=function(F){return B(F)===l},fi.isStrictMode=function(F){return B(F)===n},fi.isSuspense=function(F){return B(F)===_},fi.isSuspenseList=function(F){return B(F)===S},fi.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===r||F===l||F===n||F===_||F===S||typeof F=="object"&&F!==null&&(F.$$typeof===M||F.$$typeof===P||F.$$typeof===d||F.$$typeof===h||F.$$typeof===o||F.$$typeof===z||F.getModuleId!==void 0)},fi.typeOf=B,fi}var cj;function Zue(){return cj||(cj=1,a2.exports=Hue()),a2.exports}var Kue=Zue(),hj=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",dj=null,o2=null,l6=e=>{if(e===dj&&Array.isArray(o2))return o2;var t=[];return A.Children.forEach(e,r=>{Zi(r)||(Kue.isFragment(r)?t=t.concat(l6(r.props.children)):t.push(r))}),o2=t,dj=e,t};function Xue(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(l=>hj(l)):n=[hj(t)],l6(e).forEach(l=>{var h=Ty(l,"type.displayName")||Ty(l,"type.name");h&&n.indexOf(h)!==-1&&r.push(l)}),r}var u6=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,s2={},fj;function Yue(){return fj||(fj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var l;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const h=r[Symbol.toStringTag];return h==null||!((l=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&l.writable)?!1:r.toString()===`[object ${h}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(s2)),s2}var l2,pj;function Que(){return pj||(pj=1,l2=Yue().isPlainObject),l2}var Jue=Que();const ece=Ph(Jue);function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function gj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){tce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tce(e,t,r){return(t=rce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rce(e){var t=nce(e,"string");return typeof t=="symbol"?t:t+""}function nce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zb.apply(null,arguments)}var yj=(e,t,r,n,l)=>{var h=r-n,d;return d="M ".concat(e,",").concat(t),d+="L ".concat(e+r,",").concat(t),d+="L ".concat(e+r-h/2,",").concat(t+l),d+="L ".concat(e+r-h/2-n,",").concat(t+l),d+="L ".concat(e,",").concat(t," Z"),d},ice={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ace=e=>{var t=Ao(e,ice),{x:r,y:n,upperWidth:l,lowerWidth:h,height:d,className:o}=t,{animationEasing:_,animationDuration:S,animationBegin:P,isUpdateAnimationActive:M}=t,O=A.useRef(null),[z,B]=A.useState(-1),F=A.useRef(l),L=A.useRef(h),K=A.useRef(d),Q=A.useRef(r),re=A.useRef(n),te=Xw(e,"trapezoid-");if(A.useEffect(()=>{if(O.current&&O.current.getTotalLength)try{var ut=O.current.getTotalLength();ut&&B(ut)}catch{}},[]),r!==+r||n!==+n||l!==+l||h!==+h||d!==+d||l===0&&h===0||d===0)return null;var ae=Hn("recharts-trapezoid",o);if(!M)return A.createElement("g",null,A.createElement("path",Zb({},Ps(t),{className:ae,d:yj(r,n,l,h,d)})));var he=F.current,ne=L.current,be=K.current,xe=Q.current,$e=re.current,Ee="0px ".concat(z===-1?1:z,"px"),Ne="".concat(z,"px 0px"),Xe=_B(["strokeDasharray"],S,_);return A.createElement(Kw,{animationId:te,key:te,canBegin:z>0,duration:S,easing:_,isActive:M,begin:P},ut=>{var pt=Hi(he,l,ut),gt=Hi(ne,h,ut),wt=Hi(be,d,ut),je=Hi(xe,r,ut),Qe=Hi($e,n,ut);O.current&&(F.current=pt,L.current=gt,K.current=wt,Q.current=je,re.current=Qe);var yt=ut>0?{transition:Xe,strokeDasharray:Ne}:{strokeDasharray:Ee};return A.createElement("path",Zb({},Ps(t),{className:ae,d:yj(je,Qe,pt,gt,wt),ref:O,style:gj(gj({},yt),t.style)}))})},oce=["option","shapeType","propTransformer","activeClassName"];function sce(e,t){if(e==null)return{};var r,n,l=lce(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function lce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){uce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uce(e,t,r){return(t=cce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cce(e){var t=hce(e,"string");return typeof t=="symbol"?t:t+""}function hce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dce(e,t){return Kb(Kb({},t),e)}function fce(e,t){return e==="symbols"}function _j(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return A.createElement(SB,r);case"trapezoid":return A.createElement(ace,r);case"sector":return A.createElement(CB,r);case"symbols":if(fce(t))return A.createElement(BC,r);break;case"curve":return A.createElement(n_,r);default:return null}}function pce(e){return A.isValidElement(e)?e.props:e}function mce(e){var{option:t,shapeType:r,propTransformer:n=dce,activeClassName:l="recharts-active-shape"}=e,h=sce(e,oce),d;if(A.isValidElement(t))d=A.cloneElement(t,Kb(Kb({},h),pce(t)));else if(typeof t=="function")d=t(h,h.index);else if(ece(t)&&typeof t!="boolean"){var o=n(t,h);d=A.createElement(_j,{shapeType:r,elementProps:o})}else{var _=h;d=A.createElement(_j,{shapeType:r,elementProps:_})}return h.isActive?A.createElement(Es,{className:l},d):d}var c6=(e,t,r)=>{var n=Ki();return(l,h)=>d=>{e==null||e(l,h,d),n(_4({activeIndex:String(h),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}},h6=e=>{var t=Ki();return(r,n)=>l=>{e==null||e(r,n,l),t(Boe())}},d6=(e,t,r)=>{var n=Ki();return(l,h)=>d=>{e==null||e(l,h,d),n(Voe({activeIndex:String(h),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:r}))}};function f6(e){var{tooltipEntrySettings:t}=e,r=Ki(),n=Qo(),l=A.useRef(null);return A.useLayoutEffect(()=>{n||(l.current===null?r(joe(t)):l.current!==t&&r(zoe({prev:l.current,next:t})),l.current=t)},[t,r,n]),A.useLayoutEffect(()=>()=>{l.current&&(r(Noe(l.current)),l.current=null)},[r]),null}function p6(e){var{legendPayload:t}=e,r=Ki(),n=Qo(),l=A.useRef(null);return A.useLayoutEffect(()=>{n||(l.current===null?r(nte(t)):l.current!==t&&r(ite({prev:l.current,next:t})),l.current=t)},[r,n,t]),A.useLayoutEffect(()=>()=>{l.current&&(r(ate(l.current)),l.current=null)},[r]),null}var u2,gce=()=>{var[e]=A.useState(()=>p_("uid-"));return e},yce=(u2=aw.useId)!==null&&u2!==void 0?u2:gce;function m6(e,t){var r=yce();return t||(e?"".concat(e,"-").concat(r):r)}var vce=A.createContext(void 0),g6=e=>{var{id:t,type:r,children:n}=e,l=m6("recharts-".concat(r),t);return A.createElement(vce.Provider,{value:l},n(l))},_ce={cartesianItems:[],polarItems:[]},y6=Yo({name:"graphicalItems",initialState:_ce,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Bi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,l=bc(e).cartesianItems.indexOf(r);l>-1&&(e.cartesianItems[l]=n)},prepare:Bi()},removeCartesianGraphicalItem:{reducer(e,t){var r=bc(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Bi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Bi()},removePolarGraphicalItem:{reducer(e,t){var r=bc(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Bi()}}}),{addCartesianGraphicalItem:xce,replaceCartesianGraphicalItem:bce,removeCartesianGraphicalItem:wce,addPolarGraphicalItem:Ime,removePolarGraphicalItem:Ome}=y6.actions,Sce=y6.reducer,Pce=e=>{var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(xce(e)):r.current!==e&&t(bce({prev:r.current,next:e})),r.current=e},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(t(wce(r.current)),r.current=null)},[t]),null},v6=A.memo(Pce),Ece=["points"];function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function c2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){Cce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cce(e,t,r){return(t=Tce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tce(e){var t=Mce(e,"string");return typeof t=="symbol"?t:t+""}function Mce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb.apply(null,arguments)}function kce(e,t){if(e==null)return{};var r,n,l=Ace(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Ace(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ice(e){var{option:t,dotProps:r,className:n}=e;if(A.isValidElement(t))return A.cloneElement(t,r);if(typeof t=="function")return t(r);var l=Hn(n,typeof t!="boolean"?t.className:""),h=r??{},{points:d}=h,o=kce(h,Ece);return A.createElement(o6,Xb({},o,{className:l}))}function Oce(e,t){return e==null?!1:t?!0:e.length===1}function Lce(e){var{points:t,dot:r,className:n,dotClassName:l,dataKey:h,baseProps:d,needClip:o,clipPathId:_,zIndex:S=xo.scatter}=e;if(!Oce(t,r))return null;var P=u6(r),M=$Y(r),O=t.map((B,F)=>{var L,K,Q=c2(c2(c2({r:3},d),M),{},{index:F,cx:(L=B.x)!==null&&L!==void 0?L:void 0,cy:(K=B.y)!==null&&K!==void 0?K:void 0,dataKey:h,value:B.value,payload:B.payload,points:t});return A.createElement(Ice,{key:"dot-".concat(F),option:r,dotProps:Q,className:l})}),z={};return o&&_!=null&&(z.clipPath="url(#clipPath-".concat(P?"":"dots-").concat(_,")")),A.createElement(Su,{zIndex:S},A.createElement(Es,Xb({className:n},z),O))}function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){Dce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dce(e,t,r){return(t=Rce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rce(e){var t=jce(e,"string");return typeof t=="symbol"?t:t+""}function jce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zce={xAxis:{},yAxis:{},zAxis:{}},_6=Yo({name:"cartesianAxis",initialState:zce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Bi()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Bi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Bi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Bi()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Bi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Bi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Bi()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Bi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Bi()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,l=e.yAxis[r];if(l){var h=l.widthHistory||[];if(h.length===3&&h[0]===h[2]&&n===h[1]&&n!==l.width&&Math.abs(n-h[0])<=1)return;var d=[...h,n].slice(-3);e.yAxis[r]=wj(wj({},e.yAxis[r]),{},{width:n,widthHistory:d})}}}}),{addXAxis:Nce,replaceXAxis:Fce,removeXAxis:Bce,addYAxis:Vce,replaceYAxis:$ce,removeYAxis:Uce,addZAxis:Lme,replaceZAxis:Dme,removeZAxis:Rme,updateYAxisWidth:qce}=_6.actions,Gce=_6.reducer,Wce=Tt([bo],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Hce=Tt([Wce,Nd,Fd],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ZT=()=>Or(Hce),Zce=()=>Or(Ase);function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function h2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){Kce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kce(e,t,r){return(t=Xce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xce(e){var t=Yce(e,"string");return typeof t=="symbol"?t:t+""}function Yce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qce=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:l,dataKey:h,clipPath:d}=e;if(l===!1||t.x==null||t.y==null)return null;var o={index:r,dataKey:h,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},_=h2(h2(h2({},o),G_(l)),VC(l)),S;return A.isValidElement(l)?S=A.cloneElement(l,_):typeof l=="function"?S=l(_):S=A.createElement(o6,_),A.createElement(Es,{className:"recharts-active-dot",clipPath:d},S)};function Pj(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:l,clipPath:h,zIndex:d=xo.activeDot}=e,o=Or(eg),_=Zce();if(t==null||_==null)return null;var S=t.find(P=>_.includes(P.payload));return Zi(S)?null:A.createElement(Su,{zIndex:d},A.createElement(Qce,{point:S,childIndex:Number(o),mainColor:r,dataKey:l,activeDot:n,clipPath:h}))}var Jce="Invariant failed";function ehe(e,t){throw new Error(Jce)}var the=["x","y"];function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VE.apply(null,arguments)}function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Zv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){rhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rhe(e,t,r){return(t=nhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nhe(e){var t=ihe(e,"string");return typeof t=="symbol"?t:t+""}function ihe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ahe(e,t){if(e==null)return{};var r,n,l=ohe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function ohe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function she(e,t){var{x:r,y:n}=e,l=ahe(e,the),h="".concat(r),d=parseInt(h,10),o="".concat(n),_=parseInt(o,10),S="".concat(t.height||l.height),P=parseInt(S,10),M="".concat(t.width||l.width),O=parseInt(M,10);return Zv(Zv(Zv(Zv(Zv({},t),l),d?{x:d}:{}),_?{y:_}:{}),{},{height:P,width:O,name:t.name,radius:t.radius})}function Yb(e){return A.createElement(mce,VE({shapeType:"rectangle",propTransformer:she,activeClassName:"recharts-active-bar"},e))}var lhe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,l)=>{if(_r(t))return t;var h=_r(n)||Zi(n);return h?t(n,l):(h||ehe(),r)}},uhe={},x6=Yo({name:"errorBars",initialState:uhe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:l}=t.payload;e[r]&&(e[r]=e[r].map(h=>h.dataKey===n.dataKey&&h.direction===n.direction?l:h))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(l=>l.dataKey!==n.dataKey||l.direction!==n.direction))}}}),{addErrorBar:jme,replaceErrorBar:zme,removeErrorBar:Nme}=x6.actions,che=x6.reducer,hhe=["children"];function dhe(e,t){if(e==null)return{};var r,n,l=fhe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function fhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var phe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},mhe=A.createContext(phe);function ghe(e){var{children:t}=e,r=dhe(e,hhe);return A.createElement(mhe.Provider,{value:r},t)}function KT(e,t){var r,n,l=Or(S=>Vd(S,e)),h=Or(S=>$d(S,t)),d=(r=l==null?void 0:l.allowDataOverflow)!==null&&r!==void 0?r:go.allowDataOverflow,o=(n=h==null?void 0:h.allowDataOverflow)!==null&&n!==void 0?n:yo.allowDataOverflow,_=d||o;return{needClip:_,needClipX:d,needClipY:o}}function b6(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,l=ZT(),{needClipX:h,needClipY:d,needClip:o}=KT(t,r);if(!o||!l)return null;var{x:_,y:S,width:P,height:M}=l;return A.createElement("clipPath",{id:"clipPath-".concat(n)},A.createElement("rect",{x:h?_:_-P/2,y:d?S:S-M/2,width:h?P:P*2,height:d?M:M*2}))}function yhe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ai(e.zIndex)?e.zIndex:t}var vhe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function _he(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function g1(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(vhe.has(n)){if(e[n]==null&&t[n]==null)continue;if(!GW(e[n],t[n]))return!1}else if(!_he(e[n],t[n]))return!1;return!0}var xhe=["onMouseEnter","onMouseLeave","onClick"],bhe=["value","background","tooltipPosition"],whe=["id"],She=["onMouseEnter","onClick","onMouseLeave"];function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jd.apply(null,arguments)}function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(r),!0).forEach(function(n){Phe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Phe(e,t,r){return(t=Ehe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ehe(e){var t=Che(e,"string");return typeof t=="symbol"?t:t+""}function Che(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qb(e,t){if(e==null)return{};var r,n,l=The(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function The(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mhe=e=>{var{dataKey:t,name:r,fill:n,legendType:l,hide:h}=e;return[{inactive:h,dataKey:t,type:l,color:n,value:Fw(r,t),payload:e}]},khe=A.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:l,name:h,hide:d,unit:o,tooltipType:_}=e,S={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:l,dataKey:t,nameKey:void 0,name:Fw(h,t),hide:d,type:_,color:l,unit:o}};return A.createElement(f6,{tooltipEntrySettings:S})});function Ahe(e){var t=Or(eg),{data:r,dataKey:n,background:l,allOtherBarProps:h}=e,{onMouseEnter:d,onMouseLeave:o,onClick:_}=h,S=Qb(h,xhe),P=c6(d,n),M=h6(o),O=d6(_,n);if(!l||r==null)return null;var z=G_(l);return A.createElement(Su,{zIndex:yhe(l,xo.barBackground)},r.map((B,F)=>{var{value:L,background:K,tooltipPosition:Q}=B,re=Qb(B,bhe);if(!K)return null;var te=P(B,F),ae=M(B,F),he=O(B,F),ne=bs(bs(bs(bs(bs({option:l,isActive:String(F)===t},re),{},{fill:"#eee"},K),z),zw(S,B,F)),{},{onMouseEnter:te,onMouseLeave:ae,onClick:he,dataKey:n,index:F,className:"recharts-bar-background-rectangle"});return A.createElement(Yb,jd({key:"background-bar-".concat(F)},ne))}))}function Ihe(e){var{showLabels:t,children:r,rects:n}=e,l=n==null?void 0:n.map(h=>{var d={x:h.x,y:h.y,width:h.width,lowerWidth:h.width,upperWidth:h.width,height:h.height};return bs(bs({},d),{},{value:h.value,payload:h.payload,parentViewBox:h.parentViewBox,viewBox:d,fill:h.fill})});return A.createElement(n6,{value:t?l:void 0},r)}function Ohe(e){var{shape:t,activeBar:r,baseProps:n,entry:l,index:h,dataKey:d}=e,o=Or(eg),_=Or(L4),S=r&&String(h)===o&&(_==null||d===_),P=S?r:t;return S?A.createElement(Su,{zIndex:xo.activeBar},A.createElement(Yb,jd({},n,{name:String(n.name)},l,{isActive:S,option:P,index:h,dataKey:d}))):A.createElement(Yb,jd({},n,{name:String(n.name)},l,{isActive:S,option:P,index:h,dataKey:d}))}function Lhe(e){var{shape:t,baseProps:r,entry:n,index:l,dataKey:h}=e;return A.createElement(Yb,jd({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:l,dataKey:h}))}function Dhe(e){var t,{data:r,props:n}=e,l=(t=vu(n))!==null&&t!==void 0?t:{},{id:h}=l,d=Qb(l,whe),{shape:o,dataKey:_,activeBar:S}=n,{onMouseEnter:P,onClick:M,onMouseLeave:O}=n,z=Qb(n,She),B=c6(P,_),F=h6(O),L=d6(M,_);return r?A.createElement(A.Fragment,null,r.map((K,Q)=>A.createElement(Es,jd({key:"rectangle-".concat(K==null?void 0:K.x,"-").concat(K==null?void 0:K.y,"-").concat(K==null?void 0:K.value,"-").concat(Q),className:"recharts-bar-rectangle"},zw(z,K,Q),{onMouseEnter:B(K,Q),onMouseLeave:F(K,Q),onClick:L(K,Q)}),S?A.createElement(Ohe,{shape:o,activeBar:S,baseProps:d,entry:K,index:Q,dataKey:_}):A.createElement(Lhe,{shape:o,baseProps:d,entry:K,index:Q,dataKey:_})))):null}function Rhe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:l,isAnimationActive:h,animationBegin:d,animationDuration:o,animationEasing:_,onAnimationEnd:S,onAnimationStart:P}=t,M=r.current,O=Xw(t,"recharts-bar-"),[z,B]=A.useState(!1),F=!z,L=A.useCallback(()=>{typeof S=="function"&&S(),B(!1)},[S]),K=A.useCallback(()=>{typeof P=="function"&&P(),B(!0)},[P]);return A.createElement(Ihe,{showLabels:F,rects:n},A.createElement(Kw,{animationId:O,begin:d,duration:o,isActive:h,easing:_,onAnimationEnd:L,onAnimationStart:K,key:O},Q=>{var re=Q===1?n:n==null?void 0:n.map((te,ae)=>{var he=M&&M[ae];if(he)return bs(bs({},te),{},{x:Hi(he.x,te.x,Q),y:Hi(he.y,te.y,Q),width:Hi(he.width,te.width,Q),height:Hi(he.height,te.height,Q)});if(l==="horizontal"){var ne=Hi(0,te.height,Q),be=Hi(te.stackedBarStart,te.y,Q);return bs(bs({},te),{},{y:be,height:ne})}var xe=Hi(0,te.width,Q),$e=Hi(te.stackedBarStart,te.x,Q);return bs(bs({},te),{},{width:xe,x:$e})});return Q>0&&(r.current=re??null),re==null?null:A.createElement(Es,null,A.createElement(Dhe,{props:t,data:re}))}),A.createElement(a6,{label:t.label}),t.children)}function jhe(e){var t=A.useRef(null);return A.createElement(Rhe,{previousRectanglesRef:t,props:e})}var w6=0,zhe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ha(e,t)}};class Nhe extends A.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:l,xAxisId:h,yAxisId:d,needClip:o,background:_,id:S}=this.props;if(t||r==null)return null;var P=Hn("recharts-bar",l),M=S;return A.createElement(Es,{className:P,id:S},o&&A.createElement("defs",null,A.createElement(b6,{clipPathId:M,xAxisId:h,yAxisId:d})),A.createElement(Es,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(M,")"):void 0},A.createElement(Ahe,{data:r,dataKey:n,background:_,allOtherBarProps:this.props}),A.createElement(jhe,this.props)))}}var Fhe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:w6,xAxisId:0,yAxisId:0,zIndex:xo.bar};function Bhe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:l,minPointSize:h,activeBar:d,animationBegin:o,animationDuration:_,animationEasing:S,isAnimationActive:P}=e,{needClip:M}=KT(t,r),O=qy(),z=Qo(),B=Xue(e.children,G4),F=Or(Q=>pde(Q,t,r,z,e.id,B));if(O!=="vertical"&&O!=="horizontal")return null;var L,K=F==null?void 0:F[0];return K==null||K.height==null||K.width==null?L=0:L=O==="vertical"?K.height/2:K.width/2,A.createElement(ghe,{xAxisId:t,yAxisId:r,data:F,dataPointFormatter:zhe,errorBarOffset:L},A.createElement(Nhe,jd({},e,{layout:O,needClip:M,data:F,xAxisId:t,yAxisId:r,hide:n,legendType:l,minPointSize:h,activeBar:d,animationBegin:o,animationDuration:_,animationEasing:S,isAnimationActive:P})))}function Vhe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:l,bandSize:h,xAxis:d,yAxis:o,xAxisTicks:_,yAxisTicks:S,stackedData:P,displayedData:M,offset:O,cells:z,parentViewBox:B,dataStartIndex:F}=e,L=t==="horizontal"?o:d,K=P?L.scale.domain():null,Q=iee({numericAxis:L}),re=L.scale(Q);return M.map((te,ae)=>{var he,ne,be,xe,$e,Ee;P?he=JJ(P[ae+F],K):(he=Ha(te,r),Array.isArray(he)||(he=[Q,he]));var Ne=lhe(n,w6)(he[1],ae);if(t==="horizontal"){var Xe,[ut,pt]=[o.scale(he[0]),o.scale(he[1])];ne=XL({axis:d,ticks:_,bandSize:h,offset:l.offset,entry:te,index:ae}),be=(Xe=pt??ut)!==null&&Xe!==void 0?Xe:void 0,xe=l.size;var gt=ut-pt;if($e=_u(gt)?0:gt,Ee={x:ne,y:O.top,width:xe,height:O.height},Math.abs(Ne)>0&&Math.abs($e)<Math.abs(Ne)){var wt=Ys($e||Ne)*(Math.abs(Ne)-Math.abs($e));be-=wt,$e+=wt}}else{var[je,Qe]=[d.scale(he[0]),d.scale(he[1])];if(ne=je,be=XL({axis:o,ticks:S,bandSize:h,offset:l.offset,entry:te,index:ae}),xe=Qe-je,$e=l.size,Ee={x:O.left,y:be,width:O.width,height:$e},Math.abs(Ne)>0&&Math.abs(xe)<Math.abs(Ne)){var yt=Ys(xe||Ne)*(Math.abs(Ne)-Math.abs(xe));xe+=yt}}if(ne==null||be==null||xe==null||$e==null)return null;var Oe=bs(bs({},te),{},{stackedBarStart:re,x:ne,y:be,width:xe,height:$e,value:P?he:he[1],payload:te,background:Ee,tooltipPosition:{x:ne+xe/2,y:be+$e/2},parentViewBox:B},z&&z[ae]&&z[ae].props);return Oe}).filter(Boolean)}function $he(e){var t=Ao(e,Fhe),r=Qo();return A.createElement(g6,{id:t.id,type:"bar"},n=>A.createElement(A.Fragment,null,A.createElement(p6,{legendPayload:Mhe(t)}),A.createElement(khe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),A.createElement(v6,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:rB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),A.createElement(Su,{zIndex:t.zIndex},A.createElement(Bhe,jd({},t,{id:n})))))}var $x=A.memo($he,g1);$x.displayName="Bar";function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ex(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){Uhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uhe(e,t,r){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=Ghe(e,"string");return typeof t=="symbol"?t:t+""}function Ghe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Whe=(e,t)=>t,Hhe=(e,t,r)=>r,Zhe=(e,t,r,n)=>n,Khe=(e,t,r,n,l)=>l,u0=Tt([d1,Khe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Xhe=Tt([u0],e=>e==null?void 0:e.maxBarSize),Yhe=(e,t,r,n,l,h)=>h,Mj=(e,t,r)=>{var n=r??e;if(!Zi(n))return Pc(n,t,0)},Qhe=Tt([Bn,d1,Whe,Hhe,Zhe],(e,t,r,n,l)=>t.filter(h=>e==="horizontal"?h.xAxisId===r:h.yAxisId===n).filter(h=>h.isPanorama===l).filter(h=>h.hide===!1).filter(h=>h.type==="bar")),Jhe=(e,t,r,n)=>{var l=Bn(e);return l==="horizontal"?P_(e,"yAxis",r,n):P_(e,"xAxis",t,n)},ede=(e,t,r)=>{var n=Bn(e);return n==="horizontal"?kR(e,"xAxis",t):kR(e,"yAxis",r)},tde=(e,t,r)=>{var n={},l=e.filter(u1),h=e.filter(S=>S.stackId==null),d=l.reduce((S,P)=>(S[P.stackId]||(S[P.stackId]=[]),S[P.stackId].push(P),S),n),o=Object.entries(d).map(S=>{var[P,M]=S,O=M.map(B=>B.dataKey),z=Mj(t,r,M[0].barSize);return{stackId:P,dataKeys:O,barSize:z}}),_=h.map(S=>{var P=[S.dataKey].filter(O=>O!=null),M=Mj(t,r,S.barSize);return{stackId:void 0,dataKeys:P,barSize:M}});return[...o,..._]},rde=Tt([Qhe,Mae,ede],tde),nde=(e,t,r,n,l)=>{var h,d,o=u0(e,t,r,n,l);if(o!=null){var _=Bn(e),S=w5(e),{maxBarSize:P}=o,M=Zi(P)?S:P,O,z;return _==="horizontal"?(O=bp(e,"xAxis",t,n),z=xp(e,"xAxis",t,n)):(O=bp(e,"yAxis",r,n),z=xp(e,"yAxis",r,n)),(h=(d=My(O,z,!0))!==null&&d!==void 0?d:M)!==null&&h!==void 0?h:0}},S6=(e,t,r,n)=>{var l=Bn(e),h,d;return l==="horizontal"?(h=bp(e,"xAxis",t,n),d=xp(e,"xAxis",t,n)):(h=bp(e,"yAxis",r,n),d=xp(e,"yAxis",r,n)),My(h,d)};function ide(e,t,r,n,l){var h=n.length;if(!(h<1)){var d=Pc(e,r,0,!0),o,_=[];if(Ai(n[0].barSize)){var S=!1,P=r/h,M=n.reduce((K,Q)=>K+(Q.barSize||0),0);M+=(h-1)*d,M>=r&&(M-=(h-1)*d,d=0),M>=r&&P>0&&(S=!0,P*=.9,M=h*P);var O=(r-M)/2>>0,z={offset:O-d,size:0};o=n.reduce((K,Q)=>{var re,te={stackId:Q.stackId,dataKeys:Q.dataKeys,position:{offset:z.offset+z.size+d,size:S?P:(re=Q.barSize)!==null&&re!==void 0?re:0}},ae=[...K,te];return z=ae[ae.length-1].position,ae},_)}else{var B=Pc(t,r,0,!0);r-2*B-(h-1)*d<=0&&(d=0);var F=(r-2*B-(h-1)*d)/h;F>1&&(F>>=0);var L=Ai(l)?Math.min(F,l):F;o=n.reduce((K,Q,re)=>[...K,{stackId:Q.stackId,dataKeys:Q.dataKeys,position:{offset:B+(F+d)*re+(F-L)/2,size:L}}],_)}return o}}var ade=(e,t,r,n,l,h,d)=>{var o=Zi(d)?t:d,_=ide(r,n,l!==h?l:h,e,o);return l!==h&&_!=null&&(_=_.map(S=>Ex(Ex({},S),{},{position:Ex(Ex({},S.position),{},{offset:S.position.offset-l/2})}))),_},ode=Tt([rde,w5,Tae,S5,nde,S6,Xhe],ade),sde=(e,t,r,n)=>bp(e,"xAxis",t,n),lde=(e,t,r,n)=>bp(e,"yAxis",r,n),ude=(e,t,r,n)=>xp(e,"xAxis",t,n),cde=(e,t,r,n)=>xp(e,"yAxis",r,n),hde=Tt([ode,u0],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),dde=(e,t)=>{var r=l1(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var l=e[n];if(l){var{stackedData:h}=l;if(h)return h.find(d=>d.key===r)}}}},fde=Tt([Jhe,u0],dde),pde=Tt([bo,qC,sde,lde,ude,cde,hde,Bn,n1,S6,fde,u0,Yhe],(e,t,r,n,l,h,d,o,_,S,P,M,O)=>{var{chartData:z,dataStartIndex:B,dataEndIndex:F}=_;if(!(M==null||d==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||l==null||h==null||S==null)){var{data:L}=M,K;if(L!=null&&L.length>0?K=L:K=z==null?void 0:z.slice(B,F+1),K!=null)return Vhe({layout:o,barSettings:M,pos:d,parentViewBox:t,bandSize:S,xAxis:r,yAxis:n,xAxisTicks:l,yAxisTicks:h,stackedData:P,displayedData:K,offset:e,cells:O,dataStartIndex:B})}}),mde=e=>{var{chartData:t}=e,r=Ki(),n=Qo();return A.useEffect(()=>n?()=>{}:(r($R(t)),()=>{r($R(void 0))}),[t,r,n]),null},kj={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},P6=Yo({name:"brush",initialState:kj,reducers:{setBrushSettings(e,t){return t.payload==null?kj:t.payload}}}),{setBrushSettings:Fme}=P6.actions,gde=P6.reducer;function yde(e,t,r){return(t=vde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vde(e){var t=_de(e,"string");return typeof t=="symbol"?t:t+""}function _de(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class XT{static create(t){return new XT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}case"end":{var h=this.bandwidth?this.bandwidth():0;return this.scale(t)+h}default:return this.scale(t)}if(r){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+d}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],l=r[r.length-1];return n<=l?t>=n&&t<=l:t>=l&&t<=n}}yde(XT,"EPS",1e-4);function xde(e){return(e%180+180)%180}var bde=function(t){var{width:r,height:n}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=xde(l),d=h*Math.PI/180,o=Math.atan(n/r),_=d>o&&d<Math.PI-o?n/Math.sin(d):r/Math.cos(d);return Math.abs(_)},wde={dots:[],areas:[],lines:[]},E6=Yo({name:"referenceElements",initialState:wde,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=bc(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=bc(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=bc(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Bme,removeDot:Vme,addArea:$me,removeArea:Ume,addLine:qme,removeLine:Gme}=E6.actions,Sde=E6.reducer,Pde=A.createContext(void 0),Ede=e=>{var{children:t}=e,[r]=A.useState("".concat(p_("recharts"),"-clip")),n=ZT();if(n==null)return null;var{x:l,y:h,width:d,height:o}=n;return A.createElement(Pde.Provider,{value:r},A.createElement("defs",null,A.createElement("clipPath",{id:r},A.createElement("rect",{x:l,y:h,height:o,width:d}))),t)};function C6(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function Cde(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return bde(n,r)}function Tde(e,t,r){var n=r==="width",{x:l,y:h,width:d,height:o}=e;return t===1?{start:n?l:h,end:n?l+d:h+o}:{start:n?l+d:h+o,end:n?l:h}}function Jb(e,t,r,n,l){if(e*t<e*n||e*t>e*l)return!1;var h=r();return e*(t-e*h/2-n)>=0&&e*(t+e*h/2-l)<=0}function Mde(e,t){return C6(e,t+1)}function kde(e,t,r,n,l){for(var h=(n||[]).slice(),{start:d,end:o}=t,_=0,S=1,P=d,M=function(){var B=n==null?void 0:n[_];if(B===void 0)return{v:C6(n,S)};var F=_,L,K=()=>(L===void 0&&(L=r(B,F)),L),Q=B.coordinate,re=_===0||Jb(e,Q,K,P,o);re||(_=0,P=d,S+=1),re&&(P=Q+e*(K()/2+l),_+=S)},O;S<=h.length;)if(O=M(),O)return O.v;return[]}function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){Ade(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ade(e,t,r){return(t=Ide(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ide(e){var t=Ode(e,"string");return typeof t=="symbol"?t:t+""}function Ode(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lde(e,t,r,n,l){for(var h=(n||[]).slice(),d=h.length,{start:o}=t,{end:_}=t,S=function(O){var z=h[O],B,F=()=>(B===void 0&&(B=r(z,O)),B);if(O===d-1){var L=e*(z.coordinate+e*F()/2-_);h[O]=z=Zo(Zo({},z),{},{tickCoord:L>0?z.coordinate-L*e:z.coordinate})}else h[O]=z=Zo(Zo({},z),{},{tickCoord:z.coordinate});if(z.tickCoord!=null){var K=Jb(e,z.tickCoord,F,o,_);K&&(_=z.tickCoord-e*(F()/2+l),h[O]=Zo(Zo({},z),{},{isShow:!0}))}},P=d-1;P>=0;P--)S(P);return h}function Dde(e,t,r,n,l,h){var d=(n||[]).slice(),o=d.length,{start:_,end:S}=t;if(h){var P=n[o-1],M=r(P,o-1),O=e*(P.coordinate+e*M/2-S);if(d[o-1]=P=Zo(Zo({},P),{},{tickCoord:O>0?P.coordinate-O*e:P.coordinate}),P.tickCoord!=null){var z=Jb(e,P.tickCoord,()=>M,_,S);z&&(S=P.tickCoord-e*(M/2+l),d[o-1]=Zo(Zo({},P),{},{isShow:!0}))}}for(var B=h?o-1:o,F=function(Q){var re=d[Q],te,ae=()=>(te===void 0&&(te=r(re,Q)),te);if(Q===0){var he=e*(re.coordinate-e*ae()/2-_);d[Q]=re=Zo(Zo({},re),{},{tickCoord:he<0?re.coordinate-he*e:re.coordinate})}else d[Q]=re=Zo(Zo({},re),{},{tickCoord:re.coordinate});if(re.tickCoord!=null){var ne=Jb(e,re.tickCoord,ae,_,S);ne&&(_=re.tickCoord+e*(ae()/2+l),d[Q]=Zo(Zo({},re),{},{isShow:!0}))}},L=0;L<B;L++)F(L);return d}function YT(e,t,r){var{tick:n,ticks:l,viewBox:h,minTickGap:d,orientation:o,interval:_,tickFormatter:S,unit:P,angle:M}=e;if(!l||!l.length||!n)return[];if(_r(_)||Gy.isSsr){var O;return(O=Mde(l,_r(_)?_:0))!==null&&O!==void 0?O:[]}var z=[],B=o==="top"||o==="bottom"?"width":"height",F=P&&B==="width"?i_(P,{fontSize:t,letterSpacing:r}):{width:0,height:0},L=(re,te)=>{var ae=typeof S=="function"?S(re.value,te):re.value;return B==="width"?Cde(i_(ae,{fontSize:t,letterSpacing:r}),F,M):i_(ae,{fontSize:t,letterSpacing:r})[B]},K=l.length>=2?Ys(l[1].coordinate-l[0].coordinate):1,Q=Tde(h,K,B);return _==="equidistantPreserveStart"?kde(K,Q,L,l,d):(_==="preserveStart"||_==="preserveStartEnd"?z=Dde(K,Q,L,l,d,_==="preserveStartEnd"):z=Lde(K,Q,L,l,d),z.filter(re=>re.isShow))}var Rde=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:l=0,tickMargin:h=0}=e,d=0;if(t){Array.from(t).forEach(P=>{if(P){var M=P.getBoundingClientRect();M.width>d&&(d=M.width)}});var o=r?r.getBoundingClientRect().width:0,_=l+h,S=d+_+o+(r?n:0);return Math.round(S)}return 0},jde=["axisLine","width","height","className","hide","ticks","axisType"];function zde(e,t){if(e==null)return{};var r,n,l=Nde(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Nde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(null,arguments)}function Ij(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ij(Object(r),!0).forEach(function(n){Fde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ij(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fde(e,t,r){return(t=Bde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bde(e){var t=Vde(e,"string");return typeof t=="symbol"?t:t+""}function Vde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Td={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xo.axis};function $de(e){var{x:t,y:r,width:n,height:l,orientation:h,mirror:d,axisLine:o,otherSvgProps:_}=e;if(!o)return null;var S=Aa(Aa(Aa({},_),vu(o)),{},{fill:"none"});if(h==="top"||h==="bottom"){var P=+(h==="top"&&!d||h==="bottom"&&d);S=Aa(Aa({},S),{},{x1:t,y1:r+P*l,x2:t+n,y2:r+P*l})}else{var M=+(h==="left"&&!d||h==="right"&&d);S=Aa(Aa({},S),{},{x1:t+M*n,y1:r,x2:t+M*n,y2:r+l})}return A.createElement("line",tg({},S,{className:Hn("recharts-cartesian-axis-line",Ty(o,"className"))}))}function Ude(e,t,r,n,l,h,d,o,_){var S,P,M,O,z,B,F=o?-1:1,L=e.tickSize||d,K=_r(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":S=P=e.coordinate,O=r+ +!o*l,M=O-F*L,B=M-F*_,z=K;break;case"left":M=O=e.coordinate,P=t+ +!o*n,S=P-F*L,z=S-F*_,B=K;break;case"right":M=O=e.coordinate,P=t+ +o*n,S=P+F*L,z=S+F*_,B=K;break;default:S=P=e.coordinate,O=r+ +o*l,M=O+F*L,B=M+F*_,z=K;break}return{line:{x1:S,y1:M,x2:P,y2:O},tick:{x:z,y:B}}}function qde(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Gde(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Wde(e){var{option:t,tickProps:r,value:n}=e,l,h=Hn(r.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))l=A.cloneElement(t,Aa(Aa({},r),{},{className:h}));else if(typeof t=="function")l=t(Aa(Aa({},r),{},{className:h}));else{var d="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(d=Hn(d,t==null?void 0:t.className)),l=A.createElement(WT,tg({},r,{className:d}),n)}return l}var Hde=A.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:l,stroke:h,tickFormatter:d,unit:o,padding:_,tickTextProps:S,orientation:P,mirror:M,x:O,y:z,width:B,height:F,tickSize:L,tickMargin:K,fontSize:Q,letterSpacing:re,getTicksConfig:te,events:ae,axisType:he}=e,ne=YT(Aa(Aa({},te),{},{ticks:r}),Q,re),be=qde(P,M),xe=Gde(P,M),$e=vu(te),Ee=G_(n),Ne={};typeof l=="object"&&(Ne=l);var Xe=Aa(Aa({},$e),{},{fill:"none"},Ne),ut=ne.map(wt=>Aa({entry:wt},Ude(wt,O,z,B,F,P,L,M,K))),pt=ut.map(wt=>{var{entry:je,line:Qe}=wt;return A.createElement(Es,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(je.value,"-").concat(je.coordinate,"-").concat(je.tickCoord)},l&&A.createElement("line",tg({},Xe,Qe,{className:Hn("recharts-cartesian-axis-tick-line",Ty(l,"className"))})))}),gt=ut.map((wt,je)=>{var{entry:Qe,tick:yt}=wt,Oe=Aa(Aa(Aa(Aa({textAnchor:be,verticalAnchor:xe},$e),{},{stroke:"none",fill:h},Ee),yt),{},{index:je,payload:Qe,visibleTicksCount:ne.length,tickFormatter:d,padding:_},S);return A.createElement(Es,tg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Qe.value,"-").concat(Qe.coordinate,"-").concat(Qe.tickCoord)},zw(ae,Qe,je)),n&&A.createElement(Wde,{option:n,tickProps:Oe,value:"".concat(typeof d=="function"?d(Qe.value,je):Qe.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(he,"-ticks")},gt.length>0&&A.createElement(Su,{zIndex:xo.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(he,"-tick-labels"),ref:t},gt)),pt.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(he,"-tick-lines")},pt))}),Zde=A.forwardRef((e,t)=>{var{axisLine:r,width:n,height:l,className:h,hide:d,ticks:o,axisType:_}=e,S=zde(e,jde),[P,M]=A.useState(""),[O,z]=A.useState(""),B=A.useRef(null);A.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var L;return Rde({ticks:B.current,label:(L=e.labelRef)===null||L===void 0?void 0:L.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var F=A.useCallback(L=>{if(L){var K=L.getElementsByClassName("recharts-cartesian-axis-tick-value");B.current=K;var Q=K[0];if(Q){var re=window.getComputedStyle(Q),te=re.fontSize,ae=re.letterSpacing;(te!==P||ae!==O)&&(M(te),z(ae))}}},[P,O]);return d||n!=null&&n<=0||l!=null&&l<=0?null:A.createElement(Su,{zIndex:e.zIndex},A.createElement(Es,{className:Hn("recharts-cartesian-axis",h)},A.createElement($de,{x:e.x,y:e.y,width:n,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vu(e)}),A.createElement(Hde,{ref:F,axisType:_,events:S,fontSize:P,getTicksConfig:e,height:e.height,letterSpacing:O,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),A.createElement(wue,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},A.createElement(Oue,{label:e.label,labelRef:e.labelRef}),e.children)))}),QT=A.forwardRef((e,t)=>{var r=Ao(e,Td);return A.createElement(Zde,tg({},r,{ref:t}))});QT.displayName="CartesianAxis";var Kde=["x1","y1","x2","y2","key"],Xde=["offset"],Yde=["xAxisId","yAxisId"],Qde=["xAxisId","yAxisId"];function Oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(r),!0).forEach(function(n){Jde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jde(e,t,r){return(t=efe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function efe(e){var t=tfe(e,"string");return typeof t=="symbol"?t:t+""}function tfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(null,arguments)}function ew(e,t){if(e==null)return{};var r,n,l=rfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function rfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nfe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:l,width:h,height:d,ry:o}=e;return A.createElement("rect",{x:n,y:l,ry:o,width:h,height:d,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function T6(e){var{option:t,lineItemProps:r}=e,n;if(A.isValidElement(t))n=A.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var l,{x1:h,y1:d,x2:o,y2:_,key:S}=r,P=ew(r,Kde),M=(l=vu(P))!==null&&l!==void 0?l:{},{offset:O}=M,z=ew(M,Xde);n=A.createElement("line",Lm({},z,{x1:h,y1:d,x2:o,y2:_,fill:"none",key:S}))}return n}function ife(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:l}=e;if(!n||!l||!l.length)return null;var{xAxisId:h,yAxisId:d}=e,o=ew(e,Yde),_=l.map((S,P)=>{var M=Ko(Ko({},o),{},{x1:t,y1:S,x2:t+r,y2:S,key:"line-".concat(P),index:P});return A.createElement(T6,{key:"line-".concat(P),option:n,lineItemProps:M})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},_)}function afe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:l}=e;if(!n||!l||!l.length)return null;var{xAxisId:h,yAxisId:d}=e,o=ew(e,Qde),_=l.map((S,P)=>{var M=Ko(Ko({},o),{},{x1:S,y1:t,x2:S,y2:t+r,key:"line-".concat(P),index:P});return A.createElement(T6,{option:n,lineItemProps:M,key:"line-".concat(P)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},_)}function ofe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:l,width:h,height:d,horizontalPoints:o,horizontal:_=!0}=e;if(!_||!t||!t.length||o==null)return null;var S=o.map(M=>Math.round(M+l-l)).sort((M,O)=>M-O);l!==S[0]&&S.unshift(0);var P=S.map((M,O)=>{var z=!S[O+1],B=z?l+d-M:S[O+1]-M;if(B<=0)return null;var F=O%t.length;return A.createElement("rect",{key:"react-".concat(O),y:M,x:n,height:B,width:h,stroke:"none",fill:t[F],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},P)}function sfe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:l,y:h,width:d,height:o,verticalPoints:_}=e;if(!t||!r||!r.length)return null;var S=_.map(M=>Math.round(M+l-l)).sort((M,O)=>M-O);l!==S[0]&&S.unshift(0);var P=S.map((M,O)=>{var z=!S[O+1],B=z?l+d-M:S[O+1]-M;if(B<=0)return null;var F=O%r.length;return A.createElement("rect",{key:"react-".concat(O),x:M,y:h,width:B,height:o,stroke:"none",fill:r[F],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},P)}var lfe=(e,t)=>{var{xAxis:r,width:n,height:l,offset:h}=e;return eB(YT(Ko(Ko(Ko({},Td),r),{},{ticks:tB(r),viewBox:{x:0,y:0,width:n,height:l}})),h.left,h.left+h.width,t)},ufe=(e,t)=>{var{yAxis:r,width:n,height:l,offset:h}=e;return eB(YT(Ko(Ko(Ko({},Td),r),{},{ticks:tB(r),viewBox:{x:0,y:0,width:n,height:l}})),h.top,h.top+h.height,t)},cfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:xo.grid};function JT(e){var t=WC(),r=HC(),n=uB(),l=Ko(Ko({},Ao(e,cfe)),{},{x:_r(e.x)?e.x:n.left,y:_r(e.y)?e.y:n.top,width:_r(e.width)?e.width:n.width,height:_r(e.height)?e.height:n.height}),{xAxisId:h,yAxisId:d,x:o,y:_,width:S,height:P,syncWithTicks:M,horizontalValues:O,verticalValues:z}=l,B=Qo(),F=Or(xe=>AR(xe,"xAxis",h,B)),L=Or(xe=>AR(xe,"yAxis",d,B));if(!wh(S)||!wh(P)||!_r(o)||!_r(_))return null;var K=l.verticalCoordinatesGenerator||lfe,Q=l.horizontalCoordinatesGenerator||ufe,{horizontalPoints:re,verticalPoints:te}=l;if((!re||!re.length)&&typeof Q=="function"){var ae=O&&O.length,he=Q({yAxis:L?Ko(Ko({},L),{},{ticks:ae?O:L.ticks}):void 0,width:t??S,height:r??P,offset:n},ae?!0:M);Eb(Array.isArray(he),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof he,"]")),Array.isArray(he)&&(re=he)}if((!te||!te.length)&&typeof K=="function"){var ne=z&&z.length,be=K({xAxis:F?Ko(Ko({},F),{},{ticks:ne?z:F.ticks}):void 0,width:t??S,height:r??P,offset:n},ne?!0:M);Eb(Array.isArray(be),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof be,"]")),Array.isArray(be)&&(te=be)}return A.createElement(Su,{zIndex:l.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(nfe,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),A.createElement(ofe,Lm({},l,{horizontalPoints:re})),A.createElement(sfe,Lm({},l,{verticalPoints:te})),A.createElement(ife,Lm({},l,{offset:n,horizontalPoints:re,xAxis:F,yAxis:L})),A.createElement(afe,Lm({},l,{offset:n,verticalPoints:te,xAxis:F,yAxis:L}))))}JT.displayName="CartesianGrid";function hfe(e){var t=G_(e),r=3,n=2;if(t!=null){var{r:l,strokeWidth:h}=t,d=Number(l),o=Number(h);return(Number.isNaN(d)||d<0)&&(d=r),(Number.isNaN(o)||o<0)&&(o=n),{r:d,strokeWidth:o}}return{r,strokeWidth:n}}var M6=(e,t,r,n)=>bp(e,"xAxis",t,n),k6=(e,t,r,n)=>xp(e,"xAxis",t,n),A6=(e,t,r,n)=>bp(e,"yAxis",r,n),I6=(e,t,r,n)=>xp(e,"yAxis",r,n),dfe=Tt([Bn,M6,A6,k6,I6],(e,t,r,n,l)=>zd(e,"xAxis")?My(t,n,!1):My(r,l,!1)),ffe=(e,t,r,n,l)=>l,O6=Tt([d1,ffe],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),pfe=(e,t,r,n,l)=>{var h,d=O6(e,t,r,n,l);if(d!=null){var o=Bn(e),_=zd(o,"xAxis"),S;if(_?S=P_(e,"yAxis",r,n):S=P_(e,"xAxis",t,n),S!=null){var{stackId:P}=d,M=l1(d);if(!(P==null||M==null)){var O=(h=S[P])===null||h===void 0?void 0:h.stackedData;return O==null?void 0:O.find(z=>z.key===M)}}}},mfe=Tt([Bn,M6,A6,k6,I6,pfe,n1,dfe,O6,kae],(e,t,r,n,l,h,d,o,_,S)=>{var{chartData:P,dataStartIndex:M,dataEndIndex:O}=d;if(!(_==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||l==null||n.length===0||l.length===0||o==null)){var{data:z}=_,B;if(z&&z.length>0?B=z:B=P==null?void 0:P.slice(M,O+1),B!=null)return Dfe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:l,dataStartIndex:M,areaSettings:_,stackedData:h,displayedData:B,chartBaseValue:S,bandSize:o})}}),gfe=["id"],yfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hm.apply(null,arguments)}function L6(e,t){if(e==null)return{};var r,n,l=vfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function vfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lj(Object(r),!0).forEach(function(n){_fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _fe(e,t,r){return(t=xfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xfe(e){var t=bfe(e,"string");return typeof t=="symbol"?t:t+""}function bfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tw(e,t){return e&&e!=="none"?e:t}var wfe=e=>{var{dataKey:t,name:r,stroke:n,fill:l,legendType:h,hide:d}=e;return[{inactive:d,dataKey:t,type:h,color:tw(n,l),value:Fw(r,t),payload:e}]},Sfe=A.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:l,fill:h,name:d,hide:o,unit:_,tooltipType:S}=e,P={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:l,fill:h,dataKey:t,nameKey:void 0,name:Fw(d,t),hide:o,type:S,color:tw(n,h),unit:_}};return A.createElement(f6,{tooltipEntrySettings:P})});function Pfe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:l,dot:h,dataKey:d}=n,o=vu(n);return A.createElement(Lce,{points:r,dot:h,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:d,baseProps:o,needClip:l,clipPathId:t})}function Efe(e){var{showLabels:t,children:r,points:n}=e,l=n.map(h=>{var d,o,_={x:(d=h.x)!==null&&d!==void 0?d:0,y:(o=h.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ay(ay({},_),{},{value:h.value,payload:h.payload,parentViewBox:void 0,viewBox:_,fill:void 0})});return A.createElement(n6,{value:t?l:void 0},r)}function Dj(e){var{points:t,baseLine:r,needClip:n,clipPathId:l,props:h}=e,{layout:d,type:o,stroke:_,connectNulls:S,isRange:P}=h,{id:M}=h,O=L6(h,gfe),z=vu(O),B=Ps(O);return A.createElement(A.Fragment,null,(t==null?void 0:t.length)>1&&A.createElement(Es,{clipPath:n?"url(#clipPath-".concat(l,")"):void 0},A.createElement(n_,Hm({},B,{id:M,points:t,connectNulls:S,type:o,baseLine:r,layout:d,stroke:"none",className:"recharts-area-area"})),_!=="none"&&A.createElement(n_,Hm({},z,{className:"recharts-area-curve",layout:d,type:o,connectNulls:S,fill:"none",points:t})),_!=="none"&&P&&A.createElement(n_,Hm({},z,{className:"recharts-area-curve",layout:d,type:o,connectNulls:S,fill:"none",points:r}))),A.createElement(Pfe,{points:t,props:O,clipPathId:l}))}function Cfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:l}=e,h=n[0].y,d=n[n.length-1].y;if(!Ai(h)||!Ai(d))return null;var o=t*Math.abs(h-d),_=Math.max(...n.map(S=>S.x||0));return _r(r)?_=Math.max(r,_):r&&Array.isArray(r)&&r.length&&(_=Math.max(...r.map(S=>S.x||0),_)),_r(_)?A.createElement("rect",{x:0,y:h<d?h:h-o,width:_+(l?parseInt("".concat(l),10):1),height:Math.floor(o)}):null}function Tfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:l}=e,h=n[0].x,d=n[n.length-1].x;if(!Ai(h)||!Ai(d))return null;var o=t*Math.abs(h-d),_=Math.max(...n.map(S=>S.y||0));return _r(r)?_=Math.max(r,_):r&&Array.isArray(r)&&r.length&&(_=Math.max(...r.map(S=>S.y||0),_)),_r(_)?A.createElement("rect",{x:h<d?h:h-o,y:0,width:o,height:Math.floor(_+(l?parseInt("".concat(l),10):1))}):null}function Mfe(e){var{alpha:t,layout:r,points:n,baseLine:l,strokeWidth:h}=e;return r==="vertical"?A.createElement(Cfe,{alpha:t,points:n,baseLine:l,strokeWidth:h}):A.createElement(Tfe,{alpha:t,points:n,baseLine:l,strokeWidth:h})}function kfe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:h}=e,{points:d,baseLine:o,isAnimationActive:_,animationBegin:S,animationDuration:P,animationEasing:M,onAnimationStart:O,onAnimationEnd:z}=n,B=A.useMemo(()=>({points:d,baseLine:o}),[d,o]),F=Xw(B,"recharts-area-"),L=$ee(),[K,Q]=A.useState(!1),re=!K,te=A.useCallback(()=>{typeof z=="function"&&z(),Q(!1)},[z]),ae=A.useCallback(()=>{typeof O=="function"&&O(),Q(!0)},[O]);if(L==null)return null;var he=l.current,ne=h.current;return A.createElement(Efe,{showLabels:re,points:d},n.children,A.createElement(Kw,{animationId:F,begin:S,duration:P,isActive:_,easing:M,onAnimationEnd:te,onAnimationStart:ae,key:F},be=>{if(he){var xe=he.length/d.length,$e=be===1?d:d.map((Ne,Xe)=>{var ut=Math.floor(Xe*xe);if(he[ut]){var pt=he[ut];return ay(ay({},Ne),{},{x:Hi(pt.x,Ne.x,be),y:Hi(pt.y,Ne.y,be)})}return Ne}),Ee;return _r(o)?Ee=Hi(ne,o,be):Zi(o)||_u(o)?Ee=Hi(ne,0,be):Ee=o.map((Ne,Xe)=>{var ut=Math.floor(Xe*xe);if(Array.isArray(ne)&&ne[ut]){var pt=ne[ut];return ay(ay({},Ne),{},{x:Hi(pt.x,Ne.x,be),y:Hi(pt.y,Ne.y,be)})}return Ne}),be>0&&(l.current=$e,h.current=Ee),A.createElement(Dj,{points:$e,baseLine:Ee,needClip:t,clipPathId:r,props:n})}return be>0&&(l.current=d,h.current=o),A.createElement(Es,null,_&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(r)},A.createElement(Mfe,{alpha:be,points:d,baseLine:o,layout:L,strokeWidth:n.strokeWidth}))),A.createElement(Es,{clipPath:"url(#animationClipPath-".concat(r,")")},A.createElement(Dj,{points:d,baseLine:o,needClip:t,clipPathId:r,props:n})))}),A.createElement(a6,{label:n.label}))}function Afe(e){var{needClip:t,clipPathId:r,props:n}=e,l=A.useRef(null),h=A.useRef();return A.createElement(kfe,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:h})}class Ife extends A.PureComponent{render(){var{hide:t,dot:r,points:n,className:l,top:h,left:d,needClip:o,xAxisId:_,yAxisId:S,width:P,height:M,id:O,baseLine:z,zIndex:B}=this.props;if(t)return null;var F=Hn("recharts-area",l),L=O,{r:K,strokeWidth:Q}=hfe(r),re=u6(r),te=K*2+Q,ae=o?"url(#clipPath-".concat(re?"":"dots-").concat(L,")"):void 0;return A.createElement(Su,{zIndex:B},A.createElement(Es,{className:F},o&&A.createElement("defs",null,A.createElement(b6,{clipPathId:L,xAxisId:_,yAxisId:S}),!re&&A.createElement("clipPath",{id:"clipPath-dots-".concat(L)},A.createElement("rect",{x:d-te/2,y:h-te/2,width:P+te,height:M+te}))),A.createElement(Afe,{needClip:o,clipPathId:L,props:this.props})),A.createElement(Pj,{points:n,mainColor:tw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ae}),this.props.isRange&&Array.isArray(z)&&A.createElement(Pj,{points:z,mainColor:tw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ae}))}}var D6={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:xo.area};function Ofe(e){var t,r=Ao(e,D6),{activeDot:n,animationBegin:l,animationDuration:h,animationEasing:d,connectNulls:o,dot:_,fill:S,fillOpacity:P,hide:M,isAnimationActive:O,legendType:z,stroke:B,xAxisId:F,yAxisId:L}=r,K=L6(r,yfe),Q=qy(),re=j4(),{needClip:te}=KT(F,L),ae=Qo(),{points:he,isRange:ne,baseLine:be}=(t=Or(ut=>mfe(ut,F,L,ae,e.id)))!==null&&t!==void 0?t:{},xe=ZT();if(Q!=="horizontal"&&Q!=="vertical"||xe==null||re!=="AreaChart"&&re!=="ComposedChart")return null;var{height:$e,width:Ee,x:Ne,y:Xe}=xe;return!he||!he.length?null:A.createElement(Ife,Hm({},K,{activeDot:n,animationBegin:l,animationDuration:h,animationEasing:d,baseLine:be,connectNulls:o,dot:_,fill:S,fillOpacity:P,height:$e,hide:M,layout:Q,isAnimationActive:O==="auto"?!Gy.isSsr:O,isRange:ne,legendType:z,needClip:te,points:he,stroke:B,width:Ee,left:Ne,top:Xe,xAxisId:F,yAxisId:L}))}var Lfe=(e,t,r,n,l)=>{var h=r??t;if(_r(h))return h;var d=e==="horizontal"?l:n,o=d.scale.domain();if(d.type==="number"){var _=Math.max(o[0],o[1]),S=Math.min(o[0],o[1]);return h==="dataMin"?S:h==="dataMax"||_<0?_:Math.max(Math.min(o[0],o[1]),0)}return h==="dataMin"?o[0]:h==="dataMax"?o[1]:o[0]};function Dfe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:l,layout:h,chartBaseValue:d,xAxis:o,yAxis:_,displayedData:S,dataStartIndex:P,xAxisTicks:M,yAxisTicks:O,bandSize:z}=e,B=l&&l.length,F=Lfe(h,d,r,o,_),L=h==="horizontal",K=!1,Q=S.map((te,ae)=>{var he;B?he=l[P+ae]:(he=Ha(te,n),Array.isArray(he)?K=!0:he=[F,he]);var ne=he[1]==null||B&&!t&&Ha(te,n)==null;return L?{x:KL({axis:o,ticks:M,bandSize:z,entry:te,index:ae}),y:ne?null:_.scale(he[1]),value:he,payload:te}:{x:ne?null:o.scale(he[1]),y:KL({axis:_,ticks:O,bandSize:z,entry:te,index:ae}),value:he,payload:te}}),re;return B||K?re=Q.map(te=>{var ae=Array.isArray(te.value)?te.value[0]:null;return L?{x:te.x,y:ae!=null&&te.y!=null?_.scale(ae):null,payload:te.payload}:{x:ae!=null?o.scale(ae):null,y:te.y,payload:te.payload}}):re=L?_.scale(F):o.scale(F),{points:Q,baseLine:re,isRange:K}}function Rfe(e){var t=Ao(e,D6),r=Qo();return A.createElement(g6,{id:t.id,type:"area"},n=>A.createElement(A.Fragment,null,A.createElement(p6,{legendPayload:wfe(t)}),A.createElement(Sfe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),A.createElement(v6,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:rB(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),A.createElement(Ofe,Hm({},t,{id:n}))))}var $E=A.memo(Rfe,g1);$E.displayName="Area";var jfe=["domain","range"],zfe=["domain","range"];function Rj(e,t){if(e==null)return{};var r,n,l=Nfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Nfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jj(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function R6(e,t){if(e===t)return!0;var{domain:r,range:n}=e,l=Rj(e,jfe),{domain:h,range:d}=t,o=Rj(t,zfe);return!jj(r,h)||!jj(n,d)?!1:g1(l,o)}var Ffe=["dangerouslySetInnerHTML","ticks"],Bfe=["id"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UE.apply(null,arguments)}function zj(e,t){if(e==null)return{};var r,n,l=Vfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Vfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $fe(e){var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(Nce(e)):r.current!==e&&t(Fce({prev:r.current,next:e})),r.current=e},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(t(Bce(r.current)),r.current=null)},[t]),null}var Ufe=e=>{var{xAxisId:t,className:r}=e,n=Or(qC),l=Qo(),h="xAxis",d=Or(L=>Yy(L,h,t,l)),o=Or(L=>f4(L,h,t,l)),_=Or(L=>u4(L,t)),S=Or(L=>Coe(L,t)),P=Or(L=>O5(L,t));if(_==null||S==null||P==null)return null;var{dangerouslySetInnerHTML:M,ticks:O}=e,z=zj(e,Ffe),{id:B}=P,F=zj(P,Bfe);return A.createElement(QT,UE({},z,F,{scale:d,x:S.x,y:S.y,width:_.width,height:_.height,className:Hn("recharts-".concat(h," ").concat(h),r),viewBox:n,ticks:o,axisType:h}))},qfe={allowDataOverflow:go.allowDataOverflow,allowDecimals:go.allowDecimals,allowDuplicatedCategory:go.allowDuplicatedCategory,angle:go.angle,axisLine:Td.axisLine,height:go.height,hide:!1,includeHidden:go.includeHidden,interval:go.interval,minTickGap:go.minTickGap,mirror:go.mirror,orientation:go.orientation,padding:go.padding,reversed:go.reversed,scale:go.scale,tick:go.tick,tickCount:go.tickCount,tickLine:Td.tickLine,tickSize:Td.tickSize,type:go.type,xAxisId:0},Gfe=e=>{var t=Ao(e,qfe);return A.createElement(A.Fragment,null,A.createElement($fe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),A.createElement(Ufe,t))},eM=A.memo(Gfe,R6);eM.displayName="XAxis";var Wfe=["dangerouslySetInnerHTML","ticks"],Hfe=["id"];function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qE.apply(null,arguments)}function Nj(e,t){if(e==null)return{};var r,n,l=Zfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Zfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kfe(e){var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(Vce(e)):r.current!==e&&t($ce({prev:r.current,next:e})),r.current=e},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(t(Uce(r.current)),r.current=null)},[t]),null}var Xfe=e=>{var{yAxisId:t,className:r,width:n,label:l}=e,h=A.useRef(null),d=A.useRef(null),o=Or(qC),_=Qo(),S=Ki(),P="yAxis",M=Or(ae=>Yy(ae,P,t,_)),O=Or(ae=>c4(ae,t)),z=Or(ae=>Moe(ae,t)),B=Or(ae=>f4(ae,P,t,_)),F=Or(ae=>L5(ae,t));if(A.useLayoutEffect(()=>{if(!(n!=="auto"||!O||HT(l)||A.isValidElement(l)||F==null)){var ae=h.current;if(ae){var he=ae.getCalculatedWidth();Math.round(O.width)!==Math.round(he)&&S(qce({id:t,width:he}))}}},[B,O,S,l,t,n,F]),O==null||z==null||F==null)return null;var{dangerouslySetInnerHTML:L,ticks:K}=e,Q=Nj(e,Wfe),{id:re}=F,te=Nj(F,Hfe);return A.createElement(QT,qE({},Q,te,{ref:h,labelRef:d,scale:M,x:z.x,y:z.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:O.width,height:O.height,className:Hn("recharts-".concat(P," ").concat(P),r),viewBox:o,ticks:B,axisType:P}))},Yfe={allowDataOverflow:yo.allowDataOverflow,allowDecimals:yo.allowDecimals,allowDuplicatedCategory:yo.allowDuplicatedCategory,angle:yo.angle,axisLine:Td.axisLine,hide:!1,includeHidden:yo.includeHidden,interval:yo.interval,minTickGap:yo.minTickGap,mirror:yo.mirror,orientation:yo.orientation,padding:yo.padding,reversed:yo.reversed,scale:yo.scale,tick:yo.tick,tickCount:yo.tickCount,tickLine:Td.tickLine,tickSize:Td.tickSize,type:yo.type,width:yo.width,yAxisId:0},Qfe=e=>{var t=Ao(e,Yfe);return A.createElement(A.Fragment,null,A.createElement(Kfe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),A.createElement(Xfe,t))},rw=A.memo(Qfe,R6);rw.displayName="YAxis";var Jfe=(e,t)=>t,tM=Tt([Jfe,Bn,A5,Ya,k4,Ud,$se,bo],Kse),rM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},j6=yu("mouseClick"),z6=j_();z6.startListening({actionCreator:j6,effect:(e,t)=>{var r=e.payload,n=tM(t.getState(),rM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch($oe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var GE=yu("mouseMove"),N6=j_(),Cx=null;N6.startListening({actionCreator:GE,effect:(e,t)=>{var r=e.payload;Cx!==null&&cancelAnimationFrame(Cx);var n=rM(r);Cx=requestAnimationFrame(()=>{var l=t.getState(),h=jT(l,l.tooltip.settings.shared);if(h==="axis"){var d=tM(l,n);(d==null?void 0:d.activeIndex)!=null?t.dispatch(b4({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(x4())}Cx=null})}});var Fj={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},F6=Yo({name:"rootProps",initialState:Fj,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Fj.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),epe=F6.reducer,{updateOptions:tpe}=F6.actions,B6=Yo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Wme}=B6.actions,rpe=B6.reducer,V6=yu("keyDown"),$6=yu("focus"),nM=j_();nM.startListening({actionCreator:V6,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip,h=e.payload;if(!(h!=="ArrowRight"&&h!=="ArrowLeft"&&h!=="Enter")){var d=zT(l,Jy(r),r0(r),s0(r)),o=d==null?-1:Number(d);if(!(!Number.isFinite(o)||o<0)){var _=Ud(r);if(h==="Enter"){var S=Wb(r,"axis","hover",String(l.index));t.dispatch(RE({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:S}));return}var P=Ooe(r),M=P==="left-to-right"?1:-1,O=h==="ArrowRight"?1:-1,z=o+O*M;if(!(_==null||z>=_.length||z<0)){var B=Wb(r,"axis","hover",String(z));t.dispatch(RE({active:!0,activeIndex:z.toString(),activeDataKey:void 0,activeCoordinate:B}))}}}}}});nM.startListening({actionCreator:$6,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:l}=r.tooltip;if(!l.active&&l.index==null){var h="0",d=Wb(r,"axis","hover",String(h));t.dispatch(RE({activeDataKey:void 0,active:!0,activeIndex:h,activeCoordinate:d}))}}}});var lu=yu("externalEvent"),U6=j_(),d2=new Map;U6.startListening({actionCreator:lu,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var l=n.type,h=d2.get(l);h!==void 0&&cancelAnimationFrame(h);var d=requestAnimationFrame(()=>{try{var o=t.getState(),_={activeCoordinate:Tse(o),activeDataKey:L4(o),activeIndex:eg(o),activeLabel:O4(o),activeTooltipIndex:eg(o),isTooltipActive:Mse(o)};r(_,n)}finally{d2.delete(l)}});d2.set(l,d)}}});var npe=Tt([Qy],e=>e.tooltipItemPayloads),ipe=Tt([npe,a0,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var l=e.find(o=>o.settings.dataKey===n);if(l!=null){var{positions:h}=l;if(h!=null){var d=t(h,r);return d}}}),q6=yu("touchMove"),G6=j_();G6.startListening({actionCreator:q6,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),l=jT(n,n.tooltip.settings.shared);if(l==="axis"){var h=tM(n,rM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(h==null?void 0:h.activeIndex)!=null&&t.dispatch(b4({activeIndex:h.activeIndex,activeDataKey:void 0,activeCoordinate:h.activeCoordinate}))}else if(l==="item"){var d,o=r.touches[0];if(document.elementFromPoint==null)return;var _=document.elementFromPoint(o.clientX,o.clientY);if(!_||!_.getAttribute)return;var S=_.getAttribute(hee),P=(d=_.getAttribute(dee))!==null&&d!==void 0?d:void 0,M=ipe(t.getState(),S,P);t.dispatch(_4({activeDataKey:P,activeIndex:S,activeCoordinate:M}))}}}});var ape=qz({brush:gde,cartesianAxis:Gce,chartData:Cle,errorBars:che,graphicalItems:Sce,layout:HJ,legend:ote,options:ble,polarAxis:Wue,polarOptions:rpe,referenceElements:Sde,rootProps:epe,tooltip:Uoe,zIndex:ule}),ope=function(t){return s3({reducer:ape,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([z6.middleware,N6.middleware,nM.middleware,U6.middleware,G6.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(o3({type:"raf"}))},devTools:Gy.devToolsEnabled})};function spe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,l=Qo(),h=A.useRef(null);if(l)return r;h.current==null&&(h.current=ope(t));var d=UC;return A.createElement(Q3,{context:d,store:h.current},r)}function lpe(e){var{layout:t,margin:r}=e,n=Ki(),l=Qo();return A.useEffect(()=>{l||(n(qJ(t)),n(UJ(r)))},[n,l,t,r]),null}var upe=A.memo(lpe,g1);function cpe(e){var t=Ki();return A.useEffect(()=>{t(tpe(e))},[t,e]),null}function Bj(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",l=m6("".concat(n).concat(t)),h=Ki();return A.useLayoutEffect(()=>(h(sle({zIndex:t,elementId:l,isPanorama:r})),()=>{h(lle({zIndex:t,isPanorama:r}))}),[h,t,l,r]),A.createElement("g",{tabIndex:-1,id:l})}function Vj(e){var{children:t,isPanorama:r}=e,n=Or(Yse);if(!n||n.length===0)return t;var l=n.filter(d=>d<0),h=n.filter(d=>d>0);return A.createElement(A.Fragment,null,l.map(d=>A.createElement(Bj,{key:d,zIndex:d,isPanorama:r})),t,h.map(d=>A.createElement(Bj,{key:d,zIndex:d,isPanorama:r})))}var hpe=["children"];function dpe(e,t){if(e==null)return{};var r,n,l=fpe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function fpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nw.apply(null,arguments)}var ppe={width:"100%",height:"100%",display:"block"},mpe=A.forwardRef((e,t)=>{var r=WC(),n=HC(),l=vB();if(!wh(r)||!wh(n))return null;var{children:h,otherAttributes:d,title:o,desc:_}=e,S,P;return d!=null&&(typeof d.tabIndex=="number"?S=d.tabIndex:S=l?0:void 0,typeof d.role=="string"?P=d.role:P=l?"application":void 0),A.createElement(LC,nw({},d,{title:o,desc:_,role:P,tabIndex:S,width:r,height:n,style:ppe,ref:t}),h)}),gpe=e=>{var{children:t}=e,r=Or(Uw);if(!r)return null;var{width:n,height:l,y:h,x:d}=r;return A.createElement(LC,{width:n,height:l,x:d,y:h},t)},$j=A.forwardRef((e,t)=>{var{children:r}=e,n=dpe(e,hpe),l=Qo();return l?A.createElement(gpe,null,A.createElement(Vj,{isPanorama:!0},r)):A.createElement(mpe,nw({ref:t},n),A.createElement(Vj,{isPanorama:!1},r))});function ype(){var e=Ki(),[t,r]=A.useState(null),n=Or(cee);return A.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),h=l.width/t.offsetWidth;Ai(h)&&h!==n&&e(WJ(h))}},[t,e,n]),r}function Uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,n)}return r}function vpe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(r),!0).forEach(function(n){_pe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _pe(e,t,r){return(t=xpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xpe(e){var t=bpe(e,"string");return typeof t=="symbol"?t:t+""}function bpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rg.apply(null,arguments)}var wpe=()=>(Rle(),null);function iw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Spe=A.forwardRef((e,t)=>{var r,n,l=A.useRef(null),[h,d]=A.useState({containerWidth:iw((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:iw((n=e.style)===null||n===void 0?void 0:n.height)}),o=A.useCallback((S,P)=>{d(M=>{var O=Math.round(S),z=Math.round(P);return M.containerWidth===O&&M.containerHeight===z?M:{containerWidth:O,containerHeight:z}})},[]),_=A.useCallback(S=>{if(typeof t=="function"&&t(S),S!=null&&typeof ResizeObserver<"u"){var{width:P,height:M}=S.getBoundingClientRect();o(P,M);var O=B=>{var{width:F,height:L}=B[0].contentRect;o(F,L)},z=new ResizeObserver(O);z.observe(S),l.current=z}},[t,o]);return A.useEffect(()=>()=>{var S=l.current;S!=null&&S.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(Gw,{width:h.containerWidth,height:h.containerHeight}),A.createElement("div",rg({ref:_},e)))}),Ppe=A.forwardRef((e,t)=>{var{width:r,height:n}=e,[l,h]=A.useState({containerWidth:iw(r),containerHeight:iw(n)}),d=A.useCallback((_,S)=>{h(P=>{var M=Math.round(_),O=Math.round(S);return P.containerWidth===M&&P.containerHeight===O?P:{containerWidth:M,containerHeight:O}})},[]),o=A.useCallback(_=>{if(typeof t=="function"&&t(_),_!=null){var{width:S,height:P}=_.getBoundingClientRect();d(S,P)}},[t,d]);return A.createElement(A.Fragment,null,A.createElement(Gw,{width:l.containerWidth,height:l.containerHeight}),A.createElement("div",rg({ref:o},e)))}),Epe=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return A.createElement(A.Fragment,null,A.createElement(Gw,{width:r,height:n}),A.createElement("div",rg({ref:t},e)))}),Cpe=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return Id(r)||Id(n)?A.createElement(Ppe,rg({},e,{ref:t})):A.createElement(Epe,rg({},e,{ref:t}))});function Tpe(e){return e===!0?Spe:Cpe}var Mpe=A.forwardRef((e,t)=>{var{children:r,className:n,height:l,onClick:h,onContextMenu:d,onDoubleClick:o,onMouseDown:_,onMouseEnter:S,onMouseLeave:P,onMouseMove:M,onMouseUp:O,onTouchEnd:z,onTouchMove:B,onTouchStart:F,style:L,width:K,responsive:Q,dispatchTouchEvents:re=!0}=e,te=A.useRef(null),ae=Ki(),[he,ne]=A.useState(null),[be,xe]=A.useState(null),$e=ype(),Ee=GC(),Ne=(Ee==null?void 0:Ee.width)>0?Ee.width:K,Xe=(Ee==null?void 0:Ee.height)>0?Ee.height:l,ut=A.useCallback(ct=>{$e(ct),typeof t=="function"&&t(ct),ne(ct),xe(ct),ct!=null&&(te.current=ct)},[$e,t,ne,xe]),pt=A.useCallback(ct=>{ae(j6(ct)),ae(lu({handler:h,reactEvent:ct}))},[ae,h]),gt=A.useCallback(ct=>{ae(GE(ct)),ae(lu({handler:S,reactEvent:ct}))},[ae,S]),wt=A.useCallback(ct=>{ae(x4()),ae(lu({handler:P,reactEvent:ct}))},[ae,P]),je=A.useCallback(ct=>{ae(GE(ct)),ae(lu({handler:M,reactEvent:ct}))},[ae,M]),Qe=A.useCallback(()=>{ae($6())},[ae]),yt=A.useCallback(ct=>{ae(V6(ct.key))},[ae]),Oe=A.useCallback(ct=>{ae(lu({handler:d,reactEvent:ct}))},[ae,d]),et=A.useCallback(ct=>{ae(lu({handler:o,reactEvent:ct}))},[ae,o]),Mt=A.useCallback(ct=>{ae(lu({handler:_,reactEvent:ct}))},[ae,_]),Dt=A.useCallback(ct=>{ae(lu({handler:O,reactEvent:ct}))},[ae,O]),Ke=A.useCallback(ct=>{ae(lu({handler:F,reactEvent:ct}))},[ae,F]),tr=A.useCallback(ct=>{re&&ae(q6(ct)),ae(lu({handler:B,reactEvent:ct}))},[ae,re,B]),Ft=A.useCallback(ct=>{ae(lu({handler:z,reactEvent:ct}))},[ae,z]),$t=Tpe(Q);return A.createElement(V4.Provider,{value:he},A.createElement(gF.Provider,{value:be},A.createElement($t,{width:Ne??(L==null?void 0:L.width),height:Xe??(L==null?void 0:L.height),className:Hn("recharts-wrapper",n),style:vpe({position:"relative",cursor:"default",width:Ne,height:Xe},L),onClick:pt,onContextMenu:Oe,onDoubleClick:et,onFocus:Qe,onKeyDown:yt,onMouseDown:Mt,onMouseEnter:gt,onMouseLeave:wt,onMouseMove:je,onMouseUp:Dt,onTouchEnd:Ft,onTouchMove:tr,onTouchStart:Ke,ref:ut},A.createElement(wpe,null),r)))}),kpe=["width","height","responsive","children","className","style","compact","title","desc"];function Ape(e,t){if(e==null)return{};var r,n,l=Ipe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Ipe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ope=A.forwardRef((e,t)=>{var{width:r,height:n,responsive:l,children:h,className:d,style:o,compact:_,title:S,desc:P}=e,M=Ape(e,kpe),O=vu(M);return _?A.createElement(A.Fragment,null,A.createElement(Gw,{width:r,height:n}),A.createElement($j,{otherAttributes:O,title:S,desc:P},h)):A.createElement(Mpe,{className:d,style:o,width:r,height:n,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement($j,{otherAttributes:O,title:S,desc:P,ref:t},A.createElement(Ede,null,h)))});function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WE.apply(null,arguments)}var Lpe={top:5,right:5,bottom:5,left:5},Dpe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Lpe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},W6=A.forwardRef(function(t,r){var n,l=Ao(t.categoricalChartProps,Dpe),{chartName:h,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:_,categoricalChartProps:S}=t,P={chartName:h,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:_,eventEmitter:void 0};return A.createElement(spe,{preloadedState:{options:P},reduxStoreName:(n=S.id)!==null&&n!==void 0?n:h},A.createElement(mde,{chartData:S.data}),A.createElement(upe,{layout:l.layout,margin:l.margin}),A.createElement(cpe,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),A.createElement(Ope,WE({},l,{ref:r})))}),Rpe=["axis","item"],jpe=A.forwardRef((e,t)=>A.createElement(W6,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Rpe,tooltipPayloadSearcher:$4,categoricalChartProps:e,ref:t})),zpe=["axis"],Npe=A.forwardRef((e,t)=>A.createElement(W6,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zpe,tooltipPayloadSearcher:$4,categoricalChartProps:e,ref:t}));function Fpe({elevationData:e}){const r=!e||(e==null?void 0:e.length)===0?[{distance:0,elevation:10,battery:100},{distance:20,elevation:35,battery:92},{distance:40,elevation:60,battery:85},{distance:60,elevation:45,battery:78},{distance:80,elevation:25,battery:70}]:e.map(o=>{const _=o.x_km*.621371,S=Math.max(0,Math.min(100,o.soc)),P=20+S*.6+o.x_km%100*.4;return{distance:Math.round(_),elevation:Math.round(P),battery:Math.round(S*10)/10}}),n=380,l=r.length<=8?80:0,h=n+l,d=({active:o,payload:_,label:S})=>{var P,M,O,z;return!o||!_||!_.length?null:r.length<=6?$.jsxs("div",{className:"bg-white p-5 border border-gray-300 rounded-xl shadow-xl min-w-60",children:[$.jsx("p",{className:"font-medium text-gray-800 mb-2",children:"Route Overview"}),$.jsxs("p",{className:"text-gray-600 text-sm",children:["Limited data points available (",r.length,")"]}),$.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[$.jsxs("p",{className:"font-medium",children:["Distance: ",S," mi"]}),$.jsxs("p",{style:{color:"#2980b9"},children:["Elevation: ",(P=_[0])==null?void 0:P.value," ft"]}),$.jsxs("p",{style:{color:"#28b463"},children:["Battery: ",(M=_[1])==null?void 0:M.value,"%"]})]})]}):$.jsxs("div",{className:"bg-white/95 backdrop-blur-sm px-4 py-3 rounded-lg border border-gray-200 shadow-md min-w-[200px] text-sm",children:[$.jsxs("div",{className:"font-semibold text-gray-800 mb-2",children:[S," miles"]}),$.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-x-3 gap-y-1.5",children:[$.jsx("span",{className:"text-blue-600 font-medium",children:""}),$.jsxs("span",{children:["Elevation: ",(O=_[0])==null?void 0:O.value," ft"]}),$.jsx("span",{className:"text-green-600 font-medium",children:"Battery"}),$.jsxs("span",{children:[(z=_[1])==null?void 0:z.value,"%"]})]})]})};return $.jsxs("div",{className:"bg-white p-8 rounded-2xl border",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title text-black!",children:"Energy Profile & Elevation"}),$.jsx("p",{className:"paragraph mt-6",children:"Projected battery depletion against route topography"})]}),$.jsx("div",{className:"w-full my-10",style:{height:`${h}px`},children:$.jsx(sB,{width:"100%",height:"100%",children:$.jsxs(Npe,{data:r,children:[$.jsxs("defs",{children:[$.jsxs("linearGradient",{id:"elevationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"0%",stopColor:"rgba(30,120,255,0.35)"}),$.jsx("stop",{offset:"100%",stopColor:"rgba(30,120,255,0)"})]}),$.jsxs("linearGradient",{id:"batteryGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"0%",stopColor:"rgba(46,204,113,0.25)"}),$.jsx("stop",{offset:"100%",stopColor:"rgba(46,204,113,0)"})]})]}),$.jsx(JT,{stroke:"rgba(0,0,0,0.05)",vertical:!1}),$.jsx(eM,{dataKey:"distance",label:{value:"Distance (mi)",position:"insideBottom",dy:10,fontSize:12},tick:{fill:"#7f8c8d",fontSize:11},axisLine:!1}),$.jsx(rw,{yAxisId:"left",domain:[0,100],tick:{fill:"#27ae60",fontSize:11},label:{value:"Battery %",angle:-90,position:"insideLeft",fill:"#27ae60",fontSize:12},axisLine:!1}),$.jsx(rw,{yAxisId:"right",orientation:"right",domain:[0,"dataMax + 20"],tick:{fill:"#2980b9",fontSize:11},label:{value:"Elevation (ft)",angle:90,position:"insideRight",fill:"#2980b9",fontSize:12},axisLine:!1}),$.jsx(Ule,{content:$.jsx(d,{})}),$.jsx($E,{yAxisId:"right",type:"monotone",dataKey:"elevation",name:"Elevation",stroke:"rgba(30,120,255,1)",strokeWidth:3,fill:"url(#elevationGradient)",activeDot:{r:r.length<=10?10:6,strokeWidth:2}}),$.jsx($E,{yAxisId:"left",type:"monotone",dataKey:"battery",name:"Battery",stroke:"rgba(40,180,99,1)",strokeWidth:3,fill:"url(#batteryGradient)",activeDot:{r:r.length<=10?10:6,strokeWidth:2}}),$.jsx(yB,{verticalAlign:"top",height:36,iconType:"circle",iconSize:10})]})})})]})}const Bpe=({powerBreakdown:e})=>{const t=(e==null?void 0:e.map(r=>({segment:r.range,aerodynamicDrag:r.aero,rollingResistance:r.rolling,elevationClimbing:r.climb})))||[];return $.jsxs("div",{className:"w-full max-w-4xl mx-auto p-8 bg-white rounded-lg border",children:[$.jsxs("div",{className:"mb-6",children:[$.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Power Consumption Breakdown"}),$.jsx("p",{className:"text-gray-600",children:"Energy loss by source across route segments."})]}),$.jsx("div",{className:"w-full h-96",children:$.jsx(sB,{width:"100%",height:"100%",children:$.jsxs(jpe,{data:t,margin:{top:20,right:30,left:0,bottom:20},children:[$.jsx(JT,{strokeDasharray:"0",vertical:!1,stroke:"#f0f0f0"}),$.jsx(eM,{dataKey:"segment",axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:14}}),$.jsx(rw,{axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:14}}),$.jsx($x,{dataKey:"aerodynamicDrag",stackId:"a",fill:"#d946ef",radius:[0,0,0,0],barSize:60}),$.jsx($x,{dataKey:"rollingResistance",stackId:"a",fill:"#3b82f6",radius:[0,0,0,0]}),$.jsx($x,{dataKey:"elevationClimbing",stackId:"a",fill:"#22c55e",radius:[100,100,0,0]})]})})})]})};function Vpe(e){return kw({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}function $pe({analysisData:e}){const t=[{id:1,title:"Total Distance",value:e==null?void 0:e.total_distance_mi,unit:"mi",extraInfo:"Route Optimized for efficiency",icon:lN},{id:2,title:"Energy Consumed",value:e==null?void 0:e.energy_kwh,unit:"kWh",extraInfo:`Avg. ${(e==null?void 0:e.avg_consumption_wh_per_km)+" per km"}`,icon:iN},{id:3,title:"Trip Duration",value:(e==null?void 0:e.trip_duration_min)+" min",extraInfo:`Includes ${e==null?void 0:e.charging_stop_count} charging stops`,icon:d_},{id:4,title:"Arrival SoC",value:(e==null?void 0:e.arrival_soc)+"%",extraInfo:"Started at "+(e==null?void 0:e.start_soc)+"%",icon:oN}],[r,n]=A.useState(!1),[l,h]=A.useState("Export File"),d=["Export PDF ","Export CSV"],o=_=>{h(_),n(!1)};return $.jsxs("div",{children:[$.jsxs("div",{className:"flex items-center justify-between",children:[$.jsxs("div",{className:"",children:[$.jsx("h1",{className:"text-[#212B36] font-roboto text-[32px] font-semibold leading-[38.4px]",children:"Route Analysis Results"}),$.jsx("p",{className:"paragraph mt-2",children:"Valladolid, Spain To Madrid, Spain"})]}),$.jsxs("div",{className:"flex items-center gap-5",children:[$.jsxs("div",{className:"flex flex-col w-44 text-sm relative",children:[$.jsxs("button",{type:"button",onClick:()=>n(!r),className:"w-full text-left px-4 pr-2 py-2.5 rounded-lg border border-[#2FA75F] text-[#2FA75F] text-lg flex items-center justify-between cursor-pointer",children:[$.jsx("span",{children:l}),$.jsx(Vpe,{className:`w-5 h-5 inline float-right transition-transform duration-200 ${r?"rotate-0":"-rotate-90"}`})]}),r&&$.jsx("ul",{className:"absolute top-full left-0 w-full bg-white border border-gray-300 rounded shadow-md mt-1 py-2 z-50",children:d.map(_=>$.jsx("li",{className:"px-4 py-2 hover:bg-[#2FA75F] hover:text-white cursor-pointer",onClick:()=>o(_),children:_},_))})]}),$.jsx(wy,{to:"/result",children:"Save & Close"})]})]}),$.jsx("div",{className:"grid lg:grid-cols-4 gap-6",children:t.map(_=>$.jsxs("div",{className:"bg-white p-6 rounded-2xl border mt-8 space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-2 justify-between ",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title text-[#4F586D]! ",children:_.title}),$.jsxs("p",{className:"paragraph mt-4 text-lg font-medium",children:[$.jsx("span",{className:"text-[32px] text-black",children:_.value})," ",_.unit]})]}),$.jsx("div",{className:"bg-gray-200 p-2 rounded-full flex items-center justify-center",children:$.jsx(_.icon,{size:24})})]}),$.jsxs("p",{className:"paragraph mt-2 flex items-center gap-2",children:[$.jsx("span",{className:"text-[#20A157]",children:$.jsx(uN,{})})," ",_.extraInfo]})]},_.id))})]})}function qj({className:e,...t}){return $.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:$.jsx("table",{"data-slot":"table",className:vh("w-full caption-bottom text-sm",e),...t})})}function Gj({className:e,...t}){return $.jsx("tbody",{"data-slot":"table-body",className:vh("[&_tr:last-child]:border-0",e),...t})}function fc({className:e,...t}){return $.jsx("tr",{"data-slot":"table-row",className:vh("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function la({className:e,...t}){return $.jsx("td",{"data-slot":"table-cell",className:vh("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Upe({vehicle_summary:e,route_summary:t}){return $.jsxs("div",{className:"rounded-2xl  p-6 bg-white border",children:[$.jsxs("div",{className:"mb-6",children:[$.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Route Summary"}),$.jsx("p",{className:"text-base text-gray-600",children:"Energy loss by source across route segments."})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"title2 mb-4",children:"Vehicle Information"}),$.jsx("div",{className:"border rounded-lg ",children:$.jsx(qj,{children:$.jsxs(Gj,{children:[$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Model"}),$.jsx(la,{className:"text-right paragraph",children:e==null?void 0:e.model})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Type"}),$.jsx(la,{className:"text-right paragraph capitalize",children:e==null?void 0:e.type})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Battery Capacity"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.battery_kwh," kWh"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Power"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.power_kw," kW"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Weight"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.weight_kg," kg"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Efficiency"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.efficiency_percent,"%"]})]})]})})})]}),$.jsxs("div",{children:[$.jsx("h2",{className:"title2 mb-4",children:"Route Information"}),$.jsx("div",{className:"border rounded-md",children:$.jsx(qj,{children:$.jsxs(Gj,{children:[$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Origin"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.origin})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Destination"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.destination})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Total Distance"}),$.jsxs(la,{className:"text-right paragraph",children:[t==null?void 0:t.total_distance_km," km"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Avg. Consumption"}),$.jsxs(la,{className:"text-right paragraph",children:[t==null?void 0:t.avg_consumption_kwh_100km," kWh/100km"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Charging Stops"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.charging_stop_count})]})]})})})]})]}),$.jsxs("div",{className:"border p-4 rounded-2xl",children:[$.jsx("h2",{className:"title mb-3",children:"Weather & Wind Impact"}),$.jsx("p",{className:"paragraph",children:"Current conditions are optimal. No significant headwind or temperature effects on battery performance. Energy consumption estimates are based on standard conditions (20C, 0 m/s wind)."})]})]})}function qpe(){const e=tl().state;return $.jsxs("div",{className:"p-10",children:[$.jsx($pe,{analysisData:e==null?void 0:e.summary_cards}),$.jsxs("div",{className:"grid grid-cols-2 mt-6 gap-6",children:[$.jsx(Fpe,{elevationData:e==null?void 0:e.soc_profile_graph}),$.jsx(Upe,{vehicle_summary:e==null?void 0:e.vehicle_summary,route_summary:e==null?void 0:e.route_summary})]}),$.jsxs("div",{className:"grid grid-cols-2 mt-6 gap-6",children:[$.jsx(NY,{ChargingStops:e==null?void 0:e.charging_stops}),$.jsx(Bpe,{powerBreakdown:e==null?void 0:e.power_breakdown_chart})]})]})}const Gpe="/assets/auth-bg-DATug2Bs.png";function Wpe(){return Mw(t=>{var r;return(r=t==null?void 0:t.userToken)==null?void 0:r.tokens})?$.jsx(eC,{to:"/"}):$.jsxs("main",{className:"w-full h-screen flex items-center gap-5 p-[0.5%]",children:[$.jsx("div",{className:"w-5/12 h-full",children:$.jsx("img",{src:Gpe,alt:"Authentication Background Image",className:"w-full max-w-full h-full object-cover"})}),$.jsx("div",{className:"w-7/12 flex items-center pl-[8%]",children:$.jsx(Ez,{})})]})}const H6=()=>{const t=ha.create({baseURL:"https://electric-vehicle-route-energy-calculation.onrender.com/api/v1",timeout:3e4});return t.interceptors.response.use(r=>r,r=>{let n;return r.response?(r.response.status===500&&(n="Internal server error, try again",ki.error(n)),console.error("API Error:",r)):r.request&&(n="Network issue, try again.",ki.error(n),console.error("Network Error:",r==null?void 0:r.message)),Promise.reject(r)}),t};function Hpe({onSuccess:e,onError:t}){const r=H6();return ig({mutationKey:["userLogin"],mutationFn:async n=>{const l=await r.post("/login/",n);return l==null?void 0:l.data},onSuccess:n=>{e&&e(n)},onError:n=>{t&&t(n)}})}function Zpe(){const e=bC(),t=Sp(),{register:r,handleSubmit:n,formState:{errors:l}}=U_(),{mutate:h,isPending:d}=Hpe({onSuccess:_=>{e(tb(_==null?void 0:_.data)),pu.success((_==null?void 0:_.message)||"Login Successful!"),setTimeout(()=>{t("/")},500)},onError:_=>{var S,P;pu.error(((P=(S=_==null?void 0:_.response)==null?void 0:S.data)==null?void 0:P.message)||"Something went wrong!"),console.log(_)}}),o=_=>{h(_)};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"Login to your account"}),$.jsxs("p",{className:"text-[#637381] text-lg mt-4",children:["Dontt have an account?"," ",$.jsx(wc,{to:"/auth/register",className:"text-primary",children:"Sign up"})]})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:n(o),children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Email Address*"}),$.jsx("input",{type:"email",placeholder:"Email",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-primary ${l.email?"border-red-500":"border-[#D5DAE1]"}`,...r("email",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Password*"}),$.jsx("input",{type:"password",placeholder:"Password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${l.password?"border-red-500":"border-[#D5DAE1]"}`,...r("password",{required:!0})})]}),$.jsx("div",{className:"w-full flex justify-end mt-5",children:$.jsx(wc,{to:"#",className:"text-primary text-lg font-medium font-roboto",children:"Forget Password?"})}),$.jsx("div",{children:$.jsx("button",{type:"submit",className:"w-full px-5 py-3 bg-primary rounded-xl text-white text-xl font-medium font-roboto mt-6 cursor-pointer hover:bg-primary/90 transition-all",children:"Login"})})]})}),d&&$.jsx(gp,{})]})}function Kpe({onSuccess:e,onError:t}){const r=H6();return ig({mutationKey:["registerUser"],mutationFn:async n=>{const l=await r.post("/signup/",n);return l==null?void 0:l.data},onSuccess:n=>{e&&e(n)},onError:n=>{t&&t(n)}})}function Xpe(){const e=Sp(),{register:t,handleSubmit:r,watch:n,formState:{errors:l}}=U_(),h=n("terms"),{mutate:d,isPending:o}=Kpe({onSuccess:S=>{pu.success("Registration successful!"),setTimeout(()=>{e("/auth/login")},1e3)},onError:S=>{var P,M;pu.error(((M=(P=S==null?void 0:S.response)==null?void 0:P.data)==null?void 0:M.message)||"Something went wrong!!!"),console.log(S)}}),_=S=>{const P={email:S==null?void 0:S.email,password:S==null?void 0:S.password,confirm_password:S==null?void 0:S.passwordConfirm};d(P)};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"Create an account"}),$.jsxs("p",{className:"text-[#637381] text-lg mt-4",children:["Already have an account?"," ",$.jsx(wc,{to:"/auth/login",className:"text-primary",children:"Log in"})]})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:r(_),children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Email Address*"}),$.jsx("input",{type:"email",placeholder:"Email",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-primary ${l.email?"border-red-500":"border-[#D5DAE1]"}`,...t("email",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Password*"}),$.jsx("input",{type:"password",placeholder:"Password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${l!=null&&l.password?"border-red-500":"border-[#D5DAE1]"}`,...t("password",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Confirm Password*"}),$.jsx("input",{type:"password",placeholder:"Confirm password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${l!=null&&l.passwordConfirm?"border-red-500":"border-[#D5DAE1]"}`,...t("passwordConfirm",{required:!0})})]}),$.jsxs("label",{className:"w-full mt-5 flex items-center gap-3 cursor-pointer",children:[$.jsx("input",{type:"checkbox",className:"w-5 h-5",...t("terms",{required:!0})}),$.jsxs("span",{className:"text-[#637381] text-lg font-roboto",children:["I agree to the"," ",$.jsx(wc,{to:"/",className:"text-primary",onClick:S=>S.stopPropagation(),children:"Terms & Conditions"})]})]}),$.jsx("div",{children:$.jsx("button",{type:"submit",disabled:!h,className:`w-full px-5 py-3 bg-primary rounded-xl text-white text-xl font-medium font-roboto mt-6 cursor-pointer transition-all ${h?"hover:bg-primary/90":"opacity-50 cursor-pointer"}`,children:"Create Account"})})]})}),o&&$.jsx(gp,{})]})}function Ype(){const e=Sp(),[t,r]=A.useState(["","","","","",""]),n=A.useRef([]),l=(_,S)=>{var M;if(S.length>1)return;const P=[...t];P[_]=S,r(P),S&&_<5&&((M=n.current[_+1])==null||M.focus())},h=(_,S)=>{var P;S.key==="Backspace"&&!t[_]&&_>0&&((P=n.current[_-1])==null||P.focus())},d=t.every(_=>_!==""),o=_=>{if(_.preventDefault(),d){const S=t.join("");console.log("OTP:",S),pu.success("OTP Verification Successful!"),setTimeout(()=>{e("/auth/register-success")},500)}};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"OTP Verification"}),$.jsx("p",{className:"text-[#637381] text-lg mt-4",children:"We sent a 6 digit verification code to your email ra*********t2025@gmail.com"})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:o,children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Enter 6 digit code"}),$.jsx("div",{className:"flex gap-3 mt-2",children:t==null?void 0:t.map((_,S)=>$.jsx("input",{type:"text",inputMode:"numeric",maxLength:1,value:_,onChange:P=>l(S,P.target.value),onKeyDown:P=>h(S,P),ref:P=>n.current[S]=P,className:`w-14 h-14 text-center text-2xl border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${_?"border-green-500":"border-[#D5DAE1]"}`},S))})]}),$.jsxs("p",{className:"text-[#637381] text-base my-10",children:["Didn't receive the code?"," ",$.jsx(wc,{to:"#",className:"text-primary",children:"Resend Code"})]}),$.jsxs("div",{className:"w-full flex items-center gap-8 mt-6",children:[$.jsx(wc,{to:-1,className:"w-full px-5 py-3 bg-white rounded-xl text-primary border border-primary text-xl font-medium font-roboto cursor-pointer inline-block text-center hover:opacity-65 transition-all",children:"Back"}),$.jsx("button",{type:"submit",disabled:!d,className:`w-full px-5 py-3 rounded-xl text-white text-xl font-medium font-roboto cursor-pointer transition-all ${d?"bg-primary hover:bg-primary/90":"bg-primary/50 opacity-50 cursor-not-allowed"}`,children:"Submit"})]})]})})]})}const Qpe="/assets/success-frame-DruIkaLO.png";function Jpe(){return $.jsx("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:$.jsxs("div",{className:"space-y-10 text-center",children:[$.jsx("div",{children:$.jsx("img",{src:Qpe,alt:"",className:"w-full max-w-full object-contain"})}),$.jsx("h1",{className:"text-[#212B36] text-2xl font-semibold font-roboto",children:"Successfully Create an your account"}),$.jsx(wc,{to:"/auth/login",className:"w-full px-5 py-3 rounded-xl text-white text-xl font-medium font-roboto bg-primary inline-block text-center cursor-pointer transition-all",children:"Go to login"})]})})}const eme=f8([{path:"*",element:$.jsx(u7,{})},{path:"/auth",element:$.jsx(Wpe,{}),children:[{index:!0,element:$.jsx(eC,{to:"login"})},{path:"login",element:$.jsx(Zpe,{})},{path:"register",element:$.jsx(Xpe,{})},{path:"otp-verify",element:$.jsx(Ype,{})},{path:"register-success",element:$.jsx(Jpe,{})}]},{path:"/",element:$.jsx(e7,{}),children:[{index:!0,element:$.jsx(h7,{})},{path:"vechile",element:$.jsx(LH,{})},{path:"route",element:$.jsx(CY,{})},{path:"result",element:$.jsx(jY,{})},{path:"route-analysis-results",element:$.jsx(qpe,{})}]}]);var tme=function(){return null};const rme=s3({reducer:{userData:_3.reducer,userToken:x3.reducer}}),nme=new Q8,Wj=sessionStorage.redirect;Wj&&(sessionStorage.removeItem("redirect"),window.history.replaceState(null,null,Wj));o$.createRoot(document.getElementById("root")).render($.jsx(A.StrictMode,{children:$.jsx(J8,{client:nme,children:$.jsxs(Q3,{store:rme,children:[$.jsx(OW,{position:"top-center",reverseOrder:!1}),$.jsx(P8,{router:eme}),$.jsx(tme,{initialIsOpen:!1})]})})}));
