var ZV=Object.defineProperty;var Sk=e=>{throw TypeError(e)};var KV=(e,t,r)=>t in e?ZV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $r=(e,t,r)=>KV(e,typeof t!="symbol"?t+"":t,r),nS=(e,t,r)=>t.has(e)||Sk("Cannot "+r);var Ue=(e,t,r)=>(nS(e,t,"read from private field"),r?r.call(e):t.get(e)),Dr=(e,t,r)=>t.has(e)?Sk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),fr=(e,t,r,n)=>(nS(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),an=(e,t,r)=>(nS(e,t,"access private method"),r);var X0=(e,t,r,n)=>({set _(u){fr(e,t,u,r)},get _(){return Ue(e,t,n)}});function XV(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const u in n)if(u!=="default"&&!(u in e)){const h=Object.getOwnPropertyDescriptor(n,u);h&&Object.defineProperty(e,u,h.get?h:{enumerable:!0,get:()=>n[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(u){if(u.ep)return;u.ep=!0;const h=r(u);fetch(u.href,h)}})();function Sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iS={exports:{}},Iv={},aS={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function YV(){if(Pk)return pn;Pk=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),M=Symbol.iterator;function O(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=M&&Oe[M]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function D(Oe,et,Mt){this.props=Oe,this.context=et,this.refs=B,this.updater=Mt||z}D.prototype.isReactComponent={},D.prototype.setState=function(Oe,et){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,et,"setState")},D.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function H(){}H.prototype=D.prototype;function Q(Oe,et,Mt){this.props=Oe,this.context=et,this.refs=B,this.updater=Mt||z}var te=Q.prototype=new H;te.constructor=Q,F(te,D.prototype),te.isPureReactComponent=!0;var ie=Array.isArray,ae=Object.prototype.hasOwnProperty,he={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function be(Oe,et,Mt){var Dt,Ke={},tr=null,Ft=null;if(et!=null)for(Dt in et.ref!==void 0&&(Ft=et.ref),et.key!==void 0&&(tr=""+et.key),et)ae.call(et,Dt)&&!re.hasOwnProperty(Dt)&&(Ke[Dt]=et[Dt]);var $t=arguments.length-2;if($t===1)Ke.children=Mt;else if(1<$t){for(var ct=Array($t),Lt=0;Lt<$t;Lt++)ct[Lt]=arguments[Lt+2];Ke.children=ct}if(Oe&&Oe.defaultProps)for(Dt in $t=Oe.defaultProps,$t)Ke[Dt]===void 0&&(Ke[Dt]=$t[Dt]);return{$$typeof:e,type:Oe,key:tr,ref:Ft,props:Ke,_owner:he.current}}function xe(Oe,et){return{$$typeof:e,type:Oe.type,key:et,ref:Oe.ref,props:Oe.props,_owner:Oe._owner}}function $e(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===e}function Ee(Oe){var et={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(Mt){return et[Mt]})}var Ne=/\/+/g;function Xe(Oe,et){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?Ee(""+Oe.key):et.toString(36)}function ut(Oe,et,Mt,Dt,Ke){var tr=typeof Oe;(tr==="undefined"||tr==="boolean")&&(Oe=null);var Ft=!1;if(Oe===null)Ft=!0;else switch(tr){case"string":case"number":Ft=!0;break;case"object":switch(Oe.$$typeof){case e:case t:Ft=!0}}if(Ft)return Ft=Oe,Ke=Ke(Ft),Oe=Dt===""?"."+Xe(Ft,0):Dt,ie(Ke)?(Mt="",Oe!=null&&(Mt=Oe.replace(Ne,"$&/")+"/"),ut(Ke,et,Mt,"",function(Lt){return Lt})):Ke!=null&&($e(Ke)&&(Ke=xe(Ke,Mt+(!Ke.key||Ft&&Ft.key===Ke.key?"":(""+Ke.key).replace(Ne,"$&/")+"/")+Oe)),et.push(Ke)),1;if(Ft=0,Dt=Dt===""?".":Dt+":",ie(Oe))for(var $t=0;$t<Oe.length;$t++){tr=Oe[$t];var ct=Dt+Xe(tr,$t);Ft+=ut(tr,et,Mt,ct,Ke)}else if(ct=O(Oe),typeof ct=="function")for(Oe=ct.call(Oe),$t=0;!(tr=Oe.next()).done;)tr=tr.value,ct=Dt+Xe(tr,$t++),Ft+=ut(tr,et,Mt,ct,Ke);else if(tr==="object")throw et=String(Oe),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return Ft}function pt(Oe,et,Mt){if(Oe==null)return Oe;var Dt=[],Ke=0;return ut(Oe,Dt,"","",function(tr){return et.call(Mt,tr,Ke++)}),Dt}function gt(Oe){if(Oe._status===-1){var et=Oe._result;et=et(),et.then(function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=Mt)},function(Mt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=Mt)}),Oe._status===-1&&(Oe._status=0,Oe._result=et)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var wt={current:null},je={transition:null},Qe={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:je,ReactCurrentOwner:he};function yt(){throw Error("act(...) is not supported in production builds of React.")}return pn.Children={map:pt,forEach:function(Oe,et,Mt){pt(Oe,function(){et.apply(this,arguments)},Mt)},count:function(Oe){var et=0;return pt(Oe,function(){et++}),et},toArray:function(Oe){return pt(Oe,function(et){return et})||[]},only:function(Oe){if(!$e(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}},pn.Component=D,pn.Fragment=r,pn.Profiler=u,pn.PureComponent=Q,pn.StrictMode=n,pn.Suspense=_,pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qe,pn.act=yt,pn.cloneElement=function(Oe,et,Mt){if(Oe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Oe+".");var Dt=F({},Oe.props),Ke=Oe.key,tr=Oe.ref,Ft=Oe._owner;if(et!=null){if(et.ref!==void 0&&(tr=et.ref,Ft=he.current),et.key!==void 0&&(Ke=""+et.key),Oe.type&&Oe.type.defaultProps)var $t=Oe.type.defaultProps;for(ct in et)ae.call(et,ct)&&!re.hasOwnProperty(ct)&&(Dt[ct]=et[ct]===void 0&&$t!==void 0?$t[ct]:et[ct])}var ct=arguments.length-2;if(ct===1)Dt.children=Mt;else if(1<ct){$t=Array(ct);for(var Lt=0;Lt<ct;Lt++)$t[Lt]=arguments[Lt+2];Dt.children=$t}return{$$typeof:e,type:Oe.type,key:Ke,ref:tr,props:Dt,_owner:Ft}},pn.createContext=function(Oe){return Oe={$$typeof:d,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Oe.Provider={$$typeof:h,_context:Oe},Oe.Consumer=Oe},pn.createElement=be,pn.createFactory=function(Oe){var et=be.bind(null,Oe);return et.type=Oe,et},pn.createRef=function(){return{current:null}},pn.forwardRef=function(Oe){return{$$typeof:o,render:Oe}},pn.isValidElement=$e,pn.lazy=function(Oe){return{$$typeof:S,_payload:{_status:-1,_result:Oe},_init:gt}},pn.memo=function(Oe,et){return{$$typeof:P,type:Oe,compare:et===void 0?null:et}},pn.startTransition=function(Oe){var et=je.transition;je.transition={};try{Oe()}finally{je.transition=et}},pn.unstable_act=yt,pn.useCallback=function(Oe,et){return wt.current.useCallback(Oe,et)},pn.useContext=function(Oe){return wt.current.useContext(Oe)},pn.useDebugValue=function(){},pn.useDeferredValue=function(Oe){return wt.current.useDeferredValue(Oe)},pn.useEffect=function(Oe,et){return wt.current.useEffect(Oe,et)},pn.useId=function(){return wt.current.useId()},pn.useImperativeHandle=function(Oe,et,Mt){return wt.current.useImperativeHandle(Oe,et,Mt)},pn.useInsertionEffect=function(Oe,et){return wt.current.useInsertionEffect(Oe,et)},pn.useLayoutEffect=function(Oe,et){return wt.current.useLayoutEffect(Oe,et)},pn.useMemo=function(Oe,et){return wt.current.useMemo(Oe,et)},pn.useReducer=function(Oe,et,Mt){return wt.current.useReducer(Oe,et,Mt)},pn.useRef=function(Oe){return wt.current.useRef(Oe)},pn.useState=function(Oe){return wt.current.useState(Oe)},pn.useSyncExternalStore=function(Oe,et,Mt){return wt.current.useSyncExternalStore(Oe,et,Mt)},pn.useTransition=function(){return wt.current.useTransition()},pn.version="18.3.1",pn}var Ek;function Dy(){return Ek||(Ek=1,aS.exports=YV()),aS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function QV(){if(Ck)return Iv;Ck=1;var e=Dy(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,u=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function d(o,_,P){var S,M={},O=null,z=null;P!==void 0&&(O=""+P),_.key!==void 0&&(O=""+_.key),_.ref!==void 0&&(z=_.ref);for(S in _)n.call(_,S)&&!h.hasOwnProperty(S)&&(M[S]=_[S]);if(o&&o.defaultProps)for(S in _=o.defaultProps,_)M[S]===void 0&&(M[S]=_[S]);return{$$typeof:t,type:o,key:O,ref:z,props:M,_owner:u.current}}return Iv.Fragment=r,Iv.jsx=d,Iv.jsxs=d,Iv}var Tk;function JV(){return Tk||(Tk=1,iS.exports=QV()),iS.exports}var $=JV(),A=Dy();const Jn=Sh(A),GE=XV({__proto__:null,default:Jn},[A]);var Y0={},oS={exports:{}},Ws={},sS={exports:{}},lS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function e$(){return Mk||(Mk=1,(function(e){function t(je,Qe){var yt=je.length;je.push(Qe);e:for(;0<yt;){var Oe=yt-1>>>1,et=je[Oe];if(0<u(et,Qe))je[Oe]=Qe,je[yt]=et,yt=Oe;else break e}}function r(je){return je.length===0?null:je[0]}function n(je){if(je.length===0)return null;var Qe=je[0],yt=je.pop();if(yt!==Qe){je[0]=yt;e:for(var Oe=0,et=je.length,Mt=et>>>1;Oe<Mt;){var Dt=2*(Oe+1)-1,Ke=je[Dt],tr=Dt+1,Ft=je[tr];if(0>u(Ke,yt))tr<et&&0>u(Ft,Ke)?(je[Oe]=Ft,je[tr]=yt,Oe=tr):(je[Oe]=Ke,je[Dt]=yt,Oe=Dt);else if(tr<et&&0>u(Ft,yt))je[Oe]=Ft,je[tr]=yt,Oe=tr;else break e}}return Qe}function u(je,Qe){var yt=je.sortIndex-Qe.sortIndex;return yt!==0?yt:je.id-Qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,o=d.now();e.unstable_now=function(){return d.now()-o}}var _=[],P=[],S=1,M=null,O=3,z=!1,F=!1,B=!1,D=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(je){for(var Qe=r(P);Qe!==null;){if(Qe.callback===null)n(P);else if(Qe.startTime<=je)n(P),Qe.sortIndex=Qe.expirationTime,t(_,Qe);else break;Qe=r(P)}}function ie(je){if(B=!1,te(je),!F)if(r(_)!==null)F=!0,gt(ae);else{var Qe=r(P);Qe!==null&&wt(ie,Qe.startTime-je)}}function ae(je,Qe){F=!1,B&&(B=!1,H(be),be=-1),z=!0;var yt=O;try{for(te(Qe),M=r(_);M!==null&&(!(M.expirationTime>Qe)||je&&!Ee());){var Oe=M.callback;if(typeof Oe=="function"){M.callback=null,O=M.priorityLevel;var et=Oe(M.expirationTime<=Qe);Qe=e.unstable_now(),typeof et=="function"?M.callback=et:M===r(_)&&n(_),te(Qe)}else n(_);M=r(_)}if(M!==null)var Mt=!0;else{var Dt=r(P);Dt!==null&&wt(ie,Dt.startTime-Qe),Mt=!1}return Mt}finally{M=null,O=yt,z=!1}}var he=!1,re=null,be=-1,xe=5,$e=-1;function Ee(){return!(e.unstable_now()-$e<xe)}function Ne(){if(re!==null){var je=e.unstable_now();$e=je;var Qe=!0;try{Qe=re(!0,je)}finally{Qe?Xe():(he=!1,re=null)}}else he=!1}var Xe;if(typeof Q=="function")Xe=function(){Q(Ne)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,pt=ut.port2;ut.port1.onmessage=Ne,Xe=function(){pt.postMessage(null)}}else Xe=function(){D(Ne,0)};function gt(je){re=je,he||(he=!0,Xe())}function wt(je,Qe){be=D(function(){je(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(je){je.callback=null},e.unstable_continueExecution=function(){F||z||(F=!0,gt(ae))},e.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<je?Math.floor(1e3/je):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(je){switch(O){case 1:case 2:case 3:var Qe=3;break;default:Qe=O}var yt=O;O=Qe;try{return je()}finally{O=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(je,Qe){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var yt=O;O=je;try{return Qe()}finally{O=yt}},e.unstable_scheduleCallback=function(je,Qe,yt){var Oe=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Oe+yt:Oe):yt=Oe,je){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=yt+et,je={id:S++,callback:Qe,priorityLevel:je,startTime:yt,expirationTime:et,sortIndex:-1},yt>Oe?(je.sortIndex=yt,t(P,je),r(_)===null&&je===r(P)&&(B?(H(be),be=-1):B=!0,wt(ie,yt-Oe))):(je.sortIndex=et,t(_,je),F||z||(F=!0,gt(ae))),je},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(je){var Qe=O;return function(){var yt=O;O=Qe;try{return je.apply(this,arguments)}finally{O=yt}}}})(lS)),lS}var kk;function t$(){return kk||(kk=1,sS.exports=e$()),sS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function r$(){if(Ak)return Ws;Ak=1;var e=Dy(),t=t$();function r(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,T=1;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,u={};function h(p,y){d(p,y),d(p+"Capture",y)}function d(p,y){for(u[p]=y,p=0;p<y.length;p++)n.add(y[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},M={};function O(p){return _.call(M,p)?!0:_.call(S,p)?!1:P.test(p)?M[p]=!0:(S[p]=!0,!1)}function z(p,y,T,R){if(T!==null&&T.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return R?!1:T!==null?!T.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function F(p,y,T,R){if(y===null||typeof y>"u"||z(p,y,T,R))return!0;if(R)return!1;if(T!==null)switch(T.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function B(p,y,T,R,q,K,de){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=R,this.attributeNamespace=q,this.mustUseProperty=T,this.propertyName=p,this.type=y,this.sanitizeURL=K,this.removeEmptyString=de}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){D[p]=new B(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var y=p[0];D[y]=new B(y,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){D[p]=new B(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){D[p]=new B(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){D[p]=new B(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){D[p]=new B(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){D[p]=new B(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){D[p]=new B(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){D[p]=new B(p,5,!1,p.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function Q(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var y=p.replace(H,Q);D[y]=new B(y,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var y=p.replace(H,Q);D[y]=new B(y,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var y=p.replace(H,Q);D[y]=new B(y,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){D[p]=new B(p,1,!1,p.toLowerCase(),null,!1,!1)}),D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){D[p]=new B(p,1,!1,p.toLowerCase(),null,!0,!0)});function te(p,y,T,R){var q=D.hasOwnProperty(y)?D[y]:null;(q!==null?q.type!==0:R||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(F(y,T,q,R)&&(T=null),R||q===null?O(y)&&(T===null?p.removeAttribute(y):p.setAttribute(y,""+T)):q.mustUseProperty?p[q.propertyName]=T===null?q.type===3?!1:"":T:(y=q.attributeName,R=q.attributeNamespace,T===null?p.removeAttribute(y):(q=q.type,T=q===3||q===4&&T===!0?"":""+T,R?p.setAttributeNS(R,y,T):p.setAttribute(y,T))))}var ie=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),he=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),be=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),$e=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Xe=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),wt=Symbol.for("react.offscreen"),je=Symbol.iterator;function Qe(p){return p===null||typeof p!="object"?null:(p=je&&p[je]||p["@@iterator"],typeof p=="function"?p:null)}var yt=Object.assign,Oe;function et(p){if(Oe===void 0)try{throw Error()}catch(T){var y=T.stack.trim().match(/\n( *(at )?)/);Oe=y&&y[1]||""}return`
`+Oe+p}var Mt=!1;function Dt(p,y){if(!p||Mt)return"";Mt=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(vt){var R=vt}Reflect.construct(p,[],y)}else{try{y.call()}catch(vt){R=vt}p.call(y.prototype)}else{try{throw Error()}catch(vt){R=vt}p()}}catch(vt){if(vt&&R&&typeof vt.stack=="string"){for(var q=vt.stack.split(`
`),K=R.stack.split(`
`),de=q.length-1,De=K.length-1;1<=de&&0<=De&&q[de]!==K[De];)De--;for(;1<=de&&0<=De;de--,De--)if(q[de]!==K[De]){if(de!==1||De!==1)do if(de--,De--,0>De||q[de]!==K[De]){var qe=`
`+q[de].replace(" at new "," at ");return p.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",p.displayName)),qe}while(1<=de&&0<=De);break}}}finally{Mt=!1,Error.prepareStackTrace=T}return(p=p?p.displayName||p.name:"")?et(p):""}function Ke(p){switch(p.tag){case 5:return et(p.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return p=Dt(p.type,!1),p;case 11:return p=Dt(p.type.render,!1),p;case 1:return p=Dt(p.type,!0),p;default:return""}}function tr(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case re:return"Fragment";case he:return"Portal";case xe:return"Profiler";case be:return"StrictMode";case Xe:return"Suspense";case ut:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Ee:return(p.displayName||"Context")+".Consumer";case $e:return(p._context.displayName||"Context")+".Provider";case Ne:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case pt:return y=p.displayName||null,y!==null?y:tr(p.type)||"Memo";case gt:y=p._payload,p=p._init;try{return tr(p(y))}catch{}}return null}function Ft(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tr(y);case 8:return y===be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function $t(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function ct(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Lt(p){var y=ct(p)?"checked":"value",T=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),R=""+p[y];if(!p.hasOwnProperty(y)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var q=T.get,K=T.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return q.call(this)},set:function(de){R=""+de,K.call(this,de)}}),Object.defineProperty(p,y,{enumerable:T.enumerable}),{getValue:function(){return R},setValue:function(de){R=""+de},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function ir(p){p._valueTracker||(p._valueTracker=Lt(p))}function St(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var T=y.getValue(),R="";return p&&(R=ct(p)?p.checked?"true":"false":p.value),p=R,p!==T?(y.setValue(p),!0):!1}function Gr(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Tr(p,y){var T=y.checked;return yt({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:T??p._wrapperState.initialChecked})}function wr(p,y){var T=y.defaultValue==null?"":y.defaultValue,R=y.checked!=null?y.checked:y.defaultChecked;T=$t(y.value!=null?y.value:T),p._wrapperState={initialChecked:R,initialValue:T,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function tn(p,y){y=y.checked,y!=null&&te(p,"checked",y,!1)}function Wr(p,y){tn(p,y);var T=$t(y.value),R=y.type;if(T!=null)R==="number"?(T===0&&p.value===""||p.value!=T)&&(p.value=""+T):p.value!==""+T&&(p.value=""+T);else if(R==="submit"||R==="reset"){p.removeAttribute("value");return}y.hasOwnProperty("value")?Ii(p,y.type,T):y.hasOwnProperty("defaultValue")&&Ii(p,y.type,$t(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(p.defaultChecked=!!y.defaultChecked)}function Xi(p,y,T){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var R=y.type;if(!(R!=="submit"&&R!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+p._wrapperState.initialValue,T||y===p.value||(p.value=y),p.defaultValue=y}T=p.name,T!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,T!==""&&(p.name=T)}function Ii(p,y,T){(y!=="number"||Gr(p.ownerDocument)!==p)&&(T==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+T&&(p.defaultValue=""+T))}var Be=Array.isArray;function rt(p,y,T,R){if(p=p.options,y){y={};for(var q=0;q<T.length;q++)y["$"+T[q]]=!0;for(T=0;T<p.length;T++)q=y.hasOwnProperty("$"+p[T].value),p[T].selected!==q&&(p[T].selected=q),q&&R&&(p[T].defaultSelected=!0)}else{for(T=""+$t(T),y=null,q=0;q<p.length;q++){if(p[q].value===T){p[q].selected=!0,R&&(p[q].defaultSelected=!0);return}y!==null||p[q].disabled||(y=p[q])}y!==null&&(y.selected=!0)}}function bt(p,y){if(y.dangerouslySetInnerHTML!=null)throw Error(r(91));return yt({},y,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function rr(p,y){var T=y.value;if(T==null){if(T=y.children,y=y.defaultValue,T!=null){if(y!=null)throw Error(r(92));if(Be(T)){if(1<T.length)throw Error(r(93));T=T[0]}y=T}y==null&&(y=""),T=y}p._wrapperState={initialValue:$t(T)}}function Wt(p,y){var T=$t(y.value),R=$t(y.defaultValue);T!=null&&(T=""+T,T!==p.value&&(p.value=T),y.defaultValue==null&&p.defaultValue!==T&&(p.defaultValue=T)),R!=null&&(p.defaultValue=""+R)}function zt(p){var y=p.textContent;y===p._wrapperState.initialValue&&y!==""&&y!==null&&(p.value=y)}function ze(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(p,y){return p==null||p==="http://www.w3.org/1999/xhtml"?ze(y):p==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var le,pe=(function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,T,R,q){MSApp.execUnsafeLocalFunction(function(){return p(y,T,R,q)})}:p})(function(p,y){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=y;else{for(le=le||document.createElement("div"),le.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=le.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;y.firstChild;)p.appendChild(y.firstChild)}});function Me(p,y){if(y){var T=p.firstChild;if(T&&T===p.lastChild&&T.nodeType===3){T.nodeValue=y;return}}p.textContent=y}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Je=["Webkit","ms","Moz","O"];Object.keys(Ae).forEach(function(p){Je.forEach(function(y){y=y+p.charAt(0).toUpperCase()+p.substring(1),Ae[y]=Ae[p]})});function Ze(p,y,T){return y==null||typeof y=="boolean"||y===""?"":T||typeof y!="number"||y===0||Ae.hasOwnProperty(p)&&Ae[p]?(""+y).trim():y+"px"}function Ve(p,y){p=p.style;for(var T in y)if(y.hasOwnProperty(T)){var R=T.indexOf("--")===0,q=Ze(T,y[T],R);T==="float"&&(T="cssFloat"),R?p.setProperty(T,q):p[T]=q}}var it=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function At(p,y){if(y){if(it[p]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(r(137,p));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(r(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(r(61))}if(y.style!=null&&typeof y.style!="object")throw Error(r(62))}}function Pt(p,y){if(p.indexOf("-")===-1)return typeof y.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function or(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Mr=null,Kr=null,Ur=null;function tt(p){if(p=os(p)){if(typeof Mr!="function")throw Error(r(280));var y=p.stateNode;y&&(y=Gh(y),Mr(p.stateNode,p.type,y))}}function sn(p){Kr?Ur?Ur.push(p):Ur=[p]:Kr=p}function ri(){if(Kr){var p=Kr,y=Ur;if(Ur=Kr=null,tt(p),y)for(p=0;p<y.length;p++)tt(y[p])}}function Ir(p,y){return p(y)}function Zr(){}var Vn=!1;function yn(p,y,T){if(Vn)return p(y,T);Vn=!0;try{return Ir(p,y,T)}finally{Vn=!1,(Kr!==null||Ur!==null)&&(Zr(),ri())}}function ln(p,y){var T=p.stateNode;if(T===null)return null;var R=Gh(T);if(R===null)return null;T=R[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(p=p.type,R=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!R;break e;default:p=!1}if(p)return null;if(T&&typeof T!="function")throw Error(r(231,y,typeof T));return T}var ur=!1;if(o)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){ur=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch{ur=!1}function Ye(p,y,T,R,q,K,de,De,qe){var vt=Array.prototype.slice.call(arguments,3);try{y.apply(T,vt)}catch(qt){this.onError(qt)}}var mt=!1,We=null,Gt=!1,cr=null,Sr={onError:function(p){mt=!0,We=p}};function hr(p,y,T,R,q,K,de,De,qe){mt=!1,We=null,Ye.apply(Sr,arguments)}function xt(p,y,T,R,q,K,de,De,qe){if(hr.apply(this,arguments),mt){if(mt){var vt=We;mt=!1,We=null}else throw Error(r(198));Gt||(Gt=!0,cr=vt)}}function Bt(p){var y=p,T=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(T=y.return),p=y.return;while(p)}return y.tag===3?T:null}function Zt(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function dr(p){if(Bt(p)!==p)throw Error(r(188))}function Fr(p){var y=p.alternate;if(!y){if(y=Bt(p),y===null)throw Error(r(188));return y!==p?null:p}for(var T=p,R=y;;){var q=T.return;if(q===null)break;var K=q.alternate;if(K===null){if(R=q.return,R!==null){T=R;continue}break}if(q.child===K.child){for(K=q.child;K;){if(K===T)return dr(q),p;if(K===R)return dr(q),y;K=K.sibling}throw Error(r(188))}if(T.return!==R.return)T=q,R=K;else{for(var de=!1,De=q.child;De;){if(De===T){de=!0,T=q,R=K;break}if(De===R){de=!0,R=q,T=K;break}De=De.sibling}if(!de){for(De=K.child;De;){if(De===T){de=!0,T=K,R=q;break}if(De===R){de=!0,R=K,T=q;break}De=De.sibling}if(!de)throw Error(r(189))}}if(T.alternate!==R)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?p:y}function Yr(p){return p=Fr(p),p!==null?mr(p):null}function mr(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=mr(p);if(y!==null)return y;p=p.sibling}return null}var ni=t.unstable_scheduleCallback,vn=t.unstable_cancelCallback,Tn=t.unstable_shouldYield,Ja=t.unstable_requestPaint,bn=t.unstable_now,La=t.unstable_getCurrentPriorityLevel,Yi=t.unstable_ImmediatePriority,Oi=t.unstable_UserBlockingPriority,Qr=t.unstable_NormalPriority,Io=t.unstable_LowPriority,Oo=t.unstable_IdlePriority,So=null,jr=null;function Rn(p){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(So,p,void 0,(p.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:jn,Da=Math.log,$n=Math.LN2;function jn(p){return p>>>=0,p===0?32:31-(Da(p)/$n|0)|0}var Ol=64,Pu=4194304;function rl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Ph(p,y){var T=p.pendingLanes;if(T===0)return 0;var R=0,q=p.suspendedLanes,K=p.pingedLanes,de=T&268435455;if(de!==0){var De=de&~q;De!==0?R=rl(De):(K&=de,K!==0&&(R=rl(K)))}else de=T&~q,de!==0?R=rl(de):K!==0&&(R=rl(K));if(R===0)return 0;if(y!==0&&y!==R&&(y&q)===0&&(q=R&-R,K=y&-y,q>=K||q===16&&(K&4194240)!==0))return y;if((R&4)!==0&&(R|=T&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=R;0<y;)T=31-$i(y),q=1<<T,R|=p[T],y&=~q;return R}function sg(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lg(p,y){for(var T=p.suspendedLanes,R=p.pingedLanes,q=p.expirationTimes,K=p.pendingLanes;0<K;){var de=31-$i(K),De=1<<de,qe=q[de];qe===-1?((De&T)===0||(De&R)!==0)&&(q[de]=sg(De,y)):qe<=y&&(p.expiredLanes|=De),K&=~De}}function Ac(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Gd(){var p=Ol;return Ol<<=1,(Ol&4194240)===0&&(Ol=64),p}function Eh(p){for(var y=[],T=0;31>T;T++)y.push(p);return y}function Eu(p,y,T){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-$i(y),p[y]=T}function Mp(p,y){var T=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var R=p.eventTimes;for(p=p.expirationTimes;0<T;){var q=31-$i(T),K=1<<q;y[q]=0,R[q]=-1,p[q]=-1,T&=~K}}function kp(p,y){var T=p.entangledLanes|=y;for(p=p.entanglements;T;){var R=31-$i(T),q=1<<R;q&y|p[R]&y&&(p[R]|=y),T&=~q}}var mn=0;function Ch(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var Ap,Ll,Wd,Ic,nl,Dl=!1,Br=[],Ts=null,Rl=null,Ms=null,Qi=new Map,Li=new Map,wn=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function In(p,y){switch(p){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Rl=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Qi.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(y.pointerId)}}function Lo(p,y,T,R,q,K){return p===null||p.nativeEvent!==K?(p={blockedOn:y,domEventName:T,eventSystemFlags:R,nativeEvent:K,targetContainers:[q]},y!==null&&(y=os(y),y!==null&&Ll(y)),p):(p.eventSystemFlags|=R,y=p.targetContainers,q!==null&&y.indexOf(q)===-1&&y.push(q),p)}function Ra(p,y,T,R,q){switch(y){case"focusin":return Ts=Lo(Ts,p,y,T,R,q),!0;case"dragenter":return Rl=Lo(Rl,p,y,T,R,q),!0;case"mouseover":return Ms=Lo(Ms,p,y,T,R,q),!0;case"pointerover":var K=q.pointerId;return Qi.set(K,Lo(Qi.get(K)||null,p,y,T,R,q)),!0;case"gotpointercapture":return K=q.pointerId,Li.set(K,Lo(Li.get(K)||null,p,y,T,R,q)),!0}return!1}function eo(p){var y=as(p.target);if(y!==null){var T=Bt(y);if(T!==null){if(y=T.tag,y===13){if(y=Zt(T),y!==null){p.blockedOn=y,nl(p.priority,function(){Wd(T)});return}}else if(y===3&&T.stateNode.current.memoizedState.isDehydrated){p.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Ji(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var T=Mh(p.domEventName,p.eventSystemFlags,y[0],p.nativeEvent);if(T===null){T=p.nativeEvent;var R=new T.constructor(T.type,T);Xt=R,T.target.dispatchEvent(R),Xt=null}else return y=os(T),y!==null&&Ll(y),p.blockedOn=T,!1;y.shift()}return!0}function Cu(p,y,T){Ji(p)&&T.delete(y)}function jl(){Dl=!1,Ts!==null&&Ji(Ts)&&(Ts=null),Rl!==null&&Ji(Rl)&&(Rl=null),Ms!==null&&Ji(Ms)&&(Ms=null),Qi.forEach(Cu),Li.forEach(Cu)}function Hn(p,y){p.blockedOn===y&&(p.blockedOn=null,Dl||(Dl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jl)))}function Jo(p){function y(q){return Hn(q,p)}if(0<Br.length){Hn(Br[0],p);for(var T=1;T<Br.length;T++){var R=Br[T];R.blockedOn===p&&(R.blockedOn=null)}}for(Ts!==null&&Hn(Ts,p),Rl!==null&&Hn(Rl,p),Ms!==null&&Hn(Ms,p),Qi.forEach(y),Li.forEach(y),T=0;T<wn.length;T++)R=wn[T],R.blockedOn===p&&(R.blockedOn=null);for(;0<wn.length&&(T=wn[0],T.blockedOn===null);)eo(T),T.blockedOn===null&&wn.shift()}var ja=ie.ReactCurrentBatchConfig,Tu=!0;function to(p,y,T,R){var q=mn,K=ja.transition;ja.transition=null;try{mn=1,es(p,y,T,R)}finally{mn=q,ja.transition=K}}function Mu(p,y,T,R){var q=mn,K=ja.transition;ja.transition=null;try{mn=4,es(p,y,T,R)}finally{mn=q,ja.transition=K}}function es(p,y,T,R){if(Tu){var q=Mh(p,y,T,R);if(q===null)Vu(p,y,R,Th,T),In(p,R);else if(Ra(q,p,y,T,R))R.stopPropagation();else if(In(p,R),y&4&&-1<Lr.indexOf(p)){for(;q!==null;){var K=os(q);if(K!==null&&Ap(K),K=Mh(p,y,T,R),K===null&&Vu(p,y,R,Th,T),K===q)break;q=K}q!==null&&R.stopPropagation()}else Vu(p,y,R,null,T)}}var Th=null;function Mh(p,y,T,R){if(Th=null,p=or(R),p=as(p),p!==null)if(y=Bt(p),y===null)p=null;else if(T=y.tag,T===13){if(p=Zt(y),p!==null)return p;p=null}else if(T===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null);return Th=p,null}function zl(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(La()){case Yi:return 1;case Oi:return 4;case Qr:case Io:return 16;case Oo:return 536870912;default:return 16}default:return 16}}var un=null,Nl=null,Xr=null;function Vr(){if(Xr)return Xr;var p,y=Nl,T=y.length,R,q="value"in un?un.value:un.textContent,K=q.length;for(p=0;p<T&&y[p]===q[p];p++);var de=T-p;for(R=1;R<=de&&y[T-R]===q[K-R];R++);return Xr=q.slice(p,1<R?1-R:void 0)}function il(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function Jr(){return!0}function Oc(){return!1}function hi(p){function y(T,R,q,K,de){this._reactName=T,this._targetInst=q,this.type=R,this.nativeEvent=K,this.target=de,this.currentTarget=null;for(var De in p)p.hasOwnProperty(De)&&(T=p[De],this[De]=T?T(K):K[De]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Jr:Oc,this.isPropagationStopped=Oc,this}return yt(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),y}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=hi(ts),Lc=yt({},ts,{view:0,detail:0}),kh=hi(Lc),Ah,Ip,Dc,ea=yt({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Dc&&(Dc&&p.type==="mousemove"?(Ah=p.screenX-Dc.screenX,Ip=p.screenY-Dc.screenY):Ip=Ah=0,Dc=p),Ah)},movementY:function(p){return"movementY"in p?p.movementY:Ip}}),rs=hi(ea),ii=yt({},ea,{dataTransfer:0}),ku=hi(ii),Op=yt({},Lc,{relatedTarget:0}),Au=hi(Op),pi=yt({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),ug=hi(pi),Lp=yt({},ts,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),cg=hi(Lp),ev=yt({},ts,{data:0}),Iu=hi(ev),Hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ih(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Dp[p])?!!y[p]:!1}function Fl(){return Ih}var jc=yt({},Lc,{key:function(p){if(p.key){var y=Hd[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=il(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Rc[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fl,charCode:function(p){return p.type==="keypress"?il(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?il(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Di=hi(jc),hg=yt({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ou=hi(hg),Oh=yt({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fl}),Lu=hi(Oh),tv=yt({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zd=hi(tv),rv=yt({},ea,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),zc=hi(rv),Kd=[9,13,27,32],Xd=o&&"CompositionEvent"in window,Nc=null;o&&"documentMode"in document&&(Nc=document.documentMode);var Rp=o&&"TextEvent"in window&&!Nc,Yd=o&&(!Xd||Nc&&8<Nc&&11>=Nc),Qd=" ",jp=!1;function zp(p,y){switch(p){case"keyup":return Kd.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Do=!1;function dg(p,y){switch(p){case"compositionend":return Np(y);case"keypress":return y.which!==32?null:(jp=!0,Qd);case"textInput":return p=y.data,p===Qd&&jp?null:p;default:return null}}function Fp(p,y){if(Do)return p==="compositionend"||!Xd&&zp(p,y)?(p=Vr(),Xr=Nl=un=null,Do=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Yd&&y.locale!=="ko"?null:y.data;default:return null}}var Fc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!Fc[p.type]:y==="textarea"}function Lh(p,y,T,R){sn(R),y=qc(y,"onChange"),0<y.length&&(T=new ks("onChange","change",null,T,R),p.push({event:T,listeners:y}))}var Dh=null,Rh=null;function fg(p){_g(p,0)}function Bl(p){var y=ss(p);if(St(y))return p}function pg(p,y){if(p==="change")return y}var Jd=!1;if(o){var ef;if(o){var Bc="oninput"in document;if(!Bc){var Ro=document.createElement("div");Ro.setAttribute("oninput","return;"),Bc=typeof Ro.oninput=="function"}ef=Bc}else ef=!1;Jd=ef&&(!document.documentMode||9<document.documentMode)}function jh(){Dh&&(Dh.detachEvent("onpropertychange",tf),Rh=Dh=null)}function tf(p){if(p.propertyName==="value"&&Bl(Rh)){var y=[];Lh(y,Rh,p,or(p)),yn(fg,y)}}function Vp(p,y,T){p==="focusin"?(jh(),Dh=y,Rh=T,Dh.attachEvent("onpropertychange",tf)):p==="focusout"&&jh()}function $p(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Bl(Rh)}function rf(p,y){if(p==="click")return Bl(y)}function Du(p,y){if(p==="input"||p==="change")return Bl(y)}function Up(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var ns=typeof Object.is=="function"?Object.is:Up;function Vc(p,y){if(ns(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var T=Object.keys(p),R=Object.keys(y);if(T.length!==R.length)return!1;for(R=0;R<T.length;R++){var q=T[R];if(!_.call(y,q)||!ns(p[q],y[q]))return!1}return!0}function mg(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function gg(p,y){var T=mg(p);p=0;for(var R;T;){if(T.nodeType===3){if(R=p+T.textContent.length,p<=y&&R>=y)return{node:T,offset:y-p};p=R}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=mg(T)}}function qp(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?qp(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function yg(){for(var p=window,y=Gr();y instanceof p.HTMLIFrameElement;){try{var T=typeof y.contentWindow.location.href=="string"}catch{T=!1}if(T)p=y.contentWindow;else break;y=Gr(p.document)}return y}function cn(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}function nf(p){var y=yg(),T=p.focusedElem,R=p.selectionRange;if(y!==T&&T&&T.ownerDocument&&qp(T.ownerDocument.documentElement,T)){if(R!==null&&cn(T)){if(y=R.start,p=R.end,p===void 0&&(p=y),"selectionStart"in T)T.selectionStart=y,T.selectionEnd=Math.min(p,T.value.length);else if(p=(y=T.ownerDocument||document)&&y.defaultView||window,p.getSelection){p=p.getSelection();var q=T.textContent.length,K=Math.min(R.start,q);R=R.end===void 0?K:Math.min(R.end,q),!p.extend&&K>R&&(q=R,R=K,K=q),q=gg(T,K);var de=gg(T,R);q&&de&&(p.rangeCount!==1||p.anchorNode!==q.node||p.anchorOffset!==q.offset||p.focusNode!==de.node||p.focusOffset!==de.offset)&&(y=y.createRange(),y.setStart(q.node,q.offset),p.removeAllRanges(),K>R?(p.addRange(y),p.extend(de.node,de.offset)):(y.setEnd(de.node,de.offset),p.addRange(y)))}}for(y=[],p=T;p=p.parentNode;)p.nodeType===1&&y.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<y.length;T++)p=y[T],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var af=o&&"documentMode"in document&&11>=document.documentMode,al=null,zh=null,is=null,Ru=!1;function ju(p,y,T){var R=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Ru||al==null||al!==Gr(R)||(R=al,"selectionStart"in R&&cn(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),is&&Vc(is,R)||(is=R,R=qc(zh,"onSelect"),0<R.length&&(y=new ks("onSelect","select",null,y,T),p.push({event:y,listeners:R}),y.target=al)))}function za(p,y){var T={};return T[p.toLowerCase()]=y.toLowerCase(),T["Webkit"+p]="webkit"+y,T["Moz"+p]="moz"+y,T}var zu={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},of={},sf={};o&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function As(p){if(of[p])return of[p];if(!zu[p])return p;var y=zu[p],T;for(T in y)if(y.hasOwnProperty(T)&&T in sf)return of[p]=y[T];return p}var Nh=As("animationend"),Fh=As("animationiteration"),$c=As("animationstart"),Bh=As("transitionend"),Gp=new Map,Nu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(p,y){Gp.set(p,y),h(y,[p])}for(var lf=0;lf<Nu.length;lf++){var Vh=Nu[lf],Hr=Vh.toLowerCase(),uf=Vh[0].toUpperCase()+Vh.slice(1);Po(Hr,"on"+uf)}Po(Nh,"onAnimationEnd"),Po(Fh,"onAnimationIteration"),Po($c,"onAnimationStart"),Po("dblclick","onDoubleClick"),Po("focusin","onFocus"),Po("focusout","onBlur"),Po(Bh,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vg=new Set("cancel close invalid load scroll toggle".split(" ").concat($h));function Uc(p,y,T){var R=p.type||"unknown-event";p.currentTarget=T,xt(R,y,void 0,p),p.currentTarget=null}function _g(p,y){y=(y&4)!==0;for(var T=0;T<p.length;T++){var R=p[T],q=R.event;R=R.listeners;e:{var K=void 0;if(y)for(var de=R.length-1;0<=de;de--){var De=R[de],qe=De.instance,vt=De.currentTarget;if(De=De.listener,qe!==K&&q.isPropagationStopped())break e;Uc(q,De,vt),K=qe}else for(de=0;de<R.length;de++){if(De=R[de],qe=De.instance,vt=De.currentTarget,De=De.listener,qe!==K&&q.isPropagationStopped())break e;Uc(q,De,vt),K=qe}}}if(Gt)throw p=cr,Gt=!1,cr=null,p}function ai(p,y){var T=y[qu];T===void 0&&(T=y[qu]=new Set);var R=p+"__bubble";T.has(R)||(Bu(y,p,2,!1),T.add(R))}function cf(p,y,T){var R=0;y&&(R|=4),Bu(T,p,R,y)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Fu(p){if(!p[hf]){p[hf]=!0,n.forEach(function(T){T!=="selectionchange"&&(vg.has(T)||cf(T,!1,p),cf(T,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[hf]||(y[hf]=!0,cf("selectionchange",!1,y))}}function Bu(p,y,T,R){switch(zl(y)){case 1:var q=to;break;case 4:q=Mu;break;default:q=es}T=q.bind(null,y,T,p),q=void 0,!ur||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(q=!0),R?q!==void 0?p.addEventListener(y,T,{capture:!0,passive:q}):p.addEventListener(y,T,!0):q!==void 0?p.addEventListener(y,T,{passive:q}):p.addEventListener(y,T,!1)}function Vu(p,y,T,R,q){var K=R;if((y&1)===0&&(y&2)===0&&R!==null)e:for(;;){if(R===null)return;var de=R.tag;if(de===3||de===4){var De=R.stateNode.containerInfo;if(De===q||De.nodeType===8&&De.parentNode===q)break;if(de===4)for(de=R.return;de!==null;){var qe=de.tag;if((qe===3||qe===4)&&(qe=de.stateNode.containerInfo,qe===q||qe.nodeType===8&&qe.parentNode===q))return;de=de.return}for(;De!==null;){if(de=as(De),de===null)return;if(qe=de.tag,qe===5||qe===6){R=K=de;continue e}De=De.parentNode}}R=R.return}yn(function(){var vt=K,qt=or(T),Ht=[];e:{var Ut=Gp.get(p);if(Ut!==void 0){var pr=ks,xr=p;switch(p){case"keypress":if(il(T)===0)break e;case"keydown":case"keyup":pr=Di;break;case"focusin":xr="focus",pr=Au;break;case"focusout":xr="blur",pr=Au;break;case"beforeblur":case"afterblur":pr=Au;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pr=rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pr=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pr=Lu;break;case Nh:case Fh:case $c:pr=ug;break;case Bh:pr=Zd;break;case"scroll":pr=kh;break;case"wheel":pr=zc;break;case"copy":case"cut":case"paste":pr=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pr=Ou}var Pr=(y&4)!==0,Ei=!Pr&&p==="scroll",lt=Pr?Ut!==null?Ut+"Capture":null:Ut;Pr=[];for(var He=vt,ft;He!==null;){ft=He;var Qt=ft.stateNode;if(ft.tag===5&&Qt!==null&&(ft=Qt,lt!==null&&(Qt=ln(He,lt),Qt!=null&&Pr.push(Vl(He,Qt,ft)))),Ei)break;He=He.return}0<Pr.length&&(Ut=new pr(Ut,xr,null,T,qt),Ht.push({event:Ut,listeners:Pr}))}}if((y&7)===0){e:{if(Ut=p==="mouseover"||p==="pointerover",pr=p==="mouseout"||p==="pointerout",Ut&&T!==Xt&&(xr=T.relatedTarget||T.fromElement)&&(as(xr)||xr[jo]))break e;if((pr||Ut)&&(Ut=qt.window===qt?qt:(Ut=qt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,pr?(xr=T.relatedTarget||T.toElement,pr=vt,xr=xr?as(xr):null,xr!==null&&(Ei=Bt(xr),xr!==Ei||xr.tag!==5&&xr.tag!==6)&&(xr=null)):(pr=null,xr=vt),pr!==xr)){if(Pr=rs,Qt="onMouseLeave",lt="onMouseEnter",He="mouse",(p==="pointerout"||p==="pointerover")&&(Pr=Ou,Qt="onPointerLeave",lt="onPointerEnter",He="pointer"),Ei=pr==null?Ut:ss(pr),ft=xr==null?Ut:ss(xr),Ut=new Pr(Qt,He+"leave",pr,T,qt),Ut.target=Ei,Ut.relatedTarget=ft,Qt=null,as(qt)===vt&&(Pr=new Pr(lt,He+"enter",xr,T,qt),Pr.target=ft,Pr.relatedTarget=Ei,Qt=Pr),Ei=Qt,pr&&xr)t:{for(Pr=pr,lt=xr,He=0,ft=Pr;ft;ft=$l(ft))He++;for(ft=0,Qt=lt;Qt;Qt=$l(Qt))ft++;for(;0<He-ft;)Pr=$l(Pr),He--;for(;0<ft-He;)lt=$l(lt),ft--;for(;He--;){if(Pr===lt||lt!==null&&Pr===lt.alternate)break t;Pr=$l(Pr),lt=$l(lt)}Pr=null}else Pr=null;pr!==null&&Uh(Ht,Ut,pr,Pr,!1),xr!==null&&Ei!==null&&Uh(Ht,Ei,xr,Pr,!0)}}e:{if(Ut=vt?ss(vt):window,pr=Ut.nodeName&&Ut.nodeName.toLowerCase(),pr==="select"||pr==="input"&&Ut.type==="file")var kr=pg;else if(Bp(Ut))if(Jd)kr=Du;else{kr=$p;var Rr=Vp}else(pr=Ut.nodeName)&&pr.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(kr=rf);if(kr&&(kr=kr(p,vt))){Lh(Ht,kr,T,qt);break e}Rr&&Rr(p,Ut,vt),p==="focusout"&&(Rr=Ut._wrapperState)&&Rr.controlled&&Ut.type==="number"&&Ii(Ut,"number",Ut.value)}switch(Rr=vt?ss(vt):window,p){case"focusin":(Bp(Rr)||Rr.contentEditable==="true")&&(al=Rr,zh=vt,is=null);break;case"focusout":is=zh=al=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,ju(Ht,T,qt);break;case"selectionchange":if(af)break;case"keydown":case"keyup":ju(Ht,T,qt)}var Nr;if(Xd)e:{switch(p){case"compositionstart":var qr="onCompositionStart";break e;case"compositionend":qr="onCompositionEnd";break e;case"compositionupdate":qr="onCompositionUpdate";break e}qr=void 0}else Do?zp(p,T)&&(qr="onCompositionEnd"):p==="keydown"&&T.keyCode===229&&(qr="onCompositionStart");qr&&(Yd&&T.locale!=="ko"&&(Do||qr!=="onCompositionStart"?qr==="onCompositionEnd"&&Do&&(Nr=Vr()):(un=qt,Nl="value"in un?un.value:un.textContent,Do=!0)),Rr=qc(vt,qr),0<Rr.length&&(qr=new Iu(qr,p,null,T,qt),Ht.push({event:qr,listeners:Rr}),Nr?qr.data=Nr:(Nr=Np(T),Nr!==null&&(qr.data=Nr)))),(Nr=Rp?dg(p,T):Fp(p,T))&&(vt=qc(vt,"onBeforeInput"),0<vt.length&&(qt=new Iu("onBeforeInput","beforeinput",null,T,qt),Ht.push({event:qt,listeners:vt}),qt.data=Nr))}_g(Ht,y)})}function Vl(p,y,T){return{instance:p,listener:y,currentTarget:T}}function qc(p,y){for(var T=y+"Capture",R=[];p!==null;){var q=p,K=q.stateNode;q.tag===5&&K!==null&&(q=K,K=ln(p,T),K!=null&&R.unshift(Vl(p,K,q)),K=ln(p,y),K!=null&&R.push(Vl(p,K,q))),p=p.return}return R}function $l(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function Uh(p,y,T,R,q){for(var K=y._reactName,de=[];T!==null&&T!==R;){var De=T,qe=De.alternate,vt=De.stateNode;if(qe!==null&&qe===R)break;De.tag===5&&vt!==null&&(De=vt,q?(qe=ln(T,K),qe!=null&&de.unshift(Vl(T,qe,De))):q||(qe=ln(T,K),qe!=null&&de.push(Vl(T,qe,De)))),T=T.return}de.length!==0&&p.push({event:y,listeners:de})}var df=/\r\n?/g,Ul=/\u0000|\uFFFD/g;function ql(p){return(typeof p=="string"?p:""+p).replace(df,`
`).replace(Ul,"")}function Gc(p,y,T){if(y=ql(y),ql(p)!==y&&T)throw Error(r(425))}function ff(){}var $u=null,Wp=null;function pf(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,mf=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(p){return Hp.resolve(null).then(p).catch(qh)}:Uu;function qh(p){setTimeout(function(){throw p})}function Wc(p,y){var T=y,R=0;do{var q=T.nextSibling;if(p.removeChild(T),q&&q.nodeType===8)if(T=q.data,T==="/$"){if(R===0){p.removeChild(q),Jo(y);return}R--}else T!=="$"&&T!=="$?"&&T!=="$!"||R++;T=q}while(T);Jo(y)}function ol(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return p}function Zp(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="$"||T==="$!"||T==="$?"){if(y===0)return p;y--}else T==="/$"&&y++}p=p.previousSibling}return null}var Un=Math.random().toString(36).slice(2),_a="__reactFiber$"+Un,fa="__reactProps$"+Un,jo="__reactContainer$"+Un,qu="__reactEvents$"+Un,gf="__reactListeners$"+Un,Gl="__reactHandles$"+Un;function as(p){var y=p[_a];if(y)return y;for(var T=p.parentNode;T;){if(y=T[jo]||T[_a]){if(T=y.alternate,y.child!==null||T!==null&&T.child!==null)for(p=Zp(p);p!==null;){if(T=p[_a])return T;p=Zp(p)}return y}p=T,T=p.parentNode}return null}function os(p){return p=p[_a]||p[jo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function ss(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(r(33))}function Gh(p){return p[fa]||null}var yf=[],Gu=-1;function sl(p){return{current:p}}function Zn(p){0>Gu||(p.current=yf[Gu],yf[Gu]=null,Gu--)}function gn(p,y){Gu++,yf[Gu]=p.current,p.current=y}var Is={},ta=sl(Is),ra=sl(!1),Wl=Is;function Hl(p,y){var T=p.type.contextTypes;if(!T)return Is;var R=p.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===y)return R.__reactInternalMemoizedMaskedChildContext;var q={},K;for(K in T)q[K]=y[K];return R&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=q),q}function xa(p){return p=p.childContextTypes,p!=null}function Wh(){Zn(ra),Zn(ta)}function vf(p,y,T){if(ta.current!==Is)throw Error(r(168));gn(ta,y),gn(ra,T)}function _f(p,y,T){var R=p.stateNode;if(y=y.childContextTypes,typeof R.getChildContext!="function")return T;R=R.getChildContext();for(var q in R)if(!(q in y))throw Error(r(108,Ft(p)||"Unknown",q));return yt({},T,R)}function ls(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Is,Wl=ta.current,gn(ta,p),gn(ra,ra.current),!0}function Kp(p,y,T){var R=p.stateNode;if(!R)throw Error(r(169));T?(p=_f(p,y,Wl),R.__reactInternalMemoizedMergedChildContext=p,Zn(ra),Zn(ta),gn(ta,p)):Zn(ra),gn(ra,T)}var Ri=null,ro=!1,xf=!1;function zo(p){Ri===null?Ri=[p]:Ri.push(p)}function nv(p){ro=!0,zo(p)}function No(){if(!xf&&Ri!==null){xf=!0;var p=0,y=mn;try{var T=Ri;for(mn=1;p<T.length;p++){var R=T[p];do R=R(!0);while(R!==null)}Ri=null,ro=!1}catch(q){throw Ri!==null&&(Ri=Ri.slice(p+1)),ni(Yi,No),q}finally{mn=y,xf=!1}}return null}var Os=[],mi=0,Zl=null,Hh=0,Fo=[],Bo=0,Vo=null,no=1,Ui="";function Jt(p,y){Os[mi++]=Hh,Os[mi++]=Zl,Zl=p,Hh=y}function Zh(p,y,T){Fo[Bo++]=no,Fo[Bo++]=Ui,Fo[Bo++]=Vo,Vo=p;var R=no;p=Ui;var q=32-$i(R)-1;R&=~(1<<q),T+=1;var K=32-$i(y)+q;if(30<K){var de=q-q%5;K=(R&(1<<de)-1).toString(32),R>>=de,q-=de,no=1<<32-$i(y)+q|T<<q|R,Ui=K+p}else no=1<<K|T<<q|R,Ui=p}function Kh(p){p.return!==null&&(Jt(p,1),Zh(p,1,0))}function Kl(p){for(;p===Zl;)Zl=Os[--mi],Os[mi]=null,Hh=Os[--mi],Os[mi]=null;for(;p===Vo;)Vo=Fo[--Bo],Fo[Bo]=null,Ui=Fo[--Bo],Fo[Bo]=null,no=Fo[--Bo],Fo[Bo]=null}var pa=null,ma=null,Kn=!1,Na=null;function bf(p,y){var T=qs(5,null,null,0);T.elementType="DELETED",T.stateNode=y,T.return=p,y=p.deletions,y===null?(p.deletions=[T],p.flags|=16):y.push(T)}function Xp(p,y){switch(p.tag){case 5:var T=p.type;return y=y.nodeType!==1||T.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(p.stateNode=y,pa=p,ma=ol(y.firstChild),!0):!1;case 6:return y=p.pendingProps===""||y.nodeType!==3?null:y,y!==null?(p.stateNode=y,pa=p,ma=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(T=Vo!==null?{id:no,overflow:Ui}:null,p.memoizedState={dehydrated:y,treeContext:T,retryLane:1073741824},T=qs(18,null,null,0),T.stateNode=y,T.return=p,p.child=T,pa=p,ma=null,!0):!1;default:return!1}}function Xl(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Yp(p){if(Kn){var y=ma;if(y){var T=y;if(!Xp(p,y)){if(Xl(p))throw Error(r(418));y=ol(T.nextSibling);var R=pa;y&&Xp(p,y)?bf(R,T):(p.flags=p.flags&-4097|2,Kn=!1,pa=p)}}else{if(Xl(p))throw Error(r(418));p.flags=p.flags&-4097|2,Kn=!1,pa=p}}}function Xh(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;pa=p}function Wu(p){if(p!==pa)return!1;if(!Kn)return Xh(p),Kn=!0,!1;var y;if((y=p.tag!==3)&&!(y=p.tag!==5)&&(y=p.type,y=y!=="head"&&y!=="body"&&!pf(p.type,p.memoizedProps)),y&&(y=ma)){if(Xl(p))throw Qp(),Error(r(418));for(;y;)bf(p,y),y=ol(y.nextSibling)}if(Xh(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8){var T=p.data;if(T==="/$"){if(y===0){ma=ol(p.nextSibling);break e}y--}else T!=="$"&&T!=="$!"&&T!=="$?"||y++}p=p.nextSibling}ma=null}}else ma=pa?ol(p.stateNode.nextSibling):null;return!0}function Qp(){for(var p=ma;p;)p=ol(p.nextSibling)}function Yl(){ma=pa=null,Kn=!1}function wf(p){Na===null?Na=[p]:Na.push(p)}var Jp=ie.ReactCurrentBatchConfig;function Hu(p,y,T){if(p=T.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(r(309));var R=T.stateNode}if(!R)throw Error(r(147,p));var q=R,K=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===K?y.ref:(y=function(de){var De=q.refs;de===null?delete De[K]:De[K]=de},y._stringRef=K,y)}if(typeof p!="string")throw Error(r(284));if(!T._owner)throw Error(r(290,p))}return p}function Yh(p,y){throw p=Object.prototype.toString.call(y),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function ll(p){var y=p._init;return y(p._payload)}function Mn(p){function y(lt,He){if(p){var ft=lt.deletions;ft===null?(lt.deletions=[He],lt.flags|=16):ft.push(He)}}function T(lt,He){if(!p)return null;for(;He!==null;)y(lt,He),He=He.sibling;return null}function R(lt,He){for(lt=new Map;He!==null;)He.key!==null?lt.set(He.key,He):lt.set(He.index,He),He=He.sibling;return lt}function q(lt,He){return lt=sc(lt,He),lt.index=0,lt.sibling=null,lt}function K(lt,He,ft){return lt.index=ft,p?(ft=lt.alternate,ft!==null?(ft=ft.index,ft<He?(lt.flags|=2,He):ft):(lt.flags|=2,He)):(lt.flags|=1048576,He)}function de(lt){return p&&lt.alternate===null&&(lt.flags|=2),lt}function De(lt,He,ft,Qt){return He===null||He.tag!==6?(He=Og(ft,lt.mode,Qt),He.return=lt,He):(He=q(He,ft),He.return=lt,He)}function qe(lt,He,ft,Qt){var kr=ft.type;return kr===re?qt(lt,He,ft.props.children,Qt,ft.key):He!==null&&(He.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===gt&&ll(kr)===He.type)?(Qt=q(He,ft.props),Qt.ref=Hu(lt,He,ft),Qt.return=lt,Qt):(Qt=Bf(ft.type,ft.key,ft.props,null,lt.mode,Qt),Qt.ref=Hu(lt,He,ft),Qt.return=lt,Qt)}function vt(lt,He,ft,Qt){return He===null||He.tag!==4||He.stateNode.containerInfo!==ft.containerInfo||He.stateNode.implementation!==ft.implementation?(He=xv(ft,lt.mode,Qt),He.return=lt,He):(He=q(He,ft.children||[]),He.return=lt,He)}function qt(lt,He,ft,Qt,kr){return He===null||He.tag!==7?(He=sh(ft,lt.mode,Qt,kr),He.return=lt,He):(He=q(He,ft),He.return=lt,He)}function Ht(lt,He,ft){if(typeof He=="string"&&He!==""||typeof He=="number")return He=Og(""+He,lt.mode,ft),He.return=lt,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case ae:return ft=Bf(He.type,He.key,He.props,null,lt.mode,ft),ft.ref=Hu(lt,null,He),ft.return=lt,ft;case he:return He=xv(He,lt.mode,ft),He.return=lt,He;case gt:var Qt=He._init;return Ht(lt,Qt(He._payload),ft)}if(Be(He)||Qe(He))return He=sh(He,lt.mode,ft,null),He.return=lt,He;Yh(lt,He)}return null}function Ut(lt,He,ft,Qt){var kr=He!==null?He.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return kr!==null?null:De(lt,He,""+ft,Qt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ae:return ft.key===kr?qe(lt,He,ft,Qt):null;case he:return ft.key===kr?vt(lt,He,ft,Qt):null;case gt:return kr=ft._init,Ut(lt,He,kr(ft._payload),Qt)}if(Be(ft)||Qe(ft))return kr!==null?null:qt(lt,He,ft,Qt,null);Yh(lt,ft)}return null}function pr(lt,He,ft,Qt,kr){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return lt=lt.get(ft)||null,De(He,lt,""+Qt,kr);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case ae:return lt=lt.get(Qt.key===null?ft:Qt.key)||null,qe(He,lt,Qt,kr);case he:return lt=lt.get(Qt.key===null?ft:Qt.key)||null,vt(He,lt,Qt,kr);case gt:var Rr=Qt._init;return pr(lt,He,ft,Rr(Qt._payload),kr)}if(Be(Qt)||Qe(Qt))return lt=lt.get(ft)||null,qt(He,lt,Qt,kr,null);Yh(He,Qt)}return null}function xr(lt,He,ft,Qt){for(var kr=null,Rr=null,Nr=He,qr=He=0,Pa=null;Nr!==null&&qr<ft.length;qr++){Nr.index>qr?(Pa=Nr,Nr=null):Pa=Nr.sibling;var kn=Ut(lt,Nr,ft[qr],Qt);if(kn===null){Nr===null&&(Nr=Pa);break}p&&Nr&&kn.alternate===null&&y(lt,Nr),He=K(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn,Nr=Pa}if(qr===ft.length)return T(lt,Nr),Kn&&Jt(lt,qr),kr;if(Nr===null){for(;qr<ft.length;qr++)Nr=Ht(lt,ft[qr],Qt),Nr!==null&&(He=K(Nr,He,qr),Rr===null?kr=Nr:Rr.sibling=Nr,Rr=Nr);return Kn&&Jt(lt,qr),kr}for(Nr=R(lt,Nr);qr<ft.length;qr++)Pa=pr(Nr,lt,qr,ft[qr],Qt),Pa!==null&&(p&&Pa.alternate!==null&&Nr.delete(Pa.key===null?qr:Pa.key),He=K(Pa,He,qr),Rr===null?kr=Pa:Rr.sibling=Pa,Rr=Pa);return p&&Nr.forEach(function(lh){return y(lt,lh)}),Kn&&Jt(lt,qr),kr}function Pr(lt,He,ft,Qt){var kr=Qe(ft);if(typeof kr!="function")throw Error(r(150));if(ft=kr.call(ft),ft==null)throw Error(r(151));for(var Rr=kr=null,Nr=He,qr=He=0,Pa=null,kn=ft.next();Nr!==null&&!kn.done;qr++,kn=ft.next()){Nr.index>qr?(Pa=Nr,Nr=null):Pa=Nr.sibling;var lh=Ut(lt,Nr,kn.value,Qt);if(lh===null){Nr===null&&(Nr=Pa);break}p&&Nr&&lh.alternate===null&&y(lt,Nr),He=K(lh,He,qr),Rr===null?kr=lh:Rr.sibling=lh,Rr=lh,Nr=Pa}if(kn.done)return T(lt,Nr),Kn&&Jt(lt,qr),kr;if(Nr===null){for(;!kn.done;qr++,kn=ft.next())kn=Ht(lt,kn.value,Qt),kn!==null&&(He=K(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn);return Kn&&Jt(lt,qr),kr}for(Nr=R(lt,Nr);!kn.done;qr++,kn=ft.next())kn=pr(Nr,lt,qr,kn.value,Qt),kn!==null&&(p&&kn.alternate!==null&&Nr.delete(kn.key===null?qr:kn.key),He=K(kn,He,qr),Rr===null?kr=kn:Rr.sibling=kn,Rr=kn);return p&&Nr.forEach(function(L0){return y(lt,L0)}),Kn&&Jt(lt,qr),kr}function Ei(lt,He,ft,Qt){if(typeof ft=="object"&&ft!==null&&ft.type===re&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ae:e:{for(var kr=ft.key,Rr=He;Rr!==null;){if(Rr.key===kr){if(kr=ft.type,kr===re){if(Rr.tag===7){T(lt,Rr.sibling),He=q(Rr,ft.props.children),He.return=lt,lt=He;break e}}else if(Rr.elementType===kr||typeof kr=="object"&&kr!==null&&kr.$$typeof===gt&&ll(kr)===Rr.type){T(lt,Rr.sibling),He=q(Rr,ft.props),He.ref=Hu(lt,Rr,ft),He.return=lt,lt=He;break e}T(lt,Rr);break}else y(lt,Rr);Rr=Rr.sibling}ft.type===re?(He=sh(ft.props.children,lt.mode,Qt,ft.key),He.return=lt,lt=He):(Qt=Bf(ft.type,ft.key,ft.props,null,lt.mode,Qt),Qt.ref=Hu(lt,He,ft),Qt.return=lt,lt=Qt)}return de(lt);case he:e:{for(Rr=ft.key;He!==null;){if(He.key===Rr)if(He.tag===4&&He.stateNode.containerInfo===ft.containerInfo&&He.stateNode.implementation===ft.implementation){T(lt,He.sibling),He=q(He,ft.children||[]),He.return=lt,lt=He;break e}else{T(lt,He);break}else y(lt,He);He=He.sibling}He=xv(ft,lt.mode,Qt),He.return=lt,lt=He}return de(lt);case gt:return Rr=ft._init,Ei(lt,He,Rr(ft._payload),Qt)}if(Be(ft))return xr(lt,He,ft,Qt);if(Qe(ft))return Pr(lt,He,ft,Qt);Yh(lt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,He!==null&&He.tag===6?(T(lt,He.sibling),He=q(He,ft),He.return=lt,lt=He):(T(lt,He),He=Og(ft,lt.mode,Qt),He.return=lt,lt=He),de(lt)):T(lt,He)}return Ei}var Hc=Mn(!0),Zc=Mn(!1),Zu=sl(null),Ku=null,Ql=null,Sf=null;function Pf(){Sf=Ql=Ku=null}function Ef(p){var y=Zu.current;Zn(Zu),p._currentValue=y}function Eo(p,y,T){for(;p!==null;){var R=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,R!==null&&(R.childLanes|=y)):R!==null&&(R.childLanes&y)!==y&&(R.childLanes|=y),p===T)break;p=p.return}}function Ls(p,y){Ku=p,Sf=Ql=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(Ba=!0),p.firstContext=null)}function ar(p){var y=p._currentValue;if(Sf!==p)if(p={context:p,memoizedValue:y,next:null},Ql===null){if(Ku===null)throw Error(r(308));Ql=p,Ku.dependencies={lanes:0,firstContext:p}}else Ql=Ql.next=p;return y}var gr=null;function Xu(p){gr===null?gr=[p]:gr.push(p)}function Qh(p,y,T,R){var q=y.interleaved;return q===null?(T.next=T,Xu(y)):(T.next=q.next,q.next=T),y.interleaved=T,$o(p,R)}function $o(p,y){p.lanes|=y;var T=p.alternate;for(T!==null&&(T.lanes|=y),T=p,p=p.return;p!==null;)p.childLanes|=y,T=p.alternate,T!==null&&(T.childLanes|=y),T=p,p=p.return;return T.tag===3?T.stateNode:null}var xi=!1;function io(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cf(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Ds(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function Jl(p,y,T){var R=p.updateQueue;if(R===null)return null;if(R=R.shared,(Pn&2)!==0){var q=R.pending;return q===null?y.next=y:(y.next=q.next,q.next=y),R.pending=y,$o(p,T)}return q=R.interleaved,q===null?(y.next=y,Xu(R)):(y.next=q.next,q.next=y),R.interleaved=y,$o(p,T)}function Tf(p,y,T){if(y=y.updateQueue,y!==null&&(y=y.shared,(T&4194240)!==0)){var R=y.lanes;R&=p.pendingLanes,T|=R,y.lanes=T,kp(p,T)}}function Kc(p,y){var T=p.updateQueue,R=p.alternate;if(R!==null&&(R=R.updateQueue,T===R)){var q=null,K=null;if(T=T.firstBaseUpdate,T!==null){do{var de={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};K===null?q=K=de:K=K.next=de,T=T.next}while(T!==null);K===null?q=K=y:K=K.next=y}else q=K=y;T={baseState:R.baseState,firstBaseUpdate:q,lastBaseUpdate:K,shared:R.shared,effects:R.effects},p.updateQueue=T;return}p=T.lastBaseUpdate,p===null?T.firstBaseUpdate=y:p.next=y,T.lastBaseUpdate=y}function qn(p,y,T,R){var q=p.updateQueue;xi=!1;var K=q.firstBaseUpdate,de=q.lastBaseUpdate,De=q.shared.pending;if(De!==null){q.shared.pending=null;var qe=De,vt=qe.next;qe.next=null,de===null?K=vt:de.next=vt,de=qe;var qt=p.alternate;qt!==null&&(qt=qt.updateQueue,De=qt.lastBaseUpdate,De!==de&&(De===null?qt.firstBaseUpdate=vt:De.next=vt,qt.lastBaseUpdate=qe))}if(K!==null){var Ht=q.baseState;de=0,qt=vt=qe=null,De=K;do{var Ut=De.lane,pr=De.eventTime;if((R&Ut)===Ut){qt!==null&&(qt=qt.next={eventTime:pr,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var xr=p,Pr=De;switch(Ut=y,pr=T,Pr.tag){case 1:if(xr=Pr.payload,typeof xr=="function"){Ht=xr.call(pr,Ht,Ut);break e}Ht=xr;break e;case 3:xr.flags=xr.flags&-65537|128;case 0:if(xr=Pr.payload,Ut=typeof xr=="function"?xr.call(pr,Ht,Ut):xr,Ut==null)break e;Ht=yt({},Ht,Ut);break e;case 2:xi=!0}}De.callback!==null&&De.lane!==0&&(p.flags|=64,Ut=q.effects,Ut===null?q.effects=[De]:Ut.push(De))}else pr={eventTime:pr,lane:Ut,tag:De.tag,payload:De.payload,callback:De.callback,next:null},qt===null?(vt=qt=pr,qe=Ht):qt=qt.next=pr,de|=Ut;if(De=De.next,De===null){if(De=q.shared.pending,De===null)break;Ut=De,De=Ut.next,Ut.next=null,q.lastBaseUpdate=Ut,q.shared.pending=null}}while(!0);if(qt===null&&(qe=Ht),q.baseState=qe,q.firstBaseUpdate=vt,q.lastBaseUpdate=qt,y=q.shared.interleaved,y!==null){q=y;do de|=q.lane,q=q.next;while(q!==y)}else K===null&&(q.shared.lanes=0);Jc|=de,p.lanes=de,p.memoizedState=Ht}}function gi(p,y,T){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var R=p[y],q=R.callback;if(q!==null){if(R.callback=null,R=T,typeof q!="function")throw Error(r(191,q));q.call(R)}}}var us={},ao=sl(us),eu=sl(us),Yu=sl(us);function Rs(p){if(p===us)throw Error(r(174));return p}function Jh(p,y){switch(gn(Yu,y),gn(eu,p),gn(ao,us),p=y.nodeType,p){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:ue(null,"");break;default:p=p===8?y.parentNode:y,y=p.namespaceURI||null,p=p.tagName,y=ue(y,p)}Zn(ao),gn(ao,y)}function js(){Zn(ao),Zn(eu),Zn(Yu)}function zs(p){Rs(Yu.current);var y=Rs(ao.current),T=ue(y,p.type);y!==T&&(gn(eu,p),gn(ao,T))}function Xc(p){eu.current===p&&(Zn(ao),Zn(eu))}var Gn=sl(0);function Qu(p){for(var y=p;y!==null;){if(y.tag===13){var T=y.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||T.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Ju=[];function ed(){for(var p=0;p<Ju.length;p++)Ju[p]._workInProgressVersionPrimary=null;Ju.length=0}var ul=ie.ReactCurrentDispatcher,cl=ie.ReactCurrentBatchConfig,hl=0,Wn=null,oi=null,ji=null,ec=!1,tu=!1,tc=0,w=0;function i(){throw Error(r(321))}function c(p,y){if(y===null)return!1;for(var T=0;T<y.length&&T<p.length;T++)if(!ns(p[T],y[T]))return!1;return!0}function m(p,y,T,R,q,K){if(hl=K,Wn=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,ul.current=p===null||p.memoizedState===null?si:na,p=T(R,q),tu){K=0;do{if(tu=!1,tc=0,25<=K)throw Error(r(301));K+=1,ji=oi=null,y.updateQueue=null,ul.current=Si,p=T(R,q)}while(tu)}if(ul.current=Qn,y=oi!==null&&oi.next!==null,hl=0,ji=oi=Wn=null,ec=!1,y)throw Error(r(300));return p}function v(){var p=tc!==0;return tc=0,p}function E(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?Wn.memoizedState=ji=p:ji=ji.next=p,ji}function k(){if(oi===null){var p=Wn.alternate;p=p!==null?p.memoizedState:null}else p=oi.next;var y=ji===null?Wn.memoizedState:ji.next;if(y!==null)ji=y,oi=p;else{if(p===null)throw Error(r(310));oi=p,p={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},ji===null?Wn.memoizedState=ji=p:ji=ji.next=p}return ji}function L(p,y){return typeof y=="function"?y(p):y}function N(p){var y=k(),T=y.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=p;var R=oi,q=R.baseQueue,K=T.pending;if(K!==null){if(q!==null){var de=q.next;q.next=K.next,K.next=de}R.baseQueue=q=K,T.pending=null}if(q!==null){K=q.next,R=R.baseState;var De=de=null,qe=null,vt=K;do{var qt=vt.lane;if((hl&qt)===qt)qe!==null&&(qe=qe.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),R=vt.hasEagerState?vt.eagerState:p(R,vt.action);else{var Ht={lane:qt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};qe===null?(De=qe=Ht,de=R):qe=qe.next=Ht,Wn.lanes|=qt,Jc|=qt}vt=vt.next}while(vt!==null&&vt!==K);qe===null?de=R:qe.next=De,ns(R,y.memoizedState)||(Ba=!0),y.memoizedState=R,y.baseState=de,y.baseQueue=qe,T.lastRenderedState=R}if(p=T.interleaved,p!==null){q=p;do K=q.lane,Wn.lanes|=K,Jc|=K,q=q.next;while(q!==p)}else q===null&&(T.lanes=0);return[y.memoizedState,T.dispatch]}function U(p){var y=k(),T=y.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=p;var R=T.dispatch,q=T.pending,K=y.memoizedState;if(q!==null){T.pending=null;var de=q=q.next;do K=p(K,de.action),de=de.next;while(de!==q);ns(K,y.memoizedState)||(Ba=!0),y.memoizedState=K,y.baseQueue===null&&(y.baseState=K),T.lastRenderedState=K}return[K,R]}function W(){}function J(p,y){var T=Wn,R=k(),q=y(),K=!ns(R.memoizedState,q);if(K&&(R.memoizedState=q,Ba=!0),R=R.queue,Te(ce.bind(null,T,R,p),[p]),R.getSnapshot!==y||K||ji!==null&&ji.memoizedState.tag&1){if(T.flags|=2048,we(9,oe.bind(null,T,R,q,y),void 0,null),Sa===null)throw Error(r(349));(hl&30)!==0||Y(T,y,q)}return q}function Y(p,y,T){p.flags|=16384,p={getSnapshot:y,value:T},y=Wn.updateQueue,y===null?(y={lastEffect:null,stores:null},Wn.updateQueue=y,y.stores=[p]):(T=y.stores,T===null?y.stores=[p]:T.push(p))}function oe(p,y,T,R){y.value=T,y.getSnapshot=R,ye(y)&&_e(p)}function ce(p,y,T){return T(function(){ye(y)&&_e(p)})}function ye(p){var y=p.getSnapshot;p=p.value;try{var T=y();return!ns(p,T)}catch{return!0}}function _e(p){var y=$o(p,1);y!==null&&vl(y,p,1,-1)}function ve(p){var y=E();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:p},y.queue=p,p=p.dispatch=Xn.bind(null,Wn,p),[y.memoizedState,p]}function we(p,y,T,R){return p={tag:p,create:y,destroy:T,deps:R,next:null},y=Wn.updateQueue,y===null?(y={lastEffect:null,stores:null},Wn.updateQueue=y,y.lastEffect=p.next=p):(T=y.lastEffect,T===null?y.lastEffect=p.next=p:(R=T.next,T.next=p,p.next=R,y.lastEffect=p)),p}function Le(){return k().memoizedState}function Se(p,y,T,R){var q=E();Wn.flags|=p,q.memoizedState=we(1|y,T,void 0,R===void 0?null:R)}function ke(p,y,T,R){var q=k();R=R===void 0?null:R;var K=void 0;if(oi!==null){var de=oi.memoizedState;if(K=de.destroy,R!==null&&c(R,de.deps)){q.memoizedState=we(y,T,K,R);return}}Wn.flags|=p,q.memoizedState=we(1|y,T,K,R)}function Fe(p,y){return Se(8390656,8,p,y)}function Te(p,y){return ke(2048,8,p,y)}function Ge(p,y){return ke(4,2,p,y)}function ht(p,y){return ke(4,4,p,y)}function at(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function ot(p,y,T){return T=T!=null?T.concat([p]):null,ke(4,4,at.bind(null,y,p),T)}function st(){}function Nt(p,y){var T=k();y=y===void 0?null:y;var R=T.memoizedState;return R!==null&&y!==null&&c(y,R[1])?R[0]:(T.memoizedState=[p,y],p)}function Vt(p,y){var T=k();y=y===void 0?null:y;var R=T.memoizedState;return R!==null&&y!==null&&c(y,R[1])?R[0]:(p=p(),T.memoizedState=[p,y],p)}function It(p,y,T){return(hl&21)===0?(p.baseState&&(p.baseState=!1,Ba=!0),p.memoizedState=T):(ns(T,y)||(T=Gd(),Wn.lanes|=T,Jc|=T,p.baseState=!0),y)}function Yt(p,y){var T=mn;mn=T!==0&&4>T?T:4,p(!0);var R=cl.transition;cl.transition={};try{p(!1),y()}finally{mn=T,cl.transition=R}}function zr(){return k().memoizedState}function Sn(p,y,T){var R=Go(p);if(T={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null},On(p))Yn(y,T);else if(T=Qh(p,y,T,R),T!==null){var q=uo();vl(T,p,R,q),Ln(T,y,R)}}function Xn(p,y,T){var R=Go(p),q={lane:R,action:T,hasEagerState:!1,eagerState:null,next:null};if(On(p))Yn(y,q);else{var K=p.alternate;if(p.lanes===0&&(K===null||K.lanes===0)&&(K=y.lastRenderedReducer,K!==null))try{var de=y.lastRenderedState,De=K(de,T);if(q.hasEagerState=!0,q.eagerState=De,ns(De,de)){var qe=y.interleaved;qe===null?(q.next=q,Xu(y)):(q.next=qe.next,qe.next=q),y.interleaved=q;return}}catch{}finally{}T=Qh(p,y,q,R),T!==null&&(q=uo(),vl(T,p,R,q),Ln(T,y,R))}}function On(p){var y=p.alternate;return p===Wn||y!==null&&y===Wn}function Yn(p,y){tu=ec=!0;var T=p.pending;T===null?y.next=y:(y.next=T.next,T.next=y),p.pending=y}function Ln(p,y,T){if((T&4194240)!==0){var R=y.lanes;R&=p.pendingLanes,T|=R,y.lanes=T,kp(p,T)}}var Qn={readContext:ar,useCallback:i,useContext:i,useEffect:i,useImperativeHandle:i,useInsertionEffect:i,useLayoutEffect:i,useMemo:i,useReducer:i,useRef:i,useState:i,useDebugValue:i,useDeferredValue:i,useTransition:i,useMutableSource:i,useSyncExternalStore:i,useId:i,unstable_isNewReconciler:!1},si={readContext:ar,useCallback:function(p,y){return E().memoizedState=[p,y===void 0?null:y],p},useContext:ar,useEffect:Fe,useImperativeHandle:function(p,y,T){return T=T!=null?T.concat([p]):null,Se(4194308,4,at.bind(null,y,p),T)},useLayoutEffect:function(p,y){return Se(4194308,4,p,y)},useInsertionEffect:function(p,y){return Se(4,2,p,y)},useMemo:function(p,y){var T=E();return y=y===void 0?null:y,p=p(),T.memoizedState=[p,y],p},useReducer:function(p,y,T){var R=E();return y=T!==void 0?T(y):y,R.memoizedState=R.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},R.queue=p,p=p.dispatch=Sn.bind(null,Wn,p),[R.memoizedState,p]},useRef:function(p){var y=E();return p={current:p},y.memoizedState=p},useState:ve,useDebugValue:st,useDeferredValue:function(p){return E().memoizedState=p},useTransition:function(){var p=ve(!1),y=p[0];return p=Yt.bind(null,p[1]),E().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,T){var R=Wn,q=E();if(Kn){if(T===void 0)throw Error(r(407));T=T()}else{if(T=y(),Sa===null)throw Error(r(349));(hl&30)!==0||Y(R,y,T)}q.memoizedState=T;var K={value:T,getSnapshot:y};return q.queue=K,Fe(ce.bind(null,R,K,p),[p]),R.flags|=2048,we(9,oe.bind(null,R,K,T,y),void 0,null),T},useId:function(){var p=E(),y=Sa.identifierPrefix;if(Kn){var T=Ui,R=no;T=(R&~(1<<32-$i(R)-1)).toString(32)+T,y=":"+y+"R"+T,T=tc++,0<T&&(y+="H"+T.toString(32)),y+=":"}else T=w++,y=":"+y+"r"+T.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},na={readContext:ar,useCallback:Nt,useContext:ar,useEffect:Te,useImperativeHandle:ot,useInsertionEffect:Ge,useLayoutEffect:ht,useMemo:Vt,useReducer:N,useRef:Le,useState:function(){return N(L)},useDebugValue:st,useDeferredValue:function(p){var y=k();return It(y,oi.memoizedState,p)},useTransition:function(){var p=N(L)[0],y=k().memoizedState;return[p,y]},useMutableSource:W,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1},Si={readContext:ar,useCallback:Nt,useContext:ar,useEffect:Te,useImperativeHandle:ot,useInsertionEffect:Ge,useLayoutEffect:ht,useMemo:Vt,useReducer:U,useRef:Le,useState:function(){return U(L)},useDebugValue:st,useDeferredValue:function(p){var y=k();return oi===null?y.memoizedState=p:It(y,oi.memoizedState,p)},useTransition:function(){var p=U(L)[0],y=k().memoizedState;return[p,y]},useMutableSource:W,useSyncExternalStore:J,useId:zr,unstable_isNewReconciler:!1};function _n(p,y){if(p&&p.defaultProps){y=yt({},y),p=p.defaultProps;for(var T in p)y[T]===void 0&&(y[T]=p[T]);return y}return y}function qi(p,y,T,R){y=p.memoizedState,T=T(R,y),T=T==null?y:yt({},y,T),p.memoizedState=T,p.lanes===0&&(p.updateQueue.baseState=T)}var cs={isMounted:function(p){return(p=p._reactInternals)?Bt(p)===p:!1},enqueueSetState:function(p,y,T){p=p._reactInternals;var R=uo(),q=Go(p),K=Ds(R,q);K.payload=y,T!=null&&(K.callback=T),y=Jl(p,K,q),y!==null&&(vl(y,p,q,R),Tf(y,p,q))},enqueueReplaceState:function(p,y,T){p=p._reactInternals;var R=uo(),q=Go(p),K=Ds(R,q);K.tag=1,K.payload=y,T!=null&&(K.callback=T),y=Jl(p,K,q),y!==null&&(vl(y,p,q,R),Tf(y,p,q))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var T=uo(),R=Go(p),q=Ds(T,R);q.tag=2,y!=null&&(q.callback=y),y=Jl(p,q,R),y!==null&&(vl(y,p,R,T),Tf(y,p,R))}};function Ns(p,y,T,R,q,K,de){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(R,K,de):y.prototype&&y.prototype.isPureReactComponent?!Vc(T,R)||!Vc(q,K):!0}function hs(p,y,T){var R=!1,q=Is,K=y.contextType;return typeof K=="object"&&K!==null?K=ar(K):(q=xa(y)?Wl:ta.current,R=y.contextTypes,K=(R=R!=null)?Hl(p,q):Is),y=new y(T,K),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=cs,p.stateNode=y,y._reactInternals=p,R&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=q,p.__reactInternalMemoizedMaskedChildContext=K),y}function Fa(p,y,T,R){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(T,R),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(T,R),y.state!==p&&cs.enqueueReplaceState(y,y.state,null)}function dl(p,y,T,R){var q=p.stateNode;q.props=T,q.state=p.memoizedState,q.refs={},io(p);var K=y.contextType;typeof K=="object"&&K!==null?q.context=ar(K):(K=xa(y)?Wl:ta.current,q.context=Hl(p,K)),q.state=p.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(qi(p,y,K,T),q.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(y=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),y!==q.state&&cs.enqueueReplaceState(q,q.state,null),qn(p,T,q,R),q.state=p.memoizedState),typeof q.componentDidMount=="function"&&(p.flags|=4194308)}function Fs(p,y){try{var T="",R=y;do T+=Ke(R),R=R.return;while(R);var q=T}catch(K){q=`
Error generating stack: `+K.message+`
`+K.stack}return{value:p,source:y,stack:q,digest:null}}function fl(p,y,T){return{value:p,source:null,stack:T??null,digest:y??null}}function oo(p,y){try{console.error(y.value)}catch(T){setTimeout(function(){throw T})}}var Bs=typeof WeakMap=="function"?WeakMap:Map;function Uo(p,y,T){T=Ds(-1,T),T.tag=3,T.payload={element:null};var R=y.value;return T.callback=function(){th||(th=!0,Tg=R),oo(p,y)},T}function qo(p,y,T){T=Ds(-1,T),T.tag=3;var R=p.type.getDerivedStateFromError;if(typeof R=="function"){var q=y.value;T.payload=function(){return R(q)},T.callback=function(){oo(p,y)}}var K=p.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(T.callback=function(){oo(p,y),typeof R!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var de=y.stack;this.componentDidCatch(y.value,{componentStack:de!==null?de:""})}),T}function zn(p,y,T){var R=p.pingCache;if(R===null){R=p.pingCache=new Bs;var q=new Set;R.set(y,q)}else q=R.get(y),q===void 0&&(q=new Set,R.set(y,q));q.has(T)||(q.add(T),p=S0.bind(null,p,y,T),y.then(p,p))}function Dn(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function zi(p,y,T,R,q){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(y=Ds(-1,1),y.tag=2,Jl(T,y,1))),T.lanes|=1),p):(p.flags|=65536,p.lanes=q,p)}var Gi=ie.ReactCurrentOwner,Ba=!1;function ba(p,y,T,R){y.child=p===null?Zc(y,null,T,R):Hc(y,p.child,T,R)}function ru(p,y,T,R,q){T=T.render;var K=y.ref;return Ls(y,q),R=m(p,y,T,R,K,q),T=v(),p!==null&&!Ba?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~q,nc(p,y,q)):(Kn&&T&&Kh(y),y.flags|=1,ba(p,y,R,q),y.child)}function bg(p,y,T,R,q){if(p===null){var K=T.type;return typeof K=="function"&&!_v(K)&&K.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(y.tag=15,y.type=K,em(p,y,K,R,q)):(p=Bf(T.type,null,R,y,y.mode,q),p.ref=y.ref,p.return=y,y.child=p)}if(K=p.child,(p.lanes&q)===0){var de=K.memoizedProps;if(T=T.compare,T=T!==null?T:Vc,T(de,R)&&p.ref===y.ref)return nc(p,y,q)}return y.flags|=1,p=sc(K,R),p.ref=y.ref,p.return=y,y.child=p}function em(p,y,T,R,q){if(p!==null){var K=p.memoizedProps;if(Vc(K,R)&&p.ref===y.ref)if(Ba=!1,y.pendingProps=R=K,(p.lanes&q)!==0)(p.flags&131072)!==0&&(Ba=!0);else return y.lanes=p.lanes,nc(p,y,q)}return Vs(p,y,T,R,q)}function Mf(p,y,T){var R=y.pendingProps,q=R.children,K=p!==null?p.memoizedState:null;if(R.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(zf,fs),fs|=T;else{if((T&1073741824)===0)return p=K!==null?K.baseLanes|T:T,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,gn(zf,fs),fs|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=K!==null?K.baseLanes:T,gn(zf,fs),fs|=R}else K!==null?(R=K.baseLanes|T,y.memoizedState=null):R=T,gn(zf,fs),fs|=R;return ba(p,y,q,T),y.child}function pl(p,y){var T=y.ref;(p===null&&T!==null||p!==null&&p.ref!==T)&&(y.flags|=512,y.flags|=2097152)}function Vs(p,y,T,R,q){var K=xa(T)?Wl:ta.current;return K=Hl(y,K),Ls(y,q),T=m(p,y,T,R,K,q),R=v(),p!==null&&!Ba?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~q,nc(p,y,q)):(Kn&&R&&Kh(y),y.flags|=1,ba(p,y,T,q),y.child)}function ml(p,y,T,R,q){if(xa(T)){var K=!0;ls(y)}else K=!1;if(Ls(y,q),y.stateNode===null)rc(p,y),hs(y,T,R),dl(y,T,R,q),R=!0;else if(p===null){var de=y.stateNode,De=y.memoizedProps;de.props=De;var qe=de.context,vt=T.contextType;typeof vt=="object"&&vt!==null?vt=ar(vt):(vt=xa(T)?Wl:ta.current,vt=Hl(y,vt));var qt=T.getDerivedStateFromProps,Ht=typeof qt=="function"||typeof de.getSnapshotBeforeUpdate=="function";Ht||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(De!==R||qe!==vt)&&Fa(y,de,R,vt),xi=!1;var Ut=y.memoizedState;de.state=Ut,qn(y,R,de,q),qe=y.memoizedState,De!==R||Ut!==qe||ra.current||xi?(typeof qt=="function"&&(qi(y,T,qt,R),qe=y.memoizedState),(De=xi||Ns(y,T,De,R,Ut,qe,vt))?(Ht||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(y.flags|=4194308)):(typeof de.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=R,y.memoizedState=qe),de.props=R,de.state=qe,de.context=vt,R=De):(typeof de.componentDidMount=="function"&&(y.flags|=4194308),R=!1)}else{de=y.stateNode,Cf(p,y),De=y.memoizedProps,vt=y.type===y.elementType?De:_n(y.type,De),de.props=vt,Ht=y.pendingProps,Ut=de.context,qe=T.contextType,typeof qe=="object"&&qe!==null?qe=ar(qe):(qe=xa(T)?Wl:ta.current,qe=Hl(y,qe));var pr=T.getDerivedStateFromProps;(qt=typeof pr=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(De!==Ht||Ut!==qe)&&Fa(y,de,R,qe),xi=!1,Ut=y.memoizedState,de.state=Ut,qn(y,R,de,q);var xr=y.memoizedState;De!==Ht||Ut!==xr||ra.current||xi?(typeof pr=="function"&&(qi(y,T,pr,R),xr=y.memoizedState),(vt=xi||Ns(y,T,vt,R,Ut,xr,qe)||!1)?(qt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(R,xr,qe),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(R,xr,qe)),typeof de.componentDidUpdate=="function"&&(y.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof de.componentDidUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=1024),y.memoizedProps=R,y.memoizedState=xr),de.props=R,de.state=xr,de.context=qe,R=vt):(typeof de.componentDidUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&Ut===p.memoizedState||(y.flags|=1024),R=!1)}return td(p,y,T,R,K,q)}function td(p,y,T,R,q,K){pl(p,y);var de=(y.flags&128)!==0;if(!R&&!de)return q&&Kp(y,T,!1),nc(p,y,K);R=y.stateNode,Gi.current=y;var De=de&&typeof T.getDerivedStateFromError!="function"?null:R.render();return y.flags|=1,p!==null&&de?(y.child=Hc(y,p.child,null,K),y.child=Hc(y,null,De,K)):ba(p,y,De,K),y.memoizedState=R.state,q&&Kp(y,T,!0),y.child}function kf(p){var y=p.stateNode;y.pendingContext?vf(p,y.pendingContext,y.pendingContext!==y.context):y.context&&vf(p,y.context,!1),Jh(p,y.containerInfo)}function rd(p,y,T,R,q){return Yl(),wf(q),y.flags|=256,ba(p,y,T,R),y.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Af(p){return{baseLanes:p,cachePool:null,transitions:null}}function iv(p,y,T){var R=y.pendingProps,q=Gn.current,K=!1,de=(y.flags&128)!==0,De;if((De=de)||(De=p!==null&&p.memoizedState===null?!1:(q&2)!==0),De?(K=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(q|=1),gn(Gn,q&1),p===null)return Yp(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:p.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(de=R.children,p=R.fallback,K?(R=y.mode,K=y.child,de={mode:"hidden",children:de},(R&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=de):K=cm(de,R,0,null),p=sh(p,R,T,null),K.return=y,p.return=y,K.sibling=p,y.child=K,y.child.memoizedState=Af(T),y.memoizedState=Yc,p):av(y,de));if(q=p.memoizedState,q!==null&&(De=q.dehydrated,De!==null))return p1(p,y,de,R,De,q,T);if(K){K=R.fallback,de=y.mode,q=p.child,De=q.sibling;var qe={mode:"hidden",children:R.children};return(de&1)===0&&y.child!==q?(R=y.child,R.childLanes=0,R.pendingProps=qe,y.deletions=null):(R=sc(q,qe),R.subtreeFlags=q.subtreeFlags&14680064),De!==null?K=sc(De,K):(K=sh(K,de,T,null),K.flags|=2),K.return=y,R.return=y,R.sibling=K,y.child=R,R=K,K=y.child,de=p.child.memoizedState,de=de===null?Af(T):{baseLanes:de.baseLanes|T,cachePool:null,transitions:de.transitions},K.memoizedState=de,K.childLanes=p.childLanes&~T,y.memoizedState=Yc,R}return K=p.child,p=K.sibling,R=sc(K,{mode:"visible",children:R.children}),(y.mode&1)===0&&(R.lanes=T),R.return=y,R.sibling=null,p!==null&&(T=y.deletions,T===null?(y.deletions=[p],y.flags|=16):T.push(p)),y.child=R,y.memoizedState=null,R}function av(p,y){return y=cm({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function If(p,y,T,R){return R!==null&&wf(R),Hc(y,p.child,null,T),p=av(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function p1(p,y,T,R,q,K,de){if(T)return y.flags&256?(y.flags&=-257,R=fl(Error(r(422))),If(p,y,de,R)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(K=R.fallback,q=y.mode,R=cm({mode:"visible",children:R.children},q,0,null),K=sh(K,q,de,null),K.flags|=2,R.return=y,K.return=y,R.sibling=K,y.child=R,(y.mode&1)!==0&&Hc(y,p.child,null,de),y.child.memoizedState=Af(de),y.memoizedState=Yc,K);if((y.mode&1)===0)return If(p,y,de,null);if(q.data==="$!"){if(R=q.nextSibling&&q.nextSibling.dataset,R)var De=R.dgst;return R=De,K=Error(r(419)),R=fl(K,R,void 0),If(p,y,de,R)}if(De=(de&p.childLanes)!==0,Ba||De){if(R=Sa,R!==null){switch(de&-de){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(R.suspendedLanes|de))!==0?0:q,q!==0&&q!==K.retryLane&&(K.retryLane=q,$o(p,q),vl(R,p,q,-1))}return gv(),R=fl(Error(r(421))),If(p,y,de,R)}return q.data==="$?"?(y.flags|=128,y.child=p.child,y=_1.bind(null,p),q._reactRetry=y,null):(p=K.treeContext,ma=ol(q.nextSibling),pa=y,Kn=!0,Na=null,p!==null&&(Fo[Bo++]=no,Fo[Bo++]=Ui,Fo[Bo++]=Vo,no=p.id,Ui=p.overflow,Vo=y),y=av(y,R.children),y.flags|=4096,y)}function wg(p,y,T){p.lanes|=y;var R=p.alternate;R!==null&&(R.lanes|=y),Eo(p.return,y,T)}function Sg(p,y,T,R,q){var K=p.memoizedState;K===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:R,tail:T,tailMode:q}:(K.isBackwards=y,K.rendering=null,K.renderingStartTime=0,K.last=R,K.tail=T,K.tailMode=q)}function ov(p,y,T){var R=y.pendingProps,q=R.revealOrder,K=R.tail;if(ba(p,y,R.children,T),R=Gn.current,(R&2)!==0)R=R&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&wg(p,T,y);else if(p.tag===19)wg(p,T,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}R&=1}if(gn(Gn,R),(y.mode&1)===0)y.memoizedState=null;else switch(q){case"forwards":for(T=y.child,q=null;T!==null;)p=T.alternate,p!==null&&Qu(p)===null&&(q=T),T=T.sibling;T=q,T===null?(q=y.child,y.child=null):(q=T.sibling,T.sibling=null),Sg(y,!1,q,T,K);break;case"backwards":for(T=null,q=y.child,y.child=null;q!==null;){if(p=q.alternate,p!==null&&Qu(p)===null){y.child=q;break}p=q.sibling,q.sibling=T,T=q,q=p}Sg(y,!0,T,null,K);break;case"together":Sg(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function rc(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function nc(p,y,T){if(p!==null&&(y.dependencies=p.dependencies),Jc|=y.lanes,(T&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(r(153));if(y.child!==null){for(p=y.child,T=sc(p,p.pendingProps),y.child=T,T.return=y;p.sibling!==null;)p=p.sibling,T=T.sibling=sc(p,p.pendingProps),T.return=y;T.sibling=null}return y.child}function Of(p,y,T){switch(y.tag){case 3:kf(y),Yl();break;case 5:zs(y);break;case 1:xa(y.type)&&ls(y);break;case 4:Jh(y,y.stateNode.containerInfo);break;case 10:var R=y.type._context,q=y.memoizedProps.value;gn(Zu,R._currentValue),R._currentValue=q;break;case 13:if(R=y.memoizedState,R!==null)return R.dehydrated!==null?(gn(Gn,Gn.current&1),y.flags|=128,null):(T&y.child.childLanes)!==0?iv(p,y,T):(gn(Gn,Gn.current&1),p=nc(p,y,T),p!==null?p.sibling:null);gn(Gn,Gn.current&1);break;case 19:if(R=(T&y.childLanes)!==0,(p.flags&128)!==0){if(R)return ov(p,y,T);y.flags|=128}if(q=y.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),gn(Gn,Gn.current),R)break;return null;case 22:case 23:return y.lanes=0,Mf(p,y,T)}return nc(p,y,T)}var tm,Lf,u0,c0;tm=function(p,y){for(var T=y.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===y)break;for(;T.sibling===null;){if(T.return===null||T.return===y)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},Lf=function(){},u0=function(p,y,T,R){var q=p.memoizedProps;if(q!==R){p=y.stateNode,Rs(ao.current);var K=null;switch(T){case"input":q=Tr(p,q),R=Tr(p,R),K=[];break;case"select":q=yt({},q,{value:void 0}),R=yt({},R,{value:void 0}),K=[];break;case"textarea":q=bt(p,q),R=bt(p,R),K=[];break;default:typeof q.onClick!="function"&&typeof R.onClick=="function"&&(p.onclick=ff)}At(T,R);var de;T=null;for(vt in q)if(!R.hasOwnProperty(vt)&&q.hasOwnProperty(vt)&&q[vt]!=null)if(vt==="style"){var De=q[vt];for(de in De)De.hasOwnProperty(de)&&(T||(T={}),T[de]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(u.hasOwnProperty(vt)?K||(K=[]):(K=K||[]).push(vt,null));for(vt in R){var qe=R[vt];if(De=q!=null?q[vt]:void 0,R.hasOwnProperty(vt)&&qe!==De&&(qe!=null||De!=null))if(vt==="style")if(De){for(de in De)!De.hasOwnProperty(de)||qe&&qe.hasOwnProperty(de)||(T||(T={}),T[de]="");for(de in qe)qe.hasOwnProperty(de)&&De[de]!==qe[de]&&(T||(T={}),T[de]=qe[de])}else T||(K||(K=[]),K.push(vt,T)),T=qe;else vt==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,De=De?De.__html:void 0,qe!=null&&De!==qe&&(K=K||[]).push(vt,qe)):vt==="children"?typeof qe!="string"&&typeof qe!="number"||(K=K||[]).push(vt,""+qe):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(u.hasOwnProperty(vt)?(qe!=null&&vt==="onScroll"&&ai("scroll",p),K||De===qe||(K=[])):(K=K||[]).push(vt,qe))}T&&(K=K||[]).push("style",T);var vt=K;(y.updateQueue=vt)&&(y.flags|=4)}},c0=function(p,y,T,R){T!==R&&(y.flags|=4)};function rm(p,y){if(!Kn)switch(p.tailMode){case"hidden":y=p.tail;for(var T=null;y!==null;)y.alternate!==null&&(T=y),y=y.sibling;T===null?p.tail=null:T.sibling=null;break;case"collapsed":T=p.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:R.sibling=null}}function so(p){var y=p.alternate!==null&&p.alternate.child===p.child,T=0,R=0;if(y)for(var q=p.child;q!==null;)T|=q.lanes|q.childLanes,R|=q.subtreeFlags&14680064,R|=q.flags&14680064,q.return=p,q=q.sibling;else for(q=p.child;q!==null;)T|=q.lanes|q.childLanes,R|=q.subtreeFlags,R|=q.flags,q.return=p,q=q.sibling;return p.subtreeFlags|=R,p.childLanes=T,y}function m1(p,y,T){var R=y.pendingProps;switch(Kl(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(y),null;case 1:return xa(y.type)&&Wh(),so(y),null;case 3:return R=y.stateNode,js(),Zn(ra),Zn(ta),ed(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(p===null||p.child===null)&&(Wu(y)?y.flags|=4:p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Na!==null&&(kg(Na),Na=null))),Lf(p,y),so(y),null;case 5:Xc(y);var q=Rs(Yu.current);if(T=y.type,p!==null&&y.stateNode!=null)u0(p,y,T,R,q),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!R){if(y.stateNode===null)throw Error(r(166));return so(y),null}if(p=Rs(ao.current),Wu(y)){R=y.stateNode,T=y.type;var K=y.memoizedProps;switch(R[_a]=y,R[fa]=K,p=(y.mode&1)!==0,T){case"dialog":ai("cancel",R),ai("close",R);break;case"iframe":case"object":case"embed":ai("load",R);break;case"video":case"audio":for(q=0;q<$h.length;q++)ai($h[q],R);break;case"source":ai("error",R);break;case"img":case"image":case"link":ai("error",R),ai("load",R);break;case"details":ai("toggle",R);break;case"input":wr(R,K),ai("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!K.multiple},ai("invalid",R);break;case"textarea":rr(R,K),ai("invalid",R)}At(T,K),q=null;for(var de in K)if(K.hasOwnProperty(de)){var De=K[de];de==="children"?typeof De=="string"?R.textContent!==De&&(K.suppressHydrationWarning!==!0&&Gc(R.textContent,De,p),q=["children",De]):typeof De=="number"&&R.textContent!==""+De&&(K.suppressHydrationWarning!==!0&&Gc(R.textContent,De,p),q=["children",""+De]):u.hasOwnProperty(de)&&De!=null&&de==="onScroll"&&ai("scroll",R)}switch(T){case"input":ir(R),Xi(R,K,!0);break;case"textarea":ir(R),zt(R);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(R.onclick=ff)}R=q,y.updateQueue=R,R!==null&&(y.flags|=4)}else{de=q.nodeType===9?q:q.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=ze(T)),p==="http://www.w3.org/1999/xhtml"?T==="script"?(p=de.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof R.is=="string"?p=de.createElement(T,{is:R.is}):(p=de.createElement(T),T==="select"&&(de=p,R.multiple?de.multiple=!0:R.size&&(de.size=R.size))):p=de.createElementNS(p,T),p[_a]=y,p[fa]=R,tm(p,y,!1,!1),y.stateNode=p;e:{switch(de=Pt(T,R),T){case"dialog":ai("cancel",p),ai("close",p),q=R;break;case"iframe":case"object":case"embed":ai("load",p),q=R;break;case"video":case"audio":for(q=0;q<$h.length;q++)ai($h[q],p);q=R;break;case"source":ai("error",p),q=R;break;case"img":case"image":case"link":ai("error",p),ai("load",p),q=R;break;case"details":ai("toggle",p),q=R;break;case"input":wr(p,R),q=Tr(p,R),ai("invalid",p);break;case"option":q=R;break;case"select":p._wrapperState={wasMultiple:!!R.multiple},q=yt({},R,{value:void 0}),ai("invalid",p);break;case"textarea":rr(p,R),q=bt(p,R),ai("invalid",p);break;default:q=R}At(T,q),De=q;for(K in De)if(De.hasOwnProperty(K)){var qe=De[K];K==="style"?Ve(p,qe):K==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,qe!=null&&pe(p,qe)):K==="children"?typeof qe=="string"?(T!=="textarea"||qe!=="")&&Me(p,qe):typeof qe=="number"&&Me(p,""+qe):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(u.hasOwnProperty(K)?qe!=null&&K==="onScroll"&&ai("scroll",p):qe!=null&&te(p,K,qe,de))}switch(T){case"input":ir(p),Xi(p,R,!1);break;case"textarea":ir(p),zt(p);break;case"option":R.value!=null&&p.setAttribute("value",""+$t(R.value));break;case"select":p.multiple=!!R.multiple,K=R.value,K!=null?rt(p,!!R.multiple,K,!1):R.defaultValue!=null&&rt(p,!!R.multiple,R.defaultValue,!0);break;default:typeof q.onClick=="function"&&(p.onclick=ff)}switch(T){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return so(y),null;case 6:if(p&&y.stateNode!=null)c0(p,y,p.memoizedProps,R);else{if(typeof R!="string"&&y.stateNode===null)throw Error(r(166));if(T=Rs(Yu.current),Rs(ao.current),Wu(y)){if(R=y.stateNode,T=y.memoizedProps,R[_a]=y,(K=R.nodeValue!==T)&&(p=pa,p!==null))switch(p.tag){case 3:Gc(R.nodeValue,T,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Gc(R.nodeValue,T,(p.mode&1)!==0)}K&&(y.flags|=4)}else R=(T.nodeType===9?T:T.ownerDocument).createTextNode(R),R[_a]=y,y.stateNode=R}return so(y),null;case 13:if(Zn(Gn),R=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Kn&&ma!==null&&(y.mode&1)!==0&&(y.flags&128)===0)Qp(),Yl(),y.flags|=98560,K=!1;else if(K=Wu(y),R!==null&&R.dehydrated!==null){if(p===null){if(!K)throw Error(r(318));if(K=y.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(r(317));K[_a]=y}else Yl(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;so(y),K=!1}else Na!==null&&(kg(Na),Na=null),K=!0;if(!K)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=T,y):(R=R!==null,R!==(p!==null&&p.memoizedState!==null)&&R&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(Gn.current&1)!==0?Wi===0&&(Wi=3):gv())),y.updateQueue!==null&&(y.flags|=4),so(y),null);case 4:return js(),Lf(p,y),p===null&&Fu(y.stateNode.containerInfo),so(y),null;case 10:return Ef(y.type._context),so(y),null;case 17:return xa(y.type)&&Wh(),so(y),null;case 19:if(Zn(Gn),K=y.memoizedState,K===null)return so(y),null;if(R=(y.flags&128)!==0,de=K.rendering,de===null)if(R)rm(K,!1);else{if(Wi!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(de=Qu(p),de!==null){for(y.flags|=128,rm(K,!1),R=de.updateQueue,R!==null&&(y.updateQueue=R,y.flags|=4),y.subtreeFlags=0,R=T,T=y.child;T!==null;)K=T,p=R,K.flags&=14680066,de=K.alternate,de===null?(K.childLanes=0,K.lanes=p,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=de.childLanes,K.lanes=de.lanes,K.child=de.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=de.memoizedProps,K.memoizedState=de.memoizedState,K.updateQueue=de.updateQueue,K.type=de.type,p=de.dependencies,K.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),T=T.sibling;return gn(Gn,Gn.current&1|2),y.child}p=p.sibling}K.tail!==null&&bn()>ic&&(y.flags|=128,R=!0,rm(K,!1),y.lanes=4194304)}else{if(!R)if(p=Qu(de),p!==null){if(y.flags|=128,R=!0,T=p.updateQueue,T!==null&&(y.updateQueue=T,y.flags|=4),rm(K,!0),K.tail===null&&K.tailMode==="hidden"&&!de.alternate&&!Kn)return so(y),null}else 2*bn()-K.renderingStartTime>ic&&T!==1073741824&&(y.flags|=128,R=!0,rm(K,!1),y.lanes=4194304);K.isBackwards?(de.sibling=y.child,y.child=de):(T=K.last,T!==null?T.sibling=de:y.child=de,K.last=de)}return K.tail!==null?(y=K.tail,K.rendering=y,K.tail=y.sibling,K.renderingStartTime=bn(),y.sibling=null,T=Gn.current,gn(Gn,R?T&1|2:T&1),y):(so(y),null);case 22:case 23:return pv(),R=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==R&&(y.flags|=8192),R&&(y.mode&1)!==0?(fs&1073741824)!==0&&(so(y),y.subtreeFlags&6&&(y.flags|=8192)):so(y),null;case 24:return null;case 25:return null}throw Error(r(156,y.tag))}function h0(p,y){switch(Kl(y),y.tag){case 1:return xa(y.type)&&Wh(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return js(),Zn(ra),Zn(ta),ed(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return Xc(y),null;case 13:if(Zn(Gn),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Yl()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Zn(Gn),null;case 4:return js(),null;case 10:return Ef(y.type._context),null;case 22:case 23:return pv(),null;case 24:return null;default:return null}}var Df=!1,Va=!1,d0=typeof WeakSet=="function"?WeakSet:Set,yr=null;function Rf(p,y){var T=p.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(R){Pi(p,y,R)}else T.current=null}function Pg(p,y,T){try{T()}catch(R){Pi(p,y,R)}}var sv=!1;function g1(p,y){if($u=Tu,p=yg(),cn(p)){if("selectionStart"in p)var T={start:p.selectionStart,end:p.selectionEnd};else e:{T=(T=p.ownerDocument)&&T.defaultView||window;var R=T.getSelection&&T.getSelection();if(R&&R.rangeCount!==0){T=R.anchorNode;var q=R.anchorOffset,K=R.focusNode;R=R.focusOffset;try{T.nodeType,K.nodeType}catch{T=null;break e}var de=0,De=-1,qe=-1,vt=0,qt=0,Ht=p,Ut=null;t:for(;;){for(var pr;Ht!==T||q!==0&&Ht.nodeType!==3||(De=de+q),Ht!==K||R!==0&&Ht.nodeType!==3||(qe=de+R),Ht.nodeType===3&&(de+=Ht.nodeValue.length),(pr=Ht.firstChild)!==null;)Ut=Ht,Ht=pr;for(;;){if(Ht===p)break t;if(Ut===T&&++vt===q&&(De=de),Ut===K&&++qt===R&&(qe=de),(pr=Ht.nextSibling)!==null)break;Ht=Ut,Ut=Ht.parentNode}Ht=pr}T=De===-1||qe===-1?null:{start:De,end:qe}}else T=null}T=T||{start:0,end:0}}else T=null;for(Wp={focusedElem:p,selectionRange:T},Tu=!1,yr=y;yr!==null;)if(y=yr,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,yr=p;else for(;yr!==null;){y=yr;try{var xr=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(xr!==null){var Pr=xr.memoizedProps,Ei=xr.memoizedState,lt=y.stateNode,He=lt.getSnapshotBeforeUpdate(y.elementType===y.type?Pr:_n(y.type,Pr),Ei);lt.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var ft=y.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Qt){Pi(y,y.return,Qt)}if(p=y.sibling,p!==null){p.return=y.return,yr=p;break}yr=y.return}return xr=sv,sv=!1,xr}function nd(p,y,T){var R=y.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var q=R=R.next;do{if((q.tag&p)===p){var K=q.destroy;q.destroy=void 0,K!==void 0&&Pg(y,T,K)}q=q.next}while(q!==R)}}function nm(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&p)===p){var R=T.create;T.destroy=R()}T=T.next}while(T!==y)}}function im(p){var y=p.ref;if(y!==null){var T=p.stateNode;switch(p.tag){case 5:p=T;break;default:p=T}typeof y=="function"?y(p):y.current=p}}function jf(p){var y=p.alternate;y!==null&&(p.alternate=null,jf(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&(delete y[_a],delete y[fa],delete y[qu],delete y[gf],delete y[Gl])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function lo(p){return p.tag===5||p.tag===3||p.tag===4}function lv(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||lo(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function am(p,y,T){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?T.nodeType===8?T.parentNode.insertBefore(p,y):T.insertBefore(p,y):(T.nodeType===8?(y=T.parentNode,y.insertBefore(p,T)):(y=T,y.appendChild(p)),T=T._reactRootContainer,T!=null||y.onclick!==null||(y.onclick=ff));else if(R!==4&&(p=p.child,p!==null))for(am(p,y,T),p=p.sibling;p!==null;)am(p,y,T),p=p.sibling}function uv(p,y,T){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?T.insertBefore(p,y):T.appendChild(p);else if(R!==4&&(p=p.child,p!==null))for(uv(p,y,T),p=p.sibling;p!==null;)uv(p,y,T),p=p.sibling}var wa=null,gl=!1;function Qc(p,y,T){for(T=T.child;T!==null;)cv(p,y,T),T=T.sibling}function cv(p,y,T){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(So,T)}catch{}switch(T.tag){case 5:Va||Rf(T,y);case 6:var R=wa,q=gl;wa=null,Qc(p,y,T),wa=R,gl=q,wa!==null&&(gl?(p=wa,T=T.stateNode,p.nodeType===8?p.parentNode.removeChild(T):p.removeChild(T)):wa.removeChild(T.stateNode));break;case 18:wa!==null&&(gl?(p=wa,T=T.stateNode,p.nodeType===8?Wc(p.parentNode,T):p.nodeType===1&&Wc(p,T),Jo(p)):Wc(wa,T.stateNode));break;case 4:R=wa,q=gl,wa=T.stateNode.containerInfo,gl=!0,Qc(p,y,T),wa=R,gl=q;break;case 0:case 11:case 14:case 15:if(!Va&&(R=T.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){q=R=R.next;do{var K=q,de=K.destroy;K=K.tag,de!==void 0&&((K&2)!==0||(K&4)!==0)&&Pg(T,y,de),q=q.next}while(q!==R)}Qc(p,y,T);break;case 1:if(!Va&&(Rf(T,y),R=T.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=T.memoizedProps,R.state=T.memoizedState,R.componentWillUnmount()}catch(De){Pi(T,y,De)}Qc(p,y,T);break;case 21:Qc(p,y,T);break;case 22:T.mode&1?(Va=(R=Va)||T.memoizedState!==null,Qc(p,y,T),Va=R):Qc(p,y,T);break;default:Qc(p,y,T)}}function f0(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var T=p.stateNode;T===null&&(T=p.stateNode=new d0),y.forEach(function(R){var q=um.bind(null,p,R);T.has(R)||(T.add(R),R.then(q,q))})}}function ds(p,y){var T=y.deletions;if(T!==null)for(var R=0;R<T.length;R++){var q=T[R];try{var K=p,de=y,De=de;e:for(;De!==null;){switch(De.tag){case 5:wa=De.stateNode,gl=!1;break e;case 3:wa=De.stateNode.containerInfo,gl=!0;break e;case 4:wa=De.stateNode.containerInfo,gl=!0;break e}De=De.return}if(wa===null)throw Error(r(160));cv(K,de,q),wa=null,gl=!1;var qe=q.alternate;qe!==null&&(qe.return=null),q.return=null}catch(vt){Pi(q,y,vt)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)hv(y,p),y=y.sibling}function hv(p,y){var T=p.alternate,R=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ds(y,p),yl(p),R&4){try{nd(3,p,p.return),nm(3,p)}catch(Pr){Pi(p,p.return,Pr)}try{nd(5,p,p.return)}catch(Pr){Pi(p,p.return,Pr)}}break;case 1:ds(y,p),yl(p),R&512&&T!==null&&Rf(T,T.return);break;case 5:if(ds(y,p),yl(p),R&512&&T!==null&&Rf(T,T.return),p.flags&32){var q=p.stateNode;try{Me(q,"")}catch(Pr){Pi(p,p.return,Pr)}}if(R&4&&(q=p.stateNode,q!=null)){var K=p.memoizedProps,de=T!==null?T.memoizedProps:K,De=p.type,qe=p.updateQueue;if(p.updateQueue=null,qe!==null)try{De==="input"&&K.type==="radio"&&K.name!=null&&tn(q,K),Pt(De,de);var vt=Pt(De,K);for(de=0;de<qe.length;de+=2){var qt=qe[de],Ht=qe[de+1];qt==="style"?Ve(q,Ht):qt==="dangerouslySetInnerHTML"?pe(q,Ht):qt==="children"?Me(q,Ht):te(q,qt,Ht,vt)}switch(De){case"input":Wr(q,K);break;case"textarea":Wt(q,K);break;case"select":var Ut=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!K.multiple;var pr=K.value;pr!=null?rt(q,!!K.multiple,pr,!1):Ut!==!!K.multiple&&(K.defaultValue!=null?rt(q,!!K.multiple,K.defaultValue,!0):rt(q,!!K.multiple,K.multiple?[]:"",!1))}q[fa]=K}catch(Pr){Pi(p,p.return,Pr)}}break;case 6:if(ds(y,p),yl(p),R&4){if(p.stateNode===null)throw Error(r(162));q=p.stateNode,K=p.memoizedProps;try{q.nodeValue=K}catch(Pr){Pi(p,p.return,Pr)}}break;case 3:if(ds(y,p),yl(p),R&4&&T!==null&&T.memoizedState.isDehydrated)try{Jo(y.containerInfo)}catch(Pr){Pi(p,p.return,Pr)}break;case 4:ds(y,p),yl(p);break;case 13:ds(y,p),yl(p),q=p.child,q.flags&8192&&(K=q.memoizedState!==null,q.stateNode.isHidden=K,!K||q.alternate!==null&&q.alternate.memoizedState!==null||(Cg=bn())),R&4&&f0(p);break;case 22:if(qt=T!==null&&T.memoizedState!==null,p.mode&1?(Va=(vt=Va)||qt,ds(y,p),Va=vt):ds(y,p),yl(p),R&8192){if(vt=p.memoizedState!==null,(p.stateNode.isHidden=vt)&&!qt&&(p.mode&1)!==0)for(yr=p,qt=p.child;qt!==null;){for(Ht=yr=qt;yr!==null;){switch(Ut=yr,pr=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:nd(4,Ut,Ut.return);break;case 1:Rf(Ut,Ut.return);var xr=Ut.stateNode;if(typeof xr.componentWillUnmount=="function"){R=Ut,T=Ut.return;try{y=R,xr.props=y.memoizedProps,xr.state=y.memoizedState,xr.componentWillUnmount()}catch(Pr){Pi(R,T,Pr)}}break;case 5:Rf(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){om(Ht);continue}}pr!==null?(pr.return=Ut,yr=pr):om(Ht)}qt=qt.sibling}e:for(qt=null,Ht=p;;){if(Ht.tag===5){if(qt===null){qt=Ht;try{q=Ht.stateNode,vt?(K=q.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(De=Ht.stateNode,qe=Ht.memoizedProps.style,de=qe!=null&&qe.hasOwnProperty("display")?qe.display:null,De.style.display=Ze("display",de))}catch(Pr){Pi(p,p.return,Pr)}}}else if(Ht.tag===6){if(qt===null)try{Ht.stateNode.nodeValue=vt?"":Ht.memoizedProps}catch(Pr){Pi(p,p.return,Pr)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===p)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===p)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===p)break e;qt===Ht&&(qt=null),Ht=Ht.return}qt===Ht&&(qt=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:ds(y,p),yl(p),R&4&&f0(p);break;case 21:break;default:ds(y,p),yl(p)}}function yl(p){var y=p.flags;if(y&2){try{e:{for(var T=p.return;T!==null;){if(lo(T)){var R=T;break e}T=T.return}throw Error(r(160))}switch(R.tag){case 5:var q=R.stateNode;R.flags&32&&(Me(q,""),R.flags&=-33);var K=lv(p);uv(p,K,q);break;case 3:case 4:var de=R.stateNode.containerInfo,De=lv(p);am(p,De,de);break;default:throw Error(r(161))}}catch(qe){Pi(p,p.return,qe)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function y1(p,y,T){yr=p,p0(p)}function p0(p,y,T){for(var R=(p.mode&1)!==0;yr!==null;){var q=yr,K=q.child;if(q.tag===22&&R){var de=q.memoizedState!==null||Df;if(!de){var De=q.alternate,qe=De!==null&&De.memoizedState!==null||Va;De=Df;var vt=Va;if(Df=de,(Va=qe)&&!vt)for(yr=q;yr!==null;)de=yr,qe=de.child,de.tag===22&&de.memoizedState!==null?Eg(q):qe!==null?(qe.return=de,yr=qe):Eg(q);for(;K!==null;)yr=K,p0(K),K=K.sibling;yr=q,Df=De,Va=vt}m0(p)}else(q.subtreeFlags&8772)!==0&&K!==null?(K.return=q,yr=K):m0(p)}}function m0(p){for(;yr!==null;){var y=yr;if((y.flags&8772)!==0){var T=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Va||nm(5,y);break;case 1:var R=y.stateNode;if(y.flags&4&&!Va)if(T===null)R.componentDidMount();else{var q=y.elementType===y.type?T.memoizedProps:_n(y.type,T.memoizedProps);R.componentDidUpdate(q,T.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var K=y.updateQueue;K!==null&&gi(y,K,R);break;case 3:var de=y.updateQueue;if(de!==null){if(T=null,y.child!==null)switch(y.child.tag){case 5:T=y.child.stateNode;break;case 1:T=y.child.stateNode}gi(y,de,T)}break;case 5:var De=y.stateNode;if(T===null&&y.flags&4){T=De;var qe=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":qe.autoFocus&&T.focus();break;case"img":qe.src&&(T.src=qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var vt=y.alternate;if(vt!==null){var qt=vt.memoizedState;if(qt!==null){var Ht=qt.dehydrated;Ht!==null&&Jo(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Va||y.flags&512&&im(y)}catch(Ut){Pi(y,y.return,Ut)}}if(y===p){yr=null;break}if(T=y.sibling,T!==null){T.return=y.return,yr=T;break}yr=y.return}}function om(p){for(;yr!==null;){var y=yr;if(y===p){yr=null;break}var T=y.sibling;if(T!==null){T.return=y.return,yr=T;break}yr=y.return}}function Eg(p){for(;yr!==null;){var y=yr;try{switch(y.tag){case 0:case 11:case 15:var T=y.return;try{nm(4,y)}catch(qe){Pi(y,T,qe)}break;case 1:var R=y.stateNode;if(typeof R.componentDidMount=="function"){var q=y.return;try{R.componentDidMount()}catch(qe){Pi(y,q,qe)}}var K=y.return;try{im(y)}catch(qe){Pi(y,K,qe)}break;case 5:var de=y.return;try{im(y)}catch(qe){Pi(y,de,qe)}}}catch(qe){Pi(y,y.return,qe)}if(y===p){yr=null;break}var De=y.sibling;if(De!==null){De.return=y.return,yr=De;break}yr=y.return}}var g0=Math.ceil,nu=ie.ReactCurrentDispatcher,id=ie.ReactCurrentOwner,$s=ie.ReactCurrentBatchConfig,Pn=0,Sa=null,ia=null,$a=0,fs=0,zf=sl(0),Wi=0,sm=null,Jc=0,eh=0,dv=0,li=null,ga=null,Cg=0,ic=1/0,Us=null,th=!1,Tg=null,ac=null,rh=!1,iu=null,oc=0,nh=0,ih=null,ah=-1,Mg=0;function uo(){return(Pn&6)!==0?bn():ah!==-1?ah:ah=bn()}function Go(p){return(p.mode&1)===0?1:(Pn&2)!==0&&$a!==0?$a&-$a:Jp.transition!==null?(Mg===0&&(Mg=Gd()),Mg):(p=mn,p!==0||(p=window.event,p=p===void 0?16:zl(p.type)),p)}function vl(p,y,T,R){if(50<nh)throw nh=0,ih=null,Error(r(185));Eu(p,T,R),((Pn&2)===0||p!==Sa)&&(p===Sa&&((Pn&2)===0&&(eh|=T),Wi===4&&oh(p,$a)),Co(p,R),T===1&&Pn===0&&(y.mode&1)===0&&(ic=bn()+500,ro&&No()))}function Co(p,y){var T=p.callbackNode;lg(p,y);var R=Ph(p,p===Sa?$a:0);if(R===0)T!==null&&vn(T),p.callbackNode=null,p.callbackPriority=0;else if(y=R&-R,p.callbackPriority!==y){if(T!=null&&vn(T),y===1)p.tag===0?nv(v0.bind(null,p)):zo(v0.bind(null,p)),xg(function(){(Pn&6)===0&&No()}),T=null;else{switch(Ch(R)){case 1:T=Yi;break;case 4:T=Oi;break;case 16:T=Qr;break;case 536870912:T=Oo;break;default:T=Qr}T=E0(T,Nf.bind(null,p))}p.callbackPriority=y,p.callbackNode=T}}function Nf(p,y){if(ah=-1,Mg=0,(Pn&6)!==0)throw Error(r(327));var T=p.callbackNode;if(Ff()&&p.callbackNode!==T)return null;var R=Ph(p,p===Sa?$a:0);if(R===0)return null;if((R&30)!==0||(R&p.expiredLanes)!==0||y)y=Ag(p,R);else{y=R;var q=Pn;Pn|=2;var K=mv();(Sa!==p||$a!==y)&&(Us=null,ic=bn()+500,_l(p,y));do try{x0();break}catch(De){_0(p,De)}while(!0);Pf(),nu.current=K,Pn=q,ia!==null?y=0:(Sa=null,$a=0,y=Wi)}if(y!==0){if(y===2&&(q=Ac(p),q!==0&&(R=q,y=lm(p,q))),y===1)throw T=sm,_l(p,0),oh(p,R),Co(p,bn()),T;if(y===6)oh(p,R);else{if(q=p.current.alternate,(R&30)===0&&!y0(q)&&(y=Ag(p,R),y===2&&(K=Ac(p),K!==0&&(R=K,y=lm(p,K))),y===1))throw T=sm,_l(p,0),oh(p,R),Co(p,bn()),T;switch(p.finishedWork=q,p.finishedLanes=R,y){case 0:case 1:throw Error(r(345));case 2:xl(p,ga,Us);break;case 3:if(oh(p,R),(R&130023424)===R&&(y=Cg+500-bn(),10<y)){if(Ph(p,0)!==0)break;if(q=p.suspendedLanes,(q&R)!==R){uo(),p.pingedLanes|=p.suspendedLanes&q;break}p.timeoutHandle=Uu(xl.bind(null,p,ga,Us),y);break}xl(p,ga,Us);break;case 4:if(oh(p,R),(R&4194240)===R)break;for(y=p.eventTimes,q=-1;0<R;){var de=31-$i(R);K=1<<de,de=y[de],de>q&&(q=de),R&=~K}if(R=q,R=bn()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*g0(R/1960))-R,10<R){p.timeoutHandle=Uu(xl.bind(null,p,ga,Us),R);break}xl(p,ga,Us);break;case 5:xl(p,ga,Us);break;default:throw Error(r(329))}}}return Co(p,bn()),p.callbackNode===T?Nf.bind(null,p):null}function lm(p,y){var T=li;return p.current.memoizedState.isDehydrated&&(_l(p,y).flags|=256),p=Ag(p,y),p!==2&&(y=ga,ga=T,y!==null&&kg(y)),p}function kg(p){ga===null?ga=p:ga.push.apply(ga,p)}function y0(p){for(var y=p;;){if(y.flags&16384){var T=y.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var R=0;R<T.length;R++){var q=T[R],K=q.getSnapshot;q=q.value;try{if(!ns(K(),q))return!1}catch{return!1}}}if(T=y.child,y.subtreeFlags&16384&&T!==null)T.return=y,y=T;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function oh(p,y){for(y&=~dv,y&=~eh,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var T=31-$i(y),R=1<<T;p[T]=-1,y&=~R}}function v0(p){if((Pn&6)!==0)throw Error(r(327));Ff();var y=Ph(p,0);if((y&1)===0)return Co(p,bn()),null;var T=Ag(p,y);if(p.tag!==0&&T===2){var R=Ac(p);R!==0&&(y=R,T=lm(p,R))}if(T===1)throw T=sm,_l(p,0),oh(p,y),Co(p,bn()),T;if(T===6)throw Error(r(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,xl(p,ga,Us),Co(p,bn()),null}function fv(p,y){var T=Pn;Pn|=1;try{return p(y)}finally{Pn=T,Pn===0&&(ic=bn()+500,ro&&No())}}function ad(p){iu!==null&&iu.tag===0&&(Pn&6)===0&&Ff();var y=Pn;Pn|=1;var T=$s.transition,R=mn;try{if($s.transition=null,mn=1,p)return p()}finally{mn=R,$s.transition=T,Pn=y,(Pn&6)===0&&No()}}function pv(){fs=zf.current,Zn(zf)}function _l(p,y){p.finishedWork=null,p.finishedLanes=0;var T=p.timeoutHandle;if(T!==-1&&(p.timeoutHandle=-1,mf(T)),ia!==null)for(T=ia.return;T!==null;){var R=T;switch(Kl(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&Wh();break;case 3:js(),Zn(ra),Zn(ta),ed();break;case 5:Xc(R);break;case 4:js();break;case 13:Zn(Gn);break;case 19:Zn(Gn);break;case 10:Ef(R.type._context);break;case 22:case 23:pv()}T=T.return}if(Sa=p,ia=p=sc(p.current,null),$a=fs=y,Wi=0,sm=null,dv=eh=Jc=0,ga=li=null,gr!==null){for(y=0;y<gr.length;y++)if(T=gr[y],R=T.interleaved,R!==null){T.interleaved=null;var q=R.next,K=T.pending;if(K!==null){var de=K.next;K.next=q,R.next=de}T.pending=R}gr=null}return p}function _0(p,y){do{var T=ia;try{if(Pf(),ul.current=Qn,ec){for(var R=Wn.memoizedState;R!==null;){var q=R.queue;q!==null&&(q.pending=null),R=R.next}ec=!1}if(hl=0,ji=oi=Wn=null,tu=!1,tc=0,id.current=null,T===null||T.return===null){Wi=1,sm=y,ia=null;break}e:{var K=p,de=T.return,De=T,qe=y;if(y=$a,De.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var vt=qe,qt=De,Ht=qt.tag;if((qt.mode&1)===0&&(Ht===0||Ht===11||Ht===15)){var Ut=qt.alternate;Ut?(qt.updateQueue=Ut.updateQueue,qt.memoizedState=Ut.memoizedState,qt.lanes=Ut.lanes):(qt.updateQueue=null,qt.memoizedState=null)}var pr=Dn(de);if(pr!==null){pr.flags&=-257,zi(pr,de,De,K,y),pr.mode&1&&zn(K,vt,y),y=pr,qe=vt;var xr=y.updateQueue;if(xr===null){var Pr=new Set;Pr.add(qe),y.updateQueue=Pr}else xr.add(qe);break e}else{if((y&1)===0){zn(K,vt,y),gv();break e}qe=Error(r(426))}}else if(Kn&&De.mode&1){var Ei=Dn(de);if(Ei!==null){(Ei.flags&65536)===0&&(Ei.flags|=256),zi(Ei,de,De,K,y),wf(Fs(qe,De));break e}}K=qe=Fs(qe,De),Wi!==4&&(Wi=2),li===null?li=[K]:li.push(K),K=de;do{switch(K.tag){case 3:K.flags|=65536,y&=-y,K.lanes|=y;var lt=Uo(K,qe,y);Kc(K,lt);break e;case 1:De=qe;var He=K.type,ft=K.stateNode;if((K.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(ac===null||!ac.has(ft)))){K.flags|=65536,y&=-y,K.lanes|=y;var Qt=qo(K,De,y);Kc(K,Qt);break e}}K=K.return}while(K!==null)}Ig(T)}catch(kr){y=kr,ia===T&&T!==null&&(ia=T=T.return);continue}break}while(!0)}function mv(){var p=nu.current;return nu.current=Qn,p===null?Qn:p}function gv(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),Sa===null||(Jc&268435455)===0&&(eh&268435455)===0||oh(Sa,$a)}function Ag(p,y){var T=Pn;Pn|=2;var R=mv();(Sa!==p||$a!==y)&&(Us=null,_l(p,y));do try{v1();break}catch(q){_0(p,q)}while(!0);if(Pf(),Pn=T,nu.current=R,ia!==null)throw Error(r(261));return Sa=null,$a=0,Wi}function v1(){for(;ia!==null;)b0(ia)}function x0(){for(;ia!==null&&!Tn();)b0(ia)}function b0(p){var y=vv(p.alternate,p,fs);p.memoizedProps=p.pendingProps,y===null?Ig(p):ia=y,id.current=null}function Ig(p){var y=p;do{var T=y.alternate;if(p=y.return,(y.flags&32768)===0){if(T=m1(T,y,fs),T!==null){ia=T;return}}else{if(T=h0(T,y),T!==null){T.flags&=32767,ia=T;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Wi=6,ia=null;return}}if(y=y.sibling,y!==null){ia=y;return}ia=y=p}while(y!==null);Wi===0&&(Wi=5)}function xl(p,y,T){var R=mn,q=$s.transition;try{$s.transition=null,mn=1,yv(p,y,T,R)}finally{$s.transition=q,mn=R}return null}function yv(p,y,T,R){do Ff();while(iu!==null);if((Pn&6)!==0)throw Error(r(327));T=p.finishedWork;var q=p.finishedLanes;if(T===null)return null;if(p.finishedWork=null,p.finishedLanes=0,T===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0;var K=T.lanes|T.childLanes;if(Mp(p,K),p===Sa&&(ia=Sa=null,$a=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||rh||(rh=!0,E0(Qr,function(){return Ff(),null})),K=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||K){K=$s.transition,$s.transition=null;var de=mn;mn=1;var De=Pn;Pn|=4,id.current=null,g1(p,T),hv(T,p),nf(Wp),Tu=!!$u,Wp=$u=null,p.current=T,y1(T),Ja(),Pn=De,mn=de,$s.transition=K}else p.current=T;if(rh&&(rh=!1,iu=p,oc=q),K=p.pendingLanes,K===0&&(ac=null),Rn(T.stateNode),Co(p,bn()),y!==null)for(R=p.onRecoverableError,T=0;T<y.length;T++)q=y[T],R(q.value,{componentStack:q.stack,digest:q.digest});if(th)throw th=!1,p=Tg,Tg=null,p;return(oc&1)!==0&&p.tag!==0&&Ff(),K=p.pendingLanes,(K&1)!==0?p===ih?nh++:(nh=0,ih=p):nh=0,No(),null}function Ff(){if(iu!==null){var p=Ch(oc),y=$s.transition,T=mn;try{if($s.transition=null,mn=16>p?16:p,iu===null)var R=!1;else{if(p=iu,iu=null,oc=0,(Pn&6)!==0)throw Error(r(331));var q=Pn;for(Pn|=4,yr=p.current;yr!==null;){var K=yr,de=K.child;if((yr.flags&16)!==0){var De=K.deletions;if(De!==null){for(var qe=0;qe<De.length;qe++){var vt=De[qe];for(yr=vt;yr!==null;){var qt=yr;switch(qt.tag){case 0:case 11:case 15:nd(8,qt,K)}var Ht=qt.child;if(Ht!==null)Ht.return=qt,yr=Ht;else for(;yr!==null;){qt=yr;var Ut=qt.sibling,pr=qt.return;if(jf(qt),qt===vt){yr=null;break}if(Ut!==null){Ut.return=pr,yr=Ut;break}yr=pr}}}var xr=K.alternate;if(xr!==null){var Pr=xr.child;if(Pr!==null){xr.child=null;do{var Ei=Pr.sibling;Pr.sibling=null,Pr=Ei}while(Pr!==null)}}yr=K}}if((K.subtreeFlags&2064)!==0&&de!==null)de.return=K,yr=de;else e:for(;yr!==null;){if(K=yr,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:nd(9,K,K.return)}var lt=K.sibling;if(lt!==null){lt.return=K.return,yr=lt;break e}yr=K.return}}var He=p.current;for(yr=He;yr!==null;){de=yr;var ft=de.child;if((de.subtreeFlags&2064)!==0&&ft!==null)ft.return=de,yr=ft;else e:for(de=He;yr!==null;){if(De=yr,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:nm(9,De)}}catch(kr){Pi(De,De.return,kr)}if(De===de){yr=null;break e}var Qt=De.sibling;if(Qt!==null){Qt.return=De.return,yr=Qt;break e}yr=De.return}}if(Pn=q,No(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(So,p)}catch{}R=!0}return R}finally{mn=T,$s.transition=y}}return!1}function w0(p,y,T){y=Fs(T,y),y=Uo(p,y,1),p=Jl(p,y,1),y=uo(),p!==null&&(Eu(p,1,y),Co(p,y))}function Pi(p,y,T){if(p.tag===3)w0(p,p,T);else for(;y!==null;){if(y.tag===3){w0(y,p,T);break}else if(y.tag===1){var R=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(ac===null||!ac.has(R))){p=Fs(T,p),p=qo(y,p,1),y=Jl(y,p,1),p=uo(),y!==null&&(Eu(y,1,p),Co(y,p));break}}y=y.return}}function S0(p,y,T){var R=p.pingCache;R!==null&&R.delete(y),y=uo(),p.pingedLanes|=p.suspendedLanes&T,Sa===p&&($a&T)===T&&(Wi===4||Wi===3&&($a&130023424)===$a&&500>bn()-Cg?_l(p,0):dv|=T),Co(p,y)}function P0(p,y){y===0&&((p.mode&1)===0?y=1:(y=Pu,Pu<<=1,(Pu&130023424)===0&&(Pu=4194304)));var T=uo();p=$o(p,y),p!==null&&(Eu(p,y,T),Co(p,T))}function _1(p){var y=p.memoizedState,T=0;y!==null&&(T=y.retryLane),P0(p,T)}function um(p,y){var T=0;switch(p.tag){case 13:var R=p.stateNode,q=p.memoizedState;q!==null&&(T=q.retryLane);break;case 19:R=p.stateNode;break;default:throw Error(r(314))}R!==null&&R.delete(y),P0(p,T)}var vv;vv=function(p,y,T){if(p!==null)if(p.memoizedProps!==y.pendingProps||ra.current)Ba=!0;else{if((p.lanes&T)===0&&(y.flags&128)===0)return Ba=!1,Of(p,y,T);Ba=(p.flags&131072)!==0}else Ba=!1,Kn&&(y.flags&1048576)!==0&&Zh(y,Hh,y.index);switch(y.lanes=0,y.tag){case 2:var R=y.type;rc(p,y),p=y.pendingProps;var q=Hl(y,ta.current);Ls(y,T),q=m(null,y,R,p,q,T);var K=v();return y.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,xa(R)?(K=!0,ls(y)):K=!1,y.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,io(y),q.updater=cs,y.stateNode=q,q._reactInternals=y,dl(y,R,p,T),y=td(null,y,R,!0,K,T)):(y.tag=0,Kn&&K&&Kh(y),ba(null,y,q,T),y=y.child),y;case 16:R=y.elementType;e:{switch(rc(p,y),p=y.pendingProps,q=R._init,R=q(R._payload),y.type=R,q=y.tag=b1(R),p=_n(R,p),q){case 0:y=Vs(null,y,R,p,T);break e;case 1:y=ml(null,y,R,p,T);break e;case 11:y=ru(null,y,R,p,T);break e;case 14:y=bg(null,y,R,_n(R.type,p),T);break e}throw Error(r(306,R,""))}return y;case 0:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),Vs(p,y,R,q,T);case 1:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),ml(p,y,R,q,T);case 3:e:{if(kf(y),p===null)throw Error(r(387));R=y.pendingProps,K=y.memoizedState,q=K.element,Cf(p,y),qn(y,R,null,T);var de=y.memoizedState;if(R=de.element,K.isDehydrated)if(K={element:R,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},y.updateQueue.baseState=K,y.memoizedState=K,y.flags&256){q=Fs(Error(r(423)),y),y=rd(p,y,R,T,q);break e}else if(R!==q){q=Fs(Error(r(424)),y),y=rd(p,y,R,T,q);break e}else for(ma=ol(y.stateNode.containerInfo.firstChild),pa=y,Kn=!0,Na=null,T=Zc(y,null,R,T),y.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Yl(),R===q){y=nc(p,y,T);break e}ba(p,y,R,T)}y=y.child}return y;case 5:return zs(y),p===null&&Yp(y),R=y.type,q=y.pendingProps,K=p!==null?p.memoizedProps:null,de=q.children,pf(R,q)?de=null:K!==null&&pf(R,K)&&(y.flags|=32),pl(p,y),ba(p,y,de,T),y.child;case 6:return p===null&&Yp(y),null;case 13:return iv(p,y,T);case 4:return Jh(y,y.stateNode.containerInfo),R=y.pendingProps,p===null?y.child=Hc(y,null,R,T):ba(p,y,R,T),y.child;case 11:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),ru(p,y,R,q,T);case 7:return ba(p,y,y.pendingProps,T),y.child;case 8:return ba(p,y,y.pendingProps.children,T),y.child;case 12:return ba(p,y,y.pendingProps.children,T),y.child;case 10:e:{if(R=y.type._context,q=y.pendingProps,K=y.memoizedProps,de=q.value,gn(Zu,R._currentValue),R._currentValue=de,K!==null)if(ns(K.value,de)){if(K.children===q.children&&!ra.current){y=nc(p,y,T);break e}}else for(K=y.child,K!==null&&(K.return=y);K!==null;){var De=K.dependencies;if(De!==null){de=K.child;for(var qe=De.firstContext;qe!==null;){if(qe.context===R){if(K.tag===1){qe=Ds(-1,T&-T),qe.tag=2;var vt=K.updateQueue;if(vt!==null){vt=vt.shared;var qt=vt.pending;qt===null?qe.next=qe:(qe.next=qt.next,qt.next=qe),vt.pending=qe}}K.lanes|=T,qe=K.alternate,qe!==null&&(qe.lanes|=T),Eo(K.return,T,y),De.lanes|=T;break}qe=qe.next}}else if(K.tag===10)de=K.type===y.type?null:K.child;else if(K.tag===18){if(de=K.return,de===null)throw Error(r(341));de.lanes|=T,De=de.alternate,De!==null&&(De.lanes|=T),Eo(de,T,y),de=K.sibling}else de=K.child;if(de!==null)de.return=K;else for(de=K;de!==null;){if(de===y){de=null;break}if(K=de.sibling,K!==null){K.return=de.return,de=K;break}de=de.return}K=de}ba(p,y,q.children,T),y=y.child}return y;case 9:return q=y.type,R=y.pendingProps.children,Ls(y,T),q=ar(q),R=R(q),y.flags|=1,ba(p,y,R,T),y.child;case 14:return R=y.type,q=_n(R,y.pendingProps),q=_n(R.type,q),bg(p,y,R,q,T);case 15:return em(p,y,y.type,y.pendingProps,T);case 17:return R=y.type,q=y.pendingProps,q=y.elementType===R?q:_n(R,q),rc(p,y),y.tag=1,xa(R)?(p=!0,ls(y)):p=!1,Ls(y,T),hs(y,R,q),dl(y,R,q,T),td(null,y,R,!0,p,T);case 19:return ov(p,y,T);case 22:return Mf(p,y,T)}throw Error(r(156,y.tag))};function E0(p,y){return ni(p,y)}function x1(p,y,T,R){this.tag=p,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(p,y,T,R){return new x1(p,y,T,R)}function _v(p){return p=p.prototype,!(!p||!p.isReactComponent)}function b1(p){if(typeof p=="function")return _v(p)?1:0;if(p!=null){if(p=p.$$typeof,p===Ne)return 11;if(p===pt)return 14}return 2}function sc(p,y){var T=p.alternate;return T===null?(T=qs(p.tag,y,p.key,p.mode),T.elementType=p.elementType,T.type=p.type,T.stateNode=p.stateNode,T.alternate=p,p.alternate=T):(T.pendingProps=y,T.type=p.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=p.flags&14680064,T.childLanes=p.childLanes,T.lanes=p.lanes,T.child=p.child,T.memoizedProps=p.memoizedProps,T.memoizedState=p.memoizedState,T.updateQueue=p.updateQueue,y=p.dependencies,T.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},T.sibling=p.sibling,T.index=p.index,T.ref=p.ref,T}function Bf(p,y,T,R,q,K){var de=2;if(R=p,typeof p=="function")_v(p)&&(de=1);else if(typeof p=="string")de=5;else e:switch(p){case re:return sh(T.children,q,K,y);case be:de=8,q|=8;break;case xe:return p=qs(12,T,y,q|2),p.elementType=xe,p.lanes=K,p;case Xe:return p=qs(13,T,y,q),p.elementType=Xe,p.lanes=K,p;case ut:return p=qs(19,T,y,q),p.elementType=ut,p.lanes=K,p;case wt:return cm(T,q,K,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case $e:de=10;break e;case Ee:de=9;break e;case Ne:de=11;break e;case pt:de=14;break e;case gt:de=16,R=null;break e}throw Error(r(130,p==null?p:typeof p,""))}return y=qs(de,T,y,q),y.elementType=p,y.type=R,y.lanes=K,y}function sh(p,y,T,R){return p=qs(7,p,R,y),p.lanes=T,p}function cm(p,y,T,R){return p=qs(22,p,R,y),p.elementType=wt,p.lanes=T,p.stateNode={isHidden:!1},p}function Og(p,y,T){return p=qs(6,p,null,y),p.lanes=T,p}function xv(p,y,T){return y=qs(4,p.children!==null?p.children:[],p.key,y),y.lanes=T,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function Lg(p,y,T,R,q){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eh(0),this.expirationTimes=Eh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.identifierPrefix=R,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function bv(p,y,T,R,q,K,de,De,qe){return p=new Lg(p,y,T,De,qe),y===1?(y=1,K===!0&&(y|=8)):y=0,K=qs(3,null,null,y),p.current=K,K.stateNode=p,K.memoizedState={element:R,isDehydrated:T,cache:null,transitions:null,pendingSuspenseBoundaries:null},io(K),p}function C0(p,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:R==null?null:""+R,children:p,containerInfo:y,implementation:T}}function T0(p){if(!p)return Is;p=p._reactInternals;e:{if(Bt(p)!==p||p.tag!==1)throw Error(r(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(xa(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(r(171))}if(p.tag===1){var T=p.type;if(xa(T))return _f(p,T,y)}return y}function M0(p,y,T,R,q,K,de,De,qe){return p=bv(T,R,!0,p,q,K,de,De,qe),p.context=T0(null),T=p.current,R=uo(),q=Go(T),K=Ds(R,q),K.callback=y??null,Jl(T,K,q),p.current.lanes=q,Eu(p,q,R),Co(p,R),p}function Dg(p,y,T,R){var q=y.current,K=uo(),de=Go(q);return T=T0(T),y.context===null?y.context=T:y.pendingContext=T,y=Ds(K,de),y.payload={element:p},R=R===void 0?null:R,R!==null&&(y.callback=R),p=Jl(q,y,de),p!==null&&(vl(p,q,de,K),Tf(p,q,de)),de}function hm(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function k0(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var T=p.retryLane;p.retryLane=T!==0&&T<y?T:y}}function wv(p,y){k0(p,y),(p=p.alternate)&&k0(p,y)}function aa(){return null}var Vf=typeof reportError=="function"?reportError:function(p){console.error(p)};function Sv(p){this._internalRoot=p}Rg.prototype.render=Sv.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(r(409));Dg(p,y,null,null)},Rg.prototype.unmount=Sv.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;ad(function(){Dg(null,p,null,null)}),y[jo]=null}};function Rg(p){this._internalRoot=p}Rg.prototype.unstable_scheduleHydration=function(p){if(p){var y=Ic();p={blockedOn:null,target:p,priority:y};for(var T=0;T<wn.length&&y!==0&&y<wn[T].priority;T++);wn.splice(T,0,p),T===0&&eo(p)}};function jg(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function dm(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function A0(){}function I0(p,y,T,R,q){if(q){if(typeof R=="function"){var K=R;R=function(){var vt=hm(de);K.call(vt)}}var de=M0(y,R,p,0,null,!1,!1,"",A0);return p._reactRootContainer=de,p[jo]=de.current,Fu(p.nodeType===8?p.parentNode:p),ad(),de}for(;q=p.lastChild;)p.removeChild(q);if(typeof R=="function"){var De=R;R=function(){var vt=hm(qe);De.call(vt)}}var qe=bv(p,0,!1,null,null,!1,!1,"",A0);return p._reactRootContainer=qe,p[jo]=qe.current,Fu(p.nodeType===8?p.parentNode:p),ad(function(){Dg(y,qe,T,R)}),qe}function fm(p,y,T,R,q){var K=T._reactRootContainer;if(K){var de=K;if(typeof q=="function"){var De=q;q=function(){var qe=hm(de);De.call(qe)}}Dg(y,de,p,q)}else de=I0(T,y,p,q,R);return hm(de)}Ap=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var T=rl(y.pendingLanes);T!==0&&(kp(y,T|1),Co(y,bn()),(Pn&6)===0&&(ic=bn()+500,No()))}break;case 13:ad(function(){var R=$o(p,1);if(R!==null){var q=uo();vl(R,p,1,q)}}),wv(p,1)}},Ll=function(p){if(p.tag===13){var y=$o(p,134217728);if(y!==null){var T=uo();vl(y,p,134217728,T)}wv(p,134217728)}},Wd=function(p){if(p.tag===13){var y=Go(p),T=$o(p,y);if(T!==null){var R=uo();vl(T,p,y,R)}wv(p,y)}},Ic=function(){return mn},nl=function(p,y){var T=mn;try{return mn=p,y()}finally{mn=T}},Mr=function(p,y,T){switch(y){case"input":if(Wr(p,T),y=T.name,T.type==="radio"&&y!=null){for(T=p;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<T.length;y++){var R=T[y];if(R!==p&&R.form===p.form){var q=Gh(R);if(!q)throw Error(r(90));St(R),Wr(R,q)}}}break;case"textarea":Wt(p,T);break;case"select":y=T.value,y!=null&&rt(p,!!T.multiple,y,!1)}},Ir=fv,Zr=ad;var $f={usingClientEntryPoint:!1,Events:[os,ss,Gh,sn,ri,fv]},od={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:od.bundleType,version:od.version,rendererPackageName:od.rendererPackageName,rendererConfig:od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Yr(p),p===null?null:p.stateNode},findFiberByHostInstance:od.findFiberByHostInstance||aa,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{So=pm.inject(O0),jr=pm}catch{}}return Ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$f,Ws.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jg(y))throw Error(r(200));return C0(p,y,null,T)},Ws.createRoot=function(p,y){if(!jg(p))throw Error(r(299));var T=!1,R="",q=Vf;return y!=null&&(y.unstable_strictMode===!0&&(T=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onRecoverableError!==void 0&&(q=y.onRecoverableError)),y=bv(p,1,!1,null,null,T,!1,R,q),p[jo]=y.current,Fu(p.nodeType===8?p.parentNode:p),new Sv(y)},Ws.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=Yr(y),p=p===null?null:p.stateNode,p},Ws.flushSync=function(p){return ad(p)},Ws.hydrate=function(p,y,T){if(!dm(y))throw Error(r(200));return fm(null,p,y,!0,T)},Ws.hydrateRoot=function(p,y,T){if(!jg(p))throw Error(r(405));var R=T!=null&&T.hydratedSources||null,q=!1,K="",de=Vf;if(T!=null&&(T.unstable_strictMode===!0&&(q=!0),T.identifierPrefix!==void 0&&(K=T.identifierPrefix),T.onRecoverableError!==void 0&&(de=T.onRecoverableError)),y=M0(y,null,p,1,T??null,q,!1,K,de),p[jo]=y.current,Fu(p),R)for(p=0;p<R.length;p++)T=R[p],q=T._getVersion,q=q(T._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[T,q]:y.mutableSourceEagerHydrationData.push(T,q);return new Rg(y)},Ws.render=function(p,y,T){if(!dm(y))throw Error(r(200));return fm(null,p,y,!1,T)},Ws.unmountComponentAtNode=function(p){if(!dm(p))throw Error(r(40));return p._reactRootContainer?(ad(function(){fm(null,null,p,!1,function(){p._reactRootContainer=null,p[jo]=null})}),!0):!1},Ws.unstable_batchedUpdates=fv,Ws.unstable_renderSubtreeIntoContainer=function(p,y,T,R){if(!dm(T))throw Error(r(200));if(p==null||p._reactInternals===void 0)throw Error(r(38));return fm(p,y,T,!1,R)},Ws.version="18.3.1-next-f1338f8080-20240426",Ws}var Ik;function tz(){if(Ik)return oS.exports;Ik=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oS.exports=r$(),oS.exports}var Ok;function n$(){if(Ok)return Y0;Ok=1;var e=tz();return Y0.createRoot=e.createRoot,Y0.hydrateRoot=e.hydrateRoot,Y0}var i$=n$();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rz=e=>{throw TypeError(e)},a$=(e,t,r)=>t.has(e)||rz("Cannot "+r),uS=(e,t,r)=>(a$(e,t,"read from private field"),r?r.call(e):t.get(e)),o$=(e,t,r)=>t.has(e)?rz("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Lk="popstate";function s$(e={}){function t(n,u){let{pathname:h,search:d,hash:o}=n.location;return a_("",{pathname:h,search:d,hash:o},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(n,u){return typeof u=="string"?u:_h(u)}return u$(t,r,null,e)}function dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ca(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function l$(){return Math.random().toString(36).substring(2,10)}function Dk(e,t){return{usr:e.state,key:e.key,idx:t}}function a_(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wp(t):t,state:r,key:t&&t.key||n||l$()}}function _h({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function u$(e,t,r,n={}){let{window:u=document.defaultView,v5Compat:h=!1}=n,d=u.history,o="POP",_=null,P=S();P==null&&(P=0,d.replaceState({...d.state,idx:P},""));function S(){return(d.state||{idx:null}).idx}function M(){o="POP";let D=S(),H=D==null?null:D-P;P=D,_&&_({action:o,location:B.location,delta:H})}function O(D,H){o="PUSH";let Q=a_(B.location,D,H);P=S()+1;let te=Dk(Q,P),ie=B.createHref(Q);try{d.pushState(te,"",ie)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;u.location.assign(ie)}h&&_&&_({action:o,location:B.location,delta:1})}function z(D,H){o="REPLACE";let Q=a_(B.location,D,H);P=S();let te=Dk(Q,P),ie=B.createHref(Q);d.replaceState(te,"",ie),h&&_&&_({action:o,location:B.location,delta:0})}function F(D){return nz(D)}let B={get action(){return o},get location(){return e(u,d)},listen(D){if(_)throw new Error("A history only accepts one active listener");return u.addEventListener(Lk,M),_=D,()=>{u.removeEventListener(Lk,M),_=null}},createHref(D){return t(u,D)},createURL:F,encodeLocation(D){let H=F(D);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:O,replace:z,go(D){return d.go(D)}};return B}function nz(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),dn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:_h(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var Kv,Rk=class{constructor(e){if(o$(this,Kv,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(uS(this,Kv).has(e))return uS(this,Kv).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){uS(this,Kv).set(e,t)}};Kv=new WeakMap;var c$=new Set(["lazy","caseSensitive","path","id","index","children"]);function h$(e){return c$.has(e)}var d$=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function f$(e){return d$.has(e)}function p$(e){return e.index===!0}function o_(e,t,r=[],n={},u=!1){return e.map((h,d)=>{let o=[...r,String(d)],_=typeof h.id=="string"?h.id:o.join("-");if(dn(h.index!==!0||!h.children,"Cannot specify children on an index route"),dn(u||!n[_],`Found a route id collision on id "${_}".  Route id's must be globally unique within Data Router usages`),p$(h)){let P={...h,id:_};return n[_]=jk(P,t(P)),P}else{let P={...h,id:_,children:void 0};return n[_]=jk(P,t(P)),h.children&&(P.children=o_(h.children,t,o,n,u)),P}})}function jk(e,t){return Object.assign(e,{...t,...typeof t.lazy=="object"&&t.lazy!=null?{lazy:{...e.lazy,...t.lazy}}:{}})}function ep(e,t,r="/"){return Xv(e,t,r,!1)}function Xv(e,t,r,n){let u=typeof t=="string"?wp(t):t,h=gu(u.pathname||"/",r);if(h==null)return null;let d=iz(e);g$(d);let o=null;for(let _=0;o==null&&_<d.length;++_){let P=T$(h);o=E$(d[_],P,n)}return o}function m$(e,t){let{route:r,pathname:n,params:u}=e;return{id:r.id,pathname:n,params:u,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function iz(e,t=[],r=[],n="",u=!1){let h=(d,o,_=u,P)=>{let S={relativePath:P===void 0?d.path||"":P,caseSensitive:d.caseSensitive===!0,childrenIndex:o,route:d};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(n)&&_)return;dn(S.relativePath.startsWith(n),`Absolute route path "${S.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(n.length)}let M=yh([n,S.relativePath]),O=r.concat(S);d.children&&d.children.length>0&&(dn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),iz(d.children,t,O,M,_)),!(d.path==null&&!d.index)&&t.push({path:M,score:S$(M,d.index),routesMeta:O})};return e.forEach((d,o)=>{var _;if(d.path===""||!((_=d.path)!=null&&_.includes("?")))h(d,o);else for(let P of az(d.path))h(d,o,!0,P)}),t}function az(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,u=r.endsWith("?"),h=r.replace(/\?$/,"");if(n.length===0)return u?[h,""]:[h];let d=az(n.join("/")),o=[];return o.push(...d.map(_=>_===""?h:[h,_].join("/"))),u&&o.push(...d),o.map(_=>e.startsWith("/")&&_===""?"/":_)}function g$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:P$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var y$=/^:[\w-]+$/,v$=3,_$=2,x$=1,b$=10,w$=-2,zk=e=>e==="*";function S$(e,t){let r=e.split("/"),n=r.length;return r.some(zk)&&(n+=w$),t&&(n+=_$),r.filter(u=>!zk(u)).reduce((u,h)=>u+(y$.test(h)?v$:h===""?x$:b$),n)}function P$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,u)=>n===t[u])?e[e.length-1]-t[t.length-1]:0}function E$(e,t,r=!1){let{routesMeta:n}=e,u={},h="/",d=[];for(let o=0;o<n.length;++o){let _=n[o],P=o===n.length-1,S=h==="/"?t:t.slice(h.length)||"/",M=$x({path:_.relativePath,caseSensitive:_.caseSensitive,end:P},S),O=_.route;if(!M&&P&&r&&!n[n.length-1].route.index&&(M=$x({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},S)),!M)return null;Object.assign(u,M.params),d.push({params:u,pathname:yh([h,M.pathname]),pathnameBase:I$(yh([h,M.pathnameBase])),route:O}),M.pathnameBase!=="/"&&(h=yh([h,M.pathnameBase]))}return d}function $x(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=C$(e.path,e.caseSensitive,e.end),u=t.match(r);if(!u)return null;let h=u[0],d=h.replace(/(.)\/+$/,"$1"),o=u.slice(1);return{params:n.reduce((P,{paramName:S,isOptional:M},O)=>{if(S==="*"){let F=o[O]||"";d=h.slice(0,h.length-F.length).replace(/(.)\/+$/,"$1")}const z=o[O];return M&&!z?P[S]=void 0:P[S]=(z||"").replace(/%2F/g,"/"),P},{}),pathname:h,pathnameBase:d,pattern:e}}function C$(e,t=!1,r=!0){ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,o,_)=>(n.push({paramName:o,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),n]}function T$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function M$({basename:e,pathname:t}){return t==="/"?e:yh([e,t])}var k$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iw=e=>k$.test(e);function A$(e,t="/"){let{pathname:r,search:n="",hash:u=""}=typeof e=="string"?wp(e):e,h;if(r)if(iw(r))h=r;else{if(r.includes("//")){let d=r;r=r.replace(/\/\/+/g,"/"),ca(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${r}`)}r.startsWith("/")?h=Nk(r.substring(1),"/"):h=Nk(r,t)}else h=t;return{pathname:h,search:O$(n),hash:L$(u)}}function Nk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function cS(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function aw(e){let t=oz(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function ow(e,t,r,n=!1){let u;typeof e=="string"?u=wp(e):(u={...e},dn(!u.pathname||!u.pathname.includes("?"),cS("?","pathname","search",u)),dn(!u.pathname||!u.pathname.includes("#"),cS("#","pathname","hash",u)),dn(!u.search||!u.search.includes("#"),cS("#","search","hash",u)));let h=e===""||u.pathname==="",d=h?"/":u.pathname,o;if(d==null)o=r;else{let M=t.length-1;if(!n&&d.startsWith("..")){let O=d.split("/");for(;O[0]==="..";)O.shift(),M-=1;u.pathname=O.join("/")}o=M>=0?t[M]:"/"}let _=A$(u,o),P=d&&d!=="/"&&d.endsWith("/"),S=(h||d===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(P||S)&&(_.pathname+="/"),_}var yh=e=>e.join("/").replace(/\/\/+/g,"/"),I$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,L$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,sw=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function s_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function A_(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pp=Symbol("Uninstrumented");function D$(e,t){let r={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(u=>u({id:t.id,index:t.index,path:t.path,instrument(h){let d=Object.keys(r);for(let o of d)h[o]&&r[o].push(h[o])}}));let n={};if(typeof t.lazy=="function"&&r.lazy.length>0){let u=ty(r.lazy,t.lazy,()=>{});u&&(n.lazy=u)}if(typeof t.lazy=="object"){let u=t.lazy;["middleware","loader","action"].forEach(h=>{let d=u[h],o=r[`lazy.${h}`];if(typeof d=="function"&&o.length>0){let _=ty(o,d,()=>{});_&&(n.lazy=Object.assign(n.lazy||{},{[h]:_}))}})}return["loader","action"].forEach(u=>{let h=t[u];if(typeof h=="function"&&r[u].length>0){let d=h[pp]??h,o=ty(r[u],d,(..._)=>Fk(_[0]));o&&(o[pp]=d,n[u]=o)}}),t.middleware&&t.middleware.length>0&&r.middleware.length>0&&(n.middleware=t.middleware.map(u=>{let h=u[pp]??u,d=ty(r.middleware,h,(...o)=>Fk(o[0]));return d?(d[pp]=h,d):u})),n}function R$(e,t){let r={navigate:[],fetch:[]};if(t.forEach(n=>n({instrument(u){let h=Object.keys(u);for(let d of h)u[d]&&r[d].push(u[d])}})),r.navigate.length>0){let n=e.navigate[pp]??e.navigate,u=ty(r.navigate,n,(...h)=>{let[d,o]=h;return{to:typeof d=="number"||typeof d=="string"?d:d?_h(d):".",...Bk(e,o??{})}});u&&(u[pp]=n,e.navigate=u)}if(r.fetch.length>0){let n=e.fetch[pp]??e.fetch,u=ty(r.fetch,n,(...h)=>{let[d,,o,_]=h;return{href:o??".",fetcherKey:d,...Bk(e,_??{})}});u&&(u[pp]=n,e.fetch=u)}return e}function ty(e,t,r){return e.length===0?null:async(...n)=>{let u=await sz(e,r(...n),()=>t(...n),e.length-1);if(u.type==="error")throw u.value;return u.value}}async function sz(e,t,r,n){let u=e[n],h;if(u){let d,o=async()=>(d?console.error("You cannot call instrumented handlers more than once"):d=sz(e,t,r,n-1),h=await d,dn(h,"Expected a result"),h.type==="error"&&h.value instanceof Error?{status:"error",error:h.value}:{status:"success",error:void 0});try{await u(o,t)}catch(_){console.error("An instrumentation function threw an error:",_)}d||await o(),await d}else try{h={type:"success",value:await r()}}catch(d){h={type:"error",value:d}}return h||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Fk(e){let{request:t,context:r,params:n,unstable_pattern:u}=e;return{request:j$(t),params:{...n},unstable_pattern:u,context:z$(r)}}function Bk(e,t){return{currentUrl:_h(e.state.location),..."formMethod"in t?{formMethod:t.formMethod}:{},..."formEncType"in t?{formEncType:t.formEncType}:{},..."formData"in t?{formData:t.formData}:{},..."body"in t?{body:t.body}:{}}}function j$(e){return{method:e.method,url:e.url,headers:{get:(...t)=>e.headers.get(...t)}}}function z$(e){if(F$(e)){let t={...e};return Object.freeze(t),t}else return{get:t=>e.get(t)}}var N$=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function F$(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===N$}var lz=["POST","PUT","PATCH","DELETE"],B$=new Set(lz),V$=["GET",...lz],$$=new Set(V$),U$=new Set([301,302,303,307,308]),q$=new Set([307,308]),hS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},G$={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ov={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},W$=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),uz="remix-router-transitions",cz=Symbol("ResetLoaderData");function H$(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";dn(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],u=e.mapRouteProperties||W$,h=u;if(e.unstable_instrumentations){let Ie=e.unstable_instrumentations;h=Ye=>({...u(Ye),...D$(Ie.map(mt=>mt.route).filter(Boolean),Ye)})}let d={},o=o_(e.routes,h,void 0,d),_,P=e.basename||"/";P.startsWith("/")||(P=`/${P}`);let S=e.dataStrategy||Q$,M={...e.future},O=null,z=new Set,F=null,B=null,D=null,H=e.hydrationData!=null,Q=ep(o,e.history.location,P),te=!1,ie=null,ae;if(Q==null&&!e.patchRoutesOnNavigation){let Ie=du(404,{pathname:e.history.location.pathname}),{matches:Ye,route:mt}=Q0(o);ae=!0,Q=Ye,ie={[mt.id]:Ie}}else if(Q&&!e.hydrationData&&Zr(Q,o,e.history.location.pathname).active&&(Q=null),Q)if(Q.some(Ie=>Ie.route.lazy))ae=!1;else if(!Q.some(Ie=>WE(Ie.route)))ae=!0;else{let Ie=e.hydrationData?e.hydrationData.loaderData:null,Ye=e.hydrationData?e.hydrationData.errors:null;if(Ye){let mt=Q.findIndex(We=>Ye[We.route.id]!==void 0);ae=Q.slice(0,mt+1).every(We=>!h2(We.route,Ie,Ye))}else ae=Q.every(mt=>!h2(mt.route,Ie,Ye))}else{ae=!1,Q=[];let Ie=Zr(null,o,e.history.location.pathname);Ie.active&&Ie.matches&&(te=!0,Q=Ie.matches)}let he,re={historyAction:e.history.action,location:e.history.location,matches:Q,initialized:ae,navigation:hS,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||ie,fetchers:new Map,blockers:new Map},be="POP",xe=null,$e=!1,Ee,Ne=!1,Xe=new Map,ut=null,pt=!1,gt=!1,wt=new Set,je=new Map,Qe=0,yt=-1,Oe=new Map,et=new Set,Mt=new Map,Dt=new Map,Ke=new Set,tr=new Map,Ft,$t=null;function ct(){if(O=e.history.listen(({action:Ie,location:Ye,delta:mt})=>{if(Ft){Ft(),Ft=void 0;return}ca(tr.size===0||mt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let We=Kr({currentLocation:re.location,nextLocation:Ye,historyAction:Ie});if(We&&mt!=null){let Gt=new Promise(cr=>{Ft=cr});e.history.go(mt*-1),Mr(We,{state:"blocked",location:Ye,proceed(){Mr(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ye}),Gt.then(()=>e.history.go(mt))},reset(){let cr=new Map(re.blockers);cr.set(We,Ov),St({blockers:cr})}}),xe==null||xe.resolve(),xe=null;return}return tn(Ie,Ye)}),r){pU(t,Xe);let Ie=()=>mU(t,Xe);t.addEventListener("pagehide",Ie),ut=()=>t.removeEventListener("pagehide",Ie)}return re.initialized||tn("POP",re.location,{initialHydration:!0}),he}function Lt(){O&&O(),ut&&ut(),z.clear(),Ee&&Ee.abort(),re.fetchers.forEach((Ie,Ye)=>Je(Ye)),re.blockers.forEach((Ie,Ye)=>or(Ye))}function ir(Ie){return z.add(Ie),()=>z.delete(Ie)}function St(Ie,Ye={}){Ie.matches&&(Ie.matches=Ie.matches.map(Gt=>{let cr=d[Gt.route.id],Sr=Gt.route;return Sr.element!==cr.element||Sr.errorElement!==cr.errorElement||Sr.hydrateFallbackElement!==cr.hydrateFallbackElement?{...Gt,route:cr}:Gt})),re={...re,...Ie};let mt=[],We=[];re.fetchers.forEach((Gt,cr)=>{Gt.state==="idle"&&(Ke.has(cr)?mt.push(cr):We.push(cr))}),Ke.forEach(Gt=>{!re.fetchers.has(Gt)&&!je.has(Gt)&&mt.push(Gt)}),[...z].forEach(Gt=>Gt(re,{deletedFetchers:mt,newErrors:Ie.errors??null,viewTransitionOpts:Ye.viewTransitionOpts,flushSync:Ye.flushSync===!0})),mt.forEach(Gt=>Je(Gt)),We.forEach(Gt=>re.fetchers.delete(Gt))}function Gr(Ie,Ye,{flushSync:mt}={}){var Zt,dr;let We=re.actionData!=null&&re.navigation.formMethod!=null&&xs(re.navigation.formMethod)&&re.navigation.state==="loading"&&((Zt=Ie.state)==null?void 0:Zt._isRedirect)!==!0,Gt;Ye.actionData?Object.keys(Ye.actionData).length>0?Gt=Ye.actionData:Gt=null:We?Gt=re.actionData:Gt=null;let cr=Ye.loaderData?Xk(re.loaderData,Ye.loaderData,Ye.matches||[],Ye.errors):re.loaderData,Sr=re.blockers;Sr.size>0&&(Sr=new Map(Sr),Sr.forEach((Fr,Yr)=>Sr.set(Yr,Ov)));let hr=pt?!1:Ir(Ie,Ye.matches||re.matches),xt=$e===!0||re.navigation.formMethod!=null&&xs(re.navigation.formMethod)&&((dr=Ie.state)==null?void 0:dr._isRedirect)!==!0;_&&(o=_,_=void 0),pt||be==="POP"||(be==="PUSH"?e.history.push(Ie,Ie.state):be==="REPLACE"&&e.history.replace(Ie,Ie.state));let Bt;if(be==="POP"){let Fr=Xe.get(re.location.pathname);Fr&&Fr.has(Ie.pathname)?Bt={currentLocation:re.location,nextLocation:Ie}:Xe.has(Ie.pathname)&&(Bt={currentLocation:Ie,nextLocation:re.location})}else if(Ne){let Fr=Xe.get(re.location.pathname);Fr?Fr.add(Ie.pathname):(Fr=new Set([Ie.pathname]),Xe.set(re.location.pathname,Fr)),Bt={currentLocation:re.location,nextLocation:Ie}}St({...Ye,actionData:Gt,loaderData:cr,historyAction:be,location:Ie,initialized:!0,navigation:hS,revalidation:"idle",restoreScrollPosition:hr,preventScrollReset:xt,blockers:Sr},{viewTransitionOpts:Bt,flushSync:mt===!0}),be="POP",$e=!1,Ne=!1,pt=!1,gt=!1,xe==null||xe.resolve(),xe=null,$t==null||$t.resolve(),$t=null}async function Tr(Ie,Ye){if(xe==null||xe.resolve(),xe=null,typeof Ie=="number"){xe||(xe=eA());let Yr=xe.promise;return e.history.go(Ie),Yr}let mt=c2(re.location,re.matches,P,Ie,Ye==null?void 0:Ye.fromRouteId,Ye==null?void 0:Ye.relative),{path:We,submission:Gt,error:cr}=Vk(!1,mt,Ye),Sr=re.location,hr=a_(re.location,We,Ye&&Ye.state);hr={...hr,...e.history.encodeLocation(hr)};let xt=Ye&&Ye.replace!=null?Ye.replace:void 0,Bt="PUSH";xt===!0?Bt="REPLACE":xt===!1||Gt!=null&&xs(Gt.formMethod)&&Gt.formAction===re.location.pathname+re.location.search&&(Bt="REPLACE");let Zt=Ye&&"preventScrollReset"in Ye?Ye.preventScrollReset===!0:void 0,dr=(Ye&&Ye.flushSync)===!0,Fr=Kr({currentLocation:Sr,nextLocation:hr,historyAction:Bt});if(Fr){Mr(Fr,{state:"blocked",location:hr,proceed(){Mr(Fr,{state:"proceeding",proceed:void 0,reset:void 0,location:hr}),Tr(Ie,Ye)},reset(){let Yr=new Map(re.blockers);Yr.set(Fr,Ov),St({blockers:Yr})}});return}await tn(Bt,hr,{submission:Gt,pendingError:cr,preventScrollReset:Zt,replace:Ye&&Ye.replace,enableViewTransition:Ye&&Ye.viewTransition,flushSync:dr})}function wr(){$t||($t=eA()),ue(),St({revalidation:"loading"});let Ie=$t.promise;return re.navigation.state==="submitting"?Ie:re.navigation.state==="idle"?(tn(re.historyAction,re.location,{startUninterruptedRevalidation:!0}),Ie):(tn(be||re.historyAction,re.navigation.location,{overrideNavigation:re.navigation,enableViewTransition:Ne===!0}),Ie)}async function tn(Ie,Ye,mt){Ee&&Ee.abort(),Ee=null,be=Ie,pt=(mt&&mt.startUninterruptedRevalidation)===!0,ri(re.location,re.matches),$e=(mt&&mt.preventScrollReset)===!0,Ne=(mt&&mt.enableViewTransition)===!0;let We=_||o,Gt=mt&&mt.overrideNavigation,cr=mt!=null&&mt.initialHydration&&re.matches&&re.matches.length>0&&!te?re.matches:ep(We,Ye,P),Sr=(mt&&mt.flushSync)===!0;if(cr&&re.initialized&&!gt&&oU(re.location,Ye)&&!(mt&&mt.submission&&xs(mt.submission.formMethod))){Gr(Ye,{matches:cr},{flushSync:Sr});return}let hr=Zr(cr,We,Ye.pathname);if(hr.active&&hr.matches&&(cr=hr.matches),!cr){let{error:ni,notFoundMatches:vn,route:Tn}=Ur(Ye.pathname);Gr(Ye,{matches:vn,loaderData:{},errors:{[Tn.id]:ni}},{flushSync:Sr});return}Ee=new AbortController;let xt=Qg(e.history,Ye,Ee.signal,mt&&mt.submission),Bt=e.getContext?await e.getContext():new Rk,Zt;if(mt&&mt.pendingError)Zt=[tp(cr).route.id,{type:"error",error:mt.pendingError}];else if(mt&&mt.submission&&xs(mt.submission.formMethod)){let ni=await Wr(xt,Ye,mt.submission,cr,Bt,hr.active,mt&&mt.initialHydration===!0,{replace:mt.replace,flushSync:Sr});if(ni.shortCircuited)return;if(ni.pendingActionResult){let[vn,Tn]=ni.pendingActionResult;if(Pl(Tn)&&s_(Tn.error)&&Tn.error.status===404){Ee=null,Gr(Ye,{matches:ni.matches,loaderData:{},errors:{[vn]:Tn.error}});return}}cr=ni.matches||cr,Zt=ni.pendingActionResult,Gt=dS(Ye,mt.submission),Sr=!1,hr.active=!1,xt=Qg(e.history,xt.url,xt.signal)}let{shortCircuited:dr,matches:Fr,loaderData:Yr,errors:mr}=await Xi(xt,Ye,cr,Bt,hr.active,Gt,mt&&mt.submission,mt&&mt.fetcherSubmission,mt&&mt.replace,mt&&mt.initialHydration===!0,Sr,Zt);dr||(Ee=null,Gr(Ye,{matches:Fr||cr,...Yk(Zt),loaderData:Yr,errors:mr}))}async function Wr(Ie,Ye,mt,We,Gt,cr,Sr,hr={}){ue();let xt=dU(Ye,mt);if(St({navigation:xt},{flushSync:hr.flushSync===!0}),cr){let dr=await Vn(We,Ye.pathname,Ie.signal);if(dr.type==="aborted")return{shortCircuited:!0};if(dr.type==="error"){if(dr.partialMatches.length===0){let{matches:Yr,route:mr}=Q0(o);return{matches:Yr,pendingActionResult:[mr.id,{type:"error",error:dr.error}]}}let Fr=tp(dr.partialMatches).route.id;return{matches:dr.partialMatches,pendingActionResult:[Fr,{type:"error",error:dr.error}]}}else if(dr.matches)We=dr.matches;else{let{notFoundMatches:Fr,error:Yr,route:mr}=Ur(Ye.pathname);return{matches:Fr,pendingActionResult:[mr.id,{type:"error",error:Yr}]}}}let Bt,Zt=Cx(We,Ye);if(!Zt.route.action&&!Zt.route.lazy)Bt={type:"error",error:du(405,{method:Ie.method,pathname:Ye.pathname,routeId:Zt.route.id})};else{let dr=oy(h,d,Ie,We,Zt,Sr?[]:n,Gt),Fr=await zt(Ie,dr,Gt,null);if(Bt=Fr[Zt.route.id],!Bt){for(let Yr of We)if(Fr[Yr.route.id]){Bt=Fr[Yr.route.id];break}}if(Ie.signal.aborted)return{shortCircuited:!0}}if(Cm(Bt)){let dr;return hr&&hr.replace!=null?dr=hr.replace:dr=Hk(Bt.response.headers.get("Location"),new URL(Ie.url),P)===re.location.pathname+re.location.search,await Wt(Ie,Bt,!0,{submission:mt,replace:dr}),{shortCircuited:!0}}if(Pl(Bt)){let dr=tp(We,Zt.route.id);return(hr&&hr.replace)!==!0&&(be="PUSH"),{matches:We,pendingActionResult:[dr.route.id,Bt,Zt.route.id]}}return{matches:We,pendingActionResult:[Zt.route.id,Bt]}}async function Xi(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt,Bt,Zt,dr){let Fr=cr||dS(Ye,Sr),Yr=Sr||hr||Jk(Fr),mr=!pt&&!Bt;if(Gt){if(mr){let Rn=Ii(dr);St({navigation:Fr,...Rn!==void 0?{actionData:Rn}:{}},{flushSync:Zt})}let jr=await Vn(mt,Ye.pathname,Ie.signal);if(jr.type==="aborted")return{shortCircuited:!0};if(jr.type==="error"){if(jr.partialMatches.length===0){let{matches:$i,route:Da}=Q0(o);return{matches:$i,loaderData:{},errors:{[Da.id]:jr.error}}}let Rn=tp(jr.partialMatches).route.id;return{matches:jr.partialMatches,loaderData:{},errors:{[Rn]:jr.error}}}else if(jr.matches)mt=jr.matches;else{let{error:Rn,notFoundMatches:$i,route:Da}=Ur(Ye.pathname);return{matches:$i,loaderData:{},errors:{[Da.id]:Rn}}}}let ni=_||o,{dsMatches:vn,revalidatingFetchers:Tn}=$k(Ie,We,h,d,e.history,re,mt,Yr,Ye,Bt?[]:n,Bt===!0,gt,wt,Ke,Mt,et,ni,P,e.patchRoutesOnNavigation!=null,dr);if(yt=++Qe,!e.dataStrategy&&!vn.some(jr=>jr.shouldLoad)&&!vn.some(jr=>jr.route.middleware&&jr.route.middleware.length>0)&&Tn.length===0){let jr=At();return Gr(Ye,{matches:mt,loaderData:{},errors:dr&&Pl(dr[1])?{[dr[0]]:dr[1].error}:null,...Yk(dr),...jr?{fetchers:new Map(re.fetchers)}:{}},{flushSync:Zt}),{shortCircuited:!0}}if(mr){let jr={};if(!Gt){jr.navigation=Fr;let Rn=Ii(dr);Rn!==void 0&&(jr.actionData=Rn)}Tn.length>0&&(jr.fetchers=Be(Tn)),St(jr,{flushSync:Zt})}Tn.forEach(jr=>{Ve(jr.key),jr.controller&&je.set(jr.key,jr.controller)});let Ja=()=>Tn.forEach(jr=>Ve(jr.key));Ee&&Ee.signal.addEventListener("abort",Ja);let{loaderResults:bn,fetcherResults:La}=await ze(vn,Tn,Ie,We);if(Ie.signal.aborted)return{shortCircuited:!0};Ee&&Ee.signal.removeEventListener("abort",Ja),Tn.forEach(jr=>je.delete(jr.key));let Yi=J0(bn);if(Yi)return await Wt(Ie,Yi.result,!0,{replace:xt}),{shortCircuited:!0};if(Yi=J0(La),Yi)return et.add(Yi.key),await Wt(Ie,Yi.result,!0,{replace:xt}),{shortCircuited:!0};let{loaderData:Oi,errors:Qr}=Kk(re,mt,bn,dr,Tn,La);Bt&&re.errors&&(Qr={...re.errors,...Qr});let Io=At(),Oo=Pt(yt),So=Io||Oo||Tn.length>0;return{matches:mt,loaderData:Oi,errors:Qr,...So?{fetchers:new Map(re.fetchers)}:{}}}function Ii(Ie){if(Ie&&!Pl(Ie[1]))return{[Ie[0]]:Ie[1].data};if(re.actionData)return Object.keys(re.actionData).length===0?null:re.actionData}function Be(Ie){return Ie.forEach(Ye=>{let mt=re.fetchers.get(Ye.key),We=Lv(void 0,mt?mt.data:void 0);re.fetchers.set(Ye.key,We)}),new Map(re.fetchers)}async function rt(Ie,Ye,mt,We){Ve(Ie);let Gt=(We&&We.flushSync)===!0,cr=_||o,Sr=c2(re.location,re.matches,P,mt,Ye,We==null?void 0:We.relative),hr=ep(cr,Sr,P),xt=Zr(hr,cr,Sr);if(xt.active&&xt.matches&&(hr=xt.matches),!hr){pe(Ie,Ye,du(404,{pathname:Sr}),{flushSync:Gt});return}let{path:Bt,submission:Zt,error:dr}=Vk(!0,Sr,We);if(dr){pe(Ie,Ye,dr,{flushSync:Gt});return}let Fr=e.getContext?await e.getContext():new Rk,Yr=(We&&We.preventScrollReset)===!0;if(Zt&&xs(Zt.formMethod)){await bt(Ie,Ye,Bt,hr,Fr,xt.active,Gt,Yr,Zt);return}Mt.set(Ie,{routeId:Ye,path:Bt}),await rr(Ie,Ye,Bt,hr,Fr,xt.active,Gt,Yr,Zt)}async function bt(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt){ue(),Mt.delete(Ie);let Bt=re.fetchers.get(Ie);le(Ie,fU(xt,Bt),{flushSync:Sr});let Zt=new AbortController,dr=Qg(e.history,mt,Zt.signal,xt);if(cr){let $n=await Vn(We,new URL(dr.url).pathname,dr.signal,Ie);if($n.type==="aborted")return;if($n.type==="error"){pe(Ie,Ye,$n.error,{flushSync:Sr});return}else if($n.matches)We=$n.matches;else{pe(Ie,Ye,du(404,{pathname:mt}),{flushSync:Sr});return}}let Fr=Cx(We,mt);if(!Fr.route.action&&!Fr.route.lazy){let $n=du(405,{method:xt.formMethod,pathname:mt,routeId:Ye});pe(Ie,Ye,$n,{flushSync:Sr});return}je.set(Ie,Zt);let Yr=Qe,mr=oy(h,d,dr,We,Fr,n,Gt),ni=await zt(dr,mr,Gt,Ie),vn=ni[Fr.route.id];if(!vn){for(let $n of mr)if(ni[$n.route.id]){vn=ni[$n.route.id];break}}if(dr.signal.aborted){je.get(Ie)===Zt&&je.delete(Ie);return}if(Ke.has(Ie)){if(Cm(vn)||Pl(vn)){le(Ie,pd(void 0));return}}else{if(Cm(vn))if(je.delete(Ie),yt>Yr){le(Ie,pd(void 0));return}else return et.add(Ie),le(Ie,Lv(xt)),Wt(dr,vn,!1,{fetcherSubmission:xt,preventScrollReset:hr});if(Pl(vn)){pe(Ie,Ye,vn.error);return}}let Tn=re.navigation.location||re.location,Ja=Qg(e.history,Tn,Zt.signal),bn=_||o,La=re.navigation.state!=="idle"?ep(bn,re.navigation.location,P):re.matches;dn(La,"Didn't find any matches after fetcher action");let Yi=++Qe;Oe.set(Ie,Yi);let Oi=Lv(xt,vn.data);re.fetchers.set(Ie,Oi);let{dsMatches:Qr,revalidatingFetchers:Io}=$k(Ja,Gt,h,d,e.history,re,La,xt,Tn,n,!1,gt,wt,Ke,Mt,et,bn,P,e.patchRoutesOnNavigation!=null,[Fr.route.id,vn]);Io.filter($n=>$n.key!==Ie).forEach($n=>{let jn=$n.key,Ol=re.fetchers.get(jn),Pu=Lv(void 0,Ol?Ol.data:void 0);re.fetchers.set(jn,Pu),Ve(jn),$n.controller&&je.set(jn,$n.controller)}),St({fetchers:new Map(re.fetchers)});let Oo=()=>Io.forEach($n=>Ve($n.key));Zt.signal.addEventListener("abort",Oo);let{loaderResults:So,fetcherResults:jr}=await ze(Qr,Io,Ja,Gt);if(Zt.signal.aborted)return;if(Zt.signal.removeEventListener("abort",Oo),Oe.delete(Ie),je.delete(Ie),Io.forEach($n=>je.delete($n.key)),re.fetchers.has(Ie)){let $n=pd(vn.data);re.fetchers.set(Ie,$n)}let Rn=J0(So);if(Rn)return Wt(Ja,Rn.result,!1,{preventScrollReset:hr});if(Rn=J0(jr),Rn)return et.add(Rn.key),Wt(Ja,Rn.result,!1,{preventScrollReset:hr});let{loaderData:$i,errors:Da}=Kk(re,La,So,void 0,Io,jr);Pt(Yi),re.navigation.state==="loading"&&Yi>yt?(dn(be,"Expected pending action"),Ee&&Ee.abort(),Gr(re.navigation.location,{matches:La,loaderData:$i,errors:Da,fetchers:new Map(re.fetchers)})):(St({errors:Da,loaderData:Xk(re.loaderData,$i,La,Da),fetchers:new Map(re.fetchers)}),gt=!1)}async function rr(Ie,Ye,mt,We,Gt,cr,Sr,hr,xt){let Bt=re.fetchers.get(Ie);le(Ie,Lv(xt,Bt?Bt.data:void 0),{flushSync:Sr});let Zt=new AbortController,dr=Qg(e.history,mt,Zt.signal);if(cr){let Tn=await Vn(We,new URL(dr.url).pathname,dr.signal,Ie);if(Tn.type==="aborted")return;if(Tn.type==="error"){pe(Ie,Ye,Tn.error,{flushSync:Sr});return}else if(Tn.matches)We=Tn.matches;else{pe(Ie,Ye,du(404,{pathname:mt}),{flushSync:Sr});return}}let Fr=Cx(We,mt);je.set(Ie,Zt);let Yr=Qe,mr=oy(h,d,dr,We,Fr,n,Gt),vn=(await zt(dr,mr,Gt,Ie))[Fr.route.id];if(je.get(Ie)===Zt&&je.delete(Ie),!dr.signal.aborted){if(Ke.has(Ie)){le(Ie,pd(void 0));return}if(Cm(vn))if(yt>Yr){le(Ie,pd(void 0));return}else{et.add(Ie),await Wt(dr,vn,!1,{preventScrollReset:hr});return}if(Pl(vn)){pe(Ie,Ye,vn.error);return}le(Ie,pd(vn.data))}}async function Wt(Ie,Ye,mt,{submission:We,fetcherSubmission:Gt,preventScrollReset:cr,replace:Sr}={}){mt||(xe==null||xe.resolve(),xe=null),Ye.response.headers.has("X-Remix-Revalidate")&&(gt=!0);let hr=Ye.response.headers.get("Location");dn(hr,"Expected a Location header on the redirect Response"),hr=Hk(hr,new URL(Ie.url),P);let xt=a_(re.location,hr,{_isRedirect:!0});if(r){let mr=!1;if(Ye.response.headers.has("X-Remix-Reload-Document"))mr=!0;else if(iw(hr)){const ni=nz(hr,!0);mr=ni.origin!==t.location.origin||gu(ni.pathname,P)==null}if(mr){Sr?t.location.replace(hr):t.location.assign(hr);return}}Ee=null;let Bt=Sr===!0||Ye.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Zt,formAction:dr,formEncType:Fr}=re.navigation;!We&&!Gt&&Zt&&dr&&Fr&&(We=Jk(re.navigation));let Yr=We||Gt;if(q$.has(Ye.response.status)&&Yr&&xs(Yr.formMethod))await tn(Bt,xt,{submission:{...Yr,formAction:hr},preventScrollReset:cr||$e,enableViewTransition:mt?Ne:void 0});else{let mr=dS(xt,We);await tn(Bt,xt,{overrideNavigation:mr,fetcherSubmission:Gt,preventScrollReset:cr||$e,enableViewTransition:mt?Ne:void 0})}}async function zt(Ie,Ye,mt,We){let Gt,cr={};try{Gt=await eU(S,Ie,Ye,We,mt,!1)}catch(Sr){return Ye.filter(hr=>hr.shouldLoad).forEach(hr=>{cr[hr.route.id]={type:"error",error:Sr}}),cr}if(Ie.signal.aborted)return cr;for(let[Sr,hr]of Object.entries(Gt))if(cU(hr)){let xt=hr.result;cr[Sr]={type:"redirect",response:iU(xt,Ie,Sr,Ye,P)}}else cr[Sr]=await nU(hr);return cr}async function ze(Ie,Ye,mt,We){let Gt=zt(mt,Ie,We,null),cr=Promise.all(Ye.map(async xt=>{if(xt.matches&&xt.match&&xt.request&&xt.controller){let Zt=(await zt(xt.request,xt.matches,We,xt.key))[xt.match.route.id];return{[xt.key]:Zt}}else return Promise.resolve({[xt.key]:{type:"error",error:du(404,{pathname:xt.path})}})})),Sr=await Gt,hr=(await cr).reduce((xt,Bt)=>Object.assign(xt,Bt),{});return{loaderResults:Sr,fetcherResults:hr}}function ue(){gt=!0,Mt.forEach((Ie,Ye)=>{je.has(Ye)&&wt.add(Ye),Ve(Ye)})}function le(Ie,Ye,mt={}){re.fetchers.set(Ie,Ye),St({fetchers:new Map(re.fetchers)},{flushSync:(mt&&mt.flushSync)===!0})}function pe(Ie,Ye,mt,We={}){let Gt=tp(re.matches,Ye);Je(Ie),St({errors:{[Gt.route.id]:mt},fetchers:new Map(re.fetchers)},{flushSync:(We&&We.flushSync)===!0})}function Me(Ie){return Dt.set(Ie,(Dt.get(Ie)||0)+1),Ke.has(Ie)&&Ke.delete(Ie),re.fetchers.get(Ie)||G$}function Ae(Ie,Ye){Ve(Ie,Ye==null?void 0:Ye.reason),le(Ie,pd(null))}function Je(Ie){let Ye=re.fetchers.get(Ie);je.has(Ie)&&!(Ye&&Ye.state==="loading"&&Oe.has(Ie))&&Ve(Ie),Mt.delete(Ie),Oe.delete(Ie),et.delete(Ie),Ke.delete(Ie),wt.delete(Ie),re.fetchers.delete(Ie)}function Ze(Ie){let Ye=(Dt.get(Ie)||0)-1;Ye<=0?(Dt.delete(Ie),Ke.add(Ie)):Dt.set(Ie,Ye),St({fetchers:new Map(re.fetchers)})}function Ve(Ie,Ye){let mt=je.get(Ie);mt&&(mt.abort(Ye),je.delete(Ie))}function it(Ie){for(let Ye of Ie){let mt=Me(Ye),We=pd(mt.data);re.fetchers.set(Ye,We)}}function At(){let Ie=[],Ye=!1;for(let mt of et){let We=re.fetchers.get(mt);dn(We,`Expected fetcher: ${mt}`),We.state==="loading"&&(et.delete(mt),Ie.push(mt),Ye=!0)}return it(Ie),Ye}function Pt(Ie){let Ye=[];for(let[mt,We]of Oe)if(We<Ie){let Gt=re.fetchers.get(mt);dn(Gt,`Expected fetcher: ${mt}`),Gt.state==="loading"&&(Ve(mt),Oe.delete(mt),Ye.push(mt))}return it(Ye),Ye.length>0}function Xt(Ie,Ye){let mt=re.blockers.get(Ie)||Ov;return tr.get(Ie)!==Ye&&tr.set(Ie,Ye),mt}function or(Ie){re.blockers.delete(Ie),tr.delete(Ie)}function Mr(Ie,Ye){let mt=re.blockers.get(Ie)||Ov;dn(mt.state==="unblocked"&&Ye.state==="blocked"||mt.state==="blocked"&&Ye.state==="blocked"||mt.state==="blocked"&&Ye.state==="proceeding"||mt.state==="blocked"&&Ye.state==="unblocked"||mt.state==="proceeding"&&Ye.state==="unblocked",`Invalid blocker state transition: ${mt.state} -> ${Ye.state}`);let We=new Map(re.blockers);We.set(Ie,Ye),St({blockers:We})}function Kr({currentLocation:Ie,nextLocation:Ye,historyAction:mt}){if(tr.size===0)return;tr.size>1&&ca(!1,"A router only supports one blocker at a time");let We=Array.from(tr.entries()),[Gt,cr]=We[We.length-1],Sr=re.blockers.get(Gt);if(!(Sr&&Sr.state==="proceeding")&&cr({currentLocation:Ie,nextLocation:Ye,historyAction:mt}))return Gt}function Ur(Ie){let Ye=du(404,{pathname:Ie}),mt=_||o,{matches:We,route:Gt}=Q0(mt);return{notFoundMatches:We,route:Gt,error:Ye}}function tt(Ie,Ye,mt){if(F=Ie,D=Ye,B=mt||null,!H&&re.navigation===hS){H=!0;let We=Ir(re.location,re.matches);We!=null&&St({restoreScrollPosition:We})}return()=>{F=null,D=null,B=null}}function sn(Ie,Ye){return B&&B(Ie,Ye.map(We=>m$(We,re.loaderData)))||Ie.key}function ri(Ie,Ye){if(F&&D){let mt=sn(Ie,Ye);F[mt]=D()}}function Ir(Ie,Ye){if(F){let mt=sn(Ie,Ye),We=F[mt];if(typeof We=="number")return We}return null}function Zr(Ie,Ye,mt){if(e.patchRoutesOnNavigation)if(Ie){if(Object.keys(Ie[0].params).length>0)return{active:!0,matches:Xv(Ye,mt,P,!0)}}else return{active:!0,matches:Xv(Ye,mt,P,!0)||[]};return{active:!1,matches:null}}async function Vn(Ie,Ye,mt,We){if(!e.patchRoutesOnNavigation)return{type:"success",matches:Ie};let Gt=Ie;for(;;){let cr=_==null,Sr=_||o,hr=d;try{await e.patchRoutesOnNavigation({signal:mt,path:Ye,matches:Gt,fetcherKey:We,patch:(Zt,dr)=>{mt.aborted||Uk(Zt,dr,Sr,hr,h,!1)}})}catch(Zt){return{type:"error",error:Zt,partialMatches:Gt}}finally{cr&&!mt.aborted&&(o=[...o])}if(mt.aborted)return{type:"aborted"};let xt=ep(Sr,Ye,P),Bt=null;if(xt){if(Object.keys(xt[0].params).length===0)return{type:"success",matches:xt};if(Bt=Xv(Sr,Ye,P,!0),!(Bt&&Gt.length<Bt.length&&yn(Gt,Bt.slice(0,Gt.length))))return{type:"success",matches:xt}}if(Bt||(Bt=Xv(Sr,Ye,P,!0)),!Bt||yn(Gt,Bt))return{type:"success",matches:null};Gt=Bt}}function yn(Ie,Ye){return Ie.length===Ye.length&&Ie.every((mt,We)=>mt.route.id===Ye[We].route.id)}function ln(Ie){d={},_=o_(Ie,h,void 0,d)}function ur(Ie,Ye,mt=!1){let We=_==null;Uk(Ie,Ye,_||o,d,h,mt),We&&(o=[...o],St({}))}return he={get basename(){return P},get future(){return M},get state(){return re},get routes(){return o},get window(){return t},initialize:ct,subscribe:ir,enableScrollRestoration:tt,navigate:Tr,fetch:rt,revalidate:wr,createHref:Ie=>e.history.createHref(Ie),encodeLocation:Ie=>e.history.encodeLocation(Ie),getFetcher:Me,resetFetcher:Ae,deleteFetcher:Ze,dispose:Lt,getBlocker:Xt,deleteBlocker:or,patchRoutes:ur,_internalFetchControllers:je,_internalSetRoutes:ln,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ie){St(Ie)}},e.unstable_instrumentations&&(he=R$(he,e.unstable_instrumentations.map(Ie=>Ie.router).filter(Boolean))),he}function Z$(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function c2(e,t,r,n,u,h){let d,o;if(u){d=[];for(let P of t)if(d.push(P),P.route.id===u){o=P;break}}else d=t,o=t[t.length-1];let _=ow(n||".",aw(d),gu(e.pathname,r)||e.pathname,h==="path");if(n==null&&(_.search=e.search,_.hash=e.hash),(n==null||n===""||n===".")&&o){let P=HE(_.search);if(o.route.index&&!P)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&P){let S=new URLSearchParams(_.search),M=S.getAll("index");S.delete("index"),M.filter(z=>z).forEach(z=>S.append("index",z));let O=S.toString();_.search=O?`?${O}`:""}}return r!=="/"&&(_.pathname=M$({basename:r,pathname:_.pathname})),_h(_)}function Vk(e,t,r){if(!r||!Z$(r))return{path:t};if(r.formMethod&&!hU(r.formMethod))return{path:t,error:du(405,{method:r.formMethod})};let n=()=>({path:t,error:du(400,{type:"invalid-body"})}),h=(r.formMethod||"get").toUpperCase(),d=gz(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!xs(h))return n();let M=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((O,[z,F])=>`${O}${z}=${F}
`,""):String(r.body);return{path:t,submission:{formMethod:h,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:M}}}else if(r.formEncType==="application/json"){if(!xs(h))return n();try{let M=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:h,formAction:d,formEncType:r.formEncType,formData:void 0,json:M,text:void 0}}}catch{return n()}}}dn(typeof FormData=="function","FormData is not available in this environment");let o,_;if(r.formData)o=f2(r.formData),_=r.formData;else if(r.body instanceof FormData)o=f2(r.body),_=r.body;else if(r.body instanceof URLSearchParams)o=r.body,_=Zk(o);else if(r.body==null)o=new URLSearchParams,_=new FormData;else try{o=new URLSearchParams(r.body),_=Zk(o)}catch{return n()}let P={formMethod:h,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:_,json:void 0,text:void 0};if(xs(P.formMethod))return{path:t,submission:P};let S=wp(t);return e&&S.search&&HE(S.search)&&o.append("index",""),S.search=`?${o}`,{path:_h(S),submission:P}}function $k(e,t,r,n,u,h,d,o,_,P,S,M,O,z,F,B,D,H,Q,te){var ut;let ie=te?Pl(te[1])?te[1].error:te[1].data:void 0,ae=u.createURL(h.location),he=u.createURL(_),re;if(S&&h.errors){let pt=Object.keys(h.errors)[0];re=d.findIndex(gt=>gt.route.id===pt)}else if(te&&Pl(te[1])){let pt=te[0];re=d.findIndex(gt=>gt.route.id===pt)-1}let be=te?te[1].statusCode:void 0,xe=be&&be>=400,$e={currentUrl:ae,currentParams:((ut=h.matches[0])==null?void 0:ut.params)||{},nextUrl:he,nextParams:d[0].params,...o,actionResult:ie,actionStatus:be},Ee=A_(d),Ne=d.map((pt,gt)=>{let{route:wt}=pt,je=null;if(re!=null&&gt>re?je=!1:wt.lazy?je=!0:WE(wt)?S?je=h2(wt,h.loaderData,h.errors):K$(h.loaderData,h.matches[gt],pt)&&(je=!0):je=!1,je!==null)return d2(r,n,e,Ee,pt,P,t,je);let Qe=xe?!1:M||ae.pathname+ae.search===he.pathname+he.search||ae.search!==he.search||X$(h.matches[gt],pt),yt={...$e,defaultShouldRevalidate:Qe},Oe=Ux(pt,yt);return d2(r,n,e,Ee,pt,P,t,Oe,yt)}),Xe=[];return F.forEach((pt,gt)=>{if(S||!d.some(Dt=>Dt.route.id===pt.routeId)||z.has(gt))return;let wt=h.fetchers.get(gt),je=wt&&wt.state!=="idle"&&wt.data===void 0,Qe=ep(D,pt.path,H);if(!Qe){if(Q&&je)return;Xe.push({key:gt,routeId:pt.routeId,path:pt.path,matches:null,match:null,request:null,controller:null});return}if(B.has(gt))return;let yt=Cx(Qe,pt.path),Oe=new AbortController,et=Qg(u,pt.path,Oe.signal),Mt=null;if(O.has(gt))O.delete(gt),Mt=oy(r,n,et,Qe,yt,P,t);else if(je)M&&(Mt=oy(r,n,et,Qe,yt,P,t));else{let Dt={...$e,defaultShouldRevalidate:xe?!1:M};Ux(yt,Dt)&&(Mt=oy(r,n,et,Qe,yt,P,t,Dt))}Mt&&Xe.push({key:gt,routeId:pt.routeId,path:pt.path,matches:Mt,match:yt,request:et,controller:Oe})}),{dsMatches:Ne,revalidatingFetchers:Xe}}function WE(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function h2(e,t,r){if(e.lazy)return!0;if(!WE(e))return!1;let n=t!=null&&e.id in t,u=r!=null&&r[e.id]!==void 0;return!n&&u?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!u}function K$(e,t,r){let n=!t||r.route.id!==t.route.id,u=!e.hasOwnProperty(r.route.id);return n||u}function X$(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ux(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function Uk(e,t,r,n,u,h){let d;if(e){let P=n[e];dn(P,`No route found to patch children into: routeId = ${e}`),P.children||(P.children=[]),d=P.children}else d=r;let o=[],_=[];if(t.forEach(P=>{let S=d.find(M=>hz(P,M));S?_.push({existingRoute:S,newRoute:P}):o.push(P)}),o.length>0){let P=o_(o,u,[e||"_","patch",String((d==null?void 0:d.length)||"0")],n);d.push(...P)}if(h&&_.length>0)for(let P=0;P<_.length;P++){let{existingRoute:S,newRoute:M}=_[P],O=S,[z]=o_([M],u,[],{},!0);Object.assign(O,{element:z.element?z.element:O.element,errorElement:z.errorElement?z.errorElement:O.errorElement,hydrateFallbackElement:z.hydrateFallbackElement?z.hydrateFallbackElement:O.hydrateFallbackElement})}}function hz(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var u;return(u=t.children)==null?void 0:u.some(h=>hz(r,h))}):!1}var qk=new WeakMap,dz=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let u=r[t.id];if(dn(u,"No route found in manifest"),!u.lazy||typeof u.lazy!="object")return;let h=u.lazy[e];if(!h)return;let d=qk.get(u);d||(d={},qk.set(u,d));let o=d[e];if(o)return o;let _=(async()=>{let P=h$(e),M=u[e]!==void 0&&e!=="hasErrorBoundary";if(P)ca(!P,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),d[e]=Promise.resolve();else if(M)ca(!1,`Route "${u.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let O=await h();O!=null&&(Object.assign(u,{[e]:O}),Object.assign(u,n(u)))}typeof u.lazy=="object"&&(u.lazy[e]=void 0,Object.values(u.lazy).every(O=>O===void 0)&&(u.lazy=void 0))})();return d[e]=_,_},Gk=new WeakMap;function Y$(e,t,r,n,u){let h=r[e.id];if(dn(h,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let S=Gk.get(h);if(S)return{lazyRoutePromise:S,lazyHandlerPromise:S};let M=(async()=>{dn(typeof e.lazy=="function","No lazy route function found");let O=await e.lazy(),z={};for(let F in O){let B=O[F];if(B===void 0)continue;let D=f$(F),Q=h[F]!==void 0&&F!=="hasErrorBoundary";D?ca(!D,"Route property "+F+" is not a supported property to be returned from a lazy route function. This property will be ignored."):Q?ca(!Q,`Route "${h.id}" has a static property "${F}" defined but its lazy function is also returning a value for this property. The lazy route property "${F}" will be ignored.`):z[F]=B}Object.assign(h,z),Object.assign(h,{...n(h),lazy:void 0})})();return Gk.set(h,M),M.catch(()=>{}),{lazyRoutePromise:M,lazyHandlerPromise:M}}let d=Object.keys(e.lazy),o=[],_;for(let S of d){if(u&&u.includes(S))continue;let M=dz({key:S,route:e,manifest:r,mapRouteProperties:n});M&&(o.push(M),S===t&&(_=M))}let P=o.length>0?Promise.all(o).then(()=>{}):void 0;return P==null||P.catch(()=>{}),_==null||_.catch(()=>{}),{lazyRoutePromise:P,lazyHandlerPromise:_}}async function Wk(e){let t=e.matches.filter(u=>u.shouldLoad),r={};return(await Promise.all(t.map(u=>u.resolve()))).forEach((u,h)=>{r[t[h].route.id]=u}),r}async function Q$(e){return e.matches.some(t=>t.route.middleware)?fz(e,()=>Wk(e)):Wk(e)}function fz(e,t){return J$(e,t,n=>n,lU,r);function r(n,u,h){if(h)return Promise.resolve(Object.assign(h.value,{[u]:{type:"error",result:n}}));{let{matches:d}=e,o=Math.min(Math.max(d.findIndex(P=>P.route.id===u),0),Math.max(d.findIndex(P=>P.shouldCallHandler()),0)),_=tp(d,d[o].route.id).route.id;return Promise.resolve({[_]:{type:"error",result:n}})}}}async function J$(e,t,r,n,u){let{matches:h,request:d,params:o,context:_,unstable_pattern:P}=e,S=h.flatMap(O=>O.route.middleware?O.route.middleware.map(z=>[O.route.id,z]):[]);return await pz({request:d,params:o,context:_,unstable_pattern:P},S,t,r,n,u)}async function pz(e,t,r,n,u,h,d=0){let{request:o}=e;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let _=t[d];if(!_)return await r();let[P,S]=_,M,O=async()=>{if(M)throw new Error("You may only call `next()` once per middleware");try{return M={value:await pz(e,t,r,n,u,h,d+1)},M.value}catch(z){return M={value:await h(z,P,M)},M.value}};try{let z=await S(e,O),F=z!=null?n(z):void 0;return u(F)?F:M?F??M.value:(M={value:await O()},M.value)}catch(z){return await h(z,P,M)}}function mz(e,t,r,n,u){let h=dz({key:"middleware",route:n.route,manifest:t,mapRouteProperties:e}),d=Y$(n.route,xs(r.method)?"action":"loader",t,e,u);return{middleware:h,route:d.lazyRoutePromise,handler:d.lazyHandlerPromise}}function d2(e,t,r,n,u,h,d,o,_=null){let P=!1,S=mz(e,t,r,u,h);return{...u,_lazyPromises:S,shouldLoad:o,shouldRevalidateArgs:_,shouldCallHandler(M){return P=!0,_?typeof M=="boolean"?Ux(u,{..._,defaultShouldRevalidate:M}):Ux(u,_):o},resolve(M){let{lazy:O,loader:z,middleware:F}=u.route,B=P||o||M&&!xs(r.method)&&(O||z),D=F&&F.length>0&&!z&&!O;return B&&(xs(r.method)||!D)?tU({request:r,unstable_pattern:n,match:u,lazyHandlerPromise:S==null?void 0:S.handler,lazyRoutePromise:S==null?void 0:S.route,handlerOverride:M,scopedContext:d}):Promise.resolve({type:"data",result:void 0})}}}function oy(e,t,r,n,u,h,d,o=null){return n.map(_=>_.route.id!==u.route.id?{..._,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:mz(e,t,r,_,h),resolve:()=>Promise.resolve({type:"data",result:void 0})}:d2(e,t,r,A_(n),_,h,d,!0,o))}async function eU(e,t,r,n,u,h){r.some(P=>{var S;return(S=P._lazyPromises)==null?void 0:S.middleware})&&await Promise.all(r.map(P=>{var S;return(S=P._lazyPromises)==null?void 0:S.middleware}));let d={request:t,unstable_pattern:A_(r),params:r[0].params,context:u,matches:r},_=await e({...d,fetcherKey:n,runClientMiddleware:P=>{let S=d;return fz(S,()=>P({...S,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(P=>{var S,M;return[(S=P._lazyPromises)==null?void 0:S.handler,(M=P._lazyPromises)==null?void 0:M.route]}))}catch{}return _}async function tU({request:e,unstable_pattern:t,match:r,lazyHandlerPromise:n,lazyRoutePromise:u,handlerOverride:h,scopedContext:d}){let o,_,P=xs(e.method),S=P?"action":"loader",M=O=>{let z,F=new Promise((H,Q)=>z=Q);_=()=>z(),e.signal.addEventListener("abort",_);let B=H=>typeof O!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${S}" [routeId: ${r.route.id}]`)):O({request:e,unstable_pattern:t,params:r.params,context:d},...H!==void 0?[H]:[]),D=(async()=>{try{return{type:"data",result:await(h?h(Q=>B(Q)):B())}}catch(H){return{type:"error",result:H}}})();return Promise.race([D,F])};try{let O=P?r.route.action:r.route.loader;if(n||u)if(O){let z,[F]=await Promise.all([M(O).catch(B=>{z=B}),n,u]);if(z!==void 0)throw z;o=F}else{await n;let z=P?r.route.action:r.route.loader;if(z)[o]=await Promise.all([M(z),u]);else if(S==="action"){let F=new URL(e.url),B=F.pathname+F.search;throw du(405,{method:e.method,pathname:B,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(O)o=await M(O);else{let z=new URL(e.url),F=z.pathname+z.search;throw du(404,{pathname:F})}}catch(O){return{type:"error",result:O}}finally{_&&e.signal.removeEventListener("abort",_)}return o}async function rU(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function nU(e){var n,u,h,d,o;let{result:t,type:r}=e;if(yz(t)){let _;try{_=await rU(t)}catch(P){return{type:"error",error:P}}return r==="error"?{type:"error",error:new sw(t.status,t.statusText,_),statusCode:t.status,headers:t.headers}:{type:"data",data:_,statusCode:t.status,headers:t.headers}}return r==="error"?Qk(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}:{type:"error",error:sU(t),statusCode:s_(t)?t.status:void 0,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:s_(t)?t.status:void 0}:Qk(t)?{type:"data",data:t.data,statusCode:(d=t.init)==null?void 0:d.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function iU(e,t,r,n,u){let h=e.headers.get("Location");if(dn(h,"Redirects returned/thrown from loaders/actions must have a Location header"),!iw(h)){let d=n.slice(0,n.findIndex(o=>o.route.id===r)+1);h=c2(new URL(t.url),d,u,h),e.headers.set("Location",h)}return e}function Hk(e,t,r){if(iw(e)){let n=e,u=n.startsWith("//")?new URL(t.protocol+n):new URL(n),h=gu(u.pathname,r)!=null;if(u.origin===t.origin&&h)return u.pathname+u.search+u.hash}return e}function Qg(e,t,r,n){let u=e.createURL(gz(t)).toString(),h={signal:r};if(n&&xs(n.formMethod)){let{formMethod:d,formEncType:o}=n;h.method=d.toUpperCase(),o==="application/json"?(h.headers=new Headers({"Content-Type":o}),h.body=JSON.stringify(n.json)):o==="text/plain"?h.body=n.text:o==="application/x-www-form-urlencoded"&&n.formData?h.body=f2(n.formData):h.body=n.formData}return new Request(u,h)}function f2(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Zk(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function aU(e,t,r,n=!1,u=!1){let h={},d=null,o,_=!1,P={},S=r&&Pl(r[1])?r[1].error:void 0;return e.forEach(M=>{if(!(M.route.id in t))return;let O=M.route.id,z=t[O];if(dn(!Cm(z),"Cannot handle redirect results in processLoaderData"),Pl(z)){let F=z.error;if(S!==void 0&&(F=S,S=void 0),d=d||{},u)d[O]=F;else{let B=tp(e,O);d[B.route.id]==null&&(d[B.route.id]=F)}n||(h[O]=cz),_||(_=!0,o=s_(z.error)?z.error.status:500),z.headers&&(P[O]=z.headers)}else h[O]=z.data,z.statusCode&&z.statusCode!==200&&!_&&(o=z.statusCode),z.headers&&(P[O]=z.headers)}),S!==void 0&&r&&(d={[r[0]]:S},r[2]&&(h[r[2]]=void 0)),{loaderData:h,errors:d,statusCode:o||200,loaderHeaders:P}}function Kk(e,t,r,n,u,h){let{loaderData:d,errors:o}=aU(t,r,n);return u.filter(_=>!_.matches||_.matches.some(P=>P.shouldLoad)).forEach(_=>{let{key:P,match:S,controller:M}=_;if(M&&M.signal.aborted)return;let O=h[P];if(dn(O,"Did not find corresponding fetcher result"),Pl(O)){let z=tp(e.matches,S==null?void 0:S.route.id);o&&o[z.route.id]||(o={...o,[z.route.id]:O.error}),e.fetchers.delete(P)}else if(Cm(O))dn(!1,"Unhandled fetcher revalidation redirect");else{let z=pd(O.data);e.fetchers.set(P,z)}}),{loaderData:d,errors:o}}function Xk(e,t,r,n){let u=Object.entries(t).filter(([,h])=>h!==cz).reduce((h,[d,o])=>(h[d]=o,h),{});for(let h of r){let d=h.route.id;if(!t.hasOwnProperty(d)&&e.hasOwnProperty(d)&&h.route.loader&&(u[d]=e[d]),n&&n.hasOwnProperty(d))break}return u}function Yk(e){return e?Pl(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function tp(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Q0(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function du(e,{pathname:t,routeId:r,method:n,type:u,message:h}={}){let d="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(d="Bad Request",n&&t&&r?o=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:u==="invalid-body"&&(o="Unable to encode submission body")):e===403?(d="Forbidden",o=`Route "${r}" does not match URL "${t}"`):e===404?(d="Not Found",o=`No route matches URL "${t}"`):e===405&&(d="Method Not Allowed",n&&t&&r?o=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new sw(e||500,d,new Error(o),!0)}function J0(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,u]=t[r];if(Cm(u))return{key:n,result:u}}}function gz(e){let t=typeof e=="string"?wp(e):e;return _h({...t,hash:""})}function oU(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function sU(e){var t,r;return new sw(((t=e.init)==null?void 0:t.status)??500,((r=e.init)==null?void 0:r.statusText)??"Internal Server Error",e.data)}function lU(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&uU(r))}function uU(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function cU(e){return yz(e.result)&&U$.has(e.result.status)}function Pl(e){return e.type==="error"}function Cm(e){return(e&&e.type)==="redirect"}function Qk(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function yz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function hU(e){return $$.has(e.toUpperCase())}function xs(e){return B$.has(e.toUpperCase())}function HE(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Cx(e,t){let r=typeof t=="string"?wp(t).search:t.search;if(e[e.length-1].route.index&&HE(r||""))return e[e.length-1];let n=oz(e);return n[n.length-1]}function Jk(e){let{formMethod:t,formAction:r,formEncType:n,text:u,formData:h,json:d}=e;if(!(!t||!r||!n)){if(u!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:u};if(h!=null)return{formMethod:t,formAction:r,formEncType:n,formData:h,json:void 0,text:void 0};if(d!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:d,text:void 0}}}function dS(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function dU(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Lv(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function fU(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function pd(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function pU(e,t){try{let r=e.sessionStorage.getItem(uz);if(r){let n=JSON.parse(r);for(let[u,h]of Object.entries(n||{}))h&&Array.isArray(h)&&t.set(u,new Set(h||[]))}}catch{}}function mU(e,t){if(t.size>0){let r={};for(let[n,u]of t)r[n]=[...u];try{e.sessionStorage.setItem(uz,JSON.stringify(r))}catch(n){ca(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function eA(){let e,t,r=new Promise((n,u)=>{e=async h=>{n(h);try{await r}catch{}},t=async h=>{u(h);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var ng=A.createContext(null);ng.displayName="DataRouter";var I_=A.createContext(null);I_.displayName="DataRouterState";A.createContext(!1);var ZE=A.createContext({isTransitioning:!1});ZE.displayName="ViewTransition";var vz=A.createContext(new Map);vz.displayName="Fetchers";var gU=A.createContext(null);gU.displayName="Await";var bu=A.createContext(null);bu.displayName="Navigation";var lw=A.createContext(null);lw.displayName="Location";var Ec=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ec.displayName="Route";var KE=A.createContext(null);KE.displayName="RouteError";function yU(e,{relative:t}={}){dn(Ry(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=A.useContext(bu),{hash:u,pathname:h,search:d}=O_(e,{relative:t}),o=h;return r!=="/"&&(o=h==="/"?r:yh([r,h])),n.createHref({pathname:o,search:d,hash:u})}function Ry(){return A.useContext(lw)!=null}function tl(){return dn(Ry(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(lw).location}var _z="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xz(e){A.useContext(bu).static||A.useLayoutEffect(e)}function Sp(){let{isDataRoute:e}=A.useContext(Ec);return e?OU():vU()}function vU(){dn(Ry(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(ng),{basename:t,navigator:r}=A.useContext(bu),{matches:n}=A.useContext(Ec),{pathname:u}=tl(),h=JSON.stringify(aw(n)),d=A.useRef(!1);return xz(()=>{d.current=!0}),A.useCallback((_,P={})=>{if(ca(d.current,_z),!d.current)return;if(typeof _=="number"){r.go(_);return}let S=ow(_,JSON.parse(h),u,P.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:yh([t,S.pathname])),(P.replace?r.replace:r.push)(S,P.state,P)},[t,r,h,u,e])}var _U=A.createContext(null);function xU(e){let t=A.useContext(Ec).outlet;return A.useMemo(()=>t&&A.createElement(_U.Provider,{value:e},t),[t,e])}function O_(e,{relative:t}={}){let{matches:r}=A.useContext(Ec),{pathname:n}=tl(),u=JSON.stringify(aw(r));return A.useMemo(()=>ow(e,JSON.parse(u),n,t==="path"),[e,u,n,t])}function bU(e,t,r,n,u){dn(Ry(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=A.useContext(bu),{matches:d}=A.useContext(Ec),o=d[d.length-1],_=o?o.params:{},P=o?o.pathname:"/",S=o?o.pathnameBase:"/",M=o&&o.route;{let Q=M&&M.path||"";bz(P,!M||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${P}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let O=tl(),z;z=O;let F=z.pathname||"/",B=F;if(S!=="/"){let Q=S.replace(/^\//,"").split("/");B="/"+F.replace(/^\//,"").split("/").slice(Q.length).join("/")}let D=ep(e,{pathname:B});return ca(M||D!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),ca(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),CU(D&&D.map(Q=>Object.assign({},Q,{params:Object.assign({},_,Q.params),pathname:yh([S,h.encodeLocation?h.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?S:yh([S,h.encodeLocation?h.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),d,r,n,u)}function wU(){let e=IU(),t=s_(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:n},h={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:h},"ErrorBoundary")," or"," ",A.createElement("code",{style:h},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:u},r):null,d)}var SU=A.createElement(wU,null),PU=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?A.createElement(Ec.Provider,{value:this.props.routeContext},A.createElement(KE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EU({routeContext:e,match:t,children:r}){let n=A.useContext(ng);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Ec.Provider,{value:e},r)}function CU(e,t=[],r=null,n=null,u=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,d=r==null?void 0:r.errors;if(d!=null){let S=h.findIndex(M=>M.route.id&&(d==null?void 0:d[M.route.id])!==void 0);dn(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),h=h.slice(0,Math.min(h.length,S+1))}let o=!1,_=-1;if(r)for(let S=0;S<h.length;S++){let M=h[S];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(_=S),M.route.id){let{loaderData:O,errors:z}=r,F=M.route.loader&&!O.hasOwnProperty(M.route.id)&&(!z||z[M.route.id]===void 0);if(M.route.lazy||F){o=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}let P=r&&n?(S,M)=>{var O,z;n(S,{location:r.location,params:((z=(O=r.matches)==null?void 0:O[0])==null?void 0:z.params)??{},unstable_pattern:A_(r.matches),errorInfo:M})}:void 0;return h.reduceRight((S,M,O)=>{let z,F=!1,B=null,D=null;r&&(z=d&&M.route.id?d[M.route.id]:void 0,B=M.route.errorElement||SU,o&&(_<0&&O===0?(bz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,D=null):_===O&&(F=!0,D=M.route.hydrateFallbackElement||null)));let H=t.concat(h.slice(0,O+1)),Q=()=>{let te;return z?te=B:F?te=D:M.route.Component?te=A.createElement(M.route.Component,null):M.route.element?te=M.route.element:te=S,A.createElement(EU,{match:M,routeContext:{outlet:S,matches:H,isDataRoute:r!=null},children:te})};return r&&(M.route.ErrorBoundary||M.route.errorElement||O===0)?A.createElement(PU,{location:r.location,revalidation:r.revalidation,component:B,error:z,children:Q(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:P}):Q()},null)}function XE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TU(e){let t=A.useContext(ng);return dn(t,XE(e)),t}function MU(e){let t=A.useContext(I_);return dn(t,XE(e)),t}function kU(e){let t=A.useContext(Ec);return dn(t,XE(e)),t}function YE(e){let t=kU(e),r=t.matches[t.matches.length-1];return dn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function AU(){return YE("useRouteId")}function IU(){var n;let e=A.useContext(KE),t=MU("useRouteError"),r=YE("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function OU(){let{router:e}=TU("useNavigate"),t=YE("useNavigate"),r=A.useRef(!1);return xz(()=>{r.current=!0}),A.useCallback(async(u,h={})=>{ca(r.current,_z),r.current&&(typeof u=="number"?await e.navigate(u):await e.navigate(u,{fromRouteId:t,...h}))},[e,t])}var tA={};function bz(e,t,r){!t&&!tA[e]&&(tA[e]=!0,ca(!1,r))}var rA={};function nA(e,t){!e&&!rA[t]&&(rA[t]=!0,console.warn(t))}var LU="useOptimistic",iA=GE[LU],DU=()=>{};function RU(e){return iA?iA(e):[e,DU]}function jU(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&ca(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:A.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&ca(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:A.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&ca(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:A.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var zU=["HydrateFallback","hydrateFallbackElement"],NU=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function FU({router:e,flushSync:t,unstable_onError:r,unstable_useTransitions:n}){let[u,h]=A.useState(e.state),[d,o]=RU(u),[_,P]=A.useState(),[S,M]=A.useState({isTransitioning:!1}),[O,z]=A.useState(),[F,B]=A.useState(),[D,H]=A.useState(),Q=A.useRef(new Map),te=A.useCallback((re,{deletedFetchers:be,newErrors:xe,flushSync:$e,viewTransitionOpts:Ee})=>{xe&&r&&Object.values(xe).forEach(Xe=>{var ut;return r(Xe,{location:re.location,params:((ut=re.matches[0])==null?void 0:ut.params)??{},unstable_pattern:A_(re.matches)})}),re.fetchers.forEach((Xe,ut)=>{Xe.data!==void 0&&Q.current.set(ut,Xe.data)}),be.forEach(Xe=>Q.current.delete(Xe)),nA($e===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Ne=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(nA(Ee==null||Ne,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!Ee||!Ne){t&&$e?t(()=>h(re)):n===!1?h(re):A.startTransition(()=>{n===!0&&o(Xe=>aA(Xe,re)),h(re)});return}if(t&&$e){t(()=>{F&&(O==null||O.resolve(),F.skipTransition()),M({isTransitioning:!0,flushSync:!0,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})});let Xe=e.window.document.startViewTransition(()=>{t(()=>h(re))});Xe.finished.finally(()=>{t(()=>{z(void 0),B(void 0),P(void 0),M({isTransitioning:!1})})}),t(()=>B(Xe));return}F?(O==null||O.resolve(),F.skipTransition(),H({state:re,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})):(P(re),M({isTransitioning:!0,flushSync:!1,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation}))},[e.window,t,F,O,n,o,r]);A.useLayoutEffect(()=>e.subscribe(te),[e,te]),A.useEffect(()=>{S.isTransitioning&&!S.flushSync&&z(new NU)},[S]),A.useEffect(()=>{if(O&&_&&e.window){let re=_,be=O.promise,xe=e.window.document.startViewTransition(async()=>{n===!1?h(re):A.startTransition(()=>{n===!0&&o($e=>aA($e,re)),h(re)}),await be});xe.finished.finally(()=>{z(void 0),B(void 0),P(void 0),M({isTransitioning:!1})}),B(xe)}},[_,O,e.window,n,o]),A.useEffect(()=>{O&&_&&d.location.key===_.location.key&&O.resolve()},[O,F,d.location,_]),A.useEffect(()=>{!S.isTransitioning&&D&&(P(D.state),M({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}),H(void 0))},[S.isTransitioning,D]);let ie=A.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:re=>e.navigate(re),push:(re,be,xe)=>e.navigate(re,{state:be,preventScrollReset:xe==null?void 0:xe.preventScrollReset}),replace:(re,be,xe)=>e.navigate(re,{replace:!0,state:be,preventScrollReset:xe==null?void 0:xe.preventScrollReset})}),[e]),ae=e.basename||"/",he=A.useMemo(()=>({router:e,navigator:ie,static:!1,basename:ae,unstable_onError:r}),[e,ie,ae,r]);return A.createElement(A.Fragment,null,A.createElement(ng.Provider,{value:he},A.createElement(I_.Provider,{value:d},A.createElement(vz.Provider,{value:Q.current},A.createElement(ZE.Provider,{value:S},A.createElement($U,{basename:ae,location:d.location,navigationType:d.historyAction,navigator:ie,unstable_useTransitions:n===!0},A.createElement(BU,{routes:e.routes,future:e.future,state:d,unstable_onError:r})))))),null)}function aA(e,t){return{...e,navigation:t.navigation.state!=="idle"?t.navigation:e.navigation,revalidation:t.revalidation!=="idle"?t.revalidation:e.revalidation,actionData:t.navigation.state!=="submitting"?t.actionData:e.actionData,fetchers:t.fetchers}}var BU=A.memo(VU);function VU({routes:e,future:t,state:r,unstable_onError:n}){return bU(e,void 0,r,n,t)}function QE({to:e,replace:t,state:r,relative:n}){dn(Ry(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=A.useContext(bu);ca(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=A.useContext(Ec),{pathname:d}=tl(),o=Sp(),_=ow(e,aw(h),d,n==="path"),P=JSON.stringify(_);return A.useEffect(()=>{o(JSON.parse(P),{replace:t,state:r,relative:n})},[o,P,n,t,r]),null}function wz(e){return xU(e.context)}function $U({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:u,static:h=!1,unstable_useTransitions:d}){dn(!Ry(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),_=A.useMemo(()=>({basename:o,navigator:u,static:h,unstable_useTransitions:d,future:{}}),[o,u,h,d]);typeof r=="string"&&(r=wp(r));let{pathname:P="/",search:S="",hash:M="",state:O=null,key:z="default"}=r,F=A.useMemo(()=>{let B=gu(P,o);return B==null?null:{location:{pathname:B,search:S,hash:M,state:O,key:z},navigationType:n}},[o,P,S,M,O,z,n]);return ca(F!=null,`<Router basename="${o}"> is not able to match the URL "${P}${S}${M}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:A.createElement(bu.Provider,{value:_},A.createElement(lw.Provider,{children:t,value:F}))}var Tx="get",Mx="application/x-www-form-urlencoded";function uw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function UU(e){return uw(e)&&e.tagName.toLowerCase()==="button"}function qU(e){return uw(e)&&e.tagName.toLowerCase()==="form"}function GU(e){return uw(e)&&e.tagName.toLowerCase()==="input"}function WU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HU(e,t){return e.button===0&&(!t||t==="_self")&&!WU(e)}var ex=null;function ZU(){if(ex===null)try{new FormData(document.createElement("form"),0),ex=!1}catch{ex=!0}return ex}var KU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fS(e){return e!=null&&!KU.has(e)?(ca(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mx}"`),null):e}function XU(e,t){let r,n,u,h,d;if(qU(e)){let o=e.getAttribute("action");n=o?gu(o,t):null,r=e.getAttribute("method")||Tx,u=fS(e.getAttribute("enctype"))||Mx,h=new FormData(e)}else if(UU(e)||GU(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=e.getAttribute("formaction")||o.getAttribute("action");if(n=_?gu(_,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Tx,u=fS(e.getAttribute("formenctype"))||fS(o.getAttribute("enctype"))||Mx,h=new FormData(o,e),!ZU()){let{name:P,type:S,value:M}=e;if(S==="image"){let O=P?`${P}.`:"";h.append(`${O}x`,"0"),h.append(`${O}y`,"0")}else P&&h.append(P,M)}}else{if(uw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Tx,n=null,u=Mx,d=e}return h&&u==="text/plain"&&(d=h,h=void 0),{action:n,method:r.toLowerCase(),encType:u,formData:h,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function JE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function YU(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&gu(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function QU(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JU(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function e8(e,t,r){let n=await Promise.all(e.map(async u=>{let h=t.routes[u.route.id];if(h){let d=await QU(h,r);return d.links?d.links():[]}return[]}));return i8(n.flat(1).filter(JU).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function oA(e,t,r,n,u,h){let d=(_,P)=>r[P]?_.route.id!==r[P].route.id:!0,o=(_,P)=>{var S;return r[P].pathname!==_.pathname||((S=r[P].route.path)==null?void 0:S.endsWith("*"))&&r[P].params["*"]!==_.params["*"]};return h==="assets"?t.filter((_,P)=>d(_,P)||o(_,P)):h==="data"?t.filter((_,P)=>{var M;let S=n.routes[_.route.id];if(!S||!S.hasLoader)return!1;if(d(_,P)||o(_,P))return!0;if(_.route.shouldRevalidate){let O=_.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((M=r[0])==null?void 0:M.params)||{},nextUrl:new URL(e,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function t8(e,t,{includeHydrateFallback:r}={}){return r8(e.map(n=>{let u=t.routes[n.route.id];if(!u)return[];let h=[u.module];return u.clientActionModule&&(h=h.concat(u.clientActionModule)),u.clientLoaderModule&&(h=h.concat(u.clientLoaderModule)),r&&u.hydrateFallbackModule&&(h=h.concat(u.hydrateFallbackModule)),u.imports&&(h=h.concat(u.imports)),h}).flat(1))}function r8(e){return[...new Set(e)]}function n8(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function i8(e,t){let r=new Set;return new Set(t),e.reduce((n,u)=>{let h=JSON.stringify(n8(u));return r.has(h)||(r.add(h),n.push({key:h,link:u})),n},[])}function Sz(){let e=A.useContext(ng);return JE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function a8(){let e=A.useContext(I_);return JE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eC=A.createContext(void 0);eC.displayName="FrameworkContext";function Pz(){let e=A.useContext(eC);return JE(e,"You must render this element inside a <HydratedRouter> element"),e}function o8(e,t){let r=A.useContext(eC),[n,u]=A.useState(!1),[h,d]=A.useState(!1),{onFocus:o,onBlur:_,onMouseEnter:P,onMouseLeave:S,onTouchStart:M}=t,O=A.useRef(null);A.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let B=H=>{H.forEach(Q=>{d(Q.isIntersecting)})},D=new IntersectionObserver(B,{threshold:.5});return O.current&&D.observe(O.current),()=>{D.disconnect()}}},[e]),A.useEffect(()=>{if(n){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[n]);let z=()=>{u(!0)},F=()=>{u(!1),d(!1)};return r?e!=="intent"?[h,O,{}]:[h,O,{onFocus:Dv(o,z),onBlur:Dv(_,F),onMouseEnter:Dv(P,z),onMouseLeave:Dv(S,F),onTouchStart:Dv(M,z)}]:[!1,O,{}]}function Dv(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function s8({page:e,...t}){let{router:r}=Sz(),n=A.useMemo(()=>ep(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?A.createElement(u8,{page:e,matches:n,...t}):null}function l8(e){let{manifest:t,routeModules:r}=Pz(),[n,u]=A.useState([]);return A.useEffect(()=>{let h=!1;return e8(e,t,r).then(d=>{h||u(d)}),()=>{h=!0}},[e,t,r]),n}function u8({page:e,matches:t,...r}){let n=tl(),{manifest:u,routeModules:h}=Pz(),{basename:d}=Sz(),{loaderData:o,matches:_}=a8(),P=A.useMemo(()=>oA(e,t,_,u,n,"data"),[e,t,_,u,n]),S=A.useMemo(()=>oA(e,t,_,u,n,"assets"),[e,t,_,u,n]),M=A.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let F=new Set,B=!1;if(t.forEach(H=>{var te;let Q=u.routes[H.route.id];!Q||!Q.hasLoader||(!P.some(ie=>ie.route.id===H.route.id)&&H.route.id in o&&((te=h[H.route.id])!=null&&te.shouldRevalidate)||Q.hasClientLoader?B=!0:F.add(H.route.id))}),F.size===0)return[];let D=YU(e,d,"data");return B&&F.size>0&&D.searchParams.set("_routes",t.filter(H=>F.has(H.route.id)).map(H=>H.route.id).join(",")),[D.pathname+D.search]},[d,o,n,u,P,t,e,h]),O=A.useMemo(()=>t8(S,u),[S,u]),z=l8(S);return A.createElement(A.Fragment,null,M.map(F=>A.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...r})),O.map(F=>A.createElement("link",{key:F,rel:"modulepreload",href:F,...r})),z.map(({key:F,link:B})=>A.createElement("link",{key:F,nonce:r.nonce,...B})))}function c8(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Ez=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ez&&(window.__reactRouterVersion="7.10.1")}catch{}function h8(e,t){return H$({basename:t==null?void 0:t.basename,getContext:t==null?void 0:t.getContext,future:t==null?void 0:t.future,history:s$({window:t==null?void 0:t.window}),hydrationData:d8(),routes:e,mapRouteProperties:jU,hydrationRouteProperties:zU,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window,unstable_instrumentations:t==null?void 0:t.unstable_instrumentations}).initialize()}function d8(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:f8(e.errors)}),e}function f8(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,u]of t)if(u&&u.__type==="RouteErrorResponse")r[n]=new sw(u.status,u.statusText,u.data,u.internal===!0);else if(u&&u.__type==="Error"){if(u.__subType){let h=window[u.__subType];if(typeof h=="function")try{let d=new h(u.message);d.stack="",r[n]=d}catch{}}if(r[n]==null){let h=new Error(u.message);h.stack="",r[n]=h}}else r[n]=u;return r}var Cz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wc=A.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:u,reloadDocument:h,replace:d,state:o,target:_,to:P,preventScrollReset:S,viewTransition:M,...O},z){let{basename:F,unstable_useTransitions:B}=A.useContext(bu),D=typeof P=="string"&&Cz.test(P),H,Q=!1;if(typeof P=="string"&&D&&(H=P,Ez))try{let $e=new URL(window.location.href),Ee=P.startsWith("//")?new URL($e.protocol+P):new URL(P),Ne=gu(Ee.pathname,F);Ee.origin===$e.origin&&Ne!=null?P=Ne+Ee.search+Ee.hash:Q=!0}catch{ca(!1,`<Link to="${P}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=yU(P,{relative:u}),[ie,ae,he]=o8(n,O),re=g8(P,{replace:d,state:o,target:_,preventScrollReset:S,relative:u,viewTransition:M,unstable_useTransitions:B});function be($e){t&&t($e),$e.defaultPrevented||re($e)}let xe=A.createElement("a",{...O,...he,href:H||te,onClick:Q||h?t:be,ref:c8(z,ae),target:_,"data-discover":!D&&r==="render"?"true":void 0});return ie&&!D?A.createElement(A.Fragment,null,xe,A.createElement(s8,{page:te})):xe});wc.displayName="Link";var kx=A.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:u=!1,style:h,to:d,viewTransition:o,children:_,...P},S){let M=O_(d,{relative:P.relative}),O=tl(),z=A.useContext(I_),{navigator:F,basename:B}=A.useContext(bu),D=z!=null&&b8(M)&&o===!0,H=F.encodeLocation?F.encodeLocation(M).pathname:M.pathname,Q=O.pathname,te=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;r||(Q=Q.toLowerCase(),te=te?te.toLowerCase():null,H=H.toLowerCase()),te&&B&&(te=gu(te,B)||te);const ie=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ae=Q===H||!u&&Q.startsWith(H)&&Q.charAt(ie)==="/",he=te!=null&&(te===H||!u&&te.startsWith(H)&&te.charAt(H.length)==="/"),re={isActive:ae,isPending:he,isTransitioning:D},be=ae?t:void 0,xe;typeof n=="function"?xe=n(re):xe=[n,ae?"active":null,he?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let $e=typeof h=="function"?h(re):h;return A.createElement(wc,{...P,"aria-current":be,className:xe,ref:S,style:$e,to:d,viewTransition:o},typeof _=="function"?_(re):_)});kx.displayName="NavLink";var p8=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:u,state:h,method:d=Tx,action:o,onSubmit:_,relative:P,preventScrollReset:S,viewTransition:M,...O},z)=>{let{unstable_useTransitions:F}=A.useContext(bu),B=_8(),D=x8(o,{relative:P}),H=d.toLowerCase()==="get"?"get":"post",Q=typeof o=="string"&&Cz.test(o),te=ie=>{if(_&&_(ie),ie.defaultPrevented)return;ie.preventDefault();let ae=ie.nativeEvent.submitter,he=(ae==null?void 0:ae.getAttribute("formmethod"))||d,re=()=>B(ae||ie.currentTarget,{fetcherKey:t,method:he,navigate:r,replace:u,state:h,relative:P,preventScrollReset:S,viewTransition:M});F&&r!==!1?A.startTransition(()=>re()):re()};return A.createElement("form",{ref:z,method:H,action:D,onSubmit:n?_:te,...O,"data-discover":!Q&&e==="render"?"true":void 0})});p8.displayName="Form";function m8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tz(e){let t=A.useContext(ng);return dn(t,m8(e)),t}function g8(e,{target:t,replace:r,state:n,preventScrollReset:u,relative:h,viewTransition:d,unstable_useTransitions:o}={}){let _=Sp(),P=tl(),S=O_(e,{relative:h});return A.useCallback(M=>{if(HU(M,t)){M.preventDefault();let O=r!==void 0?r:_h(P)===_h(S),z=()=>_(e,{replace:O,state:n,preventScrollReset:u,relative:h,viewTransition:d});o?A.startTransition(()=>z()):z()}},[P,_,S,r,n,t,e,u,h,d,o])}var y8=0,v8=()=>`__${String(++y8)}__`;function _8(){let{router:e}=Tz("useSubmit"),{basename:t}=A.useContext(bu),r=AU(),n=e.fetch,u=e.navigate;return A.useCallback(async(h,d={})=>{let{action:o,method:_,encType:P,formData:S,body:M}=XU(h,t);if(d.navigate===!1){let O=d.fetcherKey||v8();await n(O,r,d.action||o,{preventScrollReset:d.preventScrollReset,formData:S,body:M,formMethod:d.method||_,formEncType:d.encType||P,flushSync:d.flushSync})}else await u(d.action||o,{preventScrollReset:d.preventScrollReset,formData:S,body:M,formMethod:d.method||_,formEncType:d.encType||P,replace:d.replace,state:d.state,fromRouteId:r,flushSync:d.flushSync,viewTransition:d.viewTransition})},[n,u,t,r])}function x8(e,{relative:t}={}){let{basename:r}=A.useContext(bu),n=A.useContext(Ec);dn(n,"useFormAction must be used inside a RouteContext");let[u]=n.matches.slice(-1),h={...O_(e||".",{relative:t})},d=tl();if(e==null){h.search=d.search;let o=new URLSearchParams(h.search),_=o.getAll("index");if(_.some(S=>S==="")){o.delete("index"),_.filter(M=>M).forEach(M=>o.append("index",M));let S=o.toString();h.search=S?`?${S}`:""}}return(!e||e===".")&&u.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(h.pathname=h.pathname==="/"?r:yh([r,h.pathname])),_h(h)}function b8(e,{relative:t}={}){let r=A.useContext(ZE);dn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Tz("useViewTransitionState"),u=O_(e,{relative:t});if(!r.isTransitioning)return!1;let h=gu(r.currentLocation.pathname,n)||r.currentLocation.pathname,d=gu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return $x(u.pathname,d)!=null||$x(u.pathname,h)!=null}var Cc=tz();function w8(e){return A.createElement(FU,{flushSync:Cc.flushSync,...e})}const S8="/assets/logo-C5NOI3_5.png";function P8(){const t=tl().pathname==="/";return $.jsx("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:$.jsx("path",{d:"M15.9993 15C13.7893 16.333 10.2073 16.333 7.99927 15M18.9993 8.71001L13.6663 4.56201C13.1983 4.19792 12.6223 4.00024 12.0293 4.00024C11.4363 4.00024 10.8603 4.19792 10.3923 4.56201L5.0583 8.71001C4.73774 8.9593 4.47839 9.27854 4.30005 9.64336C4.12171 10.0082 4.02911 10.4089 4.0293 10.815V18.015C4.0293 18.5454 4.24001 19.0542 4.61508 19.4292C4.99016 19.8043 5.49886 20.015 6.0293 20.015H18.0293C18.5597 20.015 19.0684 19.8043 19.4435 19.4292C19.8186 19.0542 20.0293 18.5454 20.0293 18.015V10.815C20.0293 9.99201 19.6493 9.21501 18.9993 8.71001Z",stroke:t?"#fff":"#637381",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function E8(){const t=tl().pathname==="/vechile";return $.jsxs("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[$.jsx("path",{d:"M8.49 2.82996H15.51C18 2.82996 18.55 4.06996 18.87 5.58996L20 11H4L5.13 5.58996C5.45 4.06996 6 2.82996 8.49 2.82996Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M2.00929 19.82C1.89929 20.99 2.83929 22 4.03929 22H5.91929C6.99929 22 7.14929 21.54 7.33929 20.97L7.53929 20.37C7.81929 19.55 7.99929 19 9.43929 19H14.5593C15.9993 19 16.2093 19.62 16.4593 20.37L16.6593 20.97C16.8493 21.54 16.9993 22 18.0793 22H19.9593C21.1593 22 22.0993 20.99 21.9893 19.82L21.4293 13.73C21.2893 12.23 20.9993 11 18.3793 11H5.61929C2.99929 11 2.70929 12.23 2.56929 13.73L2.00929 19.82Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M20 8H21",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M3 8H4",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M12 3V5",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M13.5 5H10.5",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M18 15H15",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),$.jsx("path",{d:"M9 15H6",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}function C8(){const t=tl().pathname==="/result";return $.jsx("svg",{className:"w-full h-auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:$.jsx("path",{d:"M13.45 11.55L15.5 9.5M10 13C10 13.5304 10.2107 14.0391 10.5858 14.4142C10.9609 14.7893 11.4696 15 12 15C12.5304 15 13.0391 14.7893 13.4142 14.4142C13.7893 14.0391 14 13.5304 14 13C14 12.4696 13.7893 11.9609 13.4142 11.5858C13.0391 11.2107 12.5304 11 12 11C11.4696 11 10.9609 11.2107 10.5858 11.5858C10.2107 11.9609 10 12.4696 10 13ZM6.4 19.9999C4.93815 18.838 3.87391 17.2501 3.35478 15.4564C2.83564 13.6626 2.88732 11.7518 3.50265 9.98872C4.11797 8.22564 5.26647 6.69762 6.78899 5.61641C8.3115 4.5352 10.1326 3.95435 12 3.95435C13.8674 3.95435 15.6885 4.5352 17.211 5.61641C18.7335 6.69762 19.882 8.22564 20.4974 9.98872C21.1127 11.7518 21.1644 13.6626 20.6452 15.4564C20.1261 17.2501 19.0619 18.838 17.6 19.9999H6.4Z",stroke:t?"#fff":"#637381",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function T8(){const e="w-full px-5 py-3 rounded-lg flex items-center gap-2 bg-white text-[#637381] text-base font-medium font-roboto inline-flex items-center gap-3 capitalize",t="w-full px-5 py-3 rounded-lg flex items-center gap-2 bg-primary text-white text-base font-medium font-roboto inline-flex items-center gap-3 capitalize";return $.jsxs("div",{className:"w-full h-full flex flex-col gap-10",children:[$.jsx("div",{className:"w-full flex justify-center items-center",children:$.jsx("img",{src:S8,alt:"Logo",className:"w-auto max-w-[200px] object-contain"})}),$.jsxs("div",{className:"flex flex-col gap-5",children:[$.jsxs(kx,{to:"/",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(P8,{})}),"Home"]}),$.jsxs(kx,{to:"/vechile",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(E8,{})}),"Vehicle"]}),$.jsxs(kx,{to:"/result",className:({isActive:r})=>r?t:e,children:[$.jsx("div",{className:"size-7",children:$.jsx(C8,{})}),"result"]})]})]})}function wy({children:e,className:t="",onClick:r,type:n="button",disabled:u,to:h,variant:d="light",state:o,..._}){const P=`
    ${t}
    ${d==="fill"?"bg-black text-white":"bg-primary text-white"}
    inline-flex items-center gap-3 px-7 py-3 rounded-xl 
    text-lg hover:scale-101 transition-all cursor-pointer
    ${u?"opacity-50 cursor-not-allowed":""}
  `;return h?$.jsx(wc,{to:h,state:{data:o},className:P,..._,children:e}):$.jsx("button",{className:P,onClick:r,disabled:u,type:n,..._,children:e})}function kd(){return $.jsx("div",{className:"fixed top-0 left-0 w-full h-screen flex items-center justify-center z-99 backdrop-blur-[10px]",children:$.jsxs("div",{class:"loading-wave",children:[$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"}),$.jsx("div",{class:"loading-bar"})]})})}var jy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},M8={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ap,qE,qj,k8=(qj=class{constructor(){Dr(this,ap,M8);Dr(this,qE,!1)}setTimeoutProvider(e){fr(this,ap,e)}setTimeout(e,t){return Ue(this,ap).setTimeout(e,t)}clearTimeout(e){Ue(this,ap).clearTimeout(e)}setInterval(e,t){return Ue(this,ap).setInterval(e,t)}clearInterval(e){Ue(this,ap).clearInterval(e)}},ap=new WeakMap,qE=new WeakMap,qj),Tm=new k8;function A8(e){setTimeout(e,0)}var Zm=typeof window>"u"||"Deno"in globalThis;function _s(){}function I8(e,t){return typeof e=="function"?e(t):e}function p2(e){return typeof e=="number"&&e>=0&&e!==1/0}function Mz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function mp(e,t){return typeof e=="function"?e(t):e}function fu(e,t){return typeof e=="function"?e(t):e}function sA(e,t){const{type:r="all",exact:n,fetchStatus:u,predicate:h,queryKey:d,stale:o}=e;if(d){if(n){if(t.queryHash!==tC(d,t.options))return!1}else if(!l_(t.queryKey,d))return!1}if(r!=="all"){const _=t.isActive();if(r==="active"&&!_||r==="inactive"&&_)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||u&&u!==t.state.fetchStatus||h&&!h(t))}function lA(e,t){const{exact:r,status:n,predicate:u,mutationKey:h}=e;if(h){if(!t.options.mutationKey)return!1;if(r){if(Km(t.options.mutationKey)!==Km(h))return!1}else if(!l_(t.options.mutationKey,h))return!1}return!(n&&t.state.status!==n||u&&!u(t))}function tC(e,t){return((t==null?void 0:t.queryKeyHashFn)||Km)(e)}function Km(e){return JSON.stringify(e,(t,r)=>m2(r)?Object.keys(r).sort().reduce((n,u)=>(n[u]=r[u],n),{}):r)}function l_(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>l_(e[r],t[r])):!1}var O8=Object.prototype.hasOwnProperty;function kz(e,t){if(e===t)return e;const r=uA(e)&&uA(t);if(!r&&!(m2(e)&&m2(t)))return t;const u=(r?e:Object.keys(e)).length,h=r?t:Object.keys(t),d=h.length,o=r?new Array(d):{};let _=0;for(let P=0;P<d;P++){const S=r?P:h[P],M=e[S],O=t[S];if(M===O){o[S]=M,(r?P<u:O8.call(e,S))&&_++;continue}if(M===null||O===null||typeof M!="object"||typeof O!="object"){o[S]=O;continue}const z=kz(M,O);o[S]=z,z===M&&_++}return u===d&&_===u?e:o}function qx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function uA(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function m2(e){if(!cA(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!cA(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cA(e){return Object.prototype.toString.call(e)==="[object Object]"}function L8(e){return new Promise(t=>{Tm.setTimeout(t,e)})}function g2(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?kz(e,t):t}function D8(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function R8(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var rC=Symbol();function Az(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===rC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Iz(e,t){return typeof e=="function"?e(...t):!!e}var Dm,op,cy,Gj,j8=(Gj=class extends jy{constructor(){super();Dr(this,Dm);Dr(this,op);Dr(this,cy);fr(this,cy,t=>{if(!Zm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ue(this,op)||this.setEventListener(Ue(this,cy))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,op))==null||t.call(this),fr(this,op,void 0))}setEventListener(t){var r;fr(this,cy,t),(r=Ue(this,op))==null||r.call(this),fr(this,op,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ue(this,Dm)!==t&&(fr(this,Dm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ue(this,Dm)=="boolean"?Ue(this,Dm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dm=new WeakMap,op=new WeakMap,cy=new WeakMap,Gj),nC=new j8;function y2(){let e,t;const r=new Promise((u,h)=>{e=u,t=h});r.status="pending",r.catch(()=>{});function n(u){Object.assign(r,u),delete r.resolve,delete r.reject}return r.resolve=u=>{n({status:"fulfilled",value:u}),e(u)},r.reject=u=>{n({status:"rejected",reason:u}),t(u)},r}var z8=A8;function N8(){let e=[],t=0,r=o=>{o()},n=o=>{o()},u=z8;const h=o=>{t?e.push(o):u(()=>{r(o)})},d=()=>{const o=e;e=[],o.length&&u(()=>{n(()=>{o.forEach(_=>{r(_)})})})};return{batch:o=>{let _;t++;try{_=o()}finally{t--,t||d()}return _},batchCalls:o=>(..._)=>{h(()=>{o(..._)})},schedule:h,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{u=o}}}var Wa=N8(),hy,sp,dy,Wj,F8=(Wj=class extends jy{constructor(){super();Dr(this,hy,!0);Dr(this,sp);Dr(this,dy);fr(this,dy,t=>{if(!Zm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ue(this,sp)||this.setEventListener(Ue(this,dy))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,sp))==null||t.call(this),fr(this,sp,void 0))}setEventListener(t){var r;fr(this,dy,t),(r=Ue(this,sp))==null||r.call(this),fr(this,sp,t(this.setOnline.bind(this)))}setOnline(t){Ue(this,hy)!==t&&(fr(this,hy,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ue(this,hy)}},hy=new WeakMap,sp=new WeakMap,dy=new WeakMap,Wj),Gx=new F8;function B8(e){return Math.min(1e3*2**e,3e4)}function Oz(e){return(e??"online")==="online"?Gx.isOnline():!0}var v2=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Lz(e){let t=!1,r=0,n;const u=y2(),h=()=>u.status!=="pending",d=B=>{var D;if(!h()){const H=new v2(B);O(H),(D=e.onCancel)==null||D.call(e,H)}},o=()=>{t=!0},_=()=>{t=!1},P=()=>nC.isFocused()&&(e.networkMode==="always"||Gx.isOnline())&&e.canRun(),S=()=>Oz(e.networkMode)&&e.canRun(),M=B=>{h()||(n==null||n(),u.resolve(B))},O=B=>{h()||(n==null||n(),u.reject(B))},z=()=>new Promise(B=>{var D;n=H=>{(h()||P())&&B(H)},(D=e.onPause)==null||D.call(e)}).then(()=>{var B;n=void 0,h()||(B=e.onContinue)==null||B.call(e)}),F=()=>{if(h())return;let B;const D=r===0?e.initialPromise:void 0;try{B=D??e.fn()}catch(H){B=Promise.reject(H)}Promise.resolve(B).then(M).catch(H=>{var he;if(h())return;const Q=e.retry??(Zm?0:3),te=e.retryDelay??B8,ie=typeof te=="function"?te(r,H):te,ae=Q===!0||typeof Q=="number"&&r<Q||typeof Q=="function"&&Q(r,H);if(t||!ae){O(H);return}r++,(he=e.onFail)==null||he.call(e,r,H),L8(ie).then(()=>P()?void 0:z()).then(()=>{t?O(H):F()})})};return{promise:u,status:()=>u.status,cancel:d,continue:()=>(n==null||n(),u),cancelRetry:o,continueRetry:_,canStart:S,start:()=>(S()?F():z().then(F),u)}}var Rm,Hj,Dz=(Hj=class{constructor(){Dr(this,Rm)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),p2(this.gcTime)&&fr(this,Rm,Tm.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zm?1/0:300*1e3))}clearGcTimeout(){Ue(this,Rm)&&(Tm.clearTimeout(Ue(this,Rm)),fr(this,Rm,void 0))}},Rm=new WeakMap,Hj),jm,fy,hu,zm,vo,E_,Nm,pc,md,Zj,V8=(Zj=class extends Dz{constructor(t){super();Dr(this,pc);Dr(this,jm);Dr(this,fy);Dr(this,hu);Dr(this,zm);Dr(this,vo);Dr(this,E_);Dr(this,Nm);fr(this,Nm,!1),fr(this,E_,t.defaultOptions),this.setOptions(t.options),this.observers=[],fr(this,zm,t.client),fr(this,hu,Ue(this,zm).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fr(this,jm,dA(this.options)),this.state=t.state??Ue(this,jm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ue(this,vo))==null?void 0:t.promise}setOptions(t){if(this.options={...Ue(this,E_),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=dA(this.options);r.data!==void 0&&(this.setState(hA(r.data,r.dataUpdatedAt)),fr(this,jm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ue(this,hu).remove(this)}setData(t,r){const n=g2(this.state.data,t,this.options);return an(this,pc,md).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){an(this,pc,md).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,u;const r=(n=Ue(this,vo))==null?void 0:n.promise;return(u=Ue(this,vo))==null||u.cancel(t),r?r.then(_s).catch(_s):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ue(this,jm))}isActive(){return this.observers.some(t=>fu(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>mp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Mz(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,vo))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,vo))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ue(this,hu).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ue(this,vo)&&(Ue(this,Nm)?Ue(this,vo).cancel({revert:!0}):Ue(this,vo).cancelRetry()),this.scheduleGc()),Ue(this,hu).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||an(this,pc,md).call(this,{type:"invalidate"})}async fetch(t,r){var _,P,S,M,O,z,F,B,D,H,Q,te;if(this.state.fetchStatus!=="idle"&&((_=Ue(this,vo))==null?void 0:_.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ue(this,vo))return Ue(this,vo).continueRetry(),Ue(this,vo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const ie=this.observers.find(ae=>ae.options.queryFn);ie&&this.setOptions(ie.options)}const n=new AbortController,u=ie=>{Object.defineProperty(ie,"signal",{enumerable:!0,get:()=>(fr(this,Nm,!0),n.signal)})},h=()=>{const ie=Az(this.options,r),he=(()=>{const re={client:Ue(this,zm),queryKey:this.queryKey,meta:this.meta};return u(re),re})();return fr(this,Nm,!1),this.options.persister?this.options.persister(ie,he,this):ie(he)},o=(()=>{const ie={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ue(this,zm),state:this.state,fetchFn:h};return u(ie),ie})();(P=this.options.behavior)==null||P.onFetch(o,this),fr(this,fy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((S=o.fetchOptions)==null?void 0:S.meta))&&an(this,pc,md).call(this,{type:"fetch",meta:(M=o.fetchOptions)==null?void 0:M.meta}),fr(this,vo,Lz({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:ie=>{ie instanceof v2&&ie.revert&&this.setState({...Ue(this,fy),fetchStatus:"idle"}),n.abort()},onFail:(ie,ae)=>{an(this,pc,md).call(this,{type:"failed",failureCount:ie,error:ae})},onPause:()=>{an(this,pc,md).call(this,{type:"pause"})},onContinue:()=>{an(this,pc,md).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const ie=await Ue(this,vo).start();if(ie===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(ie),(z=(O=Ue(this,hu).config).onSuccess)==null||z.call(O,ie,this),(B=(F=Ue(this,hu).config).onSettled)==null||B.call(F,ie,this.state.error,this),ie}catch(ie){if(ie instanceof v2){if(ie.silent)return Ue(this,vo).promise;if(ie.revert){if(this.state.data===void 0)throw ie;return this.state.data}}throw an(this,pc,md).call(this,{type:"error",error:ie}),(H=(D=Ue(this,hu).config).onError)==null||H.call(D,ie,this),(te=(Q=Ue(this,hu).config).onSettled)==null||te.call(Q,this.state.data,ie,this),ie}finally{this.scheduleGc()}}},jm=new WeakMap,fy=new WeakMap,hu=new WeakMap,zm=new WeakMap,vo=new WeakMap,E_=new WeakMap,Nm=new WeakMap,pc=new WeakSet,md=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Rz(n.data,this.options),fetchMeta:t.meta??null};case"success":const u={...n,...hA(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return fr(this,fy,t.manual?u:void 0),u;case"error":const h=t.error;return{...n,error:h,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Wa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ue(this,hu).notify({query:this,type:"updated",action:t})})},Zj);function Rz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Oz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function hA(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function dA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Hs,En,C_,gs,Fm,py,yd,lp,T_,my,gy,Bm,Vm,up,yy,ei,Yv,_2,x2,b2,w2,S2,P2,E2,jz,Kj,$8=(Kj=class extends jy{constructor(t,r){super();Dr(this,ei);Dr(this,Hs);Dr(this,En);Dr(this,C_);Dr(this,gs);Dr(this,Fm);Dr(this,py);Dr(this,yd);Dr(this,lp);Dr(this,T_);Dr(this,my);Dr(this,gy);Dr(this,Bm);Dr(this,Vm);Dr(this,up);Dr(this,yy,new Set);this.options=r,fr(this,Hs,t),fr(this,lp,null),fr(this,yd,y2()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ue(this,En).addObserver(this),fA(Ue(this,En),this.options)?an(this,ei,Yv).call(this):this.updateResult(),an(this,ei,w2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return C2(Ue(this,En),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return C2(Ue(this,En),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,an(this,ei,S2).call(this),an(this,ei,P2).call(this),Ue(this,En).removeObserver(this)}setOptions(t){const r=this.options,n=Ue(this,En);if(this.options=Ue(this,Hs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fu(this.options.enabled,Ue(this,En))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");an(this,ei,E2).call(this),Ue(this,En).setOptions(this.options),r._defaulted&&!qx(this.options,r)&&Ue(this,Hs).getQueryCache().notify({type:"observerOptionsUpdated",query:Ue(this,En),observer:this});const u=this.hasListeners();u&&pA(Ue(this,En),n,this.options,r)&&an(this,ei,Yv).call(this),this.updateResult(),u&&(Ue(this,En)!==n||fu(this.options.enabled,Ue(this,En))!==fu(r.enabled,Ue(this,En))||mp(this.options.staleTime,Ue(this,En))!==mp(r.staleTime,Ue(this,En)))&&an(this,ei,_2).call(this);const h=an(this,ei,x2).call(this);u&&(Ue(this,En)!==n||fu(this.options.enabled,Ue(this,En))!==fu(r.enabled,Ue(this,En))||h!==Ue(this,up))&&an(this,ei,b2).call(this,h)}getOptimisticResult(t){const r=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),t),n=this.createResult(r,t);return q8(this,n)&&(fr(this,gs,n),fr(this,py,this.options),fr(this,Fm,Ue(this,En).state)),n}getCurrentResult(){return Ue(this,gs)}trackResult(t,r){return new Proxy(t,{get:(n,u)=>(this.trackProp(u),r==null||r(u),u==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ue(this,yd).status==="pending"&&Ue(this,yd).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,u))})}trackProp(t){Ue(this,yy).add(t)}getCurrentQuery(){return Ue(this,En)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Ue(this,Hs).defaultQueryOptions(t),n=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return an(this,ei,Yv).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ue(this,gs)))}createResult(t,r){var xe;const n=Ue(this,En),u=this.options,h=Ue(this,gs),d=Ue(this,Fm),o=Ue(this,py),P=t!==n?t.state:Ue(this,C_),{state:S}=t;let M={...S},O=!1,z;if(r._optimisticResults){const $e=this.hasListeners(),Ee=!$e&&fA(t,r),Ne=$e&&pA(t,n,r,u);(Ee||Ne)&&(M={...M,...Rz(S.data,t.options)}),r._optimisticResults==="isRestoring"&&(M.fetchStatus="idle")}let{error:F,errorUpdatedAt:B,status:D}=M;z=M.data;let H=!1;if(r.placeholderData!==void 0&&z===void 0&&D==="pending"){let $e;h!=null&&h.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?($e=h.data,H=!0):$e=typeof r.placeholderData=="function"?r.placeholderData((xe=Ue(this,gy))==null?void 0:xe.state.data,Ue(this,gy)):r.placeholderData,$e!==void 0&&(D="success",z=g2(h==null?void 0:h.data,$e,r),O=!0)}if(r.select&&z!==void 0&&!H)if(h&&z===(d==null?void 0:d.data)&&r.select===Ue(this,T_))z=Ue(this,my);else try{fr(this,T_,r.select),z=r.select(z),z=g2(h==null?void 0:h.data,z,r),fr(this,my,z),fr(this,lp,null)}catch($e){fr(this,lp,$e)}Ue(this,lp)&&(F=Ue(this,lp),z=Ue(this,my),B=Date.now(),D="error");const Q=M.fetchStatus==="fetching",te=D==="pending",ie=D==="error",ae=te&&Q,he=z!==void 0,be={status:D,fetchStatus:M.fetchStatus,isPending:te,isSuccess:D==="success",isError:ie,isInitialLoading:ae,isLoading:ae,data:z,dataUpdatedAt:M.dataUpdatedAt,error:F,errorUpdatedAt:B,failureCount:M.fetchFailureCount,failureReason:M.fetchFailureReason,errorUpdateCount:M.errorUpdateCount,isFetched:M.dataUpdateCount>0||M.errorUpdateCount>0,isFetchedAfterMount:M.dataUpdateCount>P.dataUpdateCount||M.errorUpdateCount>P.errorUpdateCount,isFetching:Q,isRefetching:Q&&!te,isLoadingError:ie&&!he,isPaused:M.fetchStatus==="paused",isPlaceholderData:O,isRefetchError:ie&&he,isStale:iC(t,r),refetch:this.refetch,promise:Ue(this,yd),isEnabled:fu(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $e=Xe=>{be.status==="error"?Xe.reject(be.error):be.data!==void 0&&Xe.resolve(be.data)},Ee=()=>{const Xe=fr(this,yd,be.promise=y2());$e(Xe)},Ne=Ue(this,yd);switch(Ne.status){case"pending":t.queryHash===n.queryHash&&$e(Ne);break;case"fulfilled":(be.status==="error"||be.data!==Ne.value)&&Ee();break;case"rejected":(be.status!=="error"||be.error!==Ne.reason)&&Ee();break}}return be}updateResult(){const t=Ue(this,gs),r=this.createResult(Ue(this,En),this.options);if(fr(this,Fm,Ue(this,En).state),fr(this,py,this.options),Ue(this,Fm).data!==void 0&&fr(this,gy,Ue(this,En)),qx(r,t))return;fr(this,gs,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!Ue(this,yy).size)return!0;const d=new Set(h??Ue(this,yy));return this.options.throwOnError&&d.add("error"),Object.keys(Ue(this,gs)).some(o=>{const _=o;return Ue(this,gs)[_]!==t[_]&&d.has(_)})};an(this,ei,jz).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&an(this,ei,w2).call(this)}},Hs=new WeakMap,En=new WeakMap,C_=new WeakMap,gs=new WeakMap,Fm=new WeakMap,py=new WeakMap,yd=new WeakMap,lp=new WeakMap,T_=new WeakMap,my=new WeakMap,gy=new WeakMap,Bm=new WeakMap,Vm=new WeakMap,up=new WeakMap,yy=new WeakMap,ei=new WeakSet,Yv=function(t){an(this,ei,E2).call(this);let r=Ue(this,En).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(_s)),r},_2=function(){an(this,ei,S2).call(this);const t=mp(this.options.staleTime,Ue(this,En));if(Zm||Ue(this,gs).isStale||!p2(t))return;const n=Mz(Ue(this,gs).dataUpdatedAt,t)+1;fr(this,Bm,Tm.setTimeout(()=>{Ue(this,gs).isStale||this.updateResult()},n))},x2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ue(this,En)):this.options.refetchInterval)??!1},b2=function(t){an(this,ei,P2).call(this),fr(this,up,t),!(Zm||fu(this.options.enabled,Ue(this,En))===!1||!p2(Ue(this,up))||Ue(this,up)===0)&&fr(this,Vm,Tm.setInterval(()=>{(this.options.refetchIntervalInBackground||nC.isFocused())&&an(this,ei,Yv).call(this)},Ue(this,up)))},w2=function(){an(this,ei,_2).call(this),an(this,ei,b2).call(this,an(this,ei,x2).call(this))},S2=function(){Ue(this,Bm)&&(Tm.clearTimeout(Ue(this,Bm)),fr(this,Bm,void 0))},P2=function(){Ue(this,Vm)&&(Tm.clearInterval(Ue(this,Vm)),fr(this,Vm,void 0))},E2=function(){const t=Ue(this,Hs).getQueryCache().build(Ue(this,Hs),this.options);if(t===Ue(this,En))return;const r=Ue(this,En);fr(this,En,t),fr(this,C_,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},jz=function(t){Wa.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Ue(this,gs))}),Ue(this,Hs).getQueryCache().notify({query:Ue(this,En),type:"observerResultsUpdated"})})},Kj);function U8(e,t){return fu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function fA(e,t){return U8(e,t)||e.state.data!==void 0&&C2(e,t,t.refetchOnMount)}function C2(e,t,r){if(fu(t.enabled,e)!==!1&&mp(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&iC(e,t)}return!1}function pA(e,t,r,n){return(e!==t||fu(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&iC(e,r)}function iC(e,t){return fu(t.enabled,e)!==!1&&e.isStaleByTime(mp(t.staleTime,e))}function q8(e,t){return!qx(e.getCurrentResult(),t)}function mA(e){return{onFetch:(t,r)=>{var S,M,O,z,F;const n=t.options,u=(O=(M=(S=t.fetchOptions)==null?void 0:S.meta)==null?void 0:M.fetchMore)==null?void 0:O.direction,h=((z=t.state.data)==null?void 0:z.pages)||[],d=((F=t.state.data)==null?void 0:F.pageParams)||[];let o={pages:[],pageParams:[]},_=0;const P=async()=>{let B=!1;const D=te=>{Object.defineProperty(te,"signal",{enumerable:!0,get:()=>(t.signal.aborted?B=!0:t.signal.addEventListener("abort",()=>{B=!0}),t.signal)})},H=Az(t.options,t.fetchOptions),Q=async(te,ie,ae)=>{if(B)return Promise.reject();if(ie==null&&te.pages.length)return Promise.resolve(te);const re=(()=>{const Ee={client:t.client,queryKey:t.queryKey,pageParam:ie,direction:ae?"backward":"forward",meta:t.options.meta};return D(Ee),Ee})(),be=await H(re),{maxPages:xe}=t.options,$e=ae?R8:D8;return{pages:$e(te.pages,be,xe),pageParams:$e(te.pageParams,ie,xe)}};if(u&&h.length){const te=u==="backward",ie=te?G8:gA,ae={pages:h,pageParams:d},he=ie(n,ae);o=await Q(ae,he,te)}else{const te=e??h.length;do{const ie=_===0?d[0]??n.initialPageParam:gA(n,o);if(_>0&&ie==null)break;o=await Q(o,ie),_++}while(_<te)}return o};t.options.persister?t.fetchFn=()=>{var B,D;return(D=(B=t.options).persister)==null?void 0:D.call(B,P,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=P}}}function gA(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function G8(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var M_,dh,ys,$m,fh,Kf,Xj,W8=(Xj=class extends Dz{constructor(t){super();Dr(this,fh);Dr(this,M_);Dr(this,dh);Dr(this,ys);Dr(this,$m);fr(this,M_,t.client),this.mutationId=t.mutationId,fr(this,ys,t.mutationCache),fr(this,dh,[]),this.state=t.state||zz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ue(this,dh).includes(t)||(Ue(this,dh).push(t),this.clearGcTimeout(),Ue(this,ys).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fr(this,dh,Ue(this,dh).filter(r=>r!==t)),this.scheduleGc(),Ue(this,ys).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ue(this,dh).length||(this.state.status==="pending"?this.scheduleGc():Ue(this,ys).remove(this))}continue(){var t;return((t=Ue(this,$m))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var d,o,_,P,S,M,O,z,F,B,D,H,Q,te,ie,ae,he,re,be,xe;const r=()=>{an(this,fh,Kf).call(this,{type:"continue"})},n={client:Ue(this,M_),meta:this.options.meta,mutationKey:this.options.mutationKey};fr(this,$m,Lz({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:($e,Ee)=>{an(this,fh,Kf).call(this,{type:"failed",failureCount:$e,error:Ee})},onPause:()=>{an(this,fh,Kf).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ue(this,ys).canRun(this)}));const u=this.state.status==="pending",h=!Ue(this,$m).canStart();try{if(u)r();else{an(this,fh,Kf).call(this,{type:"pending",variables:t,isPaused:h}),await((o=(d=Ue(this,ys).config).onMutate)==null?void 0:o.call(d,t,this,n));const Ee=await((P=(_=this.options).onMutate)==null?void 0:P.call(_,t,n));Ee!==this.state.context&&an(this,fh,Kf).call(this,{type:"pending",context:Ee,variables:t,isPaused:h})}const $e=await Ue(this,$m).start();return await((M=(S=Ue(this,ys).config).onSuccess)==null?void 0:M.call(S,$e,t,this.state.context,this,n)),await((z=(O=this.options).onSuccess)==null?void 0:z.call(O,$e,t,this.state.context,n)),await((B=(F=Ue(this,ys).config).onSettled)==null?void 0:B.call(F,$e,null,this.state.variables,this.state.context,this,n)),await((H=(D=this.options).onSettled)==null?void 0:H.call(D,$e,null,t,this.state.context,n)),an(this,fh,Kf).call(this,{type:"success",data:$e}),$e}catch($e){try{throw await((te=(Q=Ue(this,ys).config).onError)==null?void 0:te.call(Q,$e,t,this.state.context,this,n)),await((ae=(ie=this.options).onError)==null?void 0:ae.call(ie,$e,t,this.state.context,n)),await((re=(he=Ue(this,ys).config).onSettled)==null?void 0:re.call(he,void 0,$e,this.state.variables,this.state.context,this,n)),await((xe=(be=this.options).onSettled)==null?void 0:xe.call(be,void 0,$e,t,this.state.context,n)),$e}finally{an(this,fh,Kf).call(this,{type:"error",error:$e})}}finally{Ue(this,ys).runNext(this)}}},M_=new WeakMap,dh=new WeakMap,ys=new WeakMap,$m=new WeakMap,fh=new WeakSet,Kf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Wa.batch(()=>{Ue(this,dh).forEach(n=>{n.onMutationUpdate(t)}),Ue(this,ys).notify({mutation:this,type:"updated",action:t})})},Xj);function zz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vd,mc,k_,Yj,H8=(Yj=class extends jy{constructor(t={}){super();Dr(this,vd);Dr(this,mc);Dr(this,k_);this.config=t,fr(this,vd,new Set),fr(this,mc,new Map),fr(this,k_,0)}build(t,r,n){const u=new W8({client:t,mutationCache:this,mutationId:++X0(this,k_)._,options:t.defaultMutationOptions(r),state:n});return this.add(u),u}add(t){Ue(this,vd).add(t);const r=tx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r);n?n.push(t):Ue(this,mc).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ue(this,vd).delete(t)){const r=tx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r);if(n)if(n.length>1){const u=n.indexOf(t);u!==-1&&n.splice(u,1)}else n[0]===t&&Ue(this,mc).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=tx(t);if(typeof r=="string"){const n=Ue(this,mc).get(r),u=n==null?void 0:n.find(h=>h.state.status==="pending");return!u||u===t}else return!0}runNext(t){var n;const r=tx(t);if(typeof r=="string"){const u=(n=Ue(this,mc).get(r))==null?void 0:n.find(h=>h!==t&&h.state.isPaused);return(u==null?void 0:u.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wa.batch(()=>{Ue(this,vd).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ue(this,vd).clear(),Ue(this,mc).clear()})}getAll(){return Array.from(Ue(this,vd))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>lA(r,n))}findAll(t={}){return this.getAll().filter(r=>lA(t,r))}notify(t){Wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Wa.batch(()=>Promise.all(t.map(r=>r.continue().catch(_s))))}},vd=new WeakMap,mc=new WeakMap,k_=new WeakMap,Yj);function tx(e){var t;return(t=e.options.scope)==null?void 0:t.id}var _d,cp,Zs,xd,Md,Ax,T2,Qj,Z8=(Qj=class extends jy{constructor(r,n){super();Dr(this,Md);Dr(this,_d);Dr(this,cp);Dr(this,Zs);Dr(this,xd);fr(this,_d,r),this.setOptions(n),this.bindMethods(),an(this,Md,Ax).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var u;const n=this.options;this.options=Ue(this,_d).defaultMutationOptions(r),qx(this.options,n)||Ue(this,_d).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ue(this,Zs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Km(n.mutationKey)!==Km(this.options.mutationKey)?this.reset():((u=Ue(this,Zs))==null?void 0:u.state.status)==="pending"&&Ue(this,Zs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ue(this,Zs))==null||r.removeObserver(this)}onMutationUpdate(r){an(this,Md,Ax).call(this),an(this,Md,T2).call(this,r)}getCurrentResult(){return Ue(this,cp)}reset(){var r;(r=Ue(this,Zs))==null||r.removeObserver(this),fr(this,Zs,void 0),an(this,Md,Ax).call(this),an(this,Md,T2).call(this)}mutate(r,n){var u;return fr(this,xd,n),(u=Ue(this,Zs))==null||u.removeObserver(this),fr(this,Zs,Ue(this,_d).getMutationCache().build(Ue(this,_d),this.options)),Ue(this,Zs).addObserver(this),Ue(this,Zs).execute(r)}},_d=new WeakMap,cp=new WeakMap,Zs=new WeakMap,xd=new WeakMap,Md=new WeakSet,Ax=function(){var n;const r=((n=Ue(this,Zs))==null?void 0:n.state)??zz();fr(this,cp,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},T2=function(r){Wa.batch(()=>{var n,u,h,d,o,_,P,S;if(Ue(this,xd)&&this.hasListeners()){const M=Ue(this,cp).variables,O=Ue(this,cp).context,z={client:Ue(this,_d),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((u=(n=Ue(this,xd)).onSuccess)==null||u.call(n,r.data,M,O,z),(d=(h=Ue(this,xd)).onSettled)==null||d.call(h,r.data,null,M,O,z)):(r==null?void 0:r.type)==="error"&&((_=(o=Ue(this,xd)).onError)==null||_.call(o,r.error,M,O,z),(S=(P=Ue(this,xd)).onSettled)==null||S.call(P,void 0,r.error,M,O,z))}this.listeners.forEach(M=>{M(Ue(this,cp))})})},Qj),ph,Jj,K8=(Jj=class extends jy{constructor(t={}){super();Dr(this,ph);this.config=t,fr(this,ph,new Map)}build(t,r,n){const u=r.queryKey,h=r.queryHash??tC(u,r);let d=this.get(h);return d||(d=new V8({client:t,queryKey:u,queryHash:h,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(u)}),this.add(d)),d}add(t){Ue(this,ph).has(t.queryHash)||(Ue(this,ph).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ue(this,ph).get(t.queryHash);r&&(t.destroy(),r===t&&Ue(this,ph).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Wa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ue(this,ph).get(t)}getAll(){return[...Ue(this,ph).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>sA(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>sA(t,n)):r}notify(t){Wa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Wa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Wa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ph=new WeakMap,Jj),ua,hp,dp,vy,_y,fp,xy,by,ez,X8=(ez=class{constructor(e={}){Dr(this,ua);Dr(this,hp);Dr(this,dp);Dr(this,vy);Dr(this,_y);Dr(this,fp);Dr(this,xy);Dr(this,by);fr(this,ua,e.queryCache||new K8),fr(this,hp,e.mutationCache||new H8),fr(this,dp,e.defaultOptions||{}),fr(this,vy,new Map),fr(this,_y,new Map),fr(this,fp,0)}mount(){X0(this,fp)._++,Ue(this,fp)===1&&(fr(this,xy,nC.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,ua).onFocus())})),fr(this,by,Gx.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,ua).onOnline())})))}unmount(){var e,t;X0(this,fp)._--,Ue(this,fp)===0&&((e=Ue(this,xy))==null||e.call(this),fr(this,xy,void 0),(t=Ue(this,by))==null||t.call(this),fr(this,by,void 0))}isFetching(e){return Ue(this,ua).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ue(this,hp).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,ua).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ue(this,ua).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(mp(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ue(this,ua).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),u=Ue(this,ua).get(n.queryHash),h=u==null?void 0:u.state.data,d=I8(t,h);if(d!==void 0)return Ue(this,ua).build(this,n).setData(d,{...r,manual:!0})}setQueriesData(e,t,r){return Wa.batch(()=>Ue(this,ua).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,ua).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ue(this,ua);Wa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ue(this,ua);return Wa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Wa.batch(()=>Ue(this,ua).findAll(e).map(u=>u.cancel(r)));return Promise.all(n).then(_s).catch(_s)}invalidateQueries(e,t={}){return Wa.batch(()=>(Ue(this,ua).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Wa.batch(()=>Ue(this,ua).findAll(e).filter(u=>!u.isDisabled()&&!u.isStatic()).map(u=>{let h=u.fetch(void 0,r);return r.throwOnError||(h=h.catch(_s)),u.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(n).then(_s)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ue(this,ua).build(this,t);return r.isStaleByTime(mp(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_s).catch(_s)}fetchInfiniteQuery(e){return e.behavior=mA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_s).catch(_s)}ensureInfiniteQueryData(e){return e.behavior=mA(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gx.isOnline()?Ue(this,hp).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ue(this,ua)}getMutationCache(){return Ue(this,hp)}getDefaultOptions(){return Ue(this,dp)}setDefaultOptions(e){fr(this,dp,e)}setQueryDefaults(e,t){Ue(this,vy).set(Km(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ue(this,vy).values()],r={};return t.forEach(n=>{l_(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ue(this,_y).set(Km(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ue(this,_y).values()],r={};return t.forEach(n=>{l_(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ue(this,dp).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=tC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===rC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ue(this,dp).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ue(this,ua).clear(),Ue(this,hp).clear()}},ua=new WeakMap,hp=new WeakMap,dp=new WeakMap,vy=new WeakMap,_y=new WeakMap,fp=new WeakMap,xy=new WeakMap,by=new WeakMap,ez),Nz=A.createContext(void 0),cw=e=>{const t=A.useContext(Nz);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Y8=({client:e,children:t})=>(A.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),$.jsx(Nz.Provider,{value:e,children:t})),Fz=A.createContext(!1),Q8=()=>A.useContext(Fz);Fz.Provider;function J8(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var eq=A.createContext(J8()),tq=()=>A.useContext(eq),rq=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},nq=e=>{A.useEffect(()=>{e.clearReset()},[e])},iq=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:u})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(u&&e.data===void 0||Iz(r,[e.error,n])),aq=e=>{if(e.suspense){const r=u=>u==="static"?u:Math.max(u??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...u)=>r(n(...u)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},oq=(e,t)=>e.isLoading&&e.isFetching&&!t,sq=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,yA=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function lq(e,t,r){var M,O,z,F,B;const n=Q8(),u=tq(),h=cw(),d=h.defaultQueryOptions(e);(O=(M=h.getDefaultOptions().queries)==null?void 0:M._experimental_beforeQuery)==null||O.call(M,d),d._optimisticResults=n?"isRestoring":"optimistic",aq(d),rq(d,u),nq(u);const o=!h.getQueryCache().get(d.queryHash),[_]=A.useState(()=>new t(h,d)),P=_.getOptimisticResult(d),S=!n&&e.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(D=>{const H=S?_.subscribe(Wa.batchCalls(D)):_s;return _.updateResult(),H},[_,S]),()=>_.getCurrentResult(),()=>_.getCurrentResult()),A.useEffect(()=>{_.setOptions(d)},[d,_]),sq(d,P))throw yA(d,_,u);if(iq({result:P,errorResetBoundary:u,throwOnError:d.throwOnError,query:h.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw P.error;if((F=(z=h.getDefaultOptions().queries)==null?void 0:z._experimental_afterQuery)==null||F.call(z,d,P),d.experimental_prefetchInRender&&!Zm&&oq(P,n)){const D=o?yA(d,_,u):(B=h.getQueryCache().get(d.queryHash))==null?void 0:B.promise;D==null||D.catch(_s).finally(()=>{_.updateResult()})}return d.notifyOnChangeProps?P:_.trackResult(P)}function zy(e,t){return lq(e,$8)}function ig(e,t){const r=cw(),[n]=A.useState(()=>new Z8(r,e));A.useEffect(()=>{n.setOptions(e)},[n,e]);const u=A.useSyncExternalStore(A.useCallback(d=>n.subscribe(Wa.batchCalls(d)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),h=A.useCallback((d,o)=>{n.mutate(d,o).catch(_s)},[n]);if(u.error&&Iz(n.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:h,mutateAsync:u.mutate}}function Mo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var uq=typeof Symbol=="function"&&Symbol.observable||"@@observable",vA=uq,pS=()=>Math.random().toString(36).substring(7).split("").join("."),cq={INIT:`@@redux/INIT${pS()}`,REPLACE:`@@redux/REPLACE${pS()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pS()}`},Wx=cq;function aC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Bz(e,t,r){if(typeof e!="function")throw new Error(Mo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Mo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Mo(1));return r(Bz)(e,t)}let n=e,u=t,h=new Map,d=h,o=0,_=!1;function P(){d===h&&(d=new Map,h.forEach((D,H)=>{d.set(H,D)}))}function S(){if(_)throw new Error(Mo(3));return u}function M(D){if(typeof D!="function")throw new Error(Mo(4));if(_)throw new Error(Mo(5));let H=!0;P();const Q=o++;return d.set(Q,D),function(){if(H){if(_)throw new Error(Mo(6));H=!1,P(),d.delete(Q),h=null}}}function O(D){if(!aC(D))throw new Error(Mo(7));if(typeof D.type>"u")throw new Error(Mo(8));if(typeof D.type!="string")throw new Error(Mo(17));if(_)throw new Error(Mo(9));try{_=!0,u=n(u,D)}finally{_=!1}return(h=d).forEach(Q=>{Q()}),D}function z(D){if(typeof D!="function")throw new Error(Mo(10));n=D,O({type:Wx.REPLACE})}function F(){const D=M;return{subscribe(H){if(typeof H!="object"||H===null)throw new Error(Mo(11));function Q(){const ie=H;ie.next&&ie.next(S())}return Q(),{unsubscribe:D(Q)}},[vA](){return this}}}return O({type:Wx.INIT}),{dispatch:O,subscribe:M,getState:S,replaceReducer:z,[vA]:F}}function hq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Wx.INIT})>"u")throw new Error(Mo(12));if(typeof r(void 0,{type:Wx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mo(13))})}function Vz(e){const t=Object.keys(e),r={};for(let h=0;h<t.length;h++){const d=t[h];typeof e[d]=="function"&&(r[d]=e[d])}const n=Object.keys(r);let u;try{hq(r)}catch(h){u=h}return function(d={},o){if(u)throw u;let _=!1;const P={};for(let S=0;S<n.length;S++){const M=n[S],O=r[M],z=d[M],F=O(z,o);if(typeof F>"u")throw o&&o.type,new Error(Mo(14));P[M]=F,_=_||F!==z}return _=_||n.length!==Object.keys(d).length,_?P:d}}function Hx(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function dq(...e){return t=>(r,n)=>{const u=t(r,n);let h=()=>{throw new Error(Mo(15))};const d={getState:u.getState,dispatch:(_,...P)=>h(_,...P)},o=e.map(_=>_(d));return h=Hx(...o)(u.dispatch),{...u,dispatch:h}}}function $z(e){return aC(e)&&"type"in e&&typeof e.type=="string"}var Uz=Symbol.for("immer-nothing"),_A=Symbol.for("immer-draftable"),Ss=Symbol.for("immer-state");function gc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kl=Object,Sy=kl.getPrototypeOf,Zx="constructor",hw="prototype",M2="configurable",Kx="enumerable",Ix="writable",u_="value",Ad=e=>!!e&&!!e[Ss];function Sc(e){var t;return e?qz(e)||dw(e)||!!e[_A]||!!((t=e[Zx])!=null&&t[_A])||fw(e)||pw(e):!1}var fq=kl[hw][Zx].toString(),xA=new WeakMap;function qz(e){if(!e||!oC(e))return!1;const t=Sy(e);if(t===null||t===kl[hw])return!0;const r=kl.hasOwnProperty.call(t,Zx)&&t[Zx];if(r===Object)return!0;if(!Jg(r))return!1;let n=xA.get(r);return n===void 0&&(n=Function.toString.call(r),xA.set(r,n)),n===fq}function L_(e,t,r=!0){D_(e)===0?(r?Reflect.ownKeys(e):kl.keys(e)).forEach(u=>{t(u,e[u],e)}):e.forEach((n,u)=>t(u,n,e))}function D_(e){const t=e[Ss];return t?t.type_:dw(e)?1:fw(e)?2:pw(e)?3:0}var bA=(e,t,r=D_(e))=>r===2?e.has(t):kl[hw].hasOwnProperty.call(e,t),k2=(e,t,r=D_(e))=>r===2?e.get(t):e[t],Xx=(e,t,r,n=D_(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function pq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var dw=Array.isArray,fw=e=>e instanceof Map,pw=e=>e instanceof Set,oC=e=>typeof e=="object",Jg=e=>typeof e=="function",mS=e=>typeof e=="boolean",gd=e=>e.copy_||e.base_,sC=e=>e.modified_?e.copy_:e.base_;function A2(e,t){if(fw(e))return new Map(e);if(pw(e))return new Set(e);if(dw(e))return Array[hw].slice.call(e);const r=qz(e);if(t===!0||t==="class_only"&&!r){const n=kl.getOwnPropertyDescriptors(e);delete n[Ss];let u=Reflect.ownKeys(n);for(let h=0;h<u.length;h++){const d=u[h],o=n[d];o[Ix]===!1&&(o[Ix]=!0,o[M2]=!0),(o.get||o.set)&&(n[d]={[M2]:!0,[Ix]:!0,[Kx]:o[Kx],[u_]:e[d]})}return kl.create(Sy(e),n)}else{const n=Sy(e);if(n!==null&&r)return{...e};const u=kl.create(n);return kl.assign(u,e)}}function lC(e,t=!1){return mw(e)||Ad(e)||!Sc(e)||(D_(e)>1&&kl.defineProperties(e,{set:rx,add:rx,clear:rx,delete:rx}),kl.freeze(e),t&&L_(e,(r,n)=>{lC(n,!0)},!1)),e}function mq(){gc(2)}var rx={[u_]:mq};function mw(e){return e===null||!oC(e)?!0:kl.isFrozen(e)}var Yx="MapSet",I2="Patches",Gz={};function Py(e){const t=Gz[e];return t||gc(0,e),t}var gq=e=>!!Gz[e],c_,Wz=()=>c_,yq=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:gq(Yx)?Py(Yx):void 0});function wA(e,t){t&&(e.patchPlugin_=Py(I2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function O2(e){L2(e),e.drafts_.forEach(vq),e.drafts_=null}function L2(e){e===c_&&(c_=e.parent_)}var SA=e=>c_=yq(c_,e);function vq(e){const t=e[Ss];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function PA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ss].modified_&&(O2(t),gc(4)),Sc(e)&&(e=EA(t,e));const{patchPlugin_:u}=t;u&&u.generateReplacementPatches_(r[Ss].base_,e,t)}else e=EA(t,r);return _q(t,e,!0),O2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Uz?e:void 0}function EA(e,t){if(mw(t))return t;const r=t[Ss];if(!r)return uC(t,e.handledSet_,e);if(!gw(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Kz(r,e)}return r.copy_}function _q(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lC(t,r)}function Hz(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var gw=(e,t)=>e.scope_===t,xq=[];function Zz(e,t,r,n){const u=gd(e),h=e.type_;if(n!==void 0&&k2(u,n,h)===t){Xx(u,n,r,h);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;L_(u,(_,P)=>{if(Ad(P)){const S=o.get(P)||[];S.push(_),o.set(P,S)}})}const d=e.draftLocations_.get(t)??xq;for(const o of d)Xx(u,o,r,h)}function bq(e,t,r){e.callbacks_.push(function(u){var o;const h=t;if(!h||!gw(h,u))return;(o=u.mapSetPlugin_)==null||o.fixSetContents(h);const d=sC(h);Zz(e,h.draft_??h,d,r),Kz(h,u)})}function Kz(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:u}=t;if(u){const h=u.getPath(e);h&&u.generatePatches_(e,h,t)}Hz(e)}}function wq(e,t,r){const{scope_:n}=e;if(Ad(r)){const u=r[Ss];gw(u,n)&&u.callbacks_.push(function(){Ox(e);const d=sC(u);Zz(e,r,d,t)})}else Sc(r)&&e.callbacks_.push(function(){const h=gd(e);k2(h,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&uC(k2(e.copy_,t,e.type_),n.handledSet_,n)})}function uC(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ad(e)||t.has(e)||!Sc(e)||mw(e)||(t.add(e),L_(e,(n,u)=>{if(Ad(u)){const h=u[Ss];if(gw(h,r)){const d=sC(h);Xx(e,n,d,e.type_),Hz(h)}}else Sc(u)&&uC(u,t,r)})),e}function Sq(e,t){const r=dw(e),n={type_:r?1:0,scope_:t?t.scope_:Wz(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let u=n,h=cC;r&&(u=[n],h=h_);const{revoke:d,proxy:o}=Proxy.revocable(u,h);return n.draft_=o,n.revoke_=d,[o,n]}var cC={get(e,t){if(t===Ss)return e;const r=gd(e);if(!bA(r,t,e.type_))return Pq(e,r,t);const n=r[t];if(e.finalized_||!Sc(n))return n;if(n===gS(e.base_,t)){Ox(e);const u=e.type_===1?+t:t,h=R2(e.scope_,n,e,u);return e.copy_[u]=h}return n},has(e,t){return t in gd(e)},ownKeys(e){return Reflect.ownKeys(gd(e))},set(e,t,r){const n=Xz(gd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const u=gS(gd(e),t),h=u==null?void 0:u[Ss];if(h&&h.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(pq(r,u)&&(r!==void 0||bA(e.base_,t,e.type_)))return!0;Ox(e),D2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),wq(e,t,r)),!0},deleteProperty(e,t){return Ox(e),gS(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),D2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=gd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Ix]:!0,[M2]:e.type_!==1||t!=="length",[Kx]:n[Kx],[u_]:r[t]}},defineProperty(){gc(11)},getPrototypeOf(e){return Sy(e.base_)},setPrototypeOf(){gc(12)}},h_={};L_(cC,(e,t)=>{h_[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});h_.deleteProperty=function(e,t){return h_.set.call(this,e,t,void 0)};h_.set=function(e,t,r){return cC.set.call(this,e[0],t,r,e[0])};function gS(e,t){const r=e[Ss];return(r?gd(r):e)[t]}function Pq(e,t,r){var u;const n=Xz(t,r);return n?u_ in n?n[u_]:(u=n.get)==null?void 0:u.call(e.draft_):void 0}function Xz(e,t){if(!(t in e))return;let r=Sy(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Sy(r)}}function D2(e){e.modified_||(e.modified_=!0,e.parent_&&D2(e.parent_))}function Ox(e){e.copy_||(e.assigned_=new Map,e.copy_=A2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Eq=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,u)=>{if(Jg(r)&&!Jg(n)){const d=n;n=r;const o=this;return function(P=d,...S){return o.produce(P,M=>n.call(this,M,...S))}}Jg(n)||gc(6),u!==void 0&&!Jg(u)&&gc(7);let h;if(Sc(r)){const d=SA(this),o=R2(d,r,void 0);let _=!0;try{h=n(o),_=!1}finally{_?O2(d):L2(d)}return wA(d,u),PA(h,d)}else if(!r||!oC(r)){if(h=n(r),h===void 0&&(h=r),h===Uz&&(h=void 0),this.autoFreeze_&&lC(h,!0),u){const d=[],o=[];Py(I2).generateReplacementPatches_(r,h,{patches_:d,inversePatches_:o}),u(d,o)}return h}else gc(1,r)},this.produceWithPatches=(r,n)=>{if(Jg(r))return(o,..._)=>this.produceWithPatches(o,P=>r(P,..._));let u,h;return[this.produce(r,n,(o,_)=>{u=o,h=_}),u,h]},mS(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),mS(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),mS(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Sc(t)||gc(8),Ad(t)&&(t=bc(t));const r=SA(this),n=R2(r,t,void 0);return n[Ss].isManual_=!0,L2(r),n}finishDraft(t,r){const n=t&&t[Ss];(!n||!n.isManual_)&&gc(9);const{scope_:u}=n;return wA(u,r),PA(void 0,u)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const h=r[n];if(h.path.length===0&&h.op==="replace"){t=h.value;break}}n>-1&&(r=r.slice(n+1));const u=Py(I2).applyPatches_;return Ad(t)?u(t,r):this.produce(t,h=>u(h,r))}};function R2(e,t,r,n){const[u,h]=fw(t)?Py(Yx).proxyMap_(t,r):pw(t)?Py(Yx).proxySet_(t,r):Sq(t,r);return((r==null?void 0:r.scope_)??Wz()).drafts_.push(u),h.callbacks_=(r==null?void 0:r.callbacks_)??[],h.key_=n,r&&n!==void 0?bq(r,h,n):h.callbacks_.push(function(_){var S;(S=_.mapSetPlugin_)==null||S.fixSetContents(h);const{patchPlugin_:P}=_;h.modified_&&P&&P.generatePatches_(h,[],_)}),u}function bc(e){return Ad(e)||gc(10,e),Yz(e)}function Yz(e){if(!Sc(e)||mw(e))return e;const t=e[Ss];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=A2(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=A2(e,!0);return L_(r,(u,h)=>{Xx(r,u,Yz(h))},n),t&&(t.finalized_=!1),r}var Cq=new Eq,Qz=Cq.produce;function Tq(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Mq(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function kq(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var CA=e=>Array.isArray(e)?e:[e];function Aq(e){const t=Array.isArray(e[0])?e[0]:e;return kq(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Iq(e,t){const r=[],{length:n}=e;for(let u=0;u<n;u++)r.push(e[u].apply(null,t));return r}var Oq=class{constructor(e){this.value=e}deref(){return this.value}},Lq=typeof WeakRef<"u"?WeakRef:Oq,Dq=0,TA=1;function nx(){return{s:Dq,v:void 0,o:null,p:null}}function Jz(e,t={}){let r=nx();const{resultEqualityCheck:n}=t;let u,h=0;function d(){var M;let o=r;const{length:_}=arguments;for(let O=0,z=_;O<z;O++){const F=arguments[O];if(typeof F=="function"||typeof F=="object"&&F!==null){let B=o.o;B===null&&(o.o=B=new WeakMap);const D=B.get(F);D===void 0?(o=nx(),B.set(F,o)):o=D}else{let B=o.p;B===null&&(o.p=B=new Map);const D=B.get(F);D===void 0?(o=nx(),B.set(F,o)):o=D}}const P=o;let S;if(o.s===TA)S=o.v;else if(S=e.apply(null,arguments),h++,n){const O=((M=u==null?void 0:u.deref)==null?void 0:M.call(u))??u;O!=null&&n(O,S)&&(S=O,h!==0&&h--),u=typeof S=="object"&&S!==null||typeof S=="function"?new Lq(S):S}return P.s=TA,P.v=S,S}return d.clearCache=()=>{r=nx(),d.resetResultsCount()},d.resultsCount=()=>h,d.resetResultsCount=()=>{h=0},d}function Rq(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...u)=>{let h=0,d=0,o,_={},P=u.pop();typeof P=="object"&&(_=P,P=u.pop()),Tq(P,`createSelector expects an output function after the inputs, but received: [${typeof P}]`);const S={...r,..._},{memoize:M,memoizeOptions:O=[],argsMemoize:z=Jz,argsMemoizeOptions:F=[]}=S,B=CA(O),D=CA(F),H=Aq(u),Q=M(function(){return h++,P.apply(null,arguments)},...B),te=z(function(){d++;const ae=Iq(H,arguments);return o=Q.apply(null,ae),o},...D);return Object.assign(te,{resultFunc:P,memoizedResultFunc:Q,dependencies:H,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>o,recomputations:()=>h,resetRecomputations:()=>{h=0},memoize:M,argsMemoize:z})};return Object.assign(n,{withTypes:()=>n}),n}var Tt=Rq(Jz),jq=Object.assign((e,t=Tt)=>{Mq(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(h=>e[h]);return t(n,(...h)=>h.reduce((d,o,_)=>(d[r[_]]=o,d),{}))},{withTypes:()=>jq});function e3(e){return({dispatch:r,getState:n})=>u=>h=>typeof h=="function"?h(r,n,e):u(h)}var zq=e3(),Nq=e3,Fq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hx:Hx.apply(null,arguments)};function yu(e,t){function r(...n){if(t){let u=t(...n);if(!u)throw new Error(Al(0));return{type:e,payload:u.payload,..."meta"in u&&{meta:u.meta},..."error"in u&&{error:u.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>$z(n)&&n.type===e,r}var t3=class Qv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Qv.prototype)}static get[Symbol.species](){return Qv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Qv(...t[0].concat(this)):new Qv(...t.concat(this))}};function MA(e){return Sc(e)?Qz(e,()=>{}):e}function ix(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Bq(e){return typeof e=="boolean"}var Vq=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:u=!0,actionCreatorCheck:h=!0}=t??{};let d=new t3;return r&&(Bq(r)?d.push(zq):d.push(Nq(r.extraArgument))),d},r3="RTK_autoBatch",Bi=()=>e=>({payload:e,meta:{[r3]:!0}}),kA=e=>t=>{setTimeout(t,e)},n3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let u=!0,h=!1,d=!1;const o=new Set,_=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:kA(10):e.type==="callback"?e.queueNotification:kA(e.timeout),P=()=>{d=!1,h&&(h=!1,o.forEach(S=>S()))};return Object.assign({},n,{subscribe(S){const M=()=>u&&S(),O=n.subscribe(M);return o.add(S),()=>{O(),o.delete(S)}},dispatch(S){var M;try{return u=!((M=S==null?void 0:S.meta)!=null&&M[r3]),h=!u,h&&(d||(d=!0,_(P))),n.dispatch(S)}finally{u=!0}}})},$q=e=>function(r){const{autoBatch:n=!0}=r??{};let u=new t3(e);return n&&u.push(n3(typeof n=="object"?n:void 0)),u};function i3(e){const t=Vq(),{reducer:r=void 0,middleware:n,devTools:u=!0,duplicateMiddlewareCheck:h=!0,preloadedState:d=void 0,enhancers:o=void 0}=e||{};let _;if(typeof r=="function")_=r;else if(aC(r))_=Vz(r);else throw new Error(Al(1));let P;typeof n=="function"?P=n(t):P=t();let S=Hx;u&&(S=Fq({trace:!1,...typeof u=="object"&&u}));const M=dq(...P),O=$q(M);let z=typeof o=="function"?o(O):O();const F=S(...z);return Bz(_,d,F)}function a3(e){const t={},r=[];let n;const u={addCase(h,d){const o=typeof h=="string"?h:h.type;if(!o)throw new Error(Al(28));if(o in t)throw new Error(Al(29));return t[o]=d,u},addAsyncThunk(h,d){return d.pending&&(t[h.pending.type]=d.pending),d.rejected&&(t[h.rejected.type]=d.rejected),d.fulfilled&&(t[h.fulfilled.type]=d.fulfilled),d.settled&&r.push({matcher:h.settled,reducer:d.settled}),u},addMatcher(h,d){return r.push({matcher:h,reducer:d}),u},addDefaultCase(h){return n=h,u}};return e(u),[t,r,n]}function Uq(e){return typeof e=="function"}function qq(e,t){let[r,n,u]=a3(t),h;if(Uq(e))h=()=>MA(e());else{const o=MA(e);h=()=>o}function d(o=h(),_){let P=[r[_.type],...n.filter(({matcher:S})=>S(_)).map(({reducer:S})=>S)];return P.filter(S=>!!S).length===0&&(P=[u]),P.reduce((S,M)=>{if(M)if(Ad(S)){const z=M(S,_);return z===void 0?S:z}else{if(Sc(S))return Qz(S,O=>M(O,_));{const O=M(S,_);if(O===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return O}}return S},o)}return d.getInitialState=h,d}var Gq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wq=(e=21)=>{let t="",r=e;for(;r--;)t+=Gq[Math.random()*64|0];return t},Hq=Symbol.for("rtk-slice-createasyncthunk");function Zq(e,t){return`${e}/${t}`}function Kq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Hq];return function(u){const{name:h,reducerPath:d=h}=u;if(!h)throw new Error(Al(11));const o=(typeof u.reducers=="function"?u.reducers(Yq()):u.reducers)||{},_=Object.keys(o),P={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},S={addCase(ie,ae){const he=typeof ie=="string"?ie:ie.type;if(!he)throw new Error(Al(12));if(he in P.sliceCaseReducersByType)throw new Error(Al(13));return P.sliceCaseReducersByType[he]=ae,S},addMatcher(ie,ae){return P.sliceMatchers.push({matcher:ie,reducer:ae}),S},exposeAction(ie,ae){return P.actionCreators[ie]=ae,S},exposeCaseReducer(ie,ae){return P.sliceCaseReducersByName[ie]=ae,S}};_.forEach(ie=>{const ae=o[ie],he={reducerName:ie,type:Zq(h,ie),createNotation:typeof u.reducers=="function"};Jq(ae)?t9(he,ae,S,t):Qq(he,ae,S)});function M(){const[ie={},ae=[],he=void 0]=typeof u.extraReducers=="function"?a3(u.extraReducers):[u.extraReducers],re={...ie,...P.sliceCaseReducersByType};return qq(u.initialState,be=>{for(let xe in re)be.addCase(xe,re[xe]);for(let xe of P.sliceMatchers)be.addMatcher(xe.matcher,xe.reducer);for(let xe of ae)be.addMatcher(xe.matcher,xe.reducer);he&&be.addDefaultCase(he)})}const O=ie=>ie,z=new Map,F=new WeakMap;let B;function D(ie,ae){return B||(B=M()),B(ie,ae)}function H(){return B||(B=M()),B.getInitialState()}function Q(ie,ae=!1){function he(be){let xe=be[ie];return typeof xe>"u"&&ae&&(xe=ix(F,he,H)),xe}function re(be=O){const xe=ix(z,ae,()=>new WeakMap);return ix(xe,be,()=>{const $e={};for(const[Ee,Ne]of Object.entries(u.selectors??{}))$e[Ee]=Xq(Ne,be,()=>ix(F,be,H),ae);return $e})}return{reducerPath:ie,getSelectors:re,get selectors(){return re(he)},selectSlice:he}}const te={name:h,reducer:D,actions:P.actionCreators,caseReducers:P.sliceCaseReducersByName,getInitialState:H,...Q(d),injectInto(ie,{reducerPath:ae,...he}={}){const re=ae??d;return ie.inject({reducerPath:re,reducer:D},he),{...te,...Q(re,!0)}}};return te}}function Xq(e,t,r,n){function u(h,...d){let o=t(h);return typeof o>"u"&&n&&(o=r()),e(o,...d)}return u.unwrapped=e,u}var Yo=Kq();function Yq(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Qq({type:e,reducerName:t,createNotation:r},n,u){let h,d;if("reducer"in n){if(r&&!e9(n))throw new Error(Al(17));h=n.reducer,d=n.prepare}else h=n;u.addCase(e,h).exposeCaseReducer(t,h).exposeAction(t,d?yu(e,d):yu(e))}function Jq(e){return e._reducerDefinitionType==="asyncThunk"}function e9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function t9({type:e,reducerName:t},r,n,u){if(!u)throw new Error(Al(18));const{payloadCreator:h,fulfilled:d,pending:o,rejected:_,settled:P,options:S}=r,M=u(e,h,S);n.exposeAction(t,M),d&&n.addCase(M.fulfilled,d),o&&n.addCase(M.pending,o),_&&n.addCase(M.rejected,_),P&&n.addMatcher(M.settled,P),n.exposeCaseReducer(t,{fulfilled:d||ax,pending:o||ax,rejected:_||ax,settled:P||ax})}function ax(){}var r9="task",o3="listener",s3="completed",hC="cancelled",n9=`task-${hC}`,i9=`task-${s3}`,j2=`${o3}-${hC}`,a9=`${o3}-${s3}`,yw=class{constructor(e){$r(this,"name","TaskAbortError");$r(this,"message");this.code=e,this.message=`${r9} ${hC} (reason: ${e})`}},dC=(e,t)=>{if(typeof e!="function")throw new TypeError(Al(32))},Qx=()=>{},l3=(e,t=Qx)=>(e.catch(t),e),u3=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Um=e=>{if(e.aborted)throw new yw(e.reason)};function c3(e,t){let r=Qx;return new Promise((n,u)=>{const h=()=>u(new yw(e.reason));if(e.aborted){h();return}r=u3(e,h),t.finally(()=>r()).then(n,u)}).finally(()=>{r=Qx})}var o9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof yw?"cancelled":"rejected",error:r}}finally{t==null||t()}},Jx=e=>t=>l3(c3(e,t).then(r=>(Um(e),r))),h3=e=>{const t=Jx(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:sy}=Object,AA={},vw="listenerMiddleware",s9=(e,t)=>{const r=n=>u3(e,()=>n.abort(e.reason));return(n,u)=>{dC(n);const h=new AbortController;r(h);const d=o9(async()=>{Um(e),Um(h.signal);const o=await n({pause:Jx(h.signal),delay:h3(h.signal),signal:h.signal});return Um(h.signal),o},()=>h.abort(i9));return u!=null&&u.autoJoin&&t.push(d.catch(Qx)),{result:Jx(e)(d),cancel(){h.abort(n9)}}}},l9=(e,t)=>{const r=async(n,u)=>{Um(t);let h=()=>{};const o=[new Promise((_,P)=>{let S=e({predicate:n,effect:(M,O)=>{O.unsubscribe(),_([M,O.getState(),O.getOriginalState()])}});h=()=>{S(),P()}})];u!=null&&o.push(new Promise(_=>setTimeout(_,u,null)));try{const _=await c3(t,Promise.race(o));return Um(t),_}finally{h()}};return(n,u)=>l3(r(n,u))},d3=e=>{let{type:t,actionCreator:r,matcher:n,predicate:u,effect:h}=e;if(t)u=yu(t).match;else if(r)t=r.type,u=r.match;else if(n)u=n;else if(!u)throw new Error(Al(21));return dC(h),{predicate:u,type:t,effect:h}},f3=sy(e=>{const{type:t,predicate:r,effect:n}=d3(e);return{id:Wq(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Al(22))}}},{withTypes:()=>f3}),IA=(e,t)=>{const{type:r,effect:n,predicate:u}=d3(t);return Array.from(e.values()).find(h=>(typeof r=="string"?h.type===r:h.predicate===u)&&h.effect===n)},z2=e=>{e.pending.forEach(t=>{t.abort(j2)})},u9=(e,t)=>()=>{for(const r of t.keys())z2(r);e.clear()},OA=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},p3=sy(yu(`${vw}/add`),{withTypes:()=>p3}),c9=yu(`${vw}/removeAll`),m3=sy(yu(`${vw}/remove`),{withTypes:()=>m3}),h9=(...e)=>{console.error(`${vw}/error`,...e)},R_=(e={})=>{const t=new Map,r=new Map,n=z=>{const F=r.get(z)??0;r.set(z,F+1)},u=z=>{const F=r.get(z)??1;F===1?r.delete(z):r.set(z,F-1)},{extra:h,onError:d=h9}=e;dC(d);const o=z=>(z.unsubscribe=()=>t.delete(z.id),t.set(z.id,z),F=>{z.unsubscribe(),F!=null&&F.cancelActive&&z2(z)}),_=z=>{const F=IA(t,z)??f3(z);return o(F)};sy(_,{withTypes:()=>_});const P=z=>{const F=IA(t,z);return F&&(F.unsubscribe(),z.cancelActive&&z2(F)),!!F};sy(P,{withTypes:()=>P});const S=async(z,F,B,D)=>{const H=new AbortController,Q=l9(_,H.signal),te=[];try{z.pending.add(H),n(z),await Promise.resolve(z.effect(F,sy({},B,{getOriginalState:D,condition:(ie,ae)=>Q(ie,ae).then(Boolean),take:Q,delay:h3(H.signal),pause:Jx(H.signal),extra:h,signal:H.signal,fork:s9(H.signal,te),unsubscribe:z.unsubscribe,subscribe:()=>{t.set(z.id,z)},cancelActiveListeners:()=>{z.pending.forEach((ie,ae,he)=>{ie!==H&&(ie.abort(j2),he.delete(ie))})},cancel:()=>{H.abort(j2),z.pending.delete(H)},throwIfCancelled:()=>{Um(H.signal)}})))}catch(ie){ie instanceof yw||OA(d,ie,{raisedBy:"effect"})}finally{await Promise.all(te),H.abort(a9),u(z),z.pending.delete(H)}},M=u9(t,r);return{middleware:z=>F=>B=>{if(!$z(B))return F(B);if(p3.match(B))return _(B.payload);if(c9.match(B)){M();return}if(m3.match(B))return P(B.payload);let D=z.getState();const H=()=>{if(D===AA)throw new Error(Al(23));return D};let Q;try{if(Q=F(B),t.size>0){const te=z.getState(),ie=Array.from(t.values());for(const ae of ie){let he=!1;try{he=ae.predicate(B,te,D)}catch(re){he=!1,OA(d,re,{raisedBy:"predicate"})}he&&S(ae,B,z,H)}}}finally{D=AA}return Q},startListening:_,stopListening:P,clearListeners:M}};function Al(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const d9=localStorage.getItem("raaul_userData")?JSON.parse(localStorage==null?void 0:localStorage.getItem("raaul_userData")):null,g3=Yo({name:"user",initialState:d9,reducers:{userData:(e,t)=>{t.payload,localStorage.setItem("raaul_userData",JSON.stringify(t==null?void 0:t.payload))}}}),{userData:N2}=g3.actions,f9=localStorage.getItem("raaul_TokenData")?JSON.parse(localStorage.getItem("raaul_TokenData")):null,y3=Yo({name:"userToken",initialState:f9,reducers:{userToken:(e,t)=>(localStorage.setItem("raaul_TokenData",JSON.stringify(t.payload)),t.payload)}}),{userToken:eb}=y3.actions;function v3(e,t){return function(){return e.apply(t,arguments)}}const{toString:p9}=Object.prototype,{getPrototypeOf:fC}=Object,{iterator:_w,toStringTag:_3}=Symbol,xw=(e=>t=>{const r=p9.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Tc=e=>(e=e.toLowerCase(),t=>xw(t)===e),bw=e=>t=>typeof t===e,{isArray:Ny}=Array,Ey=bw("undefined");function j_(e){return e!==null&&!Ey(e)&&e.constructor!==null&&!Ey(e.constructor)&&Js(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const x3=Tc("ArrayBuffer");function m9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&x3(e.buffer),t}const g9=bw("string"),Js=bw("function"),b3=bw("number"),z_=e=>e!==null&&typeof e=="object",y9=e=>e===!0||e===!1,Lx=e=>{if(xw(e)!=="object")return!1;const t=fC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(_3 in e)&&!(_w in e)},v9=e=>{if(!z_(e)||j_(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},_9=Tc("Date"),x9=Tc("File"),b9=Tc("Blob"),w9=Tc("FileList"),S9=e=>z_(e)&&Js(e.pipe),P9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Js(e.append)&&((t=xw(e))==="formdata"||t==="object"&&Js(e.toString)&&e.toString()==="[object FormData]"))},E9=Tc("URLSearchParams"),[C9,T9,M9,k9]=["ReadableStream","Request","Response","Headers"].map(Tc),A9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N_(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,u;if(typeof e!="object"&&(e=[e]),Ny(e))for(n=0,u=e.length;n<u;n++)t.call(null,e[n],n,e);else{if(j_(e))return;const h=r?Object.getOwnPropertyNames(e):Object.keys(e),d=h.length;let o;for(n=0;n<d;n++)o=h[n],t.call(null,e[o],o,e)}}function w3(e,t){if(j_(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,u;for(;n-- >0;)if(u=r[n],t===u.toLowerCase())return u;return null}const Mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,S3=e=>!Ey(e)&&e!==Mm;function F2(){const{caseless:e,skipUndefined:t}=S3(this)&&this||{},r={},n=(u,h)=>{const d=e&&w3(r,h)||h;Lx(r[d])&&Lx(u)?r[d]=F2(r[d],u):Lx(u)?r[d]=F2({},u):Ny(u)?r[d]=u.slice():(!t||!Ey(u))&&(r[d]=u)};for(let u=0,h=arguments.length;u<h;u++)arguments[u]&&N_(arguments[u],n);return r}const I9=(e,t,r,{allOwnKeys:n}={})=>(N_(t,(u,h)=>{r&&Js(u)?e[h]=v3(u,r):e[h]=u},{allOwnKeys:n}),e),O9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),L9=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},D9=(e,t,r,n)=>{let u,h,d;const o={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),h=u.length;h-- >0;)d=u[h],(!n||n(d,e,t))&&!o[d]&&(t[d]=e[d],o[d]=!0);e=r!==!1&&fC(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},R9=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},j9=e=>{if(!e)return null;if(Ny(e))return e;let t=e.length;if(!b3(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},z9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fC(Uint8Array)),N9=(e,t)=>{const n=(e&&e[_w]).call(e);let u;for(;(u=n.next())&&!u.done;){const h=u.value;t.call(e,h[0],h[1])}},F9=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},B9=Tc("HTMLFormElement"),V9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,u){return n.toUpperCase()+u}),LA=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),$9=Tc("RegExp"),P3=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};N_(r,(u,h)=>{let d;(d=t(u,h,e))!==!1&&(n[h]=d||u)}),Object.defineProperties(e,n)},U9=e=>{P3(e,(t,r)=>{if(Js(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Js(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},q9=(e,t)=>{const r={},n=u=>{u.forEach(h=>{r[h]=!0})};return Ny(e)?n(e):n(String(e).split(t)),r},G9=()=>{},W9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function H9(e){return!!(e&&Js(e.append)&&e[_3]==="FormData"&&e[_w])}const Z9=e=>{const t=new Array(10),r=(n,u)=>{if(z_(n)){if(t.indexOf(n)>=0)return;if(j_(n))return n;if(!("toJSON"in n)){t[u]=n;const h=Ny(n)?[]:{};return N_(n,(d,o)=>{const _=r(d,u+1);!Ey(_)&&(h[o]=_)}),t[u]=void 0,h}}return n};return r(e,0)},K9=Tc("AsyncFunction"),X9=e=>e&&(z_(e)||Js(e))&&Js(e.then)&&Js(e.catch),E3=((e,t)=>e?setImmediate:t?((r,n)=>(Mm.addEventListener("message",({source:u,data:h})=>{u===Mm&&h===r&&n.length&&n.shift()()},!1),u=>{n.push(u),Mm.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Js(Mm.postMessage)),Y9=typeof queueMicrotask<"u"?queueMicrotask.bind(Mm):typeof process<"u"&&process.nextTick||E3,Q9=e=>e!=null&&Js(e[_w]),Et={isArray:Ny,isArrayBuffer:x3,isBuffer:j_,isFormData:P9,isArrayBufferView:m9,isString:g9,isNumber:b3,isBoolean:y9,isObject:z_,isPlainObject:Lx,isEmptyObject:v9,isReadableStream:C9,isRequest:T9,isResponse:M9,isHeaders:k9,isUndefined:Ey,isDate:_9,isFile:x9,isBlob:b9,isRegExp:$9,isFunction:Js,isStream:S9,isURLSearchParams:E9,isTypedArray:z9,isFileList:w9,forEach:N_,merge:F2,extend:I9,trim:A9,stripBOM:O9,inherits:L9,toFlatObject:D9,kindOf:xw,kindOfTest:Tc,endsWith:R9,toArray:j9,forEachEntry:N9,matchAll:F9,isHTMLForm:B9,hasOwnProperty:LA,hasOwnProp:LA,reduceDescriptors:P3,freezeMethods:U9,toObjectSet:q9,toCamelCase:V9,noop:G9,toFiniteNumber:W9,findKey:w3,global:Mm,isContextDefined:S3,isSpecCompliantForm:H9,toJSONObject:Z9,isAsyncFn:K9,isThenable:X9,setImmediate:E3,asap:Y9,isIterable:Q9};function nn(e,t,r,n,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),u&&(this.response=u,this.status=u.status?u.status:null)}Et.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Et.toJSONObject(this.config),code:this.code,status:this.status}}});const C3=nn.prototype,T3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{T3[e]={value:e}});Object.defineProperties(nn,T3);Object.defineProperty(C3,"isAxiosError",{value:!0});nn.from=(e,t,r,n,u,h)=>{const d=Object.create(C3);Et.toFlatObject(e,d,function(S){return S!==Error.prototype},P=>P!=="isAxiosError");const o=e&&e.message?e.message:"Error",_=t==null&&e?e.code:t;return nn.call(d,o,_,r,n,u),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",h&&Object.assign(d,h),d};const J9=null;function B2(e){return Et.isPlainObject(e)||Et.isArray(e)}function M3(e){return Et.endsWith(e,"[]")?e.slice(0,-2):e}function DA(e,t,r){return e?e.concat(t).map(function(u,h){return u=M3(u),!r&&h?"["+u+"]":u}).join(r?".":""):t}function eG(e){return Et.isArray(e)&&!e.some(B2)}const tG=Et.toFlatObject(Et,{},null,function(t){return/^is[A-Z]/.test(t)});function ww(e,t,r){if(!Et.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,D){return!Et.isUndefined(D[B])});const n=r.metaTokens,u=r.visitor||S,h=r.dots,d=r.indexes,_=(r.Blob||typeof Blob<"u"&&Blob)&&Et.isSpecCompliantForm(t);if(!Et.isFunction(u))throw new TypeError("visitor must be a function");function P(F){if(F===null)return"";if(Et.isDate(F))return F.toISOString();if(Et.isBoolean(F))return F.toString();if(!_&&Et.isBlob(F))throw new nn("Blob is not supported. Use a Buffer instead.");return Et.isArrayBuffer(F)||Et.isTypedArray(F)?_&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function S(F,B,D){let H=F;if(F&&!D&&typeof F=="object"){if(Et.endsWith(B,"{}"))B=n?B:B.slice(0,-2),F=JSON.stringify(F);else if(Et.isArray(F)&&eG(F)||(Et.isFileList(F)||Et.endsWith(B,"[]"))&&(H=Et.toArray(F)))return B=M3(B),H.forEach(function(te,ie){!(Et.isUndefined(te)||te===null)&&t.append(d===!0?DA([B],ie,h):d===null?B:B+"[]",P(te))}),!1}return B2(F)?!0:(t.append(DA(D,B,h),P(F)),!1)}const M=[],O=Object.assign(tG,{defaultVisitor:S,convertValue:P,isVisitable:B2});function z(F,B){if(!Et.isUndefined(F)){if(M.indexOf(F)!==-1)throw Error("Circular reference detected in "+B.join("."));M.push(F),Et.forEach(F,function(H,Q){(!(Et.isUndefined(H)||H===null)&&u.call(t,H,Et.isString(Q)?Q.trim():Q,B,O))===!0&&z(H,B?B.concat(Q):[Q])}),M.pop()}}if(!Et.isObject(e))throw new TypeError("data must be an object");return z(e),t}function RA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function pC(e,t){this._pairs=[],e&&ww(e,this,t)}const k3=pC.prototype;k3.append=function(t,r){this._pairs.push([t,r])};k3.toString=function(t){const r=t?function(n){return t.call(this,n,RA)}:RA;return this._pairs.map(function(u){return r(u[0])+"="+r(u[1])},"").join("&")};function rG(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function A3(e,t,r){if(!t)return e;const n=r&&r.encode||rG;Et.isFunction(r)&&(r={serialize:r});const u=r&&r.serialize;let h;if(u?h=u(t,r):h=Et.isURLSearchParams(t)?t.toString():new pC(t,r).toString(n),h){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class jA{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Et.forEach(this.handlers,function(n){n!==null&&t(n)})}}const I3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nG=typeof URLSearchParams<"u"?URLSearchParams:pC,iG=typeof FormData<"u"?FormData:null,aG=typeof Blob<"u"?Blob:null,oG={isBrowser:!0,classes:{URLSearchParams:nG,FormData:iG,Blob:aG},protocols:["http","https","file","blob","url","data"]},mC=typeof window<"u"&&typeof document<"u",V2=typeof navigator=="object"&&navigator||void 0,sG=mC&&(!V2||["ReactNative","NativeScript","NS"].indexOf(V2.product)<0),lG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uG=mC&&window.location.href||"http://localhost",cG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mC,hasStandardBrowserEnv:sG,hasStandardBrowserWebWorkerEnv:lG,navigator:V2,origin:uG},Symbol.toStringTag,{value:"Module"})),Xo={...cG,...oG};function hG(e,t){return ww(e,new Xo.classes.URLSearchParams,{visitor:function(r,n,u,h){return Xo.isNode&&Et.isBuffer(r)?(this.append(n,r.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...t})}function dG(e){return Et.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function fG(e){const t={},r=Object.keys(e);let n;const u=r.length;let h;for(n=0;n<u;n++)h=r[n],t[h]=e[h];return t}function O3(e){function t(r,n,u,h){let d=r[h++];if(d==="__proto__")return!0;const o=Number.isFinite(+d),_=h>=r.length;return d=!d&&Et.isArray(u)?u.length:d,_?(Et.hasOwnProp(u,d)?u[d]=[u[d],n]:u[d]=n,!o):((!u[d]||!Et.isObject(u[d]))&&(u[d]=[]),t(r,n,u[d],h)&&Et.isArray(u[d])&&(u[d]=fG(u[d])),!o)}if(Et.isFormData(e)&&Et.isFunction(e.entries)){const r={};return Et.forEachEntry(e,(n,u)=>{t(dG(n),u,r,0)}),r}return null}function pG(e,t,r){if(Et.isString(e))try{return(t||JSON.parse)(e),Et.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const F_={transitional:I3,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",u=n.indexOf("application/json")>-1,h=Et.isObject(t);if(h&&Et.isHTMLForm(t)&&(t=new FormData(t)),Et.isFormData(t))return u?JSON.stringify(O3(t)):t;if(Et.isArrayBuffer(t)||Et.isBuffer(t)||Et.isStream(t)||Et.isFile(t)||Et.isBlob(t)||Et.isReadableStream(t))return t;if(Et.isArrayBufferView(t))return t.buffer;if(Et.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(h){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hG(t,this.formSerializer).toString();if((o=Et.isFileList(t))||n.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return ww(o?{"files[]":t}:t,_&&new _,this.formSerializer)}}return h||u?(r.setContentType("application/json",!1),pG(t)):t}],transformResponse:[function(t){const r=this.transitional||F_.transitional,n=r&&r.forcedJSONParsing,u=this.responseType==="json";if(Et.isResponse(t)||Et.isReadableStream(t))return t;if(t&&Et.isString(t)&&(n&&!this.responseType||u)){const d=!(r&&r.silentJSONParsing)&&u;try{return JSON.parse(t,this.parseReviver)}catch(o){if(d)throw o.name==="SyntaxError"?nn.from(o,nn.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xo.classes.FormData,Blob:Xo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Et.forEach(["delete","get","head","post","put","patch"],e=>{F_.headers[e]={}});const mG=Et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gG=e=>{const t={};let r,n,u;return e&&e.split(`
`).forEach(function(d){u=d.indexOf(":"),r=d.substring(0,u).trim().toLowerCase(),n=d.substring(u+1).trim(),!(!r||t[r]&&mG[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},zA=Symbol("internals");function Rv(e){return e&&String(e).trim().toLowerCase()}function Dx(e){return e===!1||e==null?e:Et.isArray(e)?e.map(Dx):String(e)}function yG(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const vG=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function yS(e,t,r,n,u){if(Et.isFunction(n))return n.call(this,t,r);if(u&&(t=r),!!Et.isString(t)){if(Et.isString(n))return t.indexOf(n)!==-1;if(Et.isRegExp(n))return n.test(t)}}function _G(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function xG(e,t){const r=Et.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(u,h,d){return this[n].call(this,t,u,h,d)},configurable:!0})})}let el=class{constructor(t){t&&this.set(t)}set(t,r,n){const u=this;function h(o,_,P){const S=Rv(_);if(!S)throw new Error("header name must be a non-empty string");const M=Et.findKey(u,S);(!M||u[M]===void 0||P===!0||P===void 0&&u[M]!==!1)&&(u[M||_]=Dx(o))}const d=(o,_)=>Et.forEach(o,(P,S)=>h(P,S,_));if(Et.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(Et.isString(t)&&(t=t.trim())&&!vG(t))d(gG(t),r);else if(Et.isObject(t)&&Et.isIterable(t)){let o={},_,P;for(const S of t){if(!Et.isArray(S))throw TypeError("Object iterator must return a key-value pair");o[P=S[0]]=(_=o[P])?Et.isArray(_)?[..._,S[1]]:[_,S[1]]:S[1]}d(o,r)}else t!=null&&h(r,t,n);return this}get(t,r){if(t=Rv(t),t){const n=Et.findKey(this,t);if(n){const u=this[n];if(!r)return u;if(r===!0)return yG(u);if(Et.isFunction(r))return r.call(this,u,n);if(Et.isRegExp(r))return r.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Rv(t),t){const n=Et.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||yS(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let u=!1;function h(d){if(d=Rv(d),d){const o=Et.findKey(n,d);o&&(!r||yS(n,n[o],o,r))&&(delete n[o],u=!0)}}return Et.isArray(t)?t.forEach(h):h(t),u}clear(t){const r=Object.keys(this);let n=r.length,u=!1;for(;n--;){const h=r[n];(!t||yS(this,this[h],h,t,!0))&&(delete this[h],u=!0)}return u}normalize(t){const r=this,n={};return Et.forEach(this,(u,h)=>{const d=Et.findKey(n,h);if(d){r[d]=Dx(u),delete r[h];return}const o=t?_G(h):String(h).trim();o!==h&&delete r[h],r[o]=Dx(u),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Et.forEach(this,(n,u)=>{n!=null&&n!==!1&&(r[u]=t&&Et.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(u=>n.set(u)),n}static accessor(t){const n=(this[zA]=this[zA]={accessors:{}}).accessors,u=this.prototype;function h(d){const o=Rv(d);n[o]||(xG(u,d),n[o]=!0)}return Et.isArray(t)?t.forEach(h):h(t),this}};el.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Et.reduceDescriptors(el.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Et.freezeMethods(el);function vS(e,t){const r=this||F_,n=t||r,u=el.from(n.headers);let h=n.data;return Et.forEach(e,function(o){h=o.call(r,h,u.normalize(),t?t.status:void 0)}),u.normalize(),h}function L3(e){return!!(e&&e.__CANCEL__)}function Fy(e,t,r){nn.call(this,e??"canceled",nn.ERR_CANCELED,t,r),this.name="CanceledError"}Et.inherits(Fy,nn,{__CANCEL__:!0});function D3(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new nn("Request failed with status code "+r.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function bG(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wG(e,t){e=e||10;const r=new Array(e),n=new Array(e);let u=0,h=0,d;return t=t!==void 0?t:1e3,function(_){const P=Date.now(),S=n[h];d||(d=P),r[u]=_,n[u]=P;let M=h,O=0;for(;M!==u;)O+=r[M++],M=M%e;if(u=(u+1)%e,u===h&&(h=(h+1)%e),P-d<t)return;const z=S&&P-S;return z?Math.round(O*1e3/z):void 0}}function SG(e,t){let r=0,n=1e3/t,u,h;const d=(P,S=Date.now())=>{r=S,u=null,h&&(clearTimeout(h),h=null),e(...P)};return[(...P)=>{const S=Date.now(),M=S-r;M>=n?d(P,S):(u=P,h||(h=setTimeout(()=>{h=null,d(u)},n-M)))},()=>u&&d(u)]}const tb=(e,t,r=3)=>{let n=0;const u=wG(50,250);return SG(h=>{const d=h.loaded,o=h.lengthComputable?h.total:void 0,_=d-n,P=u(_),S=d<=o;n=d;const M={loaded:d,total:o,progress:o?d/o:void 0,bytes:_,rate:P||void 0,estimated:P&&o&&S?(o-d)/P:void 0,event:h,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(M)},r)},NA=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},FA=e=>(...t)=>Et.asap(()=>e(...t)),PG=Xo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Xo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Xo.origin),Xo.navigator&&/(msie|trident)/i.test(Xo.navigator.userAgent)):()=>!0,EG=Xo.hasStandardBrowserEnv?{write(e,t,r,n,u,h,d){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];Et.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),Et.isString(n)&&o.push(`path=${n}`),Et.isString(u)&&o.push(`domain=${u}`),h===!0&&o.push("secure"),Et.isString(d)&&o.push(`SameSite=${d}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function CG(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function TG(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function R3(e,t,r){let n=!CG(t);return e&&(n||r==!1)?TG(e,t):t}const BA=e=>e instanceof el?{...e}:e;function Xm(e,t){t=t||{};const r={};function n(P,S,M,O){return Et.isPlainObject(P)&&Et.isPlainObject(S)?Et.merge.call({caseless:O},P,S):Et.isPlainObject(S)?Et.merge({},S):Et.isArray(S)?S.slice():S}function u(P,S,M,O){if(Et.isUndefined(S)){if(!Et.isUndefined(P))return n(void 0,P,M,O)}else return n(P,S,M,O)}function h(P,S){if(!Et.isUndefined(S))return n(void 0,S)}function d(P,S){if(Et.isUndefined(S)){if(!Et.isUndefined(P))return n(void 0,P)}else return n(void 0,S)}function o(P,S,M){if(M in t)return n(P,S);if(M in e)return n(void 0,P)}const _={url:h,method:h,data:h,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:o,headers:(P,S,M)=>u(BA(P),BA(S),M,!0)};return Et.forEach(Object.keys({...e,...t}),function(S){const M=_[S]||u,O=M(e[S],t[S],S);Et.isUndefined(O)&&M!==o||(r[S]=O)}),r}const j3=e=>{const t=Xm({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:u,xsrfCookieName:h,headers:d,auth:o}=t;if(t.headers=d=el.from(d),t.url=A3(R3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&d.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Et.isFormData(r)){if(Xo.hasStandardBrowserEnv||Xo.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(Et.isFunction(r.getHeaders)){const _=r.getHeaders(),P=["content-type","content-length"];Object.entries(_).forEach(([S,M])=>{P.includes(S.toLowerCase())&&d.set(S,M)})}}if(Xo.hasStandardBrowserEnv&&(n&&Et.isFunction(n)&&(n=n(t)),n||n!==!1&&PG(t.url))){const _=u&&h&&EG.read(h);_&&d.set(u,_)}return t},MG=typeof XMLHttpRequest<"u",kG=MG&&function(e){return new Promise(function(r,n){const u=j3(e);let h=u.data;const d=el.from(u.headers).normalize();let{responseType:o,onUploadProgress:_,onDownloadProgress:P}=u,S,M,O,z,F;function B(){z&&z(),F&&F(),u.cancelToken&&u.cancelToken.unsubscribe(S),u.signal&&u.signal.removeEventListener("abort",S)}let D=new XMLHttpRequest;D.open(u.method.toUpperCase(),u.url,!0),D.timeout=u.timeout;function H(){if(!D)return;const te=el.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ae={data:!o||o==="text"||o==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:te,config:e,request:D};D3(function(re){r(re),B()},function(re){n(re),B()},ae),D=null}"onloadend"in D?D.onloadend=H:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(H)},D.onabort=function(){D&&(n(new nn("Request aborted",nn.ECONNABORTED,e,D)),D=null)},D.onerror=function(ie){const ae=ie&&ie.message?ie.message:"Network Error",he=new nn(ae,nn.ERR_NETWORK,e,D);he.event=ie||null,n(he),D=null},D.ontimeout=function(){let ie=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const ae=u.transitional||I3;u.timeoutErrorMessage&&(ie=u.timeoutErrorMessage),n(new nn(ie,ae.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,e,D)),D=null},h===void 0&&d.setContentType(null),"setRequestHeader"in D&&Et.forEach(d.toJSON(),function(ie,ae){D.setRequestHeader(ae,ie)}),Et.isUndefined(u.withCredentials)||(D.withCredentials=!!u.withCredentials),o&&o!=="json"&&(D.responseType=u.responseType),P&&([O,F]=tb(P,!0),D.addEventListener("progress",O)),_&&D.upload&&([M,z]=tb(_),D.upload.addEventListener("progress",M),D.upload.addEventListener("loadend",z)),(u.cancelToken||u.signal)&&(S=te=>{D&&(n(!te||te.type?new Fy(null,e,D):te),D.abort(),D=null)},u.cancelToken&&u.cancelToken.subscribe(S),u.signal&&(u.signal.aborted?S():u.signal.addEventListener("abort",S)));const Q=bG(u.url);if(Q&&Xo.protocols.indexOf(Q)===-1){n(new nn("Unsupported protocol "+Q+":",nn.ERR_BAD_REQUEST,e));return}D.send(h||null)})},AG=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,u;const h=function(P){if(!u){u=!0,o();const S=P instanceof Error?P:this.reason;n.abort(S instanceof nn?S:new Fy(S instanceof Error?S.message:S))}};let d=t&&setTimeout(()=>{d=null,h(new nn(`timeout ${t} of ms exceeded`,nn.ETIMEDOUT))},t);const o=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(P=>{P.unsubscribe?P.unsubscribe(h):P.removeEventListener("abort",h)}),e=null)};e.forEach(P=>P.addEventListener("abort",h));const{signal:_}=n;return _.unsubscribe=()=>Et.asap(o),_}},IG=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,u;for(;n<r;)u=n+t,yield e.slice(n,u),n=u},OG=async function*(e,t){for await(const r of LG(e))yield*IG(r,t)},LG=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},VA=(e,t,r,n)=>{const u=OG(e,t);let h=0,d,o=_=>{d||(d=!0,n&&n(_))};return new ReadableStream({async pull(_){try{const{done:P,value:S}=await u.next();if(P){o(),_.close();return}let M=S.byteLength;if(r){let O=h+=M;r(O)}_.enqueue(new Uint8Array(S))}catch(P){throw o(P),P}},cancel(_){return o(_),u.return()}},{highWaterMark:2})},$A=64*1024,{isFunction:ox}=Et,DG=(({Request:e,Response:t})=>({Request:e,Response:t}))(Et.global),{ReadableStream:UA,TextEncoder:qA}=Et.global,GA=(e,...t)=>{try{return!!e(...t)}catch{return!1}},RG=e=>{e=Et.merge.call({skipUndefined:!0},DG,e);const{fetch:t,Request:r,Response:n}=e,u=t?ox(t):typeof fetch=="function",h=ox(r),d=ox(n);if(!u)return!1;const o=u&&ox(UA),_=u&&(typeof qA=="function"?(F=>B=>F.encode(B))(new qA):async F=>new Uint8Array(await new r(F).arrayBuffer())),P=h&&o&&GA(()=>{let F=!1;const B=new r(Xo.origin,{body:new UA,method:"POST",get duplex(){return F=!0,"half"}}).headers.has("Content-Type");return F&&!B}),S=d&&o&&GA(()=>Et.isReadableStream(new n("").body)),M={stream:S&&(F=>F.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(F=>{!M[F]&&(M[F]=(B,D)=>{let H=B&&B[F];if(H)return H.call(B);throw new nn(`Response type '${F}' is not supported`,nn.ERR_NOT_SUPPORT,D)})});const O=async F=>{if(F==null)return 0;if(Et.isBlob(F))return F.size;if(Et.isSpecCompliantForm(F))return(await new r(Xo.origin,{method:"POST",body:F}).arrayBuffer()).byteLength;if(Et.isArrayBufferView(F)||Et.isArrayBuffer(F))return F.byteLength;if(Et.isURLSearchParams(F)&&(F=F+""),Et.isString(F))return(await _(F)).byteLength},z=async(F,B)=>{const D=Et.toFiniteNumber(F.getContentLength());return D??O(B)};return async F=>{let{url:B,method:D,data:H,signal:Q,cancelToken:te,timeout:ie,onDownloadProgress:ae,onUploadProgress:he,responseType:re,headers:be,withCredentials:xe="same-origin",fetchOptions:$e}=j3(F),Ee=t||fetch;re=re?(re+"").toLowerCase():"text";let Ne=AG([Q,te&&te.toAbortSignal()],ie),Xe=null;const ut=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()});let pt;try{if(he&&P&&D!=="get"&&D!=="head"&&(pt=await z(be,H))!==0){let Oe=new r(B,{method:"POST",body:H,duplex:"half"}),et;if(Et.isFormData(H)&&(et=Oe.headers.get("content-type"))&&be.setContentType(et),Oe.body){const[Mt,Dt]=NA(pt,tb(FA(he)));H=VA(Oe.body,$A,Mt,Dt)}}Et.isString(xe)||(xe=xe?"include":"omit");const gt=h&&"credentials"in r.prototype,wt={...$e,signal:Ne,method:D.toUpperCase(),headers:be.normalize().toJSON(),body:H,duplex:"half",credentials:gt?xe:void 0};Xe=h&&new r(B,wt);let je=await(h?Ee(Xe,$e):Ee(B,wt));const Qe=S&&(re==="stream"||re==="response");if(S&&(ae||Qe&&ut)){const Oe={};["status","statusText","headers"].forEach(Ke=>{Oe[Ke]=je[Ke]});const et=Et.toFiniteNumber(je.headers.get("content-length")),[Mt,Dt]=ae&&NA(et,tb(FA(ae),!0))||[];je=new n(VA(je.body,$A,Mt,()=>{Dt&&Dt(),ut&&ut()}),Oe)}re=re||"text";let yt=await M[Et.findKey(M,re)||"text"](je,F);return!Qe&&ut&&ut(),await new Promise((Oe,et)=>{D3(Oe,et,{data:yt,headers:el.from(je.headers),status:je.status,statusText:je.statusText,config:F,request:Xe})})}catch(gt){throw ut&&ut(),gt&&gt.name==="TypeError"&&/Load failed|fetch/i.test(gt.message)?Object.assign(new nn("Network Error",nn.ERR_NETWORK,F,Xe),{cause:gt.cause||gt}):nn.from(gt,gt&&gt.code,F,Xe)}}},jG=new Map,z3=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:u}=t,h=[n,u,r];let d=h.length,o=d,_,P,S=jG;for(;o--;)_=h[o],P=S.get(_),P===void 0&&S.set(_,P=o?new Map:RG(t)),S=P;return P};z3();const gC={http:J9,xhr:kG,fetch:{get:z3}};Et.forEach(gC,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const WA=e=>`- ${e}`,zG=e=>Et.isFunction(e)||e===null||e===!1;function NG(e,t){e=Et.isArray(e)?e:[e];const{length:r}=e;let n,u;const h={};for(let d=0;d<r;d++){n=e[d];let o;if(u=n,!zG(n)&&(u=gC[(o=String(n)).toLowerCase()],u===void 0))throw new nn(`Unknown adapter '${o}'`);if(u&&(Et.isFunction(u)||(u=u.get(t))))break;h[o||"#"+d]=u}if(!u){const d=Object.entries(h).map(([_,P])=>`adapter ${_} `+(P===!1?"is not supported by the environment":"is not available in the build"));let o=r?d.length>1?`since :
`+d.map(WA).join(`
`):" "+WA(d[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return u}const N3={getAdapter:NG,adapters:gC};function _S(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fy(null,e)}function HA(e){return _S(e),e.headers=el.from(e.headers),e.data=vS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),N3.getAdapter(e.adapter||F_.adapter,e)(e).then(function(n){return _S(e),n.data=vS.call(e,e.transformResponse,n),n.headers=el.from(n.headers),n},function(n){return L3(n)||(_S(e),n&&n.response&&(n.response.data=vS.call(e,e.transformResponse,n.response),n.response.headers=el.from(n.response.headers))),Promise.reject(n)})}const F3="1.13.2",Sw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sw[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ZA={};Sw.transitional=function(t,r,n){function u(h,d){return"[Axios v"+F3+"] Transitional option '"+h+"'"+d+(n?". "+n:"")}return(h,d,o)=>{if(t===!1)throw new nn(u(d," has been removed"+(r?" in "+r:"")),nn.ERR_DEPRECATED);return r&&!ZA[d]&&(ZA[d]=!0,console.warn(u(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(h,d,o):!0}};Sw.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function FG(e,t,r){if(typeof e!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let u=n.length;for(;u-- >0;){const h=n[u],d=t[h];if(d){const o=e[h],_=o===void 0||d(o,h,e);if(_!==!0)throw new nn("option "+h+" must be "+_,nn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new nn("Unknown option "+h,nn.ERR_BAD_OPTION)}}const Rx={assertOptions:FG,validators:Sw},ch=Rx.validators;let qm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new jA,response:new jA}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";try{n.stack?h&&!String(n.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+h):n.stack=h}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Xm(this.defaults,r);const{transitional:n,paramsSerializer:u,headers:h}=r;n!==void 0&&Rx.assertOptions(n,{silentJSONParsing:ch.transitional(ch.boolean),forcedJSONParsing:ch.transitional(ch.boolean),clarifyTimeoutError:ch.transitional(ch.boolean)},!1),u!=null&&(Et.isFunction(u)?r.paramsSerializer={serialize:u}:Rx.assertOptions(u,{encode:ch.function,serialize:ch.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Rx.assertOptions(r,{baseUrl:ch.spelling("baseURL"),withXsrfToken:ch.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=h&&Et.merge(h.common,h[r.method]);h&&Et.forEach(["delete","get","head","post","put","patch","common"],F=>{delete h[F]}),r.headers=el.concat(d,h);const o=[];let _=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(r)===!1||(_=_&&B.synchronous,o.unshift(B.fulfilled,B.rejected))});const P=[];this.interceptors.response.forEach(function(B){P.push(B.fulfilled,B.rejected)});let S,M=0,O;if(!_){const F=[HA.bind(this),void 0];for(F.unshift(...o),F.push(...P),O=F.length,S=Promise.resolve(r);M<O;)S=S.then(F[M++],F[M++]);return S}O=o.length;let z=r;for(;M<O;){const F=o[M++],B=o[M++];try{z=F(z)}catch(D){B.call(this,D);break}}try{S=HA.call(this,z)}catch(F){return Promise.reject(F)}for(M=0,O=P.length;M<O;)S=S.then(P[M++],P[M++]);return S}getUri(t){t=Xm(this.defaults,t);const r=R3(t.baseURL,t.url,t.allowAbsoluteUrls);return A3(r,t.params,t.paramsSerializer)}};Et.forEach(["delete","get","head","options"],function(t){qm.prototype[t]=function(r,n){return this.request(Xm(n||{},{method:t,url:r,data:(n||{}).data}))}});Et.forEach(["post","put","patch"],function(t){function r(n){return function(h,d,o){return this.request(Xm(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:h,data:d}))}}qm.prototype[t]=r(),qm.prototype[t+"Form"]=r(!0)});let BG=class B3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(h){r=h});const n=this;this.promise.then(u=>{if(!n._listeners)return;let h=n._listeners.length;for(;h-- >0;)n._listeners[h](u);n._listeners=null}),this.promise.then=u=>{let h;const d=new Promise(o=>{n.subscribe(o),h=o}).then(u);return d.cancel=function(){n.unsubscribe(h)},d},t(function(h,d,o){n.reason||(n.reason=new Fy(h,d,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new B3(function(u){t=u}),cancel:t}}};function VG(e){return function(r){return e.apply(null,r)}}function $G(e){return Et.isObject(e)&&e.isAxiosError===!0}const $2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($2).forEach(([e,t])=>{$2[t]=e});function V3(e){const t=new qm(e),r=v3(qm.prototype.request,t);return Et.extend(r,qm.prototype,t,{allOwnKeys:!0}),Et.extend(r,t,null,{allOwnKeys:!0}),r.create=function(u){return V3(Xm(e,u))},r}const ha=V3(F_);ha.Axios=qm;ha.CanceledError=Fy;ha.CancelToken=BG;ha.isCancel=L3;ha.VERSION=F3;ha.toFormData=ww;ha.AxiosError=nn;ha.Cancel=ha.CanceledError;ha.all=function(t){return Promise.all(t)};ha.spread=VG;ha.isAxiosError=$G;ha.mergeConfig=Xm;ha.AxiosHeaders=el;ha.formToJSON=e=>O3(Et.isHTMLForm(e)?new FormData(e):e);ha.getAdapter=N3.getAdapter;ha.HttpStatusCode=$2;ha.default=ha;const{Axios:Gpe,AxiosError:Wpe,CanceledError:Hpe,isCancel:Zpe,CancelToken:Kpe,VERSION:Xpe,all:Ype,Cancel:Qpe,isAxiosError:Jpe,spread:eme,toFormData:tme,AxiosHeaders:rme,HttpStatusCode:nme,formToJSON:ime,getAdapter:ame,mergeConfig:ome}=ha;let UG={data:""},qG=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||UG},GG=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,WG=/\/\*[^]*?\*\/|  +/g,KA=/\n+/g,rp=(e,t)=>{let r="",n="",u="";for(let h in e){let d=e[h];h[0]=="@"?h[1]=="i"?r=h+" "+d+";":n+=h[1]=="f"?rp(d,h):h+"{"+rp(d,h[1]=="k"?"":t)+"}":typeof d=="object"?n+=rp(d,t?t.replace(/([^,])+/g,o=>h.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,_=>/&/.test(_)?_.replace(/&/g,o):o?o+" "+_:_)):h):d!=null&&(h=/^--/.test(h)?h:h.replace(/[A-Z]/g,"-$&").toLowerCase(),u+=rp.p?rp.p(h,d):h+":"+d+";")}return r+(t&&u?t+"{"+u+"}":u)+n},hd={},$3=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+$3(e[r]);return t}return e},HG=(e,t,r,n,u)=>{let h=$3(e),d=hd[h]||(hd[h]=(_=>{let P=0,S=11;for(;P<_.length;)S=101*S+_.charCodeAt(P++)>>>0;return"go"+S})(h));if(!hd[d]){let _=h!==e?e:(P=>{let S,M,O=[{}];for(;S=GG.exec(P.replace(WG,""));)S[4]?O.shift():S[3]?(M=S[3].replace(KA," ").trim(),O.unshift(O[0][M]=O[0][M]||{})):O[0][S[1]]=S[2].replace(KA," ").trim();return O[0]})(e);hd[d]=rp(u?{["@keyframes "+d]:_}:_,r?"":"."+d)}let o=r&&hd.g?hd.g:null;return r&&(hd.g=hd[d]),((_,P,S,M)=>{M?P.data=P.data.replace(M,_):P.data.indexOf(_)===-1&&(P.data=S?_+P.data:P.data+_)})(hd[d],t,n,o),d},ZG=(e,t,r)=>e.reduce((n,u,h)=>{let d=t[h];if(d&&d.call){let o=d(r),_=o&&o.props&&o.props.className||/^go/.test(o)&&o;d=_?"."+_:o&&typeof o=="object"?o.props?"":rp(o,""):o===!1?"":o}return n+u+(d??"")},"");function Pw(e){let t=this||{},r=e.call?e(t.p):e;return HG(r.unshift?r.raw?ZG(r,[].slice.call(arguments,1),t.p):r.reduce((n,u)=>Object.assign(n,u&&u.call?u(t.p):u),{}):r,qG(t.target),t.g,t.o,t.k)}let U3,U2,q2;Pw.bind({g:1});let Id=Pw.bind({k:1});function KG(e,t,r,n){rp.p=t,U3=e,U2=r,q2=n}function Pp(e,t){let r=this||{};return function(){let n=arguments;function u(h,d){let o=Object.assign({},h),_=o.className||u.className;r.p=Object.assign({theme:U2&&U2()},o),r.o=/ *go\d+/.test(_),o.className=Pw.apply(r,n)+(_?" "+_:"");let P=e;return e[0]&&(P=o.as||e,delete o.as),q2&&P[0]&&q2(o),U3(P,o)}return u}}var XG=e=>typeof e=="function",rb=(e,t)=>XG(e)?e(t):e,YG=(()=>{let e=0;return()=>(++e).toString()})(),q3=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),QG=20,yC="default",G3=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(d=>d.id===t.toast.id?{...d,...t.toast}:d)};case 2:let{toast:n}=t;return G3(e,{type:e.toasts.find(d=>d.id===n.id)?1:0,toast:n});case 3:let{toastId:u}=t;return{...e,toasts:e.toasts.map(d=>d.id===u||u===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(d=>d.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let h=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+h}))}}},jx=[],W3={toasts:[],pausedAt:void 0,settings:{toastLimit:QG}},mh={},H3=(e,t=yC)=>{mh[t]=G3(mh[t]||W3,e),jx.forEach(([r,n])=>{r===t&&n(mh[t])})},Z3=e=>Object.keys(mh).forEach(t=>H3(e,t)),JG=e=>Object.keys(mh).find(t=>mh[t].toasts.some(r=>r.id===e)),Ew=(e=yC)=>t=>{H3(t,e)},eW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},tW=(e={},t=yC)=>{let[r,n]=A.useState(mh[t]||W3),u=A.useRef(mh[t]);A.useEffect(()=>(u.current!==mh[t]&&n(mh[t]),jx.push([t,n]),()=>{let d=jx.findIndex(([o])=>o===t);d>-1&&jx.splice(d,1)}),[t]);let h=r.toasts.map(d=>{var o,_,P;return{...e,...e[d.type],...d,removeDelay:d.removeDelay||((o=e[d.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:d.duration||((_=e[d.type])==null?void 0:_.duration)||(e==null?void 0:e.duration)||eW[d.type],style:{...e.style,...(P=e[d.type])==null?void 0:P.style,...d.style}}});return{...r,toasts:h}},rW=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||YG()}),B_=e=>(t,r)=>{let n=rW(t,e,r);return Ew(n.toasterId||JG(n.id))({type:2,toast:n}),n.id},ki=(e,t)=>B_("blank")(e,t);ki.error=B_("error");ki.success=B_("success");ki.loading=B_("loading");ki.custom=B_("custom");ki.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Ew(t)(r):Z3(r)};ki.dismissAll=e=>ki.dismiss(void 0,e);ki.remove=(e,t)=>{let r={type:4,toastId:e};t?Ew(t)(r):Z3(r)};ki.removeAll=e=>ki.remove(void 0,e);ki.promise=(e,t,r)=>{let n=ki.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(u=>{let h=t.success?rb(t.success,u):void 0;return h?ki.success(h,{id:n,...r,...r==null?void 0:r.success}):ki.dismiss(n),u}).catch(u=>{let h=t.error?rb(t.error,u):void 0;h?ki.error(h,{id:n,...r,...r==null?void 0:r.error}):ki.dismiss(n)}),e};var nW=1e3,iW=(e,t="default")=>{let{toasts:r,pausedAt:n}=tW(e,t),u=A.useRef(new Map).current,h=A.useCallback((M,O=nW)=>{if(u.has(M))return;let z=setTimeout(()=>{u.delete(M),d({type:4,toastId:M})},O);u.set(M,z)},[]);A.useEffect(()=>{if(n)return;let M=Date.now(),O=r.map(z=>{if(z.duration===1/0)return;let F=(z.duration||0)+z.pauseDuration-(M-z.createdAt);if(F<0){z.visible&&ki.dismiss(z.id);return}return setTimeout(()=>ki.dismiss(z.id,t),F)});return()=>{O.forEach(z=>z&&clearTimeout(z))}},[r,n,t]);let d=A.useCallback(Ew(t),[t]),o=A.useCallback(()=>{d({type:5,time:Date.now()})},[d]),_=A.useCallback((M,O)=>{d({type:1,toast:{id:M,height:O}})},[d]),P=A.useCallback(()=>{n&&d({type:6,time:Date.now()})},[n,d]),S=A.useCallback((M,O)=>{let{reverseOrder:z=!1,gutter:F=8,defaultPosition:B}=O||{},D=r.filter(te=>(te.position||B)===(M.position||B)&&te.height),H=D.findIndex(te=>te.id===M.id),Q=D.filter((te,ie)=>ie<H&&te.visible).length;return D.filter(te=>te.visible).slice(...z?[Q+1]:[0,Q]).reduce((te,ie)=>te+(ie.height||0)+F,0)},[r]);return A.useEffect(()=>{r.forEach(M=>{if(M.dismissed)h(M.id,M.removeDelay);else{let O=u.get(M.id);O&&(clearTimeout(O),u.delete(M.id))}})},[r,h]),{toasts:r,handlers:{updateHeight:_,startPause:o,endPause:P,calculateOffset:S}}},aW=Id`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,oW=Id`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sW=Id`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,lW=Pp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${oW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,uW=Id`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,cW=Pp("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${uW} 1s linear infinite;
`,hW=Id`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,dW=Id`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,fW=Pp("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${dW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,pW=Pp("div")`
  position: absolute;
`,mW=Pp("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,gW=Id`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yW=Pp("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${gW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vW=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?A.createElement(yW,null,t):t:r==="blank"?null:A.createElement(mW,null,A.createElement(cW,{...n}),r!=="loading"&&A.createElement(pW,null,r==="error"?A.createElement(lW,{...n}):A.createElement(fW,{...n})))},_W=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,xW=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,bW="0%{opacity:0;} 100%{opacity:1;}",wW="0%{opacity:1;} 100%{opacity:0;}",SW=Pp("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PW=Pp("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,EW=(e,t)=>{let r=e.includes("top")?1:-1,[n,u]=q3()?[bW,wW]:[_W(r),xW(r)];return{animation:t?`${Id(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Id(u)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},CW=A.memo(({toast:e,position:t,style:r,children:n})=>{let u=e.height?EW(e.position||t||"top-center",e.visible):{opacity:0},h=A.createElement(vW,{toast:e}),d=A.createElement(PW,{...e.ariaProps},rb(e.message,e));return A.createElement(SW,{className:e.className,style:{...u,...r,...e.style}},typeof n=="function"?n({icon:h,message:d}):A.createElement(A.Fragment,null,h,d))});KG(A.createElement);var TW=({id:e,className:t,style:r,onHeightUpdate:n,children:u})=>{let h=A.useCallback(d=>{if(d){let o=()=>{let _=d.getBoundingClientRect().height;n(e,_)};o(),new MutationObserver(o).observe(d,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return A.createElement("div",{ref:h,className:t,style:r},u)},MW=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},u=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:q3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...u}},kW=Pw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sx=16,AW=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:u,toasterId:h,containerStyle:d,containerClassName:o})=>{let{toasts:_,handlers:P}=iW(r,h);return A.createElement("div",{"data-rht-toaster":h||"",style:{position:"fixed",zIndex:9999,top:sx,left:sx,right:sx,bottom:sx,pointerEvents:"none",...d},className:o,onMouseEnter:P.startPause,onMouseLeave:P.endPause},_.map(S=>{let M=S.position||t,O=P.calculateOffset(S,{reverseOrder:e,gutter:n,defaultPosition:t}),z=MW(M,O);return A.createElement(TW,{id:S.id,key:S.id,onHeightUpdate:P.updateHeight,className:S.visible?kW:"",style:z},S.type==="custom"?rb(S.message,S):u?u(S):A.createElement(CW,{toast:S,position:M}))}))},pu=ki,xS={exports:{}},bS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function IW(){if(XA)return bS;XA=1;var e=Dy();function t(_,P){return _===P&&(_!==0||1/_===1/P)||_!==_&&P!==P}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,u=e.useRef,h=e.useEffect,d=e.useMemo,o=e.useDebugValue;return bS.useSyncExternalStoreWithSelector=function(_,P,S,M,O){var z=u(null);if(z.current===null){var F={hasValue:!1,value:null};z.current=F}else F=z.current;z=d(function(){function D(ae){if(!H){if(H=!0,Q=ae,ae=M(ae),O!==void 0&&F.hasValue){var he=F.value;if(O(he,ae))return te=he}return te=ae}if(he=te,r(Q,ae))return he;var re=M(ae);return O!==void 0&&O(he,re)?(Q=ae,he):(Q=ae,te=re)}var H=!1,Q,te,ie=S===void 0?null:S;return[function(){return D(P())},ie===null?void 0:function(){return D(ie())}]},[P,S,M,O]);var B=n(_,z[0],z[1]);return h(function(){F.hasValue=!0,F.value=B},[B]),o(B),B},bS}var YA;function OW(){return YA||(YA=1,xS.exports=IW()),xS.exports}var LW=OW();function DW(e){e()}function RW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DW(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const u=t={callback:r,next:null,prev:t};return u.prev?u.prev.next=u:e=u,function(){!n||e===null||(n=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var QA={notify(){},get:()=>[]};function jW(e,t){let r,n=QA,u=0,h=!1;function d(B){S();const D=n.subscribe(B);let H=!1;return()=>{H||(H=!0,D(),M())}}function o(){n.notify()}function _(){F.onStateChange&&F.onStateChange()}function P(){return h}function S(){u++,r||(r=e.subscribe(_),n=RW())}function M(){u--,r&&u===0&&(r(),r=void 0,n.clear(),n=QA)}function O(){h||(h=!0,S())}function z(){h&&(h=!1,M())}const F={addNestedSub:d,notifyNestedSubs:o,handleChangeWrapper:_,isSubscribed:P,trySubscribe:O,tryUnsubscribe:z,getListeners:()=>n};return F}var zW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NW=zW(),FW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",BW=FW(),VW=()=>NW||BW?A.useLayoutEffect:A.useEffect,$W=VW();function JA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function UW(e,t){if(JA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let u=0;u<r.length;u++)if(!Object.prototype.hasOwnProperty.call(t,r[u])||!JA(e[r[u]],t[r[u]]))return!1;return!0}var wS=Symbol.for("react-redux-context"),SS=typeof globalThis<"u"?globalThis:{};function qW(){if(!A.createContext)return{};const e=SS[wS]??(SS[wS]=new Map);let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var yp=qW();function GW(e){const{children:t,context:r,serverState:n,store:u}=e,h=A.useMemo(()=>{const _=jW(u);return{store:u,subscription:_,getServerState:n?()=>n:void 0}},[u,n]),d=A.useMemo(()=>u.getState(),[u]);$W(()=>{const{subscription:_}=h;return _.onStateChange=_.notifyNestedSubs,_.trySubscribe(),d!==u.getState()&&_.notifyNestedSubs(),()=>{_.tryUnsubscribe(),_.onStateChange=void 0}},[h,d]);const o=r||yp;return A.createElement(o.Provider,{value:h},t)}var K3=GW;function vC(e=yp){return function(){return A.useContext(e)}}var X3=vC();function Y3(e=yp){const t=e===yp?X3:vC(e),r=()=>{const{store:n}=t();return n};return Object.assign(r,{withTypes:()=>r}),r}var WW=Y3();function HW(e=yp){const t=e===yp?WW:Y3(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var _C=HW(),ZW=(e,t)=>e===t;function KW(e=yp){const t=e===yp?X3:vC(e),r=(n,u={})=>{const{equalityFn:h=ZW}=typeof u=="function"?{equalityFn:u}:u,d=t(),{store:o,subscription:_,getServerState:P}=d;A.useRef(!0);const S=A.useCallback({[n.name](O){return n(O)}}[n.name],[n]),M=LW.useSyncExternalStoreWithSelector(_.addNestedSub,o.getState,P||o.getState,S,h);return A.useDebugValue(M),M};return Object.assign(r,{withTypes:()=>r}),r}var Cw=KW();const Mc=()=>{const e="https://electric-vehicle-route-energy-calculation.onrender.com/api/v1",t=Cw(h=>{var d,o;return(o=(d=h==null?void 0:h.userToken)==null?void 0:d.tokens)==null?void 0:o.access}),r=_C(),n=Sp(),u=ha.create({baseURL:e,timeout:3e4,headers:{Authorization:`Bearer ${t}`}});return u.interceptors.response.use(h=>h,h=>{let d="Something went wrong!!!";return h.response?h.response.status===401||h.response.status===403?(d="Session expired. Please log in again.",ki.error(d),r(eb(null)),r(N2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),n("/auth/login")):h.response.status===500&&(d="Internal server error, try again.",ki.error(d)):h.request?(d="Network issue, try again.",ki.error(d)):(d="Request failed.",ki.error(d)),Promise.reject(h)}),u};function XW(){const e=Mc(),t=_C(),r=Sp();return ig({mutationKey:["userLogout"],mutationFn:async n=>{const u=await e.post("/logout/",n);return u==null?void 0:u.data},onSuccess:n=>{pu.success("Logout Successful!"),t(eb(null)),t(N2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),r("/auth")},onError:n=>{pu.success("Something went wrong! But you have been logged out."),t(eb(null)),t(N2(null)),localStorage.removeItem("raaul_TokenData"),localStorage.removeItem("raaul_userData"),r("/auth")}})}function YW(){const e=Cw(P=>{var S;return(S=P==null?void 0:P.userToken)==null?void 0:S.tokens}),t=tl().pathname,[r,n]=A.useState(""),[u,h]=A.useState("");A.useEffect(()=>{t==="/"?(n("EV Calculation"),h("Welcome back")):t==="/vechile"?(n("EV Route Calculate Tools"),h("Vehicle")):t==="/route"?(n("EV Route Planner"),h("Calculate optimal routes with charging stops based on vehicle specifications")):t==="/result"||t==="/route-analysis-results"?(n("EV Result Simulation"),h("Plan your journey and calculate battery consumption")):t==="/notification"&&(n("Notification"),h("Show the Notification"))},[t]);const{mutate:d,isPending:o}=XW(),_=()=>{const P={refresh:e==null?void 0:e.refresh};d(P)};return $.jsxs("div",{className:"w-full h-full flex items-center justify-between gap-10 px-10 relative",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-secondary-black text-2xl font-bold font-roboto",children:r}),$.jsx("h6",{className:"text-[#637381] text-base font-roboto mt-2",children:u})]}),$.jsx("div",{className:"flex items-center gap-5",children:$.jsx(wy,{children:"Logout",onClick:_})}),$.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-95/100 border-b border-[#637381]/20"}),o&&$.jsx(kd,{})]})}function QW(){return Cw(t=>{var r;return(r=t==null?void 0:t.userToken)==null?void 0:r.tokens})?$.jsxs("main",{className:"w-full h-screen flex",children:[$.jsx("div",{className:"w-full max-w-[300px] h-screen px-5 py-8",children:$.jsx(T8,{})}),$.jsxs("div",{className:"w-full max-w-[calc(100%-300px)] h-screen bg-[#f5f6f7]",children:[$.jsx("div",{className:"w-full h-[110px]",children:$.jsx(YW,{})}),$.jsx("div",{className:"w-full h-[calc(100vh-110px)] overflow-y-scroll custom-scrollbar",children:$.jsx(wz,{})})]})]}):$.jsx(QE,{to:"/auth/login"})}var Q3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eI=Jn.createContext&&Jn.createContext(Q3),JW=["attr","size","title"];function e7(e,t){if(e==null)return{};var r=t7(e,t),n,u;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(u=0;u<h.length;u++)n=h[u],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nb.apply(this,arguments)}function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(n){r7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r7(e,t,r){return t=n7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n7(e){var t=i7(e,"string");return typeof t=="symbol"?t:t+""}function i7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J3(e){return e&&e.map((t,r)=>Jn.createElement(t.tag,ib({key:r},t.attr),J3(t.child)))}function Tw(e){return t=>Jn.createElement(a7,nb({attr:ib({},e.attr)},t),J3(e.child))}function a7(e){var t=r=>{var{attr:n,size:u,title:h}=e,d=e7(e,JW),o=u||r.size||"1em",_;return r.className&&(_=r.className),e.className&&(_=(_?_+" ":"")+e.className),Jn.createElement("svg",nb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,d,{className:_,style:ib(ib({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),h&&Jn.createElement("title",null,h),e.children)};return eI!==void 0?Jn.createElement(eI.Consumer,null,r=>t(r)):t(Q3)}function o7(e){return Tw({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"},child:[]}]})(e)}function s7(){return $.jsx("div",{className:"bg-black ",children:$.jsxs("div",{className:"flex flex-col items-center justify-center text-sm max-md:px-4 py-20 h-screen",children:[$.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-linear-to-r from-white to-gray-500 bg-clip-text text-transparent",children:"404 Not Found"}),$.jsx("div",{className:"h-px w-80 rounded bg-linear-to-r from-gray-400 to-gray-800 my-5 md:my-7"}),$.jsx("p",{className:"md:text-xl text-gray-400 max-w-lg text-center",children:"The page you are looking for does not exist or has been moved."}),$.jsxs("a",{href:"/",className:"group flex items-center gap-1 bg-white hover:bg-gray-200 px-7 py-2.5 text-gray-800 rounded-full mt-10 font-medium active:scale-95 transition-all",children:["Back to Home",$.jsx(o7,{size:24,className:"group-hover:translate-x-1 transition-all text-[#1E1E1E]"})]})]})})}const l7="/assets/home-car-Bz9tbx5y.png";function u7(){return $.jsxs("div",{className:" w-full  relative p-10",children:[$.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundImage:`
            linear-gradient(to right, #FFFFFF 1px, transparent 1px),
            linear-gradient(to bottom, #FFFFFF 1px, transparent 1px),
            radial-gradient(circle 800px at 50% 100%, #bbe5c8, transparent)
          `,backgroundSize:"96px 64px, 96px 64px, 100% 100%"}}),$.jsxs("div",{className:"relative z-0 w-full max-w-[750px] mx-auto text-center",children:[$.jsx("div",{className:"inline-flex items-center gap-5 px-5 py-2 rounded-full bg-[#1CA9A6]/12 mb-5",children:$.jsx("span",{className:"text-[#1CA9A6] text-sm font-medium",children:"Advanced EV Calculation Tool"})}),$.jsx("h1",{className:"text-primary text-5xl font-semibold leading-[120%]",children:"Calculate route plans for using electric vehicles"}),$.jsx("p",{className:"text-secondary-black text-lg leading-[150%] mt-6",children:"Plan your electric vehicle journey with precision. Calculate battery consumption, optimize routes, and find charging stations along the way."}),$.jsx(wy,{className:"mt-6",to:"/vechile",children:"Start New Calculation"})]}),$.jsx("div",{className:"relative z-10 w-full flex items-center justify-center",children:$.jsx("img",{src:l7,alt:"",className:"w-auto max-w-[1200px] object-contain"})})]})}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),rI=e=>{const t=h7(e);return t.charAt(0).toUpperCase()+t.slice(1)},eN=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),d7=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:u="",children:h,iconNode:d,...o},_)=>A.createElement("svg",{ref:_,...f7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:eN("lucide",u),...!h&&!d7(o)&&{"aria-hidden":"true"},...o},[...d.map(([P,S])=>A.createElement(P,S)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=(e,t)=>{const r=A.forwardRef(({className:n,...u},h)=>A.createElement(p7,{ref:h,iconNode:t,className:eN(`lucide-${c7(rI(e))}`,`lucide-${e}`,n),...u}));return r.displayName=rI(e),r};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["path",{d:"M14.856 6H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.935",key:"lre1cr"}],["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M5.14 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2.936",key:"13q5k0"}]],tN=da("battery-charging",m7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M10 10v4",key:"1mb2ec"}],["path",{d:"M14 10v4",key:"1nt88p"}],["path",{d:"M22 14v-4",key:"14q9d5"}],["path",{d:"M6 10v4",key:"1n77qd"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],y7=da("battery-full",g7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],_7=da("battery",v7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],b7=da("calendar",x7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],rN=da("car",w7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P7=da("circle-check-big",S7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ab=da("clock",E7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],T7=da("download",C7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k7=da("eye",M7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],nN=da("gauge",A7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O7=da("loader-circle",I7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],iN=da("map-pin",L7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],R7=da("move-right",D7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],z7=da("navigation",j7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],F7=da("pin",N7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V7=da("plus",B7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],aN=da("route",$7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],q7=da("search",U7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],W7=da("send",G7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],oN=da("trending-up",H7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],K7=da("wrench",Z7);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Y7=da("x",X7);function Q7(e){return Tw({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M271.653 1023.192c-8.685 0-17.573-3.432-24.238-10.097-13.33-13.33-13.33-35.144 0-48.474L703.67 508.163 254.08 58.573c-13.33-13.331-13.33-35.145 0-48.475 13.33-13.33 35.143-13.33 48.473 0L776.38 483.925c13.33 13.33 13.33 35.143 0 48.473l-480.492 480.694c-6.665 6.665-15.551 10.099-24.236 10.099z"},child:[]}]})(e)}function J7({onSuccess:e,onError:t}){const r=Mc();return ig({mutationKey:["createVehicle"],mutationFn:async n=>{const u=await r.post("/vehicles/",n);return u==null?void 0:u.data},onSuccess:e,onError:t})}var V_=e=>e.type==="checkbox",km=e=>e instanceof Date,Xs=e=>e==null;const sN=e=>typeof e=="object";var Ia=e=>!Xs(e)&&!Array.isArray(e)&&sN(e)&&!km(e),eH=e=>Ia(e)&&e.target?V_(e.target)?e.target.checked:e.target.value:e,tH=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rH=(e,t)=>e.has(tH(t)),nH=e=>{const t=e.constructor&&e.constructor.prototype;return Ia(t)&&t.hasOwnProperty("isPrototypeOf")},xC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function mo(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(xC&&(e instanceof Blob||n))&&(r||Ia(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!nH(e))t=e;else for(const u in e)e.hasOwnProperty(u)&&(t[u]=mo(e[u]));else return e;return t}var Mw=e=>/^\w*$/.test(e),va=e=>e===void 0,bC=e=>Array.isArray(e)?e.filter(Boolean):[],wC=e=>bC(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ar=(e,t,r)=>{if(!t||!Ia(e))return r;const n=(Mw(t)?[t]:wC(t)).reduce((u,h)=>Xs(u)?u:u[h],e);return va(n)||n===e?va(e[t])?r:e[t]:n},hh=e=>typeof e=="boolean",Fi=(e,t,r)=>{let n=-1;const u=Mw(t)?[t]:wC(t),h=u.length,d=h-1;for(;++n<h;){const o=u[n];let _=r;if(n!==d){const P=e[o];_=Ia(P)||Array.isArray(P)?P:isNaN(+u[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=_,e=e[o]}};const nI={BLUR:"blur",FOCUS_OUT:"focusout"},yc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},dd={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iH=Jn.createContext(null);iH.displayName="HookFormContext";var aH=(e,t,r,n=!0)=>{const u={defaultValues:t._defaultValues};for(const h in e)Object.defineProperty(u,h,{get:()=>{const d=h;return t._proxyFormState[d]!==yc.all&&(t._proxyFormState[d]=!n||yc.all),e[d]}});return u};const oH=typeof window<"u"?Jn.useLayoutEffect:Jn.useEffect;var Tl=e=>typeof e=="string",sH=(e,t,r,n,u)=>Tl(e)?(n&&t.watch.add(e),Ar(r,e,u)):Array.isArray(e)?e.map(h=>(n&&t.watch.add(h),Ar(r,h))):(n&&(t.watchAll=!0),r),G2=e=>Xs(e)||!sN(e);function np(e,t,r=new WeakSet){if(G2(e)||G2(t))return Object.is(e,t);if(km(e)&&km(t))return e.getTime()===t.getTime();const n=Object.keys(e),u=Object.keys(t);if(n.length!==u.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const h of n){const d=e[h];if(!u.includes(h))return!1;if(h!=="ref"){const o=t[h];if(km(d)&&km(o)||Ia(d)&&Ia(o)||Array.isArray(d)&&Array.isArray(o)?!np(d,o,r):!Object.is(d,o))return!1}}return!0}var lH=(e,t,r,n,u)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:u||!0}}:{},e_=e=>Array.isArray(e)?e:[e],iI=()=>{let e=[];return{get observers(){return e},next:u=>{for(const h of e)h.next&&h.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(h=>h!==u)}}),unsubscribe:()=>{e=[]}}};function lN(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const u=e[n],h=t[n];if(u&&Ia(u)&&h){const d=lN(u,h);Ia(d)&&(r[n]=d)}else e[n]&&(r[n]=h)}return r}var vs=e=>Ia(e)&&!Object.keys(e).length,SC=e=>e.type==="file",vc=e=>typeof e=="function",ob=e=>{if(!xC)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},uN=e=>e.type==="select-multiple",PC=e=>e.type==="radio",uH=e=>PC(e)||V_(e),PS=e=>ob(e)&&e.isConnected;function cH(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=va(e)?n++:e[t[n++]];return e}function hH(e){for(const t in e)if(e.hasOwnProperty(t)&&!va(e[t]))return!1;return!0}function ka(e,t){const r=Array.isArray(t)?t:Mw(t)?[t]:wC(t),n=r.length===1?e:cH(e,r),u=r.length-1,h=r[u];return n&&delete n[h],u!==0&&(Ia(n)&&vs(n)||Array.isArray(n)&&hH(n))&&ka(e,r.slice(0,-1)),e}var dH=e=>{for(const t in e)if(vc(e[t]))return!0;return!1};function cN(e){return Array.isArray(e)||Ia(e)&&!dH(e)}function W2(e,t={}){for(const r in e){const n=e[r];cN(n)?(t[r]=Array.isArray(n)?[]:{},W2(n,t[r])):va(n)||(t[r]=!0)}return t}function ey(e,t,r){r||(r=W2(t));for(const n in e){const u=e[n];if(cN(u))va(t)||G2(r[n])?r[n]=W2(u,Array.isArray(u)?[]:{}):ey(u,Xs(t)?{}:t[n],r[n]);else{const h=t[n];r[n]=!np(u,h)}}return r}const aI={value:!1,isValid:!1},oI={value:!0,isValid:!0};var hN=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!va(e[0].attributes.value)?va(e[0].value)||e[0].value===""?oI:{value:e[0].value,isValid:!0}:oI:aI}return aI},dN=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>va(e)?e:t?e===""?NaN:e&&+e:r&&Tl(e)?new Date(e):n?n(e):e;const sI={isValid:!1,value:null};var fN=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,sI):sI;function lI(e){const t=e.ref;return SC(t)?t.files:PC(t)?fN(e.refs).value:uN(t)?[...t.selectedOptions].map(({value:r})=>r):V_(t)?hN(e.refs).value:dN(va(t.value)?e.ref.value:t.value,e)}var fH=(e,t,r,n)=>{const u={};for(const h of e){const d=Ar(t,h);d&&Fi(u,h,d._f)}return{criteriaMode:r,names:[...e],fields:u,shouldUseNativeValidation:n}},sb=e=>e instanceof RegExp,jv=e=>va(e)?e:sb(e)?e.source:Ia(e)?sb(e.value)?e.value.source:e.value:e,uI=e=>({isOnSubmit:!e||e===yc.onSubmit,isOnBlur:e===yc.onBlur,isOnChange:e===yc.onChange,isOnAll:e===yc.all,isOnTouch:e===yc.onTouched});const cI="AsyncFunction";var pH=e=>!!e&&!!e.validate&&!!(vc(e.validate)&&e.validate.constructor.name===cI||Ia(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===cI)),mH=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),hI=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const t_=(e,t,r,n)=>{for(const u of r||Object.keys(e)){const h=Ar(e,u);if(h){const{_f:d,...o}=h;if(d){if(d.refs&&d.refs[0]&&t(d.refs[0],u)&&!n)return!0;if(d.ref&&t(d.ref,d.name)&&!n)return!0;if(t_(o,t))break}else if(Ia(o)&&t_(o,t))break}}};function dI(e,t,r){const n=Ar(e,r);if(n||Mw(r))return{error:n,name:r};const u=r.split(".");for(;u.length;){const h=u.join("."),d=Ar(t,h),o=Ar(e,h);if(d&&!Array.isArray(d)&&r!==h)return{name:r};if(o&&o.type)return{name:h,error:o};if(o&&o.root&&o.root.type)return{name:`${h}.root`,error:o.root};u.pop()}return{name:r}}var gH=(e,t,r,n)=>{r(e);const{name:u,...h}=e;return vs(h)||Object.keys(h).length>=Object.keys(t).length||Object.keys(h).find(d=>t[d]===(!n||yc.all))},yH=(e,t,r)=>!e||!t||e===t||e_(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),vH=(e,t,r,n,u)=>u.isOnAll?!1:!r&&u.isOnTouch?!(t||e):(r?n.isOnBlur:u.isOnBlur)?!e:(r?n.isOnChange:u.isOnChange)?e:!0,_H=(e,t)=>!bC(Ar(e,t)).length&&ka(e,t),xH=(e,t,r)=>{const n=e_(Ar(e,r));return Fi(n,"root",t[r]),Fi(e,r,n),e};function fI(e,t,r="validate"){if(Tl(e)||Array.isArray(e)&&e.every(Tl)||hh(e)&&!e)return{type:r,message:Tl(e)?e:"",ref:t}}var Hg=e=>Ia(e)&&!sb(e)?e:{value:e,message:""},pI=async(e,t,r,n,u,h)=>{const{ref:d,refs:o,required:_,maxLength:P,minLength:S,min:M,max:O,pattern:z,validate:F,name:B,valueAsNumber:D,mount:H}=e._f,Q=Ar(r,B);if(!H||t.has(B))return{};const te=o?o[0]:d,ie=Ne=>{u&&te.reportValidity&&(te.setCustomValidity(hh(Ne)?"":Ne||""),te.reportValidity())},ae={},he=PC(d),re=V_(d),be=he||re,xe=(D||SC(d))&&va(d.value)&&va(Q)||ob(d)&&d.value===""||Q===""||Array.isArray(Q)&&!Q.length,$e=lH.bind(null,B,n,ae),Ee=(Ne,Xe,ut,pt=dd.maxLength,gt=dd.minLength)=>{const wt=Ne?Xe:ut;ae[B]={type:Ne?pt:gt,message:wt,ref:d,...$e(Ne?pt:gt,wt)}};if(h?!Array.isArray(Q)||!Q.length:_&&(!be&&(xe||Xs(Q))||hh(Q)&&!Q||re&&!hN(o).isValid||he&&!fN(o).isValid)){const{value:Ne,message:Xe}=Tl(_)?{value:!!_,message:_}:Hg(_);if(Ne&&(ae[B]={type:dd.required,message:Xe,ref:te,...$e(dd.required,Xe)},!n))return ie(Xe),ae}if(!xe&&(!Xs(M)||!Xs(O))){let Ne,Xe;const ut=Hg(O),pt=Hg(M);if(!Xs(Q)&&!isNaN(Q)){const gt=d.valueAsNumber||Q&&+Q;Xs(ut.value)||(Ne=gt>ut.value),Xs(pt.value)||(Xe=gt<pt.value)}else{const gt=d.valueAsDate||new Date(Q),wt=yt=>new Date(new Date().toDateString()+" "+yt),je=d.type=="time",Qe=d.type=="week";Tl(ut.value)&&Q&&(Ne=je?wt(Q)>wt(ut.value):Qe?Q>ut.value:gt>new Date(ut.value)),Tl(pt.value)&&Q&&(Xe=je?wt(Q)<wt(pt.value):Qe?Q<pt.value:gt<new Date(pt.value))}if((Ne||Xe)&&(Ee(!!Ne,ut.message,pt.message,dd.max,dd.min),!n))return ie(ae[B].message),ae}if((P||S)&&!xe&&(Tl(Q)||h&&Array.isArray(Q))){const Ne=Hg(P),Xe=Hg(S),ut=!Xs(Ne.value)&&Q.length>+Ne.value,pt=!Xs(Xe.value)&&Q.length<+Xe.value;if((ut||pt)&&(Ee(ut,Ne.message,Xe.message),!n))return ie(ae[B].message),ae}if(z&&!xe&&Tl(Q)){const{value:Ne,message:Xe}=Hg(z);if(sb(Ne)&&!Q.match(Ne)&&(ae[B]={type:dd.pattern,message:Xe,ref:d,...$e(dd.pattern,Xe)},!n))return ie(Xe),ae}if(F){if(vc(F)){const Ne=await F(Q,r),Xe=fI(Ne,te);if(Xe&&(ae[B]={...Xe,...$e(dd.validate,Xe.message)},!n))return ie(Xe.message),ae}else if(Ia(F)){let Ne={};for(const Xe in F){if(!vs(Ne)&&!n)break;const ut=fI(await F[Xe](Q,r),te,Xe);ut&&(Ne={...ut,...$e(Xe,ut.message)},ie(ut.message),n&&(ae[B]=Ne))}if(!vs(Ne)&&(ae[B]={ref:te,...Ne},!n))return ae}}return ie(!0),ae};const bH={mode:yc.onSubmit,reValidateMode:yc.onChange,shouldFocusError:!0};function wH(e={}){let t={...bH,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},u=Ia(t.defaultValues)||Ia(t.values)?mo(t.defaultValues||t.values)||{}:{},h=t.shouldUnregister?{}:mo(u),d={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},_,P=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let M={...S};const O={array:iI(),state:iI()},z=t.criteriaMode===yc.all,F=Be=>rt=>{clearTimeout(P),P=setTimeout(Be,rt)},B=async Be=>{if(!t.disabled&&(S.isValid||M.isValid||Be)){const rt=t.resolver?vs((await re()).errors):await xe(n,!0);rt!==r.isValid&&O.state.next({isValid:rt})}},D=(Be,rt)=>{!t.disabled&&(S.isValidating||S.validatingFields||M.isValidating||M.validatingFields)&&((Be||Array.from(o.mount)).forEach(bt=>{bt&&(rt?Fi(r.validatingFields,bt,rt):ka(r.validatingFields,bt))}),O.state.next({validatingFields:r.validatingFields,isValidating:!vs(r.validatingFields)}))},H=(Be,rt=[],bt,rr,Wt=!0,zt=!0)=>{if(rr&&bt&&!t.disabled){if(d.action=!0,zt&&Array.isArray(Ar(n,Be))){const ze=bt(Ar(n,Be),rr.argA,rr.argB);Wt&&Fi(n,Be,ze)}if(zt&&Array.isArray(Ar(r.errors,Be))){const ze=bt(Ar(r.errors,Be),rr.argA,rr.argB);Wt&&Fi(r.errors,Be,ze),_H(r.errors,Be)}if((S.touchedFields||M.touchedFields)&&zt&&Array.isArray(Ar(r.touchedFields,Be))){const ze=bt(Ar(r.touchedFields,Be),rr.argA,rr.argB);Wt&&Fi(r.touchedFields,Be,ze)}(S.dirtyFields||M.dirtyFields)&&(r.dirtyFields=ey(u,h)),O.state.next({name:Be,isDirty:Ee(Be,rt),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fi(h,Be,rt)},Q=(Be,rt)=>{Fi(r.errors,Be,rt),O.state.next({errors:r.errors})},te=Be=>{r.errors=Be,O.state.next({errors:r.errors,isValid:!1})},ie=(Be,rt,bt,rr)=>{const Wt=Ar(n,Be);if(Wt){const zt=Ar(h,Be,va(bt)?Ar(u,Be):bt);va(zt)||rr&&rr.defaultChecked||rt?Fi(h,Be,rt?zt:lI(Wt._f)):ut(Be,zt),d.mount&&!d.action&&B()}},ae=(Be,rt,bt,rr,Wt)=>{let zt=!1,ze=!1;const ue={name:Be};if(!t.disabled){if(!bt||rr){(S.isDirty||M.isDirty)&&(ze=r.isDirty,r.isDirty=ue.isDirty=Ee(),zt=ze!==ue.isDirty);const le=np(Ar(u,Be),rt);ze=!!Ar(r.dirtyFields,Be),le?ka(r.dirtyFields,Be):Fi(r.dirtyFields,Be,!0),ue.dirtyFields=r.dirtyFields,zt=zt||(S.dirtyFields||M.dirtyFields)&&ze!==!le}if(bt){const le=Ar(r.touchedFields,Be);le||(Fi(r.touchedFields,Be,bt),ue.touchedFields=r.touchedFields,zt=zt||(S.touchedFields||M.touchedFields)&&le!==bt)}zt&&Wt&&O.state.next(ue)}return zt?ue:{}},he=(Be,rt,bt,rr)=>{const Wt=Ar(r.errors,Be),zt=(S.isValid||M.isValid)&&hh(rt)&&r.isValid!==rt;if(t.delayError&&bt?(_=F(()=>Q(Be,bt)),_(t.delayError)):(clearTimeout(P),_=null,bt?Fi(r.errors,Be,bt):ka(r.errors,Be)),(bt?!np(Wt,bt):Wt)||!vs(rr)||zt){const ze={...rr,...zt&&hh(rt)?{isValid:rt}:{},errors:r.errors,name:Be};r={...r,...ze},O.state.next(ze)}},re=async Be=>{D(Be,!0);const rt=await t.resolver(h,t.context,fH(Be||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return D(Be),rt},be=async Be=>{const{errors:rt}=await re(Be);if(Be)for(const bt of Be){const rr=Ar(rt,bt);rr?Fi(r.errors,bt,rr):ka(r.errors,bt)}else r.errors=rt;return rt},xe=async(Be,rt,bt={valid:!0})=>{for(const rr in Be){const Wt=Be[rr];if(Wt){const{_f:zt,...ze}=Wt;if(zt){const ue=o.array.has(zt.name),le=Wt._f&&pH(Wt._f);le&&S.validatingFields&&D([zt.name],!0);const pe=await pI(Wt,o.disabled,h,z,t.shouldUseNativeValidation&&!rt,ue);if(le&&S.validatingFields&&D([zt.name]),pe[zt.name]&&(bt.valid=!1,rt))break;!rt&&(Ar(pe,zt.name)?ue?xH(r.errors,pe,zt.name):Fi(r.errors,zt.name,pe[zt.name]):ka(r.errors,zt.name))}!vs(ze)&&await xe(ze,rt,bt)}}return bt.valid},$e=()=>{for(const Be of o.unMount){const rt=Ar(n,Be);rt&&(rt._f.refs?rt._f.refs.every(bt=>!PS(bt)):!PS(rt._f.ref))&&Ft(Be)}o.unMount=new Set},Ee=(Be,rt)=>!t.disabled&&(Be&&rt&&Fi(h,Be,rt),!np(yt(),u)),Ne=(Be,rt,bt)=>sH(Be,o,{...d.mount?h:va(rt)?u:Tl(Be)?{[Be]:rt}:rt},bt,rt),Xe=Be=>bC(Ar(d.mount?h:u,Be,t.shouldUnregister?Ar(u,Be,[]):[])),ut=(Be,rt,bt={})=>{const rr=Ar(n,Be);let Wt=rt;if(rr){const zt=rr._f;zt&&(!zt.disabled&&Fi(h,Be,dN(rt,zt)),Wt=ob(zt.ref)&&Xs(rt)?"":rt,uN(zt.ref)?[...zt.ref.options].forEach(ze=>ze.selected=Wt.includes(ze.value)):zt.refs?V_(zt.ref)?zt.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Wt)?ze.checked=!!Wt.find(ue=>ue===ze.value):ze.checked=Wt===ze.value||!!Wt)}):zt.refs.forEach(ze=>ze.checked=ze.value===Wt):SC(zt.ref)?zt.ref.value="":(zt.ref.value=Wt,zt.ref.type||O.state.next({name:Be,values:mo(h)})))}(bt.shouldDirty||bt.shouldTouch)&&ae(Be,Wt,bt.shouldTouch,bt.shouldDirty,!0),bt.shouldValidate&&Qe(Be)},pt=(Be,rt,bt)=>{for(const rr in rt){if(!rt.hasOwnProperty(rr))return;const Wt=rt[rr],zt=Be+"."+rr,ze=Ar(n,zt);(o.array.has(Be)||Ia(Wt)||ze&&!ze._f)&&!km(Wt)?pt(zt,Wt,bt):ut(zt,Wt,bt)}},gt=(Be,rt,bt={})=>{const rr=Ar(n,Be),Wt=o.array.has(Be),zt=mo(rt);Fi(h,Be,zt),Wt?(O.array.next({name:Be,values:mo(h)}),(S.isDirty||S.dirtyFields||M.isDirty||M.dirtyFields)&&bt.shouldDirty&&O.state.next({name:Be,dirtyFields:ey(u,h),isDirty:Ee(Be,zt)})):rr&&!rr._f&&!Xs(zt)?pt(Be,zt,bt):ut(Be,zt,bt),hI(Be,o)&&O.state.next({...r,name:Be}),O.state.next({name:d.mount?Be:void 0,values:mo(h)})},wt=async Be=>{d.mount=!0;const rt=Be.target;let bt=rt.name,rr=!0;const Wt=Ar(n,bt),zt=le=>{rr=Number.isNaN(le)||km(le)&&isNaN(le.getTime())||np(le,Ar(h,bt,le))},ze=uI(t.mode),ue=uI(t.reValidateMode);if(Wt){let le,pe;const Me=rt.type?lI(Wt._f):eH(Be),Ae=Be.type===nI.BLUR||Be.type===nI.FOCUS_OUT,Je=!mH(Wt._f)&&!t.resolver&&!Ar(r.errors,bt)&&!Wt._f.deps||vH(Ae,Ar(r.touchedFields,bt),r.isSubmitted,ue,ze),Ze=hI(bt,o,Ae);Fi(h,bt,Me),Ae?(!rt||!rt.readOnly)&&(Wt._f.onBlur&&Wt._f.onBlur(Be),_&&_(0)):Wt._f.onChange&&Wt._f.onChange(Be);const Ve=ae(bt,Me,Ae),it=!vs(Ve)||Ze;if(!Ae&&O.state.next({name:bt,type:Be.type,values:mo(h)}),Je)return(S.isValid||M.isValid)&&(t.mode==="onBlur"?Ae&&B():Ae||B()),it&&O.state.next({name:bt,...Ze?{}:Ve});if(!Ae&&Ze&&O.state.next({...r}),t.resolver){const{errors:At}=await re([bt]);if(zt(Me),rr){const Pt=dI(r.errors,n,bt),Xt=dI(At,n,Pt.name||bt);le=Xt.error,bt=Xt.name,pe=vs(At)}}else D([bt],!0),le=(await pI(Wt,o.disabled,h,z,t.shouldUseNativeValidation))[bt],D([bt]),zt(Me),rr&&(le?pe=!1:(S.isValid||M.isValid)&&(pe=await xe(n,!0)));rr&&(Wt._f.deps&&(!Array.isArray(Wt._f.deps)||Wt._f.deps.length>0)&&Qe(Wt._f.deps),he(bt,pe,le,Ve))}},je=(Be,rt)=>{if(Ar(r.errors,rt)&&Be.focus)return Be.focus(),1},Qe=async(Be,rt={})=>{let bt,rr;const Wt=e_(Be);if(t.resolver){const zt=await be(va(Be)?Be:Wt);bt=vs(zt),rr=Be?!Wt.some(ze=>Ar(zt,ze)):bt}else Be?(rr=(await Promise.all(Wt.map(async zt=>{const ze=Ar(n,zt);return await xe(ze&&ze._f?{[zt]:ze}:ze)}))).every(Boolean),!(!rr&&!r.isValid)&&B()):rr=bt=await xe(n);return O.state.next({...!Tl(Be)||(S.isValid||M.isValid)&&bt!==r.isValid?{}:{name:Be},...t.resolver||!Be?{isValid:bt}:{},errors:r.errors}),rt.shouldFocus&&!rr&&t_(n,je,Be?Wt:o.mount),rr},yt=(Be,rt)=>{let bt={...d.mount?h:u};return rt&&(bt=lN(rt.dirtyFields?r.dirtyFields:r.touchedFields,bt)),va(Be)?bt:Tl(Be)?Ar(bt,Be):Be.map(rr=>Ar(bt,rr))},Oe=(Be,rt)=>({invalid:!!Ar((rt||r).errors,Be),isDirty:!!Ar((rt||r).dirtyFields,Be),error:Ar((rt||r).errors,Be),isValidating:!!Ar(r.validatingFields,Be),isTouched:!!Ar((rt||r).touchedFields,Be)}),et=Be=>{Be&&e_(Be).forEach(rt=>ka(r.errors,rt)),O.state.next({errors:Be?r.errors:{}})},Mt=(Be,rt,bt)=>{const rr=(Ar(n,Be,{_f:{}})._f||{}).ref,Wt=Ar(r.errors,Be)||{},{ref:zt,message:ze,type:ue,...le}=Wt;Fi(r.errors,Be,{...le,...rt,ref:rr}),O.state.next({name:Be,errors:r.errors,isValid:!1}),bt&&bt.shouldFocus&&rr&&rr.focus&&rr.focus()},Dt=(Be,rt)=>vc(Be)?O.state.subscribe({next:bt=>"values"in bt&&Be(Ne(void 0,rt),bt)}):Ne(Be,rt,!0),Ke=Be=>O.state.subscribe({next:rt=>{yH(Be.name,rt.name,Be.exact)&&gH(rt,Be.formState||S,Wr,Be.reRenderRoot)&&Be.callback({values:{...h},...r,...rt,defaultValues:u})}}).unsubscribe,tr=Be=>(d.mount=!0,M={...M,...Be.formState},Ke({...Be,formState:M})),Ft=(Be,rt={})=>{for(const bt of Be?e_(Be):o.mount)o.mount.delete(bt),o.array.delete(bt),rt.keepValue||(ka(n,bt),ka(h,bt)),!rt.keepError&&ka(r.errors,bt),!rt.keepDirty&&ka(r.dirtyFields,bt),!rt.keepTouched&&ka(r.touchedFields,bt),!rt.keepIsValidating&&ka(r.validatingFields,bt),!t.shouldUnregister&&!rt.keepDefaultValue&&ka(u,bt);O.state.next({values:mo(h)}),O.state.next({...r,...rt.keepDirty?{isDirty:Ee()}:{}}),!rt.keepIsValid&&B()},$t=({disabled:Be,name:rt})=>{(hh(Be)&&d.mount||Be||o.disabled.has(rt))&&(Be?o.disabled.add(rt):o.disabled.delete(rt))},ct=(Be,rt={})=>{let bt=Ar(n,Be);const rr=hh(rt.disabled)||hh(t.disabled);return Fi(n,Be,{...bt||{},_f:{...bt&&bt._f?bt._f:{ref:{name:Be}},name:Be,mount:!0,...rt}}),o.mount.add(Be),bt?$t({disabled:hh(rt.disabled)?rt.disabled:t.disabled,name:Be}):ie(Be,!0,rt.value),{...rr?{disabled:rt.disabled||t.disabled}:{},...t.progressive?{required:!!rt.required,min:jv(rt.min),max:jv(rt.max),minLength:jv(rt.minLength),maxLength:jv(rt.maxLength),pattern:jv(rt.pattern)}:{},name:Be,onChange:wt,onBlur:wt,ref:Wt=>{if(Wt){ct(Be,rt),bt=Ar(n,Be);const zt=va(Wt.value)&&Wt.querySelectorAll&&Wt.querySelectorAll("input,select,textarea")[0]||Wt,ze=uH(zt),ue=bt._f.refs||[];if(ze?ue.find(le=>le===zt):zt===bt._f.ref)return;Fi(n,Be,{_f:{...bt._f,...ze?{refs:[...ue.filter(PS),zt,...Array.isArray(Ar(u,Be))?[{}]:[]],ref:{type:zt.type,name:Be}}:{ref:zt}}}),ie(Be,!1,void 0,zt)}else bt=Ar(n,Be,{}),bt._f&&(bt._f.mount=!1),(t.shouldUnregister||rt.shouldUnregister)&&!(rH(o.array,Be)&&d.action)&&o.unMount.add(Be)}}},Lt=()=>t.shouldFocusError&&t_(n,je,o.mount),ir=Be=>{hh(Be)&&(O.state.next({disabled:Be}),t_(n,(rt,bt)=>{const rr=Ar(n,bt);rr&&(rt.disabled=rr._f.disabled||Be,Array.isArray(rr._f.refs)&&rr._f.refs.forEach(Wt=>{Wt.disabled=rr._f.disabled||Be}))},0,!1))},St=(Be,rt)=>async bt=>{let rr;bt&&(bt.preventDefault&&bt.preventDefault(),bt.persist&&bt.persist());let Wt=mo(h);if(O.state.next({isSubmitting:!0}),t.resolver){const{errors:zt,values:ze}=await re();r.errors=zt,Wt=mo(ze)}else await xe(n);if(o.disabled.size)for(const zt of o.disabled)ka(Wt,zt);if(ka(r.errors,"root"),vs(r.errors)){O.state.next({errors:{}});try{await Be(Wt,bt)}catch(zt){rr=zt}}else rt&&await rt({...r.errors},bt),Lt(),setTimeout(Lt);if(O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:vs(r.errors)&&!rr,submitCount:r.submitCount+1,errors:r.errors}),rr)throw rr},Gr=(Be,rt={})=>{Ar(n,Be)&&(va(rt.defaultValue)?gt(Be,mo(Ar(u,Be))):(gt(Be,rt.defaultValue),Fi(u,Be,mo(rt.defaultValue))),rt.keepTouched||ka(r.touchedFields,Be),rt.keepDirty||(ka(r.dirtyFields,Be),r.isDirty=rt.defaultValue?Ee(Be,mo(Ar(u,Be))):Ee()),rt.keepError||(ka(r.errors,Be),S.isValid&&B()),O.state.next({...r}))},Tr=(Be,rt={})=>{const bt=Be?mo(Be):u,rr=mo(bt),Wt=vs(Be),zt=Wt?u:rr;if(rt.keepDefaultValues||(u=bt),!rt.keepValues){if(rt.keepDirtyValues){const ze=new Set([...o.mount,...Object.keys(ey(u,h))]);for(const ue of Array.from(ze))Ar(r.dirtyFields,ue)?Fi(zt,ue,Ar(h,ue)):gt(ue,Ar(zt,ue))}else{if(xC&&va(Be))for(const ze of o.mount){const ue=Ar(n,ze);if(ue&&ue._f){const le=Array.isArray(ue._f.refs)?ue._f.refs[0]:ue._f.ref;if(ob(le)){const pe=le.closest("form");if(pe){pe.reset();break}}}}if(rt.keepFieldsRef)for(const ze of o.mount)gt(ze,Ar(zt,ze));else n={}}h=t.shouldUnregister?rt.keepDefaultValues?mo(u):{}:mo(zt),O.array.next({values:{...zt}}),O.state.next({values:{...zt}})}o={mount:rt.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!S.isValid||!!rt.keepIsValid||!!rt.keepDirtyValues||!t.shouldUnregister&&!vs(zt),d.watch=!!t.shouldUnregister,d.action=!1,rt.keepErrors||(r.errors={}),O.state.next({submitCount:rt.keepSubmitCount?r.submitCount:0,isDirty:Wt?!1:rt.keepDirty?r.isDirty:!!(rt.keepDefaultValues&&!np(Be,u)),isSubmitted:rt.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Wt?{}:rt.keepDirtyValues?rt.keepDefaultValues&&h?ey(u,h):r.dirtyFields:rt.keepDefaultValues&&Be?ey(u,Be):rt.keepDirty?r.dirtyFields:{},touchedFields:rt.keepTouched?r.touchedFields:{},errors:rt.keepErrors?r.errors:{},isSubmitSuccessful:rt.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:u})},wr=(Be,rt)=>Tr(vc(Be)?Be(h):Be,rt),tn=(Be,rt={})=>{const bt=Ar(n,Be),rr=bt&&bt._f;if(rr){const Wt=rr.refs?rr.refs[0]:rr.ref;Wt.focus&&(Wt.focus(),rt.shouldSelect&&vc(Wt.select)&&Wt.select())}},Wr=Be=>{r={...r,...Be}},Ii={control:{register:ct,unregister:Ft,getFieldState:Oe,handleSubmit:St,setError:Mt,_subscribe:Ke,_runSchema:re,_focusError:Lt,_getWatch:Ne,_getDirty:Ee,_setValid:B,_setFieldArray:H,_setDisabledField:$t,_setErrors:te,_getFieldArray:Xe,_reset:Tr,_resetDefaultValues:()=>vc(t.defaultValues)&&t.defaultValues().then(Be=>{wr(Be,t.resetOptions),O.state.next({isLoading:!1})}),_removeUnmounted:$e,_disableForm:ir,_subjects:O,_proxyFormState:S,get _fields(){return n},get _formValues(){return h},get _state(){return d},set _state(Be){d=Be},get _defaultValues(){return u},get _names(){return o},set _names(Be){o=Be},get _formState(){return r},get _options(){return t},set _options(Be){t={...t,...Be}}},subscribe:tr,trigger:Qe,register:ct,handleSubmit:St,watch:Dt,setValue:gt,getValues:yt,reset:wr,resetField:Gr,clearErrors:et,unregister:Ft,setError:Mt,setFocus:tn,getFieldState:Oe};return{...Ii,formControl:Ii}}function $_(e={}){const t=Jn.useRef(void 0),r=Jn.useRef(void 0),[n,u]=Jn.useState({isDirty:!1,isValidating:!1,isLoading:vc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!vc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...o}=wH(e);t.current={...o,formState:n}}const h=t.current.control;return h._options=e,oH(()=>{const d=h._subscribe({formState:h._proxyFormState,callback:()=>u({...h._formState}),reRenderRoot:!0});return u(o=>({...o,isReady:!0})),h._formState.isReady=!0,d},[h]),Jn.useEffect(()=>h._disableForm(e.disabled),[h,e.disabled]),Jn.useEffect(()=>{e.mode&&(h._options.mode=e.mode),e.reValidateMode&&(h._options.reValidateMode=e.reValidateMode)},[h,e.mode,e.reValidateMode]),Jn.useEffect(()=>{e.errors&&(h._setErrors(e.errors),h._focusError())},[h,e.errors]),Jn.useEffect(()=>{e.shouldUnregister&&h._subjects.state.next({values:h._getWatch()})},[h,e.shouldUnregister]),Jn.useEffect(()=>{if(h._proxyFormState.isDirty){const d=h._getDirty();d!==n.isDirty&&h._subjects.state.next({isDirty:d})}},[h,n.isDirty]),Jn.useEffect(()=>{var d;e.values&&!np(e.values,r.current)?(h._reset(e.values,{keepFieldsRef:!0,...h._options.resetOptions}),!((d=h._options.resetOptions)===null||d===void 0)&&d.keepIsValid||h._setValid(),r.current=e.values,u(o=>({...o}))):h._resetDefaultValues()},[h,e.values]),Jn.useEffect(()=>{h._state.mount||(h._setValid(),h._state.mount=!0),h._state.watch&&(h._state.watch=!1,h._subjects.state.next({...h._formState})),h._removeUnmounted()}),t.current.formState=aH(n,h),t.current}function SH({onClose:e}){const t=cw(),{register:r,handleSubmit:n,watch:u,setError:h,clearErrors:d,formState:{errors:o}}=$_({defaultValues:{vehicleName:"",vehicleType:"",powerKW:"",weightKg:"",frontalArea:"",dragCoefficient:"",estimatedRange:"",regenerationEfficiency:"",nominalBatteryCapacity:"",usableBatteryCapacity:"",nominalVoltage:"",maxChargeCurrent:"",upperSOC:"",lowerSOC:"",vehiclePhoto:void 0}}),{mutate:_,isPending:P}=J7({onSuccess:D=>{pu.success((D==null?void 0:D.message)||"Vehicle created successfully!"),t.invalidateQueries(["vehicles"]),e()},onError:D=>{var Q;const H=(Q=D==null?void 0:D.response)==null?void 0:Q.data;if(d(),H&&typeof H=="object"){const te={name:"vehicleName",vehicle_type:"vehicleType",power_kw:"powerKW",weight_kg:"weightKg",frontal_area_m2:"frontalArea",drag_coefficient:"dragCoefficient",estimated_range_km:"estimatedRange",regeneration_efficiency:"regenerationEfficiency",nominal_battery_capacity_kwh:"nominalBatteryCapacity",usable_battery_capacity_kwh:"usableBatteryCapacity",nominal_voltage_v:"nominalVoltage",max_charge_discharge_current_a:"maxChargeCurrent",upper_soc_limit:"upperSOC",lower_soc_limit:"lowerSOC",photo:"vehiclePhoto"};Object.entries(H).forEach(([ie,ae])=>{const he=te[ie]||ie;let re="";Array.isArray(ae)?re=ae[0]:typeof ae=="string"&&(re=ae),re&&h(he,{type:"server",message:re})})}}}),S=D=>{var te;const H=((te=D.vehiclePhoto)==null?void 0:te[0])||null,Q=new FormData;Q.append("name",D.vehicleName),Q.append("vehicle_type",D.vehicleType),Q.append("power_kw",D.powerKW),Q.append("weight_kg",D.weightKg),Q.append("frontal_area_m2",D.frontalArea),Q.append("drag_coefficient",D.dragCoefficient),Q.append("estimated_range_km",D.estimatedRange),Q.append("regeneration_efficiency",D.regenerationEfficiency),Q.append("nominal_battery_capacity_kwh",D.nominalBatteryCapacity),Q.append("usable_battery_capacity_kwh",D.usableBatteryCapacity),Q.append("nominal_voltage_v",D.nominalVoltage),Q.append("max_charge_discharge_current_a",D.maxChargeCurrent),Q.append("upper_soc_limit",D.upperSOC),Q.append("lower_soc_limit",D.lowerSOC),H&&Q.append("photo",H),_(Q)},M=u("vehiclePhoto"),O=M&&M.length>0,z=O?M[0].name:"",F=O?URL.createObjectURL(M[0]):null;Jn.useEffect(()=>()=>{F&&URL.revokeObjectURL(F)},[F]);const B=[{value:"",label:"Select vehicle type"},{value:"car",label:"Car"},{value:"bike",label:"Bike"},{value:"bus",label:"Bus"},{value:"truck",label:"Truck"},{value:"other",label:"Other"}];return $.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[$.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>e(!1)}),$.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-h-[90vh] w-full max-w-4xl overflow-y-auto p-8 custom-scrollbar",children:[$.jsx("h2",{className:"text-2xl font-semibold",children:"Create New Vehicle"}),$.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Define physics parameters for a new vehicle profile."}),$.jsxs("form",{onSubmit:n(S),className:"mt-6 space-y-8",children:[$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Vehicle Parameters"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("input",{...r("vehicleName",{required:"Vehicle name is required"}),placeholder:"Vehicle Name",className:`border rounded-lg p-3 text-sm w-full ${o.vehicleName?"border-red-500":"border-gray-300"}`}),o.vehicleName&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehicleName.message})]}),$.jsxs("div",{children:[$.jsx("select",{...r("vehicleType",{required:"Vehicle type is required"}),className:`border rounded-lg p-3 text-sm w-full ${o.vehicleType?"border-red-500":"border-gray-300"}`,children:B.map(D=>$.jsx("option",{value:D.value,children:D.label},D.value))}),o.vehicleType&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehicleType.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("powerKW",{required:"Power is required"}),placeholder:"Power (KW)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.powerKW?"border-red-500":"border-gray-300"}`}),o.powerKW&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.powerKW.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("weightKg",{required:"Weight is required"}),placeholder:"Weight (kg)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.weightKg?"border-red-500":"border-gray-300"}`}),o.weightKg&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.weightKg.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("frontalArea",{required:"Frontal area is required"}),placeholder:"Frontal Area (m)",type:"number",step:"0.01",className:`border rounded-lg p-3 text-sm w-full ${o.frontalArea?"border-red-500":"border-gray-300"}`}),o.frontalArea&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.frontalArea.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("dragCoefficient",{required:"Drag coefficient is required"}),placeholder:"Aerodynamic Drag Coefficient",type:"number",step:"0.001",className:`border rounded-lg p-3 text-sm w-full ${o.dragCoefficient?"border-red-500":"border-gray-300"}`}),o.dragCoefficient&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.dragCoefficient.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("estimatedRange",{required:"Estimated range is required"}),placeholder:"Estimated Range (km)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.estimatedRange?"border-red-500":"border-gray-300"}`}),o.estimatedRange&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.estimatedRange.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("regenerationEfficiency",{required:"Regeneration efficiency is required"}),placeholder:"Regeneration Efficiency (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.regenerationEfficiency?"border-red-500":"border-gray-300"}`}),o.regenerationEfficiency&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.regenerationEfficiency.message})]})]})]}),$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Battery"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsxs("div",{children:[$.jsx("input",{...r("nominalBatteryCapacity",{required:"Nominal capacity is required"}),placeholder:"Nominal Battery Capacity (kWh)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.nominalBatteryCapacity?"border-red-500":"border-gray-300"}`}),o.nominalBatteryCapacity&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.nominalBatteryCapacity.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("usableBatteryCapacity",{required:"Usable capacity is required"}),placeholder:"Usable Battery Capacity (kWh)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.usableBatteryCapacity?"border-red-500":"border-gray-300"}`}),o.usableBatteryCapacity&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.usableBatteryCapacity.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("nominalVoltage",{required:"Nominal voltage is required"}),placeholder:"Nominal Voltage (V)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.nominalVoltage?"border-red-500":"border-gray-300"}`}),o.nominalVoltage&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.nominalVoltage.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("maxChargeCurrent",{required:"Max current is required"}),placeholder:"Max Charge/Discharge Current (A)",type:"number",className:`border rounded-lg p-3 text-sm w-full ${o.maxChargeCurrent?"border-red-500":"border-gray-300"}`}),o.maxChargeCurrent&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.maxChargeCurrent.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("upperSOC",{required:"Upper SOC is required"}),placeholder:"Upper SOC limit (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.upperSOC?"border-red-500":"border-gray-300"}`}),o.upperSOC&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.upperSOC.message})]}),$.jsxs("div",{children:[$.jsx("input",{...r("lowerSOC",{required:"Lower SOC is required"}),placeholder:"Lower SOC limit (%)",type:"number",step:"0.1",className:`border rounded-lg p-3 text-sm w-full ${o.lowerSOC?"border-red-500":"border-gray-300"}`}),o.lowerSOC&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.lowerSOC.message})]})]})]}),$.jsxs("div",{className:"w-full",children:[$.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Vehicle Photo Upload ",$.jsx("span",{className:"text-red-500",children:"*"})]}),$.jsxs("label",{htmlFor:"vehiclePhoto",className:`border border-dashed rounded-xl p-6 text-center w-full block cursor-pointer ${o.vehiclePhoto?"border-red-500":"border-gray-300"}`,children:[$.jsx("input",{type:"file",accept:"image/*",...r("vehiclePhoto",{required:"Vehicle photo is required",onChange:()=>d("vehiclePhoto")}),className:"hidden",id:"vehiclePhoto"}),$.jsx("span",{className:"cursor-pointer text-gray-600 text-sm",children:O?"Change Photo":"Click to upload photo"})]}),o.vehiclePhoto&&$.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.vehiclePhoto.message}),O&&$.jsxs("div",{className:"mt-4",children:[$.jsxs("p",{className:"text-sm text-green-600 mb-2",children:["Uploaded: ",z]}),$.jsx("div",{className:"flex justify-center",children:$.jsx("img",{src:F,alt:"Vehicle preview",className:"max-h-64 rounded-lg shadow-md object-contain"})})]})]}),$.jsxs("div",{className:"flex justify-end gap-3",children:[$.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-5 py-2 border rounded-lg text-gray-600 cursor-pointer",children:"Cancel"}),$.jsx("button",{type:"submit",disabled:P,className:`px-6 py-2 rounded-lg text-white ${P?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 cursor-pointer"}`,children:P?"Creating...":"Create Vehicle"})]})]})]}),P&&$.jsx(kd,{})]})}function PH({onSuccess:e,onError:t,vehicleId:r}){const n=Mc();return ig({mutationKey:["updateVehicle"],mutationFn:async u=>{const h=await n.put(`/vehicles/${r}/`,u);return h==null?void 0:h.data},enabled:!!r,onSuccess:e,onError:t})}function EH({onSuccess:e,onError:t,vehicleId:r}){const n=Mc();return ig({mutationKey:["updateDefaultVehicle"],mutationFn:async u=>{const h=await n.post(`/vehicles/${r}/customize/`,u);return h==null?void 0:h.data},enabled:!!r,onSuccess:e,onError:t})}function CH({onClose:e,vehicle:t}){const r=cw(),{register:n,handleSubmit:u,watch:h}=$_({defaultValues:{vehicleName:(t==null?void 0:t.name)||"",vehicleType:(t==null?void 0:t.vehicle_type)||"",powerKW:(t==null?void 0:t.power_kw)||0,weightKg:(t==null?void 0:t.weight_kg)||0,frontalArea:(t==null?void 0:t.frontal_area_m2)||0,dragCoefficient:(t==null?void 0:t.drag_coefficient)||0,estimatedRange:(t==null?void 0:t.estimated_range_km)||0,regenerationEfficiency:(t==null?void 0:t.regeneration_efficiency)||0,nominalBatteryCapacity:(t==null?void 0:t.nominal_battery_capacity_kwh)||0,usableBatteryCapacity:(t==null?void 0:t.usable_battery_capacity_kwh)||0,nominalVoltage:(t==null?void 0:t.nominal_voltage_v)||0,maxChargeCurrent:(t==null?void 0:t.max_charge_discharge_current_a)||0,upperSOC:(t==null?void 0:t.upper_soc_limit)||0,lowerSOC:(t==null?void 0:t.lower_soc_limit)||0,vehiclePhoto:(t==null?void 0:t.photo)||null}}),{mutate:d,isPending:o}=PH({vehicleId:t==null?void 0:t.id,onSuccess:H=>{pu.success((H==null?void 0:H.message)||"Vehicle updated successfully!"),r.invalidateQueries(["vehicles"]),e()},onError:H=>{var Q,te;pu.error(((te=(Q=H==null?void 0:H.response)==null?void 0:Q.data)==null?void 0:te.message)||"Something went wrong!"),console.log(H)}}),{mutate:_,isPending:P}=EH({vehicleId:t==null?void 0:t.id,onSuccess:H=>{pu.success((H==null?void 0:H.message)||"Vehicle updated successfully!"),r.invalidateQueries(["vehicles"]),e()},onError:H=>{var Q,te;pu.error(((te=(Q=H==null?void 0:H.response)==null?void 0:Q.data)==null?void 0:te.message)||"Something went wrong!"),console.log(H)}}),S=H=>{const Q={name:H==null?void 0:H.vehicleName,vehicle_type:H==null?void 0:H.vehicleType,power_kw:H==null?void 0:H.powerKW,weight_kg:H==null?void 0:H.weightKg,frontal_area_m2:H==null?void 0:H.frontalArea,drag_coefficient:H==null?void 0:H.dragCoefficient,estimated_range_km:H==null?void 0:H.estimatedRange,regeneration_efficiency:H==null?void 0:H.regenerationEfficiency,nominal_battery_capacity_kwh:H==null?void 0:H.nominalBatteryCapacity,usable_battery_capacity_kwh:H==null?void 0:H.usableBatteryCapacity,nominal_voltage_v:H==null?void 0:H.nominalVoltage,max_charge_discharge_current_a:H==null?void 0:H.maxChargeCurrent,upper_soc_limit:H==null?void 0:H.upperSOC,lower_soc_limit:H==null?void 0:H.lowerSOC};t!=null&&t.is_default?_(Q):d(Q)},M=h(),O=h("vehiclePhoto"),z=O&&O.length>0,F=Object.entries(M).some(([H,Q])=>H==="vehiclePhoto"?!1:Q&&Q!==""),B=z||F,D=[{value:"",label:"Select vehicle type"},{value:"car",label:"Car"},{value:"bike",label:"Bike"},{value:"bus",label:"Bus"},{value:"truck",label:"Truck"},{value:"other",label:"Other"}];return $.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[$.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),$.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-h-[90vh] w-full max-w-4xl overflow-y-auto p-8 custom-scrollbar",children:[$.jsx("h2",{className:"text-2xl font-semibold",children:"Edit Custom Vehicle"}),$.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Edit a custom configuration for your simulation."}),$.jsxs("form",{onSubmit:u(S),className:"mt-6 space-y-8",children:[$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Vehicle Parameters"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsx("input",{...n("vehicleName"),placeholder:"Vehicle Name",className:"border rounded-lg p-3 text-sm"}),$.jsx("div",{children:$.jsx("select",{...n("vehicleType",{required:"Vehicle type is required"}),className:"border rounded-lg p-3 text-sm w-full border-gray-300",children:D.map(H=>$.jsx("option",{value:H.value,children:H.label},H.value))})}),$.jsx("input",{...n("powerKW"),placeholder:"Power (KW)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("weightKg"),placeholder:"Weight (kg)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("frontalArea"),placeholder:"Frontal Area (m)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("dragCoefficient"),placeholder:"Aerodynamic Drag Coefficient",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("estimatedRange"),placeholder:"Estimated Range (km)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("regenerationEfficiency"),placeholder:"Regeneration Efficiency (%)",className:"border rounded-lg p-3 text-sm"})]})]}),$.jsxs("div",{className:"border rounded-xl p-6",children:[$.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Battery"}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[$.jsx("input",{...n("nominalBatteryCapacity"),placeholder:"Nominal Battery Capacity (kWh)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("usableBatteryCapacity"),placeholder:"Usable Battery Capacity (kWh)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("nominalVoltage"),placeholder:"Nominal Voltage (V)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("maxChargeCurrent"),placeholder:"Max Charge/Discharge Current (A)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("upperSOC"),placeholder:"Upper SOC limit (%)",className:"border rounded-lg p-3 text-sm"}),$.jsx("input",{...n("lowerSOC"),placeholder:"Lower SOC limit (%)",className:"border rounded-lg p-3 text-sm"})]})]}),$.jsxs("div",{className:"flex justify-end gap-3",children:[$.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-5 py-2 border rounded-lg text-gray-600 cursor-pointer",children:"Reset to Defaults"}),$.jsx("button",{type:"submit",disabled:!B,className:`px-6 py-2 rounded-lg text-white cursor-pointer ${B?"bg-emerald-600":"bg-gray-300 cursor-not-allowed"}`,children:"Save & Update"})]})]})]}),o&&$.jsx(kd,{}),P&&$.jsx(kd,{})]})}function TH(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["vehicles"],queryFn:async()=>(await e.get("/vehicles/")).data});return{vehicles:t,isAllVehiclesLoading:r,isAllVehiclesError:n}}function MH(){return $.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[$.jsx("div",{className:"bg-gray-200 p-8 animate-pulse",children:$.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-lg"})}),$.jsxs("div",{className:"p-5",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsx("div",{className:"h-7 bg-gray-300 rounded w-2/3"}),$.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/4"})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]}),$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]}),$.jsxs("div",{className:"w-1/2",children:[$.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),$.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2"})]})]}),$.jsxs("div",{className:"w-full border border-gray-200 py-2.5 rounded-lg flex items-center justify-center gap-2",children:[$.jsx("div",{className:"h-4 bg-gray-300 rounded w-4"}),$.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"})]})]})]})}function kH(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["constants"],queryFn:async()=>(await e.get("/system/constants/")).data});return{constants:t,isConstantsLoading:r,isConstantsError:n}}const lx=({label:e,value:t,type:r})=>$.jsxs("div",{children:[$.jsx("p",{className:"text-[#212B36] text-[16px] leading-6",children:e}),$.jsxs("p",{className:"text-[#637381] font-roboto text-[16px] leading-6 mt-1",children:[t," ",r]})]});function AH(){var F;const[e,t]=A.useState(!1),[r,n]=A.useState(!1),[u,h]=A.useState(null),{constants:d}=kH(),[o,_]=A.useState(null),{vehicles:P,isAllVehiclesLoading:S,isAllVehiclesError:M}=TH(),O=B=>{n(!0),h(B)},z=B=>{_(B)};return $.jsxs("div",{className:"relative",children:[$.jsxs("div",{className:"flex items-start justify-between mb-8",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Select Your Vehicle"}),$.jsx("p",{className:"text-gray-600 mt-2",children:"Choose a preset model or create a custom configuration for your simulation."})]}),$.jsx("button",{onClick:()=>t(!0),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2.5 rounded-lg font-medium transition-colors",children:"Create Custom Vehicle"})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(F=P==null?void 0:P.data)==null?void 0:F.map(B=>$.jsx($.Fragment,{children:(B==null?void 0:B.is_active)&&$.jsxs("div",{onClick:()=>z(B),className:`bg-white rounded-xl shadow-sm border-2 overflow-hidden hover:shadow-md transition-shadow cursor-pointer
              ${(o==null?void 0:o.id)===(B==null?void 0:B.id)?"border-emerald-500":"border-gray-200"}
            `,children:[$.jsxs("div",{className:"bg-black p-5 relative",children:[$.jsx("img",{src:"https://electric-vehicle-route-energy-calculation.onrender.com"+(B==null?void 0:B.photo),alt:B==null?void 0:B.name,className:"w-full h-48 object-cover rounded-lg"}),(B==null?void 0:B.is_default)&&$.jsx(F7,{className:"text-white absolute top-2 right-2 rotate-45 z-2"})]}),$.jsxs("div",{className:"p-5",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsx("h3",{className:"text-[#212B36] text-[24px] leading-9",children:B==null?void 0:B.name}),$.jsx("span",{className:"text-[#1CA9A6] text-[20px] leading-[30px] font-medium capitalize",children:B==null?void 0:B.vehicle_type})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsx(lx,{label:"Power",value:B==null?void 0:B.power_kw,type:"KW"}),$.jsx(lx,{label:"Weight",value:B==null?void 0:B.weight_kg,type:"Kg"})]}),$.jsxs("div",{className:"flex justify-between gap-4 mb-4",children:[$.jsx(lx,{label:"Battery",value:B==null?void 0:B.usable_battery_capacity_kwh,type:"KWh"}),$.jsx(lx,{label:"Frontal Area",value:B==null?void 0:B.frontal_area_m2,type:"m2"})]}),$.jsxs("button",{onClick:D=>{D.stopPropagation(),O(B)},className:"w-full border text-gray-500 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2 hover:border-emerald-500 hover:text-emerald-500 duration-300 cursor-pointer",children:[$.jsx(K7,{size:18}),"Custom Vehicle"]})]})]},B==null?void 0:B.id)})),S&&Array.from({length:3}).map((B,D)=>$.jsx(MH,{},D))]}),M&&$.jsx("div",{className:"w-full h-[300px] flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"No Vehicles Found"}),$.jsx("p",{className:"text-gray-600 mt-2",children:"Create a custom vehicle or select a preset model."})]})}),o&&$.jsxs("div",{className:"mt-8 bg-white p-6 rounded-2xl flex justify-between items-center",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title",children:"Environmental Constants"}),$.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[$.jsxs("p",{className:"Titel2",children:["Air Density:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.air_density)||0," kg/m"]})]}),$.jsxs("p",{className:"Titel2",children:["Gravity:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.gravity)||0," m/s"]})]}),$.jsxs("p",{className:"Titel2",children:["Temp:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.temperature_c)||0,"C"]})]}),$.jsxs("p",{className:"Titel2",children:["Wind speed:"," ",$.jsxs("span",{className:"text-[#637381]!",children:[(d==null?void 0:d.wind_speed)||0," m/s"]})]})]})]}),$.jsxs("div",{className:"flex items-center gap-5",children:[$.jsx(wy,{to:"/",variant:"fill",className:"mt-5 flex items-center border bg-transparent text-gray-500!",children:"Cancel"}),$.jsxs(wy,{to:"/route",state:o,className:"mt-5 flex items-center",children:["Continue to Route Planning ",$.jsx(Q7,{})]})]})]}),e&&$.jsx(SH,{onClose:t}),r&&$.jsx(CH,{vehicle:u,onClose:n})]})}function IH(){return $.jsx("div",{className:"p-10",children:$.jsx(AH,{})})}var zx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.16.0/LICENSE.txt
 */var OH=zx.exports,mI;function LH(){return mI||(mI=1,(function(e,t){(function(r,n){e.exports=n()})(OH,(function(){var r={},n={};function u(d,o,_){if(n[d]=_,d==="index"){var P="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",S={};return n.shared(S),n.index(r,S),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),r}}u("shared",["exports"],(function(d){function o(l,a,s,f){return new(s||(s=Promise))((function(g,x){function b(j){try{I(f.next(j))}catch(V){x(V)}}function C(j){try{I(f.throw(j))}catch(V){x(V)}}function I(j){var V;j.done?g(j.value):(V=j.value,V instanceof s?V:new s((function(G){G(V)}))).then(b,C)}I((f=f.apply(l,a||[])).next())}))}function _(l,a){this.x=l,this.y=a}function P(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var S,M;typeof SuppressedError=="function"&&SuppressedError,_.prototype={clone(){return new _(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,a){return this.clone()._rotateAround(l,a)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const a=l.x-this.x,s=l.y-this.y;return a*a+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,a){return Math.atan2(this.x*a-this.y*l,this.x*l+this.y*a)},_matMult(l){const a=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=a,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const a=Math.cos(l),s=Math.sin(l),f=s*this.x+a*this.y;return this.x=a*this.x-s*this.y,this.y=f,this},_rotateAround(l,a){const s=Math.cos(l),f=Math.sin(l),g=a.y+f*(this.x-a.x)+s*(this.y-a.y);return this.x=a.x+s*(this.x-a.x)-f*(this.y-a.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:_},_.convert=function(l){if(l instanceof _)return l;if(Array.isArray(l))return new _(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new _(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(M)return S;function l(a,s,f,g){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=s,this.p2x=f,this.p2y=g}return M=1,S=l,l.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,s){if(s===void 0&&(s=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,g=0;g<8;g++){var x=this.sampleCurveX(f)-a;if(Math.abs(x)<s)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var C=0,I=1;for(f=a,g=0;g<20&&(x=this.sampleCurveX(f),!(Math.abs(x-a)<s));g++)a>x?C=f:I=f,f=.5*(I-C)+C;return f},solve:function(a,s){return this.sampleCurveY(this.solveCurveX(a,s))}},S})(),z=P(O);let F,B;function D(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function H(){if(B==null&&(B=!1,D())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let f=0;f<25;f++){const g=4*f;a.fillStyle=`rgb(${g},${g+1},${g+2})`,a.fillRect(f%5,Math.floor(f/5),1,1)}const s=a.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&s[f]!==f){B=!0;break}}}return B||!1}var Q=1e-6,te=typeof Float32Array<"u"?Float32Array:Array;function ie(){var l=new te(9);return te!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function ae(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function he(){var l=new te(3);return te!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function re(l){var a=l[0],s=l[1],f=l[2];return Math.sqrt(a*a+s*s+f*f)}function be(l,a,s){var f=new te(3);return f[0]=l,f[1]=a,f[2]=s,f}function xe(l,a,s){return l[0]=a[0]+s[0],l[1]=a[1]+s[1],l[2]=a[2]+s[2],l}function $e(l,a,s){return l[0]=a[0]*s,l[1]=a[1]*s,l[2]=a[2]*s,l}function Ee(l,a,s){var f=a[0],g=a[1],x=a[2],b=s[0],C=s[1],I=s[2];return l[0]=g*I-x*C,l[1]=x*b-f*I,l[2]=f*C-g*b,l}var Ne,Xe=re;function ut(l,a,s){var f=a[0],g=a[1],x=a[2],b=a[3];return l[0]=s[0]*f+s[4]*g+s[8]*x+s[12]*b,l[1]=s[1]*f+s[5]*g+s[9]*x+s[13]*b,l[2]=s[2]*f+s[6]*g+s[10]*x+s[14]*b,l[3]=s[3]*f+s[7]*g+s[11]*x+s[15]*b,l}function pt(){var l=new te(4);return te!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function gt(l,a,s,f){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;a*=x,f*=x,s*=x;var b=Math.sin(a),C=Math.cos(a),I=Math.sin(s),j=Math.cos(s),V=Math.sin(f),G=Math.cos(f);switch(g){case"xyz":l[0]=b*j*G+C*I*V,l[1]=C*I*G-b*j*V,l[2]=C*j*V+b*I*G,l[3]=C*j*G-b*I*V;break;case"xzy":l[0]=b*j*G-C*I*V,l[1]=C*I*G-b*j*V,l[2]=C*j*V+b*I*G,l[3]=C*j*G+b*I*V;break;case"yxz":l[0]=b*j*G+C*I*V,l[1]=C*I*G-b*j*V,l[2]=C*j*V-b*I*G,l[3]=C*j*G+b*I*V;break;case"yzx":l[0]=b*j*G+C*I*V,l[1]=C*I*G+b*j*V,l[2]=C*j*V-b*I*G,l[3]=C*j*G-b*I*V;break;case"zxy":l[0]=b*j*G-C*I*V,l[1]=C*I*G+b*j*V,l[2]=C*j*V+b*I*G,l[3]=C*j*G-b*I*V;break;case"zyx":l[0]=b*j*G-C*I*V,l[1]=C*I*G+b*j*V,l[2]=C*j*V-b*I*G,l[3]=C*j*G+b*I*V;break;default:throw new Error("Unknown angle order "+g)}return l}function wt(){var l=new te(2);return te!=Float32Array&&(l[0]=0,l[1]=0),l}function je(l,a){var s=new te(2);return s[0]=l,s[1]=a,s}he(),Ne=new te(4),te!=Float32Array&&(Ne[0]=0,Ne[1]=0,Ne[2]=0,Ne[3]=0),he(),be(1,0,0),be(0,1,0),pt(),pt(),ie(),wt();const Qe=8192;function yt(l,a,s){return a*(Qe/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function Oe(l,a){return(l%a+a)%a}function et(l,a,s){return l*(1-s)+a*s}function Mt(l){if(l<=0)return 0;if(l>=1)return 1;const a=l*l,s=a*l;return 4*(l<.5?s:3*(l-a)+s-.75)}function Dt(l,a,s,f){const g=new z(l,a,s,f);return x=>g.solve(x)}const Ke=Dt(.25,.1,.25,1);function tr(l,a,s){return Math.min(s,Math.max(a,l))}function Ft(l,a,s){const f=s-a,g=((l-a)%f+f)%f+a;return g===a?s:g}function $t(l,...a){for(const s of a)for(const f in s)l[f]=s[f];return l}let ct=1;function Lt(l,a,s){const f={};for(const g in l)f[g]=a.call(this,l[g],g,l);return f}function ir(l,a,s){const f={};for(const g in l)a.call(this,l[g],g,l)&&(f[g]=l[g]);return f}function St(l){return Array.isArray(l)?l.map(St):typeof l=="object"&&l?Lt(l,St):l}const Gr={};function Tr(l){Gr[l]||(typeof console<"u"&&console.warn(l),Gr[l]=!0)}function wr(l,a,s){return(s.y-l.y)*(a.x-l.x)>(a.y-l.y)*(s.x-l.x)}function tn(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Wr=null;function Xi(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const Ii="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Be(l,a,s,f,g){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(l,{timestamp:0});try{const b=x==null?void 0:x.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const C=b.startsWith("BGR"),I=new Uint8ClampedArray(f*g*4);if(yield x.copyTo(I,(function(j,V,G,Z,X){const ee=4*Math.max(-V,0),ne=(Math.max(0,G)-G)*Z*4+ee,se=4*Z,fe=Math.max(0,V),Pe=Math.max(0,G);return{rect:{x:fe,y:Pe,width:Math.min(j.width,V+Z)-fe,height:Math.min(j.height,G+X)-Pe},layout:[{offset:ne,stride:se}]}})(l,a,s,f,g)),C)for(let j=0;j<I.length;j+=4){const V=I[j];I[j]=I[j+2],I[j+2]=V}return I}finally{x.close()}}))}let rt,bt;function rr(l,a,s,f){return l.addEventListener(a,s,f),{unsubscribe:()=>{l.removeEventListener(a,s,f)}}}function Wt(l){return l*Math.PI/180}function zt(l){return l/Math.PI*180}const ze={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ue={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},le="AbortError";class pe extends Error{constructor(a=le){super(a instanceof Error?a.message:a),this.name=le,a instanceof Error&&a.stack&&(this.stack=a.stack)}}function Me(l){return l.name===le}const Ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Je(l){return Ae.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const Ze="global-dispatcher";class Ve extends Error{constructor(a,s,f,g){super(`AJAXError: ${s} (${a}): ${f}`),this.status=a,this.statusText=s,this.url=f,this.body=g}}const it=()=>tn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,At=function(l,a){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const f=Je(l.url);if(f)return f(l,a);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:Ze},a)}if(!(/^file:/.test(s=l.url)||/^file:/.test(it())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,g){return o(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:it(),signal:g.signal});let b,C;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(j){throw Me(j)?j:new Ve(0,j.message,f.url,new Blob)}if(!b.ok){const j=yield b.blob();throw new Ve(b.status,b.statusText,f.url,j)}C=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();const I=yield C;return g.signal.throwIfAborted(),{data:I,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(l,a);if(tn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:Ze},a)}var s;return(function(f,g){return new Promise(((x,b)=>{var C;const I=new XMLHttpRequest;I.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(I.responseType="arraybuffer");for(const j in f.headers)I.setRequestHeader(j,f.headers[j]);f.type==="json"&&(I.responseType="text",!((C=f.headers)===null||C===void 0)&&C.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=f.credentials==="include",I.onerror=()=>{b(new Error(I.statusText))},I.onload=()=>{if(!g.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let j=I.response;if(f.type==="json")try{j=JSON.parse(I.response)}catch(V){return void b(V)}x({data:j,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const j=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});b(new Ve(I.status,I.statusText,f.url,j))}},g.signal.addEventListener("abort",(()=>{I.abort(),b(new pe(g.signal.reason))})),I.send(f.body)}))})(l,a)};function Pt(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const a=new URL(l),s=window.location;return a.protocol===s.protocol&&a.host===s.host}function Xt(l,a,s){s[l]&&s[l].indexOf(a)!==-1||(s[l]=s[l]||[],s[l].push(a))}function or(l,a,s){if(s&&s[l]){const f=s[l].indexOf(a);f!==-1&&s[l].splice(f,1)}}class Mr{constructor(a,s={}){$t(this,s),this.type=a}}class Kr extends Mr{constructor(a,s={}){super("error",$t({error:a},s))}}class Ur{on(a,s){return this._listeners=this._listeners||{},Xt(a,s,this._listeners),{unsubscribe:()=>{this.off(a,s)}}}off(a,s){return or(a,s,this._listeners),or(a,s,this._oneTimeListeners),this}once(a,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Xt(a,s,this._oneTimeListeners),this):new Promise((f=>this.once(a,f)))}fire(a,s){typeof a=="string"&&(a=new Mr(a,s||{}));const f=a.type;if(this.listens(f)){a.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const C of g)C.call(this,a);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const C of x)or(f,C,this._oneTimeListeners),C.call(this,a);const b=this._eventedParent;b&&($t(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(a))}else a instanceof Kr&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,s){return this._eventedParent=a,this._eventedParentData=s,this}}var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ri(l,a){const s={};for(const f in l)f!=="ref"&&(s[f]=l[f]);return sn.forEach((f=>{f in a&&(s[f]=a[f])})),s}function Ir(l,a){if(Array.isArray(l)){if(!Array.isArray(a)||l.length!==a.length)return!1;for(let s=0;s<l.length;s++)if(!Ir(l[s],a[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&a!==null){if(typeof a!="object"||Object.keys(l).length!==Object.keys(a).length)return!1;for(const s in l)if(!Ir(l[s],a[s]))return!1;return!0}return l===a}function Zr(l,a){l.push(a)}function Vn(l,a,s){Zr(s,{command:"addSource",args:[l,a[l]]})}function yn(l,a,s){Zr(a,{command:"removeSource",args:[l]}),s[l]=!0}function ln(l,a,s,f){yn(l,s,f),Vn(l,a,s)}function ur(l,a,s){let f;for(f in l[s])if(Object.prototype.hasOwnProperty.call(l[s],f)&&f!=="data"&&!Ir(l[s][f],a[s][f]))return!1;for(f in a[s])if(Object.prototype.hasOwnProperty.call(a[s],f)&&f!=="data"&&!Ir(l[s][f],a[s][f]))return!1;return!0}function Ie(l,a,s,f,g,x){l=l||{},a=a||{};for(const b in l)Object.prototype.hasOwnProperty.call(l,b)&&(Ir(l[b],a[b])||s.push({command:x,args:[f,b,a[b],g]}));for(const b in a)Object.prototype.hasOwnProperty.call(a,b)&&!Object.prototype.hasOwnProperty.call(l,b)&&(Ir(l[b],a[b])||s.push({command:x,args:[f,b,a[b],g]}))}function Ye(l){return l.id}function mt(l,a){return l[a.id]=a,l}class We{constructor(a,s,f,g){this.message=(a?`${a}: `:"")+f,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Gt(l,...a){for(const s of a)for(const f in s)l[f]=s[f];return l}class cr extends Error{constructor(a,s){super(s),this.message=s,this.key=a}}class Sr{constructor(a,s=[]){this.parent=a,this.bindings={};for(const[f,g]of s)this.bindings[f]=g}concat(a){return new Sr(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const hr={kind:"null"},xt={kind:"number"},Bt={kind:"string"},Zt={kind:"boolean"},dr={kind:"color"},Fr={kind:"projectionDefinition"},Yr={kind:"object"},mr={kind:"value"},ni={kind:"collator"},vn={kind:"formatted"},Tn={kind:"padding"},Ja={kind:"colorArray"},bn={kind:"numberArray"},La={kind:"resolvedImage"},Yi={kind:"variableAnchorOffsetCollection"};function Oi(l,a){return{kind:"array",itemType:l,N:a}}function Qr(l){if(l.kind==="array"){const a=Qr(l.itemType);return typeof l.N=="number"?`array<${a}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${a}>`}return l.kind}const Io=[hr,xt,Bt,Zt,dr,Fr,vn,Yr,Oi(mr),Tn,bn,Ja,La,Yi];function Oo(l,a){if(a.kind==="error")return null;if(l.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Oo(l.itemType,a.itemType))&&(typeof l.N!="number"||l.N===a.N))return null}else{if(l.kind===a.kind)return null;if(l.kind==="value"){for(const s of Io)if(!Oo(s,a))return null}}return`Expected ${Qr(l)} but found ${Qr(a)} instead.`}function So(l,a){return a.some((s=>s.kind===l.kind))}function jr(l,a){return a.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function Rn(l,a){return l.kind==="array"&&a.kind==="array"?l.itemType.kind===a.itemType.kind&&typeof l.N=="number":l.kind===a.kind}const $i=.96422,Da=.82521,$n=4/29,jn=6/29,Ol=3*jn*jn,Pu=jn*jn*jn,rl=Math.PI/180,Ph=180/Math.PI;function sg(l){return(l%=360)<0&&(l+=360),l}function lg([l,a,s,f]){let g,x;const b=Gd((.2225045*(l=Ac(l))+.7168786*(a=Ac(a))+.0606169*(s=Ac(s)))/1);l===a&&a===s?g=x=b:(g=Gd((.4360747*l+.3850649*a+.1430804*s)/$i),x=Gd((.0139322*l+.0971045*a+.7141733*s)/Da));const C=116*b-16;return[C<0?0:C,500*(g-b),200*(b-x),f]}function Ac(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Gd(l){return l>Pu?Math.pow(l,1/3):l/Ol+$n}function Eh([l,a,s,f]){let g=(l+16)/116,x=isNaN(a)?g:g+a/500,b=isNaN(s)?g:g-s/200;return g=1*Mp(g),x=$i*Mp(x),b=Da*Mp(b),[Eu(3.1338561*x-1.6168667*g-.4906146*b),Eu(-.9787684*x+1.9161415*g+.033454*b),Eu(.0719453*x-.2289914*g+1.4052427*b),f]}function Eu(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Mp(l){return l>jn?l*l*l:Ol*(l-$n)}const kp=Object.hasOwn||function(l,a){return Object.prototype.hasOwnProperty.call(l,a)};function mn(l,a){return kp(l,a)?l[a]:void 0}function Ch(l){return parseInt(l.padEnd(2,l),16)/255}function Ap(l,a){return Ll(a?l/100:l,0,1)}function Ll(l,a,s){return Math.min(Math.max(a,l),s)}function Wd(l){return!l.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function nl(l,a,s){return l+s*(a-l)}function Dl(l,a,s){return l.map(((f,g)=>nl(f,a[g],s)))}class Br{constructor(a,s,f,g=1,x=!0){this.r=a,this.g=s,this.b=f,this.a=g,x||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[a,s,f,g]))}static parse(a){if(a instanceof Br)return a;if(typeof a!="string")return;const s=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=mn(Ic,f);if(g){const[b,C,I]=g;return[b/255,C/255,I/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const b=f.length<6?1:2;let C=1;return[Ch(f.slice(C,C+=b)),Ch(f.slice(C,C+=b)),Ch(f.slice(C,C+=b)),Ch(f.slice(C,C+b)||"ff")]}if(f.startsWith("rgb")){const b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[C,I,j,V,G,Z,X,ee,ne,se,fe,Pe]=b,me=[V||" ",X||" ",se].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const ge=[j,Z,ne].join(""),Ce=ge==="%%%"?100:ge===""?255:0;if(Ce){const Re=[Ll(+I/Ce,0,1),Ll(+G/Ce,0,1),Ll(+ee/Ce,0,1),fe?Ap(+fe,Pe):1];if(Wd(Re))return Re}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,C,I,j,V,G,Z,X,ee]=x,ne=[I||" ",V||" ",Z].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const se=[+C,Ll(+j,0,100),Ll(+G,0,100),X?Ap(+X,ee):1];if(Wd(se))return(function([fe,Pe,me,ge]){function Ce(Re){const nt=(Re+fe/30)%12,kt=Pe*Math.min(me,1-me);return me-kt*Math.max(-1,Math.min(nt-3,9-nt,1))}return fe=sg(fe),Pe/=100,me/=100,[Ce(0),Ce(8),Ce(4),ge]})(se)}}})(a);return s?new Br(...s,!1):void 0}get rgb(){const{r:a,g:s,b:f,a:g}=this,x=g||1/0;return this.overwriteGetter("rgb",[a/x,s/x,f/x,g])}get hcl(){return this.overwriteGetter("hcl",(function(a){const[s,f,g,x]=lg(a),b=Math.sqrt(f*f+g*g);return[Math.round(1e4*b)?sg(Math.atan2(g,f)*Ph):NaN,b,s,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",lg(this.rgb))}overwriteGetter(a,s){return Object.defineProperty(this,a,{value:s}),s}toString(){const[a,s,f,g]=this.rgb;return`rgba(${[a,s,f].map((x=>Math.round(255*x))).join(",")},${g})`}static interpolate(a,s,f,g="rgb"){switch(g){case"rgb":{const[x,b,C,I]=Dl(a.rgb,s.rgb,f);return new Br(x,b,C,I,!1)}case"hcl":{const[x,b,C,I]=a.hcl,[j,V,G,Z]=s.hcl;let X,ee;if(isNaN(x)||isNaN(j))isNaN(x)?isNaN(j)?X=NaN:(X=j,C!==1&&C!==0||(ee=V)):(X=x,G!==1&&G!==0||(ee=b));else{let me=j-x;j>x&&me>180?me-=360:j<x&&x-j>180&&(me+=360),X=x+f*me}const[ne,se,fe,Pe]=(function([me,ge,Ce,Re]){return me=isNaN(me)?0:me*rl,Eh([Ce,Math.cos(me)*ge,Math.sin(me)*ge,Re])})([X,ee??nl(b,V,f),nl(C,G,f),nl(I,Z,f)]);return new Br(ne,se,fe,Pe,!1)}case"lab":{const[x,b,C,I]=Eh(Dl(a.lab,s.lab,f));return new Br(x,b,C,I,!1)}}}}Br.black=new Br(0,0,0,1),Br.white=new Br(1,1,1,1),Br.transparent=new Br(0,0,0,0),Br.red=new Br(1,0,0,1);class Ts{constructor(a,s,f){this.sensitivity=a?s?"variant":"case":s?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,s){return this.collator.compare(a,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Rl=["bottom","center","top"];class Ms{constructor(a,s,f,g,x,b){this.text=a,this.image=s,this.scale=f,this.fontStack=g,this.textColor=x,this.verticalAlign=b}}class Qi{constructor(a){this.sections=a}static fromString(a){return new Qi([new Ms(a,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||a.image&&a.image.name.length!==0))}static factory(a){return a instanceof Qi?a:Qi.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}}class Li{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Li)return a;if(typeof a=="number")return new Li([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const s of a)if(typeof s!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new Li(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){return new Li(Dl(a.values,s.values,f))}}class wn{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof wn)return a;if(typeof a=="number")return new wn([a]);if(Array.isArray(a)){for(const s of a)if(typeof s!="number")return;return new wn(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){return new wn(Dl(a.values,s.values,f))}}class Lr{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Lr)return a;if(typeof a=="string"){const f=Br.parse(a);return f?new Lr([f]):void 0}if(!Array.isArray(a))return;const s=[];for(const f of a){if(typeof f!="string")return;const g=Br.parse(f);if(!g)return;s.push(g)}return new Lr(s)}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f,g="rgb"){const x=[];if(a.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${a.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let b=0;b<a.values.length;b++)x.push(Br.interpolate(a.values[b],s.values[b],f,g));return new Lr(x)}}class In extends Error{constructor(a){super(a),this.name="RuntimeError"}toJSON(){return this.message}}const Lo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ra{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Ra)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let s=0;s<a.length;s+=2){const f=a[s],g=a[s+1];if(typeof f!="string"||!Lo.has(f)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Ra(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,s,f){const g=a.values,x=s.values;if(g.length!==x.length)throw new In(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${s.toString()}`);const b=[];for(let C=0;C<g.length;C+=2){if(g[C]!==x[C])throw new In(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${g[C]}, to[${C}]: ${x[C]}`);b.push(g[C]);const[I,j]=g[C+1],[V,G]=x[C+1];b.push([nl(I,V,f),nl(j,G,f)])}return new Ra(b)}}class eo{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new eo({name:a,available:!1}):null}}class Ji{constructor(a,s,f){this.from=a,this.to=s,this.transition=f}static interpolate(a,s,f){return new Ji(a,s,f)}static parse(a){return a instanceof Ji?a:Array.isArray(a)&&a.length===3&&typeof a[0]=="string"&&typeof a[1]=="string"&&typeof a[2]=="number"?new Ji(a[0],a[1],a[2]):typeof a=="object"&&typeof a.from=="string"&&typeof a.to=="string"&&typeof a.transition=="number"?new Ji(a.from,a.to,a.transition):typeof a=="string"?new Ji(a,a,1):void 0}}function Cu(l,a,s,f){return typeof l=="number"&&l>=0&&l<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[l,a,s,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[l,a,s,f]:[l,a,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jl(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Ji||l instanceof Br||l instanceof Ts||l instanceof Qi||l instanceof Li||l instanceof wn||l instanceof Lr||l instanceof Ra||l instanceof eo)return!0;if(Array.isArray(l)){for(const a of l)if(!jl(a))return!1;return!0}if(typeof l=="object"){for(const a in l)if(!jl(l[a]))return!1;return!0}return!1}function Hn(l){if(l===null)return hr;if(typeof l=="string")return Bt;if(typeof l=="boolean")return Zt;if(typeof l=="number")return xt;if(l instanceof Br)return dr;if(l instanceof Ji)return Fr;if(l instanceof Ts)return ni;if(l instanceof Qi)return vn;if(l instanceof Li)return Tn;if(l instanceof wn)return bn;if(l instanceof Lr)return Ja;if(l instanceof Ra)return Yi;if(l instanceof eo)return La;if(Array.isArray(l)){const a=l.length;let s;for(const f of l){const g=Hn(f);if(s){if(s===g)continue;s=mr;break}s=g}return Oi(s||mr,a)}return Yr}function Jo(l){const a=typeof l;return l===null?"":a==="string"||a==="number"||a==="boolean"?String(l):l instanceof Br||l instanceof Ji||l instanceof Qi||l instanceof Li||l instanceof wn||l instanceof Lr||l instanceof Ra||l instanceof eo?l.toString():JSON.stringify(l)}class ja{constructor(a,s){this.type=a,this.value=s}static parse(a,s){if(a.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!jl(a[1]))return s.error("invalid value");const f=a[1];let g=Hn(f);const x=s.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new ja(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Tu={string:Bt,number:xt,boolean:Zt,object:Yr};class to{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");let f,g=1;const x=a[0];if(x==="array"){let C,I;if(a.length>2){const j=a[1];if(typeof j!="string"||!(j in Tu)||j==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=Tu[j],g++}else C=mr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=a[2],g++}f=Oi(C,I)}else{if(!Tu[x])throw new Error(`Types doesn't contain name = ${x}`);f=Tu[x]}const b=[];for(;g<a.length;g++){const C=s.parse(a[g],g,mr);if(!C)return null;b.push(C)}return new to(f,b)}evaluate(a){for(let s=0;s<this.args.length;s++){const f=this.args[s].evaluate(a);if(!Oo(this.type,Hn(f)))return f;if(s===this.args.length-1)throw new In(`Expected value to be of type ${Qr(this.type)}, but found ${Qr(Hn(f))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Mu={"to-boolean":Zt,"to-color":dr,"to-number":xt,"to-string":Bt};class es{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");const f=a[0];if(!Mu[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&a.length!==2)return s.error("Expected one argument.");const g=Mu[f],x=[];for(let b=1;b<a.length;b++){const C=s.parse(a[b],b,mr);if(!C)return null;x.push(C)}return new es(g,x)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let s,f;for(const g of this.args){if(s=g.evaluate(a),f=null,s instanceof Br)return s;if(typeof s=="string"){const x=a.parseColor(s);if(x)return x}else if(Array.isArray(s)&&(f=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Cu(s[0],s[1],s[2],s[3]),!f))return new Br(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new In(f||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const f of this.args){s=f.evaluate(a);const g=Li.parse(s);if(g)return g}throw new In(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const f of this.args){s=f.evaluate(a);const g=wn.parse(s);if(g)return g}throw new In(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const f of this.args){s=f.evaluate(a);const g=Lr.parse(s);if(g)return g}throw new In(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const f of this.args){s=f.evaluate(a);const g=Ra.parse(s);if(g)return g}throw new In(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const f of this.args){if(s=f.evaluate(a),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new In(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Qi.fromString(Jo(this.args[0].evaluate(a)));case"resolvedImage":return eo.fromString(Jo(this.args[0].evaluate(a)));case"projectionDefinition":return this.args[0].evaluate(a);default:return Jo(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Th=["Unknown","Point","LineString","Polygon"];class Mh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Th[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let s=this._parseColorCache.get(a);return s||(s=Br.parse(a),this._parseColorCache.set(a,s)),s}}class zl{constructor(a,s,f=[],g,x=new Sr,b=[]){this.registry=a,this.path=f,this.key=f.map((C=>`[${C}]`)).join(""),this.scope=x,this.errors=b,this.expectedType=g,this._isConstant=s}parse(a,s,f,g,x={}){return s?this.concat(s,f,g)._parse(a,x):this._parse(a,x)}_parse(a,s){function f(g,x,b){return b==="assert"?new to(x,[g]):b==="coerce"?new es(x,[g]):g}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=a[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let b=x.parse(a,this);if(!b)return null;if(this.expectedType){const C=this.expectedType,I=b.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(I.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(I.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(I.kind)||C.kind==="colorArray"&&["value","string","array"].includes(I.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(I.kind))b=f(b,C,s.typeAnnotation||"coerce");else if(this.checkSubtype(C,I))return null}else b=f(b,C,s.typeAnnotation||"assert")}if(!(b instanceof ja)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const C=new Mh;try{b=new ja(b.type,b.evaluate(C))}catch(I){return this.error(I.message),null}}return b}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,s,f){const g=typeof a=="number"?this.path.concat(a):this.path,x=f?this.scope.concat(f):this.scope;return new zl(this.registry,this._isConstant,g,s||null,x,this.errors)}error(a,...s){const f=`${this.key}${s.map((g=>`[${g}]`)).join("")}`;this.errors.push(new cr(f,a))}checkSubtype(a,s){const f=Oo(a,s);return f&&this.error(f),f}}class un{constructor(a,s){this.type=s.type,this.bindings=[].concat(a),this.result=s}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const s of this.bindings)a(s[1]);a(this.result)}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const f=[];for(let x=1;x<a.length-1;x+=2){const b=a[x];if(typeof b!="string")return s.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=s.parse(a[x+1],x+1);if(!C)return null;f.push([b,C])}const g=s.parse(a[a.length-1],a.length-1,s.expectedType,f);return g?new un(f,g):null}outputDefined(){return this.result.outputDefined()}}class Nl{constructor(a,s){this.type=s.type,this.name=a,this.boundExpression=s}static parse(a,s){if(a.length!==2||typeof a[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const f=a[1];return s.scope.has(f)?new Nl(f,s.scope.get(f)):s.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Xr{constructor(a,s,f){this.type=a,this.index=s,this.input=f}static parse(a,s){if(a.length!==3)return s.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,xt),g=s.parse(a[2],2,Oi(s.expectedType||mr));return f&&g?new Xr(g.type.itemType,f,g):null}evaluate(a){const s=this.index.evaluate(a),f=this.input.evaluate(a);if(s<0)throw new In(`Array index out of bounds: ${s} < 0.`);if(s>=f.length)throw new In(`Array index out of bounds: ${s} > ${f.length-1}.`);if(s!==Math.floor(s))throw new In(`Array index must be an integer, but found ${s} instead.`);return f[s]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class Vr{constructor(a,s){this.type=Zt,this.needle=a,this.haystack=s}static parse(a,s){if(a.length!==3)return s.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,mr);return f&&g?So(f.type,[Zt,Bt,xt,hr,mr])?new Vr(f,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(f.type)} instead`):null}evaluate(a){const s=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!jr(s,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Hn(s))} instead.`);if(!jr(f,["string","array"]))throw new In(`Expected second argument to be of type array or string, but found ${Qr(Hn(f))} instead.`);return f.indexOf(s)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class il{constructor(a,s,f){this.type=xt,this.needle=a,this.haystack=s,this.fromIndex=f}static parse(a,s){if(a.length<=2||a.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,mr);if(!f||!g)return null;if(!So(f.type,[Zt,Bt,xt,hr,mr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(f.type)} instead`);if(a.length===4){const x=s.parse(a[3],3,xt);return x?new il(f,g,x):null}return new il(f,g)}evaluate(a){const s=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!jr(s,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Hn(s))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(a)),jr(f,["string"])){const x=f.indexOf(s,g);return x===-1?-1:[...f.slice(0,x)].length}if(jr(f,["array"]))return f.indexOf(s,g);throw new In(`Expected second argument to be of type array or string, but found ${Qr(Hn(f))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Jr{constructor(a,s,f,g,x,b){this.inputType=a,this.type=s,this.input=f,this.cases=g,this.outputs=x,this.otherwise=b}static parse(a,s){if(a.length<5)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return s.error("Expected an even number of arguments.");let f,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const x={},b=[];for(let j=2;j<a.length-1;j+=2){let V=a[j];const G=a[j+1];Array.isArray(V)||(V=[V]);const Z=s.concat(j);if(V.length===0)return Z.error("Expected at least one branch label.");for(const ee of V){if(typeof ee!="number"&&typeof ee!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,Hn(ee)))return null}else f=Hn(ee);if(x[String(ee)]!==void 0)return Z.error("Branch labels must be unique.");x[String(ee)]=b.length}const X=s.parse(G,j,g);if(!X)return null;g=g||X.type,b.push(X)}const C=s.parse(a[1],1,mr);if(!C)return null;const I=s.parse(a[a.length-1],a.length-1,g);return I?C.type.kind!=="value"&&s.concat(1).checkSubtype(f,C.type)?null:new Jr(f,g,C,x,b,I):null}evaluate(a){const s=this.input.evaluate(a);return(Hn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Oc{constructor(a,s,f){this.type=a,this.branches=s,this.otherwise=f}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return s.error("Expected an odd number of arguments.");let f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const g=[];for(let b=1;b<a.length-1;b+=2){const C=s.parse(a[b],b,Zt);if(!C)return null;const I=s.parse(a[b+1],b+1,f);if(!I)return null;g.push([C,I]),f=f||I.type}const x=s.parse(a[a.length-1],a.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Oc(f,g,x)}evaluate(a){for(const[s,f]of this.branches)if(s.evaluate(a))return f.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[s,f]of this.branches)a(s),a(f);a(this.otherwise)}outputDefined(){return this.branches.every((([a,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class hi{constructor(a,s,f,g){this.type=a,this.input=s,this.beginIndex=f,this.endIndex=g}static parse(a,s){if(a.length<=2||a.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${a.length-1} instead.`);const f=s.parse(a[1],1,mr),g=s.parse(a[2],2,xt);if(!f||!g)return null;if(!So(f.type,[Oi(mr),Bt,mr]))return s.error(`Expected first argument to be of type array or string, but found ${Qr(f.type)} instead`);if(a.length===4){const x=s.parse(a[3],3,xt);return x?new hi(f.type,f,g,x):null}return new hi(f.type,f,g)}evaluate(a){const s=this.input.evaluate(a),f=this.beginIndex.evaluate(a);let g;if(this.endIndex&&(g=this.endIndex.evaluate(a)),jr(s,["string"]))return[...s].slice(f,g).join("");if(jr(s,["array"]))return s.slice(f,g);throw new In(`Expected first argument to be of type array or string, but found ${Qr(Hn(s))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function ts(l,a){const s=l.length-1;let f,g,x=0,b=s,C=0;for(;x<=b;)if(C=Math.floor((x+b)/2),f=l[C],g=l[C+1],f<=a){if(C===s||a<g)return C;x=C+1}else{if(!(f>a))throw new In("Input is not a number.");b=C-1}return 0}class ks{constructor(a,s,f){this.type=a,this.input=s,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(a,s){if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");const f=s.parse(a[1],1,xt);if(!f)return null;const g=[];let x=null;s.expectedType&&s.expectedType.kind!=="value"&&(x=s.expectedType);for(let b=1;b<a.length;b+=2){const C=b===1?-1/0:a[b],I=a[b+1],j=b,V=b+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const G=s.parse(I,V,x);if(!G)return null;x=x||G.type,g.push([C,G])}return new ks(x,f,g)}evaluate(a){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(a);const g=this.input.evaluate(a);if(g<=s[0])return f[0].evaluate(a);const x=s.length;return g>=s[x-1]?f[x-1].evaluate(a):f[ts(s,g)].evaluate(a)}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function Lc(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var kh,Ah,Ip=(function(){if(Ah)return kh;function l(a,s,f,g){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=s,this.p2x=f,this.p2y=g}return Ah=1,kh=l,l.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,s){if(s===void 0&&(s=1e-6),a<0)return 0;if(a>1)return 1;for(var f=a,g=0;g<8;g++){var x=this.sampleCurveX(f)-a;if(Math.abs(x)<s)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var C=0,I=1;for(f=a,g=0;g<20&&(x=this.sampleCurveX(f),!(Math.abs(x-a)<s));g++)a>x?C=f:I=f,f=.5*(I-C)+C;return f},solve:function(a,s){return this.sampleCurveY(this.solveCurveX(a,s))}},kh})(),Dc=Lc(Ip);class ea{constructor(a,s,f,g,x){this.type=a,this.operator=s,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[b,C]of x)this.labels.push(b),this.outputs.push(C)}static interpolationFactor(a,s,f,g){let x=0;if(a.name==="exponential")x=rs(s,a.base,f,g);else if(a.name==="linear")x=rs(s,1,f,g);else if(a.name==="cubic-bezier"){const b=a.controlPoints;x=new Dc(b[0],b[1],b[2],b[3]).solve(rs(s,1,f,g))}return x}static parse(a,s){let[f,g,x,...b]=a;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const j=g[1];if(typeof j!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:j}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const j=g.slice(1);if(j.length!==4||j.some((V=>typeof V!="number"||V<0||V>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:j}}}if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(x=s.parse(x,2,xt),!x)return null;const C=[];let I=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||s.expectedType==Ja?s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType):I=dr;for(let j=0;j<b.length;j+=2){const V=b[j],G=b[j+1],Z=j+3,X=j+4;if(typeof V!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(C.length&&C[C.length-1][0]>=V)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const ee=s.parse(G,X,I);if(!ee)return null;I=I||ee.type,C.push([V,ee])}return Rn(I,xt)||Rn(I,Fr)||Rn(I,dr)||Rn(I,Tn)||Rn(I,bn)||Rn(I,Ja)||Rn(I,Yi)||Rn(I,Oi(xt))?new ea(I,f,g,x,C):s.error(`Type ${Qr(I)} is not interpolatable.`)}evaluate(a){const s=this.labels,f=this.outputs;if(s.length===1)return f[0].evaluate(a);const g=this.input.evaluate(a);if(g<=s[0])return f[0].evaluate(a);const x=s.length;if(g>=s[x-1])return f[x-1].evaluate(a);const b=ts(s,g),C=ea.interpolationFactor(this.interpolation,g,s[b],s[b+1]),I=f[b].evaluate(a),j=f[b+1].evaluate(a);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return nl(I,j,C);case"color":return Br.interpolate(I,j,C);case"padding":return Li.interpolate(I,j,C);case"colorArray":return Lr.interpolate(I,j,C);case"numberArray":return wn.interpolate(I,j,C);case"variableAnchorOffsetCollection":return Ra.interpolate(I,j,C);case"array":return Dl(I,j,C);case"projectionDefinition":return Ji.interpolate(I,j,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return Br.interpolate(I,j,C,"hcl");case"colorArray":return Lr.interpolate(I,j,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Br.interpolate(I,j,C,"lab");case"colorArray":return Lr.interpolate(I,j,C,"lab")}}}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function rs(l,a,s,f){const g=f-s,x=l-s;return g===0?0:a===1?x/g:(Math.pow(a,x)-1)/(Math.pow(a,g)-1)}const ii={color:Br.interpolate,number:nl,padding:Li.interpolate,numberArray:wn.interpolate,colorArray:Lr.interpolate,variableAnchorOffsetCollection:Ra.interpolate,array:Dl};class ku{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");let f=null;const g=s.expectedType;g&&g.kind!=="value"&&(f=g);const x=[];for(const C of a.slice(1)){const I=s.parse(C,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!I)return null;f=f||I.type,x.push(I)}if(!f)throw new Error("No output type");const b=g&&x.some((C=>Oo(g,C.type)));return new ku(b?mr:f,x)}evaluate(a){let s,f=null,g=0;for(const x of this.args)if(g++,f=x.evaluate(a),f&&f instanceof eo&&!f.available&&(s||(s=f.name),f=null,g===this.args.length&&(f=s)),f!==null)break;return f}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}function Op(l,a){return l==="=="||l==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Au(l,a,s,f){return f.compare(a,s)===0}function pi(l,a,s){const f=l!=="=="&&l!=="!=";return class pN{constructor(x,b,C){this.type=Zt,this.lhs=x,this.rhs=b,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const C=x[0];let I=b.parse(x[1],1,mr);if(!I)return null;if(!Op(C,I.type))return b.concat(1).error(`"${C}" comparisons are not supported for type '${Qr(I.type)}'.`);let j=b.parse(x[2],2,mr);if(!j)return null;if(!Op(C,j.type))return b.concat(2).error(`"${C}" comparisons are not supported for type '${Qr(j.type)}'.`);if(I.type.kind!==j.type.kind&&I.type.kind!=="value"&&j.type.kind!=="value")return b.error(`Cannot compare types '${Qr(I.type)}' and '${Qr(j.type)}'.`);f&&(I.type.kind==="value"&&j.type.kind!=="value"?I=new to(j.type,[I]):I.type.kind!=="value"&&j.type.kind==="value"&&(j=new to(I.type,[j])));let V=null;if(x.length===4){if(I.type.kind!=="string"&&j.type.kind!=="string"&&I.type.kind!=="value"&&j.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(V=b.parse(x[3],3,ni),!V)return null}return new pN(I,j,V)}evaluate(x){const b=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const I=Hn(b),j=Hn(C);if(I.kind!==j.kind||I.kind!=="string"&&I.kind!=="number")throw new In(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${j.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const I=Hn(b),j=Hn(C);if(I.kind!=="string"||j.kind!=="string")return a(x,b,C)}return this.collator?s(x,b,C,this.collator.evaluate(x)):a(x,b,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const ug=pi("==",(function(l,a,s){return a===s}),Au),Lp=pi("!=",(function(l,a,s){return a!==s}),(function(l,a,s,f){return!Au(0,a,s,f)})),cg=pi("<",(function(l,a,s){return a<s}),(function(l,a,s,f){return f.compare(a,s)<0})),ev=pi(">",(function(l,a,s){return a>s}),(function(l,a,s,f){return f.compare(a,s)>0})),Iu=pi("<=",(function(l,a,s){return a<=s}),(function(l,a,s,f){return f.compare(a,s)<=0})),Hd=pi(">=",(function(l,a,s){return a>=s}),(function(l,a,s,f){return f.compare(a,s)>=0}));class Rc{constructor(a,s,f){this.type=ni,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=s}static parse(a,s){if(a.length!==2)return s.error("Expected one argument.");const f=a[1];if(typeof f!="object"||Array.isArray(f))return s.error("Collator options argument must be an object.");const g=s.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Zt);if(!g)return null;const x=s.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Zt);if(!x)return null;let b=null;return f.locale&&(b=s.parse(f.locale,1,Bt),!b)?null:new Rc(g,x,b)}evaluate(a){return new Ts(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class Dp{constructor(a,s,f,g,x){this.type=Bt,this.number=a,this.locale=s,this.currency=f,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(a,s){if(a.length!==3)return s.error("Expected two arguments.");const f=s.parse(a[1],1,xt);if(!f)return null;const g=a[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=s.parse(g.locale,1,Bt),!x))return null;let b=null;if(g.currency&&(b=s.parse(g.currency,1,Bt),!b))return null;let C=null;if(g["min-fraction-digits"]&&(C=s.parse(g["min-fraction-digits"],1,xt),!C))return null;let I=null;return g["max-fraction-digits"]&&(I=s.parse(g["max-fraction-digits"],1,xt),!I)?null:new Dp(f,x,b,C,I)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Ih{constructor(a){this.type=vn,this.sections=a}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");const f=a[1];if(!Array.isArray(f)&&typeof f=="object")return s.error("First argument must be an image or text section.");const g=[];let x=!1;for(let b=1;b<=a.length-1;++b){const C=a[b];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let I=null;if(C["font-scale"]&&(I=s.parse(C["font-scale"],1,xt),!I))return null;let j=null;if(C["text-font"]&&(j=s.parse(C["text-font"],1,Oi(Bt)),!j))return null;let V=null;if(C["text-color"]&&(V=s.parse(C["text-color"],1,dr),!V))return null;let G=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Rl.includes(C["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(G=s.parse(C["vertical-align"],1,Bt),!G)return null}const Z=g[g.length-1];Z.scale=I,Z.font=j,Z.textColor=V,Z.verticalAlign=G}else{const I=s.parse(a[b],1,mr);if(!I)return null;const j=I.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:I,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ih(g)}evaluate(a){return new Qi(this.sections.map((s=>{const f=s.content.evaluate(a);return Hn(f)===La?new Ms("",f,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(a):null):new Ms(Jo(f),null,s.scale?s.scale.evaluate(a):null,s.font?s.font.evaluate(a).join(","):null,s.textColor?s.textColor.evaluate(a):null,s.verticalAlign?s.verticalAlign.evaluate(a):null)})))}eachChild(a){for(const s of this.sections)a(s.content),s.scale&&a(s.scale),s.font&&a(s.font),s.textColor&&a(s.textColor),s.verticalAlign&&a(s.verticalAlign)}outputDefined(){return!1}}class Fl{constructor(a){this.type=La,this.input=a}static parse(a,s){if(a.length!==2)return s.error("Expected two arguments.");const f=s.parse(a[1],1,Bt);return f?new Fl(f):s.error("No image name provided.")}evaluate(a){const s=this.input.evaluate(a),f=eo.fromString(s);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(s)>-1),f}eachChild(a){a(this.input)}outputDefined(){return!1}}class jc{constructor(a){this.type=xt,this.input=a}static parse(a,s){if(a.length!==2)return s.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=s.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Qr(f.type)} instead.`):new jc(f):null}evaluate(a){const s=this.input.evaluate(a);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new In(`Expected value to be of type string or array, but found ${Qr(Hn(s))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Di=8192;function hg(l,a){const s=(180+l[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,a.z);return[Math.round(s*g*Di),Math.round(f*g*Di)]}function Ou(l,a){const s=Math.pow(2,a.z);return[(g=(l[0]/Di+a.x)/s,360*g-180),(f=(l[1]/Di+a.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,g}function Oh(l,a){l[0]=Math.min(l[0],a[0]),l[1]=Math.min(l[1],a[1]),l[2]=Math.max(l[2],a[0]),l[3]=Math.max(l[3],a[1])}function Lu(l,a){return!(l[0]<=a[0]||l[2]>=a[2]||l[1]<=a[1]||l[3]>=a[3])}function tv(l,a,s){const f=l[0]-a[0],g=l[1]-a[1],x=l[0]-s[0],b=l[1]-s[1];return f*b-x*g==0&&f*x<=0&&g*b<=0}function Zd(l,a,s,f){return(g=[f[0]-s[0],f[1]-s[1]])[0]*(x=[a[0]-l[0],a[1]-l[1]])[1]-g[1]*x[0]!=0&&!(!Rp(l,a,s,f)||!Rp(s,f,l,a));var g,x}function rv(l,a,s){for(const f of s)for(let g=0;g<f.length-1;++g)if(Zd(l,a,f[g],f[g+1]))return!0;return!1}function zc(l,a,s=!1){let f=!1;for(const C of a)for(let I=0;I<C.length-1;I++){if(tv(l,C[I],C[I+1]))return s;(x=C[I])[1]>(g=l)[1]!=(b=C[I+1])[1]>g[1]&&g[0]<(b[0]-x[0])*(g[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var g,x,b;return f}function Kd(l,a){for(const s of a)if(zc(l,s))return!0;return!1}function Xd(l,a){for(const s of l)if(!zc(s,a))return!1;for(let s=0;s<l.length-1;++s)if(rv(l[s],l[s+1],a))return!1;return!0}function Nc(l,a){for(const s of a)if(Xd(l,s))return!0;return!1}function Rp(l,a,s,f){const g=f[0]-s[0],x=f[1]-s[1],b=(l[0]-s[0])*x-g*(l[1]-s[1]),C=(a[0]-s[0])*x-g*(a[1]-s[1]);return b>0&&C<0||b<0&&C>0}function Yd(l,a,s){const f=[];for(let g=0;g<l.length;g++){const x=[];for(let b=0;b<l[g].length;b++){const C=hg(l[g][b],s);Oh(a,C),x.push(C)}f.push(x)}return f}function Qd(l,a,s){const f=[];for(let g=0;g<l.length;g++){const x=Yd(l[g],a,s);f.push(x)}return f}function jp(l,a,s,f){if(l[0]<s[0]||l[0]>s[2]){const g=.5*f;let x=l[0]-s[0]>g?-f:s[0]-l[0]>g?f:0;x===0&&(x=l[0]-s[2]>g?-f:s[2]-l[0]>g?f:0),l[0]+=x}Oh(a,l)}function zp(l,a,s,f){const g=Math.pow(2,f.z)*Di,x=[f.x*Di,f.y*Di],b=[];for(const C of l)for(const I of C){const j=[I.x+x[0],I.y+x[1]];jp(j,a,s,g),b.push(j)}return b}function Np(l,a,s,f){const g=Math.pow(2,f.z)*Di,x=[f.x*Di,f.y*Di],b=[];for(const I of l){const j=[];for(const V of I){const G=[V.x+x[0],V.y+x[1]];Oh(a,G),j.push(G)}b.push(j)}if(a[2]-a[0]<=g/2){(C=a)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of b)for(const j of I)jp(j,a,s,g)}var C;return b}class Do{constructor(a,s){this.type=Zt,this.geojson=a,this.geometries=s}static parse(a,s){if(a.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(jl(a[1])){const f=a[1];if(f.type==="FeatureCollection"){const g=[];for(const x of f.features){const{type:b,coordinates:C}=x.geometry;b==="Polygon"&&g.push(C),b==="MultiPolygon"&&g.push(...C)}if(g.length)return new Do(f,{type:"MultiPolygon",coordinates:g})}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Do(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Do(f,f)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(s,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(f.type==="Polygon"){const C=Yd(f.coordinates,x,b),I=zp(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!zc(j,C))return!1}if(f.type==="MultiPolygon"){const C=Qd(f.coordinates,x,b),I=zp(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Kd(j,C))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(s,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=s.canonicalID();if(f.type==="Polygon"){const C=Yd(f.coordinates,x,b),I=Np(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Xd(j,C))return!1}if(f.type==="MultiPolygon"){const C=Qd(f.coordinates,x,b),I=Np(s.geometry(),g,x,b);if(!Lu(g,x))return!1;for(const j of I)if(!Nc(j,C))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let dg=class{constructor(l=[],a=(s,f)=>s<f?-1:s>f?1:0){if(this.data=l,this.length=this.data.length,this.compare=a,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:a,compare:s}=this,f=a[l];for(;l>0;){const g=l-1>>1,x=a[g];if(s(f,x)>=0)break;a[l]=x,l=g}a[l]=f}_down(l){const{data:a,compare:s}=this,f=this.length>>1,g=a[l];for(;l<f;){let x=1+(l<<1);const b=x+1;if(b<this.length&&s(a[b],a[x])<0&&(x=b),s(a[x],g)>=0)break;a[l]=a[x],l=x}a[l]=g}};function Fp(l,a,s=0,f=l.length-1,g=Bp){for(;f>s;){if(f-s>600){const I=f-s+1,j=a-s+1,V=Math.log(I),G=.5*Math.exp(2*V/3),Z=.5*Math.sqrt(V*G*(I-G)/I)*(j-I/2<0?-1:1);Fp(l,a,Math.max(s,Math.floor(a-j*G/I+Z)),Math.min(f,Math.floor(a+(I-j)*G/I+Z)),g)}const x=l[a];let b=s,C=f;for(Fc(l,s,a),g(l[f],x)>0&&Fc(l,s,f);b<C;){for(Fc(l,b,C),b++,C--;g(l[b],x)<0;)b++;for(;g(l[C],x)>0;)C--}g(l[s],x)===0?Fc(l,s,C):(C++,Fc(l,C,f)),C<=a&&(s=C+1),a<=C&&(f=C-1)}}function Fc(l,a,s){const f=l[a];l[a]=l[s],l[s]=f}function Bp(l,a){return l<a?-1:l>a?1:0}function Lh(l,a){if(l.length<=1)return[l];const s=[];let f,g;for(const x of l){const b=Rh(x);b!==0&&(x.area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(f&&s.push(f),f=[x]):f.push(x))}if(f&&s.push(f),a>1)for(let x=0;x<s.length;x++)s[x].length<=a||(Fp(s[x],a,1,s[x].length-1,Dh),s[x]=s[x].slice(0,a));return s}function Dh(l,a){return a.area-l.area}function Rh(l){let a=0;for(let s,f,g=0,x=l.length,b=x-1;g<x;b=g++)s=l[g],f=l[b],a+=(f.x-s.x)*(s.y+f.y);return a}const fg=1/298.257223563,Bl=fg*(2-fg),pg=Math.PI/180;class Jd{constructor(a){const s=6378.137*pg*1e3,f=Math.cos(a*pg),g=1/(1-Bl*(1-f*f)),x=Math.sqrt(g);this.kx=s*x*f,this.ky=s*x*g*(1-Bl)}distance(a,s){const f=this.wrap(a[0]-s[0])*this.kx,g=(a[1]-s[1])*this.ky;return Math.sqrt(f*f+g*g)}pointOnLine(a,s){let f,g,x,b,C=1/0;for(let I=0;I<a.length-1;I++){let j=a[I][0],V=a[I][1],G=this.wrap(a[I+1][0]-j)*this.kx,Z=(a[I+1][1]-V)*this.ky,X=0;G===0&&Z===0||(X=(this.wrap(s[0]-j)*this.kx*G+(s[1]-V)*this.ky*Z)/(G*G+Z*Z),X>1?(j=a[I+1][0],V=a[I+1][1]):X>0&&(j+=G/this.kx*X,V+=Z/this.ky*X)),G=this.wrap(s[0]-j)*this.kx,Z=(s[1]-V)*this.ky;const ee=G*G+Z*Z;ee<C&&(C=ee,f=j,g=V,x=I,b=X)}return{point:[f,g],index:x,t:Math.max(0,Math.min(1,b))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function ef(l,a){return a[0]-l[0]}function Bc(l){return l[1]-l[0]+1}function Ro(l,a){return l[1]>=l[0]&&l[1]<a}function jh(l,a){if(l[0]>l[1])return[null,null];const s=Bc(l);if(a){if(s===2)return[l,null];const g=Math.floor(s/2);return[[l[0],l[0]+g],[l[0]+g,l[1]]]}if(s===1)return[l,null];const f=Math.floor(s/2)-1;return[[l[0],l[0]+f],[l[0]+f+1,l[1]]]}function tf(l,a){if(!Ro(a,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let f=a[0];f<=a[1];++f)Oh(s,l[f]);return s}function Vp(l){const a=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const f of s)Oh(a,f);return a}function $p(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function rf(l,a,s){if(!$p(l)||!$p(a))return NaN;let f=0,g=0;return l[2]<a[0]&&(f=a[0]-l[2]),l[0]>a[2]&&(f=l[0]-a[2]),l[1]>a[3]&&(g=l[1]-a[3]),l[3]<a[1]&&(g=a[1]-l[3]),s.distance([0,0],[f,g])}function Du(l,a,s){const f=s.pointOnLine(a,l);return s.distance(l,f.point)}function Up(l,a,s,f,g){const x=Math.min(Du(l,[s,f],g),Du(a,[s,f],g)),b=Math.min(Du(s,[l,a],g),Du(f,[l,a],g));return Math.min(x,b)}function ns(l,a,s,f,g){if(!Ro(a,l.length)||!Ro(f,s.length))return 1/0;let x=1/0;for(let b=a[0];b<a[1];++b){const C=l[b],I=l[b+1];for(let j=f[0];j<f[1];++j){const V=s[j],G=s[j+1];if(Zd(C,I,V,G))return 0;x=Math.min(x,Up(C,I,V,G,g))}}return x}function Vc(l,a,s,f,g){if(!Ro(a,l.length)||!Ro(f,s.length))return NaN;let x=1/0;for(let b=a[0];b<=a[1];++b)for(let C=f[0];C<=f[1];++C)if(x=Math.min(x,g.distance(l[b],s[C])),x===0)return x;return x}function mg(l,a,s){if(zc(l,a,!0))return 0;let f=1/0;for(const g of a){const x=g[0],b=g[g.length-1];if(x!==b&&(f=Math.min(f,Du(l,[b,x],s)),f===0))return f;const C=s.pointOnLine(g,l);if(f=Math.min(f,s.distance(l,C.point)),f===0)return f}return f}function gg(l,a,s,f){if(!Ro(a,l.length))return NaN;for(let x=a[0];x<=a[1];++x)if(zc(l[x],s,!0))return 0;let g=1/0;for(let x=a[0];x<a[1];++x){const b=l[x],C=l[x+1];for(const I of s)for(let j=0,V=I.length,G=V-1;j<V;G=j++){const Z=I[G],X=I[j];if(Zd(b,C,Z,X))return 0;g=Math.min(g,Up(b,C,Z,X,f))}}return g}function qp(l,a){for(const s of l)for(const f of s)if(zc(f,a,!0))return!0;return!1}function yg(l,a,s,f=1/0){const g=Vp(l),x=Vp(a);if(f!==1/0&&rf(g,x,s)>=f)return f;if(Lu(g,x)){if(qp(l,a))return 0}else if(qp(a,l))return 0;let b=1/0;for(const C of l)for(let I=0,j=C.length,V=j-1;I<j;V=I++){const G=C[V],Z=C[I];for(const X of a)for(let ee=0,ne=X.length,se=ne-1;ee<ne;se=ee++){const fe=X[se],Pe=X[ee];if(Zd(G,Z,fe,Pe))return 0;b=Math.min(b,Up(G,Z,fe,Pe,s))}}return b}function cn(l,a,s,f,g,x){if(!x)return;const b=rf(tf(f,x),g,s);b<a&&l.push([b,x,[0,0]])}function nf(l,a,s,f,g,x,b){if(!x||!b)return;const C=rf(tf(f,x),tf(g,b),s);C<a&&l.push([C,x,b])}function af(l,a,s,f,g=1/0){let x=Math.min(f.distance(l[0],s[0][0]),g);if(x===0)return x;const b=new dg([[0,[0,l.length-1],[0,0]]],ef),C=Vp(s);for(;b.length>0;){const I=b.pop();if(I[0]>=x)continue;const j=I[1],V=a?50:100;if(Bc(j)<=V){if(!Ro(j,l.length))return NaN;if(a){const G=gg(l,j,s,f);if(isNaN(G)||G===0)return G;x=Math.min(x,G)}else for(let G=j[0];G<=j[1];++G){const Z=mg(l[G],s,f);if(x=Math.min(x,Z),x===0)return 0}}else{const G=jh(j,a);cn(b,x,f,l,C,G[0]),cn(b,x,f,l,C,G[1])}}return x}function al(l,a,s,f,g,x=1/0){let b=Math.min(x,g.distance(l[0],s[0]));if(b===0)return b;const C=new dg([[0,[0,l.length-1],[0,s.length-1]]],ef);for(;C.length>0;){const I=C.pop();if(I[0]>=b)continue;const j=I[1],V=I[2],G=a?50:100,Z=f?50:100;if(Bc(j)<=G&&Bc(V)<=Z){if(!Ro(j,l.length)&&Ro(V,s.length))return NaN;let X;if(a&&f)X=ns(l,j,s,V,g),b=Math.min(b,X);else if(a&&!f){const ee=l.slice(j[0],j[1]+1);for(let ne=V[0];ne<=V[1];++ne)if(X=Du(s[ne],ee,g),b=Math.min(b,X),b===0)return b}else if(!a&&f){const ee=s.slice(V[0],V[1]+1);for(let ne=j[0];ne<=j[1];++ne)if(X=Du(l[ne],ee,g),b=Math.min(b,X),b===0)return b}else X=Vc(l,j,s,V,g),b=Math.min(b,X)}else{const X=jh(j,a),ee=jh(V,f);nf(C,b,g,l,s,X[0],ee[0]),nf(C,b,g,l,s,X[0],ee[1]),nf(C,b,g,l,s,X[1],ee[0]),nf(C,b,g,l,s,X[1],ee[1])}}return b}function zh(l){return l.type==="MultiPolygon"?l.coordinates.map((a=>({type:"Polygon",coordinates:a}))):l.type==="MultiLineString"?l.coordinates.map((a=>({type:"LineString",coordinates:a}))):l.type==="MultiPoint"?l.coordinates.map((a=>({type:"Point",coordinates:a}))):[l]}class is{constructor(a,s){this.type=xt,this.geojson=a,this.geometries=s}static parse(a,s){if(a.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(jl(a[1])){const f=a[1];if(f.type==="FeatureCollection")return new is(f,f.features.map((g=>zh(g.geometry))).flat());if(f.type==="Feature")return new is(f,zh(f.geometry));if("type"in f&&"coordinates"in f)return new is(f,zh(f))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(s,f){const g=s.geometry(),x=g.flat().map((I=>Ou([I.x,I.y],s.canonical)));if(g.length===0)return NaN;const b=new Jd(x[0][1]);let C=1/0;for(const I of f){switch(I.type){case"Point":C=Math.min(C,al(x,!1,[I.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,al(x,!1,I.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,af(x,!1,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries);if(a.geometryType()==="LineString")return(function(s,f){const g=s.geometry(),x=g.flat().map((I=>Ou([I.x,I.y],s.canonical)));if(g.length===0)return NaN;const b=new Jd(x[0][1]);let C=1/0;for(const I of f){switch(I.type){case"Point":C=Math.min(C,al(x,!0,[I.coordinates],!1,b,C));break;case"LineString":C=Math.min(C,al(x,!0,I.coordinates,!0,b,C));break;case"Polygon":C=Math.min(C,af(x,!0,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries);if(a.geometryType()==="Polygon")return(function(s,f){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const x=Lh(g,0).map((I=>I.map((j=>j.map((V=>Ou([V.x,V.y],s.canonical))))))),b=new Jd(x[0][0][0][1]);let C=1/0;for(const I of f)for(const j of x){switch(I.type){case"Point":C=Math.min(C,af([I.coordinates],!1,j,b,C));break;case"LineString":C=Math.min(C,af(I.coordinates,!0,j,b,C));break;case"Polygon":C=Math.min(C,yg(j,I.coordinates,b,C))}if(C===0)return C}return C})(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ru{constructor(a){this.type=mr,this.key=a}static parse(a,s){if(a.length!==2)return s.error(`Expected 1 argument, but found ${a.length-1} instead.`);const f=a[1];return f==null?s.error("Global state property must be defined."):typeof f!="string"?s.error(`Global state property must be string, but found ${typeof a[1]} instead.`):new Ru(f)}evaluate(a){var s;const f=(s=a.globals)===null||s===void 0?void 0:s.globalState;return f&&Object.keys(f).length!==0?mn(f,this.key):null}eachChild(){}outputDefined(){return!1}}const ju={"==":ug,"!=":Lp,">":ev,"<":cg,">=":Hd,"<=":Iu,array:to,at:Xr,boolean:to,case:Oc,coalesce:ku,collator:Rc,format:Ih,image:Fl,in:Vr,"index-of":il,interpolate:ea,"interpolate-hcl":ea,"interpolate-lab":ea,length:jc,let:un,literal:ja,match:Jr,number:to,"number-format":Dp,object:to,slice:hi,step:ks,string:to,"to-boolean":es,"to-color":es,"to-number":es,"to-string":es,var:Nl,within:Do,distance:is,"global-state":Ru};class za{constructor(a,s,f,g){this.name=a,this.type=s,this._evaluate=f,this.args=g}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,s){const f=a[0],g=za.definitions[f];if(!g)return s.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,b=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=b.filter((([j])=>!Array.isArray(j)||j.length===a.length-1));let I=null;for(const[j,V]of C){I=new zl(s.registry,Nh,s.path,null,s.scope);const G=[];let Z=!1;for(let X=1;X<a.length;X++){const ee=a[X],ne=Array.isArray(j)?j[X-1]:j.type,se=I.parse(ee,1+G.length,ne);if(!se){Z=!0;break}G.push(se)}if(!Z)if(Array.isArray(j)&&j.length!==G.length)I.error(`Expected ${j.length} arguments, but found ${G.length} instead.`);else{for(let X=0;X<G.length;X++){const ee=Array.isArray(j)?j[X]:j.type,ne=G[X];I.concat(X+1).checkSubtype(ee,ne.type)}if(I.errors.length===0)return new za(f,x,V,G)}}if(C.length===1)s.errors.push(...I.errors);else{const j=(C.length?C:b).map((([G])=>{return Z=G,Array.isArray(Z)?`(${Z.map(Qr).join(", ")})`:`(${Qr(Z.type)}...)`;var Z})).join(" | "),V=[];for(let G=1;G<a.length;G++){const Z=s.parse(a[G],1+V.length);if(!Z)return null;V.push(Qr(Z.type))}s.error(`Expected arguments of type ${j}, but found (${V.join(", ")}) instead.`)}return null}static register(a,s){za.definitions=s;for(const f in s)a[f]=za}}function zu(l,[a,s,f,g]){a=a.evaluate(l),s=s.evaluate(l),f=f.evaluate(l);const x=g?g.evaluate(l):1,b=Cu(a,s,f,x);if(b)throw new In(b);return new Br(a/255,s/255,f/255,x,!1)}function of(l,a){return l in a}function sf(l,a){const s=a[l];return s===void 0?null:s}function As(l){return{type:l}}function Nh(l){if(l instanceof Nl)return Nh(l.boundExpression);if(l instanceof za&&l.name==="error"||l instanceof Rc||l instanceof Do||l instanceof is||l instanceof Ru)return!1;const a=l instanceof es||l instanceof to;let s=!0;return l.eachChild((f=>{s=a?s&&Nh(f):s&&f instanceof ja})),!!s&&Fh(l)&&Bh(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Fh(l){if(l instanceof za&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Do||l instanceof is)return!1;let a=!0;return l.eachChild((s=>{a&&!Fh(s)&&(a=!1)})),a}function $c(l){if(l instanceof za&&l.name==="feature-state")return!1;let a=!0;return l.eachChild((s=>{a&&!$c(s)&&(a=!1)})),a}function Bh(l,a){if(l instanceof za&&a.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((f=>{s&&!Bh(f,a)&&(s=!1)})),s}function Gp(l){return{result:"success",value:l}}function Nu(l){return{result:"error",value:l}}function Po(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function lf(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Vh(l){return!!l.expression&&l.expression.interpolated}function Hr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function uf(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&Hn(l)===Yr}function $h(l){return l}function vg(l,a){const s=l.stops&&typeof l.stops[0][0]=="object",f=s||!(s||l.property!==void 0),g=l.type||(Vh(a)?"exponential":"interval"),x=(function(V){switch(V.type){case"color":return Br.parse;case"padding":return Li.parse;case"numberArray":return wn.parse;case"colorArray":return Lr.parse;default:return null}})(a);if(x&&((l=Gt({},l)).stops&&(l.stops=l.stops.map((V=>[V[0],x(V[1])]))),l.default=x(l.default?l.default:a.default)),l.colorSpace&&(b=l.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var b;const C=(function(V){switch(V){case"exponential":return cf;case"interval":return ai;case"categorical":return _g;case"identity":return hf;default:throw new Error(`Unknown function type "${V}"`)}})(g);let I,j;if(g==="categorical"){I=Object.create(null);for(const V of l.stops)I[V[0]]=V[1];j=typeof l.stops[0][0]}if(s){const V={},G=[];for(let ee=0;ee<l.stops.length;ee++){const ne=l.stops[ee],se=ne[0].zoom;V[se]===void 0&&(V[se]={zoom:se,type:l.type,property:l.property,default:l.default,stops:[]},G.push(se)),V[se].stops.push([ne[0].value,ne[1]])}const Z=[];for(const ee of G)Z.push([V[ee].zoom,vg(V[ee],a)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:ea.interpolationFactor.bind(void 0,X),zoomStops:Z.map((ee=>ee[0])),evaluate:({zoom:ee},ne)=>cf({stops:Z,base:l.base},a,ee).evaluate(ee,ne)}}if(f){const V=g==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:ea.interpolationFactor.bind(void 0,V),zoomStops:l.stops.map((G=>G[0])),evaluate:({zoom:G})=>C(l,a,G,I,j)}}return{kind:"source",evaluate(V,G){const Z=G&&G.properties?G.properties[l.property]:void 0;return Z===void 0?Uc(l.default,a.default):C(l,a,Z,I,j)}}}function Uc(l,a,s){return l!==void 0?l:a!==void 0?a:s!==void 0?s:void 0}function _g(l,a,s,f,g){return Uc(typeof s===g?f[s]:void 0,l.default,a.default)}function ai(l,a,s){if(Hr(s)!=="number")return Uc(l.default,a.default);const f=l.stops.length;if(f===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[f-1][0])return l.stops[f-1][1];const g=ts(l.stops.map((x=>x[0])),s);return l.stops[g][1]}function cf(l,a,s){const f=l.base!==void 0?l.base:1;if(Hr(s)!=="number")return Uc(l.default,a.default);const g=l.stops.length;if(g===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[g-1][0])return l.stops[g-1][1];const x=ts(l.stops.map((V=>V[0])),s),b=(function(V,G,Z,X){const ee=X-Z,ne=V-Z;return ee===0?0:G===1?ne/ee:(Math.pow(G,ne)-1)/(Math.pow(G,ee)-1)})(s,f,l.stops[x][0],l.stops[x+1][0]),C=l.stops[x][1],I=l.stops[x+1][1],j=ii[a.type]||$h;return typeof C.evaluate=="function"?{evaluate(...V){const G=C.evaluate.apply(void 0,V),Z=I.evaluate.apply(void 0,V);if(G!==void 0&&Z!==void 0)return j(G,Z,b,l.colorSpace)}}:j(C,I,b,l.colorSpace)}function hf(l,a,s){switch(a.type){case"color":s=Br.parse(s);break;case"formatted":s=Qi.fromString(s.toString());break;case"resolvedImage":s=eo.fromString(s.toString());break;case"padding":s=Li.parse(s);break;case"colorArray":s=Lr.parse(s);break;case"numberArray":s=wn.parse(s);break;default:Hr(s)===a.type||a.type==="enum"&&a.values[s]||(s=void 0)}return Uc(s,l.default,a.default)}za.register(ju,{error:[{kind:"error"},[Bt],(l,[a])=>{throw new In(a.evaluate(l))}],typeof:[Bt,[mr],(l,[a])=>Qr(Hn(a.evaluate(l)))],"to-rgba":[Oi(xt,4),[dr],(l,[a])=>{const[s,f,g,x]=a.evaluate(l).rgb;return[255*s,255*f,255*g,x]}],rgb:[dr,[xt,xt,xt],zu],rgba:[dr,[xt,xt,xt,xt],zu],has:{type:Zt,overloads:[[[Bt],(l,[a])=>of(a.evaluate(l),l.properties())],[[Bt,Yr],(l,[a,s])=>of(a.evaluate(l),s.evaluate(l))]]},get:{type:mr,overloads:[[[Bt],(l,[a])=>sf(a.evaluate(l),l.properties())],[[Bt,Yr],(l,[a,s])=>sf(a.evaluate(l),s.evaluate(l))]]},"feature-state":[mr,[Bt],(l,[a])=>sf(a.evaluate(l),l.featureState||{})],properties:[Yr,[],l=>l.properties()],"geometry-type":[Bt,[],l=>l.geometryType()],id:[mr,[],l=>l.id()],zoom:[xt,[],l=>l.globals.zoom],"heatmap-density":[xt,[],l=>l.globals.heatmapDensity||0],elevation:[xt,[],l=>l.globals.elevation||0],"line-progress":[xt,[],l=>l.globals.lineProgress||0],accumulated:[mr,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[xt,As(xt),(l,a)=>{let s=0;for(const f of a)s+=f.evaluate(l);return s}],"*":[xt,As(xt),(l,a)=>{let s=1;for(const f of a)s*=f.evaluate(l);return s}],"-":{type:xt,overloads:[[[xt,xt],(l,[a,s])=>a.evaluate(l)-s.evaluate(l)],[[xt],(l,[a])=>-a.evaluate(l)]]},"/":[xt,[xt,xt],(l,[a,s])=>a.evaluate(l)/s.evaluate(l)],"%":[xt,[xt,xt],(l,[a,s])=>a.evaluate(l)%s.evaluate(l)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(l,[a,s])=>Math.pow(a.evaluate(l),s.evaluate(l))],sqrt:[xt,[xt],(l,[a])=>Math.sqrt(a.evaluate(l))],log10:[xt,[xt],(l,[a])=>Math.log(a.evaluate(l))/Math.LN10],ln:[xt,[xt],(l,[a])=>Math.log(a.evaluate(l))],log2:[xt,[xt],(l,[a])=>Math.log(a.evaluate(l))/Math.LN2],sin:[xt,[xt],(l,[a])=>Math.sin(a.evaluate(l))],cos:[xt,[xt],(l,[a])=>Math.cos(a.evaluate(l))],tan:[xt,[xt],(l,[a])=>Math.tan(a.evaluate(l))],asin:[xt,[xt],(l,[a])=>Math.asin(a.evaluate(l))],acos:[xt,[xt],(l,[a])=>Math.acos(a.evaluate(l))],atan:[xt,[xt],(l,[a])=>Math.atan(a.evaluate(l))],min:[xt,As(xt),(l,a)=>Math.min(...a.map((s=>s.evaluate(l))))],max:[xt,As(xt),(l,a)=>Math.max(...a.map((s=>s.evaluate(l))))],abs:[xt,[xt],(l,[a])=>Math.abs(a.evaluate(l))],round:[xt,[xt],(l,[a])=>{const s=a.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[xt,[xt],(l,[a])=>Math.floor(a.evaluate(l))],ceil:[xt,[xt],(l,[a])=>Math.ceil(a.evaluate(l))],"filter-==":[Zt,[Bt,mr],(l,[a,s])=>l.properties()[a.value]===s.value],"filter-id-==":[Zt,[mr],(l,[a])=>l.id()===a.value],"filter-type-==":[Zt,[Bt],(l,[a])=>l.geometryType()===a.value],"filter-<":[Zt,[Bt,mr],(l,[a,s])=>{const f=l.properties()[a.value],g=s.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Zt,[mr],(l,[a])=>{const s=l.id(),f=a.value;return typeof s==typeof f&&s<f}],"filter->":[Zt,[Bt,mr],(l,[a,s])=>{const f=l.properties()[a.value],g=s.value;return typeof f==typeof g&&f>g}],"filter-id->":[Zt,[mr],(l,[a])=>{const s=l.id(),f=a.value;return typeof s==typeof f&&s>f}],"filter-<=":[Zt,[Bt,mr],(l,[a,s])=>{const f=l.properties()[a.value],g=s.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Zt,[mr],(l,[a])=>{const s=l.id(),f=a.value;return typeof s==typeof f&&s<=f}],"filter->=":[Zt,[Bt,mr],(l,[a,s])=>{const f=l.properties()[a.value],g=s.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Zt,[mr],(l,[a])=>{const s=l.id(),f=a.value;return typeof s==typeof f&&s>=f}],"filter-has":[Zt,[mr],(l,[a])=>a.value in l.properties()],"filter-has-id":[Zt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Zt,[Oi(Bt)],(l,[a])=>a.value.indexOf(l.geometryType())>=0],"filter-id-in":[Zt,[Oi(mr)],(l,[a])=>a.value.indexOf(l.id())>=0],"filter-in-small":[Zt,[Bt,Oi(mr)],(l,[a,s])=>s.value.indexOf(l.properties()[a.value])>=0],"filter-in-large":[Zt,[Bt,Oi(mr)],(l,[a,s])=>(function(f,g,x,b){for(;x<=b;){const C=x+b>>1;if(g[C]===f)return!0;g[C]>f?b=C-1:x=C+1}return!1})(l.properties()[a.value],s.value,0,s.value.length-1)],all:{type:Zt,overloads:[[[Zt,Zt],(l,[a,s])=>a.evaluate(l)&&s.evaluate(l)],[As(Zt),(l,a)=>{for(const s of a)if(!s.evaluate(l))return!1;return!0}]]},any:{type:Zt,overloads:[[[Zt,Zt],(l,[a,s])=>a.evaluate(l)||s.evaluate(l)],[As(Zt),(l,a)=>{for(const s of a)if(s.evaluate(l))return!0;return!1}]]},"!":[Zt,[Zt],(l,[a])=>!a.evaluate(l)],"is-supported-script":[Zt,[Bt],(l,[a])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(a.evaluate(l))}],upcase:[Bt,[Bt],(l,[a])=>a.evaluate(l).toUpperCase()],downcase:[Bt,[Bt],(l,[a])=>a.evaluate(l).toLowerCase()],concat:[Bt,As(mr),(l,a)=>a.map((s=>Jo(s.evaluate(l)))).join("")],"resolved-locale":[Bt,[ni],(l,[a])=>a.evaluate(l).resolvedLocale()]});class Fu{constructor(a,s,f){this.expression=a,this._warningHistory={},this._evaluator=new Mh,this._defaultValue=s?(function(g){if(g.type==="color"&&uf(g.default))return new Br(0,0,0,0);switch(g.type){case"color":return Br.parse(g.default)||null;case"padding":return Li.parse(g.default)||null;case"numberArray":return wn.parse(g.default)||null;case"colorArray":return Lr.parse(g.default)||null;case"variableAnchorOffsetCollection":return Ra.parse(g.default)||null;case"projectionDefinition":return Ji.parse(g.default)||null;default:return g.default===void 0?null:g.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=f}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._evaluator.globals=a,this._evaluator.feature=s,this._evaluator.featureState=f,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(a,s,f,g,x,b){this._globalState&&(a=ql(a,this._globalState)),this._evaluator.globals=a,this._evaluator.feature=s||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new In(`Expected value to be one of ${Object.keys(this._enumValues).map((I=>JSON.stringify(I))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Bu(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in ju}function Vu(l,a,s){const f=new zl(ju,Nh,[],a?(function(x){const b={color:dr,string:Bt,number:xt,enum:Bt,boolean:Zt,formatted:vn,padding:Tn,numberArray:bn,colorArray:Ja,projectionDefinition:Fr,resolvedImage:La,variableAnchorOffsetCollection:Yi};return x.type==="array"?Oi(b[x.value]||mr,x.length):b[x.type]})(a):void 0),g=f.parse(l,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Gp(new Fu(g,a,s)):Nu(f.errors)}class Vl{constructor(a,s,f){this.kind=a,this._styleExpression=s,this.isStateDependent=a!=="constant"&&!$c(s.expression),this.globalStateRefs=Ul(s.expression),this._globalState=f}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(a,s,f,g,x,b)}evaluate(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluate(a,s,f,g,x,b)}}class qc{constructor(a,s,f,g,x){this.kind=a,this.zoomStops=f,this._styleExpression=s,this.isStateDependent=a!=="camera"&&!$c(s.expression),this.globalStateRefs=Ul(s.expression),this.interpolationType=g,this._globalState=x}evaluateWithoutErrorHandling(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(a,s,f,g,x,b)}evaluate(a,s,f,g,x,b){return this._globalState&&(a=ql(a,this._globalState)),this._styleExpression.evaluate(a,s,f,g,x,b)}interpolationFactor(a,s,f){return this.interpolationType?ea.interpolationFactor(this.interpolationType,a,s,f):0}}function $l(l,a,s){const f=Vu(l,a,s);if(f.result==="error")return f;const g=f.value.expression,x=Fh(g);if(!x&&!Po(a))return Nu([new cr("","data expressions not supported")]);const b=Bh(g,["zoom"]);if(!b&&!lf(a))return Nu([new cr("","zoom expressions not supported")]);const C=df(g);return C||b?C instanceof cr?Nu([C]):C instanceof ea&&!Vh(a)?Nu([new cr("",'"interpolate" expressions cannot be used with this property')]):Gp(C?new qc(x?"camera":"composite",f.value,C.labels,C instanceof ea?C.interpolation:void 0,s):new Vl(x?"constant":"source",f.value,s)):Nu([new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Uh{constructor(a,s){this._parameters=a,this._specification=s,Gt(this,vg(this._parameters,this._specification))}static deserialize(a){return new Uh(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function df(l){let a=null;if(l instanceof un)a=df(l.result);else if(l instanceof ku){for(const s of l.args)if(a=df(s),a)break}else(l instanceof ks||l instanceof ea)&&l.input instanceof za&&l.input.name==="zoom"&&(a=l);return a instanceof cr||l.eachChild((s=>{const f=df(s);f instanceof cr?a=f:!a&&f?a=new cr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&f&&a!==f&&(a=new cr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}function Ul(l,a=new Set){return l instanceof Ru&&a.add(l.key),l.eachChild((s=>{Ul(s,a)})),a}function ql(l,a){const{zoom:s,heatmapDensity:f,elevation:g,lineProgress:x,isSupportedScript:b,accumulated:C}=l??{};return{zoom:s,heatmapDensity:f,elevation:g,lineProgress:x,isSupportedScript:b,accumulated:C,globalState:a}}function Gc(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const a of l.slice(1))if(!Gc(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const ff={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $u(l,a){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Gc(l)||(l=Uu(l));const s=Vu(l,ff,a);if(s.result==="error")throw new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,g,x)=>s.value.evaluate(f,g,{},x),needGeometry:pf(l),getGlobalStateRefs:()=>Ul(s.value.expression)}}function Wp(l,a){return l<a?-1:l>a?1:0}function pf(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let a=1;a<l.length;a++)if(pf(l[a]))return!0;return!1}function Uu(l){if(!l)return!0;const a=l[0];return l.length<=1?a!=="any":a==="=="?mf(l[1],l[2],"=="):a==="!="?qh(mf(l[1],l[2],"==")):a==="<"||a===">"||a==="<="||a===">="?mf(l[1],l[2],a):a==="any"?(s=l.slice(1),["any"].concat(s.map(Uu))):a==="all"?["all"].concat(l.slice(1).map(Uu)):a==="none"?["all"].concat(l.slice(1).map(Uu).map(qh)):a==="in"?Hp(l[1],l.slice(2)):a==="!in"?qh(Hp(l[1],l.slice(2))):a==="has"?xg(l[1]):a!=="!has"||qh(xg(l[1]));var s}function mf(l,a,s){switch(l){case"$type":return[`filter-type-${s}`,a];case"$id":return[`filter-id-${s}`,a];default:return[`filter-${s}`,l,a]}}function Hp(l,a){if(a.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((s=>typeof s!=typeof a[0]))?["filter-in-large",l,["literal",a.sort(Wp)]]:["filter-in-small",l,["literal",a]]}}function xg(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function qh(l){return["!",l]}function Wc(l){const a=typeof l;if(a==="number"||a==="boolean"||a==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let g="[";for(const x of l)g+=`${Wc(x)},`;return`${g}]`}const s=Object.keys(l).sort();let f="{";for(let g=0;g<s.length;g++)f+=`${JSON.stringify(s[g])}:${Wc(l[s[g]])},`;return`${f}}`}function ol(l){let a="";for(const s of sn)a+=`/${Wc(l[s])}`;return a}function Zp(l){const a=l.value;return a?[new We(l.key,a,"constants have been deprecated as of v8")]:[]}function Un(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function _a(l){if(Array.isArray(l))return l.map(_a);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const a={};for(const s in l)a[s]=_a(l[s]);return a}return Un(l)}function fa(l){const a=l.key,s=l.value,f=l.valueSpec||{},g=l.objectElementValidators||{},x=l.style,b=l.styleSpec,C=l.validateSpec;let I=[];const j=Hr(s);if(j!=="object")return[new We(a,s,`object expected, ${j} found`)];for(const V in s){const G=V.split(".")[0],Z=mn(f,G)||f["*"];let X;if(mn(g,G))X=g[G];else if(mn(f,G)){if(s[V]===void 0)continue;X=C}else if(g["*"])X=g["*"];else{if(!f["*"]){I.push(new We(a,s[V],`unknown property "${V}"`));continue}X=C}I=I.concat(X({key:(a&&`${a}.`)+V,value:s[V],valueSpec:Z,style:x,styleSpec:b,object:s,objectKey:V,validateSpec:C},s))}for(const V in f)g[V]||f[V].required&&f[V].default===void 0&&s[V]===void 0&&I.push(new We(a,s,`missing required property "${V}"`));return I}function jo(l){const a=l.value,s=l.valueSpec,f=l.style,g=l.styleSpec,x=l.key,b=l.arrayElementValidator||l.validateSpec;if(Hr(a)!=="array")return[new We(x,a,`array expected, ${Hr(a)} found`)];if(s.length&&a.length!==s.length)return[new We(x,a,`array length ${s.length} expected, length ${a.length} found`)];let C={type:s.value,values:s.values};g.$version<7&&(C.function=s.function),Hr(s.value)==="object"&&(C=s.value);let I=[];for(let j=0;j<a.length;j++)I=I.concat(b({array:a,arrayIndex:j,value:a[j],valueSpec:C,validateSpec:l.validateSpec,style:f,styleSpec:g,key:`${x}[${j}]`}));return I}function qu(l){const a=l.key,s=l.value,f=l.valueSpec;let g=Hr(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new We(a,s,`number expected, ${g} found`)]:"minimum"in f&&s<f.minimum?[new We(a,s,`${s} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&s>f.maximum?[new We(a,s,`${s} is greater than the maximum value ${f.maximum}`)]:[]}function gf(l){const a=l.valueSpec,s=Un(l.value.type);let f,g,x,b={};const C=s!=="categorical"&&l.value.property===void 0,I=!C,j=Hr(l.value.stops)==="array"&&Hr(l.value.stops[0])==="array"&&Hr(l.value.stops[0][0])==="object",V=fa({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(X){if(s==="identity")return[new We(X.key,X.value,'identity function may not have a "stops" property')];let ee=[];const ne=X.value;return ee=ee.concat(jo({key:X.key,value:ne,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:G})),Hr(ne)==="array"&&ne.length===0&&ee.push(new We(X.key,ne,"array must have at least one stop")),ee},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:a,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return s==="identity"&&C&&V.push(new We(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||V.push(new We(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!Vh(l.valueSpec)&&V.push(new We(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!Po(l.valueSpec)?V.push(new We(l.key,l.value,"property functions not supported")):C&&!lf(l.valueSpec)&&V.push(new We(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!j||l.value.property!==void 0||V.push(new We(l.key,l.value,'"property" property is required')),V;function G(X){let ee=[];const ne=X.value,se=X.key;if(Hr(ne)!=="array")return[new We(se,ne,`array expected, ${Hr(ne)} found`)];if(ne.length!==2)return[new We(se,ne,`array length 2 expected, length ${ne.length} found`)];if(j){if(Hr(ne[0])!=="object")return[new We(se,ne,`object expected, ${Hr(ne[0])} found`)];if(ne[0].zoom===void 0)return[new We(se,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new We(se,ne,"object stop key must have value")];if(x&&x>Un(ne[0].zoom))return[new We(se,ne[0].zoom,"stop zoom values must appear in ascending order")];Un(ne[0].zoom)!==x&&(x=Un(ne[0].zoom),g=void 0,b={}),ee=ee.concat(fa({key:`${se}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:qu,value:Z}}))}else ee=ee.concat(Z({key:`${se}[0]`,value:ne[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},ne));return Bu(_a(ne[1]))?ee.concat([new We(`${se}[1]`,ne[1],"expressions are not allowed in function stops.")]):ee.concat(X.validateSpec({key:`${se}[1]`,value:ne[1],valueSpec:a,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function Z(X,ee){const ne=Hr(X.value),se=Un(X.value),fe=X.value!==null?X.value:ee;if(f){if(ne!==f)return[new We(X.key,fe,`${ne} stop domain type must match previous stop domain type ${f}`)]}else f=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new We(X.key,fe,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&s!=="categorical"){let Pe=`number expected, ${ne} found`;return Po(a)&&s===void 0&&(Pe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(X.key,fe,Pe)]}return s!=="categorical"||ne!=="number"||isFinite(se)&&Math.floor(se)===se?s!=="categorical"&&ne==="number"&&g!==void 0&&se<g?[new We(X.key,fe,"stop domain values must appear in ascending order")]:(g=se,s==="categorical"&&se in b?[new We(X.key,fe,"stop domain values must be unique")]:(b[se]=!0,[])):[new We(X.key,fe,`integer expected, found ${se}`)]}}function Gl(l){const a=(l.expressionContext==="property"?$l:Vu)(_a(l.value),l.valueSpec);if(a.result==="error")return a.value.map((f=>new We(`${l.key}${f.key}`,l.value,f.message)));const s=a.value.expression||a.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new We(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!$c(s))return[new We(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!$c(s))return[new We(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Bh(s,["zoom","feature-state"]))return[new We(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Fh(s))return[new We(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function as(l){const a=l.key,s=l.value,f=Hr(s);return f!=="string"?[new We(a,s,`color expected, ${f} found`)]:Br.parse(String(s))?[]:[new We(a,s,`color expected, "${s}" found`)]}function os(l){const a=l.key,s=l.value,f=l.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Un(s))===-1&&g.push(new We(a,s,`expected one of [${f.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(f.values).indexOf(Un(s))===-1&&g.push(new We(a,s,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function ss(l){return Gc(_a(l.value))?Gl(Gt({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gh(l)}function Gh(l){const a=l.value,s=l.key;if(Hr(a)!=="array")return[new We(s,a,`array expected, ${Hr(a)} found`)];const f=l.styleSpec;let g,x=[];if(a.length<1)return[new We(s,a,"filter array must have at least 1 element")];switch(x=x.concat(os({key:`${s}[0]`,value:a[0],valueSpec:f.filter_operator,style:l.style,styleSpec:l.styleSpec})),Un(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Un(a[1])==="$type"&&x.push(new We(s,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&x.push(new We(s,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(g=Hr(a[1]),g!=="string"&&x.push(new We(`${s}[1]`,a[1],`string expected, ${g} found`)));for(let b=2;b<a.length;b++)g=Hr(a[b]),Un(a[1])==="$type"?x=x.concat(os({key:`${s}[${b}]`,value:a[b],valueSpec:f.geometry_type,style:l.style,styleSpec:l.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new We(`${s}[${b}]`,a[b],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let b=1;b<a.length;b++)x=x.concat(Gh({key:`${s}[${b}]`,value:a[b],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":g=Hr(a[1]),a.length!==2?x.push(new We(s,a,`filter array for "${a[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new We(`${s}[1]`,a[1],`string expected, ${g} found`))}return x}function yf(l,a){const s=l.key,f=l.validateSpec,g=l.style,x=l.styleSpec,b=l.value,C=l.objectKey,I=x[`${a}_${l.layerType}`];if(!I)return[];const j=C.match(/^(.*)-transition$/);if(a==="paint"&&j&&I[j[1]]&&I[j[1]].transition)return f({key:s,value:b,valueSpec:x.transition,style:g,styleSpec:x});const V=l.valueSpec||I[C];if(!V)return[new We(s,b,`unknown property "${C}"`)];let G;if(Hr(b)==="string"&&Po(V)&&!V.tokens&&(G=/^{([^}]+)}$/.exec(b)))return[new We(s,b,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const Z=[];return l.layerType==="symbol"&&C==="text-font"&&uf(_a(b))&&Un(b.type)==="identity"&&Z.push(new We(s,b,'"text-font" does not support identity functions')),Z.concat(f({key:l.key,value:b,valueSpec:V,style:g,styleSpec:x,expressionContext:"property",propertyType:a,propertyKey:C}))}function Gu(l){return yf(l,"paint")}function sl(l){return yf(l,"layout")}function Zn(l){let a=[];const s=l.value,f=l.key,g=l.style,x=l.styleSpec;if(Hr(s)!=="object")return[new We(f,s,`object expected, ${Hr(s)} found`)];s.type||s.ref||a.push(new We(f,s,'either "type" or "ref" is required'));let b=Un(s.type);const C=Un(s.ref);if(s.id){const I=Un(s.id);for(let j=0;j<l.arrayIndex;j++){const V=g.layers[j];Un(V.id)===I&&a.push(new We(f,s.id,`duplicate layer id "${s.id}", previously used at line ${V.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach((j=>{j in s&&a.push(new We(f,s[j],`"${j}" is prohibited for ref layers`))})),g.layers.forEach((j=>{Un(j.id)===C&&(I=j)})),I?I.ref?a.push(new We(f,s.ref,"ref cannot reference another ref layer")):b=Un(I.type):a.push(new We(f,s.ref,`ref layer "${C}" not found`))}else if(b!=="background")if(s.source){const I=g.sources&&g.sources[s.source],j=I&&Un(I.type);I?j==="vector"&&b==="raster"?a.push(new We(f,s.source,`layer "${s.id}" requires a raster source`)):j!=="raster-dem"&&b==="hillshade"||j!=="raster-dem"&&b==="color-relief"?a.push(new We(f,s.source,`layer "${s.id}" requires a raster-dem source`)):j==="raster"&&b!=="raster"?a.push(new We(f,s.source,`layer "${s.id}" requires a vector source`)):j!=="vector"||s["source-layer"]?j==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?a.push(new We(f,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!s.paint||!s.paint["line-gradient"]||j==="geojson"&&I.lineMetrics||a.push(new We(f,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new We(f,s,`layer "${s.id}" must specify a "source-layer"`)):a.push(new We(f,s.source,`source "${s.source}" not found`))}else a.push(new We(f,s,'missing required property "source"'));return a=a.concat(fa({key:f,value:s,valueSpec:x.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${f}.type`,value:s.type,valueSpec:x.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:ss,layout:I=>fa({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":j=>sl(Gt({layerType:b},j))}}),paint:I=>fa({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":j=>Gu(Gt({layerType:b},j))}})}})),a}function gn(l){const a=l.value,s=l.key,f=Hr(a);return f!=="string"?[new We(s,a,`string expected, ${f} found`)]:[]}const Is={promoteId:function({key:l,value:a}){if(Hr(a)==="string")return gn({key:l,value:a});{const s=[];for(const f in a)s.push(...gn({key:`${l}.${f}`,value:a[f]}));return s}}};function ta(l){const a=l.value,s=l.key,f=l.styleSpec,g=l.style,x=l.validateSpec;if(!a.type)return[new We(s,a,'"type" is required')];const b=Un(a.type);let C;switch(b){case"vector":case"raster":return C=fa({key:s,value:a,valueSpec:f[`source_${b.replace("-","_")}`],style:l.style,styleSpec:f,objectElementValidators:Is,validateSpec:x}),C;case"raster-dem":return C=(function(I){var j;const V=(j=I.sourceName)!==null&&j!==void 0?j:"",G=I.value,Z=I.styleSpec,X=Z.source_raster_dem,ee=I.style;let ne=[];const se=Hr(G);if(G===void 0)return ne;if(se!=="object")return ne.push(new We("source_raster_dem",G,`object expected, ${se} found`)),ne;const fe=Un(G.encoding)==="custom",Pe=["redFactor","greenFactor","blueFactor","baseShift"],me=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const ge in G)!fe&&Pe.includes(ge)?ne.push(new We(ge,G[ge],`In "${V}": "${ge}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):X[ge]?ne=ne.concat(I.validateSpec({key:ge,value:G[ge],valueSpec:X[ge],validateSpec:I.validateSpec,style:ee,styleSpec:Z})):ne.push(new We(ge,G[ge],`unknown property "${ge}"`));return ne})({sourceName:s,value:a,style:l.style,styleSpec:f,validateSpec:x}),C;case"geojson":if(C=fa({key:s,value:a,valueSpec:f.source_geojson,style:g,styleSpec:f,validateSpec:x,objectElementValidators:Is}),a.cluster)for(const I in a.clusterProperties){const[j,V]=a.clusterProperties[I],G=typeof j=="string"?[j,["accumulated"],["get",I]]:j;C.push(...Gl({key:`${s}.${I}.map`,value:V,expressionContext:"cluster-map"})),C.push(...Gl({key:`${s}.${I}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return C;case"video":return fa({key:s,value:a,valueSpec:f.source_video,style:g,validateSpec:x,styleSpec:f});case"image":return fa({key:s,value:a,valueSpec:f.source_image,style:g,validateSpec:x,styleSpec:f});case"canvas":return[new We(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return os({key:`${s}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ra(l){const a=l.value,s=l.styleSpec,f=s.light,g=l.style;let x=[];const b=Hr(a);if(a===void 0)return x;if(b!=="object")return x=x.concat([new We("light",a,`object expected, ${b} found`)]),x;for(const C in a){const I=C.match(/^(.*)-transition$/);x=x.concat(I&&f[I[1]]&&f[I[1]].transition?l.validateSpec({key:C,value:a[C],valueSpec:s.transition,validateSpec:l.validateSpec,style:g,styleSpec:s}):f[C]?l.validateSpec({key:C,value:a[C],valueSpec:f[C],validateSpec:l.validateSpec,style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)])}return x}function Wl(l){const a=l.value,s=l.styleSpec,f=s.sky,g=l.style,x=Hr(a);if(a===void 0)return[];if(x!=="object")return[new We("sky",a,`object expected, ${x} found`)];let b=[];for(const C in a)b=b.concat(f[C]?l.validateSpec({key:C,value:a[C],valueSpec:f[C],style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return b}function Hl(l){const a=l.value,s=l.styleSpec,f=s.terrain,g=l.style;let x=[];const b=Hr(a);if(a===void 0)return x;if(b!=="object")return x=x.concat([new We("terrain",a,`object expected, ${b} found`)]),x;for(const C in a)x=x.concat(f[C]?l.validateSpec({key:C,value:a[C],valueSpec:f[C],validateSpec:l.validateSpec,style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return x}function xa(l){let a=[];const s=l.value,f=l.key;if(Array.isArray(s)){const g=[],x=[];for(const b in s)s[b].id&&g.includes(s[b].id)&&a.push(new We(f,s,`all the sprites' ids must be unique, but ${s[b].id} is duplicated`)),g.push(s[b].id),s[b].url&&x.includes(s[b].url)&&a.push(new We(f,s,`all the sprites' URLs must be unique, but ${s[b].url} is duplicated`)),x.push(s[b].url),a=a.concat(fa({key:`${f}[${b}]`,value:s[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return a}return gn({key:f,value:s})}function Wh(l){return!!l&&l.constructor===Object}function vf(l){return Wh(l.value)?[]:[new We(l.key,l.value,`object expected, ${Hr(l.value)} found`)]}const _f={"*":()=>[],array:jo,boolean:function(l){const a=l.value,s=l.key,f=Hr(a);return f!=="boolean"?[new We(s,a,`boolean expected, ${f} found`)]:[]},number:qu,color:as,constants:Zp,enum:os,filter:ss,function:gf,layer:Zn,object:fa,source:ta,light:ra,sky:Wl,terrain:Hl,projection:function(l){const a=l.value,s=l.styleSpec,f=s.projection,g=l.style,x=Hr(a);if(a===void 0)return[];if(x!=="object")return[new We("projection",a,`object expected, ${x} found`)];let b=[];for(const C in a)b=b.concat(f[C]?l.validateSpec({key:C,value:a[C],valueSpec:f[C],style:g,styleSpec:s}):[new We(C,a[C],`unknown property "${C}"`)]);return b},projectionDefinition:function(l){const a=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const f=Hr(s);return f!=="array"||(function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"})(s)||(function(g){return!!["interpolate","step","literal"].includes(g[0])})(s)?["array","string"].includes(f)?[]:[new We(a,s,`projection expected, invalid type "${f}" found`)]:[new We(a,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:gn,formatted:function(l){return gn(l).length===0?[]:Gl(l)},resolvedImage:function(l){return gn(l).length===0?[]:Gl(l)},padding:function(l){const a=l.key,s=l.value;if(Hr(s)==="array"){if(s.length<1||s.length>4)return[new We(a,s,`padding requires 1 to 4 values; ${s.length} values found`)];const f={type:"number"};let g=[];for(let x=0;x<s.length;x++)g=g.concat(l.validateSpec({key:`${a}[${x}]`,value:s[x],validateSpec:l.validateSpec,valueSpec:f}));return g}return qu({key:a,value:s,valueSpec:{}})},numberArray:function(l){const a=l.key,s=l.value;if(Hr(s)==="array"){const f={type:"number"};if(s.length<1)return[new We(a,s,"array length at least 1 expected, length 0 found")];let g=[];for(let x=0;x<s.length;x++)g=g.concat(l.validateSpec({key:`${a}[${x}]`,value:s[x],validateSpec:l.validateSpec,valueSpec:f}));return g}return qu({key:a,value:s,valueSpec:{}})},colorArray:function(l){const a=l.key,s=l.value;if(Hr(s)==="array"){if(s.length<1)return[new We(a,s,"array length at least 1 expected, length 0 found")];let f=[];for(let g=0;g<s.length;g++)f=f.concat(as({key:`${a}[${g}]`,value:s[g]}));return f}return as({key:a,value:s})},variableAnchorOffsetCollection:function(l){const a=l.key,s=l.value,f=Hr(s),g=l.styleSpec;if(f!=="array"||s.length<1||s.length%2!=0)return[new We(a,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<s.length;b+=2)x=x.concat(os({key:`${a}[${b}]`,value:s[b],valueSpec:g.layout_symbol["text-anchor"]})),x=x.concat(jo({key:`${a}[${b+1}]`,value:s[b+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:g}));return x},sprite:xa,state:vf,fontFaces:function(l){const a=l.key,s=l.value,f=l.validateSpec,g=l.styleSpec,x=l.style;if(!Wh(s))return[new We(a,s,`object expected, ${Hr(s)} found`)];const b=[];for(const C in s){const I=s[C],j=Hr(I);if(j==="string")b.push(...gn({key:`${a}.${C}`,value:I}));else if(j==="array"){const V={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[G,Z]of I.entries())b.push(...fa({key:`${a}.${C}[${G}]`,value:Z,valueSpec:V,styleSpec:g,style:x,validateSpec:f}))}else b.push(new We(`${a}.${C}`,I,`string or array expected, ${j} found`))}return b}};function ls(l){const a=l.value,s=l.valueSpec,f=l.styleSpec;return l.validateSpec=ls,s.expression&&uf(Un(a))?gf(l):s.expression&&Bu(_a(a))?Gl(l):s.type&&_f[s.type]?_f[s.type](l):fa(Gt({},l,{valueSpec:s.type?f[s.type]:s}))}function Kp(l){const a=l.value,s=l.key,f=gn(l);return f.length||(a.indexOf("{fontstack}")===-1&&f.push(new We(s,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&f.push(new We(s,a,'"glyphs" url must include a "{range}" token'))),f}function Ri(l,a=tt){let s=[];return s=s.concat(ls({key:"",value:l,valueSpec:a.$root,styleSpec:a,style:l,validateSpec:ls,objectElementValidators:{glyphs:Kp,"*":()=>[]}})),l.constants&&(s=s.concat(Zp({key:"constants",value:l.constants}))),xf(s)}function ro(l){return function(a){return l(Object.assign({},a,{validateSpec:ls}))}}function xf(l){return[].concat(l).sort(((a,s)=>a.line-s.line))}function zo(l){return function(...a){return xf(l.apply(this,a))}}Ri.source=zo(ro(ta)),Ri.sprite=zo(ro(xa)),Ri.glyphs=zo(ro(Kp)),Ri.light=zo(ro(ra)),Ri.sky=zo(ro(Wl)),Ri.terrain=zo(ro(Hl)),Ri.state=zo(ro(vf)),Ri.layer=zo(ro(Zn)),Ri.filter=zo(ro(ss)),Ri.paintProperty=zo(ro(Gu)),Ri.layoutProperty=zo(ro(sl));const nv={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class No{constructor(a,s){this._globalState=s,this.setValue(a)}evaluate(){var a;return(a=this._literalValue)!==null&&a!==void 0?a:this._compiledValue.evaluate({})}setValue(a){if(a==null||a==="visible"||a==="none")return this._literalValue=a==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const s=Vu(a,nv,this._globalState);if(s.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(s.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=s.value,this._globalStateRefs=Ul(s.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Os=tt,mi=Ri,Zl=mi.light,Hh=mi.sky,Fo=mi.paintProperty,Bo=mi.layoutProperty;function Vo(l,a){let s=!1;if(a&&a.length)for(const f of a)l.fire(new Kr(new Error(f.message))),s=!0;return s}class no{constructor(a,s,f){const g=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const b=new Int32Array(this.arrayBuffer);a=b[0],this.d=(s=b[1])+2*(f=b[2]);for(let I=0;I<this.d*this.d;I++){const j=b[3+I],V=b[3+I+1];g.push(j===V?null:b.subarray(j,V))}const C=b[3+g.length+1];this.keys=b.subarray(b[3+g.length],C),this.bboxes=b.subarray(C),this.insert=this._insertReadonly}else{this.d=s+2*f;for(let b=0;b<this.d*this.d;b++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=a,this.padding=f,this.scale=s/a,this.uid=0;const x=f/s*a;this.min=-x,this.max=a+x}insert(a,s,f,g,x){this._forEachCell(s,f,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,s,f,g,x,b){this.cells[x].push(b)}query(a,s,f,g,x){const b=this.min,C=this.max;if(a<=b&&s<=b&&C<=f&&C<=g&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(a,s,f,g,this._queryCell,I,{},x),I}}_queryCell(a,s,f,g,x,b,C,I){const j=this.cells[x];if(j!==null){const V=this.keys,G=this.bboxes;for(let Z=0;Z<j.length;Z++){const X=j[Z];if(C[X]===void 0){const ee=4*X;(I?I(G[ee+0],G[ee+1],G[ee+2],G[ee+3]):a<=G[ee+2]&&s<=G[ee+3]&&f>=G[ee+0]&&g>=G[ee+1])?(C[X]=!0,b.push(V[X])):C[X]=!1}}}}_forEachCell(a,s,f,g,x,b,C,I){const j=this._convertToCellCoord(a),V=this._convertToCellCoord(s),G=this._convertToCellCoord(f),Z=this._convertToCellCoord(g);for(let X=j;X<=G;X++)for(let ee=V;ee<=Z;ee++){const ne=this.d*ee+X;if((!I||I(this._convertFromCellCoord(X),this._convertFromCellCoord(ee),this._convertFromCellCoord(X+1),this._convertFromCellCoord(ee+1)))&&x.call(this,a,s,f,g,ne,b,C,I))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,s=3+this.cells.length+1+1;let f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;const g=new Int32Array(s+f+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=s;for(let b=0;b<a.length;b++){const C=a[b];g[3+b]=x,g.set(C,x),x+=C.length}return g[3+a.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+a.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(a,s){const f=a.toArrayBuffer();return s&&s.push(f),{buffer:f}}static deserialize(a){return new no(a.buffer)}}const Ui={};function Jt(l,a,s={}){if(Ui[l])throw new Error(`${l} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:l,writeable:!1}),Ui[l]={klass:a,omit:s.omit||[],shallow:s.shallow||[]}}Jt("Object",Object),Jt("Set",Set),Jt("TransferableGridIndex",no),Jt("Color",Br),Jt("Error",Error),Jt("AJAXError",Ve),Jt("ResolvedImage",eo),Jt("StylePropertyFunction",Uh),Jt("StyleExpression",Fu,{omit:["_evaluator"]}),Jt("ZoomDependentExpression",qc),Jt("ZoomConstantExpression",Vl),Jt("CompoundExpression",za,{omit:["_evaluate"]});for(const l in ju)ju[l]._classRegistryKey||Jt(`Expression_${l}`,ju[l]);function Zh(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Kh(l){return l.$name||l.constructor._classRegistryKey}function Kl(l){return!(function(a){if(a===null||typeof a!="object")return!1;const s=Kh(a);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Zh(l)||Xi(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function pa(l,a){if(Kl(l))return(Zh(l)||Xi(l))&&a&&a.push(l),ArrayBuffer.isView(l)&&a&&a.push(l.buffer),l instanceof ImageData&&a&&a.push(l.data.buffer),l;if(Array.isArray(l)){const x=[];for(const b of l)x.push(pa(b,a));return x}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=Kh(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ui[s])throw new Error(`${s} is not registered.`);const{klass:f}=Ui[s],g=f.serialize?f.serialize(l,a):{};if(f.serialize){if(a&&g===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in l){if(!l.hasOwnProperty(x)||Ui[s].omit.indexOf(x)>=0)continue;const b=l[x];g[x]=Ui[s].shallow.indexOf(x)>=0?b:pa(b,a)}l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function ma(l){if(Kl(l))return l;if(Array.isArray(l))return l.map(ma);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const a=Kh(l)||"Object";if(!Ui[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:s}=Ui[a];if(!s)throw new Error(`can't deserialize unregistered class ${a}`);if(s.deserialize)return s.deserialize(l);const f=Object.create(s.prototype);for(const g of Object.keys(l)){if(g==="$name")continue;const x=l[g];f[g]=Ui[a].shallow.indexOf(g)>=0?x:ma(x)}return f}class Kn{constructor(){this.first=!0}update(a,s){const f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=s),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))}}function Na(l){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function bf(l){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function Xp(l){return/\s/u.test(String.fromCodePoint(l))}function Xl(l){for(const a of l)if(bf(a.codePointAt(0)))return!0;return!1}function Yp(l){for(const a of l)if(!Qp(a.codePointAt(0)))return!1;return!0}function Xh(l){const a=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(a.join("|"),"u")}const Wu=Xh(["Arab","Dupl","Mong","Ougr","Syrc"]);function Qp(l){return!Wu.test(String.fromCodePoint(l))}function Yl(l){return!(bf(l)||(a=l,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(a))));var a}const wf=Xh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Jp(l){return wf.test(String.fromCodePoint(l))}function Hu(l,a){return!(!a&&Jp(l)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(l)))}function Yh(l){for(const a of l)if(Jp(a.codePointAt(0)))return!0;return!1}const ll=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(ll.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,a){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));a(s);const g=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,g]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:s};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Mn{constructor(a,s){this.isSupportedScript=Hc,this.zoom=a,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Kn,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kn,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,s=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*s}}}function Hc(l){return(function(a,s){for(const f of a)if(!Hu(f.codePointAt(0),s))return!1;return!0})(l,ll.getRTLTextPluginStatus()==="loaded")}const Zc="-transition";class Zu{constructor(a,s,f){this.property=a,this.value=s,this.expression=(function(g,x,b){if(uf(g))return new Uh(g,x);if(Bu(g)){const C=$l(g,x,b);if(C.result==="error")throw new Error(C.value.map((I=>`${I.key}: ${I.message}`)).join(", "));return C.value}{let C=g;return x.type==="color"&&typeof g=="string"?C=Br.parse(g):x.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?x.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?x.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?C=Ra.parse(g):x.type==="projectionDefinition"&&typeof g=="string"&&(C=Ji.parse(g)):C=Lr.parse(g):C=wn.parse(g):C=Li.parse(g),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(s===void 0?a.specification.default:s,a.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(a,s,f){return this.property.possiblyEvaluate(this,a,s,f)}}class Ku{constructor(a,s){this.property=a,this.value=new Zu(a,void 0,s)}transitioned(a,s){return new Sf(this.property,this.value,s,$t({},a.transition,this.transition),a.now)}untransitioned(){return new Sf(this.property,this.value,null,{},0)}}class Ql{constructor(a,s){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._globalState=s}getValue(a){return St(this._values[a].value.value)}setValue(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Ku(this._values[a].property,this._globalState)),this._values[a].value=new Zu(this._values[a].property,s===null?void 0:St(s),this._globalState)}getTransition(a){return St(this._values[a].transition)}setTransition(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Ku(this._values[a].property,this._globalState)),this._values[a].transition=St(s)||void 0}serialize(){const a={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(a[s]=f);const g=this.getTransition(s);g!==void 0&&(a[`${s}${Zc}`]=g)}return a}transitioned(a,s){const f=new Pf(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(a,s._values[g]);return f}untransitioned(){const a=new Pf(this._properties);for(const s of Object.keys(this._values))a._values[s]=this._values[s].untransitioned();return a}}class Sf{constructor(a,s,f,g,x){this.property=a,this.value=s,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,a.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(a,s,f){const g=a.now||0,x=this.value.possiblyEvaluate(a,s,f),b=this.prior;if(b){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return b.possiblyEvaluate(a,s,f);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(a,s,f),x,Mt(C))}}return x}}class Pf{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,s,f){const g=new Ls(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(a,s,f);return g}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Ef{constructor(a,s){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._globalState=s}hasValue(a){return this._values[a].value!==void 0}getValue(a){return St(this._values[a].value)}setValue(a,s){this._values[a]=new Zu(this._values[a].property,s===null?void 0:St(s),this._globalState)}serialize(){const a={};for(const s of Object.keys(this._values)){const f=this.getValue(s);f!==void 0&&(a[s]=f)}return a}possiblyEvaluate(a,s,f){const g=new Ls(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(a,s,f);return g}}class Eo{constructor(a,s,f){this.property=a,this.value=s,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,s,f,g){return this.property.evaluate(this.value,this.parameters,a,s,f,g)}}class Ls{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class ar{constructor(a){this.specification=a}possiblyEvaluate(a,s){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(s)}interpolate(a,s,f){const g=ii[this.specification.type];return g?g(a,s,f):a}}class gr{constructor(a,s){this.specification=a,this.overrides=s}possiblyEvaluate(a,s,f,g){return new Eo(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(s,null,{},f,g)}:a.expression,s)}interpolate(a,s,f){if(a.value.kind!=="constant"||s.value.kind!=="constant")return a;if(a.value.value===void 0||s.value.value===void 0)return new Eo(this,{kind:"constant",value:void 0},a.parameters);const g=ii[this.specification.type];if(g){const x=g(a.value.value,s.value.value,f);return new Eo(this,{kind:"constant",value:x},a.parameters)}return a}evaluate(a,s,f,g,x,b){return a.kind==="constant"?a.value:a.evaluate(s,f,g,x,b)}}class Xu extends gr{possiblyEvaluate(a,s,f,g){if(a.value===void 0)return new Eo(this,{kind:"constant",value:void 0},s);if(a.expression.kind==="constant"){const x=a.expression.evaluate(s,null,{},f,g),b=a.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(b,b,b,s);return new Eo(this,{kind:"constant",value:C},s)}if(a.expression.kind==="camera"){const x=this._calculate(a.expression.evaluate({zoom:s.zoom-1}),a.expression.evaluate({zoom:s.zoom}),a.expression.evaluate({zoom:s.zoom+1}),s);return new Eo(this,{kind:"constant",value:x},s)}return new Eo(this,a.expression,s)}evaluate(a,s,f,g,x,b){if(a.kind==="source"){const C=a.evaluate(s,f,g,x,b);return this._calculate(C,C,C,s)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(s.zoom)-1},f,g),a.evaluate({zoom:Math.floor(s.zoom)},f,g),a.evaluate({zoom:Math.floor(s.zoom)+1},f,g),s):a.value}_calculate(a,s,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:f,to:s}}interpolate(a){return a}}class Qh{constructor(a){this.specification=a}possiblyEvaluate(a,s,f,g){if(a.value!==void 0){if(a.expression.kind==="constant"){const x=a.expression.evaluate(s,null,{},f,g);return this._calculate(x,x,x,s)}return this._calculate(a.expression.evaluate(new Mn(Math.floor(s.zoom-1),s)),a.expression.evaluate(new Mn(Math.floor(s.zoom),s)),a.expression.evaluate(new Mn(Math.floor(s.zoom+1),s)),s)}}_calculate(a,s,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:f,to:s}}interpolate(a){return a}}class $o{constructor(a){this.specification=a}possiblyEvaluate(a,s,f,g){return!!a.expression.evaluate(s,null,{},f,g)}interpolate(){return!1}}class xi{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in a){const f=a[s];f.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Zu(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[s]=new Ku(f,void 0);this.defaultTransitioningPropertyValues[s]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Jt("DataDrivenProperty",gr),Jt("DataConstantProperty",ar),Jt("CrossFadedDataDrivenProperty",Xu),Jt("CrossFadedProperty",Qh),Jt("ColorRampProperty",$o);class io extends Ur{constructor(a,s,f){if(super(),this.id=a.id,this.type=a.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(g,x){return new No(g,x)})(this.visibility,f),a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter,this._featureFilter=$u(a.filter,f)),s.layout&&(this._unevaluatedLayout=new Ef(s.layout,f)),s.paint)){this._transitionablePaint=new Ql(s.paint,f);for(const g in a.paint)this.setPaintProperty(g,a.paint[g],{validate:!1});for(const g in a.layout)this.setLayoutProperty(g,a.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ls(s.paint)}}setFilter(a){this.filter=a,this._featureFilter=$u(a,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}getLayoutAffectingGlobalStateRefs(){const a=new Set;for(const s of this._visibilityExpression.getGlobalStateRefs())a.add(s);if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[s];for(const g of f.getGlobalStateRefs())a.add(g)}for(const s of this._featureFilter.getGlobalStateRefs())a.add(s);return a}getPaintAffectingGlobalStateRefs(){var a;const s=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const g=this._transitionablePaint._values[f].value;for(const x of g.getGlobalStateRefs()){const b=(a=s.get(x))!==null&&a!==void 0?a:[];b.push({name:f,value:g.value}),s.set(x,b)}}return s}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(a,s,f={}){if(s==null||!this._validate(Bo,`layers.${this.id}.layout.${a}`,a,s,f))return a==="visibility"?(this.visibility=s,this._visibilityExpression.setValue(s),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(a,s)}getPaintProperty(a){return a.endsWith(Zc)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,s,f={}){if(s!=null&&this._validate(Fo,`layers.${this.id}.paint.${a}`,a,s,f))return!1;if(a.endsWith(Zc))return this._transitionablePaint.setTransition(a.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[a],x=g.property.specification["property-type"]==="cross-faded-data-driven",b=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(a,s),this._handleSpecialPaintPropertyUpdate(a);const I=this._transitionablePaint._values[a].value;return I.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(a,C,I)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,s,f){return!1}isHidden(a=this.minzoom,s=!1){return!!(this.minzoom&&a<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&a>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(a,s){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,s)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),ir(a,((s,f)=>!(s===void 0||f==="layout"&&!Object.keys(s).length||f==="paint"&&!Object.keys(s).length)))}_validate(a,s,f,g,x={}){return(!x||x.validate!==!1)&&Vo(this,a.call(mi,{key:s,layerType:this.type,objectKey:f,value:g,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const s=this.paint.get(a);if(s instanceof Eo&&Po(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let Cf;var Ds={get paint(){return Cf=Cf||new xi({"raster-opacity":new ar(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ar(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ar(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ar(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new ar(tt.paint_raster["raster-saturation"]),"raster-contrast":new ar(tt.paint_raster["raster-contrast"]),"raster-resampling":new ar(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new ar(tt.paint_raster["raster-fade-duration"])})}};class Jl extends io{constructor(a,s){super(a,Ds,s)}}const Tf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kc{constructor(a,s){this._structArray=a,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,s){return a._trim(),s&&(a.isTransferred=!0,s.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const s=Object.create(this.prototype);return s.arrayBuffer=a.arrayBuffer,s.length=a.length,s.capacity=a.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gi(l,a=1){let s=0,f=0;return{members:l.map((g=>{const x=Tf[g.type].BYTES_PER_ELEMENT,b=s=us(s,Math.max(a,x)),C=g.components||1;return f=Math.max(f,x),s+=x*C,{name:g.name,type:g.type,components:C,offset:b}})),size:us(s,Math.max(f,a)),alignment:a}}function us(l,a){return Math.ceil(l/a)*a}class ao extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.int16[g+0]=s,this.int16[g+1]=f,a}}ao.prototype.bytesPerElement=4,Jt("StructArrayLayout2i4",ao);class eu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.int16[x+0]=s,this.int16[x+1]=f,this.int16[x+2]=g,a}}eu.prototype.bytesPerElement=6,Jt("StructArrayLayout3i6",eu);class Yu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,s,f,g)}emplace(a,s,f,g,x){const b=4*a;return this.int16[b+0]=s,this.int16[b+1]=f,this.int16[b+2]=g,this.int16[b+3]=x,a}}Yu.prototype.bytesPerElement=8,Jt("StructArrayLayout4i8",Yu);class Rs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=6*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=x,this.int16[I+4]=b,this.int16[I+5]=C,a}}Rs.prototype.bytesPerElement=12,Jt("StructArrayLayout2i4i12",Rs);class Jh extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=4*a,j=8*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.uint8[j+4]=g,this.uint8[j+5]=x,this.uint8[j+6]=b,this.uint8[j+7]=C,a}}Jh.prototype.bytesPerElement=8,Jt("StructArrayLayout2i4ub8",Jh);class js extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.float32[g+0]=s,this.float32[g+1]=f,a}}js.prototype.bytesPerElement=8,Jt("StructArrayLayout2f8",js);class zs extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V){const G=this.length;return this.resize(G+1),this.emplace(G,a,s,f,g,x,b,C,I,j,V)}emplace(a,s,f,g,x,b,C,I,j,V,G){const Z=10*a;return this.uint16[Z+0]=s,this.uint16[Z+1]=f,this.uint16[Z+2]=g,this.uint16[Z+3]=x,this.uint16[Z+4]=b,this.uint16[Z+5]=C,this.uint16[Z+6]=I,this.uint16[Z+7]=j,this.uint16[Z+8]=V,this.uint16[Z+9]=G,a}}zs.prototype.bytesPerElement=20,Jt("StructArrayLayout10ui20",zs);class Xc extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I){const j=this.length;return this.resize(j+1),this.emplace(j,a,s,f,g,x,b,C,I)}emplace(a,s,f,g,x,b,C,I,j){const V=8*a;return this.uint16[V+0]=s,this.uint16[V+1]=f,this.uint16[V+2]=g,this.uint16[V+3]=x,this.uint16[V+4]=b,this.uint16[V+5]=C,this.uint16[V+6]=I,this.uint16[V+7]=j,a}}Xc.prototype.bytesPerElement=16,Jt("StructArrayLayout8ui16",Xc);class Gn extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,Z){const X=this.length;return this.resize(X+1),this.emplace(X,a,s,f,g,x,b,C,I,j,V,G,Z)}emplace(a,s,f,g,x,b,C,I,j,V,G,Z,X){const ee=12*a;return this.int16[ee+0]=s,this.int16[ee+1]=f,this.int16[ee+2]=g,this.int16[ee+3]=x,this.uint16[ee+4]=b,this.uint16[ee+5]=C,this.uint16[ee+6]=I,this.uint16[ee+7]=j,this.int16[ee+8]=V,this.int16[ee+9]=G,this.int16[ee+10]=Z,this.int16[ee+11]=X,a}}Gn.prototype.bytesPerElement=24,Jt("StructArrayLayout4i4ui4i24",Gn);class Qu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.float32[x+0]=s,this.float32[x+1]=f,this.float32[x+2]=g,a}}Qu.prototype.bytesPerElement=12,Jt("StructArrayLayout3f12",Qu);class Ju extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint32[1*a+0]=s,a}}Ju.prototype.bytesPerElement=4,Jt("StructArrayLayout1ul4",Ju);class ed extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j){const V=this.length;return this.resize(V+1),this.emplace(V,a,s,f,g,x,b,C,I,j)}emplace(a,s,f,g,x,b,C,I,j,V){const G=10*a,Z=5*a;return this.int16[G+0]=s,this.int16[G+1]=f,this.int16[G+2]=g,this.int16[G+3]=x,this.int16[G+4]=b,this.int16[G+5]=C,this.uint32[Z+3]=I,this.uint16[G+8]=j,this.uint16[G+9]=V,a}}ed.prototype.bytesPerElement=20,Jt("StructArrayLayout6i1ul2ui20",ed);class ul extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=6*a;return this.int16[I+0]=s,this.int16[I+1]=f,this.int16[I+2]=g,this.int16[I+3]=x,this.int16[I+4]=b,this.int16[I+5]=C,a}}ul.prototype.bytesPerElement=12,Jt("StructArrayLayout2i2i2i12",ul);class cl extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x){const b=this.length;return this.resize(b+1),this.emplace(b,a,s,f,g,x)}emplace(a,s,f,g,x,b){const C=4*a,I=8*a;return this.float32[C+0]=s,this.float32[C+1]=f,this.float32[C+2]=g,this.int16[I+6]=x,this.int16[I+7]=b,a}}cl.prototype.bytesPerElement=16,Jt("StructArrayLayout2f1f2i16",cl);class hl extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b){const C=this.length;return this.resize(C+1),this.emplace(C,a,s,f,g,x,b)}emplace(a,s,f,g,x,b,C){const I=16*a,j=4*a,V=8*a;return this.uint8[I+0]=s,this.uint8[I+1]=f,this.float32[j+1]=g,this.float32[j+2]=x,this.int16[V+6]=b,this.int16[V+7]=C,a}}hl.prototype.bytesPerElement=16,Jt("StructArrayLayout2ub2f2i16",hl);class Wn extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.uint16[x+0]=s,this.uint16[x+1]=f,this.uint16[x+2]=g,a}}Wn.prototype.bytesPerElement=6,Jt("StructArrayLayout3ui6",Wn);class oi extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe)}emplace(a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe,Pe){const me=24*a,ge=12*a,Ce=48*a;return this.int16[me+0]=s,this.int16[me+1]=f,this.uint16[me+2]=g,this.uint16[me+3]=x,this.uint32[ge+2]=b,this.uint32[ge+3]=C,this.uint32[ge+4]=I,this.uint16[me+10]=j,this.uint16[me+11]=V,this.uint16[me+12]=G,this.float32[ge+7]=Z,this.float32[ge+8]=X,this.uint8[Ce+36]=ee,this.uint8[Ce+37]=ne,this.uint8[Ce+38]=se,this.uint32[ge+10]=fe,this.int16[me+22]=Pe,a}}oi.prototype.bytesPerElement=48,Jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",oi);class ji extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt){const Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt)}emplace(a,s,f,g,x,b,C,I,j,V,G,Z,X,ee,ne,se,fe,Pe,me,ge,Ce,Re,nt,kt,_t,Ot,Kt,Rt,Ct){const dt=32*a,sr=16*a;return this.int16[dt+0]=s,this.int16[dt+1]=f,this.int16[dt+2]=g,this.int16[dt+3]=x,this.int16[dt+4]=b,this.int16[dt+5]=C,this.int16[dt+6]=I,this.int16[dt+7]=j,this.uint16[dt+8]=V,this.uint16[dt+9]=G,this.uint16[dt+10]=Z,this.uint16[dt+11]=X,this.uint16[dt+12]=ee,this.uint16[dt+13]=ne,this.uint16[dt+14]=se,this.uint16[dt+15]=fe,this.uint16[dt+16]=Pe,this.uint16[dt+17]=me,this.uint16[dt+18]=ge,this.uint16[dt+19]=Ce,this.uint16[dt+20]=Re,this.uint16[dt+21]=nt,this.uint16[dt+22]=kt,this.uint32[sr+12]=_t,this.float32[sr+13]=Ot,this.float32[sr+14]=Kt,this.uint16[dt+30]=Rt,this.uint16[dt+31]=Ct,a}}ji.prototype.bytesPerElement=64,Jt("StructArrayLayout8i15ui1ul2f2ui64",ji);class ec extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.float32[1*a+0]=s,a}}ec.prototype.bytesPerElement=4,Jt("StructArrayLayout1f4",ec);class tu extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=3*a;return this.uint16[6*a+0]=s,this.float32[x+1]=f,this.float32[x+2]=g,a}}tu.prototype.bytesPerElement=12,Jt("StructArrayLayout1ui2f12",tu);class tc extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,f){const g=this.length;return this.resize(g+1),this.emplace(g,a,s,f)}emplace(a,s,f,g){const x=4*a;return this.uint32[2*a+0]=s,this.uint16[x+2]=f,this.uint16[x+3]=g,a}}tc.prototype.bytesPerElement=8,Jt("StructArrayLayout1ul2ui8",tc);class w extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s){const f=this.length;return this.resize(f+1),this.emplace(f,a,s)}emplace(a,s,f){const g=2*a;return this.uint16[g+0]=s,this.uint16[g+1]=f,a}}w.prototype.bytesPerElement=4,Jt("StructArrayLayout2ui4",w);class i extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint16[1*a+0]=s,a}}i.prototype.bytesPerElement=2,Jt("StructArrayLayout1ui2",i);class c extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,a,s,f,g)}emplace(a,s,f,g,x){const b=4*a;return this.float32[b+0]=s,this.float32[b+1]=f,this.float32[b+2]=g,this.float32[b+3]=x,a}}c.prototype.bytesPerElement=16,Jt("StructArrayLayout4f16",c);class m extends Kc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}m.prototype.size=20;class v extends ed{get(a){return new m(this,a)}}Jt("CollisionBoxArray",v);class E extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}E.prototype.size=48;class k extends oi{get(a){return new E(this,a)}}Jt("PlacedSymbolArray",k);class L extends Kc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}L.prototype.size=64;class N extends ji{get(a){return new L(this,a)}}Jt("SymbolInstanceArray",N);class U extends ec{getoffsetX(a){return this.float32[1*a+0]}}Jt("GlyphOffsetArray",U);class W extends eu{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Jt("SymbolLineVertexArray",W);class J extends Kc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class Y extends tu{get(a){return new J(this,a)}}Jt("TextAnchorOffsetArray",Y);class oe extends Kc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}oe.prototype.size=8;class ce extends tc{get(a){return new oe(this,a)}}Jt("FeatureIndexArray",ce);class ye extends ao{}class _e extends ao{}class ve extends ao{}class we extends Rs{}class Le extends Jh{}class Se extends js{}class ke extends zs{}class Fe extends Xc{}class Te extends Gn{}class Ge extends Qu{}class ht extends Ju{}class at extends ul{}class ot extends hl{}class st extends Wn{}class Nt extends w{}const Vt=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:It}=Vt;class Yt{constructor(a=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=a}prepareSegment(a,s,f,g){const x=this.segments[this.segments.length-1];return a>Yt.MAX_VERTEX_ARRAY_LENGTH&&Tr(`Max vertices per segment is ${Yt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Yt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+a>Yt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g?this.createNewSegment(s,f,g):x}createNewSegment(a,s,f){const g={vertexOffset:a.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(g.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(a,s,f){return this.prepareSegment(0,a,s,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const a of this.segments)for(const s in a.vaos)a.vaos[s].destroy()}static simpleSegment(a,s,f,g){return new Yt([{vertexOffset:a,primitiveOffset:s,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function zr(l,a){return 256*(l=tr(Math.floor(l),0,255))+tr(Math.floor(a),0,255)}Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt("SegmentVector",Yt);const Sn=gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Xn=gi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var On,Yn,Ln,Qn={exports:{}},si={exports:{}},na={exports:{}},Si=(function(){if(Ln)return Qn.exports;Ln=1;var l=(On||(On=1,si.exports=function(s,f){var g,x,b,C,I,j,V,G;for(x=s.length-(g=3&s.length),b=f,I=3432918353,j=461845907,G=0;G<x;)V=255&s.charCodeAt(G)|(255&s.charCodeAt(++G))<<8|(255&s.charCodeAt(++G))<<16|(255&s.charCodeAt(++G))<<24,++G,b=27492+(65535&(C=5*(65535&(b=(b^=V=(65535&(V=(V=(65535&V)*I+(((V>>>16)*I&65535)<<16)&4294967295)<<15|V>>>17))*j+(((V>>>16)*j&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(V=0,g){case 3:V^=(255&s.charCodeAt(G+2))<<16;case 2:V^=(255&s.charCodeAt(G+1))<<8;case 1:b^=V=(65535&(V=(V=(65535&(V^=255&s.charCodeAt(G)))*I+(((V>>>16)*I&65535)<<16)&4294967295)<<15|V>>>17))*j+(((V>>>16)*j&65535)<<16)&4294967295}return b^=s.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),si.exports),a=(Yn||(Yn=1,na.exports=function(s,f){for(var g,x=s.length,b=f^x,C=0;x>=4;)g=1540483477*(65535&(g=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:b^=(255&s.charCodeAt(C+2))<<16;case 2:b^=(255&s.charCodeAt(C+1))<<8;case 1:b=1540483477*(65535&(b^=255&s.charCodeAt(C)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),na.exports);return Qn.exports=l,Qn.exports.murmur3=l,Qn.exports.murmur2=a,Qn.exports})(),_n=P(Si);class qi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,s,f,g){this.ids.push(cs(a)),this.positions.push(s,f,g)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=cs(a);let f=0,g=this.ids.length-1;for(;f<g;){const b=f+g>>1;this.ids[b]>=s?g=b:f=b+1}const x=[];for(;this.ids[f]===s;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(a,s){const f=new Float64Array(a.ids),g=new Uint32Array(a.positions);return Ns(f,g,0,f.length-1),s&&s.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(a){const s=new qi;return s.ids=a.ids,s.positions=a.positions,s.indexed=!0,s}}function cs(l){const a=+l;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:_n(String(l))}function Ns(l,a,s,f){for(;s<f;){const g=l[s+f>>1];let x=s-1,b=f+1;for(;;){do x++;while(l[x]<g);do b--;while(l[b]>g);if(x>=b)break;hs(l,x,b),hs(a,3*x,3*b),hs(a,3*x+1,3*b+1),hs(a,3*x+2,3*b+2)}b-s<f-b?(Ns(l,a,s,b),s=b+1):(Ns(l,a,b+1,f),f=b)}}function hs(l,a,s){const f=l[a];l[a]=l[s],l[s]=f}Jt("FeaturePositionMap",qi);class Fa{constructor(a,s){this.gl=a.gl,this.location=s}}class dl extends Fa{constructor(a,s){super(a,s),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Fs extends Fa{constructor(a,s){super(a,s),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class fl extends Fa{constructor(a,s){super(a,s),this.current=Br.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const oo=new Float32Array(16);function Bs(l){return[zr(255*l.r,255*l.g),zr(255*l.b,255*l.a)]}class Uo{constructor(a,s,f){this.value=a,this.uniformNames=s.map((g=>`u_${g}`)),this.type=f}setUniform(a,s,f){a.set(f.constantOr(this.value))}getBinding(a,s,f){return this.type==="color"?new fl(a,s):new dl(a,s)}}class qo{constructor(a,s){this.uniformNames=s.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=a.tlbr}setConstantDashPositions(a,s){this.dashTo=[0,a.y,a.height,a.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(a,s,f,g){let x=null;g==="u_pattern_to"?x=this.patternTo:g==="u_pattern_from"?x=this.patternFrom:g==="u_dasharray_to"?x=this.dashTo:g==="u_dasharray_from"?x=this.dashFrom:g==="u_pixel_ratio_to"?x=this.pixelRatioTo:g==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&a.set(x)}getBinding(a,s,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new Fs(a,s):new dl(a,s)}}class zn{constructor(a,s,f,g){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=s.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(a,s,f){const g=this.paintVertexArray.length,x=this.expression.evaluate(new Mn(0,f),s,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(a),this._setPaintValue(g,a,x)}updatePaintArray(a,s,f,g,x){const b=this.expression.evaluate(new Mn(0,x),f,g);this._setPaintValue(a,s,b)}_setPaintValue(a,s,f){if(this.type==="color"){const g=Bs(f);for(let x=a;x<s;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=a;g<s;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dn{constructor(a,s,f,g,x,b){this.expression=a,this.uniformNames=s.map((C=>`u_${C}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=s.map((C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(a,s,f){const g=this.expression.evaluate(new Mn(this.zoom,f),s,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Mn(this.zoom+1,f),s,{},f.canonical,[],f.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(b,a,g,x)}updatePaintArray(a,s,f,g,x){const b=this.expression.evaluate(new Mn(this.zoom,x),f,g),C=this.expression.evaluate(new Mn(this.zoom+1,x),f,g);this._setPaintValue(a,s,b,C)}_setPaintValue(a,s,f,g){if(this.type==="color"){const x=Bs(f),b=Bs(g);for(let C=a;C<s;C++)this.paintVertexArray.emplace(C,x[0],x[1],b[0],b[1])}else{for(let x=a;x<s;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,s){const f=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=tr(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(g)}getBinding(a,s,f){return new dl(a,s)}}class zi{constructor(a,s,f,g,x,b){this.expression=a,this.type=s,this.useIntegerZoom=f,this.zoom=g,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(a,s,f){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(g,a,this.getPositionIds(s),f)}updatePaintArray(a,s,f,g,x){this._setPaintValues(a,s,this.getPositionIds(f),x)}_setPaintValues(a,s,f,g){const x=this.getPositions(g);if(!x||!f)return;const b=x[f.min],C=x[f.mid],I=x[f.max];if(b&&C&&I)for(let j=a;j<s;j++)this.emplace(this.zoomInPaintVertexArray,j,C,b),this.emplace(this.zoomOutPaintVertexArray,j,C,I)}upload(a){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gi extends zi{getPositions(a){return a.imagePositions}getPositionIds(a){return a.patterns&&a.patterns[this.layerId]}getVertexAttributes(){return Sn.members}emplace(a,s,f,g){a.emplace(s,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],g.tlbr[0],g.tlbr[1],g.tlbr[2],g.tlbr[3],f.pixelRatio,g.pixelRatio)}}class Ba extends zi{getPositions(a){return a.dashPositions}getPositionIds(a){return a.dashes&&a.dashes[this.layerId]}getVertexAttributes(){return Xn.members}emplace(a,s,f,g){a.emplace(s,0,f.y,f.height,f.width,0,g.y,g.height,g.width)}}class ba{constructor(a,s,f){this.binders={},this._buffers=[];const g=[];for(const x in a.paint._values){if(!f(x))continue;const b=a.paint.get(x);if(!(b instanceof Eo&&Po(b.property.specification)))continue;const C=bg(x,a.type),I=b.value,j=b.property.specification.type,V=b.property.useIntegerZoom,G=b.property.specification["property-type"],Z=G==="cross-faded"||G==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=Z?new qo(I.value,C):new Uo(I.value,C,j),g.push(`/u_${x}`);else if(I.kind==="source"||Z){const X=em(x,j,"source");this.binders[x]=Z?x==="line-dasharray"?new Ba(I,j,V,s,X,a.id):new Gi(I,j,V,s,X,a.id):new zn(I,C,j,X),g.push(`/a_${x}`)}else{const X=em(x,j,"composite");this.binders[x]=new Dn(I,C,j,V,s,X),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(a){const s=this.binders[a];return s instanceof zn||s instanceof Dn?s.maxValue:0}populatePaintArrays(a,s,f){for(const g in this.binders){const x=this.binders[g];(x instanceof zn||x instanceof Dn||x instanceof zi)&&x.populatePaintArray(a,s,f)}}setConstantPatternPositions(a,s){for(const f in this.binders){const g=this.binders[f];g instanceof qo&&g.setConstantPatternPositions(a,s)}}setConstantDashPositions(a,s){for(const f in this.binders){const g=this.binders[f];g instanceof qo&&g.setConstantDashPositions(a,s)}}updatePaintArrays(a,s,f,g,x){let b=!1;for(const C in a){const I=s.getPositions(C);for(const j of I){const V=f.feature(j.index);for(const G in this.binders){const Z=this.binders[G];if((Z instanceof zn||Z instanceof Dn||Z instanceof zi)&&Z.expression.isStateDependent===!0){const X=g.paint.get(G);Z.expression=X.value,Z.updatePaintArray(j.start,j.end,V,a[C],x),b=!0}}}}return b}defines(){const a=[];for(const s in this.binders){const f=this.binders[s];(f instanceof Uo||f instanceof qo)&&a.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return a}getBinderAttributes(){const a=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof zn||f instanceof Dn)for(let g=0;g<f.paintVertexAttributes.length;g++)a.push(f.paintVertexAttributes[g].name);else if(f instanceof zi){const g=f.getVertexAttributes();for(const x of g)a.push(x.name)}}return a}getBinderUniforms(){const a=[];for(const s in this.binders){const f=this.binders[s];if(f instanceof Uo||f instanceof qo||f instanceof Dn)for(const g of f.uniformNames)a.push(g)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,s){const f=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Uo||x instanceof qo||x instanceof Dn){for(const b of x.uniformNames)if(s[b]){const C=x.getBinding(a,s[b],b);f.push({name:b,property:g,binding:C})}}}return f}setUniforms(a,s,f,g){for(const{name:x,property:b,binding:C}of s)this.binders[b].setUniform(C,g,f.get(b),x)}updatePaintBuffers(a){this._buffers=[];for(const s in this.binders){const f=this.binders[s];if(a&&f instanceof zi){const g=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(f instanceof zn||f instanceof Dn)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(a){for(const s in this.binders){const f=this.binders[s];(f instanceof zn||f instanceof Dn||f instanceof zi)&&f.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const s=this.binders[a];(s instanceof zn||s instanceof Dn||s instanceof zi)&&s.destroy()}}}class ru{constructor(a,s,f=()=>!0){this.programConfigurations={};for(const g of a)this.programConfigurations[g.id]=new ba(g,s,f);this.needsUpload=!1,this._featureMap=new qi,this._bufferOffset=0}populatePaintArrays(a,s,f,g){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(a,s,g);s.id!==void 0&&this._featureMap.add(s.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,s,f,g){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(a,this._featureMap,s,x,g)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function bg(l,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${a}-`,"").replace(/-/g,"_")]}function em(l,a,s){const f={color:{source:js,composite:c},number:{source:ec,composite:js}},g=(function(x){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:Fe,composite:Fe}}[x]})(l);return g&&g[s]||f[a][s]}Jt("ConstantBinder",Uo),Jt("CrossFadedConstantBinder",qo),Jt("SourceExpressionBinder",zn),Jt("CrossFadedPatternBinder",Gi),Jt("CrossFadedDasharrayBinder",Ba),Jt("CompositeExpressionBinder",Dn),Jt("ProgramConfiguration",ba,{omit:["_buffers"]}),Jt("ProgramConfigurationSet",ru);const Mf=Math.pow(2,14)-1,pl=-Mf-1;function Vs(l){const a=Qe/l.extent,s=l.loadGeometry();for(let f=0;f<s.length;f++){const g=s[f];for(let x=0;x<g.length;x++){const b=g[x],C=Math.round(b.x*a),I=Math.round(b.y*a);b.x=tr(C,pl,Mf),b.y=tr(I,pl,Mf),(C<b.x||C>b.x+1||I<b.y||I>b.y+1)&&Tr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ml(l,a){return{type:l.type,id:l.id,properties:l.properties,geometry:a?Vs(l):[]}}const td=-32768;function kf(l,a,s,f,g){l.emplaceBack(td+8*a+f,td+8*s+g)}class rd{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.layoutVertexArray=new _e,this.indexArray=new st,this.segments=new Yt,this.programConfigurations=new ru(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){const g=this.layers[0],x=[];let b=null,C=!1,I=g.type==="heatmap";if(g.type==="circle"){const V=g;b=V.layout.get("circle-sort-key"),C=!b.isConstant(),I=I||V.paint.get("circle-pitch-alignment")==="map"}const j=I?s.subdivisionGranularity.circle:1;for(const{feature:V,id:G,index:Z,sourceLayerIndex:X}of a){const ee=this.layers[0]._featureFilter.needGeometry,ne=ml(V,ee);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),ne,f))continue;const se=C?b.evaluate(ne,{},f):void 0,fe={id:G,properties:V.properties,type:V.type,sourceLayerIndex:X,index:Z,geometry:ee?ne.geometry:Vs(V),patterns:{},sortKey:se};x.push(fe)}C&&x.sort(((V,G)=>V.sortKey-G.sortKey));for(const V of x){const{geometry:G,index:Z,sourceLayerIndex:X}=V,ee=a[Z].feature;this.addFeature(V,G,Z,f,j),s.featureIndex.insert(ee,G,Z,X,this.index)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,It),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,s,f,g,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=b.length;for(const I of s)for(const j of I){const V=j.x,G=j.y;if(V<0||V>=Qe||G<0||G>=Qe)continue;const Z=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,a.sortKey),X=Z.vertexLength;for(let ee=0;ee<C;ee++)for(let ne=0;ne<C;ne++)kf(this.layoutVertexArray,V,G,b[ne],b[ee]);for(let ee=0;ee<C-1;ee++)for(let ne=0;ne<C-1;ne++){const se=X+ee*C+ne,fe=X+(ee+1)*C+ne;this.indexArray.emplaceBack(se,fe+1,se+1),this.indexArray.emplaceBack(se,fe,fe+1)}Z.vertexLength+=C*C,Z.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:{},canonical:g})}}function Yc(l,a){for(let s=0;s<l.length;s++)if(rc(a,l[s]))return!0;for(let s=0;s<a.length;s++)if(rc(l,a[s]))return!0;return!!If(l,a)}function Af(l,a,s){return!!rc(l,a)||!!wg(a,l,s)}function iv(l,a){if(l.length===1)return ov(a,l[0]);for(let s=0;s<a.length;s++){const f=a[s];for(let g=0;g<f.length;g++)if(rc(l,f[g]))return!0}for(let s=0;s<l.length;s++)if(ov(a,l[s]))return!0;for(let s=0;s<a.length;s++)if(If(l,a[s]))return!0;return!1}function av(l,a,s){if(l.length>1){if(If(l,a))return!0;for(let f=0;f<a.length;f++)if(wg(a[f],l,s))return!0}for(let f=0;f<l.length;f++)if(wg(l[f],a,s))return!0;return!1}function If(l,a){if(l.length===0||a.length===0)return!1;for(let s=0;s<l.length-1;s++){const f=l[s],g=l[s+1];for(let x=0;x<a.length-1;x++)if(p1(f,g,a[x],a[x+1]))return!0}return!1}function p1(l,a,s,f){return wr(l,s,f)!==wr(a,s,f)&&wr(l,a,s)!==wr(l,a,f)}function wg(l,a,s){const f=s*s;if(a.length===1)return l.distSqr(a[0])<f;for(let g=1;g<a.length;g++)if(Sg(l,a[g-1],a[g])<f)return!0;return!1}function Sg(l,a,s){const f=a.distSqr(s);if(f===0)return l.distSqr(a);const g=((l.x-a.x)*(s.x-a.x)+(l.y-a.y)*(s.y-a.y))/f;return l.distSqr(g<0?a:g>1?s:s.sub(a)._mult(g)._add(a))}function ov(l,a){let s,f,g,x=!1;for(let b=0;b<l.length;b++){s=l[b];for(let C=0,I=s.length-1;C<s.length;I=C++)f=s[C],g=s[I],f.y>a.y!=g.y>a.y&&a.x<(g.x-f.x)*(a.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function rc(l,a){let s=!1;for(let f=0,g=l.length-1;f<l.length;g=f++){const x=l[f],b=l[g];x.y>a.y!=b.y>a.y&&a.x<(b.x-x.x)*(a.y-x.y)/(b.y-x.y)+x.x&&(s=!s)}return s}function nc(l,a,s){const f=s[0],g=s[2];if(l.x<f.x&&a.x<f.x||l.x>g.x&&a.x>g.x||l.y<f.y&&a.y<f.y||l.y>g.y&&a.y>g.y)return!1;const x=wr(l,a,s[0]);return x!==wr(l,a,s[1])||x!==wr(l,a,s[2])||x!==wr(l,a,s[3])}function Of(l,a,s){const f=a.paint.get(l).value;return f.kind==="constant"?f.value:s.programConfigurations.get(a.id).getMaxValue(l)}function tm(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Lf(l,a,s,f,g){if(!a[0]&&!a[1])return l;const x=_.convert(a)._mult(g);s==="viewport"&&x._rotate(-f);const b=[];for(let C=0;C<l.length;C++)b.push(l[C].sub(x));return b}function u0(l){const a=[];for(let s=0;s<l.length;s++){const f=l[s],g=a.at(-1);(s===0||g&&!f.equals(g))&&a.push(f)}return a}function c0({queryGeometry:l,size:a},s){return Af(l,s,a)}function rm({queryGeometry:l,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){return Af(l,x,a*(s.projectTileCoordinates(x.x,x.y,f,g).signedDistanceFromCamera/s.cameraToCenterDistance))}function so({queryGeometry:l,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){const b=s.projectTileCoordinates(x.x,x.y,f,g).signedDistanceFromCamera,C=a*(s.cameraToCenterDistance/b);return Af(l,Df(x,s,f,g),C)}function m1({queryGeometry:l,size:a,transform:s,unwrappedTileID:f,getElevation:g},x){return Af(l,Df(x,s,f,g),a)}function h0({queryGeometry:l,size:a,transform:s,unwrappedTileID:f,getElevation:g,pitchAlignment:x="map",pitchScale:b="map"},C){const I=x==="map"?b==="map"?c0:rm:b==="map"?so:m1,j={queryGeometry:l,size:a,transform:s,unwrappedTileID:f,getElevation:g};for(const V of C)for(const G of V)if(I(j,G))return!0;return!1}function Df(l,a,s,f){const g=a.projectTileCoordinates(l.x,l.y,s,f).point;return new _((.5*g.x+.5)*a.width,(.5*-g.y+.5)*a.height)}let Va,d0;Jt("CircleBucket",rd,{omit:["layers"]});var yr={get paint(){return d0=d0||new xi({"circle-radius":new gr(tt.paint_circle["circle-radius"]),"circle-color":new gr(tt.paint_circle["circle-color"]),"circle-blur":new gr(tt.paint_circle["circle-blur"]),"circle-opacity":new gr(tt.paint_circle["circle-opacity"]),"circle-translate":new ar(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new ar(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ar(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ar(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gr(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gr(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gr(tt.paint_circle["circle-stroke-opacity"])})},get layout(){return Va=Va||new xi({"circle-sort-key":new gr(tt.layout_circle["circle-sort-key"])})}};class Rf extends io{constructor(a,s){super(a,yr,s)}createBucket(a){return new rd(a)}queryRadius(a){const s=a;return Of("circle-radius",this,s)+Of("circle-stroke-width",this,s)+tm(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:I}){const j=Lf(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),V=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),G=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let X,ee;return Z==="map"?(X=j,ee=V*b):(X=(function(ne,se,fe,Pe){return ne.map((me=>Df(me,se,fe,Pe)))})(j,x,C,I),ee=V),h0({queryGeometry:X,size:ee,transform:x,unwrappedTileID:C,getElevation:I,pitchAlignment:Z,pitchScale:G},g)}}class Pg extends rd{}let sv;Jt("HeatmapBucket",Pg,{omit:["layers"]});var g1={get paint(){return sv=sv||new xi({"heatmap-radius":new gr(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gr(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ar(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $o(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ar(tt.paint_heatmap["heatmap-opacity"])})}};function nd(l,{width:a,height:s},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==a*s*f)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${a*s*f}`)}else g=new Uint8Array(a*s*f);return l.width=a,l.height=s,l.data=g,l}function nm(l,{width:a,height:s},f){if(a===l.width&&s===l.height)return;const g=nd({},{width:a,height:s},f);im(l,g,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,a),height:Math.min(l.height,s)},f),l.width=a,l.height=s,l.data=g.data}function im(l,a,s,f,g,x){if(g.width===0||g.height===0)return a;if(g.width>l.width||g.height>l.height||s.x>l.width-g.width||s.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>a.width||g.height>a.height||f.x>a.width-g.width||f.y>a.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const b=l.data,C=a.data;if(b===C)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<g.height;I++){const j=((s.y+I)*l.width+s.x)*x,V=((f.y+I)*a.width+f.x)*x;for(let G=0;G<g.width*x;G++)C[V+G]=b[j+G]}return a}class jf{constructor(a,s){nd(this,a,1,s)}resize(a){nm(this,a,1)}clone(){return new jf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,f,g,x){im(a,s,f,g,x,1)}}class lo{constructor(a,s){nd(this,a,4,s)}resize(a){nm(this,a,4)}replace(a,s){s?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,f,g,x){im(a,s,f,g,x,4)}setPixel(a,s,f){const g=4*(a*this.width+s);this.data[g+0]=Math.round(255*f.r/f.a),this.data[g+1]=Math.round(255*f.g/f.a),this.data[g+2]=Math.round(255*f.b/f.a),this.data[g+3]=Math.round(255*f.a)}}function lv(l){const a={},s=l.resolution||256,f=l.clips?l.clips.length:1,g=l.image||new lo({width:s,height:f});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const x=(b,C,I)=>{a[l.evaluationKey]=I;const j=l.expression.evaluate(a);g.setPixel(b/4/s,C/4,j)};if(l.clips)for(let b=0,C=0;b<f;++b,C+=4*s)for(let I=0,j=0;I<s;I++,j+=4){const V=I/(s-1),{start:G,end:Z}=l.clips[b];x(C,j,G*(1-V)+Z*V)}else for(let b=0,C=0;b<s;b++,C+=4)x(0,C,b/(s-1));return g}Jt("AlphaImage",jf),Jt("RGBAImage",lo);const am="big-fb";class uv extends io{createBucket(a){return new Pg(a)}constructor(a,s){super(a,g1,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(am)&&this.heatmapFbos.delete(am)}queryRadius(a){return Of("heatmap-radius",this,a)}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,unwrappedTileID:C,getElevation:I}){return h0({queryGeometry:a,size:this.paint.get("heatmap-radius").evaluate(s,f)*b,transform:x,unwrappedTileID:C,getElevation:I},g)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let wa;var gl={get paint(){return wa=wa||new xi({"hillshade-illumination-direction":new ar(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ar(tt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ar(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ar(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ar(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ar(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ar(tt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ar(tt.paint_hillshade["hillshade-method"])})}};class Qc extends io{constructor(a,s){super(a,gl,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let a=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const x=Math.max(a.length,s.length,f.length,g.length);a=a.concat(Array(x-a.length).fill(a.at(-1))),s=s.concat(Array(x-s.length).fill(s.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),g=g.concat(Array(x-g.length).fill(g.at(-1)));const b=s.map(Wt);return{directionRadians:a.map(Wt),altitudeRadians:b,shadowColor:g,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let cv;var f0={get paint(){return cv=cv||new xi({"color-relief-opacity":new ar(tt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new $o(tt["paint_color-relief"]["color-relief-color"])})}};class ds{constructor(a,s,f,g){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(s,g)}update(a,s,f){const{width:g,height:x}=a,b=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(s&&s.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!s||s.premultiply!==!1)),b)this.size=[g,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Xi(a)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,a):I.texImage2D(I.TEXTURE_2D,0,this.format,g,x,0,this.format,I.UNSIGNED_BYTE,a.data);else{const{x:j,y:V}=f||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||Xi(a)?I.texSubImage2D(I.TEXTURE_2D,0,j,V,I.RGBA,I.UNSIGNED_BYTE,a):I.texSubImage2D(I.TEXTURE_2D,0,j,V,g,x,I.RGBA,I.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(a,s,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||a),this.filter=a),s!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class hv{constructor(a,s,f,g=1,x=1,b=1,C=0){if(this.uid=a,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Tr(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=x,this.blueFactor=b,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<I;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(I,j)]=this.data[this._idx(I-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,I)]=this.data[this._idx(j,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<I;j++)for(let V=0;V<I;V++){const G=this.get(j,V);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(a,s){const f=new Uint8Array(this.data.buffer),g=4*this._idx(a,s);return this.unpack(f[g],f[g+1],f[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,s){if(a<-1||a>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${a}, y: ${s}, dim: ${this.dim}`);return(s+1)*this.stride+(a+1)}unpack(a,s,f){return a*this.redFactor+s*this.greenFactor+f*this.blueFactor-this.baseShift}pack(a){return yl(a,this.getUnpackVector())}getPixels(){return new lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,s,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,x=s*this.dim+this.dim,b=f*this.dim,C=f*this.dim+this.dim;switch(s){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:b=C-1;break;case 1:C=b+1}const I=-s*this.dim,j=-f*this.dim;for(let V=b;V<C;V++)for(let G=g;G<x;G++)this.data[this._idx(G,V)]=a.data[this._idx(G+I,V+j)]}}function yl(l,a){const s=a[0],f=a[1],g=a[2],x=a[3],b=Math.min(s,f,g),C=Math.round((l+x)/b);return{r:Math.floor(C*b/s)%256,g:Math.floor(C*b/f)%256,b:Math.floor(C*b/g)%256}}Jt("DEMData",hv);class y1 extends io{constructor(a,s){super(a,f0,s)}_createColorRamp(a){const s={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Vl&&f._styleExpression.expression instanceof ea){this.colorRampExpression=f;const b=f._styleExpression.expression;s.elevationStops=b.labels,s.colorStops=[];for(const C of s.elevationStops)s.colorStops.push(b.evaluate({globals:{elevation:C}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[Br.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=a)return s;const g={elevationStops:[],colorStops:[]},x=(s.elevationStops.length-1)/(a-1);for(let b=0;b<s.elevationStops.length-.5;b+=x)g.elevationStops.push(s.elevationStops[Math.round(b)]),g.colorStops.push(s.colorStops[Math.round(b)]);return Tr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${a}, provided: ${s.elevationStops.length}`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(a,s,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(s),x=new lo({width:g.colorStops.length,height:1}),b=new lo({width:g.colorStops.length,height:1});for(let C=0;C<g.elevationStops.length;C++){const I=yl(g.elevationStops[C],f);b.setPixel(0,C,new Br(I.r/255,I.g/255,I.b/255,1)),x.setPixel(0,C,g.colorStops[C])}return this.colorRampTextures={elevationTexture:new ds(a,b,a.gl.RGBA),colorTexture:new ds(a,x,a.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const p0=gi([{name:"a_pos",components:2,type:"Int16"}],4),{members:m0}=p0;function om(l,a,s){const f=s.patternDependencies;let g=!1;for(const x of a){const b=x.paint.get(`${l}-pattern`);b.isConstant()||(g=!0);const C=b.constantOr(null);C&&(g=!0,f[C.to]=!0,f[C.from]=!0)}return g}function Eg(l,a,s,f,g){const{zoom:x}=f,b=g.patternDependencies;for(const C of a){const I=C.paint.get(`${l}-pattern`).value;if(I.kind!=="constant"){let j=I.evaluate({zoom:x-1},s,{},g.availableImages),V=I.evaluate({zoom:x},s,{},g.availableImages),G=I.evaluate({zoom:x+1},s,{},g.availableImages);j=j&&j.name?j.name:j,V=V&&V.name?V.name:V,G=G&&G.name?G.name:G,b[j]=!0,b[V]=!0,b[G]=!0,s.patterns[C.id]={min:j,mid:V,max:G}}}return s}function g0(l,a,s,f,g){let x;if(g===(function(b,C,I,j){let V=0;for(let G=C,Z=I-j;G<I;G+=j)V+=(b[Z]-b[G])*(b[G+1]+b[Z+1]),Z=G;return V})(l,a,s,f)>0)for(let b=a;b<s;b+=f)x=ac(b/f|0,l[b],l[b+1],x);else for(let b=s-f;b>=a;b-=f)x=ac(b/f|0,l[b],l[b+1],x);return x&&ga(x,x.next)&&(rh(x),x=x.next),x}function nu(l,a){if(!l)return l;a||(a=l);let s,f=l;do if(s=!1,f.steiner||!ga(f,f.next)&&li(f.prev,f,f.next)!==0)f=f.next;else{if(rh(f),f=a=f.prev,f===f.next)break;s=!0}while(s||f!==a);return a}function id(l,a,s,f,g,x,b){if(!l)return;!b&&x&&(function(I,j,V,G){let Z=I;do Z.z===0&&(Z.z=Wi(Z.x,Z.y,j,V,G)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==I);Z.prevZ.nextZ=null,Z.prevZ=null,(function(X){let ee,ne=1;do{let se,fe=X;X=null;let Pe=null;for(ee=0;fe;){ee++;let me=fe,ge=0;for(let Re=0;Re<ne&&(ge++,me=me.nextZ,me);Re++);let Ce=ne;for(;ge>0||Ce>0&&me;)ge!==0&&(Ce===0||!me||fe.z<=me.z)?(se=fe,fe=fe.nextZ,ge--):(se=me,me=me.nextZ,Ce--),Pe?Pe.nextZ=se:X=se,se.prevZ=Pe,Pe=se;fe=me}Pe.nextZ=null,ne*=2}while(ee>1)})(Z)})(l,f,g,x);let C=l;for(;l.prev!==l.next;){const I=l.prev,j=l.next;if(x?Pn(l,f,g,x):$s(l))a.push(I.i,l.i,j.i),rh(l),l=j.next,C=j.next;else if((l=j)===C){b?b===1?id(l=Sa(nu(l),a),a,s,f,g,x,2):b===2&&ia(l,a,s,f,g,x):id(nu(l),a,s,f,g,x,1);break}}}function $s(l){const a=l.prev,s=l,f=l.next;if(li(a,s,f)>=0)return!1;const g=a.x,x=s.x,b=f.x,C=a.y,I=s.y,j=f.y,V=Math.min(g,x,b),G=Math.min(C,I,j),Z=Math.max(g,x,b),X=Math.max(C,I,j);let ee=f.next;for(;ee!==a;){if(ee.x>=V&&ee.x<=Z&&ee.y>=G&&ee.y<=X&&eh(g,C,x,I,b,j,ee.x,ee.y)&&li(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Pn(l,a,s,f){const g=l.prev,x=l,b=l.next;if(li(g,x,b)>=0)return!1;const C=g.x,I=x.x,j=b.x,V=g.y,G=x.y,Z=b.y,X=Math.min(C,I,j),ee=Math.min(V,G,Z),ne=Math.max(C,I,j),se=Math.max(V,G,Z),fe=Wi(X,ee,a,s,f),Pe=Wi(ne,se,a,s,f);let me=l.prevZ,ge=l.nextZ;for(;me&&me.z>=fe&&ge&&ge.z<=Pe;){if(me.x>=X&&me.x<=ne&&me.y>=ee&&me.y<=se&&me!==g&&me!==b&&eh(C,V,I,G,j,Z,me.x,me.y)&&li(me.prev,me,me.next)>=0||(me=me.prevZ,ge.x>=X&&ge.x<=ne&&ge.y>=ee&&ge.y<=se&&ge!==g&&ge!==b&&eh(C,V,I,G,j,Z,ge.x,ge.y)&&li(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;me&&me.z>=fe;){if(me.x>=X&&me.x<=ne&&me.y>=ee&&me.y<=se&&me!==g&&me!==b&&eh(C,V,I,G,j,Z,me.x,me.y)&&li(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;ge&&ge.z<=Pe;){if(ge.x>=X&&ge.x<=ne&&ge.y>=ee&&ge.y<=se&&ge!==g&&ge!==b&&eh(C,V,I,G,j,Z,ge.x,ge.y)&&li(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function Sa(l,a){let s=l;do{const f=s.prev,g=s.next.next;!ga(f,g)&&Cg(f,s,s.next,g)&&th(f,g)&&th(g,f)&&(a.push(f.i,s.i,g.i),rh(s),rh(s.next),s=l=g),s=s.next}while(s!==l);return nu(s)}function ia(l,a,s,f,g,x){let b=l;do{let C=b.next.next;for(;C!==b.prev;){if(b.i!==C.i&&dv(b,C)){let I=Tg(b,C);return b=nu(b,b.next),I=nu(I,I.next),id(b,a,s,f,g,x,0),void id(I,a,s,f,g,x,0)}C=C.next}b=b.next}while(b!==l)}function $a(l,a){let s=l.x-a.x;return s===0&&(s=l.y-a.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(a.next.y-a.y)/(a.next.x-a.x)),s}function fs(l,a){const s=(function(g,x){let b=x;const C=g.x,I=g.y;let j,V=-1/0;if(ga(g,b))return b;do{if(ga(g,b.next))return b.next;if(I<=b.y&&I>=b.next.y&&b.next.y!==b.y){const ne=b.x+(I-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(ne<=C&&ne>V&&(V=ne,j=b.x<b.next.x?b:b.next,ne===C))return j}b=b.next}while(b!==x);if(!j)return null;const G=j,Z=j.x,X=j.y;let ee=1/0;b=j;do{if(C>=b.x&&b.x>=Z&&C!==b.x&&Jc(I<X?C:V,I,Z,X,I<X?V:C,I,b.x,b.y)){const ne=Math.abs(I-b.y)/(C-b.x);th(b,g)&&(ne<ee||ne===ee&&(b.x>j.x||b.x===j.x&&zf(j,b)))&&(j=b,ee=ne)}b=b.next}while(b!==G);return j})(l,a);if(!s)return a;const f=Tg(s,l);return nu(f,f.next),nu(s,s.next)}function zf(l,a){return li(l.prev,l,a.prev)<0&&li(a.next,l,l.next)<0}function Wi(l,a,s,f,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-f)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function sm(l){let a=l,s=l;do(a.x<s.x||a.x===s.x&&a.y<s.y)&&(s=a),a=a.next;while(a!==l);return s}function Jc(l,a,s,f,g,x,b,C){return(g-b)*(a-C)>=(l-b)*(x-C)&&(l-b)*(f-C)>=(s-b)*(a-C)&&(s-b)*(x-C)>=(g-b)*(f-C)}function eh(l,a,s,f,g,x,b,C){return!(l===b&&a===C)&&Jc(l,a,s,f,g,x,b,C)}function dv(l,a){return l.next.i!==a.i&&l.prev.i!==a.i&&!(function(s,f){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==f.i&&g.next.i!==f.i&&Cg(g,g.next,s,f))return!0;g=g.next}while(g!==s);return!1})(l,a)&&(th(l,a)&&th(a,l)&&(function(s,f){let g=s,x=!1;const b=(s.x+f.x)/2,C=(s.y+f.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&b<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==s);return x})(l,a)&&(li(l.prev,l,a.prev)||li(l,a.prev,a))||ga(l,a)&&li(l.prev,l,l.next)>0&&li(a.prev,a,a.next)>0)}function li(l,a,s){return(a.y-l.y)*(s.x-a.x)-(a.x-l.x)*(s.y-a.y)}function ga(l,a){return l.x===a.x&&l.y===a.y}function Cg(l,a,s,f){const g=Us(li(l,a,s)),x=Us(li(l,a,f)),b=Us(li(s,f,l)),C=Us(li(s,f,a));return g!==x&&b!==C||!(g!==0||!ic(l,s,a))||!(x!==0||!ic(l,f,a))||!(b!==0||!ic(s,l,f))||!(C!==0||!ic(s,a,f))}function ic(l,a,s){return a.x<=Math.max(l.x,s.x)&&a.x>=Math.min(l.x,s.x)&&a.y<=Math.max(l.y,s.y)&&a.y>=Math.min(l.y,s.y)}function Us(l){return l>0?1:l<0?-1:0}function th(l,a){return li(l.prev,l,l.next)<0?li(l,a,l.next)>=0&&li(l,l.prev,a)>=0:li(l,a,l.prev)<0||li(l,l.next,a)<0}function Tg(l,a){const s=iu(l.i,l.x,l.y),f=iu(a.i,a.x,a.y),g=l.next,x=a.prev;return l.next=a,a.prev=l,s.next=g,g.prev=s,f.next=s,s.prev=f,x.next=f,f.prev=x,f}function ac(l,a,s,f){const g=iu(l,a,s);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function rh(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function iu(l,a,s){return{i:l,x:a,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class oc{constructor(a,s){if(s>a)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=a,this._minGranularity=s}getGranularityForZoomLevel(a){return Math.max(Math.floor(this._baseZoomGranularity/(1<<a)),this._minGranularity,1)}}class nh{constructor(a){this.fill=a.fill,this.line=a.line,this.tile=a.tile,this.stencil=a.stencil,this.circle=a.circle}}nh.noSubdivision=new nh({fill:new oc(0,0),line:new oc(0,0),tile:new oc(0,0),stencil:new oc(0,0),circle:1}),Jt("SubdivisionGranularityExpression",oc),Jt("SubdivisionGranularitySetting",nh);const ih=-32768,ah=32767;class Mg{constructor(a,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=a,this._granularityCellSize=Qe/a,this._canonical=s}_getKey(a,s){return(a+=32768)<<16|s+32768}_vertexToIndex(a,s){if(a<-32768||s<-32768||a>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(a),g=0|Math.round(s),x=this._getKey(f,g);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(f,g),b}_subdivideTrianglesScanline(a){if(this._granularity<2)return(function(g,x){const b=[];for(let C=0;C<x.length;C+=3){const I=x[C],j=x[C+1],V=x[C+2],G=g[2*I],Z=g[2*I+1];(g[2*j]-G)*(g[2*V+1]-Z)-(g[2*j+1]-Z)*(g[2*V]-G)>0?(b.push(I),b.push(V),b.push(j)):(b.push(I),b.push(j),b.push(V))}return b})(this._vertexBuffer,a);const s=[],f=a.length;for(let g=0;g<f;g+=3){const x=[a[g+0],a[g+1],a[g+2]],b=[this._vertexBuffer[2*a[g+0]+0],this._vertexBuffer[2*a[g+0]+1],this._vertexBuffer[2*a[g+1]+0],this._vertexBuffer[2*a[g+1]+1],this._vertexBuffer[2*a[g+2]+0],this._vertexBuffer[2*a[g+2]+1]];let C=1/0,I=1/0,j=-1/0,V=-1/0;for(let ne=0;ne<3;ne++){const se=b[2*ne],fe=b[2*ne+1];C=Math.min(C,se),j=Math.max(j,se),I=Math.min(I,fe),V=Math.max(V,fe)}if(C===j||I===V)continue;const G=Math.floor(C/this._granularityCellSize),Z=Math.ceil(j/this._granularityCellSize),X=Math.floor(I/this._granularityCellSize),ee=Math.ceil(V/this._granularityCellSize);if(G!==Z||X!==ee)for(let ne=X;ne<ee;ne++){const se=this._scanlineGenerateVertexRingForCellRow(ne,b,x);vl(this._vertexBuffer,se,s)}else s.push(...x)}return s}_scanlineGenerateVertexRingForCellRow(a,s,f){const g=a*this._granularityCellSize,x=g+this._granularityCellSize,b=[];for(let C=0;C<3;C++){const I=s[2*C],j=s[2*C+1],V=s[2*(C+1)%6],G=s[(2*(C+1)+1)%6],Z=s[2*(C+2)%6],X=s[(2*(C+2)+1)%6],ee=V-I,ne=G-j,se=ee===0,fe=ne===0,Pe=(g-j)/ne,me=(x-j)/ne,ge=Math.min(Pe,me),Ce=Math.max(Pe,me);if(!fe&&(ge>=1||Ce<=0)||fe&&(j<g||j>x)){G>=g&&G<=x&&b.push(f[(C+1)%3]);continue}!fe&&ge>0&&b.push(this._vertexToIndex(I+ee*ge,j+ne*ge));const Re=I+ee*Math.max(ge,0),nt=I+ee*Math.min(Ce,1);se||this._generateIntraEdgeVertices(b,I,j,V,G,Re,nt),!fe&&Ce<1&&b.push(this._vertexToIndex(I+ee*Ce,j+ne*Ce)),(fe||G>=g&&G<=x)&&b.push(f[(C+1)%3]),!fe&&(G<=g||G>=x)&&this._generateInterEdgeVertices(b,I,j,V,G,Z,X,nt,g,x)}return b}_generateIntraEdgeVertices(a,s,f,g,x,b,C){const I=g-s,j=x-f,V=j===0,G=V?Math.min(s,g):Math.min(b,C),Z=V?Math.max(s,g):Math.max(b,C),X=Math.floor(G/this._granularityCellSize)+1,ee=Math.ceil(Z/this._granularityCellSize)-1;if(V?s<g:b<C)for(let ne=X;ne<=ee;ne++){const se=ne*this._granularityCellSize;a.push(this._vertexToIndex(se,f+j*(se-s)/I))}else for(let ne=ee;ne>=X;ne--){const se=ne*this._granularityCellSize;a.push(this._vertexToIndex(se,f+j*(se-s)/I))}}_generateInterEdgeVertices(a,s,f,g,x,b,C,I,j,V){const G=x-f,Z=b-g,X=C-x,ee=(j-x)/X,ne=(V-x)/X,se=Math.min(ee,ne),fe=Math.max(ee,ne),Pe=g+Z*se;let me=Math.floor(Math.min(Pe,I)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(Pe,I)/this._granularityCellSize)-1,Ce=I<Pe;const Re=X===0;if(Re&&(C===j||C===V))return;if(Re||se>=1||fe<=0){const kt=f-C,_t=b+(s-b)*Math.min((j-C)/kt,(V-C)/kt);me=Math.floor(Math.min(_t,I)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(_t,I)/this._granularityCellSize)-1,Ce=I<_t}const nt=G>0?V:j;if(Ce)for(let kt=me;kt<=ge;kt++)a.push(this._vertexToIndex(kt*this._granularityCellSize,nt));else for(let kt=ge;kt>=me;kt--)a.push(this._vertexToIndex(kt*this._granularityCellSize,nt))}_generateOutline(a){const s=[];for(const f of a){const g=Go(f,this._granularity,!0),x=this._pointArrayToIndices(g),b=[];for(let C=1;C<x.length;C++)b.push(x[C-1]),b.push(x[C]);s.push(b)}return s}_handlePoles(a){let s=!1,f=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(s||f)&&this._fillPoles(a,s,f)}_ensureNoPoleVertices(){const a=this._vertexBuffer;for(let s=0;s<a.length;s+=2){const f=a[s+1];f===ih&&(a[s+1]=-32767),f===ah&&(a[s+1]=32766)}}_generatePoleQuad(a,s,f,g,x,b){g>x!=(b===ih)?(a.push(s),a.push(f),a.push(this._vertexToIndex(g,b)),a.push(f),a.push(this._vertexToIndex(x,b)),a.push(this._vertexToIndex(g,b))):(a.push(f),a.push(s),a.push(this._vertexToIndex(g,b)),a.push(this._vertexToIndex(x,b)),a.push(f),a.push(this._vertexToIndex(g,b)))}_fillPoles(a,s,f){const g=this._vertexBuffer,x=Qe,b=a.length;for(let C=2;C<b;C+=3){const I=a[C-2],j=a[C-1],V=a[C],G=g[2*I],Z=g[2*I+1],X=g[2*j],ee=g[2*j+1],ne=g[2*V],se=g[2*V+1];s&&(Z===0&&ee===0&&this._generatePoleQuad(a,I,j,G,X,ih),ee===0&&se===0&&this._generatePoleQuad(a,j,V,X,ne,ih),se===0&&Z===0&&this._generatePoleQuad(a,V,I,ne,G,ih)),f&&(Z===x&&ee===x&&this._generatePoleQuad(a,I,j,G,X,ah),ee===x&&se===x&&this._generatePoleQuad(a,j,V,X,ne,ah),se===x&&Z===x&&this._generatePoleQuad(a,V,I,ne,G,ah))}}_initializeVertices(a){for(let s=0;s<a.length;s+=2)this._vertexToIndex(a[s],a[s+1])}subdividePolygonInternal(a,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:g}=(function(C){const I=[],j=[];for(const V of C)if(V.length!==0){V!==C[0]&&I.push(j.length/2);for(let G=0;G<V.length;G++)j.push(V[G].x),j.push(V[G].y)}return{flattened:j,holeIndices:I}})(a);let x;this._initializeVertices(f);try{const C=(function(j,V,G=2){const Z=V&&V.length,X=Z?V[0]*G:j.length;let ee=g0(j,0,X,G,!0);const ne=[];if(!ee||ee.next===ee.prev)return ne;let se,fe,Pe;if(Z&&(ee=(function(me,ge,Ce,Re){const nt=[];for(let kt=0,_t=ge.length;kt<_t;kt++){const Ot=g0(me,ge[kt]*Re,kt<_t-1?ge[kt+1]*Re:me.length,Re,!1);Ot===Ot.next&&(Ot.steiner=!0),nt.push(sm(Ot))}nt.sort($a);for(let kt=0;kt<nt.length;kt++)Ce=fs(nt[kt],Ce);return Ce})(j,V,ee,G)),j.length>80*G){se=j[0],fe=j[1];let me=se,ge=fe;for(let Ce=G;Ce<X;Ce+=G){const Re=j[Ce],nt=j[Ce+1];Re<se&&(se=Re),nt<fe&&(fe=nt),Re>me&&(me=Re),nt>ge&&(ge=nt)}Pe=Math.max(me-se,ge-fe),Pe=Pe!==0?32767/Pe:0}return id(ee,ne,G,se,fe,Pe,0),ne})(f,g),I=this._convertIndices(f,C);x=this._subdivideTrianglesScanline(I)}catch(C){console.error(C)}let b=[];return s&&(b=this._generateOutline(a)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(a,s){const f=[];for(let g=0;g<s.length;g++)f.push(this._vertexToIndex(a[2*s[g]],a[2*s[g]+1]));return f}_pointArrayToIndices(a){const s=[];for(let f=0;f<a.length;f++){const g=a[f];s.push(this._vertexToIndex(g.x,g.y))}return s}}function uo(l,a,s,f=!0){return new Mg(s,a).subdividePolygonInternal(l,f)}function Go(l,a,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const f=l[0],g=l[l.length-1],x=s&&(f.x!==g.x||f.y!==g.y);if(a<2)return x?[...l,l[0]]:[...l];const b=Math.floor(Qe/a),C=[];C.push(new _(l[0].x,l[0].y));const I=l.length,j=x?I:I-1;for(let V=0;V<j;V++){const G=l[V],Z=V<I-1?l[V+1]:l[0],X=G.x,ee=G.y,ne=Z.x,se=Z.y,fe=X!==ne,Pe=ee!==se;if(!fe&&!Pe)continue;const me=ne-X,ge=se-ee,Ce=Math.abs(me),Re=Math.abs(ge);let nt=X,kt=ee;for(;;){const Ot=me>0?(Math.floor(nt/b)+1)*b:(Math.ceil(nt/b)-1)*b,Kt=ge>0?(Math.floor(kt/b)+1)*b:(Math.ceil(kt/b)-1)*b,Rt=Math.abs(nt-Ot),Ct=Math.abs(kt-Kt),dt=Math.abs(nt-ne),sr=Math.abs(kt-se),nr=fe?Rt/Ce:Number.POSITIVE_INFINITY,lr=Pe?Ct/Re:Number.POSITIVE_INFINITY;if((dt<=Rt||!fe)&&(sr<=Ct||!Pe))break;if(nr<lr&&fe||!Pe){nt=Ot,kt+=ge*nr;const er=new _(nt,Math.round(kt));C[C.length-1].x===er.x&&C[C.length-1].y===er.y||C.push(er)}else{nt+=me*lr,kt=Kt;const er=new _(Math.round(nt),kt);C[C.length-1].x===er.x&&C[C.length-1].y===er.y||C.push(er)}}const _t=new _(ne,se);C[C.length-1].x===_t.x&&C[C.length-1].y===_t.y||C.push(_t)}return C}function vl(l,a,s){if(a.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,g=l[2*a[0]];for(let I=1;I<a.length;I++){const j=l[2*a[I]];j<g&&(g=j,f=I)}const x=a.length;let b=f,C=(b+1)%x;for(;;){const I=b-1>=0?b-1:x-1,j=(C+1)%x,V=l[2*a[I]],G=l[2*a[j]],Z=l[2*a[b]],X=l[2*a[b]+1],ee=l[2*a[C]+1];let ne=!1;if(V<G)ne=!0;else if(V>G)ne=!1;else{const se=ee-X,fe=-(l[2*a[C]]-Z),Pe=X<ee?1:-1;((V-Z)*se+(l[2*a[I]+1]-X)*fe)*Pe>((G-Z)*se+(l[2*a[j]+1]-X)*fe)*Pe&&(ne=!0)}if(ne){const se=a[I],fe=a[b],Pe=a[C];se!==fe&&se!==Pe&&fe!==Pe&&s.push(Pe,fe,se),b--,b<0&&(b=x-1)}else{const se=a[j],fe=a[b],Pe=a[C];se!==fe&&se!==Pe&&fe!==Pe&&s.push(Pe,fe,se),C++,C>=x&&(C=0)}if(I===j)break}}function Co(l,a,s,f,g,x,b,C,I){const j=g.length/2,V=b&&C&&I;if(j<Yt.MAX_VERTEX_ARRAY_LENGTH){const G=a.prepareSegment(j,s,f),Z=G.vertexLength;for(let ne=0;ne<x.length;ne+=3)f.emplaceBack(Z+x[ne],Z+x[ne+1],Z+x[ne+2]);let X,ee;G.vertexLength+=j,G.primitiveLength+=x.length/3,V&&(ee=b.prepareSegment(j,s,C),X=ee.vertexLength,ee.vertexLength+=j);for(let ne=0;ne<g.length;ne+=2)l(g[ne],g[ne+1]);if(V)for(let ne=0;ne<I.length;ne++){const se=I[ne];for(let fe=1;fe<se.length;fe+=2)C.emplaceBack(X+se[fe-1],X+se[fe]);ee.primitiveLength+=se.length/2}}else(function(G,Z,X,ee,ne,se){const fe=[];for(let Re=0;Re<ee.length/2;Re++)fe.push(-1);const Pe={count:0};let me=0,ge=G.getOrCreateLatestSegment(Z,X),Ce=ge.vertexLength;for(let Re=2;Re<ne.length;Re+=3){const nt=ne[Re-2],kt=ne[Re-1],_t=ne[Re];let Ot=fe[nt]<me,Kt=fe[kt]<me,Rt=fe[_t]<me;ge.vertexLength+((Ot?1:0)+(Kt?1:0)+(Rt?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ge=G.createNewSegment(Z,X),me=Pe.count,Ot=!0,Kt=!0,Rt=!0,Ce=0);const Ct=Nf(fe,ee,se,Pe,nt,Ot,ge),dt=Nf(fe,ee,se,Pe,kt,Kt,ge),sr=Nf(fe,ee,se,Pe,_t,Rt,ge);X.emplaceBack(Ce+Ct-me,Ce+dt-me,Ce+sr-me),ge.primitiveLength++}})(a,s,f,g,x,l),V&&(function(G,Z,X,ee,ne,se){const fe=[];for(let Re=0;Re<ee.length/2;Re++)fe.push(-1);const Pe={count:0};let me=0,ge=G.getOrCreateLatestSegment(Z,X),Ce=ge.vertexLength;for(let Re=0;Re<ne.length;Re++){const nt=ne[Re];for(let kt=1;kt<ne[Re].length;kt+=2){const _t=nt[kt-1],Ot=nt[kt];let Kt=fe[_t]<me,Rt=fe[Ot]<me;ge.vertexLength+((Kt?1:0)+(Rt?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ge=G.createNewSegment(Z,X),me=Pe.count,Kt=!0,Rt=!0,Ce=0);const Ct=Nf(fe,ee,se,Pe,_t,Kt,ge),dt=Nf(fe,ee,se,Pe,Ot,Rt,ge);X.emplaceBack(Ce+Ct-me,Ce+dt-me),ge.primitiveLength++}}})(b,s,C,g,I,l),a.forceNewSegmentOnNextPrepare(),b==null||b.forceNewSegmentOnNextPrepare()}function Nf(l,a,s,f,g,x,b){if(x){const C=f.count;return s(a[2*g],a[2*g+1]),l[g]=f.count,f.count++,b.vertexLength++,C}return l[g]}class lm{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ve,this.indexArray=new st,this.indexArray2=new Nt,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.hasDependencies=om("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),b=[];for(const{feature:C,id:I,index:j,sourceLayerIndex:V}of a){const G=this.layers[0]._featureFilter.needGeometry,Z=ml(C,G);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),Z,f))continue;const X=x?g.evaluate(Z,{},f,s.availableImages):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:V,index:j,geometry:G?Z.geometry:Vs(C),patterns:{},sortKey:X};b.push(ee)}x&&b.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of b){const{geometry:I,index:j,sourceLayerIndex:V}=C;if(this.hasDependencies){const G=Eg("fill",this.layers,C,{zoom:this.zoom},s);this.patternFeatures.push(G)}else this.addFeature(C,I,j,f,{},s.subdivisionGranularity);s.featureIndex.insert(a[j].feature,I,j,V,this.index)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}addFeatures(a,s,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,f,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,m0),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,s,f,g,x,b){for(const C of Lh(s,500)){const I=uo(C,g,b.fill.getGranularityForZoomLevel(g.z)),j=this.layoutVertexArray;Co(((V,G)=>{j.emplaceBack(V,G)}),this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles,this.segments2,this.indexArray2,I.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,canonical:g})}}let kg,y0;Jt("FillBucket",lm,{omit:["layers","patternFeatures"]});var oh={get paint(){return y0=y0||new xi({"fill-antialias":new ar(tt.paint_fill["fill-antialias"]),"fill-opacity":new gr(tt.paint_fill["fill-opacity"]),"fill-color":new gr(tt.paint_fill["fill-color"]),"fill-outline-color":new gr(tt.paint_fill["fill-outline-color"]),"fill-translate":new ar(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new ar(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xu(tt.paint_fill["fill-pattern"])})},get layout(){return kg=kg||new xi({"fill-sort-key":new gr(tt.layout_fill["fill-sort-key"])})}};class v0 extends io{constructor(a,s){super(a,oh,s)}recalculate(a,s){super.recalculate(a,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new lm(a)}queryRadius(){return tm(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:a,geometry:s,transform:f,pixelsToTileUnits:g}){return iv(Lf(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,g),s)}isTileClipped(){return!0}}const fv=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ad=gi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pv}=fv;class _l{constructor(a,s,f,g,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=a,this._geometry=-1,this._keys=g,this._values=x,a.readFields(_0,this,s)}loadGeometry(){const a=this._pbf;a.pos=this._geometry;const s=a.readVarint()+a.pos,f=[];let g,x=1,b=0,C=0,I=0;for(;a.pos<s;){if(b<=0){const j=a.readVarint();x=7&j,b=j>>3}if(b--,x===1||x===2)C+=a.readSVarint(),I+=a.readSVarint(),x===1&&(g&&f.push(g),g=[]),g&&g.push(new _(C,I));else{if(x!==7)throw new Error(`unknown command ${x}`);g&&g.push(g[0].clone())}}return g&&f.push(g),f}bbox(){const a=this._pbf;a.pos=this._geometry;const s=a.readVarint()+a.pos;let f=1,g=0,x=0,b=0,C=1/0,I=-1/0,j=1/0,V=-1/0;for(;a.pos<s;){if(g<=0){const G=a.readVarint();f=7&G,g=G>>3}if(g--,f===1||f===2)x+=a.readSVarint(),b+=a.readSVarint(),x<C&&(C=x),x>I&&(I=x),b<j&&(j=b),b>V&&(V=b);else if(f!==7)throw new Error(`unknown command ${f}`)}return[C,j,I,V]}toGeoJSON(a,s,f){const g=this.extent*Math.pow(2,f),x=this.extent*a,b=this.extent*s,C=this.loadGeometry();function I(Z){return[360*(Z.x+x)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+b)/g)*Math.PI))-90]}function j(Z){return Z.map(I)}let V;if(this.type===1){const Z=[];for(const ee of C)Z.push(ee[0]);const X=j(Z);V=Z.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){const Z=C.map(j);V=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=mv(C),X=[];for(const ee of Z)X.push(ee.map(j));V=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}const G={type:"Feature",geometry:V,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function _0(l,a,s){l===1?a.id=s.readVarint():l===2?(function(f,g){const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=g._keys[f.readVarint()],C=g._values[f.readVarint()];g.properties[b]=C}})(s,a):l===3?a.type=s.readVarint():l===4&&(a._geometry=s.pos)}function mv(l){const a=l.length;if(a<=1)return[l];const s=[];let f,g;for(let x=0;x<a;x++){const b=gv(l[x]);b!==0&&(g===void 0&&(g=b<0),g===b<0?(f&&s.push(f),f=[l[x]]):f&&f.push(l[x]))}return f&&s.push(f),s}function gv(l){let a=0;for(let s,f,g=0,x=l.length,b=x-1;g<x;b=g++)s=l[g],f=l[b],a+=(f.x-s.x)*(s.y+f.y);return a}_l.types=["Unknown","Point","LineString","Polygon"];class Ag{constructor(a,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(v1,this,s),this.length=this._features.length}feature(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];const s=this._pbf.readVarint()+this._pbf.pos;return new _l(this._pbf,s,this.extent,this._keys,this._values)}}function v1(l,a,s){l===15?a.version=s.readVarint():l===1?a.name=s.readString():l===5?a.extent=s.readVarint():l===2?a._features.push(s.pos):l===3?a._keys.push(s.readString()):l===4&&a._values.push((function(f){let g=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=f.readVarint()>>3;g=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}if(g==null)throw new Error("unknown feature value");return g})(s))}class x0{constructor(a,s){this.layers=a.readFields(b0,{},s)}}function b0(l,a,s){if(l===3){const f=new Ag(s,s.readVarint()+s.pos);f.length&&(a[f.name]=f)}}const Ig=Math.pow(2,13);function xl(l,a,s,f,g,x,b,C){l.emplaceBack(a,s,2*Math.floor(f*Ig)+b,g*Ig*2,x*Ig*2,Math.round(C))}class yv{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.centroidVertexArray=new ye,this.indexArray=new st,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.features=[],this.hasDependencies=om("fill-extrusion",this.layers,s);for(const{feature:g,id:x,index:b,sourceLayerIndex:C}of a){const I=this.layers[0]._featureFilter.needGeometry,j=ml(g,I);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),j,f))continue;const V={id:x,sourceLayerIndex:C,index:b,geometry:I?j.geometry:Vs(g),properties:g.properties,type:g.type,patterns:{}};this.hasDependencies?this.features.push(Eg("fill-extrusion",this.layers,V,{zoom:this.zoom},s)):this.addFeature(V,V.geometry,b,f,{},s.subdivisionGranularity),s.featureIndex.insert(g,V.geometry,b,C,this.index,!0)}}addFeatures(a,s,f){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,s,f,a.subdivisionGranularity)}}update(a,s,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pv),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,ad.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,s,f,g,x,b){for(const C of Lh(s,500)){const I={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(I,g,a,C,b);const V=this.layoutVertexArray.length-j,G=Math.floor(I.x/I.sampleCount),Z=Math.floor(I.y/I.sampleCount);for(let X=0;X<V;X++)this.centroidVertexArray.emplaceBack(G,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,canonical:g})}processPolygon(a,s,f,g,x){if(g.length<1||Pi(g[0]))return;for(const G of g)G.length!==0&&Ff(a,G);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(s.z),I=_l.types[f.type]==="Polygon";for(const G of g){if(G.length===0||Pi(G))continue;const Z=Go(G,C,I);this._generateSideFaces(Z,b)}if(!I)return;const j=uo(g,s,C,!1),V=this.layoutVertexArray;Co(((G,Z)=>{xl(V,G,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(a,s){let f=0;for(let g=1;g<a.length;g++){const x=a[g],b=a[g-1];if(w0(x,b))continue;s.segment.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(b)._perp()._unit(),I=b.dist(x);f+I>32768&&(f=0),xl(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,f),xl(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,f),f+=I,xl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,0,f),xl(this.layoutVertexArray,b.x,b.y,C.x,C.y,0,1,f);const j=s.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function Ff(l,a){for(let s=0;s<a.length;s++){const f=a[s];s===a.length-1&&a[0].x===f.x&&a[0].y===f.y||(l.x+=f.x,l.y+=f.y,l.sampleCount++)}}function w0(l,a){return l.x===a.x&&(l.x<0||l.x>Qe)||l.y===a.y&&(l.y<0||l.y>Qe)}function Pi(l){return l.every((a=>a.x<0))||l.every((a=>a.x>Qe))||l.every((a=>a.y<0))||l.every((a=>a.y>Qe))}let S0;Jt("FillExtrusionBucket",yv,{omit:["layers","features"]});var P0={get paint(){return S0=S0||new xi({"fill-extrusion-opacity":new ar(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gr(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ar(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ar(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xu(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gr(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gr(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ar(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _1 extends io{constructor(a,s){super(a,P0,s)}createBucket(a){return new yv(a)}queryRadius(){return tm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b,pixelPosMatrix:C}){const I=Lf(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),j=this.paint.get("fill-extrusion-height").evaluate(s,f),V=this.paint.get("fill-extrusion-base").evaluate(s,f),G=(function(X,ee){const ne=[];for(const se of X){const fe=[se.x,se.y,0,1];ut(fe,fe,ee),ne.push(new _(fe[0]/fe[3],fe[1]/fe[3]))}return ne})(I,C),Z=(function(X,ee,ne,se){const fe=[],Pe=[],me=se[8]*ee,ge=se[9]*ee,Ce=se[10]*ee,Re=se[11]*ee,nt=se[8]*ne,kt=se[9]*ne,_t=se[10]*ne,Ot=se[11]*ne;for(const Kt of X){const Rt=[],Ct=[];for(const dt of Kt){const sr=dt.x,nr=dt.y,lr=se[0]*sr+se[4]*nr+se[12],er=se[1]*sr+se[5]*nr+se[13],vr=se[2]*sr+se[6]*nr+se[14],fn=se[3]*sr+se[7]*nr+se[15],en=vr+Ce,yi=fn+Re,fo=lr+nt,oa=er+kt,vi=vr+_t,di=fn+Ot,An=new _((lr+me)/yi,(er+ge)/yi);An.z=en/yi,Rt.push(An);const Ci=new _(fo/di,oa/di);Ci.z=vi/di,Ct.push(Ci)}fe.push(Rt),Pe.push(Ct)}return[fe,Pe]})(g,V,j,C);return(function(X,ee,ne){let se=1/0;iv(ne,ee)&&(se=vv(ne,ee[0]));for(let fe=0;fe<ee.length;fe++){const Pe=ee[fe],me=X[fe];for(let ge=0;ge<Pe.length-1;ge++){const Ce=Pe[ge],Re=[Ce,Pe[ge+1],me[ge+1],me[ge],Ce];Yc(ne,Re)&&(se=Math.min(se,vv(ne,Re)))}}return se!==1/0&&se})(Z[0],Z[1],G)}}function um(l,a){return l.x*a.x+l.y*a.y}function vv(l,a){if(l.length===1){let s=0;const f=a[s++];let g;for(;!g||f.equals(g);)if(g=a[s++],!g)return 1/0;for(;s<a.length;s++){const x=a[s],b=l[0],C=g.sub(f),I=x.sub(f),j=b.sub(f),V=um(C,C),G=um(C,I),Z=um(I,I),X=um(j,C),ee=um(j,I),ne=V*Z-G*G,se=(Z*X-G*ee)/ne,fe=(V*ee-G*X)/ne,Pe=f.z*(1-se-fe)+g.z*se+x.z*fe;if(isFinite(Pe))return Pe}return 1/0}{let s=1/0;for(const f of a)s=Math.min(s,f.z);return s}}const E0=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:x1}=E0,qs=gi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_v}=qs,b1=Math.cos(Math.PI/180*37.5),sc=Math.pow(2,14)/.5;class Bf{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=a.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Le,this.layoutVertexArray2=new Se,this.indexArray=new st,this.programConfigurations=new ru(a.layers,a.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(a,s,f){this.hasDependencies=om("line",this.layers,s)||this.hasLineDasharray(this.layers);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),b=[];for(const{feature:C,id:I,index:j,sourceLayerIndex:V}of a){const G=this.layers[0]._featureFilter.needGeometry,Z=ml(C,G);if(!this.layers[0]._featureFilter.filter(new Mn(this.zoom),Z,f))continue;const X=x?g.evaluate(Z,{},f):void 0,ee={id:I,properties:C.properties,type:C.type,sourceLayerIndex:V,index:j,geometry:G?Z.geometry:Vs(C),patterns:{},dashes:{},sortKey:X};b.push(ee)}x&&b.sort(((C,I)=>C.sortKey-I.sortKey));for(const C of b){const{geometry:I,index:j,sourceLayerIndex:V}=C;this.hasDependencies?(om("line",this.layers,s)?Eg("line",this.layers,C,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,C,this.zoom,s),this.patternFeatures.push(C)):this.addFeature(C,I,j,f,{},{},s.subdivisionGranularity),s.featureIndex.insert(a[j].feature,I,j,V,this.index)}}update(a,s,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,{imagePositions:f,dashPositions:g})}addFeatures(a,s,f,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,f,g,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,_v)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,x1),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,s,f,g,x,b,C){const I=this.layers[0].layout,j=I.get("line-join").evaluate(a,{}),V=I.get("line-cap"),G=I.get("line-miter-limit"),Z=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const X of s)this.addLine(X,a,j,V,G,Z,g,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{imagePositions:x,dashPositions:b,canonical:g})}addLine(a,s,f,g,x,b,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a=Go(a,C?I.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<a.length-1;me++)this.totalDistance+=a[me].dist(a[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=_l.types[s.type]==="Polygon";let V=a.length;for(;V>=2&&a[V-1].equals(a[V-2]);)V--;let G=0;for(;G<V-1&&a[G].equals(a[G+1]);)G++;if(V<(j?3:2))return;f==="bevel"&&(x=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*V,this.layoutVertexArray,this.indexArray);let ee,ne,se,fe,Pe;this.e1=this.e2=-1,j&&(ee=a[V-2],Pe=a[G].sub(ee)._unit()._perp());for(let me=G;me<V;me++){if(se=me===V-1?j?a[G+1]:void 0:a[me+1],se&&a[me].equals(se))continue;Pe&&(fe=Pe),ee&&(ne=ee),ee=a[me],Pe=se?se.sub(ee)._unit()._perp():fe,fe=fe||Pe;let ge=fe.add(Pe);ge.x===0&&ge.y===0||ge._unit();const Ce=fe.x*Pe.x+fe.y*Pe.y,Re=ge.x*Pe.x+ge.y*Pe.y,nt=Re!==0?1/Re:1/0,kt=2*Math.sqrt(2-2*Re),_t=Re<b1&&ne&&se,Ot=fe.x*Pe.y-fe.y*Pe.x>0;if(_t&&me>G){const Ct=ee.dist(ne);if(Ct>2*Z){const dt=ee.sub(ee.sub(ne)._mult(Z/Ct)._round());this.updateDistance(ne,dt),this.addCurrentVertex(dt,fe,0,0,X),ne=dt}}const Kt=ne&&se;let Rt=Kt?f:j?"butt":g;if(Kt&&Rt==="round"&&(nt<b?Rt="miter":nt<=2&&(Rt="fakeround")),Rt==="miter"&&nt>x&&(Rt="bevel"),Rt==="bevel"&&(nt>2&&(Rt="flipbevel"),nt<x&&(Rt="miter")),ne&&this.updateDistance(ne,ee),Rt==="miter")ge._mult(nt),this.addCurrentVertex(ee,ge,0,0,X);else if(Rt==="flipbevel"){if(nt>100)ge=Pe.mult(-1);else{const Ct=nt*fe.add(Pe).mag()/fe.sub(Pe).mag();ge._perp()._mult(Ct*(Ot?-1:1))}this.addCurrentVertex(ee,ge,0,0,X),this.addCurrentVertex(ee,ge.mult(-1),0,0,X)}else if(Rt==="bevel"||Rt==="fakeround"){const Ct=-Math.sqrt(nt*nt-1),dt=Ot?Ct:0,sr=Ot?0:Ct;if(ne&&this.addCurrentVertex(ee,fe,dt,sr,X),Rt==="fakeround"){const nr=Math.round(180*kt/Math.PI/20);for(let lr=1;lr<nr;lr++){let er=lr/nr;if(er!==.5){const fn=er-.5;er+=er*fn*(er-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*fn*fn+(.848013+Ce*(.215638*Ce-1.06021)))}const vr=Pe.sub(fe)._mult(er)._add(fe)._unit()._mult(Ot?-1:1);this.addHalfVertex(ee,vr.x,vr.y,!1,Ot,0,X)}}se&&this.addCurrentVertex(ee,Pe,-dt,-sr,X)}else if(Rt==="butt")this.addCurrentVertex(ee,ge,0,0,X);else if(Rt==="square"){const Ct=ne?1:-1;this.addCurrentVertex(ee,ge,Ct,Ct,X)}else Rt==="round"&&(ne&&(this.addCurrentVertex(ee,fe,0,0,X),this.addCurrentVertex(ee,fe,1,1,X,!0)),se&&(this.addCurrentVertex(ee,Pe,-1,-1,X,!0),this.addCurrentVertex(ee,Pe,0,0,X)));if(_t&&me<V-1){const Ct=ee.dist(se);if(Ct>2*Z){const dt=ee.add(se.sub(ee)._mult(Z/Ct)._round());this.updateDistance(ee,dt),this.addCurrentVertex(dt,Pe,0,0,X),ee=dt}}}}addCurrentVertex(a,s,f,g,x,b=!1){const C=s.y*g-s.x,I=-s.y-s.x*g;this.addHalfVertex(a,s.x+s.y*f,s.y-s.x*f,b,!1,f,x),this.addHalfVertex(a,C,I,b,!0,-g,x),this.distance>sc/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,s,f,g,x,b))}addHalfVertex({x:a,y:s},f,g,x,b,C,I){const j=.5*(this.lineClips?this.scaledDistance*(sc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(x?1:0),(s<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,V,this.e2),I.primitiveLength++),b?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,s){this.distance+=a.dist(s),this.updateScaledDistance()}hasLineDasharray(a){for(const s of a){const f=s.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(a,s,f,g){for(const x of a){const b=x.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const C=x.layout.get("line-cap")==="round",I={dasharray:b.value.evaluate({zoom:f-1},s,{}),round:C},j={dasharray:b.value.evaluate({zoom:f},s,{}),round:C},V={dasharray:b.value.evaluate({zoom:f+1},s,{}),round:C},G=`${I.dasharray.join(",")},${I.round}`,Z=`${j.dasharray.join(",")},${j.round}`,X=`${V.dasharray.join(",")},${V.round}`;g.dashDependencies[G]=I,g.dashDependencies[Z]=j,g.dashDependencies[X]=V,s.dashes[x.id]={min:G,mid:Z,max:X}}}}let sh,cm;Jt("LineBucket",Bf,{omit:["layers","patternFeatures"]});var Og={get paint(){return cm=cm||new xi({"line-opacity":new gr(tt.paint_line["line-opacity"]),"line-color":new gr(tt.paint_line["line-color"]),"line-translate":new ar(tt.paint_line["line-translate"]),"line-translate-anchor":new ar(tt.paint_line["line-translate-anchor"]),"line-width":new gr(tt.paint_line["line-width"]),"line-gap-width":new gr(tt.paint_line["line-gap-width"]),"line-offset":new gr(tt.paint_line["line-offset"]),"line-blur":new gr(tt.paint_line["line-blur"]),"line-dasharray":new Xu(tt.paint_line["line-dasharray"]),"line-pattern":new Xu(tt.paint_line["line-pattern"]),"line-gradient":new $o(tt.paint_line["line-gradient"])})},get layout(){return sh=sh||new xi({"line-cap":new ar(tt.layout_line["line-cap"]),"line-join":new gr(tt.layout_line["line-join"]),"line-miter-limit":new ar(tt.layout_line["line-miter-limit"]),"line-round-limit":new ar(tt.layout_line["line-round-limit"]),"line-sort-key":new gr(tt.layout_line["line-sort-key"])})}};class xv extends gr{possiblyEvaluate(a,s){return s=new Mn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(a,s)}evaluate(a,s,f,g){return s=$t({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(a,s,f,g)}}let Lg;class bv extends io{constructor(a,s){super(a,Og,s),this.gradientVersion=0,Lg||(Lg=new xv(Og.paint.properties["line-width"].specification),Lg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof ks,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,s){super.recalculate(a,s),this.paint._values["line-floorwidth"]=Lg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Bf(a)}queryRadius(a){const s=a,f=C0(Of("line-width",this,s),Of("line-gap-width",this,s)),g=Of("line-offset",this,s);return f/2+Math.abs(g)+tm(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:a,feature:s,featureState:f,geometry:g,transform:x,pixelsToTileUnits:b}){const C=Lf(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),I=b/2*C0(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),j=this.paint.get("line-offset").evaluate(s,f);return j&&(g=(function(V,G){const Z=[];for(let X=0;X<V.length;X++){const ee=u0(V[X]),ne=[];for(let se=0;se<ee.length;se++){const fe=ee[se],Pe=ee[se-1],me=ee[se+1],ge=se===0?new _(0,0):fe.sub(Pe)._unit()._perp(),Ce=se===ee.length-1?new _(0,0):me.sub(fe)._unit()._perp(),Re=ge._add(Ce)._unit(),nt=Re.x*Ce.x+Re.y*Ce.y;nt!==0&&Re._mult(1/nt),ne.push(Re._mult(G)._add(fe))}Z.push(ne)}return Z})(g,j*b)),(function(V,G,Z){for(let X=0;X<G.length;X++){const ee=G[X];if(V.length>=3){for(let ne=0;ne<ee.length;ne++)if(rc(V,ee[ne]))return!0}if(av(V,ee,Z))return!0}return!1})(C,g,I)}isTileClipped(){return!0}}function C0(l,a){return a>0?a+2*l:l}const T0=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),M0=gi([{name:"a_projected_pos",components:3,type:"Float32"}],4);gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Dg=gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hm=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),k0=gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wv(l,a,s){return l.sections.forEach((f=>{f.text=(function(g,x,b){const C=x.layout.get("text-transform").evaluate(b,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),ll.applyArabicShaping&&(g=ll.applyArabicShaping(g)),g})(f.text,a,s)})),l}gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var aa=24;const Vf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Sv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Rg={40:!0};function jg(l,a,s,f,g,x){if("fontStack"in a){const b=s[a.fontStack],C=b&&b[l];return C?C.metrics.advance*a.scale+g:0}{const b=f[a.imageName];return b?b.displaySize[0]*a.scale*aa/x+g:0}}function dm(l,a,s,f){const g=Math.pow(l-a,2);return f?l<a?g/2:2*g:g+Math.abs(s)*s}function A0(l,a,s){let f=0;return l===10&&(f-=1e4),s&&(f+=150),l!==40&&l!==65288||(f+=50),a!==41&&a!==65289||(f+=50),f}function I0(l,a,s,f,g,x){let b=null,C=dm(a,s,g,x);for(const I of f){const j=dm(a-I.x,s,g,x)+I.badness;j<=C&&(b=I,C=j)}return{index:l,x:a,priorBreak:b,badness:C}}function fm(l){return l?fm(l.priorBreak).concat(l.index):[]}class $f{constructor(a="",s=[],f=[]){this.text=a,this.sections=s,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(a,s){const f=new $f;for(let g=0;g<a.sections.length;g++){const x=a.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,s)}return f}length(){return[...this.text].length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}verticalizePunctuation(){this.text=(function(a){let s="",f={premature:!0,value:void 0};const g=a[Symbol.iterator]();let x=g.next();const b=a[Symbol.iterator]();b.next();let C=b.next();for(;!x.done;)s+=!C.done&&Yl(C.value.codePointAt(0))&&!Vf[C.value]||!f.premature&&Yl(f.value.codePointAt(0))&&!Vf[f.value]||!Vf[x.value]?x.value:Vf[x.value],f={value:x.value,premature:!1},x=g.next(),C=b.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const a=this.text.match(/^\s*/),s=a?a[0].length:0,f=this.text.match(/\S\s*$/),g=f?f[0].length-1:0;this.text=this.text.substring(s,this.text.length-g),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-g)}substring(a,s){const f=[...this.text].slice(a,s).join(""),g=this.sectionIndex.slice(a,s);return new $f(f,this.sections,g)}toCodeUnitIndex(a){return[...this.text].slice(0,a).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,s)=>Math.max(a,this.sections[s].scale)),0)}getMaxImageSize(a){let s=0,f=0;for(let g=0;g<this.length();g++){const x=this.getSection(g);if("imageName"in x){const b=a[x.imageName];if(!b)continue;const C=b.displaySize;s=Math.max(s,C[0]),f=Math.max(f,C[1])}}return{maxImageWidth:s,maxImageHeight:f}}addTextSection(a,s){this.text+=a.text,this.sections.push({scale:a.scale||1,verticalAlign:a.verticalAlign||"bottom",fontStack:a.fontStack||s});const f=this.sections.length-1;this.sectionIndex.push(...[...a.text].map((()=>f)))}addImageSection(a){const s=a.image?a.image.name:"";if(s.length===0)return void Tr("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:a.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Tr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(a,s,f,g,x){const b=[],C=this.determineAverageLineWidth(a,s,f,g,x),I=this.hasZeroWidthSpaces();let j=0,V=0;const G=this.text[Symbol.iterator]();let Z=G.next();const X=this.text[Symbol.iterator]();X.next();let ee=X.next();const ne=this.text[Symbol.iterator]();ne.next(),ne.next();let se=ne.next();for(;!Z.done;){const fe=this.getSection(V),Pe=Z.value.codePointAt(0);if(Xp(Pe)||(j+=jg(Pe,fe,f,g,a,x)),!ee.done){const me=Na(Pe),ge=ee.value.codePointAt(0);(Sv[Pe]||me||"imageName"in fe||!se.done&&Rg[ge])&&b.push(I0(V+1,j,C,b,A0(Pe,ge,me&&I),!1))}V++,Z=G.next(),ee=X.next(),se=ne.next()}return fm(I0(this.length(),j,C,b,0,!0))}determineAverageLineWidth(a,s,f,g,x){let b=0,C=0;for(const I of this.text){const j=this.getSection(C);b+=jg(I.codePointAt(0),j,f,g,a,x),C++}return b/Math.max(1,Math.ceil(b/s))}}const od=4294967296,O0=1/od,pm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class p{constructor(a=new Uint8Array(16)){this.buf=ArrayBuffer.isView(a)?a:new Uint8Array(a),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(a,s,f=this.length){for(;this.pos<f;){const g=this.readVarint(),x=g>>3,b=this.pos;this.type=7&g,a(x,s,this),this.pos===b&&this.skip(g)}return s}readMessage(a,s){return this.readFields(a,s,this.readVarint()+this.pos)}readFixed32(){const a=this.dataView.getUint32(this.pos,!0);return this.pos+=4,a}readSFixed32(){const a=this.dataView.getInt32(this.pos,!0);return this.pos+=4,a}readFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*od;return this.pos+=8,a}readSFixed64(){const a=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*od;return this.pos+=8,a}readFloat(){const a=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,a}readDouble(){const a=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,a}readVarint(a){const s=this.buf;let f,g;return g=s[this.pos++],f=127&g,g<128?f:(g=s[this.pos++],f|=(127&g)<<7,g<128?f:(g=s[this.pos++],f|=(127&g)<<14,g<128?f:(g=s[this.pos++],f|=(127&g)<<21,g<128?f:(g=s[this.pos],f|=(15&g)<<28,(function(x,b,C){const I=C.buf;let j,V;if(V=I[C.pos++],j=(112&V)>>4,V<128||(V=I[C.pos++],j|=(127&V)<<3,V<128)||(V=I[C.pos++],j|=(127&V)<<10,V<128)||(V=I[C.pos++],j|=(127&V)<<17,V<128)||(V=I[C.pos++],j|=(127&V)<<24,V<128)||(V=I[C.pos++],j|=(1&V)<<31,V<128))return y(x,j,b);throw new Error("Expected varint not more than 10 bytes")})(f,a,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const a=this.readVarint();return a%2==1?(a+1)/-2:a/2}readBoolean(){return!!this.readVarint()}readString(){const a=this.readVarint()+this.pos,s=this.pos;return this.pos=a,a-s>=12&&pm?pm.decode(this.buf.subarray(s,a)):(function(f,g,x){let b="",C=g;for(;C<x;){const I=f[C];let j,V,G,Z=null,X=I>239?4:I>223?3:I>191?2:1;if(C+X>x)break;X===1?I<128&&(Z=I):X===2?(j=f[C+1],(192&j)==128&&(Z=(31&I)<<6|63&j,Z<=127&&(Z=null))):X===3?(j=f[C+1],V=f[C+2],(192&j)==128&&(192&V)==128&&(Z=(15&I)<<12|(63&j)<<6|63&V,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):X===4&&(j=f[C+1],V=f[C+2],G=f[C+3],(192&j)==128&&(192&V)==128&&(192&G)==128&&(Z=(15&I)<<18|(63&j)<<12|(63&V)<<6|63&G,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,X=1):Z>65535&&(Z-=65536,b+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),b+=String.fromCharCode(Z),C+=X}return b})(this.buf,s,a)}readBytes(){const a=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,a);return this.pos=a,s}readPackedVarint(a=[],s){const f=this.readPackedEnd();for(;this.pos<f;)a.push(this.readVarint(s));return a}readPackedSVarint(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSVarint());return a}readPackedBoolean(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readBoolean());return a}readPackedFloat(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFloat());return a}readPackedDouble(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readDouble());return a}readPackedFixed32(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFixed32());return a}readPackedSFixed32(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSFixed32());return a}readPackedFixed64(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readFixed64());return a}readPackedSFixed64(a=[]){const s=this.readPackedEnd();for(;this.pos<s;)a.push(this.readSFixed64());return a}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(a){const s=7&a;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(a,s){this.writeVarint(a<<3|s)}realloc(a){let s=this.length||16;for(;s<this.pos+a;)s*=2;if(s!==this.length){const f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeSFixed32(a){this.realloc(4),this.dataView.setInt32(this.pos,a,!0),this.pos+=4}writeFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*O0),!0),this.pos+=8}writeSFixed64(a){this.realloc(8),this.dataView.setInt32(this.pos,-1&a,!0),this.dataView.setInt32(this.pos+4,Math.floor(a*O0),!0),this.pos+=8}writeVarint(a){(a=+a||0)>268435455||a<0?(function(s,f){let g,x;if(s>=0?(g=s%4294967296|0,x=s/4294967296|0):(g=~(-s%4294967296),x=~(-s/4294967296),4294967295^g?g=g+1|0:(g=0,x=x+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(b,C,I){I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,b>>>=7,I.buf[I.pos++]=127&b|128,I.buf[I.pos]=127&(b>>>=7)})(g,0,f),(function(b,C){const I=(7&b)<<4;C.buf[C.pos++]|=I|((b>>>=3)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b|((b>>>=7)?128:0),b&&(C.buf[C.pos++]=127&b)))))})(x,f)})(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))}writeSVarint(a){this.writeVarint(a<0?2*-a-1:2*a)}writeBoolean(a){this.writeVarint(+a)}writeString(a){a=String(a),this.realloc(4*a.length),this.pos++;const s=this.pos;this.pos=(function(g,x,b){for(let C,I,j=0;j<x.length;j++){if(C=x.charCodeAt(j),C>55295&&C<57344){if(!I){C>56319||j+1===x.length?(g[b++]=239,g[b++]=191,g[b++]=189):I=C;continue}if(C<56320){g[b++]=239,g[b++]=191,g[b++]=189,I=C;continue}C=I-55296<<10|C-56320|65536,I=null}else I&&(g[b++]=239,g[b++]=191,g[b++]=189,I=null);C<128?g[b++]=C:(C<2048?g[b++]=C>>6|192:(C<65536?g[b++]=C>>12|224:(g[b++]=C>>18|240,g[b++]=C>>12&63|128),g[b++]=C>>6&63|128),g[b++]=63&C|128)}return b})(this.buf,a,this.pos);const f=this.pos-s;f>=128&&T(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f}writeFloat(a){this.realloc(4),this.dataView.setFloat32(this.pos,a,!0),this.pos+=4}writeDouble(a){this.realloc(8),this.dataView.setFloat64(this.pos,a,!0),this.pos+=8}writeBytes(a){const s=a.length;this.writeVarint(s),this.realloc(s);for(let f=0;f<s;f++)this.buf[this.pos++]=a[f]}writeRawMessage(a,s){this.pos++;const f=this.pos;a(s,this);const g=this.pos-f;g>=128&&T(f,g,this),this.pos=f-1,this.writeVarint(g),this.pos+=g}writeMessage(a,s,f){this.writeTag(a,2),this.writeRawMessage(s,f)}writePackedVarint(a,s){s.length&&this.writeMessage(a,R,s)}writePackedSVarint(a,s){s.length&&this.writeMessage(a,q,s)}writePackedBoolean(a,s){s.length&&this.writeMessage(a,De,s)}writePackedFloat(a,s){s.length&&this.writeMessage(a,K,s)}writePackedDouble(a,s){s.length&&this.writeMessage(a,de,s)}writePackedFixed32(a,s){s.length&&this.writeMessage(a,qe,s)}writePackedSFixed32(a,s){s.length&&this.writeMessage(a,vt,s)}writePackedFixed64(a,s){s.length&&this.writeMessage(a,qt,s)}writePackedSFixed64(a,s){s.length&&this.writeMessage(a,Ht,s)}writeBytesField(a,s){this.writeTag(a,2),this.writeBytes(s)}writeFixed32Field(a,s){this.writeTag(a,5),this.writeFixed32(s)}writeSFixed32Field(a,s){this.writeTag(a,5),this.writeSFixed32(s)}writeFixed64Field(a,s){this.writeTag(a,1),this.writeFixed64(s)}writeSFixed64Field(a,s){this.writeTag(a,1),this.writeSFixed64(s)}writeVarintField(a,s){this.writeTag(a,0),this.writeVarint(s)}writeSVarintField(a,s){this.writeTag(a,0),this.writeSVarint(s)}writeStringField(a,s){this.writeTag(a,2),this.writeString(s)}writeFloatField(a,s){this.writeTag(a,5),this.writeFloat(s)}writeDoubleField(a,s){this.writeTag(a,1),this.writeDouble(s)}writeBooleanField(a,s){this.writeVarintField(a,+s)}}function y(l,a,s){return s?4294967296*a+(l>>>0):4294967296*(a>>>0)+(l>>>0)}function T(l,a,s){const f=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));s.realloc(f);for(let g=s.pos-1;g>=l;g--)s.buf[g+f]=s.buf[g]}function R(l,a){for(let s=0;s<l.length;s++)a.writeVarint(l[s])}function q(l,a){for(let s=0;s<l.length;s++)a.writeSVarint(l[s])}function K(l,a){for(let s=0;s<l.length;s++)a.writeFloat(l[s])}function de(l,a){for(let s=0;s<l.length;s++)a.writeDouble(l[s])}function De(l,a){for(let s=0;s<l.length;s++)a.writeBoolean(l[s])}function qe(l,a){for(let s=0;s<l.length;s++)a.writeFixed32(l[s])}function vt(l,a){for(let s=0;s<l.length;s++)a.writeSFixed32(l[s])}function qt(l,a){for(let s=0;s<l.length;s++)a.writeFixed64(l[s])}function Ht(l,a){for(let s=0;s<l.length;s++)a.writeSFixed64(l[s])}function Ut(l,a,s){l===1&&s.readMessage(pr,a)}function pr(l,a,s){if(l===3){const{id:f,bitmap:g,width:x,height:b,left:C,top:I,advance:j}=s.readMessage(xr,{});a.push({id:f,bitmap:new jf({width:x+6,height:b+6},g),metrics:{width:x,height:b,left:C,top:I,advance:j}})}}function xr(l,a,s){l===1?a.id=s.readVarint():l===2?a.bitmap=s.readBytes():l===3?a.width=s.readVarint():l===4?a.height=s.readVarint():l===5?a.left=s.readSVarint():l===6?a.top=s.readSVarint():l===7&&(a.advance=s.readVarint())}function Pr(l){let a=0,s=0;for(const b of l)a+=b.w*b.h,s=Math.max(s,b.w);l.sort(((b,C)=>C.h-b.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),s),h:1/0}];let g=0,x=0;for(const b of l)for(let C=f.length-1;C>=0;C--){const I=f[C];if(!(b.w>I.w||b.h>I.h)){if(b.x=I.x,b.y=I.y,x=Math.max(x,b.y+b.h),g=Math.max(g,b.x+b.w),b.w===I.w&&b.h===I.h){const j=f.pop();j&&C<f.length&&(f[C]=j)}else b.h===I.h?(I.x+=b.w,I.w-=b.w):b.w===I.w?(I.y+=b.h,I.h-=b.h):(f.push({x:I.x+b.w,y:I.y,w:I.w-b.w,h:b.h}),I.y+=b.h,I.h-=b.h);break}}return{w:g,h:x,fill:a/(g*x)||0}}class Ei{constructor(a,{pixelRatio:s,version:f,stretchX:g,stretchY:x,content:b,textFitWidth:C,textFitHeight:I}){this.paddedRect=a,this.pixelRatio=s,this.stretchX=g,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=C,this.textFitHeight=I}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lt{constructor(a,s){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(a,f,x),this.addImages(s,g,x);const{w:b,h:C}=Pr(x),I=new lo({width:b||1,height:C||1});for(const j in a){const V=a[j],G=f[j].paddedRect;lo.copy(V.data,I,{x:0,y:0},{x:G.x+1,y:G.y+1},V.data)}for(const j in s){const V=s[j],G=g[j].paddedRect,Z=G.x+1,X=G.y+1,ee=V.data.width,ne=V.data.height;lo.copy(V.data,I,{x:0,y:0},{x:Z,y:X},V.data),lo.copy(V.data,I,{x:0,y:ne-1},{x:Z,y:X-1},{width:ee,height:1}),lo.copy(V.data,I,{x:0,y:0},{x:Z,y:X+ne},{width:ee,height:1}),lo.copy(V.data,I,{x:ee-1,y:0},{x:Z-1,y:X},{width:1,height:ne}),lo.copy(V.data,I,{x:0,y:0},{x:Z+ee,y:X},{width:1,height:ne})}this.image=I,this.iconPositions=f,this.patternPositions=g}addImages(a,s,f){for(const g in a){const x=a[g],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(b),s[g]=new Ei(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(a,s){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),s),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),s)}patchUpdatedImage(a,s,f){if(!a||!s||a.version===s.version)return;a.version=s.version;const[g,x]=a.tl;f.update(s.data,void 0,{x:g,y:x})}}var He;function ft(l,a,s,f,g,x,b,C,I,j,V,G,Z,X,ee){const ne=$f.fromFeature(l,g);let se;G===d.az.vertical&&ne.verticalizePunctuation();let fe=ne.determineLineBreaks(j,x,a,f,X);const{processBidirectionalText:Pe,processStyledBidirectionalText:me}=ll;if(Pe&&ne.sections.length===1){se=[],fe=fe.map((nt=>ne.toCodeUnitIndex(nt)));const Re=Pe(ne.toString(),fe);for(const nt of Re){const kt=[...nt].map((()=>0));se.push(new $f(nt,ne.sections,kt))}}else if(me){se=[],fe=fe.map((_t=>ne.toCodeUnitIndex(_t)));let Re=0;const nt=[];for(const _t of ne.text)nt.push(...Array(_t.length).fill(ne.sectionIndex[Re])),Re++;const kt=me(ne.text,nt,fe);for(const _t of kt){const Ot=[];let Kt="";for(const Rt of _t[0])Ot.push(_t[1][Kt.length]),Kt+=Rt;se.push(new $f(_t[0],ne.sections,Ot))}}else se=(function(Re,nt){const kt=[];let _t=0;for(const Ot of nt)kt.push(Re.substring(_t,Ot)),_t=Ot;return _t<Re.length()&&kt.push(Re.substring(_t,Re.length())),kt})(ne,fe);const ge=[],Ce={positionedLines:ge,text:ne.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:G,iconsInText:!1,verticalizable:!1};return(function(Re,nt,kt,_t,Ot,Kt,Rt,Ct,dt,sr,nr,lr){let er=0,vr=0,fn=0,en=0;const yi=Ct==="right"?1:Ct==="left"?0:.5,fo=aa/lr;let oa=0;for(const An of Ot){An.trim();const Ci=An.getMaxScale(),Ni={positionedGlyphs:[],lineOffset:0};Re.positionedLines[oa]=Ni;const ui=Ni.positionedGlyphs;let ps=0;if(!An.length()){vr+=Kt,++oa;continue}const po=kr(_t,An,fo);let ms=0;for(const Ta of An.text){const bi=An.getSection(ms),sa=Ta.codePointAt(0),Ti=Nr(dt,nr,sa),Ma={glyph:sa,imageName:null,x:er,y:vr+-17,vertical:Ti,scale:1,fontStack:"",sectionIndex:An.getSectionIndex(ms),metrics:null,rect:null};let ud;if("fontStack"in bi){if(ud=qr(bi,sa,Ti,po,nt,kt),!ud)continue;Ma.fontStack=bi.fontStack}else{if(Re.iconsInText=!0,bi.scale*=fo,ud=Pa(bi,Ti,Ci,po,_t),!ud)continue;ps=Math.max(ps,ud.imageOffset),Ma.imageName=bi.imageName}const{rect:cc,metrics:Av,baselineOffset:Hf}=ud;Ma.y+=Hf,Ma.scale=bi.scale,Ma.metrics=Av,Ma.rect=cc,ui.push(Ma),Ti?(Re.verticalizable=!0,er+=("imageName"in bi?Av.advance:aa)*bi.scale+sr):er+=Av.advance*bi.scale+sr,ms++}ui.length!==0&&(fn=Math.max(er-sr,fn),kn(ui,0,ui.length-1,yi)),er=0,Ni.lineOffset=Math.max(ps,(Ci-1)*aa);const au=Kt*Ci+ps;vr+=au,en=Math.max(au,en),++oa}const{horizontalAlign:vi,verticalAlign:di}=Qt(Rt);(function(An,Ci,Ni,ui,ps,po,ms,au,Ta){const bi=(Ci-Ni)*ps;let sa=0;sa=po!==ms?-au*ui- -17:-ui*Ta*ms+.5*ms;for(const Ti of An)for(const Ma of Ti.positionedGlyphs)Ma.x+=bi,Ma.y+=sa})(Re.positionedLines,yi,vi,di,fn,en,Kt,vr,Ot.length),Re.top+=-di*vr,Re.bottom=Re.top+vr,Re.left+=-vi*fn,Re.right=Re.left+fn})(Ce,a,s,f,se,b,C,I,G,j,Z,ee),!(function(Re){for(const nt of Re)if(nt.positionedGlyphs.length!==0)return!1;return!0})(ge)&&Ce}function Qt(l){let a=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:a,verticalAlign:s}}function kr(l,a,s){const f=a.getMaxScale()*aa,{maxImageWidth:g,maxImageHeight:x}=a.getMaxImageSize(l),b=Math.max(f,x*s);return{verticalLineContentWidth:Math.max(f,g*s),horizontalLineContentHeight:b}}function Rr(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Nr(l,a,s){return!(l===d.az.horizontal||!a&&!bf(s)||a&&(Xp(s)||(f=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function qr(l,a,s,f,g,x){const b=x[l.fontStack],C=(function(j,V,G,Z){if(j&&j.rect)return j;const X=V[G.fontStack],ee=X&&X[Z];return ee?{rect:null,metrics:ee.metrics}:null})(b&&b[a],g,l,a);if(C===null)return null;let I;if(s)I=f.verticalLineContentWidth-l.scale*aa;else{const j=Rr(l.verticalAlign);I=(f.horizontalLineContentHeight-l.scale*aa)*j}return{rect:C.rect,metrics:C.metrics,baselineOffset:I}}function Pa(l,a,s,f,g){const x=g[l.imageName];if(!x)return null;const b=x.paddedRect,C=x.displaySize,I={width:C[0],height:C[1],left:1,top:-3,advance:a?C[1]:C[0]};let j;if(a)j=f.verticalLineContentWidth-C[1]*l.scale;else{const V=Rr(l.verticalAlign);j=(f.horizontalLineContentHeight-C[1]*l.scale)*V}return{rect:b,metrics:I,baselineOffset:j,imageOffset:(a?C[0]:C[1])*l.scale-aa*s}}function kn(l,a,s,f){if(f===0)return;const g=l[s],x=(l[s].x+g.metrics.advance*g.scale)*f;for(let b=a;b<=s;b++)l[b].x-=x}function lh(l,a,s){const{horizontalAlign:f,verticalAlign:g}=Qt(s),x=a[0]-l.displaySize[0]*f,b=a[1]-l.displaySize[1]*g;return{image:l,top:b,bottom:b+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function L0(l){var a,s;let f=l.left,g=l.top,x=l.right-f,b=l.bottom-g;const C=(a=l.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",I=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",j=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(I==="proportional"){if(C==="stretchOnly"&&x/b<j||C==="proportional"){const V=Math.ceil(b*j);f*=V/x,x=V}}else if(C==="proportional"&&I==="stretchOnly"&&j!==0&&x/b>j){const V=Math.ceil(x/j);g*=V/b,b=V}return{x1:f,y1:g,x2:f+x,y2:g+b}}function nM(l,a,s,f,g,x){const b=l.image;let C;if(b.content){const se=b.content,fe=b.pixelRatio||1;C=[se[0]/fe,se[1]/fe,b.displaySize[0]-se[2]/fe,b.displaySize[1]-se[3]/fe]}const I=a.left*x,j=a.right*x;let V,G,Z,X;s==="width"||s==="both"?(X=g[0]+I-f[3],G=g[0]+j+f[1]):(X=g[0]+(I+j-b.displaySize[0])/2,G=X+b.displaySize[0]);const ee=a.top*x,ne=a.bottom*x;return s==="height"||s==="both"?(V=g[1]+ee-f[0],Z=g[1]+ne+f[2]):(V=g[1]+(ee+ne-b.displaySize[1])/2,Z=V+b.displaySize[1]),{image:b,top:V,right:G,bottom:Z,left:X,collisionPadding:C}}Jt("ImagePosition",Ei),Jt("ImageAtlas",lt),d.az=void 0,(He=d.az||(d.az={}))[He.none=0]="none",He[He.horizontal=1]="horizontal",He[He.vertical=2]="vertical",He[He.horizontalOnly=3]="horizontalOnly";const sd=128,Uf=32640;function iM(l,a){const{expression:s}=a;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mn(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=s;let x=0;for(;x<f.length&&f[x]<=l;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<l+1;)b++;b=Math.min(f.length-1,b);const C=f[x],I=f[b];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:I,minSize:s.evaluate(new Mn(C)),maxSize:s.evaluate(new Mn(I)),interpolationType:g}}}function w1(l,a,s){let f="never";const g=l.get(a);return g?f=g:l.get(s)&&(f="always"),f}const W6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function D0(l,a,s,f,g,x,b,C,I,j,V,G,Z){const X=C?Math.min(Uf,Math.round(C[0])):0,ee=C?Math.min(Uf,Math.round(C[1])):0;l.emplaceBack(a,s,Math.round(32*f),Math.round(32*g),x,b,(X<<1)+(I?1:0),ee,16*j,16*V,256*G,256*Z)}function S1(l,a,s){l.emplaceBack(a.x,a.y,s),l.emplaceBack(a.x,a.y,s),l.emplaceBack(a.x,a.y,s),l.emplaceBack(a.x,a.y,s)}function H6(l){for(const a of l.sections)if(Yh(a.text))return!0;return!1}class P1{constructor(a){this.layoutVertexArray=new Te,this.indexArray=new st,this.programConfigurations=a,this.segments=new Yt,this.dynamicLayoutVertexArray=new Ge,this.opacityVertexArray=new ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new k}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,s,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,T0.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,M0.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,W6,!0),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Jt("SymbolBuffers",P1);class E1{constructor(a,s,f){this.layoutVertexArray=new a,this.layoutAttributes=s,this.indexArray=new f,this.segments=new Yt,this.collisionVertexArray=new ot}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Dg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Jt("CollisionBuffers",E1);class zg{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=iM(this.zoom,s["text-size"]),this.iconSizeData=iM(this.zoom,s["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=w1(f,"text-overlap","text-allow-overlap")!=="never"||w1(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((b=>d.az[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=a.sourceID}createArrays(){this.text=new P1(new ru(this.layers,this.zoom,(a=>/^text/.test(a)))),this.icon=new P1(new ru(this.layers,this.zoom,(a=>/^icon/.test(a)))),this.glyphOffsetArray=new U,this.lineVertexArray=new W,this.symbolInstances=new N,this.textAnchorOffsets=new Y}calculateGlyphDependencies(a,s,f,g,x){for(const b of a)if(s[b.codePointAt(0)]=!0,(f||g)&&x){const C=Vf[b];C&&(s[C.codePointAt(0)]=!0)}}populate(a,s,f){const g=this.layers[0],x=g.layout,b=x.get("text-font"),C=x.get("text-field"),I=x.get("icon-image"),j=(C.value.kind!=="constant"||C.value.value instanceof Qi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),V=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,G=x.get("symbol-sort-key");if(this.features=[],!j&&!V)return;const Z=s.iconDependencies,X=s.glyphDependencies,ee=s.availableImages,ne=new Mn(this.zoom);for(const{feature:se,id:fe,index:Pe,sourceLayerIndex:me}of a){const ge=g._featureFilter.needGeometry,Ce=ml(se,ge);if(!g._featureFilter.filter(ne,Ce,f))continue;let Re,nt;if(ge||(Ce.geometry=Vs(se)),j){const _t=g.getValueAndResolveTokens("text-field",Ce,f,ee),Ot=Qi.factory(_t),Kt=this.hasRTLText=this.hasRTLText||H6(Ot);(!Kt||ll.getRTLTextPluginStatus()==="unavailable"||Kt&&ll.isParsed())&&(Re=wv(Ot,g,Ce))}if(V){const _t=g.getValueAndResolveTokens("icon-image",Ce,f,ee);nt=_t instanceof eo?_t:eo.fromString(_t)}if(!Re&&!nt)continue;const kt=this.sortFeaturesByKey?G.evaluate(Ce,{},f):void 0;if(this.features.push({id:fe,text:Re,icon:nt,index:Pe,sourceLayerIndex:me,geometry:Ce.geometry,properties:se.properties,type:_l.types[se.type],sortKey:kt}),nt&&(Z[nt.name]=!0),Re){const _t=b.evaluate(Ce,{},f).join(","),Ot=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.az.vertical)>=0;for(const Kt of Re.sections)if(Kt.image)Z[Kt.image.name]=!0;else{const Rt=Xl(Re.toString()),Ct=Kt.fontStack||_t,dt=X[Ct]=X[Ct]||{};this.calculateGlyphDependencies(Kt.text,dt,Ot,this.allowVerticalPlacement,Rt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(se){const fe={},Pe={},me=[];let ge=0;function Ce(_t){me.push(se[_t]),ge++}function Re(_t,Ot,Kt){const Rt=Pe[_t];return delete Pe[_t],Pe[Ot]=Rt,me[Rt].geometry[0].pop(),me[Rt].geometry[0]=me[Rt].geometry[0].concat(Kt[0]),Rt}function nt(_t,Ot,Kt){const Rt=fe[Ot];return delete fe[Ot],fe[_t]=Rt,me[Rt].geometry[0].shift(),me[Rt].geometry[0]=Kt[0].concat(me[Rt].geometry[0]),Rt}function kt(_t,Ot,Kt){const Rt=Kt?Ot[0][Ot[0].length-1]:Ot[0][0];return`${_t}:${Rt.x}:${Rt.y}`}for(let _t=0;_t<se.length;_t++){const Ot=se[_t],Kt=Ot.geometry,Rt=Ot.text?Ot.text.toString():null;if(!Rt){Ce(_t);continue}const Ct=kt(Rt,Kt),dt=kt(Rt,Kt,!0);if(Ct in Pe&&dt in fe&&Pe[Ct]!==fe[dt]){const sr=nt(Ct,dt,Kt),nr=Re(Ct,dt,me[sr].geometry);delete fe[Ct],delete Pe[dt],Pe[kt(Rt,me[nr].geometry,!0)]=nr,me[sr].geometry=null}else Ct in Pe?Re(Ct,dt,Kt):dt in fe?nt(Ct,dt,Kt):(Ce(_t),fe[Ct]=ge-1,Pe[dt]=ge-1)}return me.filter((_t=>_t.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((se,fe)=>se.sortKey-fe.sortKey))}update(a,s,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,s,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(a,s,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,s){const f=this.lineVertexArray.length;if(a.segment!==void 0){let g=a.dist(s[a.segment+1]),x=a.dist(s[a.segment]);const b={};for(let C=a.segment+1;C<s.length;C++)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:g},C<s.length-1&&(g+=s[C+1].dist(s[C]));for(let C=a.segment||0;C>=0;C--)b[C]={x:s[C].x,y:s[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=s[C-1].dist(s[C]));for(let C=0;C<s.length;C++){const I=b[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(a,s,f,g,x,b,C,I,j,V,G,Z){const X=a.indexArray,ee=a.layoutVertexArray,ne=a.segments.prepareSegment(4*s.length,ee,X,this.canOverlap?b.sortKey:void 0),se=this.glyphOffsetArray.length,fe=ne.vertexLength,Pe=this.allowVerticalPlacement&&C===d.az.vertical?Math.PI/2:0,me=b.text&&b.text.sections;for(let ge=0;ge<s.length;ge++){const{tl:Ce,tr:Re,bl:nt,br:kt,tex:_t,pixelOffsetTL:Ot,pixelOffsetBR:Kt,minFontScaleX:Rt,minFontScaleY:Ct,glyphOffset:dt,isSDF:sr,sectionIndex:nr}=s[ge],lr=ne.vertexLength,er=dt[1];D0(ee,I.x,I.y,Ce.x,er+Ce.y,_t.x,_t.y,f,sr,Ot.x,Ot.y,Rt,Ct),D0(ee,I.x,I.y,Re.x,er+Re.y,_t.x+_t.w,_t.y,f,sr,Kt.x,Ot.y,Rt,Ct),D0(ee,I.x,I.y,nt.x,er+nt.y,_t.x,_t.y+_t.h,f,sr,Ot.x,Kt.y,Rt,Ct),D0(ee,I.x,I.y,kt.x,er+kt.y,_t.x+_t.w,_t.y+_t.h,f,sr,Kt.x,Kt.y,Rt,Ct),S1(a.dynamicLayoutVertexArray,I,Pe),X.emplaceBack(lr,lr+2,lr+1),X.emplaceBack(lr+1,lr+2,lr+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),ge!==s.length-1&&nr===s[ge+1].sectionIndex||a.programConfigurations.populatePaintArrays(ee.length,b,b.index,{imagePositions:{},canonical:Z,formattedSection:me&&me[nr]})}a.placedSymbolArray.emplaceBack(I.x,I.y,se,this.glyphOffsetArray.length-se,fe,j,V,I.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],C,0,!1,0,G)}_addCollisionDebugVertex(a,s,f,g,x,b){return s.emplaceBack(0,0),a.emplaceBack(f.x,f.y,g,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(a,s,f,g,x,b,C){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),j=I.vertexLength,V=x.layoutVertexArray,G=x.collisionVertexArray,Z=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(V,G,b,Z,X,new _(a,s)),this._addCollisionDebugVertex(V,G,b,Z,X,new _(f,s)),this._addCollisionDebugVertex(V,G,b,Z,X,new _(f,g)),this._addCollisionDebugVertex(V,G,b,Z,X,new _(a,g)),I.vertexLength+=4;const ee=x.indexArray;ee.emplaceBack(j,j+1),ee.emplaceBack(j+1,j+2),ee.emplaceBack(j+2,j+3),ee.emplaceBack(j+3,j),I.primitiveLength+=4}addDebugCollisionBoxes(a,s,f,g){for(let x=a;x<s;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,g?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new E1(at,hm.members,Nt),this.iconCollisionBox=new E1(at,hm.members,Nt);for(let a=0;a<this.symbolInstances.length;a++){const s=this.symbolInstances.get(a);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(a,s,f,g,x,b,C,I,j){const V={};for(let G=s;G<f;G++){const Z=a.get(G);V.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},V.textFeatureIndex=Z.featureIndex;break}for(let G=g;G<x;G++){const Z=a.get(G);V.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},V.verticalTextFeatureIndex=Z.featureIndex;break}for(let G=b;G<C;G++){const Z=a.get(G);V.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},V.iconFeatureIndex=Z.featureIndex;break}for(let G=I;G<j;G++){const Z=a.get(G);V.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},V.verticalIconFeatureIndex=Z.featureIndex;break}return V}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,s){const f=a.placedSymbolArray.get(s),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)a.indexArray.emplaceBack(x,x+2,x+1),a.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(a),f=Math.cos(a),g=[],x=[],b=[];for(let C=0;C<this.symbolInstances.length;++C){b.push(C);const I=this.symbolInstances.get(C);g.push(0|Math.round(s*I.anchorX+f*I.anchorY)),x.push(I.featureIndex)}return b.sort(((C,I)=>g[C]-g[I]||x[I]-x[C])),b}addToSortKeyRanges(a,s){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===s?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const f=this.symbolInstances.get(s);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((g,x,b)=>{g>=0&&b.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let aM,oM;Jt("SymbolBucket",zg,{omit:["layers","collisionBoxArray","features","compareText"]}),zg.MAX_GLYPHS=65535,zg.addDynamicAttributes=S1;var C1={get paint(){return oM=oM||new xi({"icon-opacity":new gr(tt.paint_symbol["icon-opacity"]),"icon-color":new gr(tt.paint_symbol["icon-color"]),"icon-halo-color":new gr(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gr(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gr(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new ar(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ar(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gr(tt.paint_symbol["text-opacity"]),"text-color":new gr(tt.paint_symbol["text-color"],{runtimeType:dr,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new gr(tt.paint_symbol["text-halo-color"]),"text-halo-width":new gr(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new gr(tt.paint_symbol["text-halo-blur"]),"text-translate":new ar(tt.paint_symbol["text-translate"]),"text-translate-anchor":new ar(tt.paint_symbol["text-translate-anchor"])})},get layout(){return aM=aM||new xi({"symbol-placement":new ar(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new ar(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ar(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gr(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ar(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ar(tt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ar(tt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ar(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ar(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ar(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gr(tt.layout_symbol["icon-size"]),"icon-text-fit":new ar(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ar(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gr(tt.layout_symbol["icon-image"]),"icon-rotate":new gr(tt.layout_symbol["icon-rotate"]),"icon-padding":new gr(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new ar(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new gr(tt.layout_symbol["icon-offset"]),"icon-anchor":new gr(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ar(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ar(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ar(tt.layout_symbol["text-rotation-alignment"]),"text-field":new gr(tt.layout_symbol["text-field"]),"text-font":new gr(tt.layout_symbol["text-font"]),"text-size":new gr(tt.layout_symbol["text-size"]),"text-max-width":new gr(tt.layout_symbol["text-max-width"]),"text-line-height":new ar(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new gr(tt.layout_symbol["text-letter-spacing"]),"text-justify":new gr(tt.layout_symbol["text-justify"]),"text-radial-offset":new gr(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ar(tt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gr(tt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gr(tt.layout_symbol["text-anchor"]),"text-max-angle":new ar(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new ar(tt.layout_symbol["text-writing-mode"]),"text-rotate":new gr(tt.layout_symbol["text-rotate"]),"text-padding":new ar(tt.layout_symbol["text-padding"]),"text-keep-upright":new ar(tt.layout_symbol["text-keep-upright"]),"text-transform":new gr(tt.layout_symbol["text-transform"]),"text-offset":new gr(tt.layout_symbol["text-offset"]),"text-allow-overlap":new ar(tt.layout_symbol["text-allow-overlap"]),"text-overlap":new ar(tt.layout_symbol["text-overlap"]),"text-ignore-placement":new ar(tt.layout_symbol["text-ignore-placement"]),"text-optional":new ar(tt.layout_symbol["text-optional"])})}};class sM{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:hr,this.defaultValue=a}evaluate(a){if(a.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(a.formattedSection))return s.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt("FormatSectionOverride",sM,{omit:["defaultValue"]});class R0 extends io{constructor(a,s){super(a,C1,s)}recalculate(a,s){if(super.recalculate(a,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,s,f,g){const x=this.layout.get(a).evaluate(s,{},f,g),b=this._unevaluatedLayout._values[a];return b.isDataDriven()||Bu(b.value)||!x?x:(function(C,I){return I.replace(/{([^{}]+)}/g,((j,V)=>C&&V in C?String(C[V]):""))})(s.properties,x)}createBucket(a){return new zg(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of C1.paint.overridableProperties){if(!R0.hasPaintOverride(this.layout,a))continue;const s=this.paint.get(a),f=new sM(s),g=new Fu(f,s.property.specification);let x=null;x=s.value.kind==="constant"||s.value.kind==="source"?new Vl("source",g):new qc("composite",g,s.value.zoomStops),this.paint._values[a]=new Eo(s.property,x,s.parameters)}}_handleOverridablePaintPropertyUpdate(a,s,f){return!(!this.layout||s.isDataDriven()||f.isDataDriven())&&R0.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,s){const f=a.get("text-field"),g=C1.paint.properties[s];let x=!1;const b=C=>{for(const I of C)if(g.overrides&&g.overrides.hasOverride(I))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Qi)b(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const C=j=>{x||(j instanceof ja&&Hn(j.value)===vn?b(j.value.sections):j instanceof Ih?b(j.sections):j.eachChild(C))},I=f.value;I._styleExpression&&C(I._styleExpression.expression)}return x}}let lM;var Z6={get paint(){return lM=lM||new xi({"background-color":new ar(tt.paint_background["background-color"]),"background-pattern":new Qh(tt.paint_background["background-pattern"]),"background-opacity":new ar(tt.paint_background["background-opacity"])})}};class K6 extends io{constructor(a,s){super(a,Z6,s)}}class X6 extends io{constructor(a,s){super(a,{},s),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Y6{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Q6={once:!0},T1=63710088e-1;class qf{constructor(a,s){if(isNaN(a)||isNaN(s))throw new Error(`Invalid LngLat object: (${a}, ${s})`);if(this.lng=+a,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qf(Ft(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const s=Math.PI/180,f=this.lat*s,g=a.lat*s,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((a.lng-this.lng)*s);return T1*Math.acos(Math.min(x,1))}static convert(a){if(a instanceof qf)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new qf(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new qf(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const uM=2*Math.PI*T1;function cM(l){return uM*Math.cos(l*Math.PI/180)}function hM(l){return(180+l)/360}function dM(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function fM(l,a){return l/cM(a)}function pM(l){return 360*l-180}function j0(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function mM(l,a){return l*cM(j0(a))}class Pv{constructor(a,s,f=0){this.x=+a,this.y=+s,this.z=+f}static fromLngLat(a,s=0){const f=qf.convert(a);return new Pv(hM(f.lng),dM(f.lat),fM(s,f.lat))}toLngLat(){return new qf(pM(this.x),j0(this.y))}toAltitude(){return mM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/uM*(a=j0(this.y),1/Math.cos(a*Math.PI/180));var a}}function gM(l,a,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[l*f-2*Math.PI*6378137/2,a*f-2*Math.PI*6378137/2]}class M1{constructor(a,s,f){if(!(function(g,x,b){return!(g<0||g>25||b<0||b>=Math.pow(2,g)||x<0||x>=Math.pow(2,g))})(a,s,f))throw new Error(`x=${s}, y=${f}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=s,this.y=f,this.key=Ng(0,a,a,s,f)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,s,f){const g=(function(b,C,I){var j=gM(256*b,256*(C=Math.pow(2,I)-C-1),I),V=gM(256*(b+1),256*(C+1),I);return j[0]+","+j[1]+","+V[0]+","+V[1]})(this.x,this.y,this.z),x=(function(b,C,I){let j,V="";for(let G=b;G>0;G--)j=1<<G-1,V+=(C&j?1:0)+(I&j?2:0);return V})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,g)}isChildOf(a){const s=this.z-a.z;return s>0&&a.x===this.x>>s&&a.y===this.y>>s}getTilePoint(a){const s=Math.pow(2,this.z);return new _((a.x*s-this.x)*Qe,(a.y*s-this.y)*Qe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yM{constructor(a,s){this.wrap=a,this.canonical=s,this.key=Ng(a,s.z,s.z,s.x,s.y)}}class bl{constructor(a,s,f,g,x){if(this.terrainRttPosMatrix32f=null,a<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${f}`);this.overscaledZ=a,this.wrap=s,this.canonical=new M1(f,+g,+x),this.key=Ng(s,a,f,g,x)}clone(){return new bl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-a;return a>this.canonical.z?new bl(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bl(a,this.wrap,a,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(a,s){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-a;return a>this.canonical.z?Ng(this.wrap*+s,a,this.canonical.z,this.canonical.x,this.canonical.y):Ng(this.wrap*+s,a,a,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(a){if(a.wrap!==this.wrap||this.overscaledZ-a.overscaledZ<=0)return!1;if(a.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-a.canonical.z;return!(s<0)&&a.canonical.x===this.canonical.x>>s&&a.canonical.y===this.canonical.y>>s}children(a){if(this.overscaledZ>=a)return[new bl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new bl(s,this.wrap,s,f,g),new bl(s,this.wrap,s,f+1,g),new bl(s,this.wrap,s,f,g+1),new bl(s,this.wrap,s,f+1,g+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new bl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new bl(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Pv(a.x-this.wrap,a.y))}}function Ng(l,a,s,f,g){(l*=2)<0&&(l=-1*l-1);const x=1<<s;return(x*x*l+x*g+f).toString(36)+s.toString(36)+a.toString(36)}function k1(l,a){return a?l.properties[a]:l.id}function J6(l,a){const s={id:l.id};if(a.removeAllProperties&&(delete l.removeProperties,delete l.addOrUpdateProperties,delete a.removeProperties),a.removeProperties)for(const f of a.removeProperties){const g=l.addOrUpdateProperties.findIndex((x=>x.key===f));g>-1&&l.addOrUpdateProperties.splice(g,1)}return(l.removeAllProperties||a.removeAllProperties)&&(s.removeAllProperties=!0),(l.removeProperties||a.removeProperties)&&(s.removeProperties=[...l.removeProperties||[],...a.removeProperties||[]]),(l.addOrUpdateProperties||a.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...l.addOrUpdateProperties||[],...a.addOrUpdateProperties||[]]),(l.newGeometry||a.newGeometry)&&(s.newGeometry=a.newGeometry||l.newGeometry),s}function vM(l){var a,s;if(!l)return{};const f={};return f.removeAll=l.removeAll,f.remove=new Set(l.remove||[]),f.add=new Map((a=l.add)===null||a===void 0?void 0:a.map((g=>[g.id,g]))),f.update=new Map((s=l.update)===null||s===void 0?void 0:s.map((g=>[g.id,g]))),f}Jt("CanonicalTileID",M1),Jt("OverscaledTileID",bl,{omit:["terrainRttPosMatrix32f"]});class mm{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(a){return this.minX=Math.min(this.minX,a.x),this.minY=Math.min(this.minY,a.y),this.maxX=Math.max(this.maxX,a.x),this.maxY=Math.max(this.maxY,a.y),this}expandBy(a){return this.minX-=a,this.minY-=a,this.maxX+=a,this.maxY+=a,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(a){return this.expandBy(-a)}map(a){const s=new mm;return s.extend(a(new _(this.minX,this.minY))),s.extend(a(new _(this.maxX,this.minY))),s.extend(a(new _(this.minX,this.maxY))),s.extend(a(new _(this.maxX,this.maxY))),s}static fromPoints(a){const s=new mm;for(const f of a)s.extend(f);return s}contains(a){return a.x>=this.minX&&a.x<=this.maxX&&a.y>=this.minY&&a.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(a){return!this.empty()&&!a.empty()&&a.minX>=this.minX&&a.maxX<=this.maxX&&a.minY>=this.minY&&a.maxY<=this.maxY}intersects(a){return!this.empty()&&!a.empty()&&a.minX<=this.maxX&&a.maxX>=this.minX&&a.minY<=this.maxY&&a.maxY>=this.minY}}class _M{constructor(a){this._stringToNumber={},this._numberToString=[];for(let s=0;s<a.length;s++){const f=a[s];this._stringToNumber[f]=s,this._numberToString[s]=f}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class xM{constructor(a,s,f,g,x){this.type="Feature",this._vectorTileFeature=a,this._x=f,this._y=g,this._z=s,this.properties=a.properties,this.id=x}projectPoint(a,s,f,g){return[360*(a.x+s)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(a.y+f)/g)*Math.PI))-90]}projectLine(a,s,f,g){return a.map((x=>this.projectPoint(x,s,f,g)))}get geometry(){if(this._geometry)return this._geometry;const a=this._vectorTileFeature,s=a.extent*Math.pow(2,this._z),f=a.extent*this._x,g=a.extent*this._y,x=a.loadGeometry();switch(a.type){case 1:{const b=[];for(const I of x)b.push(I[0]);const C=this.projectLine(b,f,g,s);this._geometry=b.length===1?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C};break}case 2:{const b=x.map((C=>this.projectLine(C,f,g,s)));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=mv(x),C=[];for(const I of b)C.push(I.map((j=>this.projectLine(j,f,g,s))));this._geometry=C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C};break}default:throw new Error(`unknown feature type: ${a.type}`)}return this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(a[s]=this[s]);return a}}class Fg{constructor(a,s,f){$r(this,"_name");$r(this,"dataBuffer");$r(this,"nullabilityBuffer");$r(this,"_size");this._name=a,this.dataBuffer=s,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(a){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(a)?null:this.getValueFromBuffer(a)}has(a){return this.nullabilityBuffer&&this.nullabilityBuffer.get(a)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class z0 extends Fg{}class A1 extends z0{getValueFromBuffer(a){return this.dataBuffer[a]}}class I1 extends z0{getValueFromBuffer(a){return this.dataBuffer[a]}}class bM extends Fg{constructor(s,f,g,x){super(s,f,x);$r(this,"delta");this.delta=g}}class O1 extends bM{constructor(a,s,f,g){super(a,Int32Array.of(s),f,g)}getValueFromBuffer(a){return this.dataBuffer[0]+a*this.delta}}class L1 extends Fg{constructor(a,s,f){super(a,Int32Array.of(s),f)}getValueFromBuffer(a){return this.dataBuffer[0]}}class eV{constructor(a,s,f,g,x=4096){$r(this,"_name");$r(this,"_geometryVector");$r(this,"_idVector");$r(this,"_propertyVectors");$r(this,"_extent");$r(this,"propertyVectorsMap");this._name=a,this._geometryVector=s,this._idVector=f,this._propertyVectors=g,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(a){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(a)}*[Symbol.iterator](){const a=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const g=a==null?void 0:a.next().value,x={};for(const b of this.propertyVectors){if(!b)continue;const C=b.name,I=b.getValue(s);I!==null&&(x[C]=I)}s++,yield{id:f,geometry:g,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const a=[],s=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let g;this.idVector&&(g=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const x={coordinates:s[f],type:this.geometryVector.geometryType(f)},b={};for(const C of this.propertyVectors){if(!C)continue;const I=C.name,j=C.getValue(f);j!==null&&(b[I]=j)}a.push({id:g,geometry:x,properties:b})}return a}containsMaxSaveIntegerValues(a){return a instanceof A1||a instanceof L1&&a instanceof O1||a instanceof I1}}class tV{constructor(a){$r(this,"value");this.value=a}get(){return this.value}set(a){this.value=a}increment(){return this.value++}add(a){this.value+=a}}var rn,ld,co,lc,gm,Gs,Ea,Ca,wM,wl;function Ua(l,a,s){const f=new Int32Array(s);let g=0,x=a.get();for(let b=0;b<f.length;b++){let C=l[x++],I=127&C;C<128||(C=l[x++],I|=(127&C)<<7,C<128||(C=l[x++],I|=(127&C)<<14,C<128||(C=l[x++],I|=(127&C)<<21,C<128||(C=l[x++],I|=(15&C)<<28)))),f[g++]=I}return a.set(x),f}function N0(l,a,s){const f=new BigInt64Array(s);for(let g=0;g<f.length;g++)f[g]=nV(l,a);return f}function rV(l,a){let s,f;return f=l[a.get()],a.increment(),s=127&f,f<128?s:(f=l[a.get()],a.increment(),s|=(127&f)<<7,f<128?s:(f=l[a.get()],a.increment(),s|=(127&f)<<14,f<128?s:(f=l[a.get()],a.increment(),s|=(127&f)<<21,f<128?s:(f=l[a.get()],s|=(15&f)<<28,(function(g,x,b){let C,I;if(I=x[b.get()],b.increment(),C=(112&I)>>4,I<128||(I=x[b.get()],b.increment(),C|=(127&I)<<3,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<10,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<17,I<128)||(I=x[b.get()],b.increment(),C|=(127&I)<<24,I<128)||(I=x[b.get()],b.increment(),C|=(1&I)<<31,I<128))return 4294967296*C+(g>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,l,a)))))}function SM(l,a,s,f){throw new Error("FastPFor is not implemented yet.")}function ym(l){return l>>>1^-(1&l)}function Bg(l){return l>>1n^-(1n&l)}function nV(l,a){let s=0n,f=0,g=a.get();for(;g<l.length;){const x=l[g++];if(s|=BigInt(127&x)<<BigInt(f),!(128&x))break;if(f+=7,f>=64)throw new Error("Varint too long")}return a.set(g),s}function PM(l,a,s){const f=new Int32Array(s);let g=0;for(let x=0;x<a;x++){const b=l[x];f.fill(l[x+a],g,g+b),g+=b}return f}function EM(l,a,s){const f=new BigInt64Array(s);let g=0;for(let x=0;x<a;x++){const b=Number(l[x]);f.fill(l[x+a],g,g+b),g+=b}return f}function CM(l,a,s){const f=new Float64Array(s);let g=0;for(let x=0;x<a;x++){const b=l[x];f.fill(l[x+a],g,g+b),g+=b}return f}function D1(l){const a=l.length/4*4;let s=1;if(a>=4)for(let f=l[0];s<a-4;s+=4)f=l[s]+=f,f=l[s+1]+=f,f=l[s+2]+=f,f=l[s+3]+=f;for(;s!=l.length;)l[s]+=l[s-1],++s}function TM(l){l[0]=l[0]>>>1^-(1&l[0]),l[1]=l[1]>>>1^-(1&l[1]);const a=l.length/4*4;let s=2;if(a>=4)for(;s<a-4;s+=4){const f=l[s],g=l[s+1],x=l[s+2],b=l[s+3];l[s]=(f>>>1^-(1&f))+l[s-2],l[s+1]=(g>>>1^-(1&g))+l[s-1],l[s+2]=(x>>>1^-(1&x))+l[s],l[s+3]=(b>>>1^-(1&b))+l[s+1]}for(;s!=l.length;s+=2)l[s]=(l[s]>>>1^-(1&l[s]))+l[s-2],l[s+1]=(l[s+1]>>>1^-(1&l[s+1]))+l[s-1]}(function(l){l.NONE="NONE",l.DELTA="DELTA",l.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",l.RLE="RLE",l.MORTON="MORTON",l.PDE="PDE"})(rn||(rn={})),(function(l){l.NONE="NONE",l.FAST_PFOR="FAST_PFOR",l.VARINT="VARINT",l.ALP="ALP"})(ld||(ld={})),(function(l){l.PRESENT="PRESENT",l.DATA="DATA",l.OFFSET="OFFSET",l.LENGTH="LENGTH"})(co||(co={}));class R1{constructor(a,s,f){$r(this,"_dictionaryType");$r(this,"_offsetType");$r(this,"_lengthType");this._dictionaryType=a,this._offsetType=s,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Wo(l,a){const s=(function(f,g){const x=f[g.get()],b=Object.values(co)[x>>4];let C=null;switch(b){case co.DATA:C=new R1(Object.values(lc)[15&x]);break;case co.OFFSET:C=new R1(null,Object.values(gm)[15&x]);break;case co.LENGTH:C=new R1(null,null,Object.values(Gs)[15&x])}g.increment();const I=f[g.get()],j=Object.values(rn)[I>>5],V=Object.values(rn)[I>>2&7],G=Object.values(ld)[3&I];g.increment();const Z=Ua(f,g,2),X=Z[0];return{physicalStreamType:b,logicalStreamType:C,logicalLevelTechnique1:j,logicalLevelTechnique2:V,physicalLevelTechnique:G,numValues:X,byteLength:Z[1],decompressedCount:X}})(l,a);return s.logicalLevelTechnique1===rn.MORTON?(function(f,g,x){const b=Ua(g,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:b[0],coordinateShift:b[1]}})(s,l,a):rn.RLE!==s.logicalLevelTechnique1&&rn.RLE!==s.logicalLevelTechnique2||ld.NONE===s.physicalLevelTechnique?s:(function(f,g,x){const b=Ua(g,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}})(s,l,a)}(function(l){l.NONE="NONE",l.SINGLE="SINGLE",l.SHARED="SHARED",l.VERTEX="VERTEX",l.MORTON="MORTON",l.FSST="FSST"})(lc||(lc={})),(function(l){l.VERTEX="VERTEX",l.INDEX="INDEX",l.STRING="STRING",l.KEY="KEY"})(gm||(gm={})),(function(l){l.VAR_BINARY="VAR_BINARY",l.GEOMETRIES="GEOMETRIES",l.PARTS="PARTS",l.RINGS="RINGS",l.TRIANGLES="TRIANGLES",l.SYMBOL="SYMBOL",l.DICTIONARY="DICTIONARY"})(Gs||(Gs={})),(function(l){l[l.FLAT=0]="FLAT",l[l.CONST=1]="CONST",l[l.SEQUENCE=2]="SEQUENCE",l[l.DICTIONARY=3]="DICTIONARY",l[l.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Ea||(Ea={}));class uc{constructor(a,s){$r(this,"values");$r(this,"_size");this.values=a,this._size=s}get(a){const s=Math.floor(a/8);return(this.values[s]>>a%8&1)==1}set(a,s){const f=Math.floor(a/8);this.values[f]=this.values[f]|(s?1:0)<<a%8}getInt(a){const s=Math.floor(a/8);return this.values[s]>>a%8&1}size(){return this._size}getBuffer(){return this.values}}function Ho(l,a,s,f,g){return(function(x,b,C){switch(b.logicalLevelTechnique1){case rn.DELTA:return b.logicalLevelTechnique2===rn.RLE?(function(I,j,V){const G=new Int32Array(V);let Z=0,X=0;for(let ee=0;ee<j;ee++){const ne=I[ee],se=ym(I[ee+j]);for(let fe=0;fe<ne;fe++)X+=se,G[Z++]=X}return G})(x,b.runs,b.numRleValues):((function(I){I[0]=I[0]>>>1^-(1&I[0]);const j=I.length/4*4;let V=1;if(j>=4)for(;V<j-4;V+=4){const G=I[V],Z=I[V+1],X=I[V+2],ee=I[V+3];I[V]=(G>>>1^-(1&G))+I[V-1],I[V+1]=(Z>>>1^-(1&Z))+I[V],I[V+2]=(X>>>1^-(1&X))+I[V+1],I[V+3]=(ee>>>1^-(1&ee))+I[V+2]}for(;V!=I.length;++V)I[V]=(I[V]>>>1^-(1&I[V]))+I[V-1]})(x),x);case rn.RLE:return(function(I,j,V){return V?(function(G,Z,X){const ee=new Int32Array(X);let ne=0;for(let se=0;se<Z;se++){const fe=G[se];let Pe=G[se+Z];Pe=Pe>>>1^-(1&Pe),ee.fill(Pe,ne,ne+fe),ne+=fe}return ee})(I,j.runs,j.numRleValues):PM(I,j.runs,j.numRleValues)})(x,b,C);case rn.MORTON:return D1(x),x;case rn.COMPONENTWISE_DELTA:return TM(x),x;case rn.NONE:return C&&(function(I){for(let j=0;j<I.length;j++){const V=I[j];I[j]=V>>>1^-(1&V)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}})(F0(l,a,s),s,f)}function Gf(l,a,s){return(function(f,g){if(g.logicalLevelTechnique1===rn.DELTA&&g.logicalLevelTechnique2===rn.NONE)return(function(b){const C=new Int32Array(b.length+1);C[0]=0,C[1]=ym(b[0]);let I=C[1],j=2;for(;j!=C.length;++j){const V=b[j-1];I+=V>>>1^-(1&V),C[j]=C[j-1]+I}return C})(f);if(g.logicalLevelTechnique1===rn.RLE&&g.logicalLevelTechnique2===rn.NONE)return(function(b,C,I){const j=new Int32Array(I+1);j[0]=0;let V=1,G=j[0];for(let Z=0;Z<C;Z++){const X=b[Z],ee=b[Z+C];for(let ne=V;ne<V+X;ne++)j[ne]=ee+G,G=j[ne];V+=X}return j})(f,g.runs,g.numRleValues);if(g.logicalLevelTechnique1===rn.NONE&&g.logicalLevelTechnique2===rn.NONE){(function(b){let C=0;for(let I=0;I<b.length;I++)b[I]+=C,C=b[I]})(f);const x=new Int32Array(g.numValues+1);return x[0]=0,x.set(f,1),x}if(g.logicalLevelTechnique1===rn.DELTA&&g.logicalLevelTechnique2===rn.RLE){const x=(function(b,C,I){const j=new Int32Array(I+1);j[0]=0;let V=1,G=j[0];for(let Z=0;Z<C;Z++){const X=b[Z];let ee=b[Z+C];ee=ee>>>1^-(1&ee);for(let ne=V;ne<V+X;ne++)j[ne]=ee+G,G=j[ne];V+=X}return j})(f,g.runs,g.numRleValues);return D1(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(F0(l,a,s),s)}function F0(l,a,s){const f=s.physicalLevelTechnique;if(f===ld.FAST_PFOR)return SM();if(f===ld.VARINT)return Ua(l,a,s.numValues);if(f===ld.NONE){const g=a.get();a.add(s.byteLength);const x=l.subarray(g,a.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function j1(l,a,s,f){const g=F0(l,a,s);if(g.length===1){const x=g[0];return f?ym(x):x}return f?(function(x){return ym(x[1])})(g):(function(x){return x[1]})(g)}function MM(l,a,s){return(function(f){if(f.length==2){const g=ym(f[1]);return[g,g]}return[ym(f[2]),ym(f[3])]})(F0(l,a,s))}function kM(l,a,s){return(function(f){if(f.length==2){const g=Bg(f[1]);return[g,g]}return[Bg(f[2]),Bg(f[3])]})(N0(l,a,s.numValues))}function AM(l,a,s,f){return(function(g,x,b){switch(x.logicalLevelTechnique1){case rn.DELTA:return x.logicalLevelTechnique2===rn.RLE?(function(C,I,j){const V=new BigInt64Array(j);let G=0,Z=0n;for(let X=0;X<I;X++){const ee=Number(C[X]),ne=Bg(C[X+I]);for(let se=0;se<ee;se++)Z+=ne,V[G++]=Z}return V})(g,x.runs,x.numRleValues):((function(C){C[0]=C[0]>>1n^-(1n&C[0]);const I=C.length/4*4;let j=1;if(I>=4)for(;j<I-4;j+=4){const V=C[j],G=C[j+1],Z=C[j+2],X=C[j+3];C[j]=(V>>1n^-(1n&V))+C[j-1],C[j+1]=(G>>1n^-(1n&G))+C[j],C[j+2]=(Z>>1n^-(1n&Z))+C[j+1],C[j+3]=(X>>1n^-(1n&X))+C[j+2]}for(;j!=C.length;++j)C[j]=(C[j]>>1n^-(1n&C[j]))+C[j-1]})(g),g);case rn.RLE:return(function(C,I,j){return j?(function(V,G,Z){const X=new BigInt64Array(Z);let ee=0;for(let ne=0;ne<G;ne++){const se=Number(V[ne]);let fe=V[ne+G];fe=fe>>1n^-(1n&fe),X.fill(fe,ee,ee+se),ee+=se}return X})(C,I.runs,I.numRleValues):EM(C,I.runs,I.numRleValues)})(g,x,b);case rn.NONE:return b&&(function(C){for(let I=0;I<C.length;I++){const j=C[I];C[I]=j>>1n^-(1n&j)}})(g),g;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(N0(l,a,s.numValues),s,f)}function IM(l,a,s,f){const g=N0(l,a,s.numValues);if(g.length===1){const x=g[0];return f?Bg(x):x}return f?(function(x){return Bg(x[1])})(g):(function(x){return x[1]})(g)}function z1(l,a,s,f,g){return(function(x,b,C,I){switch(b.logicalLevelTechnique1){case rn.DELTA:return b.logicalLevelTechnique2===rn.RLE&&(x=PM(x,b.runs,b.numRleValues)),(function(j,V){const G=new Int32Array(j.size());let Z=0;j.get(0)?(G[0]=j.get(0)?V[0]>>>1^-(1&V[0]):0,Z=1):G[0]=0;let X=1;for(;X!=G.length;++X)G[X]=j.get(X)?G[X-1]+(V[Z]>>>1^-(1&V[Z++])):G[X-1];return G})(I,x);case rn.RLE:return(function(j,V,G,Z){const X=V;return G?(function(ee,ne,se){const fe=new Int32Array(ee.size());let Pe=0;for(let me=0;me<se;me++){const ge=ne[me];let Ce=ne[me+se];Ce=Ce>>>1^-(1&Ce);for(let Re=Pe;Re<Pe+ge;Re++)ee.get(Re)?fe[Re]=Ce:(fe[Re]=0,Pe++);Pe+=ge}return fe})(Z,j,X.runs):(function(ee,ne,se){const fe=new Int32Array(ee.size());let Pe=0;for(let me=0;me<se;me++){const ge=ne[me],Ce=ne[me+se];for(let Re=Pe;Re<Pe+ge;Re++)ee.get(Re)?fe[Re]=Ce:(fe[Re]=0,Pe++);Pe+=ge}return fe})(Z,j,X.runs)})(x,b,C,I);case rn.MORTON:return D1(x),x;case rn.COMPONENTWISE_DELTA:return TM(x),x;case rn.NONE:return x=C?(function(j,V){const G=new Int32Array(j.size());let Z=0,X=0;for(;X!=G.length;++X)if(j.get(X)){const ee=V[Z++];G[X]=ee>>>1^-(1&ee)}else G[X]=0;return G})(I,x):(function(j,V){const G=new Int32Array(j.size());let Z=0,X=0;for(;X!=G.length;++X)G[X]=j.get(X)?V[Z++]:0;return G})(I,x),x;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===ld.FAST_PFOR?SM():Ua(l,a,s.numValues),s,f,g)}function B0(l,a,s,f){const g=l.logicalLevelTechnique1;if(g===rn.RLE)return l.runs===1?Ea.CONST:Ea.FLAT;const x=a instanceof uc?a.size():a;if(g===rn.DELTA&&l.logicalLevelTechnique2===rn.RLE){const b=l.runs,C=2;if(l.numRleValues!==x)return Ea.FLAT;if(b===1)return Ea.SEQUENCE;if(b===2){const I=f.get();let j;if(l.physicalLevelTechnique===ld.VARINT)j=Ua(s,f,4);else{const V=f.get();j=new Int32Array(s.buffer,s.byteOffset+V,4)}if(f.set(I),j[2]===C&&j[3]===C)return Ea.SEQUENCE}}return l.numValues===1?Ea.CONST:Ea.FLAT}class OM extends z0{getValueFromBuffer(a){return this.dataBuffer[a]}}class LM extends bM{constructor(a,s,f,g){super(a,BigInt64Array.of(s),f,g)}getValueFromBuffer(a){return this.dataBuffer[0]+BigInt(a)*this.delta}}class Vg{constructor(a,s,f){$r(this,"_geometryOffsets");$r(this,"_partOffsets");$r(this,"_ringOffsets");this._geometryOffsets=a,this._partOffsets=s,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function N1(l,a,s){return{x:DM(l,a)-s,y:DM(l>>1,a)-s}}function DM(l,a){let s=0;for(let f=0;f<a;f++)s|=(l&1<<2*f)>>f;return s}(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON",l[l.MULTIPOINT=3]="MULTIPOINT",l[l.MULTILINESTRING=4]="MULTILINESTRING",l[l.MULTIPOLYGON=5]="MULTIPOLYGON"})(Ca||(Ca={})),(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON"})(wM||(wM={})),(function(l){l[l.MORTON=0]="MORTON",l[l.VEC_2=1]="VEC_2",l[l.VEC_3=2]="VEC_3"})(wl||(wl={}));class iV{createPoint(a){return[[a]]}createMultiPoint(a){return a.map((s=>[s]))}createLineString(a){return[a]}createMultiLineString(a){return a}createPolygon(a,s){return[a].concat(s)}createMultiPolygon(a){return a.flat()}}function RM(l){const a=new Array(l.numGeometries);let s=1,f=1,g=1,x=0;const b=new iV;let C=0,I=0;const j=l.mortonSettings,V=l.topologyVector,G=V.geometryOffsets,Z=V.partOffsets,X=V.ringOffsets,ee=l.vertexOffsets,ne=l.containsPolygonGeometry(),se=l.vertexBuffer;for(let fe=0;fe<l.numGeometries;fe++){const Pe=l.geometryType(fe);if(Pe===Ca.POINT){if(ee&&ee.length!==0)if(l.vertexBufferType===wl.VEC_2){const me=2*ee[I++],ge=new _(se[me],se[me+1]);a[x++]=b.createPoint(ge)}else{const me=N1(se[ee[I++]],j.numBits,j.coordinateShift),ge=new _(me.x,me.y);a[x++]=b.createPoint(ge)}else{const me=new _(se[C++],se[C++]);a[x++]=b.createPoint(me)}G&&g++,Z&&s++,X&&f++}else if(Pe===Ca.MULTIPOINT){const me=G[g]-G[g-1];g++;const ge=new Array(me);if(ee&&ee.length!==0){for(let Ce=0;Ce<me;Ce++){const Re=2*ee[I++];ge[Ce]=new _(se[Re],se[Re+1])}a[x++]=b.createMultiPoint(ge)}else{for(let Ce=0;Ce<me;Ce++){const Re=se[C++],nt=se[C++];ge[Ce]=new _(Re,nt)}a[x++]=b.createMultiPoint(ge)}}else if(Pe===Ca.LINESTRING){let me,ge=0;ne?(ge=X[f]-X[f-1],f++):ge=Z[s]-Z[s-1],s++,ee&&ee.length!==0?(me=l.vertexBufferType===wl.VEC_2?B1(se,ee,I,ge,!1):V1(se,ee,I,ge,!1,j),I+=ge):(me=F1(se,C,ge,!1),C+=2*ge),a[x++]=b.createLineString(me),G&&g++}else if(Pe===Ca.POLYGON){const me=Z[s]-Z[s-1];s++;const ge=new Array(me-1);let Ce=X[f]-X[f-1];if(f++,ee&&ee.length!==0){const Re=l.vertexBufferType===wl.VEC_2?$0(se,ee,I,Ce):U0(se,ee,I,Ce,0,j);I+=Ce;for(let nt=0;nt<ge.length;nt++)Ce=X[f]-X[f-1],f++,ge[nt]=l.vertexBufferType===wl.VEC_2?$0(se,ee,I,Ce):U0(se,ee,I,Ce,0,j),I+=Ce;a[x++]=b.createPolygon(Re,ge)}else{const Re=V0(se,C,Ce);C+=2*Ce;for(let nt=0;nt<ge.length;nt++)Ce=X[f]-X[f-1],f++,ge[nt]=V0(se,C,Ce),C+=2*Ce;a[x++]=b.createPolygon(Re,ge)}G&&g++}else if(Pe===Ca.MULTILINESTRING){const me=G[g]-G[g-1];g++;const ge=new Array(me);if(ee&&ee.length!==0){for(let Ce=0;Ce<me;Ce++){let Re=0;ne?(Re=X[f]-X[f-1],f++):Re=Z[s]-Z[s-1],s++;const nt=l.vertexBufferType===wl.VEC_2?B1(se,ee,I,Re,!1):V1(se,ee,I,Re,!1,j);ge[Ce]=nt,I+=Re}a[x++]=b.createMultiLineString(ge)}else{for(let Ce=0;Ce<me;Ce++){let Re=0;ne?(Re=X[f]-X[f-1],f++):Re=Z[s]-Z[s-1],s++,ge[Ce]=F1(se,C,Re,!1),C+=2*Re}a[x++]=b.createMultiLineString(ge)}}else{if(Pe!==Ca.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const me=G[g]-G[g-1];g++;const ge=new Array(me);let Ce=0;if(ee&&ee.length!==0){for(let Re=0;Re<me;Re++){const nt=Z[s]-Z[s-1];s++;const kt=new Array(nt-1);Ce=X[f]-X[f-1],f++;const _t=l.vertexBufferType===wl.VEC_2?$0(se,ee,I,Ce):U0(se,ee,I,Ce,0,j);I+=Ce;for(let Ot=0;Ot<kt.length;Ot++)Ce=X[f]-X[f-1],f++,kt[Ot]=l.vertexBufferType===wl.VEC_2?$0(se,ee,I,Ce):U0(se,ee,I,Ce,0,j),I+=Ce;ge[Re]=b.createPolygon(_t,kt)}a[x++]=b.createMultiPolygon(ge)}else{for(let Re=0;Re<me;Re++){const nt=Z[s]-Z[s-1];s++;const kt=new Array(nt-1);Ce=X[f]-X[f-1],f++;const _t=V0(se,C,Ce);C+=2*Ce;for(let Ot=0;Ot<kt.length;Ot++){const Kt=X[f]-X[f-1];f++,kt[Ot]=V0(se,C,Kt),C+=2*Kt}ge[Re]=b.createPolygon(_t,kt)}a[x++]=b.createMultiPolygon(ge)}}}}return a}function V0(l,a,s){return F1(l,a,s,!0)}function $0(l,a,s,f){return B1(l,a,s,f,!0)}function U0(l,a,s,f,g,x){return V1(l,a,s,f,!0,x)}function F1(l,a,s,f){const g=new Array(f?s+1:s);for(let x=0;x<2*s;x+=2)g[x/2]=new _(l[a+x],l[a+x+1]);return f&&(g[g.length-1]=g[0]),g}function B1(l,a,s,f,g){const x=new Array(g?f+1:f);for(let b=0;b<2*f;b+=2){const C=2*a[s+b/2];x[b/2]=new _(l[C],l[C+1])}return g&&(x[x.length-1]=x[0]),x}function V1(l,a,s,f,g,x){const b=new Array(g?f+1:f);for(let C=0;C<f;C++){const I=N1(l[a[s+C]],x.numBits,x.coordinateShift);b[C]=new _(I.x,I.y)}return g&&(b[b.length-1]=b[0]),b}class jM{constructor(a,s,f,g,x){$r(this,"_vertexBufferType");$r(this,"_topologyVector");$r(this,"_vertexOffsets");$r(this,"_vertexBuffer");$r(this,"_mortonSettings");this._vertexBufferType=a,this._topologyVector=s,this._vertexOffsets=f,this._vertexBuffer=g,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const a=RM(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:a[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(a){const s=this.vertexOffsets?2*this.vertexOffsets[a]:2*a;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(a){if(this.vertexOffsets&&this.mortonSettings){const f=N1(this.vertexBuffer[this.vertexOffsets[a]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const s=this.vertexOffsets?2*this.vertexOffsets[a]:2*a;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return RM(this)}get mortonSettings(){return this._mortonSettings}}class zM extends jM{constructor(s,f,g,x,b,C,I){super(g,x,b,C,I);$r(this,"_numGeometries");$r(this,"_geometryType");this._numGeometries=s,this._geometryType=f}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Ca.POLYGON||this._geometryType===Ca.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class NM extends jM{constructor(s,f,g,x,b,C){super(s,g,x,b,C);$r(this,"_geometryTypes");this._geometryTypes=f}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let s=0;s<this.numGeometries;s++)if(this.geometryType(s)===Ca.POLYGON||this.geometryType(s)===Ca.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class FM{constructor(a,s,f,g){$r(this,"_triangleOffsets");$r(this,"_indexBuffer");$r(this,"_vertexBuffer");$r(this,"_topologyVector");this._triangleOffsets=a,this._indexBuffer=s,this._vertexBuffer=f,this._topologyVector=g}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const a=new Array(this.numGeometries),s=this._topologyVector,f=s.partOffsets,g=s.ringOffsets,x=s.geometryOffsets;let b=0,C=1,I=1,j=1;for(let V=0;V<this.numGeometries;V++)switch(this.geometryType(V)){case Ca.POLYGON:{const G=f[C]-f[C-1];C++;const Z=[];for(let X=0;X<G;X++){const ee=g[I]-g[I-1];I++;const ne=[];for(let se=0;se<ee;se++){const fe=this._vertexBuffer[b++],Pe=this._vertexBuffer[b++];ne.push(new _(fe,Pe))}ne.length>0&&ne.push(ne[0]),Z.push(ne)}a[V]=Z,x&&j++}break;case Ca.MULTIPOLYGON:{const G=x[j]-x[j-1];j++;const Z=[];for(let X=0;X<G;X++){const ee=f[C]-f[C-1];C++;for(let ne=0;ne<ee;ne++){const se=g[I]-g[I-1];I++;const fe=[];for(let Pe=0;Pe<se;Pe++){const me=this._vertexBuffer[b++],ge=this._vertexBuffer[b++];fe.push(new _(me,ge))}fe.length>0&&fe.push(fe[0]),Z.push(fe)}}a[V]=Z}}return a}[Symbol.iterator](){return null}}function BM(l,a,s,f,g,x){return new aV(l,a,s,f,g,x)}class aV extends FM{constructor(s,f,g,x,b,C){super(g,x,b,C);$r(this,"_numGeometries");$r(this,"_geometryType");this._numGeometries=s,this._geometryType=f}geometryType(s){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function VM(l,a,s,f,g){return new oV(l,a,s,f,g)}class oV extends FM{constructor(s,f,g,x,b){super(f,g,x,b);$r(this,"_geometryTypes");this._geometryTypes=s}geometryType(s){return this._geometryTypes[s]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function sV(l,a,s,f,g){const x=Wo(l,s);let b=null,C=null,I=null,j=null,V=null,G=null,Z=null,X=null;if(B0(x,f,l,s)===Ea.CONST){const ne=j1(l,s,x,!1);for(let se=0;se<a-1;se++){const fe=Wo(l,s);switch(fe.physicalStreamType){case co.LENGTH:switch(fe.logicalStreamType.lengthType){case Gs.GEOMETRIES:b=Gf(l,s,fe);break;case Gs.PARTS:C=Gf(l,s,fe);break;case Gs.RINGS:I=Gf(l,s,fe);break;case Gs.TRIANGLES:Z=Gf(l,s,fe)}break;case co.OFFSET:switch(fe.logicalStreamType.offsetType){case gm.VERTEX:j=Ho(l,s,fe,!1);break;case gm.INDEX:X=Ho(l,s,fe,!1)}break;case co.DATA:lc.VERTEX===fe.logicalStreamType.dictionaryType?V=Ho(l,s,fe,!0):(G={numBits:fe.numBits,coordinateShift:fe.coordinateShift},V=Ho(l,s,fe,!1))}}return X!==null?b!=null||C!=null?BM(f,ne,Z,X,V,new Vg(b,C,I)):BM(f,ne,Z,X,V):G===null?(function(se,fe,Pe,me,ge){return new zM(se,fe,wl.VEC_2,Pe,me,ge)})(f,ne,new Vg(b,C,I),j,V):(function(se,fe,Pe,me,ge,Ce){return new zM(se,fe,wl.MORTON,Pe,me,ge,Ce)})(f,ne,new Vg(b,C,I),j,V,G)}const ee=Ho(l,s,x,!1);for(let ne=0;ne<a-1;ne++){const se=Wo(l,s);switch(se.physicalStreamType){case co.LENGTH:switch(se.logicalStreamType.lengthType){case Gs.GEOMETRIES:b=Ho(l,s,se,!1);break;case Gs.PARTS:C=Ho(l,s,se,!1);break;case Gs.RINGS:I=Ho(l,s,se,!1);break;case Gs.TRIANGLES:Z=Gf(l,s,se)}break;case co.OFFSET:switch(se.logicalStreamType.offsetType){case gm.VERTEX:j=Ho(l,s,se,!1);break;case gm.INDEX:X=Ho(l,s,se,!1)}break;case co.DATA:lc.VERTEX===se.logicalStreamType.dictionaryType?V=Ho(l,s,se,!0):(G={numBits:se.numBits,coordinateShift:se.coordinateShift},V=Ho(l,s,se,!1))}}return X!==null&&C===null?VM(ee,Z,X,V):(b!==null?(b=$1(ee,b,2),C!==null&&I!==null?(C=$M(ee,b,C,!1),I=(function(ne,se,fe,Pe){const me=new Int32Array(fe[fe.length-1]+1);let ge=0;me[0]=ge;let Ce=1,Re=1,nt=0;for(let kt=0;kt<ne.length;kt++){const _t=ne[kt],Ot=se[kt+1]-se[kt];if(_t!==0&&_t!==3)for(let Kt=0;Kt<Ot;Kt++){const Rt=fe[Ce]-fe[Ce-1];Ce++;for(let Ct=0;Ct<Rt;Ct++)ge=me[Re++]=ge+Pe[nt++]}else for(let Kt=0;Kt<Ot;Kt++)me[Re++]=++ge,Ce++}return me})(ee,b,C,I)):C!==null&&(C=(function(ne,se,fe){const Pe=new Int32Array(se[se.length-1]+1);let me=0;Pe[0]=me;let ge=1,Ce=0;for(let Re=0;Re<ne.length;Re++){const nt=ne[Re],kt=se[Re+1]-se[Re];if(nt===4||nt===1)for(let _t=0;_t<kt;_t++)me=Pe[ge++]=me+fe[Ce++];else for(let _t=0;_t<kt;_t++)Pe[ge++]=++me}return Pe})(ee,b,C))):C!==null&&I!==null?(C=$1(ee,C,1),I=$M(ee,C,I,!0)):C!==null&&(C=$1(ee,C,0)),X!==null?VM(ee,Z,X,V,new Vg(b,C,I)):G===null?(function(ne,se,fe,Pe){return new NM(wl.VEC_2,ne,se,fe,Pe)})(ee,new Vg(b,C,I),j,V):(function(ne,se,fe,Pe,me){return new NM(wl.MORTON,ne,se,fe,Pe,me)})(ee,new Vg(b,C,I),j,V,G))}function $1(l,a,s){const f=new Int32Array(l.length+1);let g=0;f[0]=g;let x=0;for(let b=0;b<l.length;b++)g=f[b+1]=g+(l[b]>s?a[x++]:1);return f}function $M(l,a,s,f){const g=new Int32Array(a[a.length-1]+1);let x=0;g[0]=x;let b=1,C=0;for(let I=0;I<l.length;I++){const j=l[I],V=a[I+1]-a[I];if(j===5||j===2||f&&(j===4||j===1))for(let G=0;G<V;G++)x=g[b++]=x+s[C++];else for(let G=0;G<V;G++)g[b++]=++x}return g}class lV extends Fg{constructor(s,f,g){super(s,f.getBuffer(),g);$r(this,"dataVector");this.dataVector=f}getValueFromBuffer(s){return this.dataVector.get(s)}}class uV extends z0{getValueFromBuffer(a){return this.dataBuffer[a]}}class UM extends Fg{constructor(a,s,f){super(a,BigInt64Array.of(s),f)}getValueFromBuffer(a){return this.dataBuffer[0]}}function Ev(l,a,s){return qM(l,Math.ceil(a/8),s)}function qM(l,a,s){const f=new Uint8Array(a);let g=0;for(;g<a;){const x=l[s.increment()];if(x<=127){const b=x+3,C=l[s.increment()],I=g+b;f.fill(C,g,I),g=I}else{const b=256-x;for(let C=0;C<b;C++)f[g++]=l[s.increment()]}}return f}const cV=new TextDecoder;function U1(l,a,s){return s-a>=12?cV.decode(l.subarray(a,s)):(function(f,g,x){let b="",C=g;for(;C<x;){const I=f[C];let j,V,G,Z=null,X=I>239?4:I>223?3:I>191?2:1;if(C+X>x)break;X===1?I<128&&(Z=I):X===2?(j=f[C+1],(192&j)==128&&(Z=(31&I)<<6|63&j,Z<=127&&(Z=null))):X===3?(j=f[C+1],V=f[C+2],(192&j)==128&&(192&V)==128&&(Z=(15&I)<<12|(63&j)<<6|63&V,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):X===4&&(j=f[C+1],V=f[C+2],G=f[C+3],(192&j)==128&&(192&V)==128&&(192&G)==128&&(Z=(15&I)<<18|(63&j)<<12|(63&V)<<6|63&G,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,X=1):Z>65535&&(Z-=65536,b+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),b+=String.fromCharCode(Z),C+=X}return b})(l,a,s)}class q1 extends Fg{constructor(s,f,g,x){super(s,g,x);$r(this,"offsetBuffer");this.offsetBuffer=f}}class GM extends q1{constructor(s,f,g,x){super(s,f,g,x??f.length-1);$r(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(s){return U1(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class $g extends q1{constructor(s,f,g,x,b){super(s,g,x,b??f.length);$r(this,"indexBuffer");$r(this,"textEncoder");this.indexBuffer=f,this.indexBuffer=f,this.textEncoder=new TextEncoder}getValueFromBuffer(s){const f=this.indexBuffer[s];return U1(this.dataBuffer,this.offsetBuffer[f],this.offsetBuffer[f+1])}}class WM extends q1{constructor(s,f,g,x,b,C,I){super(s,g,x,I);$r(this,"indexBuffer");$r(this,"symbolOffsetBuffer");$r(this,"symbolTableBuffer");$r(this,"textEncoder");$r(this,"symbolLengthBuffer");$r(this,"lengthBuffer");$r(this,"decodedDictionary");this.indexBuffer=f,this.symbolOffsetBuffer=b,this.symbolTableBuffer=C,this.textEncoder=new TextEncoder}getValueFromBuffer(s){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(g,x,b){const C=[],I=new Array(x.length).fill(0);for(let j=1;j<x.length;j++)I[j]=I[j-1]+x[j-1];for(let j=0;j<b.length;j++)if(b[j]===255)C.push(b[++j]);else{const V=x[b[j]],G=I[b[j]];for(let Z=0;Z<V;Z++)C.push(g[G+Z])}return new Uint8Array(C)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const f=this.indexBuffer[s];return U1(this.decodedDictionary,this.offsetBuffer[f],this.offsetBuffer[f+1])}offsetToLengthBuffer(s){const f=new Uint32Array(s.length-1);let g=s[0];for(let x=1;x<s.length;x++){const b=s[x];f[x-1]=b-g,g=b}return f}}function hV(l,a,s,f,g,x){return s.type==="scalarType"?(function(b,C,I,j,V,G){let Z=null,X=0;if(b===0)return null;if(G.nullable){const ne=Wo(C,I);X=ne.numValues;const se=I.get(),fe=Ev(C,X,I);I.set(se+ne.byteLength),Z=new uc(fe,ne.numValues)}const ee=Z??j;switch(V.physicalType){case 4:case 3:return(function(ne,se,fe,Pe,me){const ge=Wo(ne,se),Ce=B0(ge,me,ne,se),Re=Pe.physicalType===3;if(Ce===Ea.FLAT){const nt=Cv(me)?z1(ne,se,ge,Re,me):Ho(ne,se,ge,Re);return new A1(fe.name,nt,me)}if(Ce===Ea.SEQUENCE){const nt=MM(ne,se,ge);return new O1(fe.name,nt[0],nt[1],ge.numRleValues)}{const nt=j1(ne,se,ge,Re);return new L1(fe.name,nt,me)}})(C,I,G,V,ee);case 9:return(function(ne,se,fe,Pe,me){let ge=null,Ce=null,Re=null,nt=null,kt=null,_t=null,Ot=null,Kt=null;for(let Rt=0;Rt<Pe;Rt++){const Ct=Wo(se,fe);if(Ct.byteLength!==0)switch(Ct.physicalStreamType){case co.PRESENT:{const dt=Ev(se,Ct.numValues,fe);_t=new uc(dt,Ct.numValues);break}case co.OFFSET:Ce=me!=null||_t!=null?z1(se,fe,Ct,!1,me??_t):Ho(se,fe,Ct,!1);break;case co.LENGTH:{const dt=Gf(se,fe,Ct);Gs.DICTIONARY===Ct.logicalStreamType.lengthType?ge=dt:Gs.SYMBOL===Ct.logicalStreamType.lengthType?nt=dt:Ot=dt;break}case co.DATA:{const dt=se.subarray(fe.get(),fe.get()+Ct.byteLength);fe.add(Ct.byteLength);const sr=Ct.logicalStreamType.dictionaryType;lc.FSST===sr?kt=dt:lc.SINGLE===sr||lc.SHARED===sr?Re=dt:lc.NONE===sr&&(Kt=dt);break}}}return(function(Rt,Ct,dt,sr,nr,lr,er){return Ct?new WM(Rt,dt,sr,nr,lr,Ct,er):null})(ne,kt,Ce,ge,Re,nt,me??_t)??(function(Rt,Ct,dt,sr,nr){return Ct?nr?new $g(Rt,dt,sr,Ct,nr):new $g(Rt,dt,sr,Ct):null})(ne,Re,Ce,ge,me??_t)??(function(Rt,Ct,dt,sr,nr){if(!Ct||!dt)return null;if(sr)return nr?new $g(Rt,sr,Ct,dt,nr):new $g(Rt,sr,Ct,dt);if(nr&&nr.size()!==Ct.length-1){const lr=new Int32Array(nr.size());let er=0;for(let vr=0;vr<nr.size();vr++)lr[vr]=nr.get(vr)?er++:0;return new $g(Rt,lr,Ct,dt,nr)}return nr?new GM(Rt,Ct,dt,nr):new GM(Rt,Ct,dt)})(ne,Ot,Kt,Ce,me??_t)})(G.name,C,I,G.nullable?b-1:b,Z);case 0:return(function(ne,se,fe,Pe,me){const ge=Wo(ne,se),Ce=ge.numValues,Re=se.get(),nt=Cv(me)?(function(_t,Ot,Kt,Rt){const Ct=qM(_t,Math.ceil(Ot/8),Kt),dt=new uc(Ct,Ot),sr=Rt.size(),nr=new uc(new Uint8Array(sr),sr);let lr=0;for(let er=0;er<Rt.size();er++){const vr=!!Rt.get(er)&&dt.get(lr++);nr.set(er,vr)}return nr.getBuffer()})(ne,Ce,se,me):Ev(ne,Ce,se);se.set(Re+ge.byteLength);const kt=new uc(nt,Ce);return new lV(fe.name,kt,me)})(C,I,G,0,ee);case 6:case 5:return(function(ne,se,fe,Pe,me){const ge=Wo(ne,se),Ce=B0(ge,Pe,ne,se),Re=me.physicalType===5;if(Ce===Ea.FLAT){const nt=Cv(Pe)?(function(kt,_t,Ot,Kt,Rt){return(function(Ct,dt,sr,nr){switch(dt.logicalLevelTechnique1){case rn.DELTA:return dt.logicalLevelTechnique2===rn.RLE&&(Ct=EM(Ct,dt.runs,dt.numRleValues)),(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0;lr.get(0)?(vr[0]=lr.get(0)?er[0]>>1n^-(1n&er[0]):0n,fn=1):vr[0]=0n;let en=1;for(;en!=vr.length;++en)vr[en]=lr.get(en)?vr[en-1]+(er[fn]>>1n^-(1n&er[fn++])):vr[en-1];return vr})(nr,Ct);case rn.RLE:return(function(lr,er,vr,fn){const en=er;return vr?(function(yi,fo,oa){const vi=new BigInt64Array(yi.size());let di=0;for(let An=0;An<oa;An++){const Ci=Number(fo[An]);let Ni=fo[An+oa];Ni=Ni>>1n^-(1n&Ni);for(let ui=di;ui<di+Ci;ui++)yi.get(ui)?vi[ui]=Ni:(vi[ui]=0n,di++);di+=Ci}return vi})(fn,lr,en.runs):(function(yi,fo,oa){const vi=new BigInt64Array(yi.size());let di=0;for(let An=0;An<oa;An++){const Ci=Number(fo[An]),Ni=fo[An+oa];for(let ui=di;ui<di+Ci;ui++)yi.get(ui)?vi[ui]=Ni:(vi[ui]=0n,di++);di+=Ci}return vi})(fn,lr,en.runs)})(Ct,dt,sr,nr);case rn.NONE:return Ct=sr?(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0,en=0;for(;en!=vr.length;++en)if(lr.get(en)){const yi=er[fn++];vr[en]=yi>>1n^-(1n&yi)}else vr[en]=0n;return vr})(nr,Ct):(function(lr,er){const vr=new BigInt64Array(lr.size());let fn=0,en=0;for(;en!=vr.length;++en)vr[en]=lr.get(en)?er[fn++]:0n;return vr})(nr,Ct),Ct;default:throw new Error("The specified Logical level technique is not supported")}})(N0(kt,_t,Ot.numValues),Ot,Kt,Rt)})(ne,se,ge,Re,Pe):AM(ne,se,ge,Re);return new OM(fe.name,nt,Pe)}if(Ce===Ea.SEQUENCE){const nt=kM(ne,se,ge);return new LM(fe.name,nt[0],nt[1],ge.numRleValues)}{const nt=IM(ne,se,ge,Re);return new UM(fe.name,nt,Pe)}})(C,I,G,ee,V);case 7:return(function(ne,se,fe,Pe){const me=Wo(ne,se),ge=Cv(Pe)?(function(Ce,Re,nt,kt){const _t=Re.get(),Ot=_t+kt*Float32Array.BYTES_PER_ELEMENT,Kt=new Uint8Array(Ce.subarray(_t,Ot)).buffer,Rt=new Float32Array(Kt);Re.set(Ot);const Ct=nt.size(),dt=new Float32Array(Ct);let sr=0;for(let nr=0;nr<Ct;nr++)dt[nr]=nt.get(nr)?Rt[sr++]:0;return dt})(ne,se,Pe,me.numValues):(function(Ce,Re,nt){const kt=Re.get(),_t=kt+nt*Float32Array.BYTES_PER_ELEMENT,Ot=new Uint8Array(Ce.subarray(kt,_t)).buffer,Kt=new Float32Array(Ot);return Re.set(_t),Kt})(ne,se,me.numValues);return new uV(fe.name,ge,Pe)})(C,I,G,ee);case 8:return(function(ne,se,fe,Pe){const me=Wo(ne,se),ge=Cv(Pe)?(function(Ce,Re,nt,kt){const _t=Re.get(),Ot=_t+kt*Float64Array.BYTES_PER_ELEMENT,Kt=new Uint8Array(Ce.subarray(_t,Ot)).buffer,Rt=new Float64Array(Kt);Re.set(Ot);const Ct=nt.size(),dt=new Float64Array(Ct);let sr=0;for(let nr=0;nr<Ct;nr++)dt[nr]=nt.get(nr)?Rt[sr++]:0;return dt})(ne,se,Pe,me.numValues):(function(Ce,Re,nt){const kt=Re.get(),_t=kt+nt*Float64Array.BYTES_PER_ELEMENT,Ot=new Uint8Array(Ce.subarray(kt,_t)).buffer,Kt=new Float64Array(Ot);return Re.set(_t),Kt})(ne,se,me.numValues);return new I1(fe.name,ge,Pe)})(C,I,G,ee);default:throw new Error(`The specified data type for the field is currently not supported: ${V}`)}})(f,l,a,g,s.scalarType,s):f!=1?null:(function(b,C,I,j){let V=null,G=null,Z=null,X=null,ee=!1;for(;!ee;){const Pe=Wo(b,C);switch(Pe.physicalStreamType){case co.LENGTH:Gs.DICTIONARY===Pe.logicalStreamType.lengthType?V=Gf(b,C,Pe):Z=Gf(b,C,Pe);break;case co.DATA:lc.SINGLE===Pe.logicalStreamType.dictionaryType||lc.SHARED===Pe.logicalStreamType.dictionaryType?(G=b.subarray(C.get(),C.get()+Pe.byteLength),ee=!0):X=b.subarray(C.get(),C.get()+Pe.byteLength),C.add(Pe.byteLength)}}const ne=I.complexType.children,se=[];let fe=0;for(const Pe of ne){const me=Ua(b,C,1)[0];if(me==0)continue;const ge=`${I.name}${Pe.name==="default"?"":":"+Pe.name}`;if(me!==2||Pe.type!=="scalarField"||Pe.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Ce=Wo(b,C),Re=Ev(b,Ce.numValues,C),nt=Wo(b,C),kt=nt.decompressedCount!==j?z1(b,C,nt,!1,new uc(Re,Ce.numValues)):Ho(b,C,nt,!1);se[fe++]=X?new WM(ge,kt,V,G,Z,X,new uc(Re,Ce.numValues)):new $g(ge,kt,V,G,new uc(Re,Ce.numValues))}return se})(l,a,s,g)}function Cv(l){return l instanceof uc}function dV(l){if(l.name==="id")return!1;if(l.type==="scalarType"){const a=l.scalarType;if(a.type==="physicalType")switch(a.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(a.type==="logicalType")return!1}else if(l.type==="complexType"){const a=l.complexType;if(a.type==="physicalType")switch(a.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",l),!1}const fV=new TextDecoder;function HM(l,a){const s=Ua(l,a,1)[0];if(s===0)return"";const f=a.get(),g=l.subarray(f,f+s);return a.add(s),fV.decode(g)}function ZM(l,a){const s=Ua(l,a,1)[0]>>>0,f=!!(4&s),g=!!(2&s),x=Ua(l,a,1)[0]>>>0,b={};if(1&s&&(b.nullable=!0),g){const C={};if(f?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),8&s){const I=Ua(l,a,1)[0]>>>0;C.children=new Array(I);for(let j=0;j<I;j++)C.children[j]=ZM(l,a)}b.type="complexField",b.complexField=C}else{const C={};f?(C.type="logicalType",C.logicalType=x):(C.type="physicalType",C.physicalType=x),b.type="scalarField",b.scalarField=C}return b}function pV(l,a){const s=Ua(l,a,1)[0]>>>0,f=(function(g){switch(g){case 0:case 1:case 2:case 3:{const x={};x.nullable=!!(1&g),x.columnScope=0;const b={};return b.physicalType=g>1?6:4,b.type="physicalType",x.scalarType=b,x.type="scalarType",x}case 4:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:0};return x.type="complexType",x.complexType=b,x}case 30:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:1};return x.type="complexType",x.complexType=b,x}default:return(function(x){let b=null;switch(x){case 10:case 11:b=0;break;case 12:case 13:b=1;break;case 14:case 15:b=2;break;case 16:case 17:b=3;break;case 18:case 19:b=4;break;case 20:case 21:b=5;break;case 22:case 23:b=6;break;case 24:case 25:b=7;break;case 26:case 27:b=8;break;case 28:case 29:b=9;break;default:return null}const C={};C.nullable=!!(1&x),C.columnScope=0;const I={type:"physicalType"};return I.physicalType=b,C.type="scalarType",C.scalarType=I,C})(g)}})(s);if(!f)throw new Error(`Unsupported column type code: ${s}`);if((function(g){return g>=10})(s)?f.name=HM(l,a):s>=0&&s<=3?f.name="id":s===4&&(f.name="geometry"),(function(g){return g===30})(s)){const g=Ua(l,a,1)[0]>>>0,x=f.complexType;x.children=new Array(g);for(let b=0;b<g;b++)x.children[b]=ZM(l,a)}return f}function mV(l,a){const s={featureTables:[]},f={};f.name=HM(l,a);const g=Ua(l,a,1)[0]>>>0,x=Ua(l,a,1)[0]>>>0;f.columns=new Array(x);for(let b=0;b<x;b++)f.columns[b]=pV(l,a);return s.featureTables.push(f),[s,g]}function gV(l,a,s,f,g,x,b=!1){const C=a.scalarType.physicalType,I=B0(g,x,l,s);if(C===4)switch(I){case Ea.FLAT:{const j=Ho(l,s,g,!1);return new A1(f,j,x)}case Ea.SEQUENCE:{const j=MM(l,s,g);return new O1(f,j[0],j[1],g.numRleValues)}case Ea.CONST:{const j=j1(l,s,g,!1);return new L1(f,j,x)}}else switch(I){case Ea.FLAT:{if(b){const V=(function(G,Z,X,ee){const ne=(function(se,fe,Pe){const me=new Float64Array(fe);for(let ge=0;ge<fe;ge++)me[ge]=rV(se,Pe);return me})(G,X.numValues,Z);return(function(se,fe,Pe){switch(fe.logicalLevelTechnique1){case rn.DELTA:return fe.logicalLevelTechnique2===rn.RLE&&(se=CM(se,fe.runs,fe.numRleValues)),(function(me){me[0]=me[0]%2==1?(me[0]+1)/-2:me[0]/2;const ge=me.length/4*4;let Ce=1;if(ge>=4)for(;Ce<ge-4;Ce+=4){const Re=me[Ce],nt=me[Ce+1],kt=me[Ce+2],_t=me[Ce+3];me[Ce]=(Re%2==1?(Re+1)/-2:Re/2)+me[Ce-1],me[Ce+1]=(nt%2==1?(nt+1)/-2:nt/2)+me[Ce],me[Ce+2]=(kt%2==1?(kt+1)/-2:kt/2)+me[Ce+1],me[Ce+3]=(_t%2==1?(_t+1)/-2:_t/2)+me[Ce+2]}for(;Ce!=me.length;++Ce)me[Ce]=(me[Ce]%2==1?(me[Ce]+1)/-2:me[Ce]/2)+me[Ce-1]})(se),se;case rn.RLE:return(function(me,ge,Ce){return CM(me,ge.runs,ge.numRleValues)})(se,fe);case rn.NONE:return se;default:throw new Error(`The specified Logical level technique is not supported: ${fe.logicalLevelTechnique1}`)}})(ne,X)})(l,s,g);return new I1(f,V,x)}const j=AM(l,s,g,!1);return new OM(f,j,x)}case Ea.SEQUENCE:{const j=kM(l,s,g);return new LM(f,j[0],j[1],g.numRleValues)}case Ea.CONST:{const j=IM(l,s,g,!1);return new UM(f,j,x)}}throw new Error("Vector type not supported for id column.")}class yV{constructor(a,s){var f;switch(this._featureData=a,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case Ca.POINT:case Ca.MULTIPOINT:this.type=1;break;case Ca.LINESTRING:case Ca.MULTILINESTRING:this.type=2;break;case Ca.POLYGON:case Ca.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const a=[];for(const s of this._featureData.geometry.coordinates){const f=[];for(const g of s)f.push(new _(g.x,g.y));a.push(f)}return a}}class vV{constructor(a){this.features=[],this.featureTable=a,this.name=a.name,this.extent=a.extent,this.version=2,this.features=a.getFeatures(),this.length=this.features.length}feature(a){return new yV(this.features[a],this.extent)}}class KM{constructor(a){this.layers={};const s=(function(f,g,x=!0){const b=new tV(0),C=[];for(;b.get()<f.length;){const I=Ua(f,b,1)[0]>>>0,j=b.get()+I;if(j>f.length)throw new Error(`Block overruns tile: ${j} > ${f.length}`);if(Ua(f,b,1)[0]>>>0!=1){b.set(j);continue}const V=mV(f,b),G=V[1],Z=V[0].featureTables[0];let X=null,ee=null;const ne=[];let se=0;for(const Pe of Z.columns){const me=Pe.name;if(me==="id"){let ge=null;if(Pe.nullable){const Re=Wo(f,b),nt=b.get(),kt=Ev(f,Re.numValues,b);b.set(nt+Re.byteLength),ge=new uc(kt,Re.numValues)}const Ce=Wo(f,b);se=Ce.decompressedCount,X=gV(f,Pe,b,me,Ce,ge??se,x)}else if(me==="geometry"){const ge=Ua(f,b,1)[0];if(se===0){const Ce=b.get();se=Wo(f,b).decompressedCount,b.set(Ce)}ee=sV(f,ge,b,se)}else{const ge=dV(Pe)?Ua(f,b,1)[0]:1;if(ge===0&&Pe.type==="scalarType")continue;const Ce=hV(f,b,Pe,ge,se);if(Ce)if(Array.isArray(Ce))for(const Re of Ce)ne.push(Re);else ne.push(Ce)}}const fe=new eV(Z.name,ee,X,ne,G);C.push(fe),b.set(j)}return C})(new Uint8Array(a));this.layers=s.reduce(((f,g)=>Object.assign(Object.assign({},f),{[g.name]:new vV(g)})),{})}}class _V{constructor(a,s){this.feature=a,this.type=a.type,this.properties=a.tags?a.tags:{},this.extent=s,"id"in a&&(typeof a.id=="string"?this.id=parseInt(a.id,10):typeof a.id!="number"||isNaN(a.id)||(this.id=a.id))}loadGeometry(){const a=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of s){const g=[];for(const x of f)g.push(new _(x[0],x[1]));a.push(g)}return a}}const Tv="_geojsonTileLayer";function xV(l,a){a.writeVarintField(15,l.version||1),a.writeStringField(1,l.name||""),a.writeVarintField(5,l.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<l.length;x++)s.feature=l.feature(x),a.writeMessage(2,bV,s);const f=s.keys;for(const x of f)a.writeStringField(3,x);const g=s.values;for(const x of g)a.writeMessage(4,PV,x)}function bV(l,a){if(!l.feature)return;const s=l.feature;s.id!==void 0&&a.writeVarintField(1,s.id),a.writeMessage(2,wV,l),a.writeVarintField(3,s.type),a.writeMessage(4,SV,s)}function wV(l,a){var s;for(const f in(s=l.feature)==null?void 0:s.properties){let g=l.feature.properties[f],x=l.keycache[f];if(g==null)continue;x===void 0&&(l.keys.push(f),x=l.keys.length-1,l.keycache[f]=x),a.writeVarint(x),typeof g!="string"&&typeof g!="boolean"&&typeof g!="number"&&(g=JSON.stringify(g));const b=typeof g+":"+g;let C=l.valuecache[b];C===void 0&&(l.values.push(g),C=l.values.length-1,l.valuecache[b]=C),a.writeVarint(C)}}function G1(l,a){return(a<<3)+(7&l)}function XM(l){return l<<1^l>>31}function SV(l,a){const s=l.loadGeometry(),f=l.type;let g=0,x=0;for(const b of s){let C=1;f===1&&(C=b.length),a.writeVarint(G1(1,C));const I=f===3?b.length-1:b.length;for(let j=0;j<I;j++){j===1&&f!==1&&a.writeVarint(G1(2,I-1));const V=b[j].x-g,G=b[j].y-x;a.writeVarint(XM(V)),a.writeVarint(XM(G)),g+=V,x+=G}l.type===3&&a.writeVarint(G1(7,1))}}function PV(l,a){const s=typeof l;s==="string"?a.writeStringField(1,l):s==="boolean"?a.writeBooleanField(7,l):s==="number"&&(l%1!=0?a.writeDoubleField(3,l):l<0?a.writeSVarintField(6,l):a.writeVarintField(5,l))}class YM{constructor(a,s){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new no(Qe,16,0),this.grid3D=new no(Qe,16,0),this.featureIndexArray=new ce,this.promoteId=s}insert(a,s,f,g,x,b){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x);const I=b?this.grid3D:this.grid;for(let j=0;j<s.length;j++){const V=s[j],G=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<V.length;Z++){const X=V[Z];G[0]=Math.min(G[0],X.x),G[1]=Math.min(G[1],X.y),G[2]=Math.max(G[2],X.x),G[3]=Math.max(G[3],X.y)}G[0]<Qe&&G[1]<Qe&&G[2]>=0&&G[3]>=0&&I.insert(C,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new x0(new p(this.rawTileData)).layers:new KM(this.rawTileData).layers,this.sourceLayerCoder=new _M(this.vtLayers?Object.keys(this.vtLayers).sort():[Tv])),this.vtLayers}query(a,s,f,g){this.loadVTLayers();const x=a.params,b=Qe/a.tileSize/a.scale,C=$u(x.filter,x.globalState),I=a.queryGeometry,j=a.queryPadding*b,V=mm.fromPoints(I),G=this.grid.query(V.minX-j,V.minY-j,V.maxX+j,V.maxY+j),Z=mm.fromPoints(a.cameraQueryGeometry).expandBy(j),X=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((se,fe,Pe,me)=>(function(ge,Ce,Re,nt,kt){for(const Ot of ge)if(Ce<=Ot.x&&Re<=Ot.y&&nt>=Ot.x&&kt>=Ot.y)return!0;const _t=[new _(Ce,Re),new _(Ce,kt),new _(nt,kt),new _(nt,Re)];if(ge.length>2){for(const Ot of _t)if(rc(ge,Ot))return!0}for(let Ot=0;Ot<ge.length-1;Ot++)if(nc(ge[Ot],ge[Ot+1],_t))return!0;return!1})(a.cameraQueryGeometry,se-j,fe-j,Pe+j,me+j)));for(const se of X)G.push(se);G.sort(EV);const ee={};let ne;for(let se=0;se<G.length;se++){const fe=G[se];if(fe===ne)continue;ne=fe;const Pe=this.featureIndexArray.get(fe);let me=null;this.loadMatchingFeature(ee,Pe.bucketIndex,Pe.sourceLayerIndex,Pe.featureIndex,C,x.layers,x.availableImages,s,f,g,((ge,Ce,Re)=>(me||(me=Vs(ge)),Ce.queryIntersectsFeature({queryGeometry:I,feature:ge,featureState:Re,geometry:me,zoom:this.z,transform:a.transform,pixelsToTileUnits:b,pixelPosMatrix:a.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:a.getElevation}))))}return ee}loadMatchingFeature(a,s,f,g,x,b,C,I,j,V,G){const Z=this.bucketLayerIDs[s];if(b&&!Z.some((se=>b.has(se))))return;const X=this.sourceLayerCoder.decode(f),ee=this.vtLayers[X].feature(g);if(x.needGeometry){const se=ml(ee,!0);if(!x.filter(new Mn(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!x.filter(new Mn(this.tileID.overscaledZ),ee))return;const ne=this.getId(ee,X);for(let se=0;se<Z.length;se++){const fe=Z[se];if(b&&!b.has(fe))continue;const Pe=I[fe];if(!Pe)continue;let me={};ne&&V&&(me=V.getState(Pe.sourceLayer||Tv,ne));const ge=$t({},j[fe]);ge.paint=QM(ge.paint,Pe.paint,ee,me,C),ge.layout=QM(ge.layout,Pe.layout,ee,me,C);const Ce=!G||G(ee,Pe,me);if(!Ce)continue;const Re=new xM(ee,this.z,this.x,this.y,ne);Re.layer=ge;let nt=a[fe];nt===void 0&&(nt=a[fe]=[]),nt.push({featureIndex:g,feature:Re,intersectionZ:Ce})}}lookupSymbolFeatures(a,s,f,g,x,b,C,I){const j={};this.loadVTLayers();const V=$u(x.filterSpec,x.globalState);for(const G of a)this.loadMatchingFeature(j,f,g,G,V,b,C,I,s);return j}hasLayer(a){for(const s of this.bucketLayerIDs)for(const f of s)if(a===f)return!0;return!1}getId(a,s){var f;let g=a.id;return this.promoteId&&(g=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((f=a.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(g=Number(a.properties.cluster_id))),g}}function QM(l,a,s,f,g){return Lt(l,((x,b)=>{const C=a instanceof Ls?a.get(b):null;return C&&C.evaluate?C.evaluate(s,f,g):C}))}function EV(l,a){return a-l}function JM(l,a,s,f,g){const x=[];for(let b=0;b<l.length;b++){const C=l[b];let I;for(let j=0;j<C.length-1;j++){let V=C[j],G=C[j+1];V.x<a&&G.x<a||(V.x<a?V=new _(a,V.y+(a-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x<a&&(G=new _(a,V.y+(a-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y<s&&G.y<s||(V.y<s?V=new _(V.x+(s-V.y)/(G.y-V.y)*(G.x-V.x),s)._round():G.y<s&&(G=new _(V.x+(s-V.y)/(G.y-V.y)*(G.x-V.x),s)._round()),V.x>=f&&G.x>=f||(V.x>=f?V=new _(f,V.y+(f-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x>=f&&(G=new _(f,V.y+(f-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y>=g&&G.y>=g||(V.y>=g?V=new _(V.x+(g-V.y)/(G.y-V.y)*(G.x-V.x),g)._round():G.y>=g&&(G=new _(V.x+(g-V.y)/(G.y-V.y)*(G.x-V.x),g)._round()),I&&V.equals(I[I.length-1])||(I=[V],x.push(I)),I.push(G)))))}}return x}function ek(l,a,s,f,g){switch(a){case 1:return(function(x,b,C,I){const j=[];for(const V of x)for(const G of V){const Z=I===0?G.x:G.y;Z>=b&&Z<=C&&j.push([G])}return j})(l,s,f,g);case 2:return tk(l,s,f,g,!1);case 3:return tk(l,s,f,g,!0)}return[]}function CV(l,a,s,f,g){const x=f===0?TV:MV;let b=[];const C=[];for(let V=0;V<l.length-1;V++){const G=l[V],Z=l[V+1],X=f===0?G.x:G.y,ee=f===0?Z.x:Z.y;let ne=!1;X<a?ee>a&&b.push(x(G,Z,a)):X>s?ee<s&&b.push(x(G,Z,s)):b.push(G),ee<a&&X>=a&&(b.push(x(G,Z,a)),ne=!0),ee>s&&X<=s&&(b.push(x(G,Z,s)),ne=!0),!g&&ne&&(C.push(b),b=[])}const I=l.length-1,j=f===0?l[I].x:l[I].y;return j>=a&&j<=s&&b.push(l[I]),g&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new _(b[0].x,b[0].y)),b.length>0&&C.push(b),C}function tk(l,a,s,f,g){const x=[];for(const b of l){const C=CV(b,a,s,f,g);C.length>0&&x.push(...C)}return x}function TV(l,a,s){return new _(s,l.y+(s-l.x)/(a.x-l.x)*(a.y-l.y))}function MV(l,a,s){return new _(l.x+(s-l.y)/(a.y-l.y)*(a.x-l.x),s)}Jt("FeatureIndex",YM,{omit:["rawTileData","sourceLayerCoder"]});class Wf extends _{constructor(a,s,f,g){super(a,s),this.angle=f,g!==void 0&&(this.segment=g)}clone(){return new Wf(this.x,this.y,this.angle,this.segment)}}function rk(l,a,s,f,g){if(a.segment===void 0||s===0)return!0;let x=a,b=a.segment+1,C=0;for(;C>-s/2;){if(b--,b<0)return!1;C-=l[b].dist(x),x=l[b]}C+=l[b].dist(l[b+1]),b++;const I=[];let j=0;for(;C<s/2;){const V=l[b],G=l[b+1];if(!G)return!1;let Z=l[b-1].angleTo(V)-V.angleTo(G);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:Z}),j+=Z;C-I[0].distance>f;)j-=I.shift().angleDelta;if(j>g)return!1;b++,C+=V.dist(G)}return!0}function nk(l){let a=0;for(let s=0;s<l.length-1;s++)a+=l[s].dist(l[s+1]);return a}function ik(l,a,s){return l?.6*a*s:0}function ak(l,a){return Math.max(l?l.right-l.left:0,a?a.right-a.left:0)}function kV(l,a,s,f,g,x){const b=ik(s,g,x),C=ak(s,f)*x;let I=0;const j=nk(l)/2;for(let V=0;V<l.length-1;V++){const G=l[V],Z=l[V+1],X=G.dist(Z);if(I+X>j){const ee=(j-I)/X,ne=ii.number(G.x,Z.x,ee),se=ii.number(G.y,Z.y,ee),fe=new Wf(ne,se,Z.angleTo(G),V);return fe._round(),!b||rk(l,fe,C,b,a)?fe:void 0}I+=X}}function AV(l,a,s,f,g,x,b,C,I){const j=ik(f,x,b),V=ak(f,g),G=V*b,Z=l[0].x===0||l[0].x===I||l[0].y===0||l[0].y===I;return a-G<a/4&&(a=G+a/4),ok(l,Z?a/2*C%a:(V/2+2*x)*b*C%a,a,j,s,G,Z,!1,I)}function ok(l,a,s,f,g,x,b,C,I){const j=x/2,V=nk(l);let G=0,Z=a-s,X=[];for(let ee=0;ee<l.length-1;ee++){const ne=l[ee],se=l[ee+1],fe=ne.dist(se),Pe=se.angleTo(ne);for(;Z+s<G+fe;){Z+=s;const me=(Z-G)/fe,ge=ii.number(ne.x,se.x,me),Ce=ii.number(ne.y,se.y,me);if(ge>=0&&ge<I&&Ce>=0&&Ce<I&&Z-j>=0&&Z+j<=V){const Re=new Wf(ge,Ce,Pe,ee);Re._round(),f&&!rk(l,Re,x,f,g)||X.push(Re)}}G+=fe}return C||X.length||b||(X=ok(l,G/2,s,f,g,x,b,!0,I)),X}function sk(l,a,s,f){const g=[],x=l.image,b=x.pixelRatio,C=x.paddedRect.w-2,I=x.paddedRect.h-2;let j={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const V=x.stretchX||[[0,C]],G=x.stretchY||[[0,I]],Z=(dt,sr)=>dt+sr[1]-sr[0],X=V.reduce(Z,0),ee=G.reduce(Z,0),ne=C-X,se=I-ee;let fe=0,Pe=X,me=0,ge=ee,Ce=0,Re=ne,nt=0,kt=se;if(x.content&&f){const dt=x.content,sr=dt[2]-dt[0],nr=dt[3]-dt[1];(x.textFitWidth||x.textFitHeight)&&(j=L0(l)),fe=q0(V,0,dt[0]),me=q0(G,0,dt[1]),Pe=q0(V,dt[0],dt[2]),ge=q0(G,dt[1],dt[3]),Ce=dt[0]-fe,nt=dt[1]-me,Re=sr-Pe,kt=nr-ge}const _t=j.x1,Ot=j.y1,Kt=j.x2-_t,Rt=j.y2-Ot,Ct=(dt,sr,nr,lr)=>{const er=G0(dt.stretch-fe,Pe,Kt,_t),vr=W0(dt.fixed-Ce,Re,dt.stretch,X),fn=G0(sr.stretch-me,ge,Rt,Ot),en=W0(sr.fixed-nt,kt,sr.stretch,ee),yi=G0(nr.stretch-fe,Pe,Kt,_t),fo=W0(nr.fixed-Ce,Re,nr.stretch,X),oa=G0(lr.stretch-me,ge,Rt,Ot),vi=W0(lr.fixed-nt,kt,lr.stretch,ee),di=new _(er,fn),An=new _(yi,fn),Ci=new _(yi,oa),Ni=new _(er,oa),ui=new _(vr/b,en/b),ps=new _(fo/b,vi/b),po=a*Math.PI/180;if(po){const Ta=Math.sin(po),bi=Math.cos(po),sa=[bi,-Ta,Ta,bi];di._matMult(sa),An._matMult(sa),Ni._matMult(sa),Ci._matMult(sa)}const ms=dt.stretch+dt.fixed,au=sr.stretch+sr.fixed;return{tl:di,tr:An,bl:Ni,br:Ci,tex:{x:x.paddedRect.x+1+ms,y:x.paddedRect.y+1+au,w:nr.stretch+nr.fixed-ms,h:lr.stretch+lr.fixed-au},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ui,pixelOffsetBR:ps,minFontScaleX:Re/b/Kt,minFontScaleY:kt/b/Rt,isSDF:s}};if(f&&(x.stretchX||x.stretchY)){const dt=lk(V,ne,X),sr=lk(G,se,ee);for(let nr=0;nr<dt.length-1;nr++){const lr=dt[nr],er=dt[nr+1];for(let vr=0;vr<sr.length-1;vr++)g.push(Ct(lr,sr[vr],er,sr[vr+1]))}}else g.push(Ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return g}function q0(l,a,s){let f=0;for(const g of l)f+=Math.max(a,Math.min(s,g[1]))-Math.max(a,Math.min(s,g[0]));return f}function lk(l,a,s){const f=[{fixed:-1,stretch:0}];for(const[g,x]of l){const b=f[f.length-1];f.push({fixed:g-b.stretch,stretch:b.stretch}),f.push({fixed:g-b.stretch,stretch:b.stretch+(x-g)})}return f.push({fixed:a+1,stretch:s}),f}function G0(l,a,s,f){return l/a*s+f}function W0(l,a,s,f){return l-a*s/f}Jt("Anchor",Wf);class H0{constructor(a,s,f,g,x,b,C,I,j,V){var G;if(this.boxStartIndex=a.length,j){let Z=b.top,X=b.bottom;const ee=b.collisionPadding;ee&&(Z-=ee[1],X+=ee[3]);let ne=X-Z;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const Z=!((G=b.image)===null||G===void 0)&&G.content&&(b.image.textFitWidth||b.image.textFitHeight)?L0(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};Z.y1=Z.y1*C-I[0],Z.y2=Z.y2*C+I[2],Z.x1=Z.x1*C-I[3],Z.x2=Z.x2*C+I[1];const X=b.collisionPadding;if(X&&(Z.x1-=X[0]*C,Z.y1-=X[1]*C,Z.x2+=X[2]*C,Z.y2+=X[3]*C),V){const ee=new _(Z.x1,Z.y1),ne=new _(Z.x2,Z.y1),se=new _(Z.x1,Z.y2),fe=new _(Z.x2,Z.y2),Pe=V*Math.PI/180;ee._rotate(Pe),ne._rotate(Pe),se._rotate(Pe),fe._rotate(Pe),Z.x1=Math.min(ee.x,ne.x,se.x,fe.x),Z.x2=Math.max(ee.x,ne.x,se.x,fe.x),Z.y1=Math.min(ee.y,ne.y,se.y,fe.y),Z.y2=Math.max(ee.y,ne.y,se.y,fe.y)}a.emplaceBack(s.x,s.y,Z.x1,Z.y1,Z.x2,Z.y2,f,g,x)}this.boxEndIndex=a.length}}class IV{constructor(a=[],s=(f,g)=>f<g?-1:f>g?1:0){if(this.data=a,this.length=this.data.length,this.compare=s,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:s,compare:f}=this,g=s[a];for(;a>0;){const x=a-1>>1,b=s[x];if(f(g,b)>=0)break;s[a]=b,a=x}s[a]=g}_down(a){const{data:s,compare:f}=this,g=this.length>>1,x=s[a];for(;a<g;){let b=1+(a<<1);const C=b+1;if(C<this.length&&f(s[C],s[b])<0&&(b=C),f(s[b],x)>=0)break;s[a]=s[b],a=b}s[a]=x}}function OV(l,a=1,s=!1){const f=mm.fromPoints(l[0]),g=Math.min(f.width(),f.height());let x=g/2;const b=new IV([],LV),{minX:C,minY:I,maxX:j,maxY:V}=f;if(g===0)return new _(C,I);for(let X=C;X<j;X+=g)for(let ee=I;ee<V;ee+=g)b.push(new Ug(X+x,ee+x,x,l));let G=(function(X){let ee=0,ne=0,se=0;const fe=X[0];for(let Pe=0,me=fe.length,ge=me-1;Pe<me;ge=Pe++){const Ce=fe[Pe],Re=fe[ge],nt=Ce.x*Re.y-Re.x*Ce.y;ne+=(Ce.x+Re.x)*nt,se+=(Ce.y+Re.y)*nt,ee+=3*nt}return new Ug(ne/ee,se/ee,0,X)})(l),Z=b.length;for(;b.length;){const X=b.pop();(X.d>G.d||!G.d)&&(G=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,Z)),X.max-G.d<=a||(x=X.h/2,b.push(new Ug(X.p.x-x,X.p.y-x,x,l)),b.push(new Ug(X.p.x+x,X.p.y-x,x,l)),b.push(new Ug(X.p.x-x,X.p.y+x,x,l)),b.push(new Ug(X.p.x+x,X.p.y+x,x,l)),Z+=4)}return s&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${G.d}`)),G.p}function LV(l,a){return a.max-l.max}function Ug(l,a,s,f){this.p=new _(l,a),this.h=s,this.d=(function(g,x){let b=!1,C=1/0;for(let I=0;I<x.length;I++){const j=x[I];for(let V=0,G=j.length,Z=G-1;V<G;Z=V++){const X=j[V],ee=j[Z];X.y>g.y!=ee.y>g.y&&g.x<(ee.x-X.x)*(g.y-X.y)/(ee.y-X.y)+X.x&&(b=!b),C=Math.min(C,Sg(g,X,ee))}}return(b?1:-1)*Math.sqrt(C)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ho;d.aP=void 0,(ho=d.aP||(d.aP={}))[ho.center=1]="center",ho[ho.left=2]="left",ho[ho.right=3]="right",ho[ho.top=4]="top",ho[ho.bottom=5]="bottom",ho[ho["top-left"]=6]="top-left",ho[ho["top-right"]=7]="top-right",ho[ho["bottom-left"]=8]="bottom-left",ho[ho["bottom-right"]=9]="bottom-right";const W1=Number.POSITIVE_INFINITY;function uk(l,a){return a[1]!==W1?(function(s,f,g){let x=0,b=0;switch(f=Math.abs(f),g=Math.abs(g),s){case"top-right":case"top-left":case"top":b=g-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-g}switch(s){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,b]})(l,a[0],a[1]):(function(s,f){let g=0,x=0;f<0&&(f=0);const b=f/Math.SQRT2;switch(s){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(s){case"top-right":case"bottom-right":g=-b;break;case"top-left":case"bottom-left":g=b;break;case"left":g=f;break;case"right":g=-f}return[g,x]})(l,a[0])}function ck(l,a,s){var f;const g=l.layout,x=(f=g.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(a,{},s);if(x){const C=x.values,I=[];for(let j=0;j<C.length;j+=2){const V=I[j]=C[j],G=C[j+1].map((Z=>Z*aa));V.startsWith("top")?G[1]-=7:V.startsWith("bottom")&&(G[1]+=7),I[j+1]=G}return new Ra(I)}const b=g.get("text-variable-anchor");if(b){let C;C=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(a,{},s)*aa,W1]:g.get("text-offset").evaluate(a,{},s).map((j=>j*aa));const I=[];for(const j of b)I.push(j,uk(j,C));return new Ra(I)}return null}function H1(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function DV(l,a,s,f,g,x,b,C,I,j,V,G){let Z=x.textMaxSize.evaluate(a,{});Z===void 0&&(Z=b);const X=l.layers[0].layout,ee=X.get("icon-offset").evaluate(a,{},V),ne=dk(s.horizontal),se=b/24,fe=l.tilePixelRatio*se,Pe=l.tilePixelRatio*Z/24,me=l.tilePixelRatio*C,ge=l.tilePixelRatio*X.get("symbol-spacing"),Ce=X.get("text-padding")*l.tilePixelRatio,Re=(function(nr,lr,er,vr=1){const fn=nr.get("icon-padding").evaluate(lr,{},er),en=fn&&fn.values;return[en[0]*vr,en[1]*vr,en[2]*vr,en[3]*vr]})(X,a,V,l.tilePixelRatio),nt=X.get("text-max-angle")/180*Math.PI,kt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",_t=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",Ot=X.get("symbol-placement"),Kt=ge/2,Rt=X.get("icon-text-fit");let Ct;f&&Rt!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(Ct=nM(f,s.vertical,Rt,X.get("icon-text-fit-padding"),ee,se)),ne&&(f=nM(f,ne,Rt,X.get("icon-text-fit-padding"),ee,se)));const dt=V?G.line.getGranularityForZoomLevel(V.z):1,sr=(nr,lr)=>{lr.x<0||lr.x>=Qe||lr.y<0||lr.y>=Qe||(function(er,vr,fn,en,yi,fo,oa,vi,di,An,Ci,Ni,ui,ps,po,ms,au,Ta,bi,sa,Ti,Ma,ud,cc,Av){const Hf=er.addToLineVertexArray(vr,fn);let vm,qg,Gg,Wg,gk=0,yk=0,vk=0,_k=0,tS=-1,rS=-1;const cd={};let xk=_n("");if(er.allowVerticalPlacement&&en.vertical){const To=vi.layout.get("text-rotate").evaluate(Ti,{},cc)+90;Gg=new H0(di,vr,An,Ci,Ni,en.vertical,ui,ps,po,To),oa&&(Wg=new H0(di,vr,An,Ci,Ni,oa,au,Ta,po,To))}if(yi){const To=vi.layout.get("icon-rotate").evaluate(Ti,{}),Sl=vi.layout.get("icon-text-fit")!=="none",_m=sk(yi,To,ud,Sl),dc=oa?sk(oa,To,ud,Sl):void 0;qg=new H0(di,vr,An,Ci,Ni,yi,au,Ta,!1,To),gk=4*_m.length;const xm=er.iconSizeData;let uh=null;xm.kind==="source"?(uh=[sd*vi.layout.get("icon-size").evaluate(Ti,{})],uh[0]>Uf&&Tr(`${er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):xm.kind==="composite"&&(uh=[sd*Ma.compositeIconSizes[0].evaluate(Ti,{},cc),sd*Ma.compositeIconSizes[1].evaluate(Ti,{},cc)],(uh[0]>Uf||uh[1]>Uf)&&Tr(`${er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),er.addSymbols(er.icon,_m,uh,sa,bi,Ti,d.az.none,vr,Hf.lineStartIndex,Hf.lineLength,-1,cc),tS=er.icon.placedSymbolArray.length-1,dc&&(yk=4*dc.length,er.addSymbols(er.icon,dc,uh,sa,bi,Ti,d.az.vertical,vr,Hf.lineStartIndex,Hf.lineLength,-1,cc),rS=er.icon.placedSymbolArray.length-1)}const bk=Object.keys(en.horizontal);for(const To of bk){const Sl=en.horizontal[To];if(!vm){xk=_n(Sl.text);const dc=vi.layout.get("text-rotate").evaluate(Ti,{},cc);vm=new H0(di,vr,An,Ci,Ni,Sl,ui,ps,po,dc)}const _m=Sl.positionedLines.length===1;if(vk+=hk(er,vr,Sl,fo,vi,po,Ti,ms,Hf,en.vertical?d.az.horizontal:d.az.horizontalOnly,_m?bk:[To],cd,tS,Ma,cc),_m)break}en.vertical&&(_k+=hk(er,vr,en.vertical,fo,vi,po,Ti,ms,Hf,d.az.vertical,["vertical"],cd,rS,Ma,cc));const zV=vm?vm.boxStartIndex:er.collisionBoxArray.length,NV=vm?vm.boxEndIndex:er.collisionBoxArray.length,FV=Gg?Gg.boxStartIndex:er.collisionBoxArray.length,BV=Gg?Gg.boxEndIndex:er.collisionBoxArray.length,VV=qg?qg.boxStartIndex:er.collisionBoxArray.length,$V=qg?qg.boxEndIndex:er.collisionBoxArray.length,UV=Wg?Wg.boxStartIndex:er.collisionBoxArray.length,qV=Wg?Wg.boxEndIndex:er.collisionBoxArray.length;let hc=-1;const K0=(To,Sl)=>To&&To.circleDiameter?Math.max(To.circleDiameter,Sl):Sl;hc=K0(vm,hc),hc=K0(Gg,hc),hc=K0(qg,hc),hc=K0(Wg,hc);const wk=hc>-1?1:0;wk&&(hc*=Av/aa),er.glyphOffsetArray.length>=zg.MAX_GLYPHS&&Tr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ti.sortKey!==void 0&&er.addToSortKeyRanges(er.symbolInstances.length,Ti.sortKey);const GV=ck(vi,Ti,cc),[WV,HV]=(function(To,Sl){const _m=To.length,dc=Sl==null?void 0:Sl.values;if((dc==null?void 0:dc.length)>0)for(let xm=0;xm<dc.length;xm+=2){const uh=dc[xm+1];To.emplaceBack(d.aP[dc[xm]],uh[0],uh[1])}return[_m,To.length]})(er.textAnchorOffsets,GV);er.symbolInstances.emplaceBack(vr.x,vr.y,cd.right>=0?cd.right:-1,cd.center>=0?cd.center:-1,cd.left>=0?cd.left:-1,cd.vertical||-1,tS,rS,xk,zV,NV,FV,BV,VV,$V,UV,qV,An,vk,_k,gk,yk,wk,0,ui,hc,WV,HV)})(l,lr,nr,s,f,g,Ct,l.layers[0],l.collisionBoxArray,a.index,a.sourceLayerIndex,l.index,fe,[Ce,Ce,Ce,Ce],kt,I,me,Re,_t,ee,a,x,j,V,b)};if(Ot==="line")for(const nr of JM(a.geometry,0,0,Qe,Qe)){const lr=Go(nr,dt),er=AV(lr,ge,nt,s.vertical||ne,f,24,Pe,l.overscaling,Qe);for(const vr of er)ne&&RV(l,ne.text,Kt,vr)||sr(lr,vr)}else if(Ot==="line-center"){for(const nr of a.geometry)if(nr.length>1){const lr=Go(nr,dt),er=kV(lr,nt,s.vertical||ne,f,24,Pe);er&&sr(lr,er)}}else if(a.type==="Polygon")for(const nr of Lh(a.geometry,0)){const lr=OV(nr,16);sr(Go(nr[0],dt,!0),new Wf(lr.x,lr.y,0))}else if(a.type==="LineString")for(const nr of a.geometry){const lr=Go(nr,dt);sr(lr,new Wf(lr[0].x,lr[0].y,0))}else if(a.type==="Point")for(const nr of a.geometry)for(const lr of nr)sr([lr],new Wf(lr.x,lr.y,0))}function hk(l,a,s,f,g,x,b,C,I,j,V,G,Z,X,ee){const ne=(function(Pe,me,ge,Ce,Re,nt,kt,_t){const Ot=Ce.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,Kt=[];for(const Rt of me.positionedLines)for(const Ct of Rt.positionedGlyphs){if(!Ct.rect)continue;const dt=Ct.rect||{};let sr=4,nr=!0,lr=1,er=0;const vr=(Re||_t)&&Ct.vertical,fn=Ct.metrics.advance*Ct.scale/2;if(_t&&me.verticalizable&&(er=Rt.lineOffset/2-(Ct.imageName?-(aa-Ct.metrics.width*Ct.scale)/2:(Ct.scale-1)*aa)),Ct.imageName){const Ta=kt[Ct.imageName];nr=Ta.sdf,lr=Ta.pixelRatio,sr=1/lr}const en=Re?[Ct.x+fn,Ct.y]:[0,0];let yi=Re?[0,0]:[Ct.x+fn+ge[0],Ct.y+ge[1]-er],fo=[0,0];vr&&(fo=yi,yi=[0,0]);const oa=Ct.metrics.isDoubleResolution?2:1,vi=(Ct.metrics.left-sr)*Ct.scale-fn+yi[0],di=(-Ct.metrics.top-sr)*Ct.scale+yi[1],An=vi+dt.w/oa*Ct.scale/lr,Ci=di+dt.h/oa*Ct.scale/lr,Ni=new _(vi,di),ui=new _(An,di),ps=new _(vi,Ci),po=new _(An,Ci);if(vr){const Ta=new _(-fn,fn- -17),bi=-Math.PI/2,sa=12-fn,Ti=new _(22-sa,-(Ct.imageName?sa:0)),Ma=new _(...fo);Ni._rotateAround(bi,Ta)._add(Ti)._add(Ma),ui._rotateAround(bi,Ta)._add(Ti)._add(Ma),ps._rotateAround(bi,Ta)._add(Ti)._add(Ma),po._rotateAround(bi,Ta)._add(Ti)._add(Ma)}if(Ot){const Ta=Math.sin(Ot),bi=Math.cos(Ot),sa=[bi,-Ta,Ta,bi];Ni._matMult(sa),ui._matMult(sa),ps._matMult(sa),po._matMult(sa)}const ms=new _(0,0),au=new _(0,0);Kt.push({tl:Ni,tr:ui,bl:ps,br:po,tex:dt,writingMode:me.writingMode,glyphOffset:en,sectionIndex:Ct.sectionIndex,isSDF:nr,pixelOffsetTL:ms,pixelOffsetBR:au,minFontScaleX:0,minFontScaleY:0})}return Kt})(0,s,C,g,x,b,f,l.allowVerticalPlacement),se=l.textSizeData;let fe=null;se.kind==="source"?(fe=[sd*g.layout.get("text-size").evaluate(b,{})],fe[0]>Uf&&Tr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):se.kind==="composite"&&(fe=[sd*X.compositeTextSizes[0].evaluate(b,{},ee),sd*X.compositeTextSizes[1].evaluate(b,{},ee)],(fe[0]>Uf||fe[1]>Uf)&&Tr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,ne,fe,C,x,b,j,a,I.lineStartIndex,I.lineLength,Z,ee);for(const Pe of V)G[Pe]=l.text.placedSymbolArray.length-1;return 4*ne.length}function dk(l){for(const a in l)return l[a];return null}function RV(l,a,s,f){const g=l.compareText;if(a in g){const x=g[a];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<s)return!0}else g[a]=[];return g[a].push(f),!1}const fk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Z1{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,f]=new Uint8Array(a,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const x=fk[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(a,2,1),[C]=new Uint32Array(a,4,1);return new Z1(C,b,x,a)}constructor(a,s=64,f=Float64Array,g){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=f,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const x=fk.indexOf(this.ArrayType),b=2*a*this.ArrayType.BYTES_PER_ELEMENT,C=a*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+C+I,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+b+C+I),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+C+I,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=a)}add(a,s){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=a,this.coords[this._pos++]=s,f}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return K1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,s,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:C}=this,I=[0,x.length-1,0],j=[];for(;I.length;){const V=I.pop()||0,G=I.pop()||0,Z=I.pop()||0;if(G-Z<=C){for(let se=Z;se<=G;se++){const fe=b[2*se],Pe=b[2*se+1];fe>=a&&fe<=f&&Pe>=s&&Pe<=g&&j.push(x[se])}continue}const X=Z+G>>1,ee=b[2*X],ne=b[2*X+1];ee>=a&&ee<=f&&ne>=s&&ne<=g&&j.push(x[X]),(V===0?a<=ee:s<=ne)&&(I.push(Z),I.push(X-1),I.push(1-V)),(V===0?f>=ee:g>=ne)&&(I.push(X+1),I.push(G),I.push(1-V))}return j}within(a,s,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:b}=this,C=[0,g.length-1,0],I=[],j=f*f;for(;C.length;){const V=C.pop()||0,G=C.pop()||0,Z=C.pop()||0;if(G-Z<=b){for(let se=Z;se<=G;se++)mk(x[2*se],x[2*se+1],a,s)<=j&&I.push(g[se]);continue}const X=Z+G>>1,ee=x[2*X],ne=x[2*X+1];mk(ee,ne,a,s)<=j&&I.push(g[X]),(V===0?a-f<=ee:s-f<=ne)&&(C.push(Z),C.push(X-1),C.push(1-V)),(V===0?a+f>=ee:s+f>=ne)&&(C.push(X+1),C.push(G),C.push(1-V))}return I}}function K1(l,a,s,f,g,x){if(g-f<=s)return;const b=f+g>>1;pk(l,a,b,f,g,x),K1(l,a,s,f,b-1,1-x),K1(l,a,s,b+1,g,1-x)}function pk(l,a,s,f,g,x){for(;g>f;){if(g-f>600){const j=g-f+1,V=s-f+1,G=Math.log(j),Z=.5*Math.exp(2*G/3),X=.5*Math.sqrt(G*Z*(j-Z)/j)*(V-j/2<0?-1:1);pk(l,a,s,Math.max(f,Math.floor(s-V*Z/j+X)),Math.min(g,Math.floor(s+(j-V)*Z/j+X)),x)}const b=a[2*s+x];let C=f,I=g;for(Mv(l,a,f,s),a[2*g+x]>b&&Mv(l,a,f,g);C<I;){for(Mv(l,a,C,I),C++,I--;a[2*C+x]<b;)C++;for(;a[2*I+x]>b;)I--}a[2*f+x]===b?Mv(l,a,f,I):(I++,Mv(l,a,I,g)),I<=s&&(f=I+1),s<=I&&(g=I-1)}}function Mv(l,a,s,f){X1(l,s,f),X1(a,2*s,2*f),X1(a,2*s+1,2*f+1)}function X1(l,a,s){const f=l[a];l[a]=l[s],l[s]=f}function mk(l,a,s,f){const g=l-s,x=a-f;return g*g+x*x}var Y1;d.cH=void 0,(Y1=d.cH||(d.cH={})).create="create",Y1.load="load",Y1.fullLoad="fullLoad";let Z0=null,kv=[];const Q1=1e3/60,J1="loadTime",eS="fullLoadTime",jV={mark(l){performance.mark(l)},frame(l){const a=l;Z0!=null&&kv.push(a-Z0),Z0=a},clearMetrics(){Z0=null,kv=[],performance.clearMeasures(J1),performance.clearMeasures(eS);for(const l in d.cH)performance.clearMarks(d.cH[l])},getPerformanceMetrics(){performance.measure(J1,d.cH.create,d.cH.load),performance.measure(eS,d.cH.create,d.cH.fullLoad);const l=performance.getEntriesByName(J1)[0].duration,a=performance.getEntriesByName(eS)[0].duration,s=kv.length,f=1/(kv.reduce(((x,b)=>x+b),0)/s/1e3),g=kv.filter((x=>x>Q1)).reduce(((x,b)=>x+(b-Q1)/Q1),0);return{loadTime:l,fullLoadTime:a,fps:f,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};d.$=D,d.A=te,d.B=Vo,d.C=mi,d.D=ar,d.E=Ur,d.F=function([l,a,s]){return a+=90,a*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(a)*Math.sin(s),y:l*Math.sin(a)*Math.sin(s),z:l*Math.cos(s)}},d.G=ii,d.H=Mn,d.I=Ei,d.J=Hh,d.K=function(l){if(Wr==null){const a=l.navigator?l.navigator.userAgent:null;Wr=!!l.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Wr},d.L=class{constructor(l,a){this.target=l,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Y6((()=>this.process())),this.subscription=rr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=tn(self)?l:window}registerMessageHandler(l,a){this.messageHandlers[l]=a}unregisterMessageHandler(l){delete this.messageHandlers[l]}sendAsync(l,a){return new Promise(((s,f)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=a?rr(a.signal,"abort",(()=>{x==null||x.unsubscribe(),delete this.resolveRejects[g];const I={id:g,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),Q6):null;this.resolveRejects[g]={resolve:I=>{x==null||x.unsubscribe(),s(I)},reject:I=>{x==null||x.unsubscribe(),f(I)}};const b=[],C=Object.assign(Object.assign({},l),{id:g,sourceMapId:this.mapId,origin:location.origin,data:pa(l.data,b)});this.target.postMessage(C,{transfer:b})}))}receive(l){const a=l.data,s=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[s];const f=this.abortControllers[s];return delete this.abortControllers[s],void(f&&f.abort())}if(tn(self)||a.mustQueue)return this.tasks[s]=a,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,a)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),a=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(l,a)}processTask(l,a){return o(this,void 0,void 0,(function*(){if(a.type==="<response>"){const g=this.resolveRejects[l];return delete this.resolveRejects[l],g?void(a.error?g.reject(ma(a.error)):g.resolve(ma(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ma(a.data),f=new AbortController;this.abortControllers[l]=f;try{const g=yield this.messageHandlers[a.type](a.sourceMapId,s,f);this.completeTask(l,null,g)}catch(g){this.completeTask(l,g)}}))}completeTask(l,a,s){const f=[];delete this.abortControllers[l];const g={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?pa(a):null,data:pa(s,f)};this.target.postMessage(g,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.M=Ze,d.N=function(){var l=new te(16);return te!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},d.O=function(l,a,s){var f,g,x,b,C,I,j,V,G,Z,X,ee,ne=s[0],se=s[1],fe=s[2];return a===l?(l[12]=a[0]*ne+a[4]*se+a[8]*fe+a[12],l[13]=a[1]*ne+a[5]*se+a[9]*fe+a[13],l[14]=a[2]*ne+a[6]*se+a[10]*fe+a[14],l[15]=a[3]*ne+a[7]*se+a[11]*fe+a[15]):(g=a[1],x=a[2],b=a[3],C=a[4],I=a[5],j=a[6],V=a[7],G=a[8],Z=a[9],X=a[10],ee=a[11],l[0]=f=a[0],l[1]=g,l[2]=x,l[3]=b,l[4]=C,l[5]=I,l[6]=j,l[7]=V,l[8]=G,l[9]=Z,l[10]=X,l[11]=ee,l[12]=f*ne+C*se+G*fe+a[12],l[13]=g*ne+I*se+Z*fe+a[13],l[14]=x*ne+j*se+X*fe+a[14],l[15]=b*ne+V*se+ee*fe+a[15]),l},d.P=_,d.Q=function(l,a,s){var f=s[0],g=s[1],x=s[2];return l[0]=a[0]*f,l[1]=a[1]*f,l[2]=a[2]*f,l[3]=a[3]*f,l[4]=a[4]*g,l[5]=a[5]*g,l[6]=a[6]*g,l[7]=a[7]*g,l[8]=a[8]*x,l[9]=a[9]*x,l[10]=a[10]*x,l[11]=a[11]*x,l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},d.R=lo,d.S=function(l,a,s){var f=a[0],g=a[1],x=a[2],b=a[3],C=a[4],I=a[5],j=a[6],V=a[7],G=a[8],Z=a[9],X=a[10],ee=a[11],ne=a[12],se=a[13],fe=a[14],Pe=a[15],me=s[0],ge=s[1],Ce=s[2],Re=s[3];return l[0]=me*f+ge*C+Ce*G+Re*ne,l[1]=me*g+ge*I+Ce*Z+Re*se,l[2]=me*x+ge*j+Ce*X+Re*fe,l[3]=me*b+ge*V+Ce*ee+Re*Pe,l[4]=(me=s[4])*f+(ge=s[5])*C+(Ce=s[6])*G+(Re=s[7])*ne,l[5]=me*g+ge*I+Ce*Z+Re*se,l[6]=me*x+ge*j+Ce*X+Re*fe,l[7]=me*b+ge*V+Ce*ee+Re*Pe,l[8]=(me=s[8])*f+(ge=s[9])*C+(Ce=s[10])*G+(Re=s[11])*ne,l[9]=me*g+ge*I+Ce*Z+Re*se,l[10]=me*x+ge*j+Ce*X+Re*fe,l[11]=me*b+ge*V+Ce*ee+Re*Pe,l[12]=(me=s[12])*f+(ge=s[13])*C+(Ce=s[14])*G+(Re=s[15])*ne,l[13]=me*g+ge*I+Ce*Z+Re*se,l[14]=me*x+ge*j+Ce*X+Re*fe,l[15]=me*b+ge*V+Ce*ee+Re*Pe,l},d.T=ds,d.U=function(l,a){const s={};for(let f=0;f<a.length;f++){const g=a[f];g in l&&(s[g]=l[g])}return s},d.V=qf,d.W=Ft,d.X=dM,d.Y=hM,d.Z=Me,d._=o,d.a=pe,d.a$=$e,d.a0=H,d.a1=Be,d.a2=bl,d.a3=pM,d.a4=j0,d.a5=Qe,d.a6=function(l,a,s){if(!l)return a||{};if(!a)return l||{};const f=vM(l),g=vM(a);(function(b,C){C.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),C.remove.clear());for(const I of C.remove)b.add.delete(I),b.update.delete(I);for(const[I,j]of C.update){const V=b.update.get(I);V&&(C.update.set(I,J6(V,j)),b.update.delete(I))}})(f,g);const x={};if((f.removeAll||g.removeAll)&&(x.removeAll=!0),x.remove=new Set([...f.remove,...g.remove]),x.add=new Map([...f.add,...g.add]),x.update=new Map([...f.update,...g.update]),x.remove.size&&x.add.size)for(const b of x.add.keys())x.remove.delete(b);return(function(b){const C={};return b.removeAll&&(C.removeAll=b.removeAll),b.remove&&(C.remove=Array.from(b.remove)),b.add&&(C.add=Array.from(b.add.values())),b.update&&(C.update=Array.from(b.update.values())),C})(x)},d.a7=function(l,a){const s=new Map;if(l==null||l.type==null)return s;if(l.type==="Feature"){const f=k1(l,a);return f==null?void 0:(s.set(f,l),s)}if(l.type==="FeatureCollection"){const f=new Set;for(const g of l.features){const x=k1(g,a);if(x==null||f.has(x))return;f.add(x),s.set(x,g)}return s}},d.a8=function(l,a,s){var f,g;const x=[];if(a.removeAll)l.clear();else if(a.remove)for(const b of a.remove){const C=l.get(b);C&&(x.push(C.geometry),l.delete(b))}if(a.add)for(const b of a.add){const C=k1(b,s);if(C==null)continue;const I=l.get(C);I&&x.push(I.geometry),x.push(b.geometry),l.set(C,b)}if(a.update)for(const b of a.update){const C=l.get(b.id);if(!C)continue;const I=!!b.newGeometry,j=b.removeAllProperties||((f=b.removeProperties)===null||f===void 0?void 0:f.length)>0||((g=b.addOrUpdateProperties)===null||g===void 0?void 0:g.length)>0;if(!I&&!j)continue;x.push(C.geometry);const V=Object.assign({},C);if(l.set(b.id,V),I&&(x.push(b.newGeometry),V.geometry=b.newGeometry),j){if(V.properties=b.removeAllProperties?{}:Object.assign({},V.properties||{}),b.removeProperties)for(const G of b.removeProperties)delete V.properties[G];if(b.addOrUpdateProperties)for(const{key:G,value:Z}of b.addOrUpdateProperties)V.properties[G]=Z}}return x},d.a9=Pv,d.aA=function(l,{uSize:a,uSizeT:s},{lowerSize:f,upperSize:g}){return l.kind==="source"?f/sd:l.kind==="composite"?ii.number(f/sd,g/sd,s):a},d.aB=function(l,a){var s=a[0],f=a[1],g=a[2],x=a[3],b=a[4],C=a[5],I=a[6],j=a[7],V=a[8],G=a[9],Z=a[10],X=a[11],ee=a[12],ne=a[13],se=a[14],fe=a[15],Pe=s*C-f*b,me=s*I-g*b,ge=s*j-x*b,Ce=f*I-g*C,Re=f*j-x*C,nt=g*j-x*I,kt=V*ne-G*ee,_t=V*se-Z*ee,Ot=V*fe-X*ee,Kt=G*se-Z*ne,Rt=G*fe-X*ne,Ct=Z*fe-X*se,dt=Pe*Ct-me*Rt+ge*Kt+Ce*Ot-Re*_t+nt*kt;return dt?(l[0]=(C*Ct-I*Rt+j*Kt)*(dt=1/dt),l[1]=(g*Rt-f*Ct-x*Kt)*dt,l[2]=(ne*nt-se*Re+fe*Ce)*dt,l[3]=(Z*Re-G*nt-X*Ce)*dt,l[4]=(I*Ot-b*Ct-j*_t)*dt,l[5]=(s*Ct-g*Ot+x*_t)*dt,l[6]=(se*ge-ee*nt-fe*me)*dt,l[7]=(V*nt-Z*ge+X*me)*dt,l[8]=(b*Rt-C*Ot+j*kt)*dt,l[9]=(f*Ot-s*Rt-x*kt)*dt,l[10]=(ee*Re-ne*ge+fe*Pe)*dt,l[11]=(G*ge-V*Re-X*Pe)*dt,l[12]=(C*_t-b*Kt-I*kt)*dt,l[13]=(s*Kt-f*_t+g*kt)*dt,l[14]=(ne*me-ee*Ce-se*Pe)*dt,l[15]=(V*Ce-G*me+Z*Pe)*dt,l):null},d.aC=wt,d.aD=function(l){var a=l[0],s=l[1];return Math.sqrt(a*a+s*s)},d.aE=function(l){return l[0]=0,l[1]=0,l},d.aF=function(l,a,s){return l[0]=a[0]*s,l[1]=a[1]*s,l},d.aG=S1,d.aH=ut,d.aI=function(l,a,s,f){const g=a.y-l.y,x=a.x-l.x,b=f.y-s.y,C=f.x-s.x,I=b*x-C*g;if(I===0)return null;const j=(C*(l.y-s.y)-b*(l.x-s.x))/I;return new _(l.x+j*x,l.y+j*g)},d.aJ=JM,d.aK=Yc,d.aL=function(l){let a=1/0,s=1/0,f=-1/0,g=-1/0;for(const x of l)a=Math.min(a,x.x),s=Math.min(s,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return[a,s,f,g]},d.aM=aa,d.aN=yt,d.aO=function(l,a,s,f,g=!1){if(!s[0]&&!s[1])return[0,0];const x=g?f==="map"?-l.bearingInRadians:0:f==="viewport"?l.bearingInRadians:0;if(x){const b=Math.sin(x),C=Math.cos(x);s=[s[0]*C-s[1]*b,s[0]*b+s[1]*C]}return[g?s[0]:yt(a,s[0],l.zoom),g?s[1]:yt(a,s[1],l.zoom)]},d.aQ=w1,d.aR=H1,d.aS=Qt,d.aT=Z1,d.aU=gi,d.aV=nh,d.aW=ye,d.aX=Yt,d.aY=st,d.aZ=zt,d.a_=mM,d.aa=mm,d.ab=25,d.ac=M1,d.ad=l=>{const a=window.document.createElement("video");return a.muted=!0,new Promise((s=>{a.onloadstart=()=>{s(a)};for(const f of l){const g=window.document.createElement("source");Pt(f)||(a.crossOrigin="Anonymous"),g.src=f,a.appendChild(g)}}))},d.ae=We,d.af=function(){return ct++},d.ag=v,d.ah=zg,d.ai=Tv,d.aj=$u,d.ak=ml,d.al=xM,d.am=function(l){const a={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,f,g,x)=>{const b=g||x;return a[f]=!b||b.toLowerCase(),""})),a["max-age"]){const s=parseInt(a["max-age"],10);isNaN(s)?delete a["max-age"]:a["max-age"]=s}return a},d.an=tr,d.ao=85.051129,d.ap=Wt,d.aq=function(l){return Math.pow(2,l)},d.ar=ae,d.as=fM,d.at=function(l){return Math.log(l)/Math.LN2},d.au=function(l){var a=l[0],s=l[1];return a*a+s*s},d.av=function(l){if(!l.length)return new Set;const a=Math.max(...l.map((I=>I.canonical.z)));let s=1/0,f=-1/0,g=1/0,x=-1/0;const b=[];for(const I of l){const{x:j,y:V,z:G}=I.canonical,Z=Math.pow(2,a-G),X=j*Z,ee=V*Z;b.push({id:I,x:X,y:ee}),X<s&&(s=X),X>f&&(f=X),ee<g&&(g=ee),ee>x&&(x=ee)}const C=new Set;for(const I of b)I.x!==s&&I.x!==f&&I.y!==g&&I.y!==x||C.add(I.id);return C},d.aw=function(l,a){const s=Math.abs(2*l.wrap)-+(l.wrap<0),f=Math.abs(2*a.wrap)-+(a.wrap<0);return l.overscaledZ-a.overscaledZ||f-s||a.canonical.y-l.canonical.y||a.canonical.x-l.canonical.x},d.ax=class{constructor(l,a){this.max=l,this.onRemove=a,this.reset()}reset(){for(const l in this.data)for(const a of this.data[l])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(l,a,s){const f=l.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const g={value:a,timeout:void 0};if(s!==void 0&&(g.timeout=setTimeout((()=>{this.remove(l,g)}),s)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const a=this.data[l].shift();return a.timeout&&clearTimeout(a.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),a.value}getByKey(l){const a=this.data[l];return a?a[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,a){if(!this.has(l))return this;const s=l.wrapped().key,f=a===void 0?0:this.data[s].indexOf(a),g=this.data[s][f];return this.data[s].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(g.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(l){const a=[];for(const s in this.data)for(const f of this.data[s])l(f.value)||a.push(f);for(const s of a)this.remove(s.value.tileID,s)}},d.ay=function(l,a){let s=0,f=0;if(l.kind==="constant")f=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:b}=l,C=g?tr(ea.interpolationFactor(g,a,x,b),0,1):0;l.kind==="camera"?f=ii.number(l.minSize,l.maxSize,C):s=C}return{uSizeT:s,uSize:f}},d.b=Xi,d.b$=fl,d.b0=xe,d.b1=function(l){var a=new te(3);return a[0]=l[0],a[1]=l[1],a[2]=l[2],a},d.b2=function(l,a,s){return l[0]=a[0]-s[0],l[1]=a[1]-s[1],l[2]=a[2]-s[2],l},d.b3=function(l,a){var s=a[0],f=a[1],g=a[2],x=s*s+f*f+g*g;return x>0&&(x=1/Math.sqrt(x)),l[0]=a[0]*x,l[1]=a[1]*x,l[2]=a[2]*x,l},d.b4=Ee,d.b5=function(l,a){return l[0]*a[0]+l[1]*a[1]+l[2]*a[2]},d.b6=function(l,a,s){return l[0]=a[0]*s[0],l[1]=a[1]*s[1],l[2]=a[2]*s[2],l[3]=a[3]*s[3],l},d.b7=re,d.b8=function(l,a,s){const f=a[0]*s[0]+a[1]*s[1]+a[2]*s[2];return f===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/f},d.b9=Xe,d.bA=function(l,a,s,f){return l[0]=a[0]+s[0]*f,l[1]=a[1]+s[1]*f,l[2]=a[2]+s[2]*f,l},d.bB=gt,d.bC=function(l,a,s){var f=s[0],g=s[1],x=s[2],b=s[3],C=a[0],I=a[1],j=a[2],V=g*j-x*I,G=x*C-f*j,Z=f*I-g*C;return l[0]=C+b*(V+=V)+g*(Z+=Z)-x*(G+=G),l[1]=I+b*G+x*V-f*Z,l[2]=j+b*Z+f*G-g*V,l},d.bD=function(l,a,s){const f=(function(I){var j=I[3],V=I[4],G=I[5],Z=I[6],X=I[7],ee=I[8];return I[0]*(ee*V-G*X)+I[1]*(-ee*j+G*Z)+I[2]*(X*j-V*Z)})([l[0],l[1],l[2],a[0],a[1],a[2],s[0],s[1],s[2]]);if(f===0)return null;const g=Ee([],[a[0],a[1],a[2]],[s[0],s[1],s[2]]),x=Ee([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),b=Ee([],[l[0],l[1],l[2]],[a[0],a[1],a[2]]),C=$e([],g,-l[3]);return xe(C,C,$e([],x,-a[3])),xe(C,C,$e([],b,-s[3])),$e(C,C,1/f),C},d.bE=T1,d.bF=function(){return new Float64Array(4)},d.bG=function(l,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[0]*Math.cos(f)-g[1]*Math.sin(f),x[1]=g[0]*Math.sin(f)+g[1]*Math.cos(f),x[2]=g[2],l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},d.bH=function(l,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[0],x[1]=g[1]*Math.cos(f)-g[2]*Math.sin(f),x[2]=g[1]*Math.sin(f)+g[2]*Math.cos(f),l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},d.bI=function(l,a,s,f){var g=[],x=[];return g[0]=a[0]-s[0],g[1]=a[1]-s[1],g[2]=a[2]-s[2],x[0]=g[2]*Math.sin(f)+g[0]*Math.cos(f),x[1]=g[1],x[2]=g[2]*Math.cos(f)-g[0]*Math.sin(f),l[0]=x[0]+s[0],l[1]=x[1]+s[1],l[2]=x[2]+s[2],l},d.bJ=function(l,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[0],b=a[1],C=a[2],I=a[3],j=a[8],V=a[9],G=a[10],Z=a[11];return a!==l&&(l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[0]=x*g-j*f,l[1]=b*g-V*f,l[2]=C*g-G*f,l[3]=I*g-Z*f,l[8]=x*f+j*g,l[9]=b*f+V*g,l[10]=C*f+G*g,l[11]=I*f+Z*g,l},d.bK=function(l,a){const s=Oe(l,360),f=Oe(a,360),g=f-s,x=f>s?g-360:g+360;return Math.abs(g)<Math.abs(x)?g:x},d.bL=function(l){return l[0]=0,l[1]=0,l[2]=0,l},d.bM=function(l,a,s,f){const g=Math.sqrt(l*l+a*a),x=Math.sqrt(s*s+f*f);l/=g,a/=g,s/=x,f/=x;const b=Math.acos(l*s+a*f);return-a*s+l*f>0?b:-b},d.bN=function(l,a){const s=Oe(l,2*Math.PI),f=Oe(a,2*Math.PI);return Math.min(Math.abs(s-f),Math.abs(s-f+2*Math.PI),Math.abs(s-f-2*Math.PI))},d.bO=function(){const l={},a=tt.$version;for(const s in tt.$root){const f=tt.$root[s];if(f.required){let g=null;g=s==="version"?a:f.type==="array"?[]:{},g!=null&&(l[s]=g)}}return l},d.bP=it,d.bQ=Kn,d.bR=function l(a,s){if(Array.isArray(a)){if(!Array.isArray(s)||a.length!==s.length)return!1;for(let f=0;f<a.length;f++)if(!l(a[f],s[f]))return!1;return!0}if(typeof a=="object"&&a!==null&&s!==null){if(typeof s!="object"||Object.keys(a).length!==Object.keys(s).length)return!1;for(const f in a)if(!l(a[f],s[f]))return!1;return!0}return a===s},d.bS=function(l){l=l.slice();const a=Object.create(null);for(let s=0;s<l.length;s++)a[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=ri(l[s],a[l[s].ref]));return l},d.bT=function(l,a){if(l.type==="custom")return new X6(l,a);switch(l.type){case"background":return new K6(l,a);case"circle":return new Rf(l,a);case"color-relief":return new y1(l,a);case"fill":return new v0(l,a);case"fill-extrusion":return new _1(l,a);case"heatmap":return new uv(l,a);case"hillshade":return new Qc(l,a);case"line":return new bv(l,a);case"raster":return new Jl(l,a);case"symbol":return new R0(l,a)}},d.bU=l=>l.type==="raster",d.bV=St,d.bW=function(l,a){if(!l)return[{command:"setStyle",args:[a]}];let s=[];try{if(!Ir(l.version,a.version))return[{command:"setStyle",args:[a]}];Ir(l.center,a.center)||s.push({command:"setCenter",args:[a.center]}),Ir(l.state,a.state)||s.push({command:"setGlobalState",args:[a.state]}),Ir(l.centerAltitude,a.centerAltitude)||s.push({command:"setCenterAltitude",args:[a.centerAltitude]}),Ir(l.zoom,a.zoom)||s.push({command:"setZoom",args:[a.zoom]}),Ir(l.bearing,a.bearing)||s.push({command:"setBearing",args:[a.bearing]}),Ir(l.pitch,a.pitch)||s.push({command:"setPitch",args:[a.pitch]}),Ir(l.roll,a.roll)||s.push({command:"setRoll",args:[a.roll]}),Ir(l.sprite,a.sprite)||s.push({command:"setSprite",args:[a.sprite]}),Ir(l.glyphs,a.glyphs)||s.push({command:"setGlyphs",args:[a.glyphs]}),Ir(l.transition,a.transition)||s.push({command:"setTransition",args:[a.transition]}),Ir(l.light,a.light)||s.push({command:"setLight",args:[a.light]}),Ir(l.terrain,a.terrain)||s.push({command:"setTerrain",args:[a.terrain]}),Ir(l.sky,a.sky)||s.push({command:"setSky",args:[a.sky]}),Ir(l.projection,a.projection)||s.push({command:"setProjection",args:[a.projection]});const f={},g=[];(function(b,C,I,j){let V;for(V in C=C||{},b=b||{})Object.prototype.hasOwnProperty.call(b,V)&&(Object.prototype.hasOwnProperty.call(C,V)||yn(V,I,j));for(V in C)Object.prototype.hasOwnProperty.call(C,V)&&(Object.prototype.hasOwnProperty.call(b,V)?Ir(b[V],C[V])||(b[V].type==="geojson"&&C[V].type==="geojson"&&ur(b,C,V)?Zr(I,{command:"setGeoJSONSourceData",args:[V,C[V].data]}):ln(V,C,I,j)):Vn(V,C,I))})(l.sources,a.sources,g,f);const x=[];l.layers&&l.layers.forEach((b=>{"source"in b&&f[b.source]?s.push({command:"removeLayer",args:[b.id]}):x.push(b)})),s=s.concat(g),(function(b,C,I){C=C||[];const j=(b=b||[]).map(Ye),V=C.map(Ye),G=b.reduce(mt,{}),Z=C.reduce(mt,{}),X=j.slice(),ee=Object.create(null);let ne,se,fe,Pe,me;for(let ge=0,Ce=0;ge<j.length;ge++)ne=j[ge],Object.prototype.hasOwnProperty.call(Z,ne)?Ce++:(Zr(I,{command:"removeLayer",args:[ne]}),X.splice(X.indexOf(ne,Ce),1));for(let ge=0,Ce=0;ge<V.length;ge++)ne=V[V.length-1-ge],X[X.length-1-ge]!==ne&&(Object.prototype.hasOwnProperty.call(G,ne)?(Zr(I,{command:"removeLayer",args:[ne]}),X.splice(X.lastIndexOf(ne,X.length-Ce),1)):Ce++,Pe=X[X.length-ge],Zr(I,{command:"addLayer",args:[Z[ne],Pe]}),X.splice(X.length-ge,0,ne),ee[ne]=!0);for(let ge=0;ge<V.length;ge++)if(ne=V[ge],se=G[ne],fe=Z[ne],!ee[ne]&&!Ir(se,fe))if(Ir(se.source,fe.source)&&Ir(se["source-layer"],fe["source-layer"])&&Ir(se.type,fe.type)){for(me in Ie(se.layout,fe.layout,I,ne,null,"setLayoutProperty"),Ie(se.paint,fe.paint,I,ne,null,"setPaintProperty"),Ir(se.filter,fe.filter)||Zr(I,{command:"setFilter",args:[ne,fe.filter]}),Ir(se.minzoom,fe.minzoom)&&Ir(se.maxzoom,fe.maxzoom)||Zr(I,{command:"setLayerZoomRange",args:[ne,fe.minzoom,fe.maxzoom]}),se)Object.prototype.hasOwnProperty.call(se,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Ie(se[me],fe[me],I,ne,me.slice(6),"setPaintProperty"):Ir(se[me],fe[me])||Zr(I,{command:"setLayerProperty",args:[ne,me,fe[me]]}));for(me in fe)Object.prototype.hasOwnProperty.call(fe,me)&&!Object.prototype.hasOwnProperty.call(se,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Ie(se[me],fe[me],I,ne,me.slice(6),"setPaintProperty"):Ir(se[me],fe[me])||Zr(I,{command:"setLayerProperty",args:[ne,me,fe[me]]}))}else Zr(I,{command:"removeLayer",args:[ne]}),Pe=X[X.lastIndexOf(ne)+1],Zr(I,{command:"addLayer",args:[fe,Pe]})})(x,a.layers,s)}catch(f){console.warn("Unable to compute style diff:",f),s=[{command:"setStyle",args:[a]}]}return s},d.bX=function(l){const a=[],s=l.id;return s===void 0&&a.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&a.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&a.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),a},d.bY=Lt,d.bZ=ir,d.b_=class extends Fa{constructor(l,a){super(l,a),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},d.ba=function(l,a,s){return l[0]=a[0]*s,l[1]=a[1]*s,l[2]=a[2]*s,l[3]=a[3]*s,l},d.bb=function(l,a){return l[0]*a[0]+l[1]*a[1]+l[2]*a[2]+l[3]},d.bc=yM,d.bd=Ng,d.be=function(l,a,s,f,g){var x=1/Math.tan(a/2);if(l[0]=x/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,g!=null&&g!==1/0){var b=1/(f-g);l[10]=(g+f)*b,l[14]=2*g*f*b}else l[10]=-1,l[14]=-2*f;return l},d.bf=function(l){var a=new te(16);return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15],a},d.bg=function(l,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[0],b=a[1],C=a[2],I=a[3],j=a[4],V=a[5],G=a[6],Z=a[7];return a!==l&&(l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[0]=x*g+j*f,l[1]=b*g+V*f,l[2]=C*g+G*f,l[3]=I*g+Z*f,l[4]=j*g-x*f,l[5]=V*g-b*f,l[6]=G*g-C*f,l[7]=Z*g-I*f,l},d.bh=function(l,a,s){var f=Math.sin(s),g=Math.cos(s),x=a[4],b=a[5],C=a[6],I=a[7],j=a[8],V=a[9],G=a[10],Z=a[11];return a!==l&&(l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[4]=x*g+j*f,l[5]=b*g+V*f,l[6]=C*g+G*f,l[7]=I*g+Z*f,l[8]=j*g-x*f,l[9]=V*g-b*f,l[10]=G*g-C*f,l[11]=Z*g-I*f,l},d.bi=function(){const l=new Float32Array(16);return ae(l),l},d.bj=function(){const l=new Float64Array(16);return ae(l),l},d.bk=function(){return new Float64Array(16)},d.bl=function(l,a,s){const f=new Float64Array(4);return gt(f,l,a-90,s),f},d.bm=function(l,a,s,f){var g,x,b,C,I,j=a[0],V=a[1],G=a[2],Z=a[3],X=s[0],ee=s[1],ne=s[2],se=s[3];return(x=j*X+V*ee+G*ne+Z*se)<0&&(x=-x,X=-X,ee=-ee,ne=-ne,se=-se),1-x>Q?(g=Math.acos(x),b=Math.sin(g),C=Math.sin((1-f)*g)/b,I=Math.sin(f*g)/b):(C=1-f,I=f),l[0]=C*j+I*X,l[1]=C*V+I*ee,l[2]=C*G+I*ne,l[3]=C*Z+I*se,l},d.bn=function(l){const a=new Float64Array(9);(function(x,b){var C=b[0],I=b[1],j=b[2],V=b[3],G=C+C,Z=I+I,X=j+j,ee=C*G,ne=I*G,se=I*Z,fe=j*G,Pe=j*Z,me=j*X,ge=V*G,Ce=V*Z,Re=V*X;x[0]=1-se-me,x[3]=ne-Re,x[6]=fe+Ce,x[1]=ne+Re,x[4]=1-ee-me,x[7]=Pe-ge,x[2]=fe-Ce,x[5]=Pe+ge,x[8]=1-ee-se})(a,l);const s=zt(-Math.asin(tr(a[2],-1,1)));let f,g;return Math.hypot(a[5],a[8])<.001?(f=0,g=-zt(Math.atan2(a[3],a[4]))):(f=zt(a[5]===0&&a[8]===0?0:Math.atan2(a[5],a[8])),g=zt(a[1]===0&&a[0]===0?0:Math.atan2(a[1],a[0]))),{roll:f,pitch:s+90,bearing:g}},d.bo=function(l,a){return l.roll==a.roll&&l.pitch==a.pitch&&l.bearing==a.bearing},d.bp=Br,d.bq=dl,d.br=ih,d.bs=ah,d.bt=oc,d.bu=et,d.bv=Mt,d.bw=Ji,d.bx=function(l,a,s,f,g){return et(f,g,tr((l-a)/(s-a),0,1))},d.by=Oe,d.bz=function(){return new Float64Array(3)},d.c=Ae,d.c$=function(l,a,s,f,g){return o(this,void 0,void 0,(function*(){if(H())try{return yield Be(l,a,s,f,g)}catch{}return(function(x,b,C,I,j){const V=x.width,G=x.height;rt&&bt||(rt=new OffscreenCanvas(V,G),bt=rt.getContext("2d",{willReadFrequently:!0})),rt.width=V,rt.height=G,bt.drawImage(x,0,0,V,G);const Z=bt.getImageData(b,C,I,j);return bt.clearRect(0,0,V,G),Z.data})(l,a,s,f,g)}))},d.c0=class extends Fa{constructor(l,a){super(l,a),this.current=oo}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let a=1;a<16;a++)if(l[a]!==this.current[a]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},d.c1=Fs,d.c2=class extends Fa{constructor(l,a){super(l,a),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},d.c3=class extends Fa{constructor(l,a){super(l,a),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},d.c4=ie,d.c5=function(l,a){var s=Math.sin(a),f=Math.cos(a);return l[0]=f,l[1]=s,l[2]=0,l[3]=-s,l[4]=f,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},d.c6=function(l,a,s){var f=a[0],g=a[1],x=a[2];return l[0]=f*s[0]+g*s[3]+x*s[6],l[1]=f*s[1]+g*s[4]+x*s[7],l[2]=f*s[2]+g*s[5]+x*s[8],l},d.c7=function(l,a,s,f,g,x,b){var C=1/(a-s),I=1/(f-g),j=1/(x-b);return l[0]=-2*C,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*j,l[11]=0,l[12]=(a+s)*C,l[13]=(g+f)*I,l[14]=(b+x)*j,l[15]=1,l},d.c8=class extends Fa{constructor(l,a){super(l,a),this.current=new Array}set(l){if(l!=this.current){this.current=l;const a=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)a[4*s]=l[s].r,a[4*s+1]=l[s].g,a[4*s+2]=l[s].b,a[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,a)}}},d.c9=class extends Fa{constructor(l,a){super(l,a),this.current=new Array}set(l){if(l!=this.current){this.current=l;const a=new Float32Array(l);this.gl.uniform1fv(this.location,a)}}},d.cA=function(l,a){return ze[a]&&"touches"in l},d.cB=function(l){return ze[l]||ue[l]},d.cC=function(l,a,s){var f=a[0],g=a[1];return l[0]=s[0]*f+s[4]*g+s[12],l[1]=s[1]*f+s[5]*g+s[13],l},d.cD=function(l,a){const{x:s,y:f}=Pv.fromLngLat(a);return!(l<0||l>25||f<0||f>=1||s<0||s>=1)},d.cE=function(l,a){return l[0]=a[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=a[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},d.cF=class extends eu{},d.cG=jV,d.cI=Ve,d.cJ=function(l,a){Ae.REGISTERED_PROTOCOLS[l]=a},d.cK=function(l){delete Ae.REGISTERED_PROTOCOLS[l]},d.cL=function(l,a){const s={};for(let g=0;g<l.length;g++){const x=a&&a[l[g].id]||ol(l[g]);a&&(a[l[g].id]=x);let b=s[x];b||(b=s[x]=[]),b.push(l[g])}const f=[];for(const g in s)f.push(s[g]);return f},d.cM=Jt,d.cN=_M,d.cO=YM,d.cP=lt,d.cQ=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Qe/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const a=l.bucket.layers[0],s=a.layout,f=a._unevaluatedLayout._values,g={layoutIconSize:f["icon-size"].possiblyEvaluate(new Mn(l.bucket.zoom+1),l.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Mn(l.bucket.zoom+1),l.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Mn(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=l.bucket.textSizeData;g.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Mn(j),l.canonical),f["text-size"].possiblyEvaluate(new Mn(V),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=l.bucket.iconSizeData;g.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Mn(j),l.canonical),f["icon-size"].possiblyEvaluate(new Mn(V),l.canonical)]}const x=s.get("text-line-height")*aa,b=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",C=s.get("text-keep-upright"),I=s.get("text-size");for(const j of l.bucket.features){const V=s.get("text-font").evaluate(j,{},l.canonical).join(","),G=I.evaluate(j,{},l.canonical),Z=g.layoutTextSize.evaluate(j,{},l.canonical),X=g.layoutIconSize.evaluate(j,{},l.canonical),ee={horizontal:{},vertical:void 0},ne=j.text;let se,fe=[0,0];if(ne){const ge=ne.toString(),Ce=s.get("text-letter-spacing").evaluate(j,{},l.canonical)*aa,Re=Yp(ge)?Ce:0,nt=s.get("text-anchor").evaluate(j,{},l.canonical),kt=ck(a,j,l.canonical);if(!kt){const Rt=s.get("text-radial-offset").evaluate(j,{},l.canonical);fe=Rt?uk(nt,[Rt*aa,W1]):s.get("text-offset").evaluate(j,{},l.canonical).map((Ct=>Ct*aa))}let _t=b?"center":s.get("text-justify").evaluate(j,{},l.canonical);const Ot=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(j,{},l.canonical)*aa:1/0,Kt=()=>{l.bucket.allowVerticalPlacement&&Xl(ge)&&(ee.vertical=ft(ne,l.glyphMap,l.glyphPositions,l.imagePositions,V,Ot,x,nt,"left",Re,fe,d.az.vertical,!0,Z,G))};if(!b&&kt){const Rt=new Set;if(_t==="auto")for(let dt=0;dt<kt.values.length;dt+=2)Rt.add(H1(kt.values[dt]));else Rt.add(_t);let Ct=!1;for(const dt of Rt)if(!ee.horizontal[dt])if(Ct)ee.horizontal[dt]=ee.horizontal[0];else{const sr=ft(ne,l.glyphMap,l.glyphPositions,l.imagePositions,V,Ot,x,"center",dt,Re,fe,d.az.horizontal,!1,Z,G);sr&&(ee.horizontal[dt]=sr,Ct=sr.positionedLines.length===1)}Kt()}else{_t==="auto"&&(_t=H1(nt));const Rt=ft(ne,l.glyphMap,l.glyphPositions,l.imagePositions,V,Ot,x,nt,_t,Re,fe,d.az.horizontal,!1,Z,G);Rt&&(ee.horizontal[_t]=Rt),Kt(),Xl(ge)&&b&&C&&(ee.vertical=ft(ne,l.glyphMap,l.glyphPositions,l.imagePositions,V,Ot,x,nt,_t,Re,fe,d.az.vertical,!1,Z,G))}}let Pe=!1;if(j.icon&&j.icon.name){const ge=l.imageMap[j.icon.name];ge&&(se=lh(l.imagePositions[j.icon.name],s.get("icon-offset").evaluate(j,{},l.canonical),s.get("icon-anchor").evaluate(j,{},l.canonical)),Pe=!!ge.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Pe:l.bucket.sdfIcons!==Pe&&Tr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ge.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const me=dk(ee.horizontal)||ee.vertical;l.bucket.iconsInText=!!me&&me.iconsInText,(me||se)&&DV(l.bucket,j,ee,se,l.imageMap,g,Z,X,fe,Pe,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},d.cR=lm,d.cS=yv,d.cT=Bf,d.cU=function(l){const a=new p;return(function(s,f){for(const g in s.layers)f.writeMessage(3,xV,s.layers[g])})(l,a),a.finish()},d.cV=function(l,a,s,f,g,x){let b=ek(l,a,s,g,0);return b=ek(b,a,f,x,1),b},d.cW=class{constructor(l){this.maxEntries=l,this.map=new Map}get(l){const a=this.map.get(l);return a!==void 0&&(this.map.delete(l),this.map.set(l,a)),a}set(l,a){if(this.map.has(l))this.map.delete(l);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(l,a)}clear(){this.map.clear()}},d.cX=x0,d.cY=p,d.cZ=KM,d.c_=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},d.ca=class extends cl{},d.cb=k0,d.cc=class extends Wn{},d.cd=am,d.ce=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},d.cf=lv,d.cg=function(l,a,s){var f=a[0],g=a[1],x=a[2],b=s[3]*f+s[7]*g+s[11]*x+s[15];return l[0]=(s[0]*f+s[4]*g+s[8]*x+s[12])/(b=b||1),l[1]=(s[1]*f+s[5]*g+s[9]*x+s[13])/b,l[2]=(s[2]*f+s[6]*g+s[10]*x+s[14])/b,l},d.ch=class extends Yu{},d.ci=class extends i{},d.cj=function(l,a){return l[0]===a[0]&&l[1]===a[1]&&l[2]===a[2]&&l[3]===a[3]&&l[4]===a[4]&&l[5]===a[5]&&l[6]===a[6]&&l[7]===a[7]&&l[8]===a[8]&&l[9]===a[9]&&l[10]===a[10]&&l[11]===a[11]&&l[12]===a[12]&&l[13]===a[13]&&l[14]===a[14]&&l[15]===a[15]},d.ck=function(l,a){var s=l[0],f=l[1],g=l[2],x=l[3],b=l[4],C=l[5],I=l[6],j=l[7],V=l[8],G=l[9],Z=l[10],X=l[11],ee=l[12],ne=l[13],se=l[14],fe=l[15],Pe=a[0],me=a[1],ge=a[2],Ce=a[3],Re=a[4],nt=a[5],kt=a[6],_t=a[7],Ot=a[8],Kt=a[9],Rt=a[10],Ct=a[11],dt=a[12],sr=a[13],nr=a[14],lr=a[15];return Math.abs(s-Pe)<=Q*Math.max(1,Math.abs(s),Math.abs(Pe))&&Math.abs(f-me)<=Q*Math.max(1,Math.abs(f),Math.abs(me))&&Math.abs(g-ge)<=Q*Math.max(1,Math.abs(g),Math.abs(ge))&&Math.abs(x-Ce)<=Q*Math.max(1,Math.abs(x),Math.abs(Ce))&&Math.abs(b-Re)<=Q*Math.max(1,Math.abs(b),Math.abs(Re))&&Math.abs(C-nt)<=Q*Math.max(1,Math.abs(C),Math.abs(nt))&&Math.abs(I-kt)<=Q*Math.max(1,Math.abs(I),Math.abs(kt))&&Math.abs(j-_t)<=Q*Math.max(1,Math.abs(j),Math.abs(_t))&&Math.abs(V-Ot)<=Q*Math.max(1,Math.abs(V),Math.abs(Ot))&&Math.abs(G-Kt)<=Q*Math.max(1,Math.abs(G),Math.abs(Kt))&&Math.abs(Z-Rt)<=Q*Math.max(1,Math.abs(Z),Math.abs(Rt))&&Math.abs(X-Ct)<=Q*Math.max(1,Math.abs(X),Math.abs(Ct))&&Math.abs(ee-dt)<=Q*Math.max(1,Math.abs(ee),Math.abs(dt))&&Math.abs(ne-sr)<=Q*Math.max(1,Math.abs(ne),Math.abs(sr))&&Math.abs(se-nr)<=Q*Math.max(1,Math.abs(se),Math.abs(nr))&&Math.abs(fe-lr)<=Q*Math.max(1,Math.abs(fe),Math.abs(lr))},d.cl=function(l,a){return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},d.cm=l=>l.type==="symbol",d.cn=l=>l.type==="circle",d.co=l=>l.type==="heatmap",d.cp=l=>l.type==="line",d.cq=l=>l.type==="fill",d.cr=l=>l.type==="fill-extrusion",d.cs=l=>l.type==="hillshade",d.ct=l=>l.type==="color-relief",d.cu=l=>l.type==="background",d.cv=l=>l.type==="custom",d.cw=Dt,d.cx=function(l,a,s){const f=je(a.x-s.x,a.y-s.y),g=je(l.x-s.x,l.y-s.y),x=Math.atan2(f[0]*g[1]-f[1]*g[0],(function(b,C){return b[0]*C[0]+b[1]*C[1]})(f,g));return zt(x)},d.cy=Ke,d.cz=function(l,a){return ue[a]&&(l instanceof MouseEvent||l instanceof WheelEvent)},d.d=Pt,d.d0=hv,d.d1=P,d.d2=class{constructor(l,a){this.layers={[Tv]:this},this.name=Tv,this.version=a?a.version:1,this.extent=a?a.extent:4096,this.length=l.length,this.features=l}feature(l){return new _V(this.features[l],this.extent)}},d.d3=Vu,d.d4=ll,d.e=$t,d.f=l=>o(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(a)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),d.g=Je,d.h=l=>new Promise(((a,s)=>{const f=new Image;f.onload=()=>{a(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=Ii}))},f.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(l)],{type:"image/png"});f.src=l.byteLength?URL.createObjectURL(g):Ii})),d.i=tn,d.j=(l,a)=>At($t(l,{type:"json"}),a),d.k=Kr,d.l=Mr,d.m=At,d.n=(l,a)=>At($t(l,{type:"arrayBuffer"}),a),d.o=function(l){return new p(l).readFields(Ut,[])},d.p=Pr,d.q=function(l){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))},d.r=jf,d.s=rr,d.t=xi,d.u=tt,d.v=Os,d.w=Tr,d.x=Ql,d.y=Zl,d.z=Zc})),u("worker",["./shared"],(function(d){class o{constructor(ue,le){this.keyCache={},ue&&this.replace(ue,le)}replace(ue,le){this._layerConfigs={},this._layers={},this.update(ue,[],le)}update(ue,le,pe){for(const Ae of ue){this._layerConfigs[Ae.id]=Ae;const Je=this._layers[Ae.id]=d.bT(Ae,pe);Je._featureFilter=d.aj(Je.filter,pe),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of le)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const Me=d.cL(Object.values(this._layerConfigs),this.keyCache);for(const Ae of Me){const Je=Ae.map((Xt=>this._layers[Xt.id])),Ze=Je[0];if(Ze.isHidden())continue;const Ve=Ze.source||"";let it=this.familiesBySource[Ve];it||(it=this.familiesBySource[Ve]={});const At=Ze.sourceLayer||d.ai;let Pt=it[At];Pt||(Pt=it[At]=[]),Pt.push(Je)}}}class _{constructor(ue){const le={},pe=[];for(const Ze in ue){const Ve=ue[Ze],it=le[Ze]={};for(const At in Ve){const Pt=Ve[+At];if(!Pt||Pt.bitmap.width===0||Pt.bitmap.height===0)continue;const Xt={x:0,y:0,w:Pt.bitmap.width+2,h:Pt.bitmap.height+2};pe.push(Xt),it[At]={rect:Xt,metrics:Pt.metrics}}}const{w:Me,h:Ae}=d.p(pe),Je=new d.r({width:Me||1,height:Ae||1});for(const Ze in ue){const Ve=ue[Ze];for(const it in Ve){const At=Ve[+it];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const Pt=le[Ze][it].rect;d.r.copy(At.bitmap,Je,{x:0,y:0},{x:Pt.x+1,y:Pt.y+1},At.bitmap)}}this.image=Je,this.positions=le}}d.cM("GlyphAtlas",_);class P{constructor(ue){this.tileID=new d.a2(ue.tileID.overscaledZ,ue.tileID.wrap,ue.tileID.canonical.z,ue.tileID.canonical.x,ue.tileID.canonical.y),this.uid=ue.uid,this.zoom=ue.zoom,this.pixelRatio=ue.pixelRatio,this.tileSize=ue.tileSize,this.source=ue.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ue.showCollisionBoxes,this.collectResourceTiming=!!ue.collectResourceTiming,this.returnDependencies=!!ue.returnDependencies,this.promoteId=ue.promoteId,this.inFlightDependencies=[]}parse(ue,le,pe,Me,Ae){return d._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ue,this.collisionBoxArray=new d.ag;const Je=new d.cN(Object.keys(ue.layers).sort()),Ze=new d.cO(this.tileID,this.promoteId);Ze.bucketLayerIDs=[];const Ve={},it={featureIndex:Ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:pe,subdivisionGranularity:Ae},At=le.familiesBySource[this.source];for(const ur in At){const Ie=ue.layers[ur];if(!Ie)continue;Ie.version===1&&d.w(`Vector tile source "${this.source}" layer "${ur}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ye=Je.encode(ur),mt=[];for(let We=0;We<Ie.length;We++){const Gt=Ie.feature(We),cr=Ze.getId(Gt,ur);mt.push({feature:Gt,id:cr,index:We,sourceLayerIndex:Ye})}for(const We of At[ur]){const Gt=We[0];Gt.source!==this.source&&d.w(`layer.source = ${Gt.source} does not equal this.source = ${this.source}`),Gt.isHidden(this.zoom,!0)||(S(We,this.zoom,pe),(Ve[Gt.id]=Gt.createBucket({index:Ze.bucketLayerIDs.length,layers:We,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ye,sourceID:this.source})).populate(mt,it,this.tileID.canonical),Ze.bucketLayerIDs.push(We.map((cr=>cr.id))))}}const Pt=d.bY(it.glyphDependencies,(ur=>Object.keys(ur).map(Number)));this.inFlightDependencies.forEach((ur=>ur==null?void 0:ur.abort())),this.inFlightDependencies=[];let Xt=Promise.resolve({});if(Object.keys(Pt).length){const ur=new AbortController;this.inFlightDependencies.push(ur),Xt=Me.sendAsync({type:"GG",data:{stacks:Pt,source:this.source,tileID:this.tileID,type:"glyphs"}},ur)}const or=Object.keys(it.iconDependencies);let Mr=Promise.resolve({});if(or.length){const ur=new AbortController;this.inFlightDependencies.push(ur),Mr=Me.sendAsync({type:"GI",data:{icons:or,source:this.source,tileID:this.tileID,type:"icons"}},ur)}const Kr=Object.keys(it.patternDependencies);let Ur=Promise.resolve({});if(Kr.length){const ur=new AbortController;this.inFlightDependencies.push(ur),Ur=Me.sendAsync({type:"GI",data:{icons:Kr,source:this.source,tileID:this.tileID,type:"patterns"}},ur)}const tt=it.dashDependencies;let sn=Promise.resolve({});if(Object.keys(tt).length){const ur=new AbortController;this.inFlightDependencies.push(ur),sn=Me.sendAsync({type:"GDA",data:{dashes:tt}},ur)}const[ri,Ir,Zr,Vn]=yield Promise.all([Xt,Mr,Ur,sn]),yn=new _(ri),ln=new d.cP(Ir,Zr);for(const ur in Ve){const Ie=Ve[ur];Ie instanceof d.ah?(S(Ie.layers,this.zoom,pe),d.cQ({bucket:Ie,glyphMap:ri,glyphPositions:yn.positions,imageMap:Ir,imagePositions:ln.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:it.subdivisionGranularity})):Ie.hasDependencies&&(Ie instanceof d.cR||Ie instanceof d.cS||Ie instanceof d.cT)&&(S(Ie.layers,this.zoom,pe),Ie.addFeatures(it,this.tileID.canonical,ln.patternPositions,Vn))}return this.status="done",{buckets:Object.values(Ve).filter((ur=>!ur.isEmpty())),featureIndex:Ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,imageAtlas:ln,dashPositions:Vn,glyphMap:this.returnDependencies?ri:null,iconMap:this.returnDependencies?Ir:null,glyphPositions:this.returnDependencies?yn.positions:null}}))}}function S(ze,ue,le){const pe=new d.H(ue);for(const Me of ze)Me.recalculate(pe,le)}class M{constructor(ue,le,pe,Me,Ae){this.type=ue,this.properties=pe||{},this.extent=Ae,this.pointsArray=le,this.id=Me}loadGeometry(){return this.pointsArray.map((ue=>ue.map((le=>new d.P(le.x,le.y)))))}}class O{constructor(ue,le,pe){this.version=2,this._myFeatures=ue,this.name=le,this.length=ue.length,this.extent=pe}feature(ue){return this._myFeatures[ue]}}class z{constructor(){this.layers={}}addLayer(ue){this.layers[ue.name]=ue}}function F(ze){let ue=d.cU(ze);return ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),{vectorTile:ze,rawData:ue.buffer}}function B(ze,ue,le){const{extent:pe}=ze,Me=Math.pow(2,le.z-ue.z),Ae=(le.x-ue.x*Me)*pe,Je=(le.y-ue.y*Me)*pe,Ze=[];for(let Ve=0;Ve<ze.length;Ve++){const it=ze.feature(Ve);let At=it.loadGeometry();for(const Xt of At)for(const or of Xt)or.x=or.x*Me-Ae,or.y=or.y*Me-Je;const Pt=128;At=d.cV(At,it.type,-Pt,-Pt,pe+Pt,pe+Pt),At.length!==0&&Ze.push(new M(it.type,At,it.properties,it.id,pe))}return new O(Ze,ze.name,pe)}class D{constructor(ue,le,pe){this.actor=ue,this.layerIndex=le,this.availableImages=pe,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new d.cW(1e3)}loadVectorTile(ue,le){return d._(this,void 0,void 0,(function*(){const pe=yield d.n(ue.request,le);try{return{vectorTile:ue.encoding!=="mlt"?new d.cX(new d.cY(pe.data)):new d.cZ(pe.data),rawData:pe.data,cacheControl:pe.cacheControl,expires:pe.expires}}catch(Me){const Ae=new Uint8Array(pe.data);let Je=`Unable to parse the tile at ${ue.request.url}, `;throw Je+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Me.message}`,new Error(Je)}}))}loadTile(ue){return d._(this,void 0,void 0,(function*(){const{uid:le,overzoomParameters:pe}=ue;pe&&(ue.request=pe.overzoomRequest);const Me=!!(ue&&ue.request&&ue.request.collectResourceTiming)&&new d.c_(ue.request),Ae=new P(ue);this.loading[le]=Ae;const Je=new AbortController;Ae.abort=Je;try{const Ze=yield this.loadVectorTile(ue,Je);if(delete this.loading[le],!Ze)return null;if(pe){const Xt=this._getOverzoomTile(ue,Ze.vectorTile);Ze.rawData=Xt.rawData,Ze.vectorTile=Xt.vectorTile}const Ve=Ze.rawData,it={};Ze.expires&&(it.expires=Ze.expires),Ze.cacheControl&&(it.cacheControl=Ze.cacheControl);const At={};if(Me){const Xt=Me.finish();Xt&&(At.resourceTiming=JSON.parse(JSON.stringify(Xt)))}Ae.vectorTile=Ze.vectorTile;const Pt=Ae.parse(Ze.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);this.loaded[le]=Ae,this.fetching[le]={rawTileData:Ve,cacheControl:it,resourceTiming:At};try{const Xt=yield Pt;return d.e({rawTileData:Ve.slice(0),encoding:ue.encoding},Xt,it,At)}finally{delete this.fetching[le]}}catch(Ze){throw delete this.loading[le],Ae.status="done",this.loaded[le]=Ae,Ze}}))}_getOverzoomTile(ue,le){const{tileID:pe,source:Me,overzoomParameters:Ae}=ue,{maxZoomTileID:Je}=Ae,Ze=`${Je.key}_${pe.key}`,Ve=this.overzoomedTileResultCache.get(Ze);if(Ve)return Ve;const it=new z,At=this.layerIndex.familiesBySource[Me];for(const Xt in At){const or=le.layers[Xt];if(!or)continue;const Mr=B(or,Je,pe.canonical);Mr.length>0&&it.addLayer(Mr)}const Pt=F(it);return this.overzoomedTileResultCache.set(Ze,Pt),Pt}reloadTile(ue){return d._(this,void 0,void 0,(function*(){const le=ue.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const pe=this.loaded[le];if(pe.showCollisionBoxes=ue.showCollisionBoxes,pe.status==="parsing"){const Me=yield pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);let Ae;if(this.fetching[le]){const{rawTileData:Je,cacheControl:Ze,resourceTiming:Ve}=this.fetching[le];delete this.fetching[le],Ae=d.e({rawTileData:Je.slice(0),encoding:ue.encoding},Me,Ze,Ve)}else Ae=Me;return Ae}if(pe.status==="done"&&pe.vectorTile)return pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity)}))}abortTile(ue){return d._(this,void 0,void 0,(function*(){const le=this.loading,pe=ue.uid;le&&le[pe]&&le[pe].abort&&(le[pe].abort.abort(),delete le[pe])}))}removeTile(ue){return d._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ue.uid]&&delete this.loaded[ue.uid]}))}}class H{constructor(){this.loaded={}}loadTile(ue){return d._(this,void 0,void 0,(function*(){const{uid:le,encoding:pe,rawImageData:Me,redFactor:Ae,greenFactor:Je,blueFactor:Ze,baseShift:Ve}=ue,it=Me.width+2,At=Me.height+2,Pt=d.b(Me)?new d.R({width:it,height:At},yield d.c$(Me,-1,-1,it,At)):Me,Xt=new d.d0(le,Pt,pe,Ae,Je,Ze,Ve);return this.loaded=this.loaded||{},this.loaded[le]=Xt,Xt}))}removeTile(ue){const le=this.loaded,pe=ue.uid;le&&le[pe]&&delete le[pe]}}var Q,te,ie=(function(){if(te)return Q;function ze(le,pe){if(le.length!==0){ue(le[0],pe);for(var Me=1;Me<le.length;Me++)ue(le[Me],!pe)}}function ue(le,pe){for(var Me=0,Ae=0,Je=0,Ze=le.length,Ve=Ze-1;Je<Ze;Ve=Je++){var it=(le[Je][0]-le[Ve][0])*(le[Ve][1]+le[Je][1]),At=Me+it;Ae+=Math.abs(Me)>=Math.abs(it)?Me-At+it:it-At+Me,Me=At}Me+Ae>=0!=!!pe&&le.reverse()}return te=1,Q=function le(pe,Me){var Ae,Je=pe&&pe.type;if(Je==="FeatureCollection")for(Ae=0;Ae<pe.features.length;Ae++)le(pe.features[Ae],Me);else if(Je==="GeometryCollection")for(Ae=0;Ae<pe.geometries.length;Ae++)le(pe.geometries[Ae],Me);else if(Je==="Feature")le(pe.geometry,Me);else if(Je==="Polygon")ze(pe.coordinates,Me);else if(Je==="MultiPolygon")for(Ae=0;Ae<pe.coordinates.length;Ae++)ze(pe.coordinates[Ae],Me);return pe}})(),ae=d.d1(ie);const he={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},re=Math.fround||(be=new Float32Array(1),ze=>(be[0]=+ze,be[0]));var be;class xe{constructor(ue){this.options=Object.assign(Object.create(he),ue),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ue){const{log:le,minZoom:pe,maxZoom:Me}=this.options;le&&console.time("total time");const Ae=`prepare ${ue.length} points`;le&&console.time(Ae),this.points=ue;const Je=[];for(let Ve=0;Ve<ue.length;Ve++){const it=ue[Ve];if(!it.geometry)continue;const[At,Pt]=it.geometry.coordinates,Xt=re(Ne(At)),or=re(Xe(Pt));Je.push(Xt,or,1/0,Ve,-1,1),this.options.reduce&&Je.push(0)}let Ze=this.trees[Me+1]=this._createTree(Je);le&&console.timeEnd(Ae);for(let Ve=Me;Ve>=pe;Ve--){const it=+Date.now();Ze=this.trees[Ve]=this._createTree(this._cluster(Ze,Ve)),le&&console.log("z%d: %d clusters in %dms",Ve,Ze.numItems,+Date.now()-it)}return le&&console.timeEnd("total time"),this}getClusters(ue,le){let pe=((ue[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,ue[1]));let Ae=ue[2]===180?180:((ue[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ue[3]));if(ue[2]-ue[0]>=360)pe=-180,Ae=180;else if(pe>Ae){const Pt=this.getClusters([pe,Me,180,Je],le),Xt=this.getClusters([-180,Me,Ae,Je],le);return Pt.concat(Xt)}const Ze=this.trees[this._limitZoom(le)],Ve=Ze.range(Ne(pe),Xe(Je),Ne(Ae),Xe(Me)),it=Ze.data,At=[];for(const Pt of Ve){const Xt=this.stride*Pt;At.push(it[Xt+5]>1?$e(it,Xt,this.clusterProps):this.points[it[Xt+3]])}return At}getChildren(ue){const le=this._getOriginId(ue),pe=this._getOriginZoom(ue),Me="No cluster with the specified id.",Ae=this.trees[pe];if(!Ae)throw new Error(Me);const Je=Ae.data;if(le*this.stride>=Je.length)throw new Error(Me);const Ze=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Ve=Ae.within(Je[le*this.stride],Je[le*this.stride+1],Ze),it=[];for(const At of Ve){const Pt=At*this.stride;Je[Pt+4]===ue&&it.push(Je[Pt+5]>1?$e(Je,Pt,this.clusterProps):this.points[Je[Pt+3]])}if(it.length===0)throw new Error(Me);return it}getLeaves(ue,le,pe){const Me=[];return this._appendLeaves(Me,ue,le=le||10,pe=pe||0,0),Me}getTile(ue,le,pe){const Me=this.trees[this._limitZoom(ue)],Ae=Math.pow(2,ue),{extent:Je,radius:Ze}=this.options,Ve=Ze/Je,it=(pe-Ve)/Ae,At=(pe+1+Ve)/Ae,Pt={features:[]};return this._addTileFeatures(Me.range((le-Ve)/Ae,it,(le+1+Ve)/Ae,At),Me.data,le,pe,Ae,Pt),le===0&&this._addTileFeatures(Me.range(1-Ve/Ae,it,1,At),Me.data,Ae,pe,Ae,Pt),le===Ae-1&&this._addTileFeatures(Me.range(0,it,Ve/Ae,At),Me.data,-1,pe,Ae,Pt),Pt.features.length?Pt:null}getClusterExpansionZoom(ue){let le=this._getOriginZoom(ue)-1;for(;le<=this.options.maxZoom;){const pe=this.getChildren(ue);if(le++,pe.length!==1)break;ue=pe[0].properties.cluster_id}return le}_appendLeaves(ue,le,pe,Me,Ae){const Je=this.getChildren(le);for(const Ze of Je){const Ve=Ze.properties;if(Ve&&Ve.cluster?Ae+Ve.point_count<=Me?Ae+=Ve.point_count:Ae=this._appendLeaves(ue,Ve.cluster_id,pe,Me,Ae):Ae<Me?Ae++:ue.push(Ze),ue.length===pe)break}return Ae}_createTree(ue){const le=new d.aT(ue.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<ue.length;pe+=this.stride)le.add(ue[pe],ue[pe+1]);return le.finish(),le.data=ue,le}_addTileFeatures(ue,le,pe,Me,Ae,Je){for(const Ze of ue){const Ve=Ze*this.stride,it=le[Ve+5]>1;let At,Pt,Xt;if(it)At=Ee(le,Ve,this.clusterProps),Pt=le[Ve],Xt=le[Ve+1];else{const Kr=this.points[le[Ve+3]];At=Kr.properties;const[Ur,tt]=Kr.geometry.coordinates;Pt=Ne(Ur),Xt=Xe(tt)}const or={type:1,geometry:[[Math.round(this.options.extent*(Pt*Ae-pe)),Math.round(this.options.extent*(Xt*Ae-Me))]],tags:At};let Mr;Mr=it||this.options.generateId?le[Ve+3]:this.points[le[Ve+3]].id,Mr!==void 0&&(or.id=Mr),Je.features.push(or)}}_limitZoom(ue){return Math.max(this.options.minZoom,Math.min(Math.floor(+ue),this.options.maxZoom+1))}_cluster(ue,le){const{radius:pe,extent:Me,reduce:Ae,minPoints:Je}=this.options,Ze=pe/(Me*Math.pow(2,le)),Ve=ue.data,it=[],At=this.stride;for(let Pt=0;Pt<Ve.length;Pt+=At){if(Ve[Pt+2]<=le)continue;Ve[Pt+2]=le;const Xt=Ve[Pt],or=Ve[Pt+1],Mr=ue.within(Ve[Pt],Ve[Pt+1],Ze),Kr=Ve[Pt+5];let Ur=Kr;for(const tt of Mr){const sn=tt*At;Ve[sn+2]>le&&(Ur+=Ve[sn+5])}if(Ur>Kr&&Ur>=Je){let tt,sn=Xt*Kr,ri=or*Kr,Ir=-1;const Zr=(Pt/At<<5)+(le+1)+this.points.length;for(const Vn of Mr){const yn=Vn*At;if(Ve[yn+2]<=le)continue;Ve[yn+2]=le;const ln=Ve[yn+5];sn+=Ve[yn]*ln,ri+=Ve[yn+1]*ln,Ve[yn+4]=Zr,Ae&&(tt||(tt=this._map(Ve,Pt,!0),Ir=this.clusterProps.length,this.clusterProps.push(tt)),Ae(tt,this._map(Ve,yn)))}Ve[Pt+4]=Zr,it.push(sn/Ur,ri/Ur,1/0,Zr,-1,Ur),Ae&&it.push(Ir)}else{for(let tt=0;tt<At;tt++)it.push(Ve[Pt+tt]);if(Ur>1)for(const tt of Mr){const sn=tt*At;if(!(Ve[sn+2]<=le)){Ve[sn+2]=le;for(let ri=0;ri<At;ri++)it.push(Ve[sn+ri])}}}}return it}_getOriginId(ue){return ue-this.points.length>>5}_getOriginZoom(ue){return(ue-this.points.length)%32}_map(ue,le,pe){if(ue[le+5]>1){const Je=this.clusterProps[ue[le+6]];return pe?Object.assign({},Je):Je}const Me=this.points[ue[le+3]].properties,Ae=this.options.map(Me);return pe&&Ae===Me?Object.assign({},Ae):Ae}}function $e(ze,ue,le){return{type:"Feature",id:ze[ue+3],properties:Ee(ze,ue,le),geometry:{type:"Point",coordinates:[(pe=ze[ue],360*(pe-.5)),ut(ze[ue+1])]}};var pe}function Ee(ze,ue,le){const pe=ze[ue+5],Me=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Ae=ze[ue+6],Je=Ae===-1?{}:Object.assign({},le[Ae]);return Object.assign(Je,{cluster:!0,cluster_id:ze[ue+3],point_count:pe,point_count_abbreviated:Me})}function Ne(ze){return ze/360+.5}function Xe(ze){const ue=Math.sin(ze*Math.PI/180),le=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return le<0?0:le>1?1:le}function ut(ze){const ue=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ue))/Math.PI-90}function pt(ze,ue,le,pe){let Me=pe;const Ae=ue+(le-ue>>1);let Je,Ze=le-ue;const Ve=ze[ue],it=ze[ue+1],At=ze[le],Pt=ze[le+1];for(let Xt=ue+3;Xt<le;Xt+=3){const or=gt(ze[Xt],ze[Xt+1],Ve,it,At,Pt);if(or>Me)Je=Xt,Me=or;else if(or===Me){const Mr=Math.abs(Xt-Ae);Mr<Ze&&(Je=Xt,Ze=Mr)}}Me>pe&&(Je-ue>3&&pt(ze,ue,Je,pe),ze[Je+2]=Me,le-Je>3&&pt(ze,Je,le,pe))}function gt(ze,ue,le,pe,Me,Ae){let Je=Me-le,Ze=Ae-pe;if(Je!==0||Ze!==0){const Ve=((ze-le)*Je+(ue-pe)*Ze)/(Je*Je+Ze*Ze);Ve>1?(le=Me,pe=Ae):Ve>0&&(le+=Je*Ve,pe+=Ze*Ve)}return Je=ze-le,Ze=ue-pe,Je*Je+Ze*Ze}function wt(ze,ue,le,pe){const Me={id:ze??null,type:ue,geometry:le,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")je(Me,le);else if(ue==="Polygon")je(Me,le[0]);else if(ue==="MultiLineString")for(const Ae of le)je(Me,Ae);else if(ue==="MultiPolygon")for(const Ae of le)je(Me,Ae[0]);return Me}function je(ze,ue){for(let le=0;le<ue.length;le+=3)ze.minX=Math.min(ze.minX,ue[le]),ze.minY=Math.min(ze.minY,ue[le+1]),ze.maxX=Math.max(ze.maxX,ue[le]),ze.maxY=Math.max(ze.maxY,ue[le+1])}function Qe(ze,ue,le,pe){if(!ue.geometry)return;const Me=ue.geometry.coordinates;if(Me&&Me.length===0)return;const Ae=ue.geometry.type,Je=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2);let Ze=[],Ve=ue.id;if(le.promoteId?Ve=ue.properties[le.promoteId]:le.generateId&&(Ve=pe||0),Ae==="Point")yt(Me,Ze);else if(Ae==="MultiPoint")for(const it of Me)yt(it,Ze);else if(Ae==="LineString")Oe(Me,Ze,Je,!1);else if(Ae==="MultiLineString"){if(le.lineMetrics){for(const it of Me)Ze=[],Oe(it,Ze,Je,!1),ze.push(wt(Ve,"LineString",Ze,ue.properties));return}et(Me,Ze,Je,!1)}else if(Ae==="Polygon")et(Me,Ze,Je,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const it of ue.geometry.geometries)Qe(ze,{id:Ve,geometry:it,properties:ue.properties},le,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const it of Me){const At=[];et(it,At,Je,!0),Ze.push(At)}}ze.push(wt(Ve,Ae,Ze,ue.properties))}function yt(ze,ue){ue.push(Mt(ze[0]),Dt(ze[1]),0)}function Oe(ze,ue,le,pe){let Me,Ae,Je=0;for(let Ve=0;Ve<ze.length;Ve++){const it=Mt(ze[Ve][0]),At=Dt(ze[Ve][1]);ue.push(it,At,0),Ve>0&&(Je+=pe?(Me*At-it*Ae)/2:Math.sqrt(Math.pow(it-Me,2)+Math.pow(At-Ae,2))),Me=it,Ae=At}const Ze=ue.length-3;ue[2]=1,pt(ue,0,Ze,le),ue[Ze+2]=1,ue.size=Math.abs(Je),ue.start=0,ue.end=ue.size}function et(ze,ue,le,pe){for(let Me=0;Me<ze.length;Me++){const Ae=[];Oe(ze[Me],Ae,le,pe),ue.push(Ae)}}function Mt(ze){return ze/360+.5}function Dt(ze){const ue=Math.sin(ze*Math.PI/180),le=.5-.25*Math.log((1+ue)/(1-ue))/Math.PI;return le<0?0:le>1?1:le}function Ke(ze,ue,le,pe,Me,Ae,Je,Ze){if(pe/=ue,Ae>=(le/=ue)&&Je<pe)return ze;if(Je<le||Ae>=pe)return null;const Ve=[];for(const it of ze){const At=it.geometry;let Pt=it.type;const Xt=Me===0?it.minX:it.minY,or=Me===0?it.maxX:it.maxY;if(Xt>=le&&or<pe){Ve.push(it);continue}if(or<le||Xt>=pe)continue;let Mr=[];if(Pt==="Point"||Pt==="MultiPoint")tr(At,Mr,le,pe,Me);else if(Pt==="LineString")Ft(At,Mr,le,pe,Me,!1,Ze.lineMetrics);else if(Pt==="MultiLineString")ct(At,Mr,le,pe,Me,!1);else if(Pt==="Polygon")ct(At,Mr,le,pe,Me,!0);else if(Pt==="MultiPolygon")for(const Kr of At){const Ur=[];ct(Kr,Ur,le,pe,Me,!0),Ur.length&&Mr.push(Ur)}if(Mr.length){if(Ze.lineMetrics&&Pt==="LineString"){for(const Kr of Mr)Ve.push(wt(it.id,Pt,Kr,it.tags));continue}Pt!=="LineString"&&Pt!=="MultiLineString"||(Mr.length===1?(Pt="LineString",Mr=Mr[0]):Pt="MultiLineString"),Pt!=="Point"&&Pt!=="MultiPoint"||(Pt=Mr.length===3?"Point":"MultiPoint"),Ve.push(wt(it.id,Pt,Mr,it.tags))}}return Ve.length?Ve:null}function tr(ze,ue,le,pe,Me){for(let Ae=0;Ae<ze.length;Ae+=3){const Je=ze[Ae+Me];Je>=le&&Je<=pe&&Lt(ue,ze[Ae],ze[Ae+1],ze[Ae+2])}}function Ft(ze,ue,le,pe,Me,Ae,Je){let Ze=$t(ze);const Ve=Me===0?ir:St;let it,At,Pt=ze.start;for(let Ur=0;Ur<ze.length-3;Ur+=3){const tt=ze[Ur],sn=ze[Ur+1],ri=ze[Ur+2],Ir=ze[Ur+3],Zr=ze[Ur+4],Vn=Me===0?tt:sn,yn=Me===0?Ir:Zr;let ln=!1;Je&&(it=Math.sqrt(Math.pow(tt-Ir,2)+Math.pow(sn-Zr,2))),Vn<le?yn>le&&(At=Ve(Ze,tt,sn,Ir,Zr,le),Je&&(Ze.start=Pt+it*At)):Vn>pe?yn<pe&&(At=Ve(Ze,tt,sn,Ir,Zr,pe),Je&&(Ze.start=Pt+it*At)):Lt(Ze,tt,sn,ri),yn<le&&Vn>=le&&(At=Ve(Ze,tt,sn,Ir,Zr,le),ln=!0),yn>pe&&Vn<=pe&&(At=Ve(Ze,tt,sn,Ir,Zr,pe),ln=!0),!Ae&&ln&&(Je&&(Ze.end=Pt+it*At),ue.push(Ze),Ze=$t(ze)),Je&&(Pt+=it)}let Xt=ze.length-3;const or=ze[Xt],Mr=ze[Xt+1],Kr=Me===0?or:Mr;Kr>=le&&Kr<=pe&&Lt(Ze,or,Mr,ze[Xt+2]),Xt=Ze.length-3,Ae&&Xt>=3&&(Ze[Xt]!==Ze[0]||Ze[Xt+1]!==Ze[1])&&Lt(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&ue.push(Ze)}function $t(ze){const ue=[];return ue.size=ze.size,ue.start=ze.start,ue.end=ze.end,ue}function ct(ze,ue,le,pe,Me,Ae){for(const Je of ze)Ft(Je,ue,le,pe,Me,Ae,!1)}function Lt(ze,ue,le,pe){ze.push(ue,le,pe)}function ir(ze,ue,le,pe,Me,Ae){const Je=(Ae-ue)/(pe-ue);return Lt(ze,Ae,le+(Me-le)*Je,1),Je}function St(ze,ue,le,pe,Me,Ae){const Je=(Ae-le)/(Me-le);return Lt(ze,ue+(pe-ue)*Je,Ae,1),Je}function Gr(ze,ue){const le=[];for(let pe=0;pe<ze.length;pe++){const Me=ze[pe],Ae=Me.type;let Je;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Je=Tr(Me.geometry,ue);else if(Ae==="MultiLineString"||Ae==="Polygon"){Je=[];for(const Ze of Me.geometry)Je.push(Tr(Ze,ue))}else if(Ae==="MultiPolygon"){Je=[];for(const Ze of Me.geometry){const Ve=[];for(const it of Ze)Ve.push(Tr(it,ue));Je.push(Ve)}}le.push(wt(Me.id,Ae,Je,Me.tags))}return le}function Tr(ze,ue){const le=[];le.size=ze.size,ze.start!==void 0&&(le.start=ze.start,le.end=ze.end);for(let pe=0;pe<ze.length;pe+=3)le.push(ze[pe]+ue,ze[pe+1],ze[pe+2]);return le}function wr(ze,ue){if(ze.transformed)return ze;const le=1<<ze.z,pe=ze.x,Me=ze.y;for(const Ae of ze.features){const Je=Ae.geometry,Ze=Ae.type;if(Ae.geometry=[],Ze===1)for(let Ve=0;Ve<Je.length;Ve+=2)Ae.geometry.push(tn(Je[Ve],Je[Ve+1],ue,le,pe,Me));else for(let Ve=0;Ve<Je.length;Ve++){const it=[];for(let At=0;At<Je[Ve].length;At+=2)it.push(tn(Je[Ve][At],Je[Ve][At+1],ue,le,pe,Me));Ae.geometry.push(it)}}return ze.transformed=!0,ze}function tn(ze,ue,le,pe,Me,Ae){return[Math.round(le*(ze*pe-Me)),Math.round(le*(ue*pe-Ae))]}function Wr(ze,ue,le,pe,Me){const Ae=ue===Me.maxZoom?0:Me.tolerance/((1<<ue)*Me.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:le,y:pe,z:ue,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ze of ze)Xi(Je,Ze,Ae,Me);return Je}function Xi(ze,ue,le,pe){const Me=ue.geometry,Ae=ue.type,Je=[];if(ze.minX=Math.min(ze.minX,ue.minX),ze.minY=Math.min(ze.minY,ue.minY),ze.maxX=Math.max(ze.maxX,ue.maxX),ze.maxY=Math.max(ze.maxY,ue.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Ze=0;Ze<Me.length;Ze+=3)Je.push(Me[Ze],Me[Ze+1]),ze.numPoints++,ze.numSimplified++;else if(Ae==="LineString")Ii(Je,Me,ze,le,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Ze=0;Ze<Me.length;Ze++)Ii(Je,Me[Ze],ze,le,Ae==="Polygon",Ze===0);else if(Ae==="MultiPolygon")for(let Ze=0;Ze<Me.length;Ze++){const Ve=Me[Ze];for(let it=0;it<Ve.length;it++)Ii(Je,Ve[it],ze,le,!0,it===0)}if(Je.length){let Ze=ue.tags||null;if(Ae==="LineString"&&pe.lineMetrics){Ze={};for(const it in ue.tags)Ze[it]=ue.tags[it];Ze.mapbox_clip_start=Me.start/Me.size,Ze.mapbox_clip_end=Me.end/Me.size}const Ve={geometry:Je,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Ze};ue.id!==null&&(Ve.id=ue.id),ze.features.push(Ve)}}function Ii(ze,ue,le,pe,Me,Ae){const Je=pe*pe;if(pe>0&&ue.size<(Me?Je:pe))return void(le.numPoints+=ue.length/3);const Ze=[];for(let Ve=0;Ve<ue.length;Ve+=3)(pe===0||ue[Ve+2]>Je)&&(le.numSimplified++,Ze.push(ue[Ve],ue[Ve+1])),le.numPoints++;Me&&(function(Ve,it){let At=0;for(let Pt=0,Xt=Ve.length,or=Xt-2;Pt<Xt;or=Pt,Pt+=2)At+=(Ve[Pt]-Ve[or])*(Ve[Pt+1]+Ve[or+1]);if(At>0===it)for(let Pt=0,Xt=Ve.length;Pt<Xt/2;Pt+=2){const or=Ve[Pt],Mr=Ve[Pt+1];Ve[Pt]=Ve[Xt-2-Pt],Ve[Pt+1]=Ve[Xt-1-Pt],Ve[Xt-2-Pt]=or,Ve[Xt-1-Pt]=Mr}})(Ze,Ae),ze.push(Ze)}const Be={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class rt{constructor(ue,le){const pe=(le=this.options=(function(Ae,Je){for(const Ze in Je)Ae[Ze]=Je[Ze];return Ae})(Object.create(Be),le)).debug;if(pe&&console.time("preprocess data"),le.maxZoom<0||le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(le.promoteId&&le.generateId)throw new Error("promoteId and generateId cannot be used together.");let Me=(function(Ae,Je){const Ze=[];if(Ae.type==="FeatureCollection")for(let Ve=0;Ve<Ae.features.length;Ve++)Qe(Ze,Ae.features[Ve],Je,Ve);else Qe(Ze,Ae.type==="Feature"?Ae:{geometry:Ae},Je);return Ze})(ue,le);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",le.indexMaxZoom,le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Me=(function(Ae,Je){const Ze=Je.buffer/Je.extent;let Ve=Ae;const it=Ke(Ae,1,-1-Ze,Ze,0,-1,2,Je),At=Ke(Ae,1,1-Ze,2+Ze,0,-1,2,Je);return(it||At)&&(Ve=Ke(Ae,1,-Ze,1+Ze,0,-1,2,Je)||[],it&&(Ve=Gr(it,1).concat(Ve)),At&&(Ve=Ve.concat(Gr(At,-1)))),Ve})(Me,le),Me.length&&this.splitTile(Me,0,0,0),pe&&(Me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ue,le,pe,Me,Ae,Je,Ze){const Ve=[ue,le,pe,Me],it=this.options,At=it.debug;for(;Ve.length;){Me=Ve.pop(),pe=Ve.pop(),le=Ve.pop(),ue=Ve.pop();const Pt=1<<le,Xt=bt(le,pe,Me);let or=this.tiles[Xt];if(!or&&(At>1&&console.time("creation"),or=this.tiles[Xt]=Wr(ue,le,pe,Me,it),this.tileCoords.push({z:le,x:pe,y:Me}),At)){At>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",le,pe,Me,or.numFeatures,or.numPoints,or.numSimplified),console.timeEnd("creation"));const ln=`z${le}`;this.stats[ln]=(this.stats[ln]||0)+1,this.total++}if(or.source=ue,Ae==null){if(le===it.indexMaxZoom||or.numPoints<=it.indexMaxPoints)continue}else{if(le===it.maxZoom||le===Ae)continue;if(Ae!=null){const ln=Ae-le;if(pe!==Je>>ln||Me!==Ze>>ln)continue}}if(or.source=null,ue.length===0)continue;At>1&&console.time("clipping");const Mr=.5*it.buffer/it.extent,Kr=.5-Mr,Ur=.5+Mr,tt=1+Mr;let sn=null,ri=null,Ir=null,Zr=null,Vn=Ke(ue,Pt,pe-Mr,pe+Ur,0,or.minX,or.maxX,it),yn=Ke(ue,Pt,pe+Kr,pe+tt,0,or.minX,or.maxX,it);ue=null,Vn&&(sn=Ke(Vn,Pt,Me-Mr,Me+Ur,1,or.minY,or.maxY,it),ri=Ke(Vn,Pt,Me+Kr,Me+tt,1,or.minY,or.maxY,it),Vn=null),yn&&(Ir=Ke(yn,Pt,Me-Mr,Me+Ur,1,or.minY,or.maxY,it),Zr=Ke(yn,Pt,Me+Kr,Me+tt,1,or.minY,or.maxY,it),yn=null),At>1&&console.timeEnd("clipping"),Ve.push(sn||[],le+1,2*pe,2*Me),Ve.push(ri||[],le+1,2*pe,2*Me+1),Ve.push(Ir||[],le+1,2*pe+1,2*Me),Ve.push(Zr||[],le+1,2*pe+1,2*Me+1)}}getTile(ue,le,pe){ue=+ue,le=+le,pe=+pe;const Me=this.options,{extent:Ae,debug:Je}=Me;if(ue<0||ue>24)return null;const Ze=1<<ue,Ve=bt(ue,le=le+Ze&Ze-1,pe);if(this.tiles[Ve])return wr(this.tiles[Ve],Ae);Je>1&&console.log("drilling down to z%d-%d-%d",ue,le,pe);let it,At=ue,Pt=le,Xt=pe;for(;!it&&At>0;)At--,Pt>>=1,Xt>>=1,it=this.tiles[bt(At,Pt,Xt)];return it&&it.source?(Je>1&&(console.log("found parent tile z%d-%d-%d",At,Pt,Xt),console.time("drilling down")),this.splitTile(it.source,At,Pt,Xt,ue,le,pe),Je>1&&console.timeEnd("drilling down"),this.tiles[Ve]?wr(this.tiles[Ve],Ae):null):null}}function bt(ze,ue,le){return 32*((1<<ze)*le+ue)+ze}class rr extends D{constructor(ue,le,pe,Me=Wt){super(ue,le,pe),this._dataUpdateable=new Map,this._createGeoJSONIndex=Me}loadVectorTile(ue,le){return d._(this,void 0,void 0,(function*(){const pe=ue.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Me=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);return Me?F(new d.d2(Me.features,{version:2,extent:d.a5})):null}))}loadData(ue){return d._(this,void 0,void 0,(function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const pe=this._startPerformance(ue);this._pendingRequest=new AbortController;try{(!this._pendingData||ue.request||ue.data||ue.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ue,this._pendingRequest));const Me=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Me,ue),this.loaded={};const Ae={};return ue.request&&(Ae.data=Me),this._finishPerformance(pe,ue,Ae),Ae}catch(Me){if(delete this._pendingRequest,d.Z(Me))return{abandoned:!0};throw Me}}))}_startPerformance(ue){var le;if(!((le=ue==null?void 0:ue.request)===null||le===void 0)&&le.collectResourceTiming)return new d.c_(ue.request)}_finishPerformance(ue,le,pe){if(!ue)return;const Me=ue.finish();Me&&(pe.resourceTiming={},pe.resourceTiming[le.source]=JSON.parse(JSON.stringify(Me)))}getData(){return d._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ue){const le=this.loaded;return le&&le[ue.uid]?super.reloadTile(ue):this.loadTile(ue)}loadAndProcessGeoJSON(ue,le){return d._(this,void 0,void 0,(function*(){let pe;if(ue.request?pe=yield this.loadGeoJSONFromUrl(ue.request,ue.promoteId,le):ue.data?pe=this._loadGeoJSONFromObject(ue.data,ue.promoteId):ue.dataDiff&&(pe=this._loadGeoJSONFromDiff(ue.dataDiff,ue.promoteId,ue.source)),delete this._pendingRequest,typeof pe!="object")throw new Error(`Input data given to '${ue.source}' is not a valid GeoJSON object.`);return ae(pe,!0),ue.filter&&(pe=this._filterGeoJSON(pe,ue.filter)),pe}))}loadGeoJSONFromUrl(ue,le,pe){return d._(this,void 0,void 0,(function*(){const Me=yield d.j(ue,pe);return this._dataUpdateable=d.a7(Me.data,le),Me.data}))}_loadGeoJSONFromObject(ue,le){return this._dataUpdateable=d.a7(ue,le),ue}_loadGeoJSONFromDiff(ue,le,pe){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${pe}`);d.a8(this._dataUpdateable,ue,le);const Me=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Me)}_filterGeoJSON(ue,le){const pe=d.d3(le,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map((Ae=>`${Ae.key}: ${Ae.message}`)).join(", "));const Me=ue.features.filter((Ae=>pe.value.evaluate({zoom:0},Ae)));return this._toFeatureCollection(Me)}_toFeatureCollection(ue){return{type:"FeatureCollection",features:ue}}removeSource(ue){return d._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ue){return this._geoJSONIndex.getClusterExpansionZoom(ue.clusterId)}getClusterChildren(ue){return this._geoJSONIndex.getChildren(ue.clusterId)}getClusterLeaves(ue){return this._geoJSONIndex.getLeaves(ue.clusterId,ue.limit,ue.offset)}}function Wt(ze,ue){return ue.cluster?new xe((function({superclusterOptions:le,clusterProperties:pe}){if(!pe||!le)return le;const Me={},Ae={},Je={accumulated:null,zoom:0},Ze={properties:null},Ve=Object.keys(pe);for(const it of Ve){const[At,Pt]=pe[it],Xt=d.d3(Pt),or=d.d3(typeof At=="string"?[At,["accumulated"],["get",it]]:At);Me[it]=Xt.value,Ae[it]=or.value}return le.map=it=>{Ze.properties=it;const At={};for(const Pt of Ve)At[Pt]=Me[Pt].evaluate(Je,Ze);return At},le.reduce=(it,At)=>{Ze.properties=At;for(const Pt of Ve)Je.accumulated=it[Pt],it[Pt]=Ae[Pt].evaluate(Je,Ze)},le})(ue)).load(ze.features):(function(le,pe){return new rt(le,pe)})(ze,ue.geojsonVtOptions)}class zt{constructor(ue){this.self=ue,this.actor=new d.L(ue),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(le,pe)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=pe},this.self.addProtocol=d.cJ,this.self.removeProtocol=d.cK,this.self.registerRTLTextPlugin=le=>{d.d4.setMethods(le)},this.actor.registerMessageHandler("LDT",((le,pe)=>this._getDEMWorkerSource(le,pe.source).loadTile(pe))),this.actor.registerMessageHandler("RDT",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(le,pe.source).removeTile(pe)})))),this.actor.registerMessageHandler("GCEZ",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterExpansionZoom(pe)})))),this.actor.registerMessageHandler("GCC",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterChildren(pe)})))),this.actor.registerMessageHandler("GCL",((le,pe)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(le,pe.type,pe.source).getClusterLeaves(pe)})))),this.actor.registerMessageHandler("LD",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).loadData(pe))),this.actor.registerMessageHandler("GD",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).getData())),this.actor.registerMessageHandler("LT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).loadTile(pe))),this.actor.registerMessageHandler("RT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).reloadTile(pe))),this.actor.registerMessageHandler("AT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).abortTile(pe))),this.actor.registerMessageHandler("RMT",((le,pe)=>this._getWorkerSource(le,pe.type,pe.source).removeTile(pe))),this.actor.registerMessageHandler("RS",((le,pe)=>d._(this,void 0,void 0,(function*(){if(!this.workerSources[le]||!this.workerSources[le][pe.type]||!this.workerSources[le][pe.type][pe.source])return;const Me=this.workerSources[le][pe.type][pe.source];delete this.workerSources[le][pe.type][pe.source],Me.removeSource!==void 0&&Me.removeSource(pe)})))),this.actor.registerMessageHandler("RM",(le=>d._(this,void 0,void 0,(function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le],this.globalStates.delete(le)})))),this.actor.registerMessageHandler("SR",((le,pe)=>d._(this,void 0,void 0,(function*(){this.referrer=pe})))),this.actor.registerMessageHandler("SRPS",((le,pe)=>this._syncRTLPluginState(le,pe))),this.actor.registerMessageHandler("IS",((le,pe)=>d._(this,void 0,void 0,(function*(){this.self.importScripts(pe)})))),this.actor.registerMessageHandler("SI",((le,pe)=>this._setImages(le,pe))),this.actor.registerMessageHandler("UL",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(le).update(pe.layers,pe.removedIds,this._getGlobalState(le))})))),this.actor.registerMessageHandler("UGS",((le,pe)=>d._(this,void 0,void 0,(function*(){const Me=this._getGlobalState(le);for(const Ae in pe)Me[Ae]=pe[Ae]})))),this.actor.registerMessageHandler("SL",((le,pe)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(le).replace(pe,this._getGlobalState(le))}))))}_getGlobalState(ue){let le=this.globalStates.get(ue);return le||(le={},this.globalStates.set(ue,le)),le}_setImages(ue,le){return d._(this,void 0,void 0,(function*(){this.availableImages[ue]=le;for(const pe in this.workerSources[ue]){const Me=this.workerSources[ue][pe];for(const Ae in Me)Me[Ae].availableImages=le}}))}_syncRTLPluginState(ue,le){return d._(this,void 0,void 0,(function*(){return yield d.d4.syncState(le,this.self.importScripts)}))}_getAvailableImages(ue){let le=this.availableImages[ue];return le||(le=[]),le}_getLayerIndex(ue){let le=this.layerIndexes[ue];return le||(le=this.layerIndexes[ue]=new o),le}_getWorkerSource(ue,le,pe){if(this.workerSources[ue]||(this.workerSources[ue]={}),this.workerSources[ue][le]||(this.workerSources[ue][le]={}),!this.workerSources[ue][le][pe]){const Me={sendAsync:(Ae,Je)=>(Ae.targetMapId=ue,this.actor.sendAsync(Ae,Je))};switch(le){case"vector":this.workerSources[ue][le][pe]=new D(Me,this._getLayerIndex(ue),this._getAvailableImages(ue));break;case"geojson":this.workerSources[ue][le][pe]=new rr(Me,this._getLayerIndex(ue),this._getAvailableImages(ue));break;default:this.workerSources[ue][le][pe]=new this.externalWorkerSourceTypes[le](Me,this._getLayerIndex(ue),this._getAvailableImages(ue))}}return this.workerSources[ue][le][pe]}_getDEMWorkerSource(ue,le){return this.demWorkerSources[ue]||(this.demWorkerSources[ue]={}),this.demWorkerSources[ue][le]||(this.demWorkerSources[ue][le]=new H),this.demWorkerSources[ue][le]}}return d.i(self)&&(self.worker=new zt(self)),zt})),u("index",["exports","./shared"],(function(d,o){var _="5.16.0";function P(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let S,M,O;const z={frame(w,i,c){const m=requestAnimationFrame((E=>{v(),i(E)})),{unsubscribe:v}=o.s(w.signal,"abort",(()=>{v(),cancelAnimationFrame(m),c(new o.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((i,c)=>{this.frame(w,i,c)}))},getImageData(w,i=0){return this.getImageCanvasContext(w).getImageData(-i,-i,w.width+2*i,w.height+2*i)},getImageCanvasContext(w){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=w.width,i.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(S||(S=document.createElement("a")),S.href=w,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)},set prefersReducedMotion(w){O=w}},F=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function B(){return F.getCurrentTime()}class D{static testProp(i){if(!D.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in D.docStyle)return i[c];return i[0]}static create(i,c,m){const v=window.document.createElement(i);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){D.docStyle&&D.selectProp&&(D.userSelect=D.docStyle[D.selectProp],D.docStyle[D.selectProp]="none")}static enableDrag(){D.docStyle&&D.selectProp&&(D.docStyle[D.selectProp]=D.userSelect)}static setTransform(i,c){i.style[D.transformProp]=c}static addEventListener(i,c,m,v={}){i.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(i,c,m,v={}){i.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",D.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",D.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",D.suppressClickInternal,!0)}),0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,m){const v=c.boundingClientRect;return new o.P((m.clientX-v.left)/c.x-i.clientLeft,(m.clientY-v.top)/c.y-i.clientTop)}static mousePos(i,c){const m=D.getScale(i);return D.getPoint(i,m,c)}static touchPos(i,c){const m=[],v=D.getScale(i);for(let E=0;E<c.length;E++)m.push(D.getPoint(i,v,c[E]));return m}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const c=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),m=c.querySelectorAll("script");for(const v of m)v.remove();return D.clean(c),c.innerHTML}static isPossiblyDangerous(i,c){const m=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!m.includes("javascript:")&&!m.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const c=i.children;for(const m of c)D.removeAttributes(m),D.clean(m)}static removeAttributes(i){for(const{name:c,value:m}of i.attributes)D.isPossiblyDangerous(c,m)&&i.removeAttribute(c)}}D.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,D.selectProp=D.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),D.transformProp=D.testProp(["transform","WebkitTransform"]);const H={supported:!1,testSupport:function(w){!ie&&te&&(ae?he(w):Q=w)}};let Q,te,ie=!1,ae=!1;function he(w){const i=w.createTexture();w.bindTexture(w.TEXTURE_2D,i);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,te),w.isContextLost())return;H.supported=!0}catch{}w.deleteTexture(i),ie=!0}var re;typeof document<"u"&&(te=document.createElement("img"),te.onload=()=>{Q&&he(Q),Q=null,ae=!0},te.onerror=()=>{ie=!0,Q=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let i,c,m,v;w.resetRequestQueue=()=>{i=[],c=0,m=0,v={}},w.addThrottleControl=N=>{const U=m++;return v[U]=N,U},w.removeThrottleControl=N=>{delete v[N],k()},w.getImage=(N,U,W=!0)=>new Promise(((J,Y)=>{H.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),i.push({abortController:U,requestParameters:N,supportImageRefresh:W,state:"queued",onError:oe=>{Y(oe)},onSuccess:oe=>{J(oe)}}),k()}));const E=N=>o._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:U,supportImageRefresh:W,onError:J,onSuccess:Y,abortController:oe}=N,ce=W===!1&&!o.i(self)&&!o.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((ve,we)=>ve&&we==="accept"),!0));c++;const ye=ce?L(U,oe):o.m(U,oe);try{const ve=yield ye;delete N.abortController,N.state="completed",ve.data instanceof HTMLImageElement||o.b(ve.data)?Y(ve):ve.data&&Y({data:yield(_e=ve.data,typeof createImageBitmap=="function"?o.f(_e):o.h(_e)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete N.abortController,J(ve)}finally{c--,k()}var _e})),k=()=>{const N=(()=>{for(const U of Object.keys(v))if(v[U]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<N&&i.length>0;U++){const W=i.shift();W.abortController.signal.aborted?U--:E(W)}},L=(N,U)=>new Promise(((W,J)=>{const Y=new Image,oe=N.url,ce=N.credentials;ce&&ce==="include"?Y.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!o.d(oe))&&(Y.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{Y.src="",J(new o.a(U.signal.reason))})),Y.fetchPriority="high",Y.onload=()=>{Y.onerror=Y.onload=null,W({data:Y})},Y.onerror=()=>{Y.onerror=Y.onload=null,U.signal.aborted||J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Y.src=oe}))})(re||(re={})),re.resetRequestQueue();class be{constructor(i){this._transformRequestFn=i??null}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function xe(w){const i=[];if(typeof w=="string")i.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:m,url:v}of w){const E=`${m}${v}`;c.indexOf(E)===-1&&(c.push(E),i.push({id:m,url:v}))}}return i}function $e(w,i,c){try{const m=new URL(w);return m.pathname+=`${i}${c}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ee(w){const{userImage:i}=w;return!!(i&&i.render&&i.render())&&(w.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ne extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const i of Object.keys(this.images))this.removeImage(i);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:m}of this.requestors)m(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new o.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,c){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,E=m&&m.height||c.data.height;return!(i[0]<0||v<i[0]||i[1]<0||E<i[1]||i[2]<0||v<i[2]||i[3]<0||E<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,m=!0){const v=this.getImage(i);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((c,m)=>{let v=!0;if(!this.isLoaded())for(const E of i)this.images[E]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})}))}_getImagesForIds(i){const c={};for(const m of i){let v=this.getImage(m);v||(this.fire(new o.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?c[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],m=this.getImage(i);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new o.I(v,m);this.patterns[i]={bin:v,position:E}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const E in this.patterns)i.push(this.patterns[E].bin);const{w:c,h:m}=o.p(i),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const E in this.patterns){const{bin:k}=this.patterns[E],L=k.x+1,N=k.y+1,U=this.getImage(E).data,W=U.width,J=U.height;o.R.copy(U,v,{x:0,y:0},{x:L,y:N},{width:W,height:J}),o.R.copy(U,v,{x:0,y:J-1},{x:L,y:N-1},{width:W,height:1}),o.R.copy(U,v,{x:0,y:0},{x:L,y:N+J},{width:W,height:1}),o.R.copy(U,v,{x:W-1,y:0},{x:L-1,y:N},{width:1,height:J}),o.R.copy(U,v,{x:0,y:0},{x:L+W,y:N},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||o.w(`Image with ID: "${c}" was not found`),Ee(m)&&this.updateImage(c,m)}}cloneImages(){const i={};for(const c in this.images){const m=this.images[c];i[c]=Object.assign(Object.assign({},m),{data:m.data?m.data.clone():null})}return i}}const Xe=1e20;function ut(w,i,c,m,v,E,k,L,N){for(let U=i;U<i+m;U++)pt(w,c*E+U,E,v,k,L,N);for(let U=c;U<c+v;U++)pt(w,U*E+i,1,m,k,L,N)}function pt(w,i,c,m,v,E,k){E[0]=0,k[0]=-Xe,k[1]=Xe,v[0]=w[i];for(let L=1,N=0,U=0;L<m;L++){v[L]=w[i+L*c];const W=L*L;do{const J=E[N];U=(v[L]-v[J]+W-J*J)/(L-J)/2}while(U<=k[N]&&--N>-1);N++,E[N]=L,k[N]=U,k[N+1]=Xe}for(let L=0,N=0;L<m;L++){for(;k[N+1]<L;)N++;const U=E[N],W=L-U;w[i+L*c]=v[U]+W*W}}const gt=o.v.layout_symbol["text-font"].default.join(",");class wt{constructor(i,c,m){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={},this.lang=m}setURL(i){this.url=i}getGlyphs(i){return o._(this,void 0,void 0,(function*(){const c=[];for(const E in i)for(const k of i[E])c.push(this._getAndCacheGlyphsPromise(E,k));const m=yield Promise.all(c),v={};for(const{stack:E,id:k,glyph:L}of m)v[E]||(v[E]={}),v[E][k]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return v}))}_getAndCacheGlyphsPromise(i,c){return o._(this,void 0,void 0,(function*(){let m=this.entries[i];m||(m=this.entries[i]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[c];return v!==void 0?{stack:i,id:c,glyph:v}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(v=m.glyphs[c]=this._drawGlyph(m,i,c),{stack:i,id:c,glyph:v}):yield this._downloadAndCacheRangePromise(i,c)}))}_downloadAndCacheRangePromise(i,c){return o._(this,void 0,void 0,(function*(){const m=this.entries[i],v=Math.floor(c/256);if(m.ranges[v])return{stack:i,id:c,glyph:null};if(!m.requests[v]){const E=wt.loadGlyphRange(i,v,this.url,this.requestManager);m.requests[v]=E}try{const E=yield m.requests[v];for(const k in E)m.glyphs[+k]=E[+k];return m.ranges[v]=!0,{stack:i,id:c,glyph:E[c]||null}}catch(E){const k=m.glyphs[c]=this._drawGlyph(m,i,c);return this._warnOnMissingGlyphRange(k,v,c,E),{stack:i,id:c,glyph:k}}}))}_warnOnMissingGlyphRange(i,c,m,v){const E=256*c,k=E+255,L=m.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${c}, ${E}-${k}. Rendering codepoint U+${L} locally instead. ${v}`)}_charUsesLocalIdeographFontFamily(i){return!!this.localIdeographFontFamily&&o.q(i)}_drawGlyph(i,c,m){const v=c===gt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(m),E=v?"ideographTinySDF":"tinySDF";i[E]||(i[E]=this._createTinySDF(v?this.localIdeographFontFamily:c));const k=i[E].draw(String.fromCodePoint(m)),L=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(m));return{id:m,bitmap:new o.r({width:k.width||60,height:k.height||60},k.data),metrics:{width:L?0:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:L?0:k.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(i){const c=i?i.split(","):[];c.push("sans-serif");const m=c.map((v=>/[-\w]+/.test(v)?v:`'${CSS.escape(v)}'`)).join(",");return new wt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(i){return/italic/i.test(i)?"italic":/oblique/i.test(i)?"oblique":"normal"}_fontWeight(i){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let m;for(const[v,E]of Object.entries(c))new RegExp(`\\b${v}\\b`,"i").test(i)&&(m=`${E}`);return m}destroy(){for(const i in this.entries){const c=this.entries[i];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}wt.loadGlyphRange=function(w,i,c,m){return o._(this,void 0,void 0,(function*(){const v=256*i,E=v+255,k=m.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${v}-${E}`),"Glyphs"),L=yield o.n(k,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${i}, ${v}-${E}`);const N={};for(const U of o.o(L.data))N[U.id]=U;return N}))},wt.TinySDF=class{constructor({fontSize:w=24,buffer:i=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:k="normal",lang:L=null}={}){this.buffer=i,this.cutoff=m,this.radius=c,this.lang=L;const N=this.size=w+4*i,U=this._createCanvas(N),W=this.ctx=U.getContext("2d",{willReadFrequently:!0});W.font=`${k} ${E} ${w}px ${v}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(w){const i=document.createElement("canvas");return i.width=i.height=w,i}draw(w){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(w),k=Math.ceil(c),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-v))),N=Math.min(this.size-this.buffer,k+Math.ceil(m)),U=L+2*this.buffer,W=N+2*this.buffer,J=Math.max(U*W,0),Y=new Uint8ClampedArray(J),oe={data:Y,width:U,height:W,glyphWidth:L,glyphHeight:N,glyphTop:k,glyphLeft:0,glyphAdvance:i};if(L===0||N===0)return oe;const{ctx:ce,buffer:ye,gridInner:_e,gridOuter:ve}=this;this.lang&&(ce.lang=this.lang),ce.clearRect(ye,ye,L,N),ce.fillText(w,ye,ye+k);const we=ce.getImageData(ye,ye,L,N);ve.fill(Xe,0,J),_e.fill(0,0,J);for(let Le=0;Le<N;Le++)for(let Se=0;Se<L;Se++){const ke=we.data[4*(Le*L+Se)+3]/255;if(ke===0)continue;const Fe=(Le+ye)*U+Se+ye;if(ke===1)ve[Fe]=0,_e[Fe]=Xe;else{const Te=.5-ke;ve[Fe]=Te>0?Te*Te:0,_e[Fe]=Te<0?Te*Te:0}}ut(ve,0,0,U,W,U,this.f,this.v,this.z),ut(_e,ye,ye,L,N,U,this.f,this.v,this.z);for(let Le=0;Le<J;Le++){const Se=Math.sqrt(ve[Le])-Math.sqrt(_e[Le]);Y[Le]=Math.round(255-255*(Se/this.radius+this.cutoff))}return oe}};class je{constructor(){this.specification=o.u.light.position}possiblyEvaluate(i,c){return o.F(i.expression.evaluate(c))}interpolate(i,c,m){return{x:o.G.number(i.x,c.x,m),y:o.G.number(i.y,c.y,m),z:o.G.number(i.z,c.z,m)}}}let Qe;class yt extends o.E{constructor(i){super(),Qe=Qe||new o.t({anchor:new o.D(o.u.light.anchor),position:new je,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Qe,void 0),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(o.y,i,c))for(const m in i){const v=i[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||m.validate!==!1)&&o.B(this,i.call(o.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Oe=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class et extends o.E{constructor(i){super(),this._transitionable=new o.x(Oe,void 0),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(i,c={}){if(!this._validate(o.J,i,c)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in i){const v=i[m];m.endsWith(o.z)?this._transitionable.setTransition(m.slice(0,-o.z.length),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m={}){return(m==null?void 0:m.validate)!==!1&&o.B(this,i.call(o.C,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Mt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const m=i.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,c)),this.dashEntry[m]}getDashRanges(i,c,m){const v=[];let E=i.length%2==1?-i[i.length-1]*m:0,k=i[0]*m,L=!0;v.push({left:E,right:k,isDash:L,zeroLength:i[0]===0});let N=i[0];for(let U=1;U<i.length;U++){L=!L;const W=i[U];E=N*m,N+=W,k=N*m,v.push({left:E,right:k,isDash:L,zeroLength:W===0})}return v}addRoundDash(i,c,m){const v=c/2;for(let E=-m;E<=m;E++){const k=this.width*(this.nextRow+m+E);let L=0,N=i[L];for(let U=0;U<this.width;U++){U/N.right>1&&(N=i[++L]);const W=Math.abs(U-N.left),J=Math.abs(U-N.right),Y=Math.min(W,J);let oe;const ce=E/m*(v+1);if(N.isDash){const ye=v-Math.abs(ce);oe=Math.sqrt(Y*Y+ye*ye)}else oe=v-Math.sqrt(Y*Y+ce*ce);this.data[k+U]=Math.max(0,Math.min(255,oe+128))}}}addRegularDash(i){for(let L=i.length-1;L>=0;--L){const N=i[L],U=i[L+1];N.zeroLength?i.splice(L,1):U&&U.isDash===N.isDash&&(U.left=N.left,i.splice(L,1))}const c=i[0],m=i[i.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let E=0,k=i[E];for(let L=0;L<this.width;L++){L/k.right>1&&(k=i[++E]);const N=Math.abs(L-k.left),U=Math.abs(L-k.right),W=Math.min(N,U);this.data[v+L]=Math.max(0,Math.min(255,(k.isDash?W:-W)+128))}}addDash(i,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let E=0;for(let L=0;L<i.length;L++)E+=i[L];if(E!==0){const L=this.width/E,N=this.getDashRanges(i,this.width,L);c?this.addRoundDash(N,L,m):this.addRegularDash(N)}const k={y:this.nextRow+m,height:2*m,width:E};return this.nextRow+=v,this.dirty=!0,k}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Dt="maplibre_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Dt]}numActive(){return Object.keys(this.active).length}}const tr=Math.floor(z.hardwareConcurrency/2);let Ft,$t;function ct(){return Ft||(Ft=new Ke),Ft}Ke.workerCount=o.K(globalThis)?Math.max(Math.min(tr,3),1):1;class Lt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const m=this.workerPool.acquire(c);for(let v=0;v<m.length;v++){const E=new o.L(m[v],c);E.name=`Worker ${v}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:i,data:c}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const m of this.actors)m.registerMessageHandler(i,c)}unregisterMessageHandler(i){for(const c of this.actors)c.unregisterMessageHandler(i)}}function ir(){return $t||($t=new Lt(ct(),o.M),$t.registerMessageHandler("GR",((w,i,c)=>o.m(i,c)))),$t}function St(w,i){const c=o.N();return o.O(c,c,[1,1,0]),o.Q(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.S(c,c,w.calculatePosMatrix(i.toUnwrapped())):c}function Gr(w,i,c,m,v,E,k){var L;const N=(function(Y,oe,ce){if(Y)for(const ye of Y){const _e=oe[ye];if(_e&&_e.source===ce&&_e.type==="fill-extrusion")return!0}else for(const ye in oe){const _e=oe[ye];if(_e.source===ce&&_e.type==="fill-extrusion")return!0}return!1})((L=v==null?void 0:v.layers)!==null&&L!==void 0?L:null,i,w.id),U=E.maxPitchScaleFactor(),W=w.tilesIn(m,U,N);W.sort(Tr);const J=[];for(const Y of W)J.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(i,c,w.getState(),Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,v,E,U,St(E,Y.tileID),k?(oe,ce)=>k(Y.tileID,oe,ce):void 0)});return(function(Y,oe){for(const ce in Y)for(const ye of Y[ce])wr(ye,oe);return Y})((function(Y){const oe={},ce={};for(const ye of Y){const _e=ye.queryResults,ve=ye.wrappedTileID,we=ce[ve]=ce[ve]||{};for(const Le in _e){const Se=_e[Le],ke=we[Le]=we[Le]||{},Fe=oe[Le]=oe[Le]||[];for(const Te of Se)ke[Te.featureIndex]||(ke[Te.featureIndex]=!0,Fe.push(Te))}}return oe})(J),w)}function Tr(w,i){const c=w.tileID,m=i.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function wr(w,i){const c=w.feature,m=i.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=m}function tn(w,i,c){return o._(this,void 0,void 0,(function*(){let m=w;if(w.url?m=(yield o.j(i.transformRequest(w.url,"Source"),c)).data:yield z.frameAsync(c),!m)return null;const v=o.U(o.e(m,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map((E=>E.id))),v}))}class Wr{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof o.V?new o.V(i.lng,i.lat):o.V.convert(i),this}setSouthWest(i){return this._sw=i instanceof o.V?new o.V(i.lng,i.lat):o.V.convert(i),this}extend(i){const c=this._sw,m=this._ne;let v,E;if(i instanceof o.V)v=i,E=i;else{if(!(i instanceof Wr))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Wr.convert(i)):this.extend(o.V.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(o.V.convert(i)):this;if(v=i._sw,E=i._ne,!v||!E)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(E.lng,m.lng),m.lat=Math.max(E.lat,m.lat)):(this._sw=new o.V(v.lng,v.lat),this._ne=new o.V(E.lng,E.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:m}=o.V.convert(i);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}intersects(i){if(!((i=Wr.convert(i)).getNorth()>=this.getSouth()&&i.getSouth()<=this.getNorth()))return!1;const c=Math.abs(this.getEast()-this.getWest()),m=Math.abs(i.getEast()-i.getWest());if(c>=360||m>=360)return!0;const v=o.W(this.getWest(),-180,180),E=o.W(this.getEast(),-180,180),k=o.W(i.getWest(),-180,180),L=o.W(i.getEast(),-180,180),N=v>=E,U=k>=L;return!(!N||!U)||(N?L>=v||k<=E:U?E>=k||v<=L:k<=E&&L>=v)}static convert(i){return i instanceof Wr?i:i&&new Wr(i)}static fromLngLat(i,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*i.lat);return new Wr(new o.V(i.lng-v,i.lat-m),new o.V(i.lng+v,i.lat+m))}adjustAntiMeridian(){const i=new o.V(this._sw.lng,this._sw.lat),c=new o.V(this._ne.lng,this._ne.lat);return new Wr(i,i.lng>c.lng?new o.V(c.lng+360,c.lat):c)}}class Xi{constructor(i,c,m){this.bounds=Wr.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),m=Math.floor(o.Y(this.bounds.getWest())*c),v=Math.floor(o.X(this.bounds.getNorth())*c),E=Math.ceil(o.Y(this.bounds.getEast())*c),k=Math.ceil(o.X(this.bounds.getSouth())*c);return i.x>=m&&i.x<E&&i.y>=v&&i.y<k}}class Ii extends o.E{constructor(i,c,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),i&&(o.e(this,i),i.bounds&&(this.tileBounds=new Xi(i.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this._loaded=!0,o.Z(i)||this.fire(new o.k(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(i)};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((E,k)=>{i.reloadPromise={resolve:E,reject:k}}))}else i.actor=this.dispatcher.getActor(),v="LT";i.abortController=new AbortController;try{const E=yield i.actor.sendAsync({type:v,data:m},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,E)}catch(E){if(delete i.abortController,i.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(i,null)}}))}_getOverzoomParameters(i){if(i.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=i.tileID.scaledTo(this.maxzoom).canonical,m=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(m,"Tile")}}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const m=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(m.resolve).catch(m.reject)}}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Be extends o.E{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.U(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(i=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield tn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Xi(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return o.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const m=yield re.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,E=v.gl,k=m.data;i.texture=this.map.painter.getTileTexture(k.width),i.texture?i.texture.update(k,{useMipmap:!0}):(i.texture=new o.T(v,k,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}}))}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class rt extends Be{constructor(i,c,m,v){super(i,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const v=yield re.getImage(m,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(v&&v.data){const E=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&i.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const k=o.b(E)&&o.$()?E:yield this.readImageNow(E),L={type:this.type,uid:i.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const N=yield i.actor.sendAsync({type:"LDT",data:L});i.dem=N,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(v){if(delete i.abortController,i.aborted)i.state="unloaded";else if(v)throw i.state="errored",v}}))}readImageNow(i){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const c=i.width+2,m=i.height+2;try{return new o.R({width:c,height:m},yield o.a1(i,-1,-1,c,m))}catch{}}return z.getImageData(i,1)}))}_getNeighboringTiles(i){const c=i.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,E=c.x===0?i.wrap-1:i.wrap,k=(c.x+1+m)%m,L=c.x+1===m?i.wrap+1:i.wrap,N={};return N[new o.a2(i.overscaledZ,E,c.z,v,c.y).key]={backfilled:!1},N[new o.a2(i.overscaledZ,L,c.z,k,c.y).key]={backfilled:!1},c.y>0&&(N[new o.a2(i.overscaledZ,E,c.z,v,c.y-1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,L,c.z,k,c.y-1).key]={backfilled:!1}),c.y+1<m&&(N[new o.a2(i.overscaledZ,E,c.z,v,c.y+1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.a2(i.overscaledZ,L,c.z,k,c.y+1).key]={backfilled:!1}),N}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}function bt(w){return w.type==="GeometryCollection"?w.geometries.map((i=>i.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function rr(w){const i=new Wr;let c;switch(w.type){case"FeatureCollection":c=w.features.map((m=>bt(m.geometry))).flat(1/0);break;case"Feature":c=bt(w.geometry);break;default:c=bt(w)}if(c.length==0)return i;for(let m=0;m<c.length-1;m+=2)i.extend([c[m],c[m+1]]);return i}class Wt extends o.E{constructor(i,c,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=m.getActor(),this.setEventedParent(v),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(i){return i*(o.a5/this.tileSize)}_getClusterMaxZoom(i){const c=i?Math.round(i):this.maxzoom-1;return Number.isInteger(i)||i===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${i}" rounded to "${c}"`),c}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i,c){this._data=typeof i=="string"?{url:i}:{geojson:i},this._pendingWorkerUpdate={data:i};const m=this._updateWorkerData();return c?m:this}updateData(i,c){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,i);const m=this._updateWorkerData();return c?m:this}getData(){return o._(this,void 0,void 0,(function*(){const i=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return rr(yield this.getData())}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(i.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:m}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:i,diff:c}=this._pendingWorkerUpdate,m=o.e({type:this.type},this.workerOptions);i!==void 0?(typeof i=="string"?(m.request=this.map._requestManager.transformRequest(z.resolveURL(i),"Source"),m.request.collectResourceTiming=this._collectResourceTiming):m.data=i,this._pendingWorkerUpdate.data=void 0):c&&(m.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:m});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));v.data&&(this._data={geojson:v.data});const E=this._applyDiffToSource(c),k=this._getShouldReloadTileOptions(E);let L=null;v.resourceTiming&&v.resourceTiming[this.id]&&(L=v.resourceTiming[this.id].slice(0));const N={dataType:"source"};this._collectResourceTiming&&L&&L.length>0&&o.e(N,{resourceTiming:L}),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},N),{sourceDataType:"content",shouldReloadTileOptions:k})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(v))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(i){if(!i)return;const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const v=o.a7(this._data.geojson,c);if(!v)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:v}}if(!this._data.updateable)return;const m=o.a8(this._data.updateable,i,c);return i.removeAll||this._options.cluster?void 0:m}_getShouldReloadTileOptions(i){if(i)return{affectedBounds:i.filter(Boolean).map((c=>rr(c)))}}shouldReloadTile(i,{affectedBounds:c}){if(i.state==="loading")return!0;if(i.state==="unloaded")return!1;const{buffer:m,extent:v}=this.workerOptions.geojsonVtOptions,E=(function({x:k,y:L,z:N},U=0){const W=o.a3((k-U)/Math.pow(2,N)),J=o.a4((L+1+U)/Math.pow(2,N)),Y=o.a3((k+1+U)/Math.pow(2,N)),oe=o.a4((L-U)/Math.pow(2,N));return new Wr([W,J],[Y,oe])})(i.tileID.canonical,m/v);for(const k of c)if(E.intersects(k))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(i){return o._(this,void 0,void 0,(function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const m={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};i.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:m},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(v,this.map.painter,c==="RT")}))}abortTile(i){return o._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return o._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class zt extends o.E{constructor(i,c,m,v){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield re.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(o.a9.fromLngLat);var m;return this.tileID=(function(v){const E=o.aa.fromPoints(v),k=E.width(),L=E.height(),N=Math.max(k,L),U=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),W=Math.pow(2,U);return new o.ac(U,Math.floor((E.minX+E.maxX)/2*W),Math.floor((E.minY+E.maxY)/2*W))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.texture||(this.texture=new o.T(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const E=this.tiles[v];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){const{minX:c,minY:m,maxX:v,maxY:E}=o.aa.fromPoints(i),k={};for(let L=0;L<=o.ab;L++){const N=Math.pow(2,L),U=Math.floor(c*N),W=Math.floor(m*N),J=Math.floor(v*N),Y=Math.floor(E*N),oe=(U%N+N)%N,ce=J%N,ye=Math.floor(U/N),_e=Math.floor(J/N);k[L]={minWrap:ye,maxWrap:_e,minTileXWrapped:oe,maxTileXWrapped:ce,minTileY:W,maxTileY:Y}}return k}}class ze extends zt{constructor(i,c,m,v){super(i,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.ad(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new o.k(new o.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const E=this.tiles[v];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,m=!0)}m&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ue extends zt{constructor(i,c,m,v){super(i,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((E=>!Array.isArray(E)||E.length!==2||E.some((k=>typeof k!="number"))))||this.fire(new o.k(new o.ae(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ae(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.ae(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ae(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ae(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,m=c.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(c,this.canvas,m.RGBA,{premultiply:!0}),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let v=!1;for(const E in this.tiles){const k=this.tiles[E];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const le={},pe=w=>{switch(w){case"geojson":return Wt;case"image":return zt;case"raster":return Be;case"raster-dem":return rt;case"vector":return Ii;case"video":return ze;case"canvas":return ue}return le[w]},Me="RTLPluginLoaded";class Ae extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ir()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return o._(this,arguments,void 0,(function*(c,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Me))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Je=null;function Ze(){return Je||(Je=new Ae),Je}var Ve,it;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(Ve||(Ve={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(it||(it={}));class At{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=i,this.uid=o.af(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(i){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(i||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:i,fadingDirection:c,fadingParentID:m,fadeEndTime:v}){this.resetFadeLogic(),this.fadingRole=i,this.fadingDirection=c,this.fadingParentID=m,this.fadeEndTime=v}setSelfFadeLogic(i){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=i}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=B(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData,this.latestFeatureIndex.encoding=i.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(v,E){const k={};if(!E)return k;for(const L of v){const N=L.layerIds.map((U=>E.getLayer(U))).filter(Boolean);if(N.length!==0){L.layers=N,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map((U=>N.filter((W=>W.id===U))[0])));for(const U of N)k[U.id]=L}}return k})(i.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof o.ah){if(this.hasSymbolBuckets=!0,!m)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof o.ah&&E.hasRTLText){this.hasRTLText=!0,Ze().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(E))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),this.dashPositions=i.dashPositions}else this.collisionBoxArray=new o.ag}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,m,v,E,k,L,N,U,W,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:E,scale:k,tileSize:this.tileSize,pixelPosMatrix:W,transform:N,params:L,queryPadding:this.queryPadding*U,getElevation:J},i,c,m):{}}querySourceFeatures(i,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),E=c&&c.sourceLayer?c.sourceLayer:"",k=v[o.ai]||v[E];if(!k)return;const L=o.aj(c==null?void 0:c.filter,c==null?void 0:c.globalState),{z:N,x:U,y:W}=this.tileID.canonical,J={z:N,x:U,y:W};for(let Y=0;Y<k.length;Y++){const oe=k.feature(Y);if(L.needGeometry){const _e=o.ak(oe,!0);if(!L.filter(new o.H(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!L.filter(new o.H(this.tileID.overscaledZ),oe))continue;const ce=m.getId(oe,E),ye=new o.al(oe,N,U,W,ce);ye.tile=J,i.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const m=o.am(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const E=this.expirationTime-c;E?this.expirationTime=m+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const E=this.buckets[v],k=E.layers[0].sourceLayer||o.ai,L=m[k],N=i[k];if(!L||!N||Object.keys(N).length===0)continue;E.update(N,L,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=c&&c.style&&c.style.getLayer(v);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(E)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(i){this.symbolFadeHoldUntil=B()+i}setDependencies(i,c){const m={};for(const v of c)m[v]=!0;this.dependencies[i]=m}hasDependency(i,c){for(const m of i){const v=this.dependencies[m];if(v){for(const E of c)if(v[E])return!0}}return!1}}class Pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,m){const v=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},o.e(this.stateChanges[i][v],m),this.deletedStates[i]===null){this.deletedStates[i]={};for(const E in this.state[i])E!==v&&(this.deletedStates[i][E]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const E in this.state[i][v])m[E]||(this.deletedStates[i][v][E]=null)}else for(const E in m)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][E]===null&&delete this.deletedStates[i][v][E]}removeFeatureState(i,c,m){if(this.deletedStates[i]===null)return;const v=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&c!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,c){const m=String(c),v=o.e({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const E=this.deletedStates[i][c];if(E===null)return{};for(const k in E)delete v[k]}return v}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const k in this.stateChanges[v])this.state[v][k]||(this.state[v][k]={}),o.e(this.state[v][k],this.stateChanges[v][k]),E[k]=this.state[v][k];m[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(this.deletedStates[v]===null)for(const k in this.state[v])E[k]={},this.state[v][k]={};else for(const k in this.deletedStates[v]){if(this.deletedStates[v][k]===null)this.state[v][k]={};else for(const L of Object.keys(this.deletedStates[v][k]))delete this.state[v][k][L];E[k]=this.state[v][k]}m[v]=m[v]||{},o.e(m[v],E)}this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0&&i.setFeatureState(m,c)}}const Xt=89.25;function or(w,i){const c=o.an(i.lat,-o.ao,o.ao);return new o.P(o.Y(i.lng)*w,o.X(c)*w)}function Mr(w,i){return new o.a9(i.x/w,i.y/w).toLngLat()}function Kr(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.ap(90-w.pitch)),Math.tan(o.ap(Xt-w.pitch)))}function Ur(w,i){const c=w.canonical,m=i/o.aq(c.z),v=c.x+Math.pow(2,c.z)*w.wrap,E=o.ar(new Float64Array(16));return o.O(E,E,[v*m,c.y*m,0]),o.Q(E,E,[m/o.a5,m/o.a5,1]),E}function tt(w,i,c,m,v){const E=o.a9.fromLngLat(w,i),k=v*o.as(1,w.lat),{x:L,y:N,z:U}=sn(c,m);return new o.a9(E.x+k*-L,E.y+k*-N,E.z+k*-U)}function sn(w,i){const c=o.ap(w),m=o.ap(i),v=Math.cos(-c),E=Math.sin(c);return{x:E*Math.sin(m),y:-E*Math.cos(m),z:v}}function ri(w,i,c){const m=i.intersectsFrustum(w);if(!c||m===0)return m;const v=i.intersectsPlane(c);return v===0?0:m===2&&v===2?2:1}function Ir(w,i,c){let m=0;const v=(c-i)/10;for(let E=0;E<10;E++)m+=v*Math.pow(Math.cos(i+(E+.5)/10*(c-i)),w);return m}function Zr(w,i){return function(c,m,v,E,k){const L=2*((w-1)/o.at(Math.cos(o.ap(Xt-k))/Math.cos(o.ap(Xt)))-1),N=Math.acos(v/E),U=2*Ir(L-1,0,o.ap(k/2)),W=Math.min(o.ap(Xt),N+o.ap(k/2)),J=Ir(L-1,Math.min(W,N-o.ap(k/2)),W),Y=Math.atan(m/v),oe=Math.hypot(m,v);let ce=c;return ce+=o.at(E/oe/Math.max(.5,Math.cos(o.ap(k/2)))),ce+=L*o.at(Math.cos(Y))/2,ce-=o.at(Math.max(1,J/U/i))/2,ce}}const Vn=Zr(9.314,3);function yn(w,i){const c=(i.roundZoom?Math.round:Math.floor)(w.zoom+o.at(w.tileSize/i.tileSize));return Math.max(0,c)}function ln(w,i){const c=w.getCameraFrustum(),m=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),E=o.a9.fromLngLat(w.center,w.elevation);v.z=E.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const k=w.getCoveringTilesDetailsProvider(),L=k.allowVariableZoom(w,i),N=yn(w,i),U=i.minzoom||0,W=i.maxzoom!==void 0?i.maxzoom:w.maxZoom,J=Math.min(Math.max(0,N),W),Y=Math.pow(2,J),oe=[Y*v.x,Y*v.y,0],ce=[Y*E.x,Y*E.y,0],ye=Math.hypot(E.x-v.x,E.y-v.y),_e=Math.abs(E.z-v.z),ve=Math.hypot(ye,_e),we=ke=>({zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Le=[],Se=[];if(w.renderWorldCopies&&k.allowWorldCopies())for(let ke=1;ke<=3;ke++)Le.push(we(-ke)),Le.push(we(ke));for(Le.push(we(0));Le.length>0;){const ke=Le.pop(),Fe=ke.x,Te=ke.y;let Ge=ke.fullyVisible;const ht={x:Fe,y:Te,z:ke.zoom},at=k.getTileBoundingVolume(ht,ke.wrap,w.elevation,i);if(!Ge){const Vt=ri(c,at,m);if(Vt===0)continue;Ge=Vt===2}const ot=k.distanceToTile2d(v.x,v.y,ht,at);let st=N;L&&(st=(i.calculateTileZoom||Vn)(w.zoom+o.at(w.tileSize/i.tileSize),ot,_e,ve,w.fov)),st=(i.roundZoom?Math.round:Math.floor)(st),st=Math.max(0,st);const Nt=Math.min(st,W);if(ke.wrap=k.getWrap(E,ht,ke.wrap),ke.zoom>=Nt){if(ke.zoom<U)continue;const Vt=J-ke.zoom,It=oe[0]-.5-(Fe<<Vt),Yt=oe[1]-.5-(Te<<Vt),zr=i.reparseOverscaled?Math.max(ke.zoom,st):ke.zoom;Se.push({tileID:new o.a2(ke.zoom===W?zr:ke.zoom,ke.wrap,ke.zoom,Fe,Te),distanceSq:o.au([ce[0]-.5-Fe,ce[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(It*It+Yt*Yt)})}else for(let Vt=0;Vt<4;Vt++)Le.push({zoom:ke.zoom+1,x:(Fe<<1)+Vt%2,y:(Te<<1)+(Vt>>1),wrap:ke.wrap,fullyVisible:Ge})}return Se.sort(((ke,Fe)=>ke.distanceSq-Fe.distanceSq)).map((ke=>ke.tileID))}const ur=o.aa.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function Ie(w){return w==="raster"||w==="image"||w==="video"}function Ye(w,i,c,m,v,E,k){if(!i.hasData())return!1;const{tileID:L,fadingRole:N,fadingDirection:U,fadingParentID:W}=i;if(N===Ve.Base&&U===it.Incoming&&W)return c[W.key]=W,!0;const J=Math.max(L.overscaledZ-v,E);for(let Y=L.overscaledZ-1;Y>=J;Y--){const oe=L.scaledTo(Y),ce=w.getLoadedTile(oe);if(ce)return i.setCrossFadeLogic({fadingRole:Ve.Base,fadingDirection:it.Incoming,fadingParentID:ce.tileID,fadeEndTime:m+k}),ce.setCrossFadeLogic({fadingRole:Ve.Parent,fadingDirection:it.Departing,fadeEndTime:m+k}),c[oe.key]=oe,!0}return!1}function mt(w,i,c,m,v,E){if(!i.hasData())return!1;const k=i.tileID.children(v);let L=We(w,i,k,c,m,v,E);if(L)return!0;for(const N of k)We(w,i,N.children(v),c,m,v,E)&&(L=!0);return L}function We(w,i,c,m,v,E,k){if(c[0].overscaledZ>=E)return!1;let L=!1;for(const N of c){const U=w.getLoadedTile(N);if(!U)continue;const{fadingRole:W,fadingDirection:J,fadingParentID:Y}=U;W===Ve.Base&&J===it.Departing&&Y||(U.setCrossFadeLogic({fadingRole:Ve.Base,fadingDirection:it.Departing,fadingParentID:i.tileID,fadeEndTime:v+k}),i.setCrossFadeLogic({fadingRole:Ve.Parent,fadingDirection:it.Incoming,fadeEndTime:v+k})),m[N.key]=N,L=!0}return L}function Gt(w,i,c,m){const v=w.tileID;return!!w.selfFading||!w.hasData()&&!!i.has(v)&&(w.setSelfFadeLogic(c+m),!0)}function cr(w,i){var c;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let m=i.tileID.canonical.x-w.tileID.canonical.x;const v=i.tileID.canonical.y-w.tileID.canonical.y,E=Math.pow(2,w.tileID.canonical.z),k=i.tileID.key;m===0&&v===0||Math.abs(v)>1||(Math.abs(m)>1&&(Math.abs(m+E)===1?m+=E:Math.abs(m-E)===1&&(m-=E)),i.dem&&w.dem&&(w.dem.backfillBorder(i.dem,m,v),!((c=w.neighboringTiles)===null||c===void 0)&&c[k]&&(w.neighboringTiles[k].backfilled=!0)))}class Sr{constructor(){this._tiles={}}handleWrapJump(i){const c={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+i),c[v.tileID.key]=v}this._tiles=c}setFeatureState(i,c){for(const m in this._tiles)this._tiles[m].setFeatureState(i,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(i=!1){return i?Object.values(this._tiles).map((c=>c.tileID)).sort(o.aw).map((c=>c.key)):Object.keys(this._tiles)}getTileById(i){return this._tiles[i]}setTile(i,c){this._tiles[i]=c}deleteTileById(i){delete this._tiles[i]}getLoadedTile(i){const c=this.getTileById(i.key);return c!=null&&c.hasData()?c:null}isIdRenderable(i,c=!1){var m;return(m=this.getTileById(i))===null||m===void 0?void 0:m.isRenderable(c)}getRenderableIds(i=0,c){const m=[];for(const v of this.getAllIds())this.isIdRenderable(v,c)&&m.push(this.getTileById(v));return c?m.sort(((v,E)=>{const k=v.tileID,L=E.tileID,N=new o.P(k.canonical.x,k.canonical.y)._rotate(-i),U=new o.P(L.canonical.x,L.canonical.y)._rotate(-i);return k.overscaledZ-L.overscaledZ||U.y-N.y||U.x-N.x})).map((v=>v.tileID.key)):m.map((v=>v.tileID)).sort(o.aw).map((v=>v.key))}}class hr extends o.E{constructor(i,c,m){super(),this.id=i,this.dispatcher=m,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,E,k,L)=>{const N=new(pe(E.type))(v,E,k,L);if(N.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${N.id}`);return N})(i,c,m,this),this._inViewTiles=new Sr,this._outOfViewCache=new o.ax(0,(v=>this._unloadTile(v))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Pt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i),this._inViewTiles=new Sr}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,m){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,m)}catch(v){i.state="errored",v.status!==404?this._source.fire(new o.k(v,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new o.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(i),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(i){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,i)}hasRenderableParent(i){const c=i.overscaledZ-1;if(c>=this._source.minzoom){const m=this.getLoadedTile(i.scaledTo(c));if(m)return this._inViewTiles.isIdRenderable(m.tileID.key)}return!1}reload(i,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const m of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(m);c&&!this._source.shouldReloadTile(v,c)||(i?this._reloadTile(m,"expired"):v.state!=="errored"&&this._reloadTile(m,"reloading"))}}}_reloadTile(i,c){return o._(this,void 0,void 0,(function*(){const m=this._inViewTiles.getTileById(i);m&&(m.state!=="loading"&&(m.state=c),yield this._loadTile(m,i,c))}))}_tileLoaded(i,c,m){i.timeAdded=B(),i.selfFading&&(i.fadeEndTime=i.timeAdded+this._rasterFadeDuration),m==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&(function(v,E){var k,L;const N=E.getRenderableIds();for(const U of N){if(!v.neighboringTiles||!v.neighboringTiles[U])continue;const W=E.getTileById(U);v.neighboringTiles[U].backfilled||cr(v,W),!((L=(k=W.neighboringTiles)===null||k===void 0?void 0:k[v.tileID.key])===null||L===void 0)&&L.backfilled||cr(W,v)}})(i,this._inViewTiles),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:i,coord:i.tileID}))}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._inViewTiles.getTileById(i)}_retainLoadedChildren(i,c){const m=this._getLoadedDescendents(c),v=new Set;for(const E of c){const k=m[E.key];if(!(k!=null&&k.length)){v.add(E);continue}const L=E.overscaledZ+hr.maxOverzooming,N=k.filter((J=>J.tileID.overscaledZ<=L));if(!N.length){v.add(E);continue}const U=Math.min(...N.map((J=>J.tileID.overscaledZ))),W=N.filter((J=>J.tileID.overscaledZ===U)).map((J=>J.tileID));for(const J of W)i[J.key]=J;this._areDescendentsComplete(W,U,E.overscaledZ)||v.add(E)}return v}_getLoadedDescendents(i){var c;const m={};for(const v of this._inViewTiles.getAllTiles().filter((E=>E.hasData())))for(const E of i)v.tileID.isChildOf(E)&&(m[c=E.key]||(m[c]=[])).push(v);return m}_areDescendentsComplete(i,c,m){return i.length===1&&i[0].isOverscaled()?i[0].overscaledZ===c:Math.pow(4,c-m)===i.length}getLoadedTile(i){return this._inViewTiles.getLoadedTile(i)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._outOfViewCache.setMaxSize(E)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);this._prevLng=i,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(i,c){if(!this._sourceLoaded||this._paused)return;let m;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new o.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(m=ln(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?i.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter((N=>this._source.hasTile(N))))):m=[],this.usedForTerrain&&(m=this._addTerrainIdealTiles(m));const v=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,v&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=yn(i,this._source),k=this._updateRetainedTiles(m,E),L=Ie(this._source.type);L&&this._rasterFadeDuration>0&&!c&&(function(N,U,W,J,Y,oe,ce){const ye=B(),_e=o.av(U);for(const ve of U){const we=N.getTileById(ve.key);we.fadingDirection!==it.Departing&&we.fadeOpacity!==0||we.resetFadeLogic(),Ye(N,we,W,ye,J,Y,ce)||mt(N,we,W,ye,oe,ce)||Gt(we,_e,ye,ce)||we.resetFadeLogic()}})(this._inViewTiles,m,k,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),L?this._cleanUpRasterTiles(k):this._cleanUpVectorTiles(k)}_cleanUpRasterTiles(i){for(const c of this._inViewTiles.getAllIds())i[c]||this._removeTile(c)}_cleanUpVectorTiles(i){for(const c of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(c);i[c]?m.clearSymbolFadeHold():m.hasSymbolBuckets?m.holdingForSymbolFade()?m.symbolFadeFinished()&&this._removeTile(c):m.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(i){const c=[];for(const m of i)if(m.canonical.z>this._source.minzoom){const v=m.scaledTo(m.canonical.z-1);c.push(v);const E=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));c.push(E)}return i.concat(c)}releaseSymbolFadeTiles(){for(const i of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(i).holdingForSymbolFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var m;const v=new Set;for(const U of i)this._addTile(U).hasData()||v.add(U);const E=i.reduce(((U,W)=>(U[W.key]=W,U)),{}),k=this._retainLoadedChildren(E,v),L={},N=Math.max(c-hr.maxUnderzooming,this._source.minzoom);for(const U of k){let W=this._inViewTiles.getTileById(U.key),J=W==null?void 0:W.wasRequested();for(let Y=U.overscaledZ-1;Y>=N;--Y){const oe=U.scaledTo(Y);if(L[oe.key])break;if(L[oe.key]=!0,W=this.getTile(oe),!W&&J&&(W=this._addTile(oe)),W){const ce=W.hasData();if((ce||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||J)&&(E[oe.key]=oe),J=W.wasRequested(),ce)break}}}return E}_addTile(i){let c=this._inViewTiles.getTileById(i.key);if(c)return c;c=this._outOfViewCache.getAndRemove(i),c&&(c.resetFadeLogic(),this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null));const m=c;return c||(c=new At(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._inViewTiles.setTile(i.key,c),m||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){this._clearTileReloadTimer(i);const m=c.getExpiryTimeout();m&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),m))}_clearTileReloadTimer(i){const c=this._timers[i];c&&(clearTimeout(c),delete this._timers[i])}_resetTileReloadTimers(){for(const i in this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(const i of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(i);this._setTileReloadTimer(i,c)}}refreshTiles(i){for(const c of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||m.state=="errored")&&i.some((v=>v.equals(m.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(i){const c=this._inViewTiles.getTileById(i);c&&(c.uses--,this._inViewTiles.deleteTileById(i),this._clearTileReloadTimer(i),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){i.dataType==="source"&&(i.sourceDataType!=="metadata"?i.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(i.sourceDataChanged,i.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i of this._inViewTiles.getAllIds())this._removeTile(i);this._outOfViewCache.reset()}tilesIn(i,c,m){const v=[],E=this.transform;if(!E)return v;const k=E.getCoveringTilesDetailsProvider().allowWorldCopies(),L=m?E.getCameraQueryGeometry(i):i,N=oe=>E.screenPointToMercatorCoordinate(oe,this.terrain),U=this.transformBbox(i,N,!k),W=this.transformBbox(L,N,!k),J=this.getIds(),Y=o.aa.fromPoints(W);for(let oe=0;oe<J.length;oe++){const ce=this._inViewTiles.getTileById(J[oe]);if(ce.holdingForSymbolFade())continue;const ye=k?[ce.tileID]:[ce.tileID.unwrapTo(-1),ce.tileID.unwrapTo(0)],_e=Math.pow(2,E.zoom-ce.tileID.overscaledZ),ve=c*ce.queryPadding*o.a5/ce.tileSize/_e;for(const we of ye){const Le=Y.map((Se=>we.getTilePoint(new o.a9(Se.x,Se.y))));if(Le.expandBy(ve),Le.intersects(ur)){const Se=U.map((Fe=>we.getTilePoint(Fe))),ke=W.map((Fe=>we.getTilePoint(Fe)));v.push({tile:ce,tileID:k?we:we.unwrapTo(0),queryGeometry:Se,cameraQueryGeometry:ke,scale:_e})}}}return v}transformBbox(i,c,m){let v=i.map(c);if(m){const E=o.aa.fromPoints(i);E.shrinkBy(.001*Math.min(E.width(),E.height()));const k=E.map(c);o.aa.fromPoints(v).covers(k)||(v=v.map((L=>L.x>.5?new o.a9(L.x-1,L.y,L.z):L)))}return v}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map((m=>this._inViewTiles.getTileById(m).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!Ie(this._source.type)||!(function(i,c){if(c<=0)return!1;const m=B();for(const v of i.getAllTiles())if(v.fadeEndTime>=m)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(i){this._rasterFadeDuration=i}setFeatureState(i,c,m){this._state.updateState(i=i||o.ai,c,m)}removeFeatureState(i,c,m){this._state.removeFeatureState(i=i||o.ai,c,m)}getFeatureState(i,c){return this._state.getState(i=i||o.ai,c)}setDependencies(i,c,m){const v=this._inViewTiles.getTileById(i);v&&v.setDependencies(c,m)}reloadTilesForDependencies(i,c){for(const m of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(m).hasDependency(i,c)&&this._reloadTile(m,"reloading");this._outOfViewCache.filter((m=>!m.hasDependency(i,c)))}areTilesLoaded(){for(const i of this._inViewTiles.getAllTiles())if(i.state!=="loaded"&&i.state!=="errored")return!1;return!0}}hr.maxUnderzooming=10,hr.maxOverzooming=3;class xt{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=o.an(i,0,1);let c=1,m=this._distances[c];const v=i*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const E=c-1,k=this._distances[E],L=m-k,N=L>0?(v-k)/L:0;return this.points[E].mult(1-N).add(this.points[c].mult(N))}}function Bt(w,i){let c=!0;return w==="always"||w!=="never"&&i!=="never"||(c=!1),c}class Zt{constructor(i,c,m){const v=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(c/m);for(let k=0;k<this.xCellCount*this.yCellCount;k++)v.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,m,v,E){this._forEachCell(c,m,v,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(E)}insertCircle(i,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,c,m,v,E,k){this.boxCells[E].push(k)}_insertCircleCell(i,c,m,v,E,k){this.circleCells[E].push(k)}_query(i,c,m,v,E,k,L){if(m<0||i>this.width||v<0||c>this.height)return[];const N=[];if(i<=0&&c<=0&&this.width<=m&&this.height<=v){if(E)return[{key:null,x1:i,y1:c,x2:m,y2:v}];for(let U=0;U<this.boxKeys.length;U++)N.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const W=this.circles[3*U],J=this.circles[3*U+1],Y=this.circles[3*U+2];N.push({key:this.circleKeys[U],x1:W-Y,y1:J-Y,x2:W+Y,y2:J+Y})}}else this._forEachCell(i,c,m,v,this._queryCell,N,{hitTest:E,overlapMode:k,seenUids:{box:{},circle:{}}},L);return N}query(i,c,m,v){return this._query(i,c,m,v,!1,null)}hitTest(i,c,m,v,E,k){return this._query(i,c,m,v,!0,E,k).length>0}hitTestCircle(i,c,m,v,E){const k=i-m,L=i+m,N=c-m,U=c+m;if(L<0||k>this.width||U<0||N>this.height)return!1;const W=[];return this._forEachCell(k,N,L,U,this._queryCellCircle,W,{hitTest:!0,overlapMode:v,circle:{x:i,y:c,radius:m},seenUids:{box:{},circle:{}}},E),W.length>0}_queryCell(i,c,m,v,E,k,L,N){const{seenUids:U,hitTest:W,overlapMode:J}=L,Y=this.boxCells[E];if(Y!==null){const ce=this.bboxes;for(const ye of Y)if(!U.box[ye]){U.box[ye]=!0;const _e=4*ye,ve=this.boxKeys[ye];if(i<=ce[_e+2]&&c<=ce[_e+3]&&m>=ce[_e+0]&&v>=ce[_e+1]&&(!N||N(ve))&&(!W||!Bt(J,ve.overlapMode))&&(k.push({key:ve,x1:ce[_e],y1:ce[_e+1],x2:ce[_e+2],y2:ce[_e+3]}),W))return!0}}const oe=this.circleCells[E];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!U.circle[ye]){U.circle[ye]=!0;const _e=3*ye,ve=this.circleKeys[ye];if(this._circleAndRectCollide(ce[_e],ce[_e+1],ce[_e+2],i,c,m,v)&&(!N||N(ve))&&(!W||!Bt(J,ve.overlapMode))){const we=ce[_e],Le=ce[_e+1],Se=ce[_e+2];if(k.push({key:ve,x1:we-Se,y1:Le-Se,x2:we+Se,y2:Le+Se}),W)return!0}}}return!1}_queryCellCircle(i,c,m,v,E,k,L,N){const{circle:U,seenUids:W,overlapMode:J}=L,Y=this.boxCells[E];if(Y!==null){const ce=this.bboxes;for(const ye of Y)if(!W.box[ye]){W.box[ye]=!0;const _e=4*ye,ve=this.boxKeys[ye];if(this._circleAndRectCollide(U.x,U.y,U.radius,ce[_e+0],ce[_e+1],ce[_e+2],ce[_e+3])&&(!N||N(ve))&&!Bt(J,ve.overlapMode))return k.push(!0),!0}}const oe=this.circleCells[E];if(oe!==null){const ce=this.circles;for(const ye of oe)if(!W.circle[ye]){W.circle[ye]=!0;const _e=3*ye,ve=this.circleKeys[ye];if(this._circlesCollide(ce[_e],ce[_e+1],ce[_e+2],U.x,U.y,U.radius)&&(!N||N(ve))&&!Bt(J,ve.overlapMode))return k.push(!0),!0}}}_forEachCell(i,c,m,v,E,k,L,N){const U=this._convertToXCellCoord(i),W=this._convertToYCellCoord(c),J=this._convertToXCellCoord(m),Y=this._convertToYCellCoord(v);for(let oe=U;oe<=J;oe++)for(let ce=W;ce<=Y;ce++)if(E.call(this,i,c,m,v,this.xCellCount*ce+oe,k,L,N))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,m,v,E,k){const L=v-i,N=E-c,U=m+k;return U*U>L*L+N*N}_circleAndRectCollide(i,c,m,v,E,k,L){const N=(k-v)/2,U=Math.abs(i-(v+N));if(U>N+m)return!1;const W=(L-E)/2,J=Math.abs(c-(E+W));if(J>W+m)return!1;if(U<=N||J<=W)return!0;const Y=U-N,oe=J-W;return Y*Y+oe*oe<=m*m}}function dr(w,i,c){const m=o.N();if(!w){const{vecSouth:J,vecEast:Y}=Yr(i),oe=P();oe[0]=Y[0],oe[1]=Y[1],oe[2]=J[0],oe[3]=J[1],v=oe,(W=(k=(E=oe)[0])*(U=E[3])-(N=E[2])*(L=E[1]))&&(v[0]=U*(W=1/W),v[1]=-L*W,v[2]=-N*W,v[3]=k*W),m[0]=oe[0],m[1]=oe[1],m[4]=oe[2],m[5]=oe[3]}var v,E,k,L,N,U,W;return o.Q(m,m,[1/c,1/c,1]),m}function Fr(w,i,c,m){if(w){const v=o.N();if(!i){const{vecSouth:E,vecEast:k}=Yr(c);v[0]=k[0],v[1]=k[1],v[4]=E[0],v[5]=E[1]}return o.Q(v,v,[m,m,1]),v}return c.pixelsToClipSpaceMatrix}function Yr(w){const i=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),E=Math.sin(w.bearingInRadians),k=o.aC();k[0]=-v*m*c-E*i,k[1]=-E*m*c+v*i;const L=o.aD(k);L<1e-9?o.aE(k):o.aF(k,k,1/L);const N=o.aC();N[0]=v*m*i-E*c,N[1]=E*m*i+v*c;const U=o.aD(N);return U<1e-9?o.aE(N):o.aF(N,N,1/U),{vecEast:N,vecSouth:k}}function mr(w,i,c,m){let v;m?(v=[w,i,m(w,i),1],o.aH(v,v,c)):(v=[w,i,0,1],$n(v,v,c));const E=v[3];return{point:new o.P(v[0]/E,v[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function ni(w,i){return .5+w/i*.5}function vn(w,i){return w.x>=-i[0]&&w.x<=i[0]&&w.y>=-i[1]&&w.y<=i[1]}function Tn(w,i,c,m,v,E,k,L,N,U,W,J,Y){const oe=c?w.textSizeData:w.iconSizeData,ce=o.ay(oe,i.transform.zoom),ye=[256/i.width*2+1,256/i.height*2+1],_e=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;_e.clear();const ve=w.lineVertexArray,we=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,Le=i.transform.width/i.transform.height;let Se=!1;for(let ke=0;ke<we.length;ke++){const Fe=we.get(ke);if(Fe.hidden||Fe.writingMode===o.az.vertical&&!Se){Da(Fe.numGlyphs,_e);continue}Se=!1;const Te=new o.P(Fe.anchorX,Fe.anchorY),Ge={getElevation:Y,pitchedLabelPlaneMatrix:m,lineVertexArray:ve,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:Te,unwrappedTileID:N,width:U,height:W,translation:J},ht=Oo(Fe.anchorX,Fe.anchorY,Ge);if(!vn(ht.point,ye)){Da(Fe.numGlyphs,_e);continue}const at=ni(i.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),ot=o.aA(oe,ce,Fe),st=E?ot*i.transform.getPitchedTextCorrection(Fe.anchorX,Fe.anchorY,N)/at:ot*at,Nt=La({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Fe,fontSize:st,flip:!1,keepUpright:k,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:L});Se=Nt.useVertical,(Nt.notEnoughRoom||Se||Nt.needsFlipping&&La({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:v,symbol:Fe,fontSize:st,flip:!0,keepUpright:k,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:Le,rotateToLine:L}).notEnoughRoom)&&Da(Fe.numGlyphs,_e)}c?w.text.dynamicLayoutVertexBuffer.updateData(_e):w.icon.dynamicLayoutVertexBuffer.updateData(_e)}function Ja(w,i,c,m,v,E,k,L){const N=E.glyphStartIndex+E.numGlyphs,U=E.lineStartIndex,W=E.lineStartIndex+E.lineLength,J=i.getoffsetX(E.glyphStartIndex),Y=i.getoffsetX(N-1),oe=Rn(w*J,c,m,v,E.segment,U,W,L,k);if(!oe)return null;const ce=Rn(w*Y,c,m,v,E.segment,U,W,L,k);return ce?L.projectionCache.anyProjectionOccluded?null:{first:oe,last:ce}:null}function bn(w,i,c,m){return w===o.az.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*m?{useVertical:!0}:(w===o.az.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function La(w){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:c,symbol:m,fontSize:v,flip:E,keepUpright:k,glyphOffsetArray:L,dynamicLayoutVertexArray:N,aspectRatio:U,rotateToLine:W}=w,J=v/24,Y=m.lineOffsetX*J,oe=m.lineOffsetY*J;let ce;if(m.numGlyphs>1){const ye=m.glyphStartIndex+m.numGlyphs,_e=m.lineStartIndex,ve=m.lineStartIndex+m.lineLength,we=Ja(J,L,Y,oe,E,m,W,i);if(!we)return{notEnoughRoom:!0};const Le=Io(we.first.point.x,we.first.point.y,i,c),Se=Io(we.last.point.x,we.last.point.y,i,c);if(k&&!E){const ke=bn(m.writingMode,Le,Se,U);if(ke)return ke}ce=[we.first];for(let ke=m.glyphStartIndex+1;ke<ye-1;ke++){const Fe=Rn(J*L.getoffsetX(ke),Y,oe,E,m.segment,_e,ve,i,W);if(!Fe)return{notEnoughRoom:!0};ce.push(Fe)}ce.push(we.last)}else{if(k&&!E){const _e=Qr(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,ve=m.lineStartIndex+m.segment+1,we=new o.P(i.lineVertexArray.getx(ve),i.lineVertexArray.gety(ve)),Le=Qr(we.x,we.y,i),Se=Le.signedDistanceFromCamera>0?Le.point:Yi(i.tileAnchorPoint,we,_e,1,i),ke=Io(_e.x,_e.y,i,c),Fe=Io(Se.x,Se.y,i,c),Te=bn(m.writingMode,ke,Fe,U);if(Te)return Te}const ye=Rn(J*L.getoffsetX(m.glyphStartIndex),Y,oe,E,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,i,W);if(!ye||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[ye]}for(const ye of ce)o.aG(N,ye.point,ye.angle);return{}}function Yi(w,i,c,m,v){const E=w.add(w.sub(i)._unit()),k=Qr(E.x,E.y,v).point,L=c.sub(k);return c.add(L._mult(m/L.mag()))}function Oi(w,i,c){const m=i.projectionCache;if(m.projections[w])return m.projections[w];const v=new o.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),E=Qr(v.x,v.y,i);if(E.signedDistanceFromCamera>0)return m.projections[w]=E.point,m.anyProjectionOccluded=m.anyProjectionOccluded||E.isOccluded,E.point;const k=w-c.direction;return Yi(c.distanceFromAnchor===0?i.tileAnchorPoint:new o.P(i.lineVertexArray.getx(k),i.lineVertexArray.gety(k)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Qr(w,i,c){const m=w+c.translation[0],v=i+c.translation[1];let E;return c.pitchWithMap?(E=mr(m,v,c.pitchedLabelPlaneMatrix,c.getElevation),E.isOccluded=!1):(E=c.transform.projectTileCoordinates(m,v,c.unwrappedTileID,c.getElevation),E.point.x=(.5*E.point.x+.5)*c.width,E.point.y=(.5*-E.point.y+.5)*c.height),E}function Io(w,i,c,m){if(c.pitchWithMap){const v=[w,i,0,1];return o.aH(v,v,m),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-i/c.height*2}}function Oo(w,i,c){return c.transform.projectTileCoordinates(w,i,c.unwrappedTileID,c.getElevation)}function So(w,i,c){return w._unit()._perp()._mult(i*c)}function jr(w,i,c,m,v,E,k,L,N){if(L.projectionCache.offsets[w])return L.projectionCache.offsets[w];const U=c.add(i);if(w+N.direction<m||w+N.direction>=v)return L.projectionCache.offsets[w]=U,U;const W=Oi(w+N.direction,L,N),J=So(W.sub(c),k,N.direction),Y=c.add(J),oe=W.add(J);return L.projectionCache.offsets[w]=o.aI(E,U,Y,oe)||U,L.projectionCache.offsets[w]}function Rn(w,i,c,m,v,E,k,L,N){const U=m?w-i:w+i;let W=U>0?1:-1,J=0;m&&(W*=-1,J=Math.PI),W<0&&(J+=Math.PI);let Y,oe=W>0?E+v:E+v+1;L.projectionCache.cachedAnchorPoint?Y=L.projectionCache.cachedAnchorPoint:(Y=Qr(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=Y);let ce,ye,_e=Y,ve=Y,we=0,Le=0;const Se=Math.abs(U),ke=[];let Fe;for(;we+Le<=Se;){if(oe+=W,oe<E||oe>=k)return null;we+=Le,ve=_e,ye=ce;const ht={absOffsetX:Se,direction:W,distanceFromAnchor:we,previousVertex:ve};if(_e=Oi(oe,L,ht),c===0)ke.push(ve),Fe=_e.sub(ve);else{let at;const ot=_e.sub(ve);at=ot.mag()===0?So(Oi(oe+W,L,ht).sub(_e),c,W):So(ot,c,W),ye||(ye=ve.add(at)),ce=jr(oe,at,_e,E,k,ye,c,L,ht),ke.push(ye),Fe=ce.sub(ye)}Le=Fe.mag()}const Te=Fe._mult((Se-we)/Le)._add(ye||ve),Ge=J+Math.atan2(_e.y-ve.y,_e.x-ve.x);return ke.push(Te),{point:Te,angle:N?Ge:0,path:ke}}const $i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Da(w,i){for(let c=0;c<w;c++){const m=i.length;i.resize(m+4),i.float32.set($i,3*m)}}function $n(w,i,c){const m=i[0],v=i[1];return w[0]=c[0]*m+c[4]*v+c[12],w[1]=c[1]*m+c[5]*v+c[13],w[3]=c[3]*m+c[7]*v+c[15],w}const jn=100;class Ol{constructor(i,c=new Zt(i.width+200,i.height+200,25),m=new Zt(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=m,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+jn,this.screenBottomBoundary=i.height+jn,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,m,v,E,k,L,N,U,W,J,Y){const oe=this.projectAndGetPerspectiveRatio(i.anchorPointX+N[0],i.anchorPointY+N[1],E,W,Y),ce=m*oe.perspectiveRatio;let ye;if(k||L)ye=this._projectCollisionBox(i,ce,v,E,k,L,N,oe,W,J,Y);else{const Fe=oe.x+(J?J.x*ce:0),Te=oe.y+(J?J.y*ce:0);ye={allPointsOccluded:!1,box:[Fe+i.x1*ce,Te+i.y1*ce,Fe+i.x2*ce,Te+i.y2*ce]}}const[_e,ve,we,Le]=ye.box,Se=k?ye.allPointsOccluded:oe.isOccluded;let ke=Se;return ke||(ke=oe.perspectiveRatio<this.perspectiveRatioCutoff),ke||(ke=!this.isInsideGrid(_e,ve,we,Le)),ke||c!=="always"&&this.grid.hitTest(_e,ve,we,Le,c,U)?{box:[_e,ve,we,Le],placeable:!1,offscreen:!1,occluded:Se}:{box:[_e,ve,we,Le],placeable:!0,offscreen:this.isOffscreen(_e,ve,we,Le),occluded:Se}}placeCollisionCircles(i,c,m,v,E,k,L,N,U,W,J,Y,oe,ce){const ye=[],_e=new o.P(c.anchorX,c.anchorY),ve=this.getPerspectiveRatio(_e.x,_e.y,k,ce),we=(U?E*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,k)/ve:E*ve)/o.aM,Le={getElevation:ce,pitchedLabelPlaneMatrix:L,lineVertexArray:m,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:_e,unwrappedTileID:k,width:this.transform.width,height:this.transform.height,translation:oe},Se=Ja(we,v,c.lineOffsetX*we,c.lineOffsetY*we,!1,c,!1,Le);let ke=!1,Fe=!1,Te=!0;if(Se){const Ge=.5*J*ve+Y,ht=new o.P(-100,-100),at=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ot=new xt,st=Se.first,Nt=Se.last;let Vt=[];for(let zr=st.path.length-1;zr>=1;zr--)Vt.push(st.path[zr]);for(let zr=1;zr<Nt.path.length;zr++)Vt.push(Nt.path[zr]);const It=2.5*Ge;if(U){const zr=this.projectPathToScreenSpace(Vt,Le);Vt=zr.some((Sn=>Sn.signedDistanceFromCamera<=0))?[]:zr.map((Sn=>Sn.point))}let Yt=[];if(Vt.length>0){const zr=Vt[0].clone(),Sn=Vt[0].clone();for(let Xn=1;Xn<Vt.length;Xn++)zr.x=Math.min(zr.x,Vt[Xn].x),zr.y=Math.min(zr.y,Vt[Xn].y),Sn.x=Math.max(Sn.x,Vt[Xn].x),Sn.y=Math.max(Sn.y,Vt[Xn].y);Yt=zr.x>=ht.x&&Sn.x<=at.x&&zr.y>=ht.y&&Sn.y<=at.y?[Vt]:Sn.x<ht.x||zr.x>at.x||Sn.y<ht.y||zr.y>at.y?[]:o.aJ([Vt],ht.x,ht.y,at.x,at.y)}for(const zr of Yt){ot.reset(zr,.25*Ge);let Sn=0;Sn=ot.length<=.5*Ge?1:Math.ceil(ot.paddedLength/It)+1;for(let Xn=0;Xn<Sn;Xn++){const On=Xn/Math.max(Sn-1,1),Yn=ot.lerp(On),Ln=Yn.x+jn,Qn=Yn.y+jn;ye.push(Ln,Qn,Ge,0);const si=Ln-Ge,na=Qn-Ge,Si=Ln+Ge,_n=Qn+Ge;if(Te=Te&&this.isOffscreen(si,na,Si,_n),Fe=Fe||this.isInsideGrid(si,na,Si,_n),i!=="always"&&this.grid.hitTestCircle(Ln,Qn,Ge,i,W)&&(ke=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!N&&ke||!Fe||ve<this.perspectiveRatioCutoff?[]:ye,offscreen:Te,collisionDetected:ke}}projectPathToScreenSpace(i,c){const m=(function(v,E){const k=o.N();return o.aB(k,E.pitchedLabelPlaneMatrix),v.map((L=>{const N=mr(L.x,L.y,k,E.getElevation),U=E.transform.projectTileCoordinates(N.point.x,N.point.y,E.unwrappedTileID,E.getElevation);return U.point.x=(.5*U.point.x+.5)*E.width,U.point.y=(.5*-U.point.y+.5)*E.height,U}))})(i,c);return(function(v){let E=0,k=0,L=0,N=0;for(let U=0;U<v.length;U++)v[U].isOccluded?(L=U+1,N=0):(N++,N>k&&(k=N,E=L));return v.slice(E,E+k)})(m)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],m=new o.aa;for(const J of i){const Y=new o.P(J.x+jn,J.y+jn);m.extend(Y),c.push(Y)}const{minX:v,minY:E,maxX:k,maxY:L}=m,N=this.grid.query(v,E,k,L).concat(this.ignoredGrid.query(v,E,k,L)),U={},W={};for(const J of N){const Y=J.key;if(U[Y.bucketInstanceId]===void 0&&(U[Y.bucketInstanceId]={}),U[Y.bucketInstanceId][Y.featureIndex])continue;const oe=[new o.P(J.x1,J.y1),new o.P(J.x2,J.y1),new o.P(J.x2,J.y2),new o.P(J.x1,J.y2)];o.aK(c,oe)&&(U[Y.bucketInstanceId][Y.featureIndex]=!0,W[Y.bucketInstanceId]===void 0&&(W[Y.bucketInstanceId]=[]),W[Y.bucketInstanceId].push(Y.featureIndex))}return W}insertCollisionBox(i,c,m,v,E,k){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:E,collisionGroupID:k,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,m,v,E,k){const L=m?this.ignoredGrid:this.grid,N={bucketInstanceId:v,featureIndex:E,collisionGroupID:k,overlapMode:c};for(let U=0;U<i.length;U+=4)L.insertCircle(N,i[U],i[U+1],i[U+2])}projectAndGetPerspectiveRatio(i,c,m,v,E){if(E){let k;v?(k=[i,c,v(i,c),1],o.aH(k,k,E)):(k=[i,c,0,1],$n(k,k,E));const L=k[3];return{x:(k[0]/L+1)/2*this.transform.width+jn,y:(-k[1]/L+1)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{const k=this.transform.projectTileCoordinates(i,c,m,v);return{x:(k.point.x+1)/2*this.transform.width+jn,y:(1-k.point.y)/2*this.transform.height+jn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5,isOccluded:k.isOccluded,signedDistanceFromCamera:k.signedDistanceFromCamera}}}getPerspectiveRatio(i,c,m,v){const E=this.transform.projectTileCoordinates(i,c,m,v);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(i,c,m,v){return m<jn||i>=this.screenRightBoundary||v<jn||c>this.screenBottomBoundary}isInsideGrid(i,c,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=o.ar([]);return o.O(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,m,v,E,k,L,N,U,W,J){let Y=1,oe=0,ce=0,ye=1;const _e=i.anchorPointX+L[0],ve=i.anchorPointY+L[1];if(k&&!E){const Vt=this.projectAndGetPerspectiveRatio(_e+1,ve,v,U,J),It=Vt.x-N.x,Yt=Math.atan((Vt.y-N.y)/It)+(It<0?Math.PI:0),zr=Math.sin(Yt),Sn=Math.cos(Yt);Y=Sn,oe=zr,ce=-zr,ye=Sn}else if(!k&&E){const Vt=Yr(this.transform);Y=Vt.vecEast[0],oe=Vt.vecEast[1],ce=Vt.vecSouth[0],ye=Vt.vecSouth[1]}let we=N.x,Le=N.y,Se=c;E&&(we=_e,Le=ve,Se=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Se*=this.transform.getPitchedTextCorrection(_e,ve,v),W||(Se*=o.an(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),W&&(we+=Y*W.x*Se+ce*W.y*Se,Le+=oe*W.x*Se+ye*W.y*Se);const ke=i.x1*Se,Fe=i.x2*Se,Te=(ke+Fe)/2,Ge=i.y1*Se,ht=i.y2*Se,at=(Ge+ht)/2,ot=[{offsetX:ke,offsetY:Ge},{offsetX:Te,offsetY:Ge},{offsetX:Fe,offsetY:Ge},{offsetX:Fe,offsetY:at},{offsetX:Fe,offsetY:ht},{offsetX:Te,offsetY:ht},{offsetX:ke,offsetY:ht},{offsetX:ke,offsetY:at}];let st=[];for(const{offsetX:Vt,offsetY:It}of ot)st.push(new o.P(we+Y*Vt+ce*It,Le+oe*Vt+ye*It));let Nt=!1;if(E){const Vt=st.map((It=>this.projectAndGetPerspectiveRatio(It.x,It.y,v,U,J)));Nt=Vt.some((It=>!It.isOccluded)),st=Vt.map((It=>new o.P(It.x,It.y)))}else Nt=!0;return{box:o.aL(st),allPointsOccluded:!Nt}}}class Pu{constructor(i,c,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class rl{constructor(i,c,m,v,E){this.text=new Pu(i?i.text:null,c,m,E),this.icon=new Pu(i?i.icon:null,c,v,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ph{constructor(i,c,m){this.text=i,this.icon=c,this.skipFade=m}}class sg{constructor(i,c,m,v,E){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=E}}class lg{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[i]}}function Ac(w,i,c,m,v){const{horizontalAlign:E,verticalAlign:k}=o.aS(w);return new o.P(-(E-.5)*i+m[0]*v,-(k-.5)*c+m[1]*v)}class Gd{constructor(i,c,m,v,E){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new Ol(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new lg(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const c=this.terrain;return c?(m,v)=>c.getElevation(i,m,v):null}getBucketParts(i,c,m,v){const E=m.getBucket(c),k=m.latestFeatureIndex;if(!E||!k||c.id!==E.layerIds[0])return;const L=m.collisionBoxArray,N=E.layers[0].layout,U=E.layers[0].paint,W=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),J=m.tileSize/o.a5,Y=m.tileID.toUnwrapped(),oe=N.get("text-rotation-alignment")==="map",ce=o.aN(m,1,this.transform.zoom),ye=o.aO(this.collisionIndex.transform,m,U.get("text-translate"),U.get("text-translate-anchor")),_e=o.aO(this.collisionIndex.transform,m,U.get("icon-translate"),U.get("icon-translate-anchor")),ve=dr(oe,this.transform,ce);this.retainedQueryData[E.bucketInstanceId]=new sg(E.bucketInstanceId,k,E.sourceLayerIndex,E.index,m.tileID);const we={bucket:E,layout:N,translationText:ye,translationIcon:_e,unwrappedTileID:Y,pitchedLabelPlaneMatrix:ve,scale:W,textPixelRatio:J,holdingForFade:m.holdingForSymbolFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.ay(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(v)for(const Le of E.sortKeyRanges){const{sortKey:Se,symbolInstanceStart:ke,symbolInstanceEnd:Fe}=Le;i.push({sortKey:Se,symbolInstanceStart:ke,symbolInstanceEnd:Fe,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,c,m,v,E,k,L,N,U,W,J,Y,oe,ce,ye,_e,ve,we,Le,Se){const ke=o.aP[i.textAnchor],Fe=[i.textOffset0,i.textOffset1],Te=Ac(ke,m,v,Fe,E),Ge=this.collisionIndex.placeCollisionBox(c,Y,N,U,W,L,k,_e,J.predicate,Le,Te,Se);if((!we||this.collisionIndex.placeCollisionBox(we,Y,N,U,W,L,k,ve,J.predicate,Le,Te,Se).placeable)&&Ge.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:Fe,width:m,height:v,anchor:ke,textBoxScale:E,prevAnchor:ht},this.markUsedJustification(ce,ke,oe,ye),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,ye,oe),this.placedOrientations[oe.crossTileID]=ye),{shift:Te,placedGlyphBoxes:Ge}}}placeLayerBucketPart(i,c,m){const{bucket:v,layout:E,translationText:k,translationIcon:L,unwrappedTileID:N,pitchedLabelPlaneMatrix:U,textPixelRatio:W,holdingForFade:J,collisionBoxArray:Y,partiallyEvaluatedTextSize:oe,collisionGroup:ce}=i.parameters,ye=E.get("text-optional"),_e=E.get("icon-optional"),ve=o.aQ(E,"text-overlap","text-allow-overlap"),we=ve==="always",Le=o.aQ(E,"icon-overlap","icon-allow-overlap"),Se=Le==="always",ke=E.get("text-rotation-alignment")==="map",Fe=E.get("text-pitch-alignment")==="map",Te=E.get("icon-text-fit")!=="none",Ge=E.get("symbol-z-order")==="viewport-y",ht=we&&(Se||!v.hasIconData()||_e),at=Se&&(we||!v.hasTextData()||ye);!v.collisionArrays&&Y&&v.deserializeCollisionBoxes(Y);const ot=this.retainedQueryData[v.bucketInstanceId].tileID,st=this._getTerrainElevationFunc(ot),Nt=this.transform.getFastPathSimpleProjectionMatrix(ot),Vt=(It,Yt,zr)=>{var Sn,Xn;if(c[It.crossTileID])return;if(J)return void(this.placements[It.crossTileID]=new Ph(!1,!1,!1));let On=!1,Yn=!1,Ln=!0,Qn=null,si={box:null,placeable:!1,offscreen:null,occluded:!1},na={placeable:!1},Si=null,_n=null,qi=null,cs=0,Ns=0,hs=0;Yt.textFeatureIndex?cs=Yt.textFeatureIndex:It.useRuntimeCollisionCircles&&(cs=It.featureIndex),Yt.verticalTextFeatureIndex&&(Ns=Yt.verticalTextFeatureIndex);const Fa=Yt.textBox;if(Fa){const oo=zn=>{let Dn=o.az.horizontal;if(v.allowVerticalPlacement&&!zn&&this.prevPlacement){const zi=this.prevPlacement.placedOrientations[It.crossTileID];zi&&(this.placedOrientations[It.crossTileID]=zi,Dn=zi,this.markUsedOrientation(v,Dn,It))}return Dn},Bs=(zn,Dn)=>{if(v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Yt.verticalTextBox){for(const zi of v.writingModes)if(zi===o.az.vertical?(si=Dn(),na=si):si=zn(),si&&si.placeable)break}else si=zn()},Uo=It.textAnchorOffsetStartIndex,qo=It.textAnchorOffsetEndIndex;if(qo===Uo){const zn=(Dn,zi)=>{const Gi=this.collisionIndex.placeCollisionBox(Dn,ve,W,ot,N,Fe,ke,k,ce.predicate,st,void 0,Nt);return Gi&&Gi.placeable&&(this.markUsedOrientation(v,zi,It),this.placedOrientations[It.crossTileID]=zi),Gi};Bs((()=>zn(Fa,o.az.horizontal)),(()=>{const Dn=Yt.verticalTextBox;return v.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Dn?zn(Dn,o.az.vertical):{box:null,offscreen:null}})),oo(si&&si.placeable)}else{let zn=o.aP[(Xn=(Sn=this.prevPlacement)===null||Sn===void 0?void 0:Sn.variableOffsets[It.crossTileID])===null||Xn===void 0?void 0:Xn.anchor];const Dn=(Gi,Ba,ba)=>{const ru=Gi.x2-Gi.x1,bg=Gi.y2-Gi.y1,em=It.textBoxScale,Mf=Te&&Le==="never"?Ba:null;let pl=null,Vs=ve==="never"?1:2,ml="never";zn&&Vs++;for(let td=0;td<Vs;td++){for(let kf=Uo;kf<qo;kf++){const rd=v.textAnchorOffsets.get(kf);if(zn&&rd.textAnchor!==zn)continue;const Yc=this.attemptAnchorPlacement(rd,Gi,ru,bg,em,ke,Fe,W,ot,N,ce,ml,It,v,ba,k,L,Mf,st);if(Yc&&(pl=Yc.placedGlyphBoxes,pl&&pl.placeable))return On=!0,Qn=Yc.shift,pl}zn?zn=null:ml=ve}return m&&!pl&&(pl={box:this.collisionIndex.placeCollisionBox(Fa,"always",W,ot,N,Fe,ke,k,ce.predicate,st,void 0,Nt).box,offscreen:!1,placeable:!1,occluded:!1}),pl};Bs((()=>Dn(Fa,Yt.iconBox,o.az.horizontal)),(()=>{const Gi=Yt.verticalTextBox;return v.allowVerticalPlacement&&(!si||!si.placeable)&&It.numVerticalGlyphVertices>0&&Gi?Dn(Gi,Yt.verticalIconBox,o.az.vertical):{box:null,occluded:!0,offscreen:null}})),si&&(On=si.placeable,Ln=si.offscreen);const zi=oo(si&&si.placeable);if(!On&&this.prevPlacement){const Gi=this.prevPlacement.variableOffsets[It.crossTileID];Gi&&(this.variableOffsets[It.crossTileID]=Gi,this.markUsedJustification(v,Gi.anchor,It,zi))}}}if(Si=si,On=Si&&Si.placeable,Ln=Si&&Si.offscreen,It.useRuntimeCollisionCircles&&It.centerJustifiedTextSymbolIndex>=0){const oo=v.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),Bs=o.aA(v.textSizeData,oe,oo),Uo=E.get("text-padding");_n=this.collisionIndex.placeCollisionCircles(ve,oo,v.lineVertexArray,v.glyphOffsetArray,Bs,N,U,m,Fe,ce.predicate,It.collisionCircleDiameter,Uo,k,st),_n.circles.length&&_n.collisionDetected&&!m&&o.w("Collisions detected, but collision boxes are not shown"),On=we||_n.circles.length>0&&!_n.collisionDetected,Ln=Ln&&_n.offscreen}if(Yt.iconFeatureIndex&&(hs=Yt.iconFeatureIndex),Yt.iconBox){const oo=Bs=>this.collisionIndex.placeCollisionBox(Bs,Le,W,ot,N,Fe,ke,L,ce.predicate,st,Te&&Qn?Qn:void 0,Nt);na&&na.placeable&&Yt.verticalIconBox?(qi=oo(Yt.verticalIconBox),Yn=qi.placeable):(qi=oo(Yt.iconBox),Yn=qi.placeable),Ln=Ln&&qi.offscreen}const dl=ye||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,Fs=_e||It.numIconVertices===0;dl||Fs?Fs?dl||(Yn=Yn&&On):On=Yn&&On:Yn=On=Yn&&On;const fl=Yn&&qi.placeable;if(On&&Si.placeable&&this.collisionIndex.insertCollisionBox(Si.box,ve,E.get("text-ignore-placement"),v.bucketInstanceId,na&&na.placeable&&Ns?Ns:cs,ce.ID),fl&&this.collisionIndex.insertCollisionBox(qi.box,Le,E.get("icon-ignore-placement"),v.bucketInstanceId,hs,ce.ID),_n&&On&&this.collisionIndex.insertCollisionCircles(_n.circles,ve,E.get("text-ignore-placement"),v.bucketInstanceId,cs,ce.ID),m&&this.storeCollisionData(v.bucketInstanceId,zr,Yt,Si,qi,_n),It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Ph((On||ht)&&!(Si!=null&&Si.occluded),(Yn||at)&&!(qi!=null&&qi.occluded),Ln||v.justReloaded),c[It.crossTileID]=!0};if(Ge){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Yt=It.length-1;Yt>=0;--Yt){const zr=It[Yt];Vt(v.symbolInstances.get(zr),v.collisionArrays[zr],zr)}}else for(let It=i.symbolInstanceStart;It<i.symbolInstanceEnd;It++)Vt(v.symbolInstances.get(It),v.collisionArrays[It],It);v.justReloaded=!1}storeCollisionData(i,c,m,v,E,k){if(m.textBox||m.iconBox){let L,N;this.collisionBoxArrays.has(i)?L=this.collisionBoxArrays.get(i):(L=new Map,this.collisionBoxArrays.set(i,L)),L.has(c)?N=L.get(c):(N={text:null,icon:null},L.set(c,N)),m.textBox&&(N.text=v.box),m.iconBox&&(N.icon=E.box)}if(k){let L=this.collisionCircleArrays[i];L===void 0&&(L=this.collisionCircleArrays[i]=[]);for(let N=0;N<k.circles.length;N+=4)L.push(k.circles[N+0]-jn),L.push(k.circles[N+1]-jn),L.push(k.circles[N+2]),L.push(k.collisionDetected?1:0)}}markUsedJustification(i,c,m,v){let E;E=v===o.az.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[o.aR(c)];const k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const L of k)L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=E>=0&&L!==E?0:m.crossTileID)}markUsedOrientation(i,c,m){const v=c===o.az.horizontal||c===o.az.horizontalOnly?c:0,E=c===o.az.vertical?c:0,k=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const L of k)i.text.placedSymbolArray.get(L).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,E=c?c.opacities:{},k=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const N in this.placements){const U=this.placements[N],W=E[N];W?(this.opacities[N]=new rl(W,v,U.text,U.icon),m=m||U.text!==W.text.placed||U.icon!==W.icon.placed):(this.opacities[N]=new rl(null,v,U.text,U.icon,U.skipFade),m=m||U.text||U.icon)}for(const N in E){const U=E[N];if(!this.opacities[N]){const W=new rl(U,v,!1,!1);W.isHidden()||(this.opacities[N]=W,m=m||U.text.placed||U.icon.placed)}}for(const N in k)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=k[N]);for(const N in L)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=L[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const m={};for(const v of c){const E=v.getBucket(i);E&&v.latestFeatureIndex&&i.id===E.layerIds[0]&&this.updateBucketOpacities(E,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(i,c,m,v){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const E=i.layers[0],k=E.layout,L=new rl(null,0,!1,!1,!0),N=k.get("text-allow-overlap"),U=k.get("icon-allow-overlap"),W=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=k.get("text-rotation-alignment")==="map",Y=k.get("text-pitch-alignment")==="map",oe=k.get("icon-text-fit")!=="none",ce=new rl(null,0,N&&(U||!i.hasIconData()||k.get("icon-optional")),U&&(N||!i.hasTextData()||k.get("text-optional")),!0);!i.collisionArrays&&v&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(v);const ye=(ve,we,Le)=>{for(let Se=0;Se<we/4;Se++)ve.opacityVertexArray.emplaceBack(Le);ve.hasVisibleVertices=ve.hasVisibleVertices||Le!==Ic},_e=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ve=0;ve<i.symbolInstances.length;ve++){const we=i.symbolInstances.get(ve),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Se,crossTileID:ke}=we;let Fe=this.opacities[ke];m[ke]?Fe=L:Fe||(Fe=ce,this.opacities[ke]=Fe),m[ke]=!0;const Te=we.numIconVertices>0,Ge=this.placedOrientations[we.crossTileID],ht=Ge===o.az.vertical,at=Ge===o.az.horizontal||Ge===o.az.horizontalOnly;if(Le>0||Se>0){const st=Wd(Fe.text);ye(i.text,Le,ht?Ic:st),ye(i.text,Se,at?Ic:st);const Nt=Fe.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach((Yt=>{Yt>=0&&(i.text.placedSymbolArray.get(Yt).hidden=Nt||ht?1:0)})),we.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Nt||at?1:0);const Vt=this.variableOffsets[we.crossTileID];Vt&&this.markUsedJustification(i,Vt.anchor,we,Ge);const It=this.placedOrientations[we.crossTileID];It&&(this.markUsedJustification(i,"left",we,It),this.markUsedOrientation(i,It,we))}if(Te){const st=Wd(Fe.icon),Nt=!(oe&&we.verticalPlacedIconSymbolIndex&&ht);we.placedIconSymbolIndex>=0&&(ye(i.icon,we.numIconVertices,Nt?st:Ic),i.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ye(i.icon,we.numVerticalIconVertices,Nt?Ic:st),i.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}const ot=_e&&_e.has(ve)?_e.get(ve):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const st=i.collisionArrays[ve];if(st){let Nt=new o.P(0,0);if(st.textBox||st.verticalTextBox){let Vt=!0;if(W){const It=this.variableOffsets[ke];It?(Nt=Ac(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),J&&Nt._rotate(Y?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Vt=!1}if(st.textBox||st.verticalTextBox){let It;st.textBox&&(It=ht),st.verticalTextBox&&(It=at),Eh(i.textCollisionBox.collisionVertexArray,Fe.text.placed,!Vt||It,ot.text,Nt.x,Nt.y)}}if(st.iconBox||st.verticalIconBox){const Vt=!!(!at&&st.verticalIconBox);let It;st.iconBox&&(It=Vt),st.verticalIconBox&&(It=!Vt),Eh(i.iconCollisionBox.collisionVertexArray,Fe.icon.placed,It,ot.icon,oe?Nt.x:0,oe?Nt.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Eh(w,i,c,m,v,E){m&&m.length!==0||(m=[0,0,0,0]);const k=m[0]-jn,L=m[1]-jn,N=m[2]-jn,U=m[3]-jn;w.emplaceBack(i?1:0,c?1:0,v||0,E||0,k,L),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,N,L),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,N,U),w.emplaceBack(i?1:0,c?1:0,v||0,E||0,k,U)}const Eu=Math.pow(2,25),Mp=Math.pow(2,24),kp=Math.pow(2,17),mn=Math.pow(2,16),Ch=Math.pow(2,9),Ap=Math.pow(2,8),Ll=Math.pow(2,1);function Wd(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const i=w.placed?1:0,c=Math.floor(127*w.opacity);return c*Eu+i*Mp+c*kp+i*mn+c*Ch+i*Ap+c*Ll+i}const Ic=0;class nl{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,m,v,E){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(k,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort(((L,N)=>L.sortKey-N.sortKey)));this._currentPartIndex<k.length;)if(c.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,E())return!0;return!1}}class Dl{constructor(i,c,m,v,E,k,L,N){this.placement=new Gd(i,c,k,L,N),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(i,c,m){const v=B(),E=()=>!this._forceFullPlacement&&B()-v>2;for(;this._currentPlacementIndex>=0;){const k=c[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=L)&&(!k.maxzoom||k.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new nl(k)),this._inProgressLayer.continuePlacement(m[k.source],this.placement,this._showCollisionBoxes,k,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Br=512/o.a5/2;class Ts{constructor(i,c,m){this.tileID=i,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let E=0;E<c.length;E++){const k=c.get(E),L=k.key,N=v.get(L);N?N.push(k):v.set(L,[k])}for(const[E,k]of v){const L={positions:k.map((N=>({x:Math.floor(N.anchorX*Br),y:Math.floor(N.anchorY*Br)}))),crossTileIDs:k.map((N=>N.crossTileID))};if(L.positions.length>128){const N=new o.aT(L.positions.length,16,Uint16Array);for(const{x:U,y:W}of L.positions)N.add(U,W);N.finish(),delete L.positions,L.index=N}this._symbolsByKey[E]=L}}getScaledCoordinates(i,c){const{x:m,y:v,z:E}=this.tileID.canonical,{x:k,y:L,z:N}=c.canonical,U=Br/Math.pow(2,N-E),W=(L*o.a5+i.anchorY)*U,J=v*o.a5*Br;return{x:Math.floor((k*o.a5+i.anchorX)*U-m*o.a5*Br),y:Math.floor(W-J)}}findMatches(i,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<i.length;E++){const k=i.get(E);if(k.crossTileID)continue;const L=this._symbolsByKey[k.key];if(!L)continue;const N=this.getScaledCoordinates(k,c);if(L.index){const U=L.index.range(N.x-v,N.y-v,N.x+v,N.y+v).sort();for(const W of U){const J=L.crossTileIDs[W];if(!m[J]){m[J]=!0,k.crossTileID=J;break}}}else if(L.positions)for(let U=0;U<L.positions.length;U++){const W=L.positions[U],J=L.crossTileIDs[U];if(Math.abs(W.x-N.x)<=v&&Math.abs(W.y-N.y)<=v&&!m[J]){m[J]=!0,k.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class Rl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ms{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],E={};for(const k in v){const L=v[k];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),E[L.tileID.key]=L}this.indexes[m]=E}this.lng=i}addBucket(i,c,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const E in this.indexes){const k=this.indexes[E];if(Number(E)>i.overscaledZ)for(const L in k){const N=k[L];N.tileID.isChildOf(i)&&N.findMatches(c.symbolInstances,i,v)}else{const L=k[i.scaledTo(Number(E)).key];L&&L.findMatches(c.symbolInstances,i,v)}}for(let E=0;E<c.symbolInstances.length;E++){const k=c.symbolInstances.get(E);k.crossTileID||(k.crossTileID=m.generate(),v[k.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ts(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[i][v]}removeStaleBuckets(i){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const E in v)i[v[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[E]),delete v[E],c=!0)}return c}}class Qi{constructor(){this.layerIndexes={},this.crossTileIDs=new Rl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,m){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new Ms);let E=!1;const k={};v.handleWrapJump(m);for(const L of c){const N=L.getBucket(i);N&&i.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(L.tileID,N,this.crossTileIDs)&&(E=!0),k[N.bucketInstanceId]=!0)}return v.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach((m=>{c[m]=!0}));for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}var Li="void main() {fragColor=vec4(1.0);}";const wn={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Lr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Lr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr(Li,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Lr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Lr(Li,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Lr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Lr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Lr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Lr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Lr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Lr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Lr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Lr(w,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=E?E.concat(v):v,L={};return{fragmentSource:w=w.replace(c,((N,U,W,J,Y)=>(L[Y]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
in ${W} ${J} ${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = u_${Y};
#endif
`))),vertexSource:i=i.replace(c,((N,U,W,J,Y)=>{const oe=J==="float"?"vec2":"vec4",ce=Y.match(/color/)?"color":oe;return L[Y]?U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${oe} a_${Y};
out ${W} ${J} ${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = a_${Y};
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = unpack_mix_${ce}(a_${Y}, u_${Y}_t);
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${oe} a_${Y};
#else
uniform ${W} ${J} u_${Y};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = a_${Y};
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${J} ${Y} = unpack_mix_${ce}(a_${Y}, u_${Y}_t);
#else
    ${W} ${J} ${Y} = u_${Y};
#endif
`})),staticAttributes:m,staticUniforms:k}}class In{constructor(i,c,m){this.vertexBuffer=i,this.indexBuffer=c,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Lo=o.aU([{name:"a_pos",type:"Int16",components:2}]);const Ra="#define PROJECTION_MERCATOR",eo="mercator";class Ji{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return eo}get shaderDefine(){return Ra}get shaderPreludeCode(){return wn.projectionMercator}get vertexShaderPreludeCode(){return wn.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,c,m,v,E){if(this._cachedMesh)return this._cachedMesh;const k=new o.aW;k.emplaceBack(0,0),k.emplaceBack(o.a5,0),k.emplaceBack(0,o.a5),k.emplaceBack(o.a5,o.a5);const L=i.createVertexBuffer(k,Lo.members),N=o.aX.simpleSegment(0,0,4,2),U=new o.aY;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const W=i.createIndexBuffer(U);return this._cachedMesh=new In(L,W,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class Cu{constructor(i=0,c=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=m,this.right=v}interpolate(i,c,m){return c.top!=null&&i.top!=null&&(this.top=o.G.number(i.top,c.top,m)),c.bottom!=null&&i.bottom!=null&&(this.bottom=o.G.number(i.bottom,c.bottom,m)),c.left!=null&&i.left!=null&&(this.left=o.G.number(i.left,c.left,m)),c.right!=null&&i.right!=null&&(this.right=o.G.number(i.right,c.right,m)),this}getCenter(i,c){const m=o.an((this.left+i-this.right)/2,0,i),v=o.an((this.top+c-this.bottom)/2,0,c);return new o.P(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Cu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jl(w,i){if(!w.renderWorldCopies||w.lngRange)return;const c=i.lng-w.center.lng;i.lng+=c>180?-360:c<-180?360:0}function Hn(w){return Math.max(0,Math.floor(w))}class Jo{constructor(i,c){var m;this.applyConstrain=(v,E)=>this._constrainOverride!==null?this._constrainOverride(v,E):this._callbacks.defaultConstrain(v,E),this._callbacks=i,this._tileSize=512,this._renderWorldCopies=(c==null?void 0:c.renderWorldCopies)===void 0||!!(c!=null&&c.renderWorldCopies),this._minZoom=(c==null?void 0:c.minZoom)||0,this._maxZoom=(c==null?void 0:c.maxZoom)||22,this._minPitch=(c==null?void 0:c.minPitch)==null?0:c==null?void 0:c.minPitch,this._maxPitch=(c==null?void 0:c.maxPitch)==null?60:c==null?void 0:c.maxPitch,this._constrainOverride=(m=c==null?void 0:c.constrainOverride)!==null&&m!==void 0?m:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Hn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Cu,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,c,m){this._constrainOverride=i.constrainOverride,this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=Hn(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new Cu(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!m&&i.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get constrainOverride(){return this._constrainOverride}setConstrainOverride(i){i===void 0&&(i=null),this._constrainOverride!==i&&(this._constrainOverride=i,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const c=o.W(i,-180,180)*Math.PI/180;var m,v,E,k,L,N,U,W,J;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=P(),m=this._rotationMatrix,E=-this._bearingInRadians,k=(v=this._rotationMatrix)[0],L=v[1],N=v[2],U=v[3],W=Math.sin(E),J=Math.cos(E),m[0]=k*J+N*W,m[1]=L*J+U*W,m[2]=k*-W+N*J,m[3]=L*-W+U*J)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const c=o.an(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const c=i/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aZ(this._fovInRadians)}setFov(i){i=o.an(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=o.ap(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const c=this.applyConstrain(this._center,i).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aq(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,c){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,m){this._unmodified=!1,this._edgeInsets.interpolate(i,c,m),this.constrainInternal(),this._calcMatrices()}resize(i,c,m=!0){this._width=i,this._height=c,m&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Wr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ao,o.ao])}getCameraQueryGeometry(i,c){if(c.length===1)return[c[0],i];{const{minX:m,minY:v,maxX:E,maxY:k}=o.aa.fromPoints(c).extend(i);return[new o.P(m,v),new o.P(E,v),new o.P(E,k),new o.P(m,k),new o.P(m,v)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:m}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(m),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=o.ar(new Float64Array(16));o.Q(i,i,[this._width/2,-this._height/2,1]),o.O(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=o.ar(new Float64Array(16)),o.Q(i,i,[1,-1,1]),o.O(i,i,[-1,-1,0]),o.Q(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,c,m,v){const E=m!==void 0?m:this.bearing,k=v=v!==void 0?v:this.pitch,{distanceToCenter:L,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,k),{x:U,y:W}=sn(k,E),J=o.a9.fromLngLat(i,c);let Y,oe,ce=o.a_(1,J.y),ye=0;do{if(ye+=1,ye>10)break;oe=L/ce,Y=new o.a9(J.x+U*oe,J.y+W*oe),ce=1/Y.meterInMercatorCoordinateUnits()}while(Math.abs(L-oe*ce)>1e-12);return{center:Y.toLngLat(),elevation:N,zoom:o.at(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const c=1/this.worldSize,m=o.as(1,this.center.lat)*this.worldSize,v=o.a9.fromLngLat(this.center,this.elevation),E=v.x/c,k=v.y/c,L=v.z/c,N=this.pitch,U=this.bearing,{x:W,y:J,z:Y}=sn(N,U),oe=this.cameraToCenterDistance,ce=E+oe*-W,ye=k+oe*-J,_e=L+oe*Y,{distanceToCenter:ve,clampedElevation:we}=this._distanceToCenterFromAltElevationPitch(_e/m,i,N),Le=ve*m,Se=new o.a9((ce+W*Le)*c,(ye+J*Le)*c,0).toLngLat(),ke=o.as(1,Se.lat),Fe=o.at(this.height/2/Math.tan(this.fovInRadians/2)/ve/ke/this.tileSize);this._elevation=we,this._center=Se,this.setZoom(Fe)}_distanceToCenterFromAltElevationPitch(i,c,m){const v=-Math.cos(o.ap(m)),E=i-c;let k,L=c;return v*E>=0||Math.abs(v)<.1?(k=1e4,L=i+k*v):k=-E/v,{distanceToCenter:k,clampedElevation:L}}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=o.as(1,this.center.lat)*this.worldSize;return tt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const c=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/c,i.canonical.y/c,1/c/o.a5,1/c/o.a5]}}class ja{constructor(i,c){this.min=i,this.max=c,this.center=o.a$([],o.b0([],this.min,this.max),.5)}quadrant(i){const c=[i%2==0,i<2],m=o.b1(this.min),v=o.b1(this.max);for(let E=0;E<c.length;E++)m[E]=c[E]?this.min[E]:this.center[E],v[E]=c[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new ja(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let c=!0;for(let m=0;m<i.planes.length;m++){const v=this.intersectsPlane(i.planes[m]);if(v===0)return 0;v===1&&(c=!1)}return c?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let c=i[3],m=i[3];for(let v=0;v<3;v++)i[v]>0?(c+=i[v]*this.min[v],m+=i[v]*this.max[v]):(m+=i[v]*this.min[v],c+=i[v]*this.max[v]);return c>=0?2:m<0?0:1}}class Tu{distanceToTile2d(i,c,m,v){const E=v.distanceX([i,c]),k=v.distanceY([i,c]);return Math.hypot(E,k)}getWrap(i,c,m){return m}getTileBoundingVolume(i,c,m,v){var E,k;let L=0,N=0;if(v!=null&&v.terrain){const W=new o.a2(i.z,c,i.z,i.x,i.y),J=v.terrain.getMinMaxElevation(W);L=(E=J.minElevation)!==null&&E!==void 0?E:Math.min(0,m),N=(k=J.maxElevation)!==null&&k!==void 0?k:Math.max(0,m)}const U=1<<i.z;return new ja([c+i.x/U,i.y/U,L],[c+(i.x+1)/U,(i.y+1)/U,N])}allowVariableZoom(i,c){const m=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,v=o.an(78.5-m/2,0,60);return!!c.terrain||i.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class to{constructor(i,c,m){this.points=i,this.planes=c,this.aabb=m}static fromInvProjectionMatrix(i,c=1,m=0,v,E){const k=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],L=Math.pow(2,m),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Y=>(function(oe,ce,ye,_e){const ve=o.aH([],oe,ce),we=1/ve[3]/ye*_e;return o.b6(ve,ve,[we,we,1/ve[3],we])})(Y,i,c,L)));v&&(function(Y,oe,ce,ye){const _e=ye?4:0,ve=ye?0:4;let we=0;const Le=[],Se=[];for(let Te=0;Te<4;Te++){const Ge=o.b2([],Y[Te+ve],Y[Te+_e]),ht=o.b7(Ge);o.a$(Ge,Ge,1/ht),Le.push(ht),Se.push(Ge)}for(let Te=0;Te<4;Te++){const Ge=o.b8(Y[Te+_e],Se[Te],ce);we=Ge!==null&&Ge>=0?Math.max(we,Ge):Math.max(we,Le[Te])}const ke=(function(Te,Ge){const ht=o.b2([],Te[Ge[0]],Te[Ge[1]]),at=o.b2([],Te[Ge[2]],Te[Ge[1]]),ot=[0,0,0,0];return o.b3(ot,o.b4([],ht,at)),ot[3]=-o.b5(ot,Te[Ge[0]]),ot})(Y,oe),Fe=(function(Te,Ge){const ht=o.b9(Te),at=o.ba([],Te,1/ht),ot=o.b2([],Ge,o.a$([],at,o.b5(Ge,at))),st=o.b9(ot);if(st>0){const Nt=Math.sqrt(1-at[3]*at[3]),Vt=o.a$([],at,-at[3]),It=o.b0([],Vt,o.a$([],ot,Nt/st));return o.bb(Ge,It)}return null})(ce,ke);if(Fe!==null){const Te=Fe/o.b5(Se[0],ke);we=Math.min(we,Te)}for(let Te=0;Te<4;Te++){const Ge=Math.min(we,Le[Te]);Y[Te+ve]=[Y[Te+_e][0]+Se[Te][0]*Ge,Y[Te+_e][1]+Se[Te][1]*Ge,Y[Te+_e][2]+Se[Te][2]*Ge,1]}})(N,k[0],v,E);const U=k.map((Y=>{const oe=o.b2([],N[Y[0]],N[Y[1]]),ce=o.b2([],N[Y[2]],N[Y[1]]),ye=o.b3([],o.b4([],oe,ce)),_e=-o.b5(ye,N[Y[1]]);return ye.concat(_e)})),W=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],J=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Y of N)for(let oe=0;oe<3;oe++)W[oe]=Math.min(W[oe],Y[oe]),J[oe]=Math.max(J[oe],Y[oe]);return new to(N,U,new ja(W,J))}}class Mu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c,m=!0){this._helper.resize(i,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,c){}constructor(i){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,m)=>{m=o.an(+m,this.minZoom,this.maxZoom);const v={center:new o.V(c.lng,c.lat),zoom:m};let E=this._helper._lngRange;if(!this._helper._renderWorldCopies&&E===null){const Se=179.9999999999;E=[-Se,Se]}const k=this.tileSize*o.aq(v.zoom);let L=0,N=k,U=0,W=k,J=0,Y=0;const{x:oe,y:ce}=this.size;if(this._helper._latRange){const Se=this._helper._latRange;L=o.X(Se[1])*k,N=o.X(Se[0])*k,N-L<ce&&(J=ce/(N-L))}E&&(U=o.W(o.Y(E[0])*k,0,k),W=o.W(o.Y(E[1])*k,0,k),W<U&&(W+=k),W-U<oe&&(Y=oe/(W-U)));const{x:ye,y:_e}=or(k,c);let ve,we;const Le=Math.max(Y||0,J||0);if(Le){const Se=new o.P(Y?(W+U)/2:ye,J?(N+L)/2:_e);return v.center=Mr(k,Se).wrap(),v.zoom+=o.at(Le),v}if(this._helper._latRange){const Se=ce/2;_e-Se<L&&(we=L+Se),_e+Se>N&&(we=N-Se)}if(E){const Se=(U+W)/2;let ke=ye;this._helper._renderWorldCopies&&(ke=o.W(ye,Se-k/2,Se+k/2));const Fe=oe/2;ke-Fe<U&&(ve=U+Fe),ke+Fe>W&&(ve=W-Fe)}if(ve!==void 0||we!==void 0){const Se=new o.P(ve??ye,we??_e);v.center=Mr(k,Se).wrap()}return v},this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._coveringTilesDetailsProvider=new Tu}clone(){const i=new Mu;return i.apply(this,!1),i}apply(i,c,m){this._helper.apply(i,c,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const c=[new o.bc(0,i)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new o.P(0,0)),v=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),k=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),L=Math.floor(Math.min(m.x,v.x,E.x,k.x)),N=Math.floor(Math.max(m.x,v.x,E.x,k.x)),U=1;for(let W=L-U;W<=N+U;W++)W!==0&&c.push(new o.bc(W,i))}return c}getCameraFrustum(){return to.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const c=this.screenPointToLocation(this.centerPoint,i),m=i?i.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(i,c){const m=o.as(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,m),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),k=o.a9.fromLngLat(i),L=new o.a9(k.x-(v.x-E.x),k.y-(v.y-E.y));this.setCenter(L==null?void 0:L.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,c){return c?this.coordinatePoint(o.a9.fromLngLat(i),c.getElevationForLngLat(i,this),this._pixelMatrix3D):this.coordinatePoint(o.a9.fromLngLat(i))}screenPointToLocation(i,c){var m;return(m=this.screenPointToMercatorCoordinate(i,c))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(i,c){if(c){const m=c.pointCoordinate(i);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,c){const m=c||0,v=[i.x,i.y,0,1],E=[i.x,i.y,1,1];o.aH(v,v,this._pixelMatrixInverse),o.aH(E,E,this._pixelMatrixInverse);const k=v[3],L=E[3],N=v[1]/k,U=E[1]/L,W=v[2]/k,J=E[2]/L,Y=W===J?0:(m-W)/(J-W);return new o.a9(o.G.number(v[0]/k,E[0]/L,Y)/this.worldSize,o.G.number(N,U,Y)/this.worldSize,m)}coordinatePoint(i,c=0,m=this._pixelMatrix){const v=[i.x*this.worldSize,i.y*this.worldSize,c,1];return o.aH(v,v,m),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const i=Math.max(0,this._helper._height/2-Kr(this));return new Wr().extend(this.screenPointToLocation(new o.P(0,i))).extend(this.screenPointToLocation(new o.P(this._helper._width,i))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(i,c){return c?c.pointCoordinate(i)!=null:i.y>this.height/2-Kr(this)}calculatePosMatrix(i,c=!1,m){var v;const E=(v=i.key)!==null&&v!==void 0?v:o.bd(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),k=c?this._alignedPosMatrixCache:this._posMatrixCache;if(k.has(E)){const U=k.get(E);return m?U.f32:U.f64}const L=Ur(i,this.worldSize);o.S(L,c?this._alignedProjMatrix:this._viewProjMatrix,L);const N={f64:L,f32:new Float32Array(L)};return k.set(E,N),m?N.f32:N.f64}calculateFogMatrix(i){const c=i.key,m=this._fogMatrixCacheF32;if(m.has(c))return m.get(c);const v=Ur(i,this.worldSize);return o.S(v,this._fogMatrix,v),m.set(c,new Float32Array(v)),m.get(c)}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}_calculateNearFarZIfNeeded(i,c,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=i-v*this._helper._pixelPerMeter/Math.cos(c),k=v<0?E:i,L=Math.PI/2+this.pitchInRadians,N=o.ap(this.fov)*(Math.abs(Math.cos(o.ap(this.roll)))*this.height+Math.abs(Math.sin(o.ap(this.roll)))*this.width)/this.height*(.5+m.y/this.height),U=Math.sin(N)*k/Math.sin(o.an(Math.PI-L-N,.01,Math.PI-.01)),W=Kr(this),J=Math.atan(W/this._helper.cameraToCenterDistance),Y=o.ap(.75),oe=J>Y?2*J*(.5+m.y/(2*W)):Y,ce=Math.sin(oe)*k/Math.sin(o.an(Math.PI-L-oe,.01,Math.PI-.01)),ye=Math.min(U,ce);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ye+k),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,c=or(this.worldSize,this.center),m=c.x,v=c.y;this._helper._pixelPerMeter=o.as(1,this.center.lat)*this.worldSize;const E=o.ap(Math.min(this.pitch,Xt)),k=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E));let L;this._calculateNearFarZIfNeeded(k,E,i),L=new Float64Array(16),o.be(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aB(this._invProjMatrix,L),L[8]=2*-i.x/this._helper._width,L[9]=2*i.y/this._helper._height,this._projectionMatrix=o.bf(L),o.Q(L,L,[1,-1,1]),o.O(L,L,[0,0,-this._helper.cameraToCenterDistance]),o.bg(L,L,-this.rollInRadians),o.bh(L,L,this.pitchInRadians),o.bg(L,L,-this.bearingInRadians),o.O(L,L,[-m,-v,0]),this._mercatorMatrix=o.Q([],L,[this.worldSize,this.worldSize,this.worldSize]),o.Q(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),o.O(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=o.aB([],L);const N=[0,0,-1,1];o.aH(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.be(this._fogMatrix,this.fovInRadians,this.width/this.height,k,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-m,-v,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);const U=this._helper._width%2/2,W=this._helper._height%2/2,J=Math.cos(this.bearingInRadians),Y=Math.sin(-this.bearingInRadians),oe=m-Math.round(m)+J*U+Y*W,ce=v-Math.round(v)+J*W+Y*U,ye=new Float64Array(L);if(o.O(ye,ye,[oe>.5?oe-1:oe,ce>.5?ce-1:ce,0]),this._alignedProjMatrix=ye,L=o.aB(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return o.aH(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=o.as(1,this.center.lat)*this.worldSize;return tt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,c){const m=o.a9.fromLngLat(i),v=[m.x*this.worldSize,m.y*this.worldSize,c,1];return o.aH(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(i){const{overscaledTileID:c,aligned:m,applyTerrainMatrix:v}=i,E=this._helper.getMercatorTileCoordinates(c),k=c?this.calculatePosMatrix(c,m,!0):null;let L;return L=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:k||o.bi(),{mainMatrix:L,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,c,m){return 1}transformLightDirection(i){return o.b1(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,c,m,v){const E=this.calculatePosMatrix(m);let k;v?(k=[i,c,v(i,c),1],o.aH(k,k,E)):(k=[i,c,0,1],$n(k,k,E));const L=k[3];return{point:new o.P(k[0]/L,k[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(i){for(const c of i)this.calculatePosMatrix(c)}getMatrixForModel(i,c){const m=o.a9.fromLngLat(i,c),v=m.meterInMercatorCoordinateUnits(),E=o.bj();return o.O(E,E,[m.x,m.y,m.z]),o.bg(E,E,Math.PI),o.bh(E,E,Math.PI/2),o.Q(E,E,[-v,v,v]),E}getProjectionDataForCustomLayer(i=!0){const c=new o.a2(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:i}),v=Ur(c,this.worldSize);o.S(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const E=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],k=o.bk();return o.Q(k,v,E),m.fallbackMatrix=k,m.mainMatrix=k,m}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function es(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Th(w){if(w.useSlerp)if(w.k<1){const i=o.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=o.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);o.bm(m,i,c,w.k);const v=o.bn(m);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(o.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Mh(w,i,c,m,v){const E=v.padding,k=or(v.worldSize,c.getNorthWest()),L=or(v.worldSize,c.getNorthEast()),N=or(v.worldSize,c.getSouthEast()),U=or(v.worldSize,c.getSouthWest()),W=o.ap(-m),J=k.rotate(W),Y=L.rotate(W),oe=N.rotate(W),ce=U.rotate(W),ye=new o.P(Math.max(J.x,Y.x,ce.x,oe.x),Math.max(J.y,Y.y,ce.y,oe.y)),_e=new o.P(Math.min(J.x,Y.x,ce.x,oe.x),Math.min(J.y,Y.y,ce.y,oe.y)),ve=ye.sub(_e),we=(v.width-(E.left+E.right+i.left+i.right))/ve.x,Le=(v.height-(E.top+E.bottom+i.top+i.bottom))/ve.y;if(Le<0||we<0)return void es();const Se=Math.min(o.at(v.scale*Math.min(we,Le)),w.maxZoom),ke=o.P.convert(w.offset),Fe=new o.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(o.ap(m)),Te=ke.add(Fe).mult(v.scale/o.aq(Se));return{center:Mr(v.worldSize,k.add(N).div(2).sub(Te)),zoom:Se,bearing:m}}class zl{get useGlobeControls(){return!1}handlePanInertia(i,c){const m=i.mag(),v=Math.abs(Kr(c));return{easingOffset:i.mult(Math.min(.75*v/m,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(i,c){i.bearingDelta&&c.setBearing(c.bearing+i.bearingDelta),i.pitchDelta&&c.setPitch(c.pitch+i.pitchDelta),i.rollDelta&&c.setRoll(c.roll+i.rollDelta),i.zoomDelta&&c.setZoom(c.zoom+i.zoomDelta)}handleMapControlsPan(i,c,m){i.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(m,i.around)}cameraForBoxAndBearing(i,c,m,v,E){return Mh(i,c,m,v,E)}handleJumpToCenterZoom(i,c){i.zoom!==(c.zoom!==void 0?+c.zoom:i.zoom)&&i.setZoom(+c.zoom),c.center!==void 0&&i.setCenter(o.V.convert(c.center))}handleEaseTo(i,c){const m=i.zoom,v=i.padding,E={roll:i.roll,pitch:i.pitch,bearing:i.bearing},k={roll:c.roll===void 0?i.roll:c.roll,pitch:c.pitch===void 0?i.pitch:c.pitch,bearing:c.bearing===void 0?i.bearing:c.bearing},L=c.zoom!==void 0,N=!i.isPaddingEqual(c.padding);let U=!1;const W=L?+c.zoom:i.zoom;let J=i.centerPoint.add(c.offsetAsPoint);const Y=i.screenPointToLocation(J),{center:oe,zoom:ce}=i.applyConstrain(o.V.convert(c.center||Y),W??m);jl(i,oe);const ye=or(i.worldSize,Y),_e=or(i.worldSize,oe).sub(ye),ve=o.aq(ce-m);return U=ce!==m,{easeFunc:we=>{if(U&&i.setZoom(o.G.number(m,ce,we)),o.bo(E,k)||Th({startEulerAngles:E,endEulerAngles:k,tr:i,k:we,useSlerp:E.roll!=k.roll}),N&&(i.interpolatePadding(v,c.padding,we),J=i.centerPoint.add(c.offsetAsPoint)),c.around)i.setLocationAtPoint(c.around,c.aroundPoint);else{const Le=o.aq(i.zoom-m),Se=ce>m?Math.min(2,ve):Math.max(.5,ve),ke=Math.pow(Se,1-we),Fe=Mr(i.worldSize,ye.add(_e.mult(we*ke)).mult(Le));i.setLocationAtPoint(i.renderWorldCopies?Fe.wrap():Fe,J)}},isZooming:U,elevationCenter:oe}}handleFlyTo(i,c){const m=c.zoom!==void 0,v=i.zoom,E=i.applyConstrain(o.V.convert(c.center||c.locationAtOffset),m?+c.zoom:v),k=E.center,L=E.zoom;jl(i,k);const N=or(i.worldSize,c.locationAtOffset),U=or(i.worldSize,k).sub(N),W=U.mag(),J=o.aq(L-v);let Y;if(c.minZoom!==void 0){const oe=Math.min(+c.minZoom,v,L),ce=i.applyConstrain(k,oe).zoom;Y=o.aq(ce-v)}return{easeFunc:(oe,ce,ye,_e)=>{i.setZoom(oe===1?L:v+o.at(ce));const ve=oe===1?k:Mr(i.worldSize,N.add(U.mult(ye)).mult(ce));i.setLocationAtPoint(i.renderWorldCopies?ve.wrap():ve,_e)},scaleOfZoom:J,targetCenter:k,scaleOfMinZoom:Y,pixelPathLength:W}}}class un{constructor(i,c,m){this.blendFunction=i,this.blendColor=c,this.mask=m}}un.Replace=[1,0],un.disabled=new un(un.Replace,o.bp.transparent,[!1,!1,!1,!1]),un.unblended=new un(un.Replace,o.bp.transparent,[!0,!0,!0,!0]),un.alphaBlended=new un([1,771],o.bp.transparent,[!0,!0,!0,!0]);const Nl=2305;class Xr{constructor(i,c,m){this.enable=i,this.mode=c,this.frontFace=m}}Xr.disabled=new Xr(!1,1029,Nl),Xr.backCCW=new Xr(!0,1029,Nl),Xr.frontCCW=new Xr(!0,1028,Nl);class Vr{constructor(i,c,m){this.func=i,this.mask=c,this.range=m}}Vr.ReadOnly=!1,Vr.ReadWrite=!0,Vr.disabled=new Vr(519,Vr.ReadOnly,[0,1]);const il=7680;class Jr{constructor(i,c,m,v,E,k){this.test=i,this.ref=c,this.mask=m,this.fail=v,this.depthFail=E,this.pass=k}}Jr.disabled=new Jr({func:519,mask:0},0,0,il,il,il);const Oc=new WeakMap;function hi(w){var i;if(Oc.has(w))return Oc.get(w);{const c=(i=w.getParameter(w.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Oc.set(w,c),c}}class ts{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const c=i.context,m=c.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new o.aW;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const E=new o.aY;E.emplaceBack(0,1,2),this._fullscreenTriangle=new In(c.createVertexBuffer(v,Lo.members),c.createIndexBuffer(E),o.aX.simpleSegment(0,0,v.length,E.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(m.TEXTURE1);const k=m.createTexture();m.bindTexture(m.TEXTURE_2D,k),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(k),hi(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,c){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,c=i.gl;i.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,c){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:o.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,Vr.disabled,Jr.disabled,un.unblended,Xr.disabled,((E,k)=>({u_input:E,u_output_expected:k}))(i,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&hi(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const E=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&hi(i)){const c=i.clientWaitSync(this._readbackQueue.sync,0,0);if(c===i.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ts._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let c=0;return c+=i[0]/256,c+=i[1]/65536,c+=i[2]/16777216,i[3]<127&&(c=-c),c/128}}const ks=o.a5/128;function Lc(w,i){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,m=c+(w.generateBorders?2:0),v=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),E=m+1,k=v+1,L=w.generateBorders?-1:0,N=w.generateBorders||w.extendToNorthPole?-1:0,U=c+(w.generateBorders?1:0),W=c+(w.generateBorders||w.extendToSouthPole?1:0),J=E*k,Y=m*v*6,oe=E*k>65536;if(oe&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ce=oe||i==="32bit",ye=new Int16Array(2*J);let _e=0;for(let Le=N;Le<=W;Le++)for(let Se=L;Se<=U;Se++){let ke=Se/c*o.a5;Se===-1&&(ke=-ks),Se===c+1&&(ke=o.a5+ks);let Fe=Le/c*o.a5;Le===-1&&(Fe=w.extendToNorthPole?o.br:-ks),Le===c+1&&(Fe=w.extendToSouthPole?o.bs:o.a5+ks),ye[_e++]=ke,ye[_e++]=Fe}const ve=ce?new Uint32Array(Y):new Uint16Array(Y);let we=0;for(let Le=0;Le<v;Le++)for(let Se=0;Se<m;Se++){const ke=Se+1+Le*E,Fe=Se+(Le+1)*E,Te=Se+1+(Le+1)*E;ve[we++]=Se+Le*E,ve[we++]=Fe,ve[we++]=ke,ve[we++]=ke,ve[we++]=Fe,ve[we++]=Te}return{vertices:ye.buffer.slice(0),indices:ve.buffer.slice(0),uses32bitIndices:ce}}const kh=new o.aV({fill:new o.bt(128,2),line:new o.bt(512,0),tile:new o.bt(128,32),stencil:new o.bt(128,1),circle:3});class Ah{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return wn.projectionGlobe}get vertexShaderPreludeCode(){return wn.projectionMercator.vertexSource}get subdivisionGranularity(){return kh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new ts(i));const c=o.X(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,m),E=B();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=E);const k=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bv(k))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,c,m,v,E){const k=(E==="stencil"?kh.stencil:kh.tile).getGranularityForZoomLevel(c.z);return this._getMesh(i,{granularity:k,generateBorders:m,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(i,c){const m=this._getMeshKey(c);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=(function(E,k){const L=Lc(k,"16bit"),N=o.aW.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),U=o.aY.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new In(E.createVertexBuffer(N,Lo.members),E.createIndexBuffer(U),o.aX.simpleSegment(0,0,N.length,U.length))})(i,c);return this._tileMeshCache[m]=v,v}recalculate(i){}hasTransition(){const i=B();let c=!1;return c=c||(i-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const Ip=new o.t({type:new o.D(o.u.projection.type)});class Dc extends o.E{constructor(i){super(),this._transitionable=new o.x(Ip,void 0),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new Ji,this._verticalPerspectiveProjection=new Ah}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof o.bw){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,c,m,v,E){return this.currentProjection.getMeshFromTileID(i,c,m,v,E)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function ea(w){const i=ku(w.worldSize,w.center.lat);return 2*Math.PI*i}function rs(w,i,c,m,v){const E=1/(1<<v),k=i/o.a5*E+m*E,L=o.by((w/o.a5*E+c*E)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI,U=Math.cos(N),W=new Float64Array(3);return W[0]=Math.sin(L)*U,W[1]=Math.sin(N),W[2]=Math.cos(L)*U,W}function ii(w){return(function(i,c){const m=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(i)*m,v[1]=Math.sin(c),v[2]=Math.cos(i)*m,v})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function ku(w,i){return w/(2*Math.PI)/Math.cos(i*Math.PI/180)}function Op(w){const i=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const m=w[0]/c,v=Math.acos(w[2]/c),E=(m>0?v:-v)/Math.PI*180;return new o.V(o.W(E,-180,180),i)}return new o.V(0,i)}function Au(w){return Math.cos(w*Math.PI/180)}function pi(w,i){const c=Au(w),m=Au(i);return o.at(m/c)}function ug(w,i){const c=w.rotate(i.bearingInRadians),m=i.zoom+pi(i.center.lat,0),v=o.bu(1/Au(i.center.lat),1/Au(Math.min(Math.abs(i.center.lat),60)),o.bx(m,7,3,0,1)),E=360/ea({worldSize:i.worldSize,center:{lat:i.center.lat}});return new o.V(i.center.lng-c.x*E*v,o.an(i.center.lat+c.y*E,-o.ao,o.ao))}function Lp(w){const i=.5*w,c=Math.sin(i),m=Math.cos(i);return Math.log(c+m)-Math.log(m-c)}function cg(w,i,c,m){const v=w.lat+c*m;if(Math.abs(c)>1){const E=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,k=Math.abs(w.lat+c)*Math.PI/180,L=Lp(E+m*(k-E)),N=Lp(E),U=Lp(k);return new o.V(w.lng+i*((L-N)/(U-N)),v)}return new o.V(w.lng+i*m,v)}class ev{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=i}swapBuffers(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(i,c,m,v){const E=`${i.z}_${i.x}_${i.y}_${v!=null&&v.terrain?"t":""}`,k=this._cache.get(E);if(k)return k;const L=this._cachePrevious.get(E);if(L)return this._cache.set(E,L),L;const N=this._boundingVolumeFactory(i,c,m,v);return this._cache.set(E,N),this._hadAnyChanges=!0,N}}class Iu{constructor(i,c,m,v){this.min=m,this.max=v,this.points=i,this.planes=c}static fromAabb(i,c){const m=[];for(let v=0;v<8;v++)m.push([1&~v?i[0]:c[0],(v>>1&1)==1?c[1]:i[1],(v>>2&1)==1?c[2]:i[2]]);return new Iu(m,[[-1,0,0,c[0]],[1,0,0,-i[0]],[0,-1,0,c[1]],[0,1,0,-i[1]],[0,0,-1,c[2]],[0,0,1,-i[2]]],i,c)}static fromCenterSizeAngles(i,c,m){const v=o.bB([],m[0],m[1],m[2]),E=o.bC([],[c[0],0,0],v),k=o.bC([],[0,c[1],0],v),L=o.bC([],[0,0,c[2]],v),N=[...i],U=[...i];for(let J=0;J<8;J++)for(let Y=0;Y<3;Y++){const oe=i[Y]+E[Y]*(1&~J?-1:1)+k[Y]*((J>>1&1)==1?1:-1)+L[Y]*((J>>2&1)==1?1:-1);N[Y]=Math.min(N[Y],oe),U[Y]=Math.max(U[Y],oe)}const W=[];for(let J=0;J<8;J++){const Y=[...i];o.b0(Y,Y,o.a$([],E,1&~J?-1:1)),o.b0(Y,Y,o.a$([],k,(J>>1&1)==1?1:-1)),o.b0(Y,Y,o.a$([],L,(J>>2&1)==1?1:-1)),W.push(Y)}return new Iu(W,[[...E,-o.b5(E,W[0])],[...k,-o.b5(k,W[0])],[...L,-o.b5(L,W[0])],[-E[0],-E[1],-E[2],-o.b5(E,W[7])],[-k[0],-k[1],-k[2],-o.b5(k,W[7])],[-L[0],-L[1],-L[2],-o.b5(L,W[7])]],N,U)}intersectsFrustum(i){let c=!0;const m=this.points.length,v=this.planes.length,E=i.planes.length,k=i.points.length;for(let L=0;L<E;L++){const N=i.planes[L];let U=0;for(let W=0;W<m;W++){const J=this.points[W];N[0]*J[0]+N[1]*J[1]+N[2]*J[2]+N[3]>=0&&U++}if(U===0)return 0;U<m&&(c=!1)}if(c)return 2;for(let L=0;L<v;L++){const N=this.planes[L];let U=0;for(let W=0;W<k;W++){const J=i.points[W];N[0]*J[0]+N[1]*J[1]+N[2]*J[2]+N[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(i){const c=this.points.length;let m=0;for(let v=0;v<c;v++){const E=this.points[v];i[0]*E[0]+i[1]*E[1]+i[2]*E[2]+i[3]>=0&&m++}return m===c?2:m===0?0:1}}function Hd(w,i,c){const m=w-i;return m<0?-m:Math.max(0,m-c)}function Rc(w,i,c,m,v){const E=w-c;let k;return k=E<0?Math.min(-E,1+E-v):E>1?Math.min(Math.max(E-v,0),1-E):0,Math.max(k,Hd(i,m,v))}class Dp{constructor(){this._boundingVolumeCache=new ev(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(i,c,m,v){const E=1<<m.z,k=1/E,L=m.x/E,N=m.y/E;let U=2;return U=Math.min(U,Rc(i,c,L,N,k)),U=Math.min(U,Rc(i,c,L+.5,-N-k,k)),U=Math.min(U,Rc(i,c,L+.5,2-N-k,k)),U}getWrap(i,c,m){const v=1<<c.z,E=1/v,k=c.x/v,L=Hd(i.x,k,E),N=Hd(i.x,k-1,E),U=Hd(i.x,k+1,E),W=Math.min(L,N,U);return W===U?1:W===N?-1:0}allowVariableZoom(i,c){return yn(i,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(i,c,m,v){return this._boundingVolumeCache.getTileBoundingVolume(i,c,m,v)}_computeTileBoundingVolume(i,c,m,v){var E,k;let L=0,N=0;if(v!=null&&v.terrain){const U=new o.a2(i.z,c,i.z,i.x,i.y),W=v.terrain.getMinMaxElevation(U);L=(E=W.minElevation)!==null&&E!==void 0?E:Math.min(0,m),N=(k=W.maxElevation)!==null&&k!==void 0?k:Math.max(0,m)}if(L/=o.bE,N/=o.bE,L+=1,N+=1,i.z<=0)return Iu.fromAabb([-N,-N,-N],[N,N,N]);if(i.z===1)return Iu.fromAabb([i.x===0?-N:0,i.y===0?0:-N,-N],[i.x===0?0:N,i.y===0?N:0,N]);{const U=[rs(0,0,i.x,i.y,i.z),rs(o.a5,0,i.x,i.y,i.z),rs(o.a5,o.a5,i.x,i.y,i.z),rs(0,o.a5,i.x,i.y,i.z)],W=[];for(const ot of U)W.push(o.a$([],ot,N));if(N!==L)for(const ot of U)W.push(o.a$([],ot,L));i.y===0&&W.push([0,1,0]),i.y===(1<<i.z)-1&&W.push([0,-1,0]);const J=[1,1,1],Y=[-1,-1,-1];for(const ot of W)for(let st=0;st<3;st++)J[st]=Math.min(J[st],ot[st]),Y[st]=Math.max(Y[st],ot[st]);const oe=rs(o.a5/2,o.a5/2,i.x,i.y,i.z),ce=o.b4([],[0,1,0],oe);o.b3(ce,ce);const ye=o.b4([],oe,ce);o.b3(ye,ye);const _e=o.b4([],U[2],U[1]);o.b3(_e,_e);const ve=o.b4([],U[0],U[3]);o.b3(ve,ve),W.push(o.a$([],oe,N)),i.y>=(1<<i.z)/2&&W.push(o.a$([],rs(o.a5/2,0,i.x,i.y,i.z),N)),i.y<(1<<i.z)/2&&W.push(o.a$([],rs(o.a5/2,o.a5,i.x,i.y,i.z),N));const we=Ih(oe,W),Le=Ih(ye,W),Se=[-oe[0],-oe[1],-oe[2],we.max],ke=[oe[0],oe[1],oe[2],-we.min],Fe=[-ye[0],-ye[1],-ye[2],Le.max],Te=[ye[0],ye[1],ye[2],-Le.min],Ge=[..._e,0],ht=[...ve,0],at=[];return i.y===0?at.push(o.bD(ht,Ge,Se),o.bD(ht,Ge,ke)):at.push(o.bD(Fe,Ge,Se),o.bD(Fe,Ge,ke),o.bD(Fe,ht,Se),o.bD(Fe,ht,ke)),i.y===(1<<i.z)-1?at.push(o.bD(ht,Ge,Se),o.bD(ht,Ge,ke)):at.push(o.bD(Te,Ge,Se),o.bD(Te,Ge,ke),o.bD(Te,ht,Se),o.bD(Te,ht,ke)),new Iu(at,[Se,ke,Fe,Te,Ge,ht],J,Y)}}}function Ih(w,i){let c=1/0,m=-1/0;for(const v of i){const E=o.b5(w,v);c=Math.min(c,E),m=Math.max(m,E)}return{min:c,max:m}}class Fl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c){this._helper.resize(i,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(i){this._cachedClippingPlane=o.bF(),this._projectionMatrix=o.bj(),this._globeViewProjMatrix32f=o.bi(),this._globeViewProjMatrixNoCorrection=o.bj(),this._globeViewProjMatrixNoCorrectionInverted=o.bj(),this._globeProjMatrixInverted=o.bj(),this._cameraPosition=o.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,m)=>{const v=o.an(c.lat,-o.ao,o.ao),E=o.an(+m,this.minZoom+pi(0,v),this.maxZoom);return{center:new o.V(c.lng,v),zoom:E}},this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._coveringTilesDetailsProvider=new Dp}clone(){const i=new Fl;return i.apply(this,!1),i}apply(i,c,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(i,c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=o.bz();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:c,applyGlobeMatrix:m}=i,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const c=this.pitchInRadians,m=this.cameraToCenterDistance/i,v=Math.sin(c)*m,E=Math.cos(c)*m+1,k=1/Math.sqrt(v*v+E*E)*1;let L=-v,N=E;const U=Math.sqrt(L*L+N*N);L/=U,N/=U;const W=[0,L,N];o.bG(W,W,[0,0,0],-this.bearingInRadians),o.bH(W,W,[0,0,0],-1*this.center.lat*Math.PI/180),o.bI(W,W,[0,0,0],this.center.lng*Math.PI/180);const J=1/o.b7(W);return o.a$(W,W,J),[...W,-k*J]}isLocationOccluded(i){return!this.isSurfacePointVisible(ii(i))}transformLightDirection(i){const c=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),E=[Math.sin(c)*v,Math.sin(m),Math.cos(c)*v],k=[E[2],0,-E[0]],L=[0,0,0];o.b4(L,k,E),o.b3(k,k),o.b3(L,L);const N=[0,0,0];return o.b3(N,[k[0]*i[0]+L[0]*i[1]+E[0]*i[2],k[1]*i[0]+L[1]*i[1]+E[1]*i[2],k[2]*i[0]+L[2]*i[1]+E[2]*i[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,c,m){const v=(function(L,N,U){const W=1/(1<<U.z);return new o.a9(L/o.a5*W+U.x*W,N/o.a5*W+U.y*W)})(i,c,m.canonical),E=(k=v.y,[o.by(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI]);var k;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(i,c,m,v){const E=m.canonical,k=rs(i,c,E.x,E.y,E.z),L=1+(v?v(i,c):0)/o.bE,N=[k[0]*L,k[1]*L,k[2]*L,1];o.aH(N,N,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,W=U[0]*k[0]+U[1]*k[1]+U[2]*k[2]+U[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:W}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=ku(this.worldSize,this.center.lat),c=o.bk(),m=o.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),o.be(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=o.bf(c),this._globeProjMatrixInverted=o.bk(),o.aB(this._globeProjMatrixInverted,c),o.O(c,c,[0,0,-this.cameraToCenterDistance]),o.bg(c,c,this.rollInRadians),o.bh(c,c,-this.pitchInRadians),o.bg(c,c,this.bearingInRadians),o.O(c,c,[0,0,-i]);const E=o.bz();E[0]=i,E[1]=i,E[2]=i,o.bh(m,c,this.center.lat*Math.PI/180),o.bJ(m,m,-this.center.lng*Math.PI/180),o.Q(m,m,E),this._globeViewProjMatrixNoCorrection=m,o.bh(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bJ(c,c,-this.center.lng*Math.PI/180),o.Q(c,c,E),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),o.aB(this._globeViewProjMatrixNoCorrectionInverted,m);const k=o.bz();this._cameraPosition=o.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/i,o.bG(this._cameraPosition,this._cameraPosition,k,-this.rollInRadians),o.bH(this._cameraPosition,this._cameraPosition,k,this.pitchInRadians),o.bG(this._cameraPosition,this._cameraPosition,k,-this.bearingInRadians),o.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bH(this._cameraPosition,this._cameraPosition,k,-this.center.lat*Math.PI/180),o.bI(this._cameraPosition,this._cameraPosition,k,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const L=o.bf(this._globeViewProjMatrixNoCorrectionInverted);o.Q(L,L,[1,1,-1]),this._cachedFrustum=to.fromInvProjectionMatrix(L,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(i){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.bk();return o.ar(c),c}getVisibleUnwrappedCoordinates(i){return[new o.bc(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ii(i);o.a$(m,m,1+c/o.bE);const v=o.bF();return o.aH(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(i){}getBounds(){const i=.5*this.width,c=.5*this.height,m=[new o.P(0,0),new o.P(i,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(i,this.height),new o.P(0,this.height),new o.P(0,c)],v=[];for(const J of m)v.push(this.unprojectScreenPoint(J));let E=0,k=0,L=0,N=0;const U=this.center;for(const J of v){const Y=o.bK(U.lng,J.lng),oe=o.bK(U.lat,J.lat);Y<k&&(k=Y),Y>E&&(E=Y),oe<N&&(N=oe),oe>L&&(L=oe)}const W=[U.lng+k,U.lat+N,U.lng+E,U.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(W[3]=90,W[0]=-180,W[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(W[1]=-90,W[0]=-180,W[2]=180),new Wr(W)}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}setLocationAtPoint(i,c){const m=ii(this.unprojectScreenPoint(c)),v=ii(i),E=o.bz();o.bL(E);const k=o.bz();o.bI(k,m,E,-this.center.lng*Math.PI/180),o.bH(k,k,E,this.center.lat*Math.PI/180);const L=v[0]*v[0]+v[2]*v[2],N=k[0]*k[0];if(L<N)return;const U=Math.sqrt(L-N),W=-U,J=o.bM(v[0],v[2],k[0],U),Y=o.bM(v[0],v[2],k[0],W),oe=o.bz();o.bI(oe,v,E,-J);const ce=o.bM(oe[1],oe[2],k[1],k[2]),ye=o.bz();o.bI(ye,v,E,-Y);const _e=o.bM(ye[1],ye[2],k[1],k[2]),ve=.5*Math.PI,we=ce>=-ve&&ce<=ve,Le=_e>=-ve&&_e<=ve;let Se,ke;if(we&&Le){const ht=this.center.lng*Math.PI/180,at=this.center.lat*Math.PI/180;o.bN(J,ht)+o.bN(ce,at)<o.bN(Y,ht)+o.bN(_e,at)?(Se=J,ke=ce):(Se=Y,ke=_e)}else if(we)Se=J,ke=ce;else{if(!Le)return;Se=Y,ke=_e}const Fe=Se/Math.PI*180,Te=ke/Math.PI*180,Ge=this.center.lat;this.setCenter(new o.V(Fe,o.an(Te,-90,90))),this.setZoom(this.zoom+pi(Ge,this.center.lat))}locationToScreenPoint(i,c){const m=ii(i);if(c){const v=c.getElevationForLngLatZoom(i,this._helper._tileZoom);o.a$(m,m,1+v/o.bE)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(i){const c=o.bF();return o.aH(c,[...i,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,c){if(c){const m=c.pointCoordinate(i);if(m)return m}return o.a9.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,c){var m;return(m=this.screenPointToMercatorCoordinate(i,c))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(i,c){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(i){const c=o.bF();c[0]=i.x/this.width*2-1,c[1]=-1*(i.y/this.height*2-1),c[2]=1,c[3]=1,o.aH(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const m=o.bz();m[0]=c[0]-this._cameraPosition[0],m[1]=c[1]-this._cameraPosition[1],m[2]=c[2]-this._cameraPosition[2];const v=o.bz();return o.b3(v,m),v}isSurfacePointVisible(i){const c=this._cachedClippingPlane;return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const c=o.bF();return o.aH(c,[...i,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(i,c){const m=o.b5(i,c),v=o.bz(),E=o.bz();o.a$(E,c,m),o.b2(v,i,E);const k=1-o.b5(v,v);if(k<0)return null;const L=o.b5(i,i)-1,N=-m+(m<0?1:-1)*Math.sqrt(k),U=L/N,W=N;return{tMin:Math.min(U,W),tMax:Math.max(U,W)}}unprojectScreenPoint(i){const c=this._cameraPosition,m=this.getRayDirectionFromPixel(i),v=this.rayPlanetIntersection(c,m);if(v){const W=o.bz();o.b0(W,c,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const J=o.bz();return o.b3(J,W),Op(J)}const E=this._cachedClippingPlane,k=E[0]*m[0]+E[1]*m[1]+E[2]*m[2],L=-o.bb(E,c)/k,N=o.bz();if(L>0)o.b0(N,c,[m[0]*L,m[1]*L,m[2]*L]);else{const W=o.bz();o.b0(W,c,[2*m[0],2*m[1],2*m[2]]);const J=o.bb(this._cachedClippingPlane,W);o.b2(N,W,[this._cachedClippingPlane[0]*J,this._cachedClippingPlane[1]*J,this._cachedClippingPlane[2]*J])}const U=(function(W){const J=o.bz();return J[0]=W[0]*-W[3],J[1]=W[1]*-W[3],J[2]=W[2]*-W[3],{center:J,radius:Math.sqrt(1-W[3]*W[3])}})(E);return Op((function(W,J,Y){const oe=o.bz();o.b2(oe,Y,W);const ce=o.bz();return o.bA(ce,W,oe,J/o.b9(oe)),ce})(U.center,U.radius,N))}getMatrixForModel(i,c){const m=o.V.convert(i),v=1/o.bE,E=o.bj();return o.bJ(E,E,m.lng/180*Math.PI),o.bh(E,E,-m.lat/180*Math.PI),o.O(E,E,[0,0,1+c/o.bE]),o.bh(E,E,.5*Math.PI),o.Q(E,E,[v,v,v]),E}getProjectionDataForCustomLayer(i=!0){const c=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:i});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(i){}}class jc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,c,m){return this._helper.interpolatePadding(i,c,m)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,c,m=!0){this._helper.resize(i,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}setConstrainOverride(i){this._helper.setConstrainOverride(i)}overrideNearFarZ(i,c){this._helper.overrideNearFarZ(i,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,c){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(i){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,m)=>this.currentTransform.defaultConstrain(c,m),this.applyConstrain=(c,m)=>this._helper.applyConstrain(c,m),this._helper=new Jo({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,m)=>this.defaultConstrain(c,m)},i),this._globeness=1,this._mercatorTransform=new Mu,this._verticalPerspectiveTransform=new Fl}clone(){const i=new jc;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this,!1),i}apply(i,c){this._helper.apply(i,c),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const c=this._mercatorTransform.getProjectionData(i),m=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:c.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return o.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,c,m){const v=this._mercatorTransform.getPitchedTextCorrection(i,c,m),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,c,m);return o.bu(v,E,this._globeness)}projectTileCoordinates(i,c,m,v){return this.currentTransform.projectTileCoordinates(i,c,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,c){return this.currentTransform.lngLatToCameraDepth(i,c)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(i,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(i,c,m,v)}setLocationAtPoint(i,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,c),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(i,c),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(i,c){return this.currentTransform.locationToScreenPoint(i,c)}screenPointToMercatorCoordinate(i,c){return this.currentTransform.screenPointToMercatorCoordinate(i,c)}screenPointToLocation(i,c){return this.currentTransform.screenPointToLocation(i,c)}isPointOnMapSurface(i,c){return this.currentTransform.isPointOnMapSurface(i,c)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,c){return this.currentTransform.getMatrixForModel(i,c)}getProjectionDataForCustomLayer(i=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return c;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return m.fallbackMatrix=c.mainMatrix,m}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Di{get useGlobeControls(){return!0}handlePanInertia(i,c){const m=ug(i,c);return Math.abs(m.lng-c.center.lng)>180&&(m.lng=c.center.lng+179.5*Math.sign(m.lng-c.center.lng)),{easingCenter:m,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,c){const m=i.around,v=c.screenPointToLocation(m);i.bearingDelta&&c.setBearing(c.bearing+i.bearingDelta),i.pitchDelta&&c.setPitch(c.pitch+i.pitchDelta),i.rollDelta&&c.setRoll(c.roll+i.rollDelta);const E=c.zoom;i.zoomDelta&&c.setZoom(c.zoom+i.zoomDelta);const k=c.zoom-E;if(k===0)return;const L=o.bK(c.center.lng,v.lng),N=L/(Math.abs(L/180)+1),U=o.bK(c.center.lat,v.lat),W=c.getRayDirectionFromPixel(m),J=c.cameraPosition,Y=-1*o.b5(J,W),oe=o.bz();o.b0(oe,J,[W[0]*Y,W[1]*Y,W[2]*Y]);const ce=o.b7(oe)-1,ye=Math.exp(.5*-Math.max(ce-.3,0)),_e=ku(c.worldSize,c.center.lat)/Math.min(c.width,c.height),ve=o.bx(_e,.9,.5,1,.25),we=(1-o.aq(-k))*Math.min(ye,ve),Le=c.center.lat,Se=c.zoom,ke=new o.V(c.center.lng+N*we,o.an(c.center.lat+U*we,-o.ao,o.ao));c.setLocationAtPoint(v,m);const Fe=c.center,Te=o.bx(Math.abs(L),45,85,0,1),Ge=o.bx(_e,.75,.35,0,1),ht=Math.pow(Math.max(Te,Ge),.25),at=o.bK(Fe.lng,ke.lng),ot=o.bK(Fe.lat,ke.lat);c.setCenter(new o.V(Fe.lng+at*ht,Fe.lat+ot*ht).wrap()),c.setZoom(Se+pi(Le,c.center.lat))}handleMapControlsPan(i,c,m){if(!i.panDelta)return;const v=c.center.lat,E=c.zoom;c.setCenter(ug(i.panDelta,c).wrap()),c.setZoom(E+pi(v,c.center.lat))}cameraForBoxAndBearing(i,c,m,v,E){const k=Mh(i,c,m,v,E),L=c.left/E.width*2-1,N=(E.width-c.right)/E.width*2-1,U=c.top/E.height*-2+1,W=(E.height-c.bottom)/E.height*-2+1,J=o.bK(m.getWest(),m.getEast())<0,Y=J?m.getEast():m.getWest(),oe=J?m.getWest():m.getEast(),ce=Math.max(m.getNorth(),m.getSouth()),ye=Math.min(m.getNorth(),m.getSouth()),_e=Y+.5*o.bK(Y,oe),ve=ce+.5*o.bK(ce,ye),we=E.clone();we.setCenter(k.center),we.setBearing(k.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(k.zoom);const Le=we.modelViewProjectionMatrix,Se=[ii(m.getNorthWest()),ii(m.getNorthEast()),ii(m.getSouthWest()),ii(m.getSouthEast()),ii(new o.V(oe,ve)),ii(new o.V(Y,ve)),ii(new o.V(_e,ce)),ii(new o.V(_e,ye))],ke=ii(k.center);let Fe=Number.POSITIVE_INFINITY;for(const Te of Se)L<0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"x",L))),N>0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"x",N))),U>0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"y",U))),W<0&&(Fe=Di.getLesserNonNegativeNonNull(Fe,Di.solveVectorScale(Te,ke,Le,"y",W)));if(Number.isFinite(Fe)&&Fe!==0)return k.zoom=we.zoom+o.at(Fe),k;es()}handleJumpToCenterZoom(i,c){const m=i.center.lat,v=i.applyConstrain(c.center?o.V.convert(c.center):i.center,i.zoom).center;i.setCenter(v.wrap());const E=c.zoom!==void 0?+c.zoom:i.zoom+pi(m,v.lat);i.zoom!==E&&i.setZoom(E)}handleEaseTo(i,c){const m=i.zoom,v=i.center,E=i.padding,k={roll:i.roll,pitch:i.pitch,bearing:i.bearing},L={roll:c.roll===void 0?i.roll:c.roll,pitch:c.pitch===void 0?i.pitch:c.pitch,bearing:c.bearing===void 0?i.bearing:c.bearing},N=c.zoom!==void 0,U=!i.isPaddingEqual(c.padding);let W=!1;const J=c.center?o.V.convert(c.center):v,Y=i.applyConstrain(J,m).center;jl(i,Y);const oe=i.clone();oe.setCenter(Y),oe.setZoom(N?+c.zoom:m+pi(v.lat,J.lat)),oe.setBearing(c.bearing);const ce=new o.P(o.an(i.centerPoint.x+c.offsetAsPoint.x,0,i.width),o.an(i.centerPoint.y+c.offsetAsPoint.y,0,i.height));oe.setLocationAtPoint(Y,ce);const ye=(c.offset&&c.offsetAsPoint.mag())>0?oe.center:Y,_e=N?+c.zoom:m+pi(v.lat,ye.lat),ve=m+pi(v.lat,0),we=_e+pi(ye.lat,0),Le=o.bK(v.lng,ye.lng),Se=o.bK(v.lat,ye.lat),ke=o.aq(we-ve);return W=_e!==m,{easeFunc:Fe=>{if(o.bo(k,L)||Th({startEulerAngles:k,endEulerAngles:L,tr:i,k:Fe,useSlerp:k.roll!=L.roll}),U&&i.interpolatePadding(E,c.padding,Fe),c.around)o.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(c.around,c.aroundPoint);else{const Te=we>ve?Math.min(2,ke):Math.max(.5,ke),Ge=Math.pow(Te,1-Fe),ht=cg(v,Le,Se,Fe*Ge);i.setCenter(ht.wrap())}if(W){const Te=o.G.number(ve,we,Fe)+pi(0,i.center.lat);i.setZoom(Te)}},isZooming:W,elevationCenter:ye}}handleFlyTo(i,c){const m=c.zoom!==void 0,v=i.center,E=i.zoom,k=i.padding,L=!i.isPaddingEqual(c.padding),N=i.applyConstrain(o.V.convert(c.center||c.locationAtOffset),E).center,U=m?+c.zoom:i.zoom+pi(i.center.lat,N.lat),W=i.clone();W.setCenter(N),W.setZoom(U),W.setBearing(c.bearing);const J=new o.P(o.an(i.centerPoint.x+c.offsetAsPoint.x,0,i.width),o.an(i.centerPoint.y+c.offsetAsPoint.y,0,i.height));W.setLocationAtPoint(N,J);const Y=W.center;jl(i,Y);const oe=(function(Se,ke,Fe){const Te=ii(ke),Ge=ii(Fe),ht=o.b5(Te,Ge),at=Math.acos(ht),ot=ea(Se);return at/(2*Math.PI)*ot})(i,v,Y),ce=E+pi(v.lat,0),ye=U+pi(Y.lat,0),_e=o.aq(ye-ce);let ve;if(typeof c.minZoom=="number"){const Se=+c.minZoom+pi(Y.lat,0),ke=Math.min(Se,ce,ye)+pi(0,Y.lat),Fe=i.applyConstrain(Y,ke).zoom+pi(Y.lat,0);ve=o.aq(Fe-ce)}const we=o.bK(v.lng,Y.lng),Le=o.bK(v.lat,Y.lat);return{easeFunc:(Se,ke,Fe,Te)=>{const Ge=cg(v,we,Le,Fe);L&&i.interpolatePadding(k,c.padding,Se);const ht=Se===1?Y:Ge;i.setCenter(ht.wrap());const at=ce+o.at(ke);i.setZoom(Se===1?U:at+pi(0,ht.lat))},scaleOfZoom:_e,targetCenter:Y,scaleOfMinZoom:ve,pixelPathLength:oe}}static solveVectorScale(i,c,m,v,E){const k=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],L=[m[3],m[7],m[11],m[15]],N=i[0]*k[0]+i[1]*k[1]+i[2]*k[2],U=i[0]*L[0]+i[1]*L[1]+i[2]*L[2],W=c[0]*k[0]+c[1]*k[1]+c[2]*k[2],J=c[0]*L[0]+c[1]*L[1]+c[2]*L[2];return W+E*U===N+E*J||L[3]*(N-W)+k[3]*(J-U)+N*J==W*U?null:(W+k[3]-E*J-E*L[3])/(W-N-E*J+E*U)}static getLesserNonNegativeNonNull(i,c){return c!==null&&c>=0&&c<i?c:i}}class hg{constructor(i){this._globe=i,this._mercatorCameraHelper=new zl,this._verticalPerspectiveCameraHelper=new Di}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,c){return this.currentHelper.handlePanInertia(i,c)}handleMapControlsRollPitchBearingZoom(i,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,c)}handleMapControlsPan(i,c,m){this.currentHelper.handleMapControlsPan(i,c,m)}cameraForBoxAndBearing(i,c,m,v,E){return this.currentHelper.cameraForBoxAndBearing(i,c,m,v,E)}handleJumpToCenterZoom(i,c){this.currentHelper.handleJumpToCenterZoom(i,c)}handleEaseTo(i,c){return this.currentHelper.handleEaseTo(i,c)}handleFlyTo(i,c){return this.currentHelper.handleFlyTo(i,c)}}const Ou=(w,i)=>o.B(w,i&&i.filter((c=>c.identifier!=="source.canvas"))),Oh=o.bO();class Lu extends o.E{constructor(i,c={}){var m,v;super(),this._rtlPluginLoaded=()=>{for(const k in this.tileManagers){const L=this.tileManagers[k].getSource().type;L!=="vector"&&L!=="geojson"||this.tileManagers[k].reload()}},this.map=i,this.dispatcher=new Lt(ct(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((k,L)=>this.getGlyphs(k,L))),this.dispatcher.registerMessageHandler("GI",((k,L)=>this.getImages(k,L))),this.dispatcher.registerMessageHandler("GDA",((k,L)=>this.getDashes(k,L))),this.imageManager=new Ne,this.imageManager.setEventedParent(this);const E=((m=i._container)===null||m===void 0?void 0:m.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new wt(i._requestManager,c.localIdeographFontFamily,E),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new Qi,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bP()),Ze().on(Me,this._rtlPluginLoaded),this.on("data",(k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const L=this.tileManagers[k.sourceId];if(!L)return;const N=L.getSource();if(N&&N.vectorLayerIds)for(const U in this._layers){const W=this._layers[U];W.source===N.id&&this._validateLayer(W)}}))}_setInitialValues(){var i;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((i=this.crossTileSymbolIndex)===null||i===void 0?void 0:i.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(i,c){var m,v,E;this._checkLoaded();const k=c===null?(E=(v=(m=this.stylesheet.state)===null||m===void 0?void 0:m[i])===null||v===void 0?void 0:v.default)!==null&&E!==void 0?E:null:c;if(o.bR(k,this._globalState[i]))return this;this._globalState[i]=k,this._applyGlobalStateChanges([i])}getGlobalState(){return this._globalState}setGlobalState(i){this._checkLoaded();const c=[];for(const m in i)!o.bR(this._globalState[m],i[m].default)&&(c.push(m),this._globalState[m]=i[m].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(i){if(i.length===0)return;const c=new Set,m={};for(const v of i){m[v]=this._globalState[v];for(const E in this._layers){const k=this._layers[E],L=k.getLayoutAffectingGlobalStateRefs(),N=k.getPaintAffectingGlobalStateRefs(),U=k.getVisibilityAffectingGlobalStateRefs();if(L.has(v)&&c.add(k.source),N.has(v))for(const{name:W,value:J}of N.get(v))this._updatePaintProperty(k,W,J);U!=null&&U.has(v)&&(k.recalculateVisibility(),this._updateLayer(k))}}this.dispatcher.broadcast("UGS",m);for(const v in this.tileManagers)c.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(i,c={},m){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const E=this._loadStyleRequest;o.j(v,this._loadStyleRequest).then((k=>{this._loadStyleRequest=null,this._load(k.data,c,m)})).catch((k=>{this._loadStyleRequest=null,k&&!E.signal.aborted&&this.fire(new o.k(k))}))}loadJSON(i,c={},m){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,m)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Oh,{validate:!1})}_load(i,c,m){var v,E;let k=c.transformStyle?c.transformStyle(m,i):i;if(!c.validate||!Ou(this,o.C(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const L in k.sources)this.addSource(L,k.sources[L],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var i,c,m;const v=o.bS(this.stylesheet.layers);this.setGlobalState((i=this.stylesheet.state)!==null&&i!==void 0?i:null),this.dispatcher.broadcast("SL",v),this._order=v.map((E=>E.id)),this._layers={},this._serializedLayers=null;for(const E of v){const k=o.bT(E,this._globalState);if(k.setEventedParent(this,{layer:{id:E.id}}),this._layers[E.id]=k,o.bU(k)&&this.tileManagers[k.source]){const L=(m=(c=E.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&m!==void 0?m:k.paint.get("raster-fade-duration");this.tileManagers[k.source].setRasterFadeDuration(L)}}}_loadSprite(i,c=!1,m=void 0){this.imageManager.setLoaded(!1);const v=new AbortController;let E;this._spriteRequest=v,(function(k,L,N,U){return o._(this,void 0,void 0,(function*(){const W=xe(k),J=N>1?"@2x":"",Y={},oe={};for(const{id:ce,url:ye}of W){const _e=L.transformRequest($e(ye,J,".json"),"SpriteJSON");Y[ce]=o.j(_e,U);const ve=L.transformRequest($e(ye,J,".png"),"SpriteImage");oe[ce]=re.getImage(ve,U)}return yield Promise.all([...Object.values(Y),...Object.values(oe)]),(function(ce,ye){return o._(this,void 0,void 0,(function*(){const _e={};for(const ve in ce){_e[ve]={};const we=z.getImageCanvasContext((yield ye[ve]).data),Le=(yield ce[ve]).data;for(const Se in Le){const{width:ke,height:Fe,x:Te,y:Ge,sdf:ht,pixelRatio:at,stretchX:ot,stretchY:st,content:Nt,textFitWidth:Vt,textFitHeight:It}=Le[Se];_e[ve][Se]={data:null,pixelRatio:at,sdf:ht,stretchX:ot,stretchY:st,content:Nt,textFitWidth:Vt,textFitHeight:It,spriteData:{width:ke,height:Fe,x:Te,y:Ge,context:we}}}}return _e}))})(Y,oe)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((k=>{if(this._spriteRequest=null,k)for(const L in k){this._spritesImagesIds[L]=[];const N=this._spritesImagesIds[L]?this._spritesImagesIds[L].filter((U=>!(U in k))):[];for(const U of N)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in k[L]){const W=L==="default"?U:`${L}:${U}`;this._spritesImagesIds[L].push(W),W in this.imageManager.images?this.imageManager.updateImage(W,k[L][U],!1):this.imageManager.addImage(W,k[L][U]),c&&(this._changedImages[W]=!0)}}})).catch((k=>{this._spriteRequest=null,E=k,v.signal.aborted||this.fire(new o.k(E))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),m&&m(E)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(i){const c=this.tileManagers[i.source];if(!c)return;const m=i.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.tileManagers)if(!this.tileManagers[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,c=!1){const m=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c?o.bV(m):m);const v=[];for(const E of i)if(m[E]){const k=c?o.bV(m[E]):m[E];v.push(k)}return v}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(i[m]=v.serialize())}return i}hasTransitions(){var i,c,m;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.tileManagers)if(this.tileManagers[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(v.length||E.length)&&this._updateWorkerLayers(v,E);for(const k in this._updatedSources){const L=this._updatedSources[k];if(L==="reload")this._reloadSource(k);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.tileManagers){const E=this.tileManagers[v];m[v]=E.used,E.used=!1}for(const v of this._order){const E=this._layers[v];E.recalculate(i,this._availableImages),!E.isHidden(i.zoom)&&E.source&&(this.tileManagers[E.source].used=!0)}for(const v in m){const E=this.tileManagers[v];!!m[v]!=!!E.used&&E.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.tileManagers)this.tileManagers[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var m;this._checkLoaded();const v=this.serialize();if(i=c.transformStyle?c.transformStyle(v,i):i,((m=c.validate)===null||m===void 0||m)&&Ou(this,o.C(i)))return!1;(i=o.bV(i)).layers=o.bS(i.layers);const E=o.bW(v,i),k=this._getOperationsToPerform(E);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const L of k.operations)L();return this.stylesheet=i,this._serializedLayers=null,this.fire(new o.l("style.load",{style:this})),!0}_getOperationsToPerform(i){const c=[],m=[];for(const v of i)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":c.push((()=>{}));break;default:m.push(v.command)}return{operations:c,unimplemented:m}}addImage(i,c){if(this.getImage(i))return this.fire(new o.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new o.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,m={}){if(this._checkLoaded(),this.tileManagers[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.C.source,`sources.${i}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.tileManagers[i]=new hr(i,c,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:i}))),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new o.k(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const c=this.tileManagers[i];delete this.tileManagers[i],delete this._updatedSources[i],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.tileManagers[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const m=this.tileManagers[i].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(i){return this.tileManagers[i]&&this.tileManagers[i].getSource()}addLayer(i,c,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new o.k(new Error(`Layer "${v}" already exists on this map.`)));let E;if(i.type==="custom"){if(Ou(this,o.bX(i)))return;E=o.bT(i,this._globalState)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(v,i.source),i=o.bV(i),i=o.e(i,{source:v})),this._validate(o.C.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;E=o.bT(i,this._globalState),this._validateLayer(E),E.setEventedParent(this,{layer:{id:v}})}const k=c?this._order.indexOf(c):this._order.length;if(c&&k===-1)this.fire(new o.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(k,0,v),this._layerOrderChanged=!0,this._layers[v]=E,this._removedLayers[v]&&E.source&&E.type!=="custom"){const L=this._removedLayers[v];delete this._removedLayers[v],L.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.tileManagers[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new o.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new o.k(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!o.bR(v.filter,c))return c==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(o.C.filter,`layers.${v.id}.filter`,c,null,m)||(v.setFilter(o.bV(c)),this._updateLayer(v)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return o.bV(this.getLayer(i).filter)}setLayoutProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?o.bR(E.getLayoutProperty(c),m)||(E.setLayoutProperty(c,m,v),this._updateLayer(E)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const m=this.getLayer(i);if(m)return m.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?o.bR(E.getPaintProperty(c),m)||this._updatePaintProperty(E,c,m,v):this.fire(new o.k(new Error(`Cannot style non-existing layer "${i}".`)))}_updatePaintProperty(i,c,m,v={}){i.setPaintProperty(c,m,v)&&this._updateLayer(i),o.bU(i)&&c==="raster-fade-duration"&&this.tileManagers[i.source].setRasterFadeDuration(m),this._changed=!0,this._updatedPaintProps[i.id]=!0,this._serializedLayers=null}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const m=i.source,v=i.sourceLayer,E=this.tileManagers[m];if(E===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const k=E.getSource().type;k==="geojson"&&v?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||v?(i.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(v,i.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const m=i.source,v=this.tileManagers[m];if(v===void 0)return void this.fire(new o.k(new Error(`The source '${m}' does not exist in the map's style.`)));const E=v.getSource().type,k=E==="vector"?i.sourceLayer:void 0;E!=="vector"||k?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(k,i.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,m=i.sourceLayer,v=this.tileManagers[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(i.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=o.bY(this.tileManagers,(E=>E.serialize())),c=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return o.bZ({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:i,layers:c,terrain:m},(E=>E!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.tileManagers[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.tileManagers[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=k=>this._layers[k].type==="fill-extrusion",m={},v=[];for(let k=this._order.length-1;k>=0;k--){const L=this._order[k];if(c(L)){m[L]=k;for(const N of i){const U=N[L];if(U)for(const W of U)v.push(W)}}}v.sort(((k,L)=>L.intersectionZ-k.intersectionZ));const E=[];for(let k=this._order.length-1;k>=0;k--){const L=this._order[k];if(c(L))for(let N=v.length-1;N>=0;N--){const U=v[N].feature;if(m[U.layer.id]<k)break;E.push(U),v.pop()}else for(const N of i){const U=N[L];if(U)for(const W of U)E.push(W.feature)}}return E}queryRenderedFeatures(i,c,m){c&&c.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of c.layers){const W=this._layers[U];if(!W)return this.fire(new o.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];v[W.source]=!0}}const E=[];c.availableImages=this._availableImages;const k=this._serializedAllLayers(),L=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:L,globalState:this._globalState});for(const U in this.tileManagers)c.layers&&!v[U]||E.push(Gr(this.tileManagers[U],this._layers,k,i,N,m,this.map.terrain?(W,J,Y)=>this.map.terrain.getElevation(W,J,Y):void 0));return this.placement&&E.push((function(U,W,J,Y,oe,ce,ye){const _e={},ve=ce.queryRenderedSymbols(Y),we=[];for(const Le of Object.keys(ve).map(Number))we.push(ye[Le]);we.sort(Tr);for(const Le of we){const Se=Le.featureIndex.lookupSymbolFeatures(ve[Le.bucketInstanceId],W,Le.bucketIndex,Le.sourceLayerIndex,{filterSpec:oe.filter,globalState:oe.globalState},oe.layers,oe.availableImages,U);for(const ke in Se){const Fe=_e[ke]=_e[ke]||[],Te=Se[ke];Te.sort(((Ge,ht)=>{const at=Le.featureSortOrder;if(at){const ot=at.indexOf(Ge.featureIndex);return at.indexOf(ht.featureIndex)-ot}return ht.featureIndex-Ge.featureIndex}));for(const Ge of Te)Fe.push(Ge)}}return(function(Le,Se,ke){for(const Fe in Le)for(const Te of Le[Fe])wr(Te,ke[Se[Fe].source]);return Le})(_e,U,J)})(this._layers,k,this.tileManagers,i,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(i,c){c!=null&&c.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.tileManagers[i];return m?(function(v,E){const k=v.getRenderableIds().map((U=>v.getTileByID(U))),L=[],N={};for(let U=0;U<k.length;U++){const W=k[U],J=W.tileID.canonical.key;N[J]||(N[J]=!0,W.querySourceFeatures(L,E))}return L})(m,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const k in i)if(!o.bR(i[k],m[k])){v=!0;break}if(!v)return;const E={now:B(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(E)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!i&&!m)return;if(i&&!m)v=!0;else if(!i&&m)v=!0;else for(const k in i)if(!o.bR(i[k],m[k])){v=!0;break}if(!v)return;const E={now:B(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(E)}_setProjectionInternal(i){const c=(function(m,v){const E={constrainOverride:v};if(Array.isArray(m)){const k=new Dc({type:m});return{projection:k,transform:new jc(E),cameraHelper:new hg(k)}}switch(m){case"mercator":return{projection:new Ji,transform:new Mu(E),cameraHelper:new zl};case"globe":{const k=new Dc({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:k,transform:new jc(E),cameraHelper:new hg(k)}}case"vertical-perspective":return{projection:new Ah,transform:new Fl(E),cameraHelper:new Di};default:return o.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new Ji,transform:new Mu(E),cameraHelper:new zl}}})(i,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const m in this.tileManagers)this.tileManagers[m].reload()}_validate(i,c,m,v,E={}){return(!E||E.validate!==!1)&&Ou(this,i.call(o.C,o.e({key:c,style:this.serialize(),value:m,styleSpec:o.u},v)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ze().off(Me,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const m=this.tileManagers[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.tileManagers[i].clearTiles()}_reloadSource(i){this.tileManagers[i].resume(),this.tileManagers[i].reload()}_updateSources(i){for(const c in this.tileManagers)this.tileManagers[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.tileManagers)this._reloadSource(i)}_updatePlacement(i,c,m,v,E=!1){let k=!1,L=!1;const N={};for(const U of this._order){const W=this._layers[U];if(W.type!=="symbol")continue;if(!N[W.source]){const Y=this.tileManagers[W.source];N[W.source]=Y.getRenderableIds(!0).map((oe=>Y.getTileByID(oe))).sort(((oe,ce)=>ce.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ce.tileID)?-1:1)))}const J=this.crossTileSymbolIndex.addLayer(W,N[W.source],i.center.lng);k=k||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(B(),i.zoom))&&(this.pauseablePlacement=new Dl(i,this.map.terrain,this._order,E,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(B()),L=!0),k&&this.pauseablePlacement.placement.setStale()),L||k)for(const U of this._order){const W=this._layers[U];W.type==="symbol"&&this.placement.updateLayerOpacities(W,N[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(B())}_releaseSymbolFadeTiles(){for(const i in this.tileManagers)this.tileManagers[i].releaseSymbolFadeTiles()}getImages(i,c){return o._(this,void 0,void 0,(function*(){const m=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.tileManagers[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),m}))}getGlyphs(i,c){return o._(this,void 0,void 0,(function*(){const m=yield this.glyphManager.getGlyphs(c.stacks),v=this.tileManagers[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),m}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(o.C.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}getDashes(i,c){return o._(this,void 0,void 0,(function*(){const m={};for(const[v,E]of Object.entries(c.dashes))m[v]=this.lineAtlas.getDash(E.dasharray,E.round);return m}))}addSprite(i,c,m={},v){this._checkLoaded();const E=[{id:i,url:c}],k=[...xe(this.stylesheet.sprite),...E];this._validate(o.C.sprite,"sprite",k,null,m)||(this.stylesheet.sprite=k,this._loadSprite(E,!0,v))}removeSprite(i){this._checkLoaded();const c=xe(this.stylesheet.sprite);if(c.find((m=>m.id===i))){if(this._spritesImagesIds[i])for(const m of this._spritesImagesIds[i])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex((m=>m.id===i)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(i,c={},m){this._checkLoaded(),i&&this._validate(o.C.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,m):(this._unloadSprite(),m&&m(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const i in this.tileManagers){const c=this.tileManagers[i];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const i in this._layers){const c=this._layers[i];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var tv=o.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Zd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,m,v,E,k,L,N,U){this.context=i;let W=this.boundPaintVertexBuffers.length!==v.length;for(let J=0;!W&&J<v.length;J++)this.boundPaintVertexBuffers[J]!==v[J]&&(W=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||W||this.boundIndexBuffer!==E||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==U?this.freshBind(c,m,v,E,k,L,N,U):(i.bindVertexArray.set(this.vao),L&&L.bind(),E&&E.dynamicDraw&&E.bind(),N&&N.bind(),U&&U.bind())}freshBind(i,c,m,v,E,k,L,N){const U=i.numAttributes,W=this.context,J=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=N,c.enableAttributes(J,i);for(const Y of m)Y.enableAttributes(J,i);k&&k.enableAttributes(J,i),L&&L.enableAttributes(J,i),N&&N.enableAttributes(J,i),c.bind(),c.setVertexAttribPointers(J,i,E);for(const Y of m)Y.bind(),Y.setVertexAttribPointers(J,i,E);k&&(k.bind(),k.setVertexAttribPointers(J,i,E)),v&&v.bind(),L&&(L.bind(),L.setVertexAttribPointers(J,i,E)),N&&(N.bind(),N.setVertexAttribPointers(J,i,E)),W.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rv=(w,i,c,m,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:i,u_fog_color:c?c.properties.get("fog-color"):o.bp.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(m):0,u_horizon_color:c?c.properties.get("horizon-color"):o.bp.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),zc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Kd(w){const i=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const m=w[c].split(" ");i.push(m.pop())}return i}class Xd{constructor(i,c,m,v,E,k,L,N,U=[]){const W=i.gl;this.program=W.createProgram();const J=Kd(c.staticAttributes),Y=m?m.getBinderAttributes():[],oe=J.concat(Y),ce=wn.prelude.staticUniforms?Kd(wn.prelude.staticUniforms):[],ye=L.staticUniforms?Kd(L.staticUniforms):[],_e=c.staticUniforms?Kd(c.staticUniforms):[],ve=m?m.getBinderUniforms():[],we=ce.concat(ye).concat(_e).concat(ve),Le=[];for(const at of we)Le.indexOf(at)<0&&Le.push(at);const Se=m?m.defines():[];hi(W)&&Se.unshift("#version 300 es"),E&&Se.push("#define OVERDRAW_INSPECTOR;"),k&&Se.push("#define TERRAIN3D;"),N&&Se.push(N),U&&Se.push(...U);let ke=Se.concat(wn.prelude.fragmentSource,L.fragmentSource,c.fragmentSource).join(`
`),Fe=Se.concat(wn.prelude.vertexSource,L.vertexSource,c.vertexSource).join(`
`);hi(W)||(ke=(function(at){return at.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ke),Fe=(function(at){return at.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Fe));const Te=W.createShader(W.FRAGMENT_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(Te,ke),W.compileShader(Te),!W.getShaderParameter(Te,W.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${W.getShaderInfoLog(Te)}`);W.attachShader(this.program,Te);const Ge=W.createShader(W.VERTEX_SHADER);if(W.isContextLost())return void(this.failedToCreate=!0);if(W.shaderSource(Ge,Fe),W.compileShader(Ge),!W.getShaderParameter(Ge,W.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${W.getShaderInfoLog(Ge)}`);W.attachShader(this.program,Ge),this.attributes={};const ht={};this.numAttributes=oe.length;for(let at=0;at<this.numAttributes;at++)oe[at]&&(W.bindAttribLocation(this.program,at,oe[at]),this.attributes[oe[at]]=at);if(W.linkProgram(this.program),!W.getProgramParameter(this.program,W.LINK_STATUS))throw new Error(`Program failed to link: ${W.getProgramInfoLog(this.program)}`);W.deleteShader(Ge),W.deleteShader(Te);for(let at=0;at<Le.length;at++){const ot=Le[at];if(ot&&!ht[ot]){const st=W.getUniformLocation(this.program,ot);st&&(ht[ot]=st)}}this.fixedUniforms=v(i,ht),this.terrainUniforms=((at,ot)=>({u_depth:new o.b_(at,ot.u_depth),u_terrain:new o.b_(at,ot.u_terrain),u_terrain_dim:new o.bq(at,ot.u_terrain_dim),u_terrain_matrix:new o.c0(at,ot.u_terrain_matrix),u_terrain_unpack:new o.c1(at,ot.u_terrain_unpack),u_terrain_exaggeration:new o.bq(at,ot.u_terrain_exaggeration)}))(i,ht),this.projectionUniforms=((at,ot)=>({u_projection_matrix:new o.c0(at,ot.u_projection_matrix),u_projection_tile_mercator_coords:new o.c1(at,ot.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c1(at,ot.u_projection_clipping_plane),u_projection_transition:new o.bq(at,ot.u_projection_transition),u_projection_fallback_matrix:new o.c0(at,ot.u_projection_fallback_matrix)}))(i,ht),this.binderUniforms=m?m.getUniforms(i,ht):[]}draw(i,c,m,v,E,k,L,N,U,W,J,Y,oe,ce,ye,_e,ve,we,Le){const Se=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(E),i.setCullFace(k),N){i.activeTexture.set(Se.TEXTURE2),Se.bindTexture(Se.TEXTURE_2D,N.depthTexture),i.activeTexture.set(Se.TEXTURE3),Se.bindTexture(Se.TEXTURE_2D,N.texture);for(const Fe in this.terrainUniforms)this.terrainUniforms[Fe].set(N[Fe])}if(U)for(const Fe in U)this.projectionUniforms[zc[Fe]].set(U[Fe]);if(L)for(const Fe in this.fixedUniforms)this.fixedUniforms[Fe].set(L[Fe]);_e&&_e.setUniforms(i,this.binderUniforms,ce,{zoom:ye});let ke=0;switch(c){case Se.LINES:ke=2;break;case Se.TRIANGLES:ke=3;break;case Se.LINE_STRIP:ke=1}for(const Fe of oe.get()){const Te=Fe.vaos||(Fe.vaos={});(Te[W]||(Te[W]=new Zd)).bind(i,this,J,_e?_e.getPaintVertexBuffers():[],Y,Fe.vertexOffset,ve,we,Le),Se.drawElements(c,Fe.primitiveLength*ke,Se.UNSIGNED_SHORT,Fe.primitiveOffset*ke*2)}}}function Nc(w,i,c){const m=1/o.aN(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,k=E*(c.tileID.canonical.x+c.tileID.wrap*v),L=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[k>>16,L>>16],u_pixel_coord_lower:[65535&k,65535&L]}}const Rp=(w,i,c,m)=>{const v=w.style.light,E=v.properties.get("position"),k=[E.x,E.y,E.z],L=o.c4();v.properties.get("anchor")==="viewport"&&o.c5(L,w.transform.bearingInRadians),o.c6(k,k,L);const N=w.transform.transformLightDirection(k),U=v.properties.get("color");return{u_lightpos:k,u_lightpos_globe:N,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+i,u_opacity:c,u_fill_translate:m}},Yd=(w,i,c,m,v,E,k)=>o.e(Rp(w,i,c,m),Nc(E,w,k),{u_height_factor:-Math.pow(2,v.overscaledZ)/k.tileSize/8}),Qd=(w,i,c,m)=>o.e(Nc(i,w,c),{u_fill_translate:m}),jp=(w,i)=>({u_world:w,u_fill_translate:i}),zp=(w,i,c,m,v)=>o.e(Qd(w,i,c,v),{u_world:m}),Np=(w,i,c,m,v)=>{const E=w.transform;let k,L,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const U=o.aN(i,1,E.zoom);k=!0,L=[U,U],N=U/(o.a5*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*v}else k=!1,L=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+k,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:N,u_translate:m}},Do=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),dg=w=>({u_viewport_size:[w.width,w.height]}),Fp=(w,i=1)=>({u_color:w,u_overlay:0,u_overlay_scale:i}),Fc=(w,i,c,m)=>{const v=o.aN(w,1,i)/(o.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:o.aN(w,1,i),u_intensity:c,u_globe_extrude_scale:v}},Bp=(w,i,c,m)=>{const v=o.N();o.c7(v,0,w.width,w.height,0,0,1);const E=w.context.gl;return{u_matrix:v,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:c,u_color_ramp:m,u_opacity:i.paint.get("heatmap-opacity")}},Lh=(w,i,c)=>{const m=c.paint.get("hillshade-accent-color");let v;switch(c.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const E=c.getIlluminationProperties();for(let k=0;k<E.directionRadians.length;k++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[k]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Rh(0,i.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:m,u_method:v,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},Dh=(w,i)=>{const c=i.stride,m=o.N();return o.c7(m,0,o.a5,-o.a5,0,0,1),o.O(m,m,[0,-o.a5,0]),{u_matrix:m,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:i.getUnpackVector()}};function Rh(w,i){const c=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new o.a9(0,m/c).toLngLat().lat,new o.a9(0,(m+1)/c).toLngLat().lat]}const fg=(w,i,c=0)=>({u_image:0,u_unpack:i.getUnpackVector(),u_dimension:[i.stride,i.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),Bl=(w,i,c,m)=>{const v=w.transform;return{u_translation:jh(w,i,c),u_ratio:m/o.aN(i,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},pg=(w,i,c,m,v)=>o.e(Bl(w,i,c,m),{u_image:0,u_image_height:v}),Jd=(w,i,c,m,v)=>{const E=w.transform,k=Ro(i,E);return{u_translation:jh(w,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:m/o.aN(i,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[k,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},ef=(w,i,c,m,v)=>{const E=Ro(i,w.transform);return o.e(Bl(w,i,c,m),{u_tileratio:E,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image:0,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Bc=(w,i,c,m,v,E)=>{const k=Ro(i,w.transform);return o.e(Bl(w,i,c,m),{u_image:0,u_image_height:E,u_tileratio:k,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image_dash:1,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Ro(w,i){return 1/o.aN(w,1,i.tileZoom)}function jh(w,i,c){return o.aO(w.transform,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const tf=(w,i,c,m,v)=>{return{u_tl_parent:w,u_scale_parent:i,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=m.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Vp(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var E,k};function Vp(w){w*=Math.PI/180;const i=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const $p=(w,i,c,m,v,E,k,L,N,U,W,J,Y)=>{const oe=k.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:oe.cameraToCenterDistance,u_pitch:oe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:oe.width/oe.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:N,u_is_text:+W,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:E,u_texsize:J,u_texture:0,u_translation:U,u_pitched_scale:Y}},rf=(w,i,c,m,v,E,k,L,N,U,W,J,Y,oe)=>{const ce=k.transform;return o.e($p(w,i,c,m,v,E,k,L,N,U,W,J,oe),{u_gamma_scale:m?Math.cos(ce.pitch*Math.PI/180)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},Du=(w,i,c,m,v,E,k,L,N,U,W,J,Y)=>o.e(rf(w,i,c,m,v,E,k,L,N,U,!0,W,0,Y),{u_texsize_icon:J,u_texture_icon:1}),Up=(w,i)=>({u_opacity:w,u_color:i}),ns=(w,i,c,m,v)=>o.e((function(E,k,L,N){const U=L.imageManager.getPattern(E.from.toString()),W=L.imageManager.getPattern(E.to.toString()),{width:J,height:Y}=L.imageManager.getPixelSize(),oe=Math.pow(2,N.tileID.overscaledZ),ce=N.tileSize*Math.pow(2,L.transform.tileZoom)/oe,ye=ce*(N.tileID.canonical.x+N.tileID.wrap*oe),_e=ce*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[J,Y],u_mix:k.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/o.aN(N,1,L.transform.tileZoom),u_pixel_coord_upper:[ye>>16,_e>>16],u_pixel_coord_lower:[65535&ye,65535&_e]}})(c,v,i,m),{u_opacity:w}),Vc=(w,i)=>{},mg={fillExtrusion:(w,i)=>({u_lightpos:new o.c2(w,i.u_lightpos),u_lightpos_globe:new o.c2(w,i.u_lightpos_globe),u_lightintensity:new o.bq(w,i.u_lightintensity),u_lightcolor:new o.c2(w,i.u_lightcolor),u_vertical_gradient:new o.bq(w,i.u_vertical_gradient),u_opacity:new o.bq(w,i.u_opacity),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillExtrusionPattern:(w,i)=>({u_lightpos:new o.c2(w,i.u_lightpos),u_lightpos_globe:new o.c2(w,i.u_lightpos_globe),u_lightintensity:new o.bq(w,i.u_lightintensity),u_lightcolor:new o.c2(w,i.u_lightcolor),u_vertical_gradient:new o.bq(w,i.u_vertical_gradient),u_height_factor:new o.bq(w,i.u_height_factor),u_opacity:new o.bq(w,i.u_opacity),u_fill_translate:new o.c3(w,i.u_fill_translate),u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade)}),fill:(w,i)=>({u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillPattern:(w,i)=>({u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillOutline:(w,i)=>({u_world:new o.c3(w,i.u_world),u_fill_translate:new o.c3(w,i.u_fill_translate)}),fillOutlinePattern:(w,i)=>({u_world:new o.c3(w,i.u_world),u_image:new o.b_(w,i.u_image),u_texsize:new o.c3(w,i.u_texsize),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade),u_fill_translate:new o.c3(w,i.u_fill_translate)}),circle:(w,i)=>({u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_scale_with_map:new o.b_(w,i.u_scale_with_map),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_extrude_scale:new o.c3(w,i.u_extrude_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_globe_extrude_scale:new o.bq(w,i.u_globe_extrude_scale),u_translate:new o.c3(w,i.u_translate)}),collisionBox:(w,i)=>({u_pixel_extrude_scale:new o.c3(w,i.u_pixel_extrude_scale)}),collisionCircle:(w,i)=>({u_viewport_size:new o.c3(w,i.u_viewport_size)}),debug:(w,i)=>({u_color:new o.b$(w,i.u_color),u_overlay:new o.b_(w,i.u_overlay),u_overlay_scale:new o.bq(w,i.u_overlay_scale)}),depth:Vc,clippingMask:Vc,heatmap:(w,i)=>({u_extrude_scale:new o.bq(w,i.u_extrude_scale),u_intensity:new o.bq(w,i.u_intensity),u_globe_extrude_scale:new o.bq(w,i.u_globe_extrude_scale)}),heatmapTexture:(w,i)=>({u_matrix:new o.c0(w,i.u_matrix),u_world:new o.c3(w,i.u_world),u_image:new o.b_(w,i.u_image),u_color_ramp:new o.b_(w,i.u_color_ramp),u_opacity:new o.bq(w,i.u_opacity)}),hillshade:(w,i)=>({u_image:new o.b_(w,i.u_image),u_latrange:new o.c3(w,i.u_latrange),u_exaggeration:new o.bq(w,i.u_exaggeration),u_altitudes:new o.c9(w,i.u_altitudes),u_azimuths:new o.c9(w,i.u_azimuths),u_accent:new o.b$(w,i.u_accent),u_method:new o.b_(w,i.u_method),u_shadows:new o.c8(w,i.u_shadows),u_highlights:new o.c8(w,i.u_highlights)}),hillshadePrepare:(w,i)=>({u_matrix:new o.c0(w,i.u_matrix),u_image:new o.b_(w,i.u_image),u_dimension:new o.c3(w,i.u_dimension),u_zoom:new o.bq(w,i.u_zoom),u_unpack:new o.c1(w,i.u_unpack)}),colorRelief:(w,i)=>({u_image:new o.b_(w,i.u_image),u_unpack:new o.c1(w,i.u_unpack),u_dimension:new o.c3(w,i.u_dimension),u_elevation_stops:new o.b_(w,i.u_elevation_stops),u_color_stops:new o.b_(w,i.u_color_stops),u_color_ramp_size:new o.b_(w,i.u_color_ramp_size),u_opacity:new o.bq(w,i.u_opacity)}),line:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels)}),lineGradient:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_image_height:new o.bq(w,i.u_image_height)}),linePattern:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_texsize:new o.c3(w,i.u_texsize),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_image:new o.b_(w,i.u_image),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_scale:new o.c2(w,i.u_scale),u_fade:new o.bq(w,i.u_fade)}),lineSDF:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_mix:new o.bq(w,i.u_mix),u_tileratio:new o.bq(w,i.u_tileratio),u_crossfade_from:new o.bq(w,i.u_crossfade_from),u_crossfade_to:new o.bq(w,i.u_crossfade_to),u_lineatlas_width:new o.bq(w,i.u_lineatlas_width),u_lineatlas_height:new o.bq(w,i.u_lineatlas_height)}),lineGradientSDF:(w,i)=>({u_translation:new o.c3(w,i.u_translation),u_ratio:new o.bq(w,i.u_ratio),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_units_to_pixels:new o.c3(w,i.u_units_to_pixels),u_image:new o.b_(w,i.u_image),u_image_height:new o.bq(w,i.u_image_height),u_tileratio:new o.bq(w,i.u_tileratio),u_crossfade_from:new o.bq(w,i.u_crossfade_from),u_crossfade_to:new o.bq(w,i.u_crossfade_to),u_image_dash:new o.b_(w,i.u_image_dash),u_mix:new o.bq(w,i.u_mix),u_lineatlas_width:new o.bq(w,i.u_lineatlas_width),u_lineatlas_height:new o.bq(w,i.u_lineatlas_height)}),raster:(w,i)=>({u_tl_parent:new o.c3(w,i.u_tl_parent),u_scale_parent:new o.bq(w,i.u_scale_parent),u_buffer_scale:new o.bq(w,i.u_buffer_scale),u_fade_t:new o.bq(w,i.u_fade_t),u_opacity:new o.bq(w,i.u_opacity),u_image0:new o.b_(w,i.u_image0),u_image1:new o.b_(w,i.u_image1),u_brightness_low:new o.bq(w,i.u_brightness_low),u_brightness_high:new o.bq(w,i.u_brightness_high),u_saturation_factor:new o.bq(w,i.u_saturation_factor),u_contrast_factor:new o.bq(w,i.u_contrast_factor),u_spin_weights:new o.c2(w,i.u_spin_weights),u_coords_top:new o.c1(w,i.u_coords_top),u_coords_bottom:new o.c1(w,i.u_coords_bottom)}),symbolIcon:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texture:new o.b_(w,i.u_texture),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),symbolSDF:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texture:new o.b_(w,i.u_texture),u_gamma_scale:new o.bq(w,i.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_is_halo:new o.b_(w,i.u_is_halo),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),symbolTextAndIcon:(w,i)=>({u_is_size_zoom_constant:new o.b_(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(w,i.u_is_size_feature_constant),u_size_t:new o.bq(w,i.u_size_t),u_size:new o.bq(w,i.u_size),u_camera_to_center_distance:new o.bq(w,i.u_camera_to_center_distance),u_pitch:new o.bq(w,i.u_pitch),u_rotate_symbol:new o.b_(w,i.u_rotate_symbol),u_aspect_ratio:new o.bq(w,i.u_aspect_ratio),u_fade_change:new o.bq(w,i.u_fade_change),u_label_plane_matrix:new o.c0(w,i.u_label_plane_matrix),u_coord_matrix:new o.c0(w,i.u_coord_matrix),u_is_text:new o.b_(w,i.u_is_text),u_pitch_with_map:new o.b_(w,i.u_pitch_with_map),u_is_along_line:new o.b_(w,i.u_is_along_line),u_is_variable_anchor:new o.b_(w,i.u_is_variable_anchor),u_texsize:new o.c3(w,i.u_texsize),u_texsize_icon:new o.c3(w,i.u_texsize_icon),u_texture:new o.b_(w,i.u_texture),u_texture_icon:new o.b_(w,i.u_texture_icon),u_gamma_scale:new o.bq(w,i.u_gamma_scale),u_device_pixel_ratio:new o.bq(w,i.u_device_pixel_ratio),u_is_halo:new o.b_(w,i.u_is_halo),u_translation:new o.c3(w,i.u_translation),u_pitched_scale:new o.bq(w,i.u_pitched_scale)}),background:(w,i)=>({u_opacity:new o.bq(w,i.u_opacity),u_color:new o.b$(w,i.u_color)}),backgroundPattern:(w,i)=>({u_opacity:new o.bq(w,i.u_opacity),u_image:new o.b_(w,i.u_image),u_pattern_tl_a:new o.c3(w,i.u_pattern_tl_a),u_pattern_br_a:new o.c3(w,i.u_pattern_br_a),u_pattern_tl_b:new o.c3(w,i.u_pattern_tl_b),u_pattern_br_b:new o.c3(w,i.u_pattern_br_b),u_texsize:new o.c3(w,i.u_texsize),u_mix:new o.bq(w,i.u_mix),u_pattern_size_a:new o.c3(w,i.u_pattern_size_a),u_pattern_size_b:new o.c3(w,i.u_pattern_size_b),u_scale_a:new o.bq(w,i.u_scale_a),u_scale_b:new o.bq(w,i.u_scale_b),u_pixel_coord_upper:new o.c3(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(w,i.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bq(w,i.u_tile_units_to_pixels)}),terrain:(w,i)=>({u_texture:new o.b_(w,i.u_texture),u_ele_delta:new o.bq(w,i.u_ele_delta),u_fog_matrix:new o.c0(w,i.u_fog_matrix),u_fog_color:new o.b$(w,i.u_fog_color),u_fog_ground_blend:new o.bq(w,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bq(w,i.u_fog_ground_blend_opacity),u_horizon_color:new o.b$(w,i.u_horizon_color),u_horizon_fog_blend:new o.bq(w,i.u_horizon_fog_blend),u_is_globe_mode:new o.bq(w,i.u_is_globe_mode)}),terrainDepth:(w,i)=>({u_ele_delta:new o.bq(w,i.u_ele_delta)}),terrainCoords:(w,i)=>({u_texture:new o.b_(w,i.u_texture),u_terrain_coords_id:new o.bq(w,i.u_terrain_coords_id),u_ele_delta:new o.bq(w,i.u_ele_delta)}),projectionErrorMeasurement:(w,i)=>({u_input:new o.bq(w,i.u_input),u_output_expected:new o.bq(w,i.u_output_expected)}),atmosphere:(w,i)=>({u_sun_pos:new o.c2(w,i.u_sun_pos),u_atmosphere_blend:new o.bq(w,i.u_atmosphere_blend),u_globe_position:new o.c2(w,i.u_globe_position),u_globe_radius:new o.bq(w,i.u_globe_radius),u_inv_proj_matrix:new o.c0(w,i.u_inv_proj_matrix)}),sky:(w,i)=>({u_sky_color:new o.b$(w,i.u_sky_color),u_horizon_color:new o.b$(w,i.u_horizon_color),u_horizon:new o.c3(w,i.u_horizon),u_horizon_normal:new o.c3(w,i.u_horizon_normal),u_sky_horizon_blend:new o.bq(w,i.u_sky_horizon_blend),u_sky_blend:new o.bq(w,i.u_sky_blend)})};class gg{constructor(i,c,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yg{constructor(i,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const E=i.gl;this.buffer=E.createBuffer(),i.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,m){for(let v=0;v<this.attributes.length;v++){const E=this.attributes[v],k=c.attributes[E.name];k!==void 0&&i.vertexAttribPointer(k,E.components,i[qp[E.type]],!1,this.itemSize,E.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class cn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nf extends cn{getDefault(){return o.bp.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class af extends cn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class al extends cn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class zh extends cn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class is extends cn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ru extends cn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ju extends cn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class za extends cn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class zu extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class of extends cn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class sf extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class As extends cn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Nh extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Fh extends cn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class $c extends cn{getDefault(){return o.bp.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Bh extends cn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Gp extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Nu extends cn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Po extends cn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class lf extends cn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Vh extends cn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Hr extends cn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class uf extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class $h extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class vg extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Uc extends cn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _g extends cn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ai extends cn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const m=this.gl;hi(m)?m.bindVertexArray(i):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class cf extends cn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class hf extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Fu extends cn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Bu extends cn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Vu extends Bu{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Vl extends Bu{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class qc extends Bu{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const $l="Framebuffer is not complete";class Uh{constructor(i,c,m,v,E){this.context=i,this.width=c,this.height=m;const k=i.gl,L=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Vu(i,L),v)this.depthAttachment=E?new qc(i,L):new Vl(i,L);else if(E)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error($l)}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class df{constructor(i){var c,m;if(this.gl=i,this.clearColor=new nf(this),this.clearDepth=new af(this),this.clearStencil=new al(this),this.colorMask=new zh(this),this.depthMask=new is(this),this.stencilMask=new Ru(this),this.stencilFunc=new ju(this),this.stencilOp=new za(this),this.stencilTest=new zu(this),this.depthRange=new of(this),this.depthTest=new sf(this),this.depthFunc=new As(this),this.blend=new Nh(this),this.blendFunc=new Fh(this),this.blendColor=new $c(this),this.blendEquation=new Bh(this),this.cullFace=new Gp(this),this.cullFaceSide=new Nu(this),this.frontFace=new Po(this),this.program=new lf(this),this.activeTexture=new Vh(this),this.viewport=new Hr(this),this.bindFramebuffer=new uf(this),this.bindRenderbuffer=new $h(this),this.bindTexture=new vg(this),this.bindVertexBuffer=new Uc(this),this.bindElementBuffer=new _g(this),this.bindVertexArray=new ai(this),this.pixelStoreUnpack=new cf(this),this.pixelStoreUnpackPremultiplyAlpha=new hf(this),this.pixelStoreUnpackFlipY=new Fu(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),hi(i)){this.HALF_FLOAT=i.HALF_FLOAT;const v=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=i.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const v=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new gg(this,i,c)}createVertexBuffer(i,c,m){return new yg(this,i,c,m)}createRenderbuffer(i,c,m){const v=this.gl,E=v.createRenderbuffer();return this.bindRenderbuffer.set(E),v.renderbufferStorage(v.RENDERBUFFER,i,c,m),this.bindRenderbuffer.set(null),E}createFramebuffer(i,c,m,v){return new Uh(this,i,c,m,v)}clear({color:i,depth:c,stencil:m}){const v=this.gl;let E=0;i&&(E|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(E|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(E|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(E)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){o.bR(i.blendFunction,un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return hi(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return hi(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let Ul;function ql(w,i,c,m,v){const E=w.context,k=w.transform,L=E.gl,N=w.useProgram("collisionBox"),U=[];let W=0,J=0;for(let ve=0;ve<m.length;ve++){const we=m[ve],Le=i.getTile(we).getBucket(c);if(!Le)continue;const Se=v?Le.textCollisionBox:Le.iconCollisionBox,ke=Le.collisionCircleArray;ke.length>0&&(U.push({circleArray:ke,circleOffset:J,coord:we}),W+=ke.length/4,J=W),Se&&N.draw(E,L.LINES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,Do(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(we),k.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,null,w.transform.zoom,null,null,Se.collisionVertexBuffer)}if(!v||!U.length)return;const Y=w.useProgram("collisionCircle"),oe=new o.ca;oe.resize(4*W),oe._trim();let ce=0;for(const ve of U)for(let we=0;we<ve.circleArray.length/4;we++){const Le=4*we,Se=ve.circleArray[Le+0],ke=ve.circleArray[Le+1],Fe=ve.circleArray[Le+2],Te=ve.circleArray[Le+3];oe.emplace(ce++,Se,ke,Fe,Te,0),oe.emplace(ce++,Se,ke,Fe,Te,1),oe.emplace(ce++,Se,ke,Fe,Te,2),oe.emplace(ce++,Se,ke,Fe,Te,3)}(!Ul||Ul.length<2*W)&&(Ul=(function(ve){const we=2*ve,Le=new o.cc;Le.resize(we),Le._trim();for(let Se=0;Se<we;Se++){const ke=6*Se;Le.uint16[ke+0]=4*Se+0,Le.uint16[ke+1]=4*Se+1,Le.uint16[ke+2]=4*Se+2,Le.uint16[ke+3]=4*Se+2,Le.uint16[ke+4]=4*Se+3,Le.uint16[ke+5]=4*Se+0}return Le})(W));const ye=E.createIndexBuffer(Ul,!0),_e=E.createVertexBuffer(oe,o.cb.members,!0);for(const ve of U){const we=dg(w.transform);Y.draw(E,L.TRIANGLES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,we,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve.coord),null,c.id,_e,ye,o.aX.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,w.transform.zoom,null,null,null)}_e.destroy(),ye.destroy()}const Gc=o.ar(new Float32Array(16));function ff(w,i,c,m,v,E){const{horizontalAlign:k,verticalAlign:L}=o.aS(w);return new o.P((-(k-.5)*i/v+m[0])*E,(-(L-.5)*c/v+m[1])*E)}function $u(w,i,c,m,v,E){const k=i.tileAnchorPoint.add(new o.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let L=m.mult(E);c||(L=L.rotate(-v));const N=k.add(L);return mr(N.x,N.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(c){const L=Qr(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(w),N=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return w.add(m.rotate(N))}return w.add(m)}function Wp(w,i,c,m,v,E,k,L,N,U,W,J){const Y=w.text.placedSymbolArray,oe=w.text.dynamicLayoutVertexArray,ce=w.icon.dynamicLayoutVertexArray,ye={};oe.clear();for(let _e=0;_e<Y.length;_e++){const ve=Y.get(_e),we=ve.hidden||!ve.crossTileID||w.allowVerticalPlacement&&!ve.placedOrientation?null:m[ve.crossTileID];if(we){const Le=new o.P(ve.anchorX,ve.anchorY),Se={getElevation:J,width:v.width,height:v.height,pitchedLabelPlaneMatrix:E,pitchWithMap:c,transform:v,tileAnchorPoint:Le,translation:U,unwrappedTileID:W},ke=c?Oo(Le.x,Le.y,Se):Qr(Le.x,Le.y,Se),Fe=ni(v.cameraToCenterDistance,ke.signedDistanceFromCamera);let Te=o.aA(w.textSizeData,L,ve)*Fe/o.aM;c&&(Te*=w.tilePixelRatio/k);const{width:Ge,height:ht,anchor:at,textOffset:ot,textBoxScale:st}=we,Nt=ff(at,Ge,ht,ot,st,Te),Vt=v.getPitchedTextCorrection(Le.x+U[0],Le.y+U[1],W),It=$u(ke.point,Se,i,Nt,-v.bearingInRadians,Vt),Yt=w.allowVerticalPlacement&&ve.placedOrientation===o.az.vertical?Math.PI/2:0;for(let zr=0;zr<ve.numGlyphs;zr++)o.aG(oe,It,Yt);N&&ve.associatedIconIndex>=0&&(ye[ve.associatedIconIndex]={shiftedAnchor:It,angle:Yt})}else Da(ve.numGlyphs,oe)}if(N){ce.clear();const _e=w.icon.placedSymbolArray;for(let ve=0;ve<_e.length;ve++){const we=_e.get(ve);if(we.hidden)Da(we.numGlyphs,ce);else{const Le=ye[ve];if(Le)for(let Se=0;Se<we.numGlyphs;Se++)o.aG(ce,Le.shiftedAnchor,Le.angle);else Da(we.numGlyphs,ce)}}w.icon.dynamicLayoutVertexBuffer.updateData(ce)}w.text.dynamicLayoutVertexBuffer.updateData(oe)}function pf(w,i,c){return c.iconsInText&&i?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Uu(w,i,c,m,v,E,k,L,N,U,W,J,Y){const oe=w.context,ce=oe.gl,ye=w.transform,_e=L==="map",ve=N==="map",we=L!=="viewport"&&c.layout.get("symbol-placement")!=="point",Le=_e&&!ve&&!we,Se=!c.layout.get("symbol-sort-key").isConstant();let ke=!1;const Fe=w.getDepthModeForSublayer(0,Vr.ReadOnly),Te=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],ht=ye.getCircleRadiusCorrection();for(const at of m){const ot=i.getTile(at),st=ot.getBucket(c);if(!st)continue;const Nt=v?st.text:st.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const Vt=Nt.programConfigurations.get(c.id),It=v||st.sdfIcons,Yt=v?st.textSizeData:st.iconSizeData,zr=ve||ye.pitch!==0,Sn=w.useProgram(pf(It,v,st),Vt),Xn=o.ay(Yt,ye.zoom),On=w.style.map.terrain&&w.style.map.terrain.getTerrainData(at);let Yn,Ln,Qn,si,na=[0,0],Si=null;if(v)Ln=ot.glyphAtlasTexture,Qn=ce.LINEAR,Yn=ot.glyphAtlasTexture.size,st.iconsInText&&(na=ot.imageAtlasTexture.size,Si=ot.imageAtlasTexture,si=zr||w.options.rotating||w.options.zooming||Yt.kind==="composite"||Yt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const zn=c.layout.get("icon-size").constantOr(0)!==1||st.iconsNeedLinear;Ln=ot.imageAtlasTexture,Qn=It||w.options.rotating||w.options.zooming||zn||zr?ce.LINEAR:ce.NEAREST,Yn=ot.imageAtlasTexture.size}const _n=o.aN(ot,1,w.transform.zoom),qi=dr(_e,w.transform,_n),cs=o.N();o.aB(cs,qi);const Ns=Fr(ve,_e,w.transform,_n),hs=o.aO(ye,ot,E,k),Fa=ye.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),dl=Te&&st.hasTextData(),Fs=c.layout.get("icon-text-fit")!=="none"&&dl&&st.hasIconData();if(we){const zn=w.style.map.terrain?(zi,Gi)=>w.style.map.terrain.getElevation(at,zi,Gi):null,Dn=c.layout.get("text-rotation-alignment")==="map";Tn(st,w,v,qi,cs,ve,U,Dn,at.toUnwrapped(),ye.width,ye.height,hs,zn)}const fl=v&&Te||Fs,oo=we||fl?Gc:ve?qi:w.transform.clipSpaceToPixelsMatrix,Bs=It&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Uo;Uo=It?st.iconsInText?Du(Yt.kind,Xn,Le,ve,we,fl,w,oo,Ns,hs,Yn,na,ht):rf(Yt.kind,Xn,Le,ve,we,fl,w,oo,Ns,hs,v,Yn,0,ht):$p(Yt.kind,Xn,Le,ve,we,fl,w,oo,Ns,hs,v,Yn,ht);const qo={program:Sn,buffers:Nt,uniformValues:Uo,projectionData:Fa,atlasTexture:Ln,atlasTextureIcon:Si,atlasInterpolation:Qn,atlasInterpolationIcon:si,isSDF:It,hasHalo:Bs};if(Se&&st.canOverlap){ke=!0;const zn=Nt.segments.get();for(const Dn of zn)Ge.push({segments:new o.aX([Dn]),sortKey:Dn.sortKey,state:qo,terrainData:On})}else Ge.push({segments:Nt.segments,sortKey:0,state:qo,terrainData:On})}ke&&Ge.sort(((at,ot)=>at.sortKey-ot.sortKey));for(const at of Ge){const ot=at.state;if(oe.activeTexture.set(ce.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,ce.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(oe.activeTexture.set(ce.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),ot.isSDF){const st=ot.uniformValues;ot.hasHalo&&(st.u_is_halo=1,mf(ot.buffers,at.segments,c,w,ot.program,Fe,W,J,st,ot.projectionData,at.terrainData)),st.u_is_halo=0}mf(ot.buffers,at.segments,c,w,ot.program,Fe,W,J,ot.uniformValues,ot.projectionData,at.terrainData)}}function mf(w,i,c,m,v,E,k,L,N,U,W){const J=m.context;v.draw(J,J.gl.TRIANGLES,E,k,L,Xr.backCCW,N,W,U,c.id,w.layoutVertexBuffer,w.indexBuffer,i,c.paint,m.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Hp(w,i,c,m,v){const E=w.context,k=E.gl,L=Jr.disabled,N=new un([k.ONE,k.ONE],o.bp.transparent,[!0,!0,!0,!0]),U=i.getBucket(c);if(!U)return;const W=m.key;let J=c.heatmapFbos.get(W);J||(J=qh(E,i.tileSize,i.tileSize),c.heatmapFbos.set(W,J)),E.bindFramebuffer.set(J.framebuffer),E.viewport.set([0,0,i.tileSize,i.tileSize]),E.clear({color:o.bp.transparent});const Y=U.programConfigurations.get(c.id),oe=w.useProgram("heatmap",Y,!v),ce=w.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ye=w.style.map.terrain.getTerrainData(m);oe.draw(E,k.TRIANGLES,Vr.disabled,L,N,Xr.disabled,Fc(i,w.transform.zoom,c.paint.get("heatmap-intensity"),1),ye,ce,c.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,c.paint,w.transform.zoom,Y)}function xg(w,i,c,m,v){const E=w.context,k=E.gl,L=w.transform;E.setColorMode(w.colorModeForRenderPass());const N=Wc(E,i),U=c.key,W=i.heatmapFbos.get(U);if(!W)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,W.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1),N.bind(k.LINEAR,k.CLAMP_TO_EDGE);const J=L.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(E,k.TRIANGLES,Vr.disabled,Jr.disabled,w.colorModeForRenderPass(),Xr.disabled,Bp(w,i,0,1),null,J,i.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,i.paint,L.zoom),W.destroy(),i.heatmapFbos.delete(U)}function qh(w,i,c){var m,v;const E=w.gl,k=E.createTexture();E.bindTexture(E.TEXTURE_2D,k),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);const L=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:E.UNSIGNED_BYTE,N=(v=w.RGBA16F)!==null&&v!==void 0?v:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,N,i,c,0,E.RGBA,L,null);const U=w.createFramebuffer(i,c,!1,!1);return U.colorAttachment.set(k),U}function Wc(w,i){return i.colorRampTexture||(i.colorRampTexture=new o.T(w,i.colorRamp,w.gl.RGBA)),i.colorRampTexture}function ol(w,i,c,m,v,E,k,L){let N=256;if(v.stepInterpolant){const U=i.getSource().maxzoom,W=k.canonical.z===U?Math.ceil(1<<w.transform.maxZoom-k.canonical.z):1;N=o.an(o.ce(E.maxLineLength/o.a5*1024*W),256,c.maxTextureSize)}return L.gradient=o.cf({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:L.gradient||void 0,clips:E.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new o.T(c,L.gradient,m.RGBA),L.version=v.gradientVersion,L.texture}function Zp(w,i,c,m,v){w.activeTexture.set(i.TEXTURE0),c.imageAtlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),m.updatePaintBuffers(v)}function Un(w,i,c,m,v,E){(v||w.lineAtlas.dirty)&&(i.activeTexture.set(c.TEXTURE0),w.lineAtlas.bind(i)),m.updatePaintBuffers(E)}function _a(w,i,c,m,v,E,k){const L=E.gradients[v.id];let N=L.texture;v.gradientVersion!==L.version&&(N=ol(w,i,c,m,v,E,k,L)),c.activeTexture.set(m.TEXTURE0),N.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}function fa(w,i,c,m,v,E,k,L,N){const U=E.gradients[v.id];let W=U.texture;v.gradientVersion!==U.version&&(W=ol(w,i,c,m,v,E,k,U)),c.activeTexture.set(m.TEXTURE0),W.bind(v.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE),c.activeTexture.set(m.TEXTURE1),w.lineAtlas.bind(c),L.updatePaintBuffers(N)}function jo(w,i,c,m,v){if(!c||!m||!m.imageAtlas)return;const E=m.imageAtlas.patternPositions;let k=E[c.to.toString()],L=E[c.from.toString()];if(!k&&L&&(k=L),!L&&k&&(L=k),!k||!L){const N=v.getPaintProperty(i);k=E[N],L=E[N]}k&&L&&w.setConstantPatternPositions(k,L)}function qu(w,i,c,m,v,E,k,L){const N=w.context.gl,U="fill-pattern",W=c.paint.get(U),J=W&&W.constantOr(1),Y=c.getCrossfadeParameters();let oe,ce,ye,_e,ve;const we=w.transform,Le=c.paint.get("fill-translate"),Se=c.paint.get("fill-translate-anchor");k?(ce=J&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=N.LINES):(ce=J?"fillPattern":"fill",oe=N.TRIANGLES);const ke=W.constantOr(null);for(const Fe of m){const Te=i.getTile(Fe);if(J&&!Te.patternsLoaded())continue;const Ge=Te.getBucket(c);if(!Ge)continue;const ht=Ge.programConfigurations.get(c.id),at=w.useProgram(ce,ht),ot=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe);J&&(w.context.activeTexture.set(N.TEXTURE0),Te.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ht.updatePaintBuffers(Y)),jo(ht,U,ke,Te,c);const st=we.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Nt=o.aO(we,Te,Le,Se);if(k){_e=Ge.indexBuffer2,ve=Ge.segments2;const It=[N.drawingBufferWidth,N.drawingBufferHeight];ye=ce==="fillOutlinePattern"&&J?zp(w,Y,Te,It,Nt):jp(It,Nt)}else _e=Ge.indexBuffer,ve=Ge.segments,ye=J?Qd(w,Y,Te,Nt):{u_fill_translate:Nt};const Vt=w.stencilModeForClipping(Fe);at.draw(w.context,oe,v,Vt,E,Xr.backCCW,ye,ot,st,c.id,Ge.layoutVertexBuffer,_e,ve,c.paint,w.transform.zoom,ht)}}function gf(w,i,c,m,v,E,k,L){const N=w.context,U=N.gl,W="fill-extrusion-pattern",J=c.paint.get(W),Y=J.constantOr(1),oe=c.getCrossfadeParameters(),ce=c.paint.get("fill-extrusion-opacity"),ye=J.constantOr(null),_e=w.transform;for(const ve of m){const we=i.getTile(ve),Le=we.getBucket(c);if(!Le)continue;const Se=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),ke=Le.programConfigurations.get(c.id),Fe=w.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",ke);Y&&(w.context.activeTexture.set(U.TEXTURE0),we.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ke.updatePaintBuffers(oe));const Te=_e.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!L,applyTerrainMatrix:!0});jo(ke,W,ye,we,c);const Ge=o.aO(_e,we,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ht=c.paint.get("fill-extrusion-vertical-gradient"),at=Y?Yd(w,ht,ce,Ge,ve,oe,we):Rp(w,ht,ce,Ge);Fe.draw(N,N.gl.TRIANGLES,v,E,k,Xr.backCCW,at,Se,Te,c.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,c.paint,w.transform.zoom,ke,w.style.map.terrain&&Le.centroidVertexBuffer)}}function Gl(w,i,c,m,v,E,k,L,N){var U;const W=w.style.projection,J=w.context,Y=w.transform,oe=J.gl,ce=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],ye=w.useProgram("hillshade",null,!1,ce),_e=!w.options.moving;for(const ve of m){const we=i.getTile(ve),Le=we.fbo;if(!Le)continue;const Se=W.getMeshFromTileID(J,ve.canonical,L,!0,"raster"),ke=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(ve);J.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,Le.colorAttachment.get());const Fe=Y.getProjectionData({overscaledTileID:ve,aligned:_e,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ye.draw(J,oe.TRIANGLES,E,v[ve.overscaledZ],k,Xr.backCCW,Lh(w,we,c),ke,Fe,c.id,Se.vertexBuffer,Se.indexBuffer,Se.segments)}}function as(w,i,c,m,v,E,k,L,N){var U;const W=w.style.projection,J=w.context,Y=w.transform,oe=J.gl,ce=w.useProgram("colorRelief"),ye=!w.options.moving;let _e=!0,ve=0;for(const we of m){const Le=i.getTile(we),Se=Le.dem;if(_e){const at=oe.getParameter(oe.MAX_TEXTURE_SIZE),{elevationTexture:ot,colorTexture:st}=c.getColorRampTextures(J,at,Se.getUnpackVector());J.activeTexture.set(oe.TEXTURE1),ot.bind(oe.NEAREST,oe.CLAMP_TO_EDGE),J.activeTexture.set(oe.TEXTURE4),st.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),_e=!1,ve=ot.size[0]}if(!Se||!Se.data)continue;const ke=Se.stride,Fe=Se.getPixels();if(J.activeTexture.set(oe.TEXTURE0),J.pixelStoreUnpackPremultiplyAlpha.set(!1),Le.demTexture=Le.demTexture||w.getTileTexture(ke),Le.demTexture){const at=Le.demTexture;at.update(Fe,{premultiply:!1}),at.bind(oe.LINEAR,oe.CLAMP_TO_EDGE)}else Le.demTexture=new o.T(J,Fe,oe.RGBA,{premultiply:!1}),Le.demTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE);const Te=W.getMeshFromTileID(J,we.canonical,L,!0,"raster"),Ge=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(we),ht=Y.getProjectionData({overscaledTileID:we,aligned:ye,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ce.draw(J,oe.TRIANGLES,E,v[we.overscaledZ],k,Xr.backCCW,fg(c,Le.dem,ve),Ge,ht,c.id,Te.vertexBuffer,Te.indexBuffer,Te.segments)}}const os=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function ss(w,i,c,m,v,E,k,L,N=!1,U=!1){const W=m[m.length-1].overscaledZ,J=w.context,Y=J.gl,oe=w.useProgram("raster"),ce=w.transform,ye=w.style.projection,_e=w.colorModeForRenderPass(),ve=!w.options.moving,we=c.paint.get("raster-opacity"),Le=c.paint.get("raster-resampling"),Se=c.paint.get("raster-fade-duration"),ke=!!w.style.map.terrain;for(const Fe of m){const Te=w.getDepthModeForSublayer(Fe.overscaledZ-W,we===1?Vr.ReadWrite:Vr.ReadOnly,Y.LESS),Ge=i.getTile(Fe),ht=Le==="nearest"?Y.NEAREST:Y.LINEAR;J.activeTexture.set(Y.TEXTURE0),Ge.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),J.activeTexture.set(Y.TEXTURE1);const{parentTile:at,parentScaleBy:ot,parentTopLeft:st,fadeValues:Nt}=Gh(Ge,i,Se,ke);Ge.fadeOpacity=Nt.tileOpacity,at?(at.fadeOpacity=Nt.parentTileOpacity,at.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST)):Ge.texture.bind(ht,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),Ge.texture.useMipmap&&J.extTextureFilterAnisotropic&&w.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,J.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,J.extTextureFilterAnisotropicMax);const Vt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe),It=ce.getProjectionData({overscaledTileID:Fe,aligned:ve,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Yt=tf(st,ot,Nt.fadeMix,c,L),zr=ye.getMeshFromTileID(J,Fe.canonical,E,k,"raster");oe.draw(J,Y.TRIANGLES,Te,v?v[Fe.overscaledZ]:Jr.disabled,_e,N?Xr.frontCCW:Xr.backCCW,Yt,Vt,It,c.id,zr.vertexBuffer,zr.indexBuffer,zr.segments)}}function Gh(w,i,c,m){const v={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||m)return v;if(w.fadingParentID){const E=i.getLoadedTile(w.fadingParentID);if(!E)return v;const k=Math.pow(2,E.tileID.overscaledZ-w.tileID.overscaledZ),L=[w.tileID.canonical.x*k%1,w.tileID.canonical.y*k%1],N=(function(U,W,J){const Y=B(),oe=(Y-W.timeAdded)/J,ce=U.fadingDirection===it.Incoming,ye=o.an((Y-U.timeAdded)/J,0,1),_e=o.an(1-oe,0,1),ve=ce?ye:_e;return{tileOpacity:ve,parentTileOpacity:ce?_e:ye,fadeMix:{opacity:1,mix:1-ve}}})(w,E,c);return{parentTile:E,parentScaleBy:k,parentTopLeft:L,fadeValues:N}}if(w.selfFading){const E=(function(k,L){const N=(B()-k.timeAdded)/L,U=o.an(N,0,1);return{tileOpacity:U,fadeMix:{opacity:U,mix:0}}})(w,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:E}}return v}const yf=new o.bp(1,0,0,1),Gu=new o.bp(0,1,0,1),sl=new o.bp(0,0,1,1),Zn=new o.bp(1,0,1,1),gn=new o.bp(0,1,1,1);function Is(w,i,c,m){ra(w,0,i+c/2,w.transform.width,c,m)}function ta(w,i,c,m){ra(w,i-c/2,0,c,w.transform.height,m)}function ra(w,i,c,m,v,E){const k=w.context,L=k.gl;L.enable(L.SCISSOR_TEST),L.scissor(i*w.pixelRatio,c*w.pixelRatio,m*w.pixelRatio,v*w.pixelRatio),k.clear({color:E}),L.disable(L.SCISSOR_TEST)}function Wl(w,i,c){const m=w.context,v=m.gl,E=w.useProgram("debug"),k=Vr.disabled,L=Jr.disabled,N=w.colorModeForRenderPass(),U="$debug",W=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const J=i.getTileByID(c.key).latestRawTileData,Y=Math.floor((J&&J.byteLength||0)/1024),oe=i.getTile(c).tileSize,ce=512/Math.min(oe,512)*(c.overscaledZ/w.transform.zoom)*.5;let ye=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ye+=` => ${c.overscaledZ}`),(function(ve,we){ve.initDebugOverlayCanvas();const Le=ve.debugOverlayCanvas,Se=ve.context.gl,ke=ve.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,Le.width,Le.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(we,5,5),ke.strokeText(we,5,5),ve.debugOverlayTexture.update(Le),ve.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)})(w,`${ye} ${Y}kB`);const _e=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(m,v.TRIANGLES,k,L,un.alphaBlended,Xr.disabled,Fp(o.bp.transparent,ce),null,_e,U,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),E.draw(m,v.LINE_STRIP,k,L,N,Xr.disabled,Fp(o.bp.red),W,_e,U,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Hl(w,i,c,m){const{isRenderingGlobe:v}=m,E=w.context,k=E.gl,L=w.transform,N=w.colorModeForRenderPass(),U=w.getDepthModeFor3D(),W=w.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height]);for(const J of c){const Y=i.getTerrainMesh(J.tileID),oe=w.renderToTexture.getTexture(J),ce=i.getTerrainData(J.tileID);E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,oe.texture);const ye=i.getMeshFrameDelta(L.zoom),_e=L.calculateFogMatrix(J.tileID.toUnwrapped()),ve=rv(ye,_e,w.style.sky,L.pitch,v),we=L.getProjectionData({overscaledTileID:J.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});W.draw(E,k.TRIANGLES,U,Jr.disabled,N,Xr.backCCW,ve,ce,we,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}function xa(w,i){if(!i.mesh){const c=new o.aW;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const m=new o.aY;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),i.mesh=new In(w.createVertexBuffer(c,Lo.members),w.createIndexBuffer(m),o.aX.simpleSegment(0,0,c.length,m.length))}return i.mesh}class Wh{constructor(i,c){this.context=new df(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=hr.maxOverzooming+hr.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qi}resize(i,c,m){if(this.width=Math.floor(i*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,c=new o.aW;c.emplaceBack(0,0),c.emplaceBack(o.a5,0),c.emplaceBack(0,o.a5),c.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=i.createVertexBuffer(c,Lo.members),this.tileExtentSegments=o.aX.simpleSegment(0,0,4,2);const m=new o.aW;m.emplaceBack(0,0),m.emplaceBack(o.a5,0),m.emplaceBack(0,o.a5),m.emplaceBack(o.a5,o.a5),this.debugBuffer=i.createVertexBuffer(m,Lo.members),this.debugSegments=o.aX.simpleSegment(0,0,4,5);const v=new o.ch;v.emplaceBack(0,0,0,0),v.emplaceBack(o.a5,0,o.a5,0),v.emplaceBack(0,o.a5,0,o.a5),v.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=i.createVertexBuffer(v,tv.members),this.rasterBoundsSegments=o.aX.simpleSegment(0,0,4,2);const E=new o.aW;E.emplaceBack(0,0),E.emplaceBack(o.a5,0),E.emplaceBack(0,o.a5),E.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(E,Lo.members),this.rasterBoundsSegmentsPosOnly=o.aX.simpleSegment(0,0,4,5);const k=new o.aW;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(k,Lo.members),this.viewportSegments=o.aX.simpleSegment(0,0,4,2);const L=new o.ci;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(L);const N=new o.aY;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(N);const U=this.context.gl;this.stencilClearMode=new Jr({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new In(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=o.N();o.c7(m,0,this.width,this.height,0,0,1),o.Q(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(i,c.TRIANGLES,Vr.disabled,this.stencilClearMode,un.disabled,Xr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c,m){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(un.disabled),v.setDepthMode(Vr.disabled);const E={};for(const k of c)E[k.key]=this.nextStencilID++;this._renderTileMasks(E,c,m,!0),this._renderTileMasks(E,c,m,!1),this._tileClippingMaskIDs=E}_renderTileMasks(i,c,m,v){const E=this.context,k=E.gl,L=this.style.projection,N=this.transform,U=this.useProgram("clippingMask");for(const W of c){const J=i[W.key],Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(W),oe=L.getMeshFromTileID(this.context,W.canonical,v,!0,"stencil"),ce=N.getProjectionData({overscaledTileID:W,applyGlobeMatrix:!m,applyTerrainMatrix:!0});U.draw(E,k.TRIANGLES,Vr.disabled,new Jr({func:k.ALWAYS,mask:0},J,255,k.KEEP,k.KEEP,k.REPLACE),un.disabled,m?Xr.disabled:Xr.backCCW,null,Y,ce,"$clipping",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}_renderTilesDepthBuffer(){const i=this.context,c=i.gl,m=this.style.projection,v=this.transform,E=this.useProgram("depth"),k=this.getDepthModeFor3D(),L=ln(v,{tileSize:v.tileSize});for(const N of L){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),W=m.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),J=v.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(i,c.TRIANGLES,k,Jr.disabled,un.disabled,Xr.backCCW,null,U,J,"$clipping",W.vertexBuffer,W.indexBuffer,W.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Jr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Jr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const c=this.context.gl,m=i.sort(((k,L)=>L.overscaledZ-k.overscaledZ)),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const k={};for(let L=0;L<E;L++)k[L+v]=new Jr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[k,m]}return[{[v]:Jr.disabled},m]}stencilConfigForOverlapTwoPass(i){const c=this.context.gl,m=i.sort(((k,L)=>L.overscaledZ-k.overscaledZ)),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(this.clearStencil(),E>1){const k={},L={};for(let N=0;N<E;N++)k[N+v]=new Jr({func:c.GREATER,mask:255},E+1+N,255,c.KEEP,c.KEEP,c.REPLACE),L[N+v]=new Jr({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*E+1,[k,L,m]}return this.nextStencilID=3,[{[v]:new Jr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new Jr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new un([i.CONSTANT_COLOR,i.ONE],new o.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?un.unblended:un.alphaBlended}getDepthModeForSublayer(i,c,m){if(!this.opaquePassEnabledForLayer())return Vr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Vr(m||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new Vr(this.context.gl.LEQUAL,Vr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){var m,v;this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(B()),this.imageManager.beginFrame();const E=this.style._order,k=this.style.tileManagers,L={},N={},U={},W={isRenderingToTexture:!1,isRenderingGlobe:((m=i.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const Y in k){const oe=k[Y];oe.used&&oe.prepare(this.context),L[Y]=oe.getVisibleCoordinates(!1),N[Y]=L[Y].slice().reverse(),U[Y]=oe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<E.length;Y++)if(this.style._layers[E[Y]].is3D()){this.opaquePassCutoff=Y;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Y of E){const oe=this.style._layers[Y];if(!oe.hasOffscreenPass()||oe.isHidden(this.transform.zoom))continue;const ce=N[oe.source];(oe.type==="custom"||ce.length)&&this.renderLayer(this,k[oe.source],oe,ce,W)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:Y=>this.useProgram(Y)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.bp.black:o.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Y,oe){const ce=Y.context,ye=ce.gl,_e=((Fe,Te,Ge)=>{const ht=Math.cos(Te.rollInRadians),at=Math.sin(Te.rollInRadians),ot=Kr(Te),st=Te.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Fe.properties.get("sky-color"),u_horizon_color:Fe.properties.get("horizon-color"),u_horizon:[(Te.width/2-ot*at)*Ge,(Te.height/2+ot*ht)*Ge],u_horizon_normal:[-at,ht],u_sky_horizon_blend:Fe.properties.get("sky-horizon-blend")*Te.height/2*Ge,u_sky_blend:st}})(oe,Y.style.map.transform,Y.pixelRatio),ve=new Vr(ye.LEQUAL,Vr.ReadWrite,[0,1]),we=Jr.disabled,Le=Y.colorModeForRenderPass(),Se=Y.useProgram("sky"),ke=xa(ce,oe);Se.draw(ce,ye.TRIANGLES,ve,we,Le,Xr.disabled,_e,null,void 0,"sky",ke.vertexBuffer,ke.indexBuffer,ke.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[E[this.currentLayer]],oe=k[Y.source],ce=L[Y.source];this._renderTileClippingMasks(Y,ce,!1),this.renderLayer(this,oe,Y,ce,W)}this.renderPass="translucent";let J=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){const Y=this.style._layers[E[this.currentLayer]],oe=k[Y.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Y,W))continue;this.opaquePassEnabledForLayer()||J||(J=!0,W.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ce=(Y.type==="symbol"?U:N)[Y.source];this._renderTileClippingMasks(Y,L[Y.source],!!this.renderToTexture),this.renderLayer(this,oe,Y,ce,W)}if(W.isRenderingGlobe&&(function(Y,oe,ce){const ye=Y.context,_e=ye.gl,ve=Y.useProgram("atmosphere"),we=new Vr(_e.LEQUAL,Vr.ReadOnly,[0,1]),Le=Y.transform,Se=(function(st,Nt){const Vt=st.properties.get("position"),It=[-Vt.x,-Vt.y,-Vt.z],Yt=o.ar(new Float64Array(16));return st.properties.get("anchor")==="map"&&(o.bg(Yt,Yt,Nt.rollInRadians),o.bh(Yt,Yt,-Nt.pitchInRadians),o.bg(Yt,Yt,Nt.bearingInRadians),o.bh(Yt,Yt,Nt.center.lat*Math.PI/180),o.bJ(Yt,Yt,-Nt.center.lng*Math.PI/180)),o.cg(It,It,Yt),It})(ce,Y.transform),ke=Le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Fe=oe.properties.get("atmosphere-blend")*ke.projectionTransition;if(Fe===0)return;const Te=ku(Le.worldSize,Le.center.lat),Ge=Le.inverseProjectionMatrix,ht=new Float64Array(4);ht[3]=1,o.aH(ht,ht,Le.modelViewProjectionMatrix),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1,o.aH(ht,ht,Ge),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1;const at=((st,Nt,Vt,It,Yt)=>({u_sun_pos:st,u_atmosphere_blend:Nt,u_globe_position:Vt,u_globe_radius:It,u_inv_proj_matrix:Yt}))(Se,Fe,[ht[0],ht[1],ht[2]],Te,Ge),ot=xa(ye,oe);ve.draw(ye,_e.TRIANGLES,we,Jr.disabled,un.alphaBlended,Xr.disabled,at,null,null,"atmosphere",ot.vertexBuffer,ot.indexBuffer,ot.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Y=(function(oe,ce){let ye=null;const _e=Object.values(oe._layers).flatMap((Se=>Se.source&&!Se.isHidden(ce)?[oe.tileManagers[Se.source]]:[])),ve=_e.filter((Se=>Se.getSource().type==="vector")),we=_e.filter((Se=>Se.getSource().type!=="vector")),Le=Se=>{(!ye||ye.getSource().maxzoom<Se.getSource().maxzoom)&&(ye=Se)};return ve.forEach((Se=>Le(Se))),ye||we.forEach((Se=>Le(Se))),ye})(this.style,this.transform.zoom);Y&&(function(oe,ce,ye){for(let _e=0;_e<ye.length;_e++)Wl(oe,ce,ye[_e])})(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&(function(Y){const oe=Y.transform.padding;Is(Y,Y.transform.height-(oe.top||0),3,yf),Is(Y,oe.bottom||0,3,Gu),ta(Y,oe.left||0,3,sl),ta(Y,Y.transform.width-(oe.right||0),3,Zn);const ce=Y.transform.centerPoint;(function(ye,_e,ve,we){ra(ye,_e-1,ve-10,2,20,we),ra(ye,_e-10,ve-1,20,2,we)})(Y,ce.x,Y.transform.height-ce.y,gn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=i?!o.cj(c,m):!o.ck(c,m)),v||(v=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(o.cl(c,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(E,k){const L=E.context,N=L.gl,U=E.transform,W=un.unblended,J=new Vr(N.LEQUAL,Vr.ReadWrite,[0,1]),Y=k.tileManager.getRenderableTiles(),oe=E.useProgram("terrainDepth");L.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bp.transparent,depth:1});for(const ce of Y){const ye=k.getTerrainMesh(ce.tileID),_e=k.getTerrainData(ce.tileID),ve=U.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:k.getMeshFrameDelta(U.zoom)};oe.draw(L,N.TRIANGLES,J,Jr.disabled,W,Xr.backCCW,we,_e,ve,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain),(function(E,k){const L=E.context,N=L.gl,U=E.transform,W=un.unblended,J=new Vr(N.LEQUAL,Vr.ReadWrite,[0,1]),Y=k.getCoordsTexture(),oe=k.tileManager.getRenderableTiles(),ce=E.useProgram("terrainCoords");L.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bp.transparent,depth:1}),k.coordsIndex=[];for(const ye of oe){const _e=k.getTerrainMesh(ye.tileID),ve=k.getTerrainData(ye.tileID);L.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Y.texture);const we={u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(U.zoom)},Le=U.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ce.draw(L,N.TRIANGLES,J,Jr.disabled,W,Xr.backCCW,we,ve,Le,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments),k.coordsIndex.push(ye.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain))}renderLayer(i,c,m,v,E){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,o.cm(m)?(function(k,L,N,U,W,J){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=J,oe=Jr.disabled,ce=k.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ye,_e,ve,we,Le,Se,ke,Fe,Te){const Ge=_e.transform,ht=_e.style.map.terrain,at=Le==="map",ot=Se==="map";for(const st of ye){const Nt=we.getTile(st),Vt=Nt.getBucket(ve);if(!Vt||!Vt.text||!Vt.text.segments.get().length)continue;const It=o.ay(Vt.textSizeData,Ge.zoom),Yt=o.aN(Nt,1,_e.transform.zoom),zr=dr(at,_e.transform,Yt),Sn=ve.layout.get("icon-text-fit")!=="none"&&Vt.hasIconData();if(It){const Xn=Math.pow(2,Ge.zoom-Nt.tileID.overscaledZ),On=ht?(Yn,Ln)=>ht.getElevation(st,Yn,Ln):null;Wp(Vt,at,ot,Te,Ge,zr,Xn,It,Sn,o.aO(Ge,Nt,ke,Fe),st.toUnwrapped(),On)}}})(U,k,N,L,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),W),N.paint.get("icon-opacity").constantOr(1)!==0&&Uu(k,L,N,U,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),oe,ce,Y),N.paint.get("text-opacity").constantOr(1)!==0&&Uu(k,L,N,U,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),oe,ce,Y),L.map.showCollisionBoxes&&(ql(k,L,N,U,!0),ql(k,L,N,U,!1))})(i,c,m,v,this.style.placement.variableOffsets,E):o.cn(m)?(function(k,L,N,U,W){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=N.paint.get("circle-opacity"),oe=N.paint.get("circle-stroke-width"),ce=N.paint.get("circle-stroke-opacity"),ye=!N.layout.get("circle-sort-key").isConstant();if(Y.constantOr(1)===0&&(oe.constantOr(1)===0||ce.constantOr(1)===0))return;const _e=k.context,ve=_e.gl,we=k.transform,Le=k.getDepthModeForSublayer(0,Vr.ReadOnly),Se=Jr.disabled,ke=k.colorModeForRenderPass(),Fe=[],Te=we.getCircleRadiusCorrection();for(let Ge=0;Ge<U.length;Ge++){const ht=U[Ge],at=L.getTile(ht),ot=at.getBucket(N);if(!ot)continue;const st=N.paint.get("circle-translate"),Nt=N.paint.get("circle-translate-anchor"),Vt=o.aO(we,at,st,Nt),It=ot.programConfigurations.get(N.id),Yt=k.useProgram("circle",It),zr=ot.layoutVertexBuffer,Sn=ot.indexBuffer,Xn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ht),On={programConfiguration:It,program:Yt,layoutVertexBuffer:zr,indexBuffer:Sn,uniformValues:Np(k,at,N,Vt,Te),terrainData:Xn,projectionData:we.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!J,applyTerrainMatrix:!0})};if(ye){const Yn=ot.segments.get();for(const Ln of Yn)Fe.push({segments:new o.aX([Ln]),sortKey:Ln.sortKey,state:On})}else Fe.push({segments:ot.segments,sortKey:0,state:On})}ye&&Fe.sort(((Ge,ht)=>Ge.sortKey-ht.sortKey));for(const Ge of Fe){const{programConfiguration:ht,program:at,layoutVertexBuffer:ot,indexBuffer:st,uniformValues:Nt,terrainData:Vt,projectionData:It}=Ge.state;at.draw(_e,ve.TRIANGLES,Le,Se,ke,Xr.backCCW,Nt,Vt,It,N.id,ot,st,Ge.segments,N.paint,k.transform.zoom,ht)}})(i,c,m,v,E):o.co(m)?(function(k,L,N,U,W){if(N.paint.get("heatmap-opacity")===0)return;const J=k.context,{isRenderingToTexture:Y,isRenderingGlobe:oe}=W;if(k.style.map.terrain){for(const ce of U){const ye=L.getTile(ce);L.hasRenderableParent(ce)||(k.renderPass==="offscreen"?Hp(k,ye,N,ce,oe):k.renderPass==="translucent"&&xg(k,N,ce,Y,oe))}J.viewport.set([0,0,k.width,k.height])}else k.renderPass==="offscreen"?(function(ce,ye,_e,ve){const we=ce.context,Le=we.gl,Se=ce.transform,ke=Jr.disabled,Fe=new un([Le.ONE,Le.ONE],o.bp.transparent,[!0,!0,!0,!0]);(function(Te,Ge,ht){const at=Te.gl;Te.activeTexture.set(at.TEXTURE1),Te.viewport.set([0,0,Ge.width/4,Ge.height/4]);let ot=ht.heatmapFbos.get(o.cd);ot?(at.bindTexture(at.TEXTURE_2D,ot.colorAttachment.get()),Te.bindFramebuffer.set(ot.framebuffer)):(ot=qh(Te,Ge.width/4,Ge.height/4),ht.heatmapFbos.set(o.cd,ot))})(we,ce,_e),we.clear({color:o.bp.transparent});for(let Te=0;Te<ve.length;Te++){const Ge=ve[Te];if(ye.hasRenderableParent(Ge))continue;const ht=ye.getTile(Ge),at=ht.getBucket(_e);if(!at)continue;const ot=at.programConfigurations.get(_e.id),st=ce.useProgram("heatmap",ot),Nt=Se.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Vt=Se.getCircleRadiusCorrection();st.draw(we,Le.TRIANGLES,Vr.disabled,ke,Fe,Xr.backCCW,Fc(ht,Se.zoom,_e.paint.get("heatmap-intensity"),Vt),null,Nt,_e.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,_e.paint,Se.zoom,ot)}we.viewport.set([0,0,ce.width,ce.height])})(k,L,N,U):k.renderPass==="translucent"&&(function(ce,ye){const _e=ce.context,ve=_e.gl;_e.setColorMode(ce.colorModeForRenderPass());const we=ye.heatmapFbos.get(o.cd);we&&(_e.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_2D,we.colorAttachment.get()),_e.activeTexture.set(ve.TEXTURE1),Wc(_e,ye).bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(_e,ve.TRIANGLES,Vr.disabled,Jr.disabled,ce.colorModeForRenderPass(),Xr.disabled,Bp(ce,ye,0,1),null,null,ye.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,ye.paint,ce.transform.zoom))})(k,N)})(i,c,m,v,E):o.cp(m)?(function(k,L,N,U,W){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=N.paint.get("line-opacity"),oe=N.paint.get("line-width");if(Y.constantOr(1)===0||oe.constantOr(1)===0)return;const ce=k.getDepthModeForSublayer(0,Vr.ReadOnly),ye=k.colorModeForRenderPass(),_e=N.paint.get("line-dasharray"),ve=_e.constantOr(1),we=N.paint.get("line-pattern"),Le=we.constantOr(1),Se=N.paint.get("line-gradient"),ke=N.getCrossfadeParameters();let Fe;Fe=Le?"linePattern":ve&&Se?"lineGradientSDF":ve?"lineSDF":Se?"lineGradient":"line";const Te=k.context,Ge=Te.gl,ht=k.transform;let at=!0;for(const ot of U){const st=L.getTile(ot);if(Le&&!st.patternsLoaded())continue;const Nt=st.getBucket(N);if(!Nt)continue;const Vt=Nt.programConfigurations.get(N.id),It=k.context.program.get(),Yt=k.useProgram(Fe,Vt),zr=at||Yt.program!==It,Sn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ot),Xn=we.constantOr(null),On=_e&&_e.constantOr(null);if(Xn&&st.imageAtlas){const na=st.imageAtlas,Si=na.patternPositions[Xn.to.toString()],_n=na.patternPositions[Xn.from.toString()];Si&&_n&&Vt.setConstantPatternPositions(Si,_n)}else if(On){const na=N.layout.get("line-cap")==="round",Si=k.lineAtlas.getDash(On.to,na),_n=k.lineAtlas.getDash(On.from,na);Vt.setConstantDashPositions(Si,_n)}const Yn=ht.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Ln=ht.getPixelScale();let Qn;Le?(Qn=Jd(k,st,N,Ln,ke),Zp(Te,Ge,st,Vt,ke)):ve&&Se?(Qn=Bc(k,st,N,Ln,ke,Nt.lineClipsArray.length),fa(k,L,Te,Ge,N,Nt,ot,Vt,ke)):ve?(Qn=ef(k,st,N,Ln,ke),Un(k,Te,Ge,Vt,zr,ke)):Se?(Qn=pg(k,st,N,Ln,Nt.lineClipsArray.length),_a(k,L,Te,Ge,N,Nt,ot)):Qn=Bl(k,st,N,Ln);const si=k.stencilModeForClipping(ot);Yt.draw(Te,Ge.TRIANGLES,ce,si,ye,Xr.disabled,Qn,Sn,Yn,N.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,N.paint,k.transform.zoom,Vt,Nt.layoutVertexBuffer2),at=!1}})(i,c,m,v,E):o.cq(m)?(function(k,L,N,U,W){const J=N.paint.get("fill-color"),Y=N.paint.get("fill-opacity");if(Y.constantOr(1)===0)return;const{isRenderingToTexture:oe}=W,ce=k.colorModeForRenderPass(),ye=N.paint.get("fill-pattern"),_e=k.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&J.constantOr(o.bp.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===_e){const ve=k.getDepthModeForSublayer(1,k.renderPass==="opaque"?Vr.ReadWrite:Vr.ReadOnly);qu(k,L,N,U,ve,ce,!1,oe)}if(k.renderPass==="translucent"&&N.paint.get("fill-antialias")){const ve=k.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,Vr.ReadOnly);qu(k,L,N,U,ve,ce,!0,oe)}})(i,c,m,v,E):o.cr(m)?(function(k,L,N,U,W){const J=N.paint.get("fill-extrusion-opacity");if(J===0)return;const{isRenderingToTexture:Y}=W;if(k.renderPass==="translucent"){const oe=new Vr(k.context.gl.LEQUAL,Vr.ReadWrite,k.depthRangeFor3D);if(J!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))gf(k,L,N,U,oe,Jr.disabled,un.disabled,Y),gf(k,L,N,U,oe,k.stencilModeFor3D(),k.colorModeForRenderPass(),Y);else{const ce=k.colorModeForRenderPass();gf(k,L,N,U,oe,Jr.disabled,ce,Y)}}})(i,c,m,v,E):o.cs(m)?(function(k,L,N,U,W){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const{isRenderingToTexture:J}=W,Y=k.context,oe=k.style.projection.useSubdivision,ce=k.getDepthModeForSublayer(0,Vr.ReadOnly),ye=k.colorModeForRenderPass();if(k.renderPass==="offscreen")(function(_e,ve,we,Le,Se,ke,Fe){const Te=_e.context,Ge=Te.gl;for(const ht of we){const at=ve.getTile(ht),ot=at.dem;if(!ot||!ot.data||!at.needsHillshadePrepare)continue;const st=ot.dim,Nt=ot.stride,Vt=ot.getPixels();if(Te.activeTexture.set(Ge.TEXTURE1),Te.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||_e.getTileTexture(Nt),at.demTexture){const Yt=at.demTexture;Yt.update(Vt,{premultiply:!1}),Yt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else at.demTexture=new o.T(Te,Vt,Ge.RGBA,{premultiply:!1}),at.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Te.activeTexture.set(Ge.TEXTURE0);let It=at.fbo;if(!It){const Yt=new o.T(Te,{width:st,height:st,data:null},Ge.RGBA);Yt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),It=at.fbo=Te.createFramebuffer(st,st,!0,!1),It.colorAttachment.set(Yt.texture)}Te.bindFramebuffer.set(It.framebuffer),Te.viewport.set([0,0,st,st]),_e.useProgram("hillshadePrepare").draw(Te,Ge.TRIANGLES,Se,ke,Fe,Xr.disabled,Dh(at.tileID,ot),null,null,Le.id,_e.rasterBoundsBuffer,_e.quadTriangleIndexBuffer,_e.rasterBoundsSegments),at.needsHillshadePrepare=!1}})(k,L,U,N,ce,Jr.disabled,ye),Y.viewport.set([0,0,k.width,k.height]);else if(k.renderPass==="translucent")if(oe){const[_e,ve,we]=k.stencilConfigForOverlapTwoPass(U);Gl(k,L,N,we,_e,ce,ye,!1,J),Gl(k,L,N,we,ve,ce,ye,!0,J)}else{const[_e,ve]=k.getStencilConfigForOverlapAndUpdateStencilID(U);Gl(k,L,N,ve,_e,ce,ye,!1,J)}})(i,c,m,v,E):o.ct(m)?(function(k,L,N,U,W){if(k.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:J}=W,Y=k.style.projection.useSubdivision,oe=k.getDepthModeForSublayer(0,Vr.ReadOnly),ce=k.colorModeForRenderPass();if(Y){const[ye,_e,ve]=k.stencilConfigForOverlapTwoPass(U);as(k,L,N,ve,ye,oe,ce,!1,J),as(k,L,N,ve,_e,oe,ce,!0,J)}else{const[ye,_e]=k.getStencilConfigForOverlapAndUpdateStencilID(U);as(k,L,N,_e,ye,oe,ce,!1,J)}})(i,c,m,v,E):o.bU(m)?(function(k,L,N,U,W){if(k.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:J}=W,Y=L.getSource(),oe=k.style.projection.useSubdivision;if(Y instanceof zt)ss(k,L,N,U,null,!1,!1,Y.tileCoords,Y.flippedWindingOrder,J);else if(oe){const[ce,ye,_e]=k.stencilConfigForOverlapTwoPass(U);ss(k,L,N,_e,ce,!1,!0,os,!1,J),ss(k,L,N,_e,ye,!0,!0,os,!1,J)}else{const[ce,ye]=k.getStencilConfigForOverlapAndUpdateStencilID(U);ss(k,L,N,ye,ce,!1,!0,os,!1,J)}})(i,c,m,v,E):o.cu(m)?(function(k,L,N,U,W){const J=N.paint.get("background-color"),Y=N.paint.get("background-opacity");if(Y===0)return;const{isRenderingToTexture:oe}=W,ce=k.context,ye=ce.gl,_e=k.style.projection,ve=k.transform,we=ve.tileSize,Le=N.paint.get("background-pattern");if(k.isPatternMissing(Le))return;const Se=!Le&&J.a===1&&Y===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Se)return;const ke=Jr.disabled,Fe=k.getDepthModeForSublayer(0,Se==="opaque"?Vr.ReadWrite:Vr.ReadOnly),Te=k.colorModeForRenderPass(),Ge=k.useProgram(Le?"backgroundPattern":"background"),ht=U||ln(ve,{tileSize:we,terrain:k.style.map.terrain});Le&&(ce.activeTexture.set(ye.TEXTURE0),k.imageManager.bind(k.context));const at=N.getCrossfadeParameters();for(const ot of ht){const st=ve.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),Nt=Le?ns(Y,k,Le,{tileID:ot,tileSize:we},at):Up(Y,J),Vt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ot),It=_e.getMeshFromTileID(ce,ot.canonical,!1,!0,"raster");Ge.draw(ce,ye.TRIANGLES,Fe,ke,Te,Xr.backCCW,Nt,Vt,st,N.id,It.vertexBuffer,It.indexBuffer,It.segments)}})(i,0,m,v,E):o.cv(m)&&(function(k,L,N,U){const{isRenderingGlobe:W}=U,J=k.context,Y=N.implementation,oe=k.style.projection,ce=k.transform,ye=ce.getProjectionDataForCustomLayer(W),_e={farZ:ce.farZ,nearZ:ce.nearZ,fov:ce.fov*Math.PI/180,modelViewProjectionMatrix:ce.modelViewProjectionMatrix,projectionMatrix:ce.projectionMatrix,shaderData:{variantName:oe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${oe.shaderPreludeCode.vertexSource}`,define:oe.shaderDefine},defaultProjectionData:ye},ve=Y.renderingMode?Y.renderingMode:"2d";if(k.renderPass==="offscreen"){const we=Y.prerender;we&&(k.setCustomLayerDefaults(),J.setColorMode(k.colorModeForRenderPass()),we.call(Y,J.gl,_e),J.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),J.setColorMode(k.colorModeForRenderPass()),J.setStencilMode(Jr.disabled);const we=ve==="3d"?k.getDepthModeFor3D():k.getDepthModeForSublayer(0,Vr.ReadOnly);J.setDepthMode(we),Y.render(J.gl,_e),J.setDirty(),k.setBaseState(),J.bindFramebuffer.set(null)}})(i,0,m,E))}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!c||!m}useProgram(i,c,m=!1,v=[]){this.cache=this.cache||{};const E=!!this.style.map.terrain,k=this.style.projection,L=m?wn.projectionMercator:k.shaderPreludeCode,N=m?Ra:k.shaderDefine,U=i+(c?c.cacheKey:"")+`/${m?eo:k.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[U]||(this.cache[U]=new Xd(this.context,wn[i],c,mg[i],this._showOverdrawInspector,E,L,N,v)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var i,c;if(this._tileTextures){for(const m in this._tileTextures){const v=this._tileTextures[m];if(v)for(const E of v)E.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((i=this.tileExtentMesh.vertexBuffer)===null||i===void 0||i.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const m in this.cache){const v=this.cache[m];v&&v.program&&this.context.gl.deleteProgram(v.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}function vf(w,i){let c,m=!1,v=null,E=null;const k=()=>{v=null,m&&(w.apply(E,c),v=setTimeout(k,i),m=!1)};return(...L)=>(m=!0,E=this,c=L,v||k(),v)}class _f{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(m=v)})),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const m=c.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let E=window.location.hash.replace(v,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let k=window.location.href.replace(/(#.+)?$/,E);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=vf(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,v),k=Math.round(c.lng*E)/E,L=Math.round(c.lat*E)/E,N=this._map.getBearing(),U=this._map.getPitch();let W="";if(W+=i?`/${k}/${L}/${m}`:`${m}/${L}/${k}`,(N||U)&&(W+="/"+Math.round(10*N)/10),U&&(W+=`/${Math.round(U)}`),this._hashName){const J=this._hashName;let Y=!1;const oe=window.location.hash.slice(1).split("&").map((ce=>{const ye=ce.split("=")[0];return ye===J?(Y=!0,`${ye}=${W}`):ce})).filter((ce=>ce));return Y||oe.push(`${J}=${W}`),`#${oe.join("&")}`}return`#${W}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new o.V(+i[2],+i[1])}catch{return!1}const c=+i[0],m=+(i[3]||0),v=+(i[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const ls={linearity:.3,easing:o.cw(0,0,.3,1)},Kp=o.e({deceleration:2500,maxSpeed:1400},ls),Ri=o.e({deceleration:20,maxSpeed:1400},ls),ro=o.e({deceleration:1e3,maxSpeed:360},ls),xf=o.e({deceleration:1e3,maxSpeed:90},ls),zo=o.e({deceleration:1e3,maxSpeed:360},ls);class nv{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:B(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=B();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,c.roll+=E.rollDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const E=Os(c.pan.mag(),m,o.e({},Kp,i||{})),k=c.pan.mult(E.amount/c.pan.mag()),L=this._map.cameraHelper.handlePanInertia(k,this._map.transform);v.center=L.easingCenter,v.offset=L.easingOffset,No(v,E)}if(c.zoom){const E=Os(c.zoom,m,Ri);v.zoom=this._map.transform.zoom+E.amount,No(v,E)}if(c.bearing){const E=Os(c.bearing,m,ro);v.bearing=this._map.transform.bearing+o.an(E.amount,-179,179),No(v,E)}if(c.pitch){const E=Os(c.pitch,m,xf);v.pitch=this._map.transform.pitch+E.amount,No(v,E)}if(c.roll){const E=Os(c.roll,m,zo);v.roll=this._map.transform.roll+o.an(E.amount,-179,179),No(v,E)}if(v.zoom||v.bearing){const E=c.pinchAround===void 0?c.around:c.pinchAround;v.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function No(w,i){(!w.duration||w.duration<i.duration)&&(w.duration=i.duration,w.easing=i.easing)}function Os(w,i,c){const{maxSpeed:m,linearity:v,deceleration:E}=c,k=o.an(w*v/(i/1e3),-m,m),L=Math.abs(k)/(E*v);return{easing:c.easing,duration:1e3*L,amount:k*(L/2)}}class mi extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(i,m);const E=D.mousePos(c.getCanvas(),m),k=c.unproject(E);super(i,o.e({point:E,lngLat:k,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class Zl extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){const v=i==="touchend"?m.changedTouches:m.touches,E=D.touchPos(c.getCanvasContainer(),v),k=E.map((N=>c.unproject(N))),L=E.reduce(((N,U,W,J)=>N.add(U.div(J.length))),new o.P(0,0));super(i,{points:E,point:L,lngLats:k,lngLat:c.unproject(L),originalEvent:m}),this._defaultPrevented=!1}}class Hh extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}}class Fo{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Hh(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new mi(i.type,this._map,i))}mouseup(i){this._map.fire(new mi(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new mi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new mi(i.type,this._map,i))}mouseover(i){this._map.fire(new mi(i.type,this._map,i))}mouseout(i){this._map.fire(new mi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Zl(i.type,this._map,i))}touchmove(i){this._map.fire(new Zl(i.type,this._map,i))}touchend(i){this._map.fire(new Zl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Zl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bo{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new mi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new mi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vo{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(o.P.convert(i),this._map.terrain)}}class no{constructor(i,c){this._map=i,this._tr=new Vo(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(D.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=D.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const E=Math.min(v.x,m.x),k=Math.max(v.x,m.x),L=Math.min(v.y,m.y),N=Math.max(v.y,m.y);D.setTransform(this._box,`translate(${E}px,${L}px)`),this._box.style.width=k-E+"px",this._box.style.height=N-L+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const m=this._startPos,v=c;if(this.reset(),D.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:i})),{cameraAnimation:E=>E.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new o.l(i,{originalEvent:c}))}}function Ui(w,i){if(w.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${i.length}`);const c={};for(let m=0;m<w.length;m++)c[w[m].identifier]=i[m];return c}class Jt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=(function(v){const E=new o.P(0,0);for(const k of v)E._add(k);return E.div(v.length)})(c),this.touches=Ui(m,c)))}touchmove(i,c,m){if(this.aborted||!this.centroid)return;const v=Ui(m,c);for(const E in this.touches){const k=v[E];(!k||k.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(i,c,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Zh{constructor(i){this.singleTap=new Jt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,m){this.singleTap.touchstart(i,c,m)}touchmove(i,c,m){this.singleTap.touchmove(i,c,m)}touchend(i,c,m){const v=this.singleTap.touchend(i,c,m);if(v){const E=i.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(v)<30;if(E&&k||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Kh{constructor(i){this._tr=new Vo(i),this._zoomIn=new Zh({numTouches:1,numTaps:2}),this._zoomOut=new Zh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,m){this._zoomIn.touchstart(i,c,m),this._zoomOut.touchstart(i,c,m)}touchmove(i,c,m){this._zoomIn.touchmove(i,c,m),this._zoomOut.touchmove(i,c,m)}touchend(i,c,m){const v=this._zoomIn.touchend(i,c,m),E=this._zoomOut.touchend(i,c,m),k=this._tr;return v?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(v)},{originalEvent:i})}):E?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(E)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kl{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&D.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const pa=0,ma=2,Kn={[pa]:1,[ma]:2};class Na{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=D.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(c,m){const v=Kn[m];return c.buttons===void 0||(c.buttons&v)!==v})(i,this._eventButton)}isValidEndEvent(i){return D.mouseButton(i)===this._eventButton}}class bf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class Xp{constructor(i=new Na({checkCorrectEvent:()=>!0}),c=new bf){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(i,c,m){return i instanceof MouseEvent?c(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?m(i):void 0}startMove(i){this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(i){this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(i){return this._executeRelevantHandler(i,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Xl=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=i=>{i.preventDefault()}};class Yp{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,c,m){return this._calculateTransform(i,c,m)}touchmove(i,c,m){if(this._active){if(!this._shouldBePrevented(m.length))return i.preventDefault(),this._calculateTransform(i,c,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,c,m){this._calculateTransform(i,c,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,m){m.length>0&&(this._active=!0);const v=Ui(m,c),E=new o.P(0,0),k=new o.P(0,0);let L=0;for(const U in v){const W=v[U],J=this._touches[U];J&&(E._add(W),k._add(W.sub(J)),L++,v[U]=W)}if(this._touches=v,this._shouldBePrevented(L)||!k.mag())return;const N=k.div(L);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(L),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,E]=this._firstTwoTouches,k=Wu(m,c,v),L=Wu(m,c,E);if(!k||!L)return;const N=this._aroundCenter?null:k.add(L).div(2);return this._move([k,L],N,i)}touchend(i,c,m){if(!this._firstTwoTouches)return;const[v,E]=this._firstTwoTouches,k=Wu(m,c,v),L=Wu(m,c,E);k&&L||(this._active&&D.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Wu(w,i,c){for(let m=0;m<w.length;m++)if(w[m].identifier===c)return i[m]}function Qp(w,i){return Math.log(w/i)/Math.LN2}class Yl extends Xh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qp(this._distance,m),pinchAround:c}}}function wf(w,i){return 180*w.angleWith(i)/Math.PI}class Jp extends Xh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,m){const v=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wf(this._vector,v),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,m=wf(i,this._startVector);return Math.abs(m)<c}}function Hu(w){return Math.abs(w.y)>Math.abs(w.x)}class Yh extends Xh{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,m){super.touchstart(i,c,m),this._currentTouchCount=m.length}_start(i){this._lastPoints=i,Hu(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=i[0].sub(this._lastPoints[0]),E=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,E,m.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,m){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,E=c.mag()>=2;if(!v&&!E)return;if(!v||!E)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const k=i.y>0==c.y>0;return Hu(i)&&Hu(c)&&k}}const ll={panStep:100,bearingStep:15,pitchStep:10};class Mn{constructor(i){this._tr=new Vo(i);const c=ll;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,m=0,v=0,E=0,k=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),E=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),E=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),k=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:L=>{const N=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:Hc,zoom:c?Math.round(N.zoom)+c*(i.shiftKey?2:1):N.zoom,bearing:N.bearing+m*this._bearingStep,pitch:N.pitch+v*this._pitchStep,offset:[-E*this._panStep,-k*this._panStep],center:N.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hc(w){return w*(2-w)}const Zc=4.000244140625,Zu=1/450;class Ku{constructor(i,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=i,this._tr=new Vo(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Zu}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=B(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Zc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=D.mousePos(this._map.getCanvas(),i),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(o.V.convert(m.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const L=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Zc?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&N!==0&&(N=1/N);const U=typeof this._targetZoom!="number"?i.scale:o.aq(this._targetZoom);this._targetZoom=i.applyConstrain(i.getCameraLngLat(),o.at(U*N)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let E,k=!1;if(this._type==="wheel"&&m&&v){const L=B()-this._lastWheelEventTime,N=Math.min((L+5)/200,1),U=v(N);E=o.G.number(m,c,U),N<1?this._frameId||(this._frameId=!0):k=!0}else E=c,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!k,zoomDelta:E-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=o.cy;if(this._prevEase){const m=this._prevEase,v=(B()-m.start)/m.duration,E=m.easing(v+.01)-m.easing(v),k=.27/Math.sqrt(E*E+1e-4)*.01,L=Math.sqrt(.0729-k*k);c=o.cw(k,L,.25,1)}return this._prevEase={start:B(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ql{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Sf{constructor(i){this._tr=new Vo(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pf{constructor(){this._tap=new Zh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],E=i.timeStamp-this._tapTime<500,k=this._tapPoint.dist(v)<30;E&&k?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(i,c,m)}touchmove(i,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],E=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(i,c,m)}touchend(i,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(i,c,m);v&&(this._tapTime=i.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ef{constructor(i,c,m){this._el=i,this._mousePan=c,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eo{constructor(i,c,m,v){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=c,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ls{constructor(i,c,m,v){this._el=i,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ar{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=D.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=m,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(D.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:i,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const gr=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Xu extends o.l{}function Qh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class $o{constructor(i,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,E)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=v.type==="renderFrame"?void 0:v,L={needsRenderFrame:!1},N={},U={};for(const{handlerName:Y,handler:oe,allowed:ce}of this._handlers){if(!oe.isEnabled())continue;let ye;if(this._blockedByActive(U,ce,Y))oe.reset();else if(oe[E||v.type]){if(o.cz(v,E||v.type)){const _e=D.mousePos(this._map.getCanvas(),v);ye=oe[E||v.type](v,_e)}else if(o.cA(v,E||v.type)){const _e=this._getMapTouches(v.touches),ve=D.touchPos(this._map.getCanvas(),_e);ye=oe[E||v.type](v,ve,_e)}else o.cB(E||v.type)||(ye=oe[E||v.type](v));this.mergeHandlerResult(L,N,ye,Y,k),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()}(ye||oe.isActive())&&(U[Y]=oe)}const W={};for(const Y in this._previousActiveHandlers)U[Y]||(W[Y]=k);this._previousActiveHandlers=U,(Object.keys(W).length||Qh(L))&&(this._changes.push([L,N,W]),this._triggerRenderFrame()),(Object.keys(U).length||Qh(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=L;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new nv(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,E,k]of this._listeners)D.addEventListener(v,E,v===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[i,c,m]of this._listeners)D.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Fo(c,i));const v=c.boxZoom=new no(c,i);this._add("boxZoom",v),i.interactive&&i.boxZoom&&v.enable();const E=c.cooperativeGestures=new ar(c,i.cooperativeGestures);this._add("cooperativeGestures",E),i.cooperativeGestures&&E.enable();const k=new Kh(c),L=new Sf(c);c.doubleClickZoom=new Ql(L,k),this._add("tapZoom",k),this._add("clickZoom",L),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Pf;this._add("tapDragZoom",N);const U=c.touchPitch=new Yh(c);this._add("touchPitch",U),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const W=()=>c.project(c.getCenter()),J=(function({enable:Se,clickTolerance:ke,aroundCenter:Fe=!0,minPixelCenterThreshold:Te=100,rotateDegreesPerPixelMoved:Ge=.8},ht){const at=new Na({checkCorrectEvent:ot=>D.mouseButton(ot)===0&&ot.ctrlKey||D.mouseButton(ot)===2&&!ot.ctrlKey});return new Kl({clickTolerance:ke,move:(ot,st)=>{const Nt=ht();if(Fe&&Math.abs(Nt.y-ot.y)>Te)return{bearingDelta:o.cx(new o.P(ot.x,st.y),st,Nt)};let Vt=(st.x-ot.x)*Ge;return Fe&&st.y<Nt.y&&(Vt=-Vt),{bearingDelta:Vt}},moveStateManager:at,enable:Se,assignEvents:Xl})})(i,W),Y=(function({enable:Se,clickTolerance:ke,pitchDegreesPerPixelMoved:Fe=-.5}){const Te=new Na({checkCorrectEvent:Ge=>D.mouseButton(Ge)===0&&Ge.ctrlKey||D.mouseButton(Ge)===2});return new Kl({clickTolerance:ke,move:(Ge,ht)=>({pitchDelta:(ht.y-Ge.y)*Fe}),moveStateManager:Te,enable:Se,assignEvents:Xl})})(i),oe=(function({enable:Se,clickTolerance:ke,rollDegreesPerPixelMoved:Fe=.3},Te){const Ge=new Na({checkCorrectEvent:ht=>D.mouseButton(ht)===2&&ht.ctrlKey});return new Kl({clickTolerance:ke,move:(ht,at)=>{const ot=Te();let st=(at.x-ht.x)*Fe;return at.y<ot.y&&(st=-st),{rollDelta:st}},moveStateManager:Ge,enable:Se,assignEvents:Xl})})(i,W);c.dragRotate=new Eo(i,J,Y,oe),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate","mouseRoll"]),this._add("mouseRoll",oe,["mousePitch"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const ce=(function({enable:Se,clickTolerance:ke}){const Fe=new Na({checkCorrectEvent:Te=>D.mouseButton(Te)===0&&!Te.ctrlKey});return new Kl({clickTolerance:ke,move:(Te,Ge)=>({around:Ge,panDelta:Ge.sub(Te)}),activateOnStart:!0,moveStateManager:Fe,enable:Se,assignEvents:Xl})})(i),ye=new Yp(i,c);c.dragPan=new Ef(m,ce,ye),this._add("mousePan",ce),this._add("touchPan",ye,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const _e=new Jp,ve=new Yl;c.touchZoomRotate=new Ls(m,ve,_e,N),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",ve,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate),this._add("blockableMapEvent",new Bo(c));const we=c.scrollZoom=new Ku(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",we,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const Le=c.keyboard=new Mn(c);this._add("keyboard",Le),i.interactive&&i.keyboard&&c.keyboard.enable()}_add(i,c,m){this._handlers.push({handlerName:i,handler:c,allowed:m}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gr(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,m){for(const v in i)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const m of i)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(i,c,m,v,E){if(!m)return;o.e(i,m);const k={handlerName:v,originalEvent:m.originalEvent||E};m.zoomDelta!==void 0&&(c.zoom=k),m.panDelta!==void 0&&(c.drag=k),m.rollDelta!==void 0&&(c.roll=k),m.pitchDelta!==void 0&&(c.pitch=k),m.bearingDelta!==void 0&&(c.rotate=k)}_applyChanges(){const i={},c={},m={};for(const[v,E,k]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(i.rollDelta=(i.rollDelta||0)+v.rollDelta),v.around!==void 0&&(i.around=v.around),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),o.e(c,E),o.e(m,k);this._updateMapTransform(i,c,m),this._changes=[]}_updateMapTransform(i,c,m){const v=this._map,E=v._getTransformForUpdate(),k=v.terrain;if(!(Qh(i)||k&&this._terrainMovement))return this._fireEvents(c,m,!0);v._stop(!0);let{panDelta:L,zoomDelta:N,bearingDelta:U,pitchDelta:W,rollDelta:J,around:Y,pinchAround:oe}=i;oe!==void 0&&(Y=oe),Y=Y||v.transform.centerPoint,k&&!E.isPointOnMapSurface(Y)&&(Y=E.centerPoint);const ce={panDelta:L,zoomDelta:N,rollDelta:J,pitchDelta:W,bearingDelta:U,around:Y};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(Y)&&(Y=E.centerPoint);const ye=Y.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(L?Y.sub(L):Y);this._handleMapControls({terrain:k,tr:E,deltasForHelper:ce,preZoomAroundLoc:ye,combinedEventsInProgress:c,panDelta:L}),v._applyUpdatedTransform(E),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,m,!0)}_handleMapControls({terrain:i,tr:c,deltasForHelper:m,preZoomAroundLoc:v,combinedEventsInProgress:E,panDelta:k}){const L=this._map.cameraHelper;if(L.handleMapControlsRollPitchBearingZoom(m,c),i)return L.useGlobeControls?(this._terrainMovement||!E.drag&&!E.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void L.handleMapControlsPan(m,c,v)):this._terrainMovement||!E.drag&&!E.zoom?void(E.drag&&this._terrainMovement&&k?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(k))):L.handleMapControlsPan(m,c,v)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void L.handleMapControlsPan(m,c,v));L.handleMapControlsPan(m,c,v)}_fireEvents(i,c,m){const v=gr(this._eventsInProgress),E=gr(i),k={};for(const J in i){const{originalEvent:Y}=i[J];this._eventsInProgress[J]||(k[`${J}start`]=Y),this._eventsInProgress[J]=i[J]}!v&&E&&this._fireEvent("movestart",E.originalEvent);for(const J in k)this._fireEvent(J,k[J]);E&&this._fireEvent("move",E.originalEvent);for(const J in i){const{originalEvent:Y}=i[J];this._fireEvent(J,Y)}const L={};let N;for(const J in this._eventsInProgress){const{handlerName:Y,originalEvent:oe}=this._eventsInProgress[J];this._handlersById[Y].isActive()||(delete this._eventsInProgress[J],N=c[Y]||oe,L[`${J}end`]=N)}for(const J in L)this._fireEvent(J,L[J]);const U=gr(this._eventsInProgress),W=(v||E)&&!U;if(W&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const J=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&J.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(J)}if(m&&W){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!J||!J.essential&&z.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),Y(this._map.getBearing())&&this._map.resetNorth()):(Y(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new o.l(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new Xu("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class xi extends o.E{constructor(i,c,m){super(),this._renderFrameCallback=()=>{const v=Math.min((B()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=m.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(i,c){i.apply(this.transform,!0),this.transform=i,this.cameraHelper=c}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,c){return this.jumpTo({elevation:i},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,c,m){return i=o.P.convert(i).mult(-1),this.panTo(this.transform.center,o.e({offset:i},c),m)}panTo(i,c,m){return this.easeTo(o.e({center:i},c),m)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,m){return this.easeTo(o.e({zoom:i},c),m)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,c){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,m){return this.easeTo(o.e({bearing:i},c),m)}resetNorth(i,c){return this.rotateTo(0,o.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}getRoll(){return this.transform.roll}setRoll(i,c){return this.jumpTo({roll:i},c),this}cameraForBounds(i,c){i=Wr.convert(i).adjustAntiMeridian();const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,c)}_cameraForBoxAndBearing(i,c,m,v){const E={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const U=v.padding;v.padding={top:U,bottom:U,right:U,left:U}}const k=o.e(E,v.padding);v.padding=k;const L=this.transform,N=new Wr(i,c);return this.cameraHelper.cameraForBoxAndBearing(v,k,N,m,L)}fitBounds(i,c,m){return this._fitInternal(this.cameraForBounds(i,c),c,m)}fitScreenCoordinates(i,c,m,v,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(i)),this.transform.screenPointToLocation(o.P.convert(c)),m,v),v,E)}_fitInternal(i,c,m){return i?(delete(c=o.e(i,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(i,c){this.stop();const m=this._getTransformForUpdate();let v=!1,E=!1,k=!1;const L=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,i);const N=m.zoom!==L;return"elevation"in i&&m.elevation!==+i.elevation&&m.setElevation(+i.elevation),"bearing"in i&&m.bearing!==+i.bearing&&(v=!0,m.setBearing(+i.bearing)),"pitch"in i&&m.pitch!==+i.pitch&&(E=!0,m.setPitch(+i.pitch)),"roll"in i&&m.roll!==+i.roll&&(k=!0,m.setRoll(+i.roll)),i.padding==null||m.isPaddingEqual(i.padding)||m.setPadding(i.padding),this._applyUpdatedTransform(m),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),v&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),E&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),k&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(i,c,m,v=0){const E=o.a9.fromLngLat(i,c),k=o.a9.fromLngLat(m,v),L=k.x-E.x,N=k.y-E.y,U=k.z-E.z,W=Math.hypot(L,N,U);if(W===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(L,N),Y=o.at(this.transform.cameraToCenterDistance/W/this.transform.tileSize),oe=180*Math.atan2(L,-N)/Math.PI;let ce=180*Math.acos(J/W)/Math.PI;return ce=U<0?90-ce:90+ce,{center:k.toLngLat(),elevation:v,zoom:Y,pitch:ce,bearing:oe}}calculateCameraOptionsFromCameraLngLatAltRotation(i,c,m,v,E){const k=this.transform.calculateCenterFromCameraLngLatAlt(i,c,m,v);return{center:k.center,elevation:k.elevation,zoom:k.zoom,bearing:m,pitch:v,roll:E}}easeTo(i,c){this._stop(!1,i.easeId),((i=o.e({offset:[0,0],duration:500,easing:o.cy},i)).animate===!1||!i.essential&&z.prefersReducedMotion)&&(i.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),E=m.pitch,k=m.roll,L="bearing"in i?this._normalizeBearing(i.bearing,v):v,N="pitch"in i?+i.pitch:E,U="roll"in i?this._normalizeBearing(i.roll,k):k,W="padding"in i?i.padding:m.padding,J=o.P.convert(i.offset);let Y,oe;i.around&&(Y=o.V.convert(i.around),oe=m.locationToScreenPoint(Y));const ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ye=this.cameraHelper.handleEaseTo(m,{bearing:L,pitch:N,roll:U,padding:W,around:Y,aroundPoint:oe,offsetAsPoint:J,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||v!==L,this._pitching=this._pitching||N!==E,this._rolling=this._rolling||U!==k,this._padding=!m.isPaddingEqual(W),this._zooming=this._zooming||ye.isZooming,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,ce),this.terrain&&this._prepareElevation(ye.elevationCenter),this._ease((_e=>{ye.easeFunc(_e),this.terrain&&!i.freezeElevation&&this._updateElevation(_e),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(_e=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,_e)}),i),this}_prepareEase(i,c,m={}){this._moving=!0,c||m.moving||this.fire(new o.l("movestart",i)),this._zooming&&!m.zooming&&this.fire(new o.l("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new o.l("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new o.l("pitchstart",i)),this._rolling&&!m.rolling&&this.fire(new o.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(m-(c-(m*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const c=i.getCameraLngLat(),m=i.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,i.zoom):0;if(m<v){const E=this.calculateCameraOptionsFromTo(c,v,i.center,i.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(i){const c=[];if(c.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&c.push((v=>this.transformCameraUpdate(v))),!c.length)return;const m=i.clone();for(const v of c){const E=m.clone(),{center:k,zoom:L,roll:N,pitch:U,bearing:W,elevation:J}=v(E);k&&E.setCenter(k),J!==void 0&&E.setElevation(J),L!==void 0&&E.setZoom(L),N!==void 0&&E.setRoll(N),U!==void 0&&E.setPitch(U),W!==void 0&&E.setBearing(W),m.apply(E,!1)}this.transform.apply(m,!1)}_fireMoveEvents(i){this.fire(new o.l("move",i)),this._zooming&&this.fire(new o.l("zoom",i)),this._rotating&&this.fire(new o.l("rotate",i)),this._pitching&&this.fire(new o.l("pitch",i)),this._rolling&&this.fire(new o.l("roll",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,E=this._pitching,k=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new o.l("zoomend",i)),v&&this.fire(new o.l("rotateend",i)),E&&this.fire(new o.l("pitchend",i)),k&&this.fire(new o.l("rollend",i)),this.fire(new o.l("moveend",i))}flyTo(i,c){if(!i.essential&&z.prefersReducedMotion){const st=o.U(i,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(st,c)}this.stop(),i=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cy},i);const m=this._getTransformForUpdate(),v=m.bearing,E=m.pitch,k=m.roll,L=m.padding,N="bearing"in i?this._normalizeBearing(i.bearing,v):v,U="pitch"in i?+i.pitch:E,W="roll"in i?this._normalizeBearing(i.roll,k):k,J="padding"in i?i.padding:m.padding,Y=o.P.convert(i.offset);let oe=m.centerPoint.add(Y);const ce=m.screenPointToLocation(oe),ye=this.cameraHelper.handleFlyTo(m,{bearing:N,pitch:U,roll:W,padding:J,locationAtOffset:ce,offsetAsPoint:Y,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let _e=i.curve;const ve=Math.max(m.width,m.height),we=ve/ye.scaleOfZoom,Le=ye.pixelPathLength;typeof ye.scaleOfMinZoom=="number"&&(_e=Math.sqrt(ve/ye.scaleOfMinZoom/Le*2));const Se=_e*_e;function ke(st){const Nt=(we*we-ve*ve+(st?-1:1)*Se*Se*Le*Le)/(2*(st?we:ve)*Se*Le);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function Fe(st){return(Math.exp(st)-Math.exp(-st))/2}function Te(st){return(Math.exp(st)+Math.exp(-st))/2}const Ge=ke(!1);let ht=function(st){return Te(Ge)/Te(Ge+_e*st)},at=function(st){return ve*((Te(Ge)*(Fe(Nt=Ge+_e*st)/Te(Nt))-Fe(Ge))/Se)/Le;var Nt},ot=(ke(!0)-Ge)/_e;if(Math.abs(Le)<2e-6||!isFinite(ot)){if(Math.abs(ve-we)<1e-6)return this.easeTo(i,c);const st=we<ve?-1:1;ot=Math.abs(Math.log(we/ve))/_e,at=()=>0,ht=Nt=>Math.exp(st*_e*Nt)}return i.duration="duration"in i?+i.duration:1e3*ot/("screenSpeed"in i?+i.screenSpeed/_e:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=v!==N,this._pitching=U!==E,this._rolling=W!==k,this._padding=!m.isPaddingEqual(J),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ye.targetCenter),this._ease((st=>{const Nt=st*ot,Vt=1/ht(Nt),It=at(Nt);this._rotating&&m.setBearing(o.G.number(v,N,st)),this._pitching&&m.setPitch(o.G.number(E,U,st)),this._rolling&&m.setRoll(o.G.number(k,W,st)),this._padding&&(m.interpolatePadding(L,J,st),oe=m.centerPoint.add(Y)),ye.easeFunc(st,Vt,It,oe),this.terrain&&!i.freezeElevation&&this._updateElevation(st),this._applyUpdatedTransform(m),this._fireMoveEvents(c)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return i||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(i,c,m){m.animate===!1||m.duration===0?(i(1),c()):(this._easeStart=B(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=o.W(i,-180,180);const m=Math.abs(i-c);return Math.abs(i-360-c)<m&&(i-=360),Math.abs(i+360-c)<m&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(i),this.transform):null}}const io={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Cf{constructor(i=io){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=D.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=D.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const m=this._map._getUIString(`AttributionControl.${c}`);i.title=m,i.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.tileManagers;for(const v in c){const E=c[v];if(E.used||E.usedForTerrain){const k=E.getSource();k.attribution&&i.indexOf(k.attribution)<0&&i.push(k.attribution)}}i=i.filter((v=>String(v).trim())),i.sort(((v,E)=>v.length-E.length)),i=i.filter(((v,E)=>{for(let k=E+1;k<i.length;k++)if(i[k].indexOf(v)>=0)return!1;return!0}));const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=D.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ds{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=D.create("div","maplibregl-ctrl");const c=D.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){D.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Jl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Tf=o.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Kc extends o.E{constructor(i){super(),this._lastTilesetChange=B(),this.tileManager=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(i,c){this.tileManager.update(i,c),this._renderableTilesKeys=[];const m={};for(const v of ln(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),o.c7(v.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[v.key]=new At(v,this.tileSize),this._lastTilesetChange=B());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(i){for(const c in this._tiles){const m=this._tiles[c];(!i||m.tileID.equals(i)||m.tileID.isChildOf(i)||i.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,c){return c?this._getTerrainCoordsForTileRanges(i,c):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,E=i.clone(),k=o.bk();if(v.canonical.equals(i.canonical))o.c7(k,0,o.a5,o.a5,0,0,1);else if(v.canonical.isChildOf(i.canonical)){const L=v.canonical.z-i.canonical.z,N=v.canonical.x-(v.canonical.x>>L<<L),U=v.canonical.y-(v.canonical.y>>L<<L),W=o.a5>>L;o.c7(k,0,W,W,0,0,1),o.O(k,k,[-N*W,-U*W,0])}else{if(!i.canonical.isChildOf(v.canonical))continue;{const L=i.canonical.z-v.canonical.z,N=i.canonical.x-(i.canonical.x>>L<<L),U=i.canonical.y-(i.canonical.y>>L<<L),W=o.a5>>L;o.c7(k,0,o.a5,o.a5,0,0,1),o.O(k,k,[N*W,U*W,0]),o.Q(k,k,[1/2**L,1/2**L,0])}}E.terrainRttPosMatrix32f=new Float32Array(k),c[m]=E}return c}_getTerrainCoordsForTileRanges(i,c){const m={};for(const v of this._renderableTilesKeys){const E=this._tiles[v].tileID;if(!this._isWithinTileRanges(E,c))continue;const k=i.clone(),L=o.bk();if(E.canonical.z===i.canonical.z){const N=i.canonical.x-E.canonical.x+i.wrap*(1<<i.canonical.z),U=i.canonical.y-E.canonical.y;o.c7(L,0,o.a5,o.a5,0,0,1),o.O(L,L,[N*o.a5,U*o.a5,0])}else if(E.canonical.z>i.canonical.z){const N=E.canonical.z-i.canonical.z,U=E.canonical.x-(E.canonical.x>>N<<N)+i.wrap*(1<<E.canonical.z),W=E.canonical.y-(E.canonical.y>>N<<N),J=i.canonical.x-(E.canonical.x>>N),Y=i.canonical.y-(E.canonical.y>>N),oe=o.a5>>N;o.c7(L,0,oe,oe,0,0,1),o.O(L,L,[-U*oe+J*o.a5,-W*oe+Y*o.a5,0])}else{const N=i.canonical.z-E.canonical.z,U=i.canonical.x-(i.canonical.x>>N<<N)+i.wrap*(1<<i.canonical.z),W=i.canonical.y-(i.canonical.y>>N<<N),J=(i.canonical.x>>N)-E.canonical.x,Y=(i.canonical.y>>N)-E.canonical.y,oe=o.a5<<N;o.c7(L,0,oe,oe,0,0,1),o.O(L,L,[U*o.a5+J*oe,W*o.a5+Y*oe,0])}k.terrainRttPosMatrix32f=new Float32Array(L),m[v]=k}return m}getSourceTile(i,c){const m=this.tileManager._source;let v=i.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(v).key);let E=this.findTileInCaches(this._sourceTileCache[i.key]);if(!(E!=null&&E.dem)&&c)for(;v>=m.minzoom&&!(E!=null&&E.dem);)E=this.findTileInCaches(i.scaledTo(v--).key);return E}findTileInCaches(i){let c=this.tileManager.getTileByID(i);return c||(c=this.tileManager._outOfViewCache.getByKey(i),c)}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,c){const m=c[i.canonical.z];return!!m&&(i.wrap>m.minWrap||i.wrap<m.maxWrap||i.canonical.x>=m.minTileXWrapped&&i.canonical.x<=m.maxTileXWrapped&&i.canonical.y>=m.minTileY&&i.canonical.y<=m.maxTileY)}}class qn{constructor(i,c,m){this._meshCache={},this.painter=i,this.tileManager=new Kc(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,m,v=o.a5){var E;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const k=this.getTerrainData(i),L=(E=k.tile)===null||E===void 0?void 0:E.dem;if(!L)return 0;const N=o.cC([],[c/v*o.a5,m/v*o.a5],k.u_terrain_matrix),U=[N[0]*L.dim,N[1]*L.dim],W=Math.floor(U[0]),J=Math.floor(U[1]),Y=U[0]-W,oe=U[1]-J;return L.get(W,J)*(1-Y)*(1-oe)+L.get(W+1,J)*Y*(1-oe)+L.get(W,J+1)*(1-Y)*oe+L.get(W+1,J+1)*Y*oe}getElevationForLngLatZoom(i,c){if(!o.cD(c,i.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(m,v%o.a5,E%o.a5,o.a5)}getElevationForLngLat(i,c){const m=ln(c,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let v=0;for(const E of m)E.canonical.z>v&&(v=Math.min(E.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(i,v)}getElevation(i,c,m,v=o.a5){return this.getDEMElevation(i,c,m,v)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const v=this.painter.context,E=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(v,E,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ar([])}const c=this.tileManager.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new o.T(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c.toString()+c.tileID.key+i.key;if(m&&!this._demMatrixCache[m]){const v=this.tileManager.getSource().maxzoom;let E=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=v?E=i.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=i.canonical.x-(i.canonical.x>>E<<E),L=i.canonical.y-(i.canonical.y>>E<<E),N=o.cE(new Float64Array(16),[1/(o.a5<<E),1/(o.a5<<E),0]);o.O(N,N,[k*o.a5,L*o.a5,0]),this._demMatrixCache[i.key]={matrix:N,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,k=0;E<this._coordsTextureSize;E++)for(let L=0;L<this._coordsTextureSize;L++,k+=4)c[k+0]=255&L,c[k+1]=255&E,c[k+2]=L>>8<<4|E>>8,c[k+3]=0;const m=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new o.T(i,m,i.gl.RGBA,{premultiply:!1});return v.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),m=this.painter.context,v=m.gl,E=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(E,L-k-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),U=c[1]+((15&c[2])<<8),W=this.coordsIndex[255-c[3]],J=W&&this.tileManager.getTileByID(W);if(!J)return null;const Y=this._coordsTextureSize,oe=(1<<J.tileID.canonical.z)*Y;return new o.a9((J.tileID.canonical.x*Y+N)/oe+J.tileID.wrap,(J.tileID.canonical.y*Y+U)/oe,this.getElevation(J.tileID,N,U,Y))}depthAtPoint(i){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(i){var c;const m=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=m&&i.canonical.y===0,E=m&&i.canonical.y===(1<<i.canonical.z)-1,k=`m_${v?"n":""}_${E?"s":""}`;if(this._meshCache[k])return this._meshCache[k];const L=this.painter.context,N=new o.cF,U=new o.aY,W=this.meshSize,J=o.a5/W,Y=W*W;for(let Te=0;Te<=W;Te++)for(let Ge=0;Ge<=W;Ge++)N.emplaceBack(Ge*J,Te*J,0);for(let Te=0;Te<Y;Te+=W+1)for(let Ge=0;Ge<W;Ge++)U.emplaceBack(Ge+Te,W+Ge+Te+1,W+Ge+Te+2),U.emplaceBack(Ge+Te,W+Ge+Te+2,Ge+Te+1);const oe=N.length,ce=oe+(W+1),ye=(W+1)*W,_e=v?o.br:0,ve=v?0:1,we=E?o.bs:o.a5,Le=E?0:1;for(let Te=0;Te<=W;Te++)N.emplaceBack(Te*J,_e,ve);for(let Te=0;Te<=W;Te++)N.emplaceBack(Te*J,we,Le);for(let Te=0;Te<W;Te++)U.emplaceBack(ye+Te,ce+Te,ce+Te+1),U.emplaceBack(ye+Te,ce+Te+1,ye+Te+1),U.emplaceBack(0+Te,oe+Te+1,oe+Te),U.emplaceBack(0+Te,0+Te+1,oe+Te+1);const Se=N.length,ke=Se+2*(W+1);for(const Te of[0,1])for(let Ge=0;Ge<=W;Ge++)for(const ht of[0,1])N.emplaceBack(Te*o.a5,Ge*J,ht);for(let Te=0;Te<2*W;Te+=2)U.emplaceBack(Se+Te,Se+Te+1,Se+Te+3),U.emplaceBack(Se+Te,Se+Te+3,Se+Te+2),U.emplaceBack(ke+Te,ke+Te+3,ke+Te+1),U.emplaceBack(ke+Te,ke+Te+2,ke+Te+3);const Fe=new In(L.createVertexBuffer(N,Tf.members),L.createIndexBuffer(U),o.aX.simpleSegment(0,0,N.length,U.length));return this._meshCache[k]=Fe,Fe}getMeshFrameDelta(i){return 2*Math.PI*o.bE/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,c){var m;if(!o.cD(c,i.wrap()))return 0;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(i,c){const m=o.a9.fromLngLat(i.wrap()),v=(1<<c)*o.a5,E=m.x*v,k=m.y*v,L=Math.floor(E/o.a5),N=Math.floor(k/o.a5);return{tileID:new o.a2(c,0,c,L,N),mercatorX:E,mercatorY:k}}}class gi{constructor(i,c,m){this._context=i,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:i,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>i.id!==c)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const us={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ao{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new gi(i.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=i._order.filter((m=>!i._layers[m].isHidden(c))),this._coordsAscending={};for(const m in i.tileManagers){this._coordsAscending[m]={};const v=i.tileManagers[m].getVisibleCoordinates(),E=i.tileManagers[m].getSource(),k=E instanceof zt?E.terrainTileRanges:null;for(const L of v){const N=this.terrain.tileManager.getTerrainCoords(L,k);for(const U in N)this._coordsAscending[m][U]||(this._coordsAscending[m][U]=[]),this._coordsAscending[m][U].push(N[U])}}this._coordsAscendingStr={};for(const m of i._order){const v=i._layers[m],E=v.source;if(us[v.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(const k in this._coordsAscending[E])this._coordsAscendingStr[E][k]=this._coordsAscending[E][k].map((L=>L.key)).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsAscendingStr){const E=this._coordsAscendingStr[v][m.tileID.key];E&&E!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(i,c){if(i.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=i.type,E=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(us[v]&&(this._prevType&&us[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(us[this._prevType]||us[v]&&k){this._prevType=v;const L=this._stacks.length-1,N=this._stacks[L]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(Hl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[L]){const J=this.pool.getObjectForId(U.rtt[L].id);if(J.stamp===U.rtt[L].stamp){this.pool.useObject(J);continue}}const W=this.pool.getOrCreateFreeObject();this.pool.useObject(W),this.pool.stampObject(W),U.rtt[L]={id:W.id,stamp:W.stamp},E.context.bindFramebuffer.set(W.fbo.framebuffer),E.context.clear({color:o.bp.transparent,stencil:0}),E.currentStencilSource=void 0;for(let J=0;J<N.length;J++){const Y=E.style._layers[N[J]],oe=Y.source?this._coordsAscending[Y.source][U.tileID.key]:[U.tileID];E.context.viewport.set([0,0,W.fbo.width,W.fbo.height]),E._renderTileClippingMasks(Y,oe,!0),E.renderLayer(E,E.style.tileManagers[Y.source],Y,oe,m),Y.source&&(U.rttCoords[Y.source]=this._coordsAscendingStr[Y.source][U.tileID.key])}}return Hl(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),us[v]}return!1}}const eu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Yu=_,Rs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:io,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Jh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class js{constructor(i,c,m=!1){this.mousedown=E=>{this.startMove(E,D.mousePos(this.element,E)),D.addEventListener(window,"mousemove",this.mousemove),D.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,D.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHandler.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),D.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new Xp;this._rotatePitchHandler=new Kl({clickTolerance:3,move:(E,k)=>{const L=c.getBoundingClientRect(),N=new o.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:o.cx(new o.P(E.x,k.y),k,N),pitchDelta:m?-.5*(k.y-E.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=i,D.addEventListener(c,"mousedown",this.mousedown),D.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(c,"touchcancel",this.reset)}startMove(i,c){this._rotatePitchHandler.dragStart(i,c),D.disableDrag()}move(i,c){const m=this.map,{bearingDelta:v,pitchDelta:E}=this._rotatePitchHandler.dragMove(i,c)||{};v&&m.setBearing(m.getBearing()+v),E&&m.setPitch(m.getPitch()+E)}off(){const i=this.element;D.removeEventListener(i,"mousedown",this.mousedown),D.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend),D.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){D.enableDrag(),D.removeEventListener(window,"mousemove",this.mousemove),D.removeEventListener(window,"mouseup",this.mouseup),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend)}}let zs;function Xc(w,i,c,m=!1){if(m||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();const v=new o.V(w.lng,w.lat);if(w=new o.V(w.lng,w.lat),i){const E=new o.V(w.lng-360,w.lat),k=new o.V(w.lng+360,w.lat),L=c.locationToScreenPoint(w).distSqr(i);c.locationToScreenPoint(E).distSqr(i)<L?w=E:c.locationToScreenPoint(k).distSqr(i)<L&&(w=k)}for(;Math.abs(w.lng-c.center.lng)>180;){const E=c.locationToScreenPoint(w);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:v}const Gn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qu(w,i,c){const m=w.classList;for(const v in Gn)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${i}`)}class Ju extends o.E{constructor(i){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=Xc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,`${Gn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${v}`),z.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=o.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div");const c=D.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const E=D.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const k=D.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const L=D.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of N){const we=D.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ve.rx),we.setAttributeNS(null,"ry",ve.ry),L.appendChild(we)}const U=D.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const W=D.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(W);const J=D.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const Y=D.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(Y);const oe=D.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const ce=D.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=D.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const _e=D.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),ce.appendChild(ye),ce.appendChild(_e),k.appendChild(L),k.appendChild(U),k.appendChild(J),k.appendChild(oe),k.appendChild(ce),c.appendChild(k),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Qu(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=o.V.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,m;const v=(c=this._map)===null||c===void 0?void 0:c.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!v||E){const oe=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==oe&&(this._element.style.opacity=oe))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const k=this._map,L=k.terrain.depthAtPoint(this._pos),N=k.terrain.getElevationForLngLat(this._lngLat,k.transform);if(k.transform.lngLatToCameraDepth(this._lngLat,N)-L<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/k.transform.pixelsPerMeter,W=Math.sin(k.getPitch()*Math.PI/180)*U,J=k.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Y=k.transform.lngLatToCameraDepth(this._lngLat,N+W)-J>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=o.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return(this._opacity===void 0||i===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const ed={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ul=0,cl=!1;const hl={maxWidth:100,unit:"metric"};function Wn(w,i,c){const m=c&&c.maxWidth||100,v=w._container.clientHeight/2,E=w._container.clientWidth/2,k=w.unproject([E-m/2,v]),L=w.unproject([E+m/2,v]),N=Math.round(w.project(L).x-w.project(k).x),U=Math.min(m,N,w._container.clientWidth),W=k.distanceTo(L);if(c&&c.unit==="imperial"){const J=3.2808*W;J>5280?oi(i,U,J/5280,w._getUIString("ScaleControl.Miles")):oi(i,U,J,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?oi(i,U,W/1852,w._getUIString("ScaleControl.NauticalMiles")):W>=1e3?oi(i,U,W/1e3,w._getUIString("ScaleControl.Kilometers")):oi(i,U,W,w._getUIString("ScaleControl.Meters"))}function oi(w,i,c,m){const v=(function(E){const k=Math.pow(10,`${Math.floor(E)}`.length-1);let L=E/k;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:(function(N){const U=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*U)/U})(L),k*L})(c);w.style.width=i*(v/c)+"px",w.innerHTML=`${v}&nbsp;${m}`}const ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},ec=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tu(w){if(w){if(typeof w=="number"){const i=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(i,i),"top-right":new o.P(-i,i),bottom:new o.P(0,-w),"bottom-left":new o.P(i,-i),"bottom-right":new o.P(-i,-i),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const i=o.P.convert(w);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return tu(new o.P(0,0))}const tc=_;d.AJAXError=o.cI,d.Event=o.l,d.Evented=o.E,d.LngLat=o.V,d.MercatorCoordinate=o.a9,d.Point=o.P,d.addProtocol=o.cJ,d.config=o.c,d.removeProtocol=o.cK,d.AttributionControl=Cf,d.BoxZoomHandler=no,d.CanvasSource=ue,d.CooperativeGesturesHandler=ar,d.DoubleClickZoomHandler=Ql,d.DragPanHandler=Ef,d.DragRotateHandler=Eo,d.EdgeInsets=Cu,d.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){D.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=D.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);D.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Wt,d.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new o.V(i.coords.longitude,i.coords.latitude),m=i.coords.accuracy,v=this._map.getBearing(),E=o.e({bearing:v},this.options.fitBoundsOptions),k=Wr.fromLngLat(c,m);this._map.fitBounds(k,E,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new o.V(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&cl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=D.create("button","maplibregl-ctrl-geolocate",this._container),D.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ju({element:this._dotElement}),this._circleElement=D.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ju({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const m=(c==null?void 0:c[0])instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||m||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},ed,w)}onAdd(w){return this._map=w,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(i=!1){if(zs!==void 0&&!i)return zs;if(window.navigator.permissions===void 0)return zs=!!window.navigator.geolocation,zs;try{zs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{zs=!!window.navigator.geolocation}return zs}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ul=0,cl=!1}_isOutOfMapMaxBounds(w){const i=this._map.getMaxBounds(),c=w.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const i=this._map.project(w),c=this._map.unproject([i.x+100,i.y]),m=w.distanceTo(c)/100,v=2*this._accuracy/m;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ul--,cl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ul++,ul>1?(w={maximumAge:6e5,timeout:0},cl=!0):(w=this.options.positionOptions,cl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const i=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=D.create("button","maplibregl-ctrl-globe",this._container),D.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=_f,d.ImageSource=zt,d.KeyboardHandler=Mn,d.LngLatBounds=Wr,d.LogoControl=Ds,d.Map=class extends xi{constructor(w){var i,c;o.cG.mark(o.cH.create);const m=Object.assign(Object.assign(Object.assign({},Rs),w),{canvasContextAttributes:Object.assign(Object.assign({},Rs.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new Mu,E=new zl;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),m.transformConstrain!==null&&v.setConstrainOverride(m.transformConstrain),super(v,E,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Jl,this._controls=[],this._mapId=o.af(),this._lostContextStyle={style:null,images:null},this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[U]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${U}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new o.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},eu),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this._zoomLevelsToOverscale=m.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=m.transformCameraUpdate,this.transformConstrain=m.transformConstrain,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,m.reduceMotion!==void 0&&(z.prefersReducedMotion=m.reduceMotion),this._imageQueueHandle=re.addThrottleControl((()=>this.isMoving())),this._requestManager=new be(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let L=!1;const N=vf((U=>{this._trackResize&&!this._removed&&(this.resize(U),this.redraw())}),50);this._resizeObserver=new ResizeObserver((U=>{L?N(U):L=!0})),this._resizeObserver.observe(this._container)}this.handlers=new $o(this,m),this._hash=m.hash&&new _f(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.e({},m.fitBoundsOptions,{duration:0}))));const k=typeof m.style=="string"||((c=(i=m.style)===null||i===void 0?void 0:i.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,k),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Cf(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Ds,m.logoPosition),this.on("style.load",(()=>{if(k||this._resizeTransform(),this.transform.unmodified){const L=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}})),this.on("data",(L=>{this._update(L.dataType==="style"),this.fire(new o.l(`${L.dataType}data`,L))})),this.on("dataloading",(L=>{this.fire(new o.l(`${L.dataType}dataloading`,L))})),this.on("dataabort",(L=>{this.fire(new o.l("sourcedataabort",L))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,i){return this.style.setGlobalStateProperty(w,i),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,i){if(i===void 0&&(i=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(w);return i>-1&&this._controls.splice(i,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return ln(this.transform,w)}calculateCameraOptionsFromTo(w,i,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLat(c,this.transform)),super.calculateCameraOptionsFromTo(w,i,c,m)}resize(w,i=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(i);const c=!this._moving;return c&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),c&&this.fire(new o.l("moveend",w)),this}_resizeInternal(w=!0){const[i,c]=this._containerDimensions(),m=this._getClampedPixelRatio(i,c);if(this._resizeCanvas(i,c,m),this.painter.resize(i,c,m),this.painter.overLimit()){const v=this.painter.context.gl;this._maxCanvasSize=[v.drawingBufferWidth,v.drawingBufferHeight];const E=this._getClampedPixelRatio(i,c);this._resizeCanvas(i,c,E),this.painter.resize(i,c,E)}this._resizeTransform(w)}_resizeTransform(w=!0){var i;const[c,m]=this._containerDimensions();this.transform.resize(c,m,w),(i=this._requestedCameraState)===null||i===void 0||i.resize(c,m,w)}_getClampedPixelRatio(w,i){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),E=w*v,k=i*v;return Math.min(E>c?c/E:1,k>m?m/k:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Wr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const i=this._getTransformForUpdate();return i.setMinZoom(w),this._applyUpdatedTransform(i),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const i=this._getTransformForUpdate();return i.setMaxZoom(w),this._applyUpdatedTransform(i),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,i,c){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:i,listener:c,delegates:{mousemove:E=>{const k=i.filter((N=>this.getLayer(N))),L=k.length!==0?this.queryRenderedFeatures(E.point,{layers:k}):[];L.length?m||(m=!0,c.call(this,new mi(w,this,E.originalEvent,{features:L}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:i,listener:c,delegates:{mousemove:k=>{const L=i.filter((N=>this.getLayer(N)));(L.length!==0?this.queryRenderedFeatures(k.point,{layers:L}):[]).length?m=!0:m&&(m=!1,c.call(this,new mi(w,this,k.originalEvent)))},mouseout:k=>{m&&(m=!1,c.call(this,new mi(w,this,k.originalEvent)))}}}}{const m=v=>{const E=i.filter((L=>this.getLayer(L))),k=E.length!==0?this.queryRenderedFeatures(v.point,{layers:E}):[];k.length&&(v.features=k,c.call(this,v),delete v.features)};return{layers:i,listener:c,delegates:{[w]:m}}}}_saveDelegatedListener(w,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(i)}_removeDelegatedListener(w,i,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let v=0;v<m.length;v++){const E=m[v];if(E.listener===c&&E.layers.length===i.length&&E.layers.every((k=>i.includes(k)))){for(const k in E.delegates)this.off(k,E.delegates[k]);return void m.splice(v,1)}}}on(w,i,c){if(c===void 0)return super.on(w,i);const m=typeof i=="string"?[i]:i,v=this._createDelegatedListener(w,m,c);this._saveDelegatedListener(w,v);for(const E in v.delegates)this.on(E,v.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,c)}}}once(w,i,c){if(c===void 0)return super.once(w,i);const m=typeof i=="string"?[i]:i,v=this._createDelegatedListener(w,m,c);for(const E in v.delegates){const k=v.delegates[E];v.delegates[E]=(...L)=>{this._removeDelegatedListener(w,m,c),k(...L)}}this._saveDelegatedListener(w,v);for(const E in v.delegates)this.once(E,v.delegates[E]);return this}off(w,i,c){return c===void 0?super.off(w,i):(this._removeDelegatedListener(w,typeof i=="string"?[i]:i,c),this)}queryRenderedFeatures(w,i){if(!this.style)return[];let c;const m=w instanceof o.P||Array.isArray(w),v=m?w:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(m?{}:w)||{},v instanceof o.P||typeof v[0]=="number")c=[o.P.convert(v)];else{const E=o.P.convert(v[0]),k=o.P.convert(v[1]);c=[E,new o.P(k.x,E.y),k,new o.P(E.x,k.y),E]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(w,i){return this.style.querySourceFeatures(w,i)}setStyle(w,i){return(i=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(w,i))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const i=this._locale[w];if(i==null)throw new Error(`Missing UI string '${w}'`);return i}_updateStyle(w,i){var c,m;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,i)));const v=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Lu(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,i,v):this.style.loadJSON(w,i,v),this):((m=(c=this.style)===null||c===void 0?void 0:c.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,i){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");o.j(c,new AbortController).then((m=>{this._updateDiff(m.data,i)})).catch((m=>{m&&this.fire(new o.k(m))}))}else typeof w=="object"&&this._updateDiff(w,i)}_updateDiff(w,i){try{this.style.setState(w,i)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,i)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,i){return this._lazyInitEmptyStyle(),this.style.addSource(w,i),this._update(!0)}isSourceLoaded(w){const i=this.style&&this.style.tileManagers[w];if(i!==void 0)return i.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const i=this.style.tileManagers[w.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),m.type==="color-relief"&&m.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new qn(this.painter,i,w),this.painter.renderToTexture=new ao(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var m;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=c.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,i;return(i=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const i of Object.values(w))if(!i.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,i,c){if(c){const m=this.getSource(c);if(!m)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);m.calculateTileZoom=Zr(Math.max(1,w),Math.max(1,i))}else for(const m in this.style.tileManagers)this.style.tileManagers[m].getSource().calculateTileZoom=Zr(Math.max(1,w),Math.max(1,i));return this._update(!0),this}refreshTiles(w,i){const c=this.style.tileManagers[w];if(!c)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);i===void 0?c.reload(!0):c.refreshTiles(i.map((m=>new o.ac(m.z,m.x,m.y))))}addImage(w,i,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:E,stretchY:k,content:L,textFitWidth:N,textFitHeight:U}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||o.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:W,height:J,data:Y}=i,oe=i;return this.style.addImage(w,{data:new o.R({width:W,height:J},new Uint8Array(Y)),pixelRatio:m,stretchX:E,stretchY:k,content:L,textFitWidth:N,textFitHeight:U,sdf:v,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,w),this}}{const{width:W,height:J,data:Y}=z.getImageData(i);this.style.addImage(w,{data:new o.R({width:W,height:J},Y),pixelRatio:m,stretchX:E,stretchY:k,content:L,textFitWidth:N,textFitHeight:U,sdf:v,version:0})}}updateImage(w,i){const c=this.style.getImage(w);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||o.b(i)?z.getImageData(i):i,{width:v,height:E,data:k}=m;if(v===void 0||E===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||E!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(i instanceof HTMLImageElement||o.b(i));return c.data.replace(k,L),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return re.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,i){return this._lazyInitEmptyStyle(),this.style.addLayer(w,i),this._update(!0)}moveLayer(w,i){return this.style.moveLayer(w,i),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,i,c){return this.style.setLayerZoomRange(w,i,c),this._update(!0)}setFilter(w,i,c={}){return this.style.setFilter(w,i,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,i,c,m={}){return this.style.setPaintProperty(w,i,c,m),this._update(!0)}getPaintProperty(w,i){return this.style.getPaintProperty(w,i)}setLayoutProperty(w,i,c,m={}){return this.style.setLayoutProperty(w,i,c,m),this._update(!0)}getLayoutProperty(w,i){return this.style.getLayoutProperty(w,i)}setGlyphs(w,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,i,c,(m=>{m||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,i,(c=>{c||this._update(!0)})),this}setLight(w,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,i){return this.style.setFeatureState(w,i),this._update()}removeFeatureState(w,i){return this.style.removeFeatureState(w,i),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,i=0;return this._container&&(w=this._container.clientWidth||400,i=this._container.clientHeight||300),[w,i]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const i=this._canvasContainer=D.create("div","maplibregl-canvas-container",w);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=D.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=D.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((k=>{E[k]=D.create("div",`maplibregl-ctrl-${k} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,i,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",(m=>{i={requestedAttributes:w},m&&(i.statusMessage=m.statusMessage,i.type=m.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const m="Failed to initialize WebGL";throw i?(i.message=m,new Error(JSON.stringify(i))):new Error(m)}this.painter=new Wh(c,this.transform),H.testSupport(c)}migrateProjection(w,i){super.migrateProjection(w,i),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var i,c,m,v,E;const k=this._idleTriggered?this._fadeDuration:0,L=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const J=this.transform.zoom,Y=B();this.style.zoomHistory.update(J,Y);const oe=new o.H(J,{now:Y,fadeDuration:k,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ce=oe.crossFadingFactor();ce===1&&ce===this._crossFadingFactor||(N=!0,this._crossFadingFactor=ce),this.style.update(oe)}const U=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==L;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,k,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cG.mark(o.cH.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const W=this._sourcesDirty||this._styleDirty||this._placementDirty;return W||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||W||(this._fullyLoaded=!0,o.cG.mark(o.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),re.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),D.remove(this._canvasContainer),D.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cG.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,(w=>{o.cG.frame(w),this._frameRequest=null;try{this._render(w)}catch(i){if(!o.Z(i)&&!(function(c){return c.message===$l})(i))throw i}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Yu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},d.MapMouseEvent=mi,d.MapTouchEvent=Zl,d.MapWheelEvent=Hh,d.Marker=Ju,d.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),m=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);i.title=m,i.setAttribute("aria-label",m)},this.options=o.e({},Jh,w),this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),D.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),D.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=D.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new js(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,i){const c=D.create("button",w,this._container);return c.type="button",c.addEventListener("click",i),c}},d.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=D.create("div","maplibregl-popup",this._map.getContainer()),this._tip=D.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Xc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const c=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=tu(this.options.offset);if(!m){const k=this._container.offsetWidth,L=this._container.offsetHeight,N=(function(W){var J,Y,oe,ce;return W?{top:(J=W.top)!==null&&J!==void 0?J:0,right:(Y=W.right)!==null&&Y!==void 0?Y:0,bottom:(oe=W.bottom)!==null&&oe!==void 0?oe:0,left:(ce=W.left)!==null&&ce!==void 0?ce:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let U;U=c.y+v.bottom.y<L+N.top?["top"]:c.y>this._map.transform.height-L-N.bottom?["bottom"]:[],c.x<k/2+N.left?U.push("left"):c.x>this._map.transform.width-k/2-N.right&&U.push("right"),m=U.length===0?"bottom":U.join("-")}let E=c.add(v[m]);this.options.subpixelPositioning||(E=E.round()),D.setTransform(this._container,`${Gn[m]} translate(${E.x}px,${E.y}px)`),Qu(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ji),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const i=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=w;m=c.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=D.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(ec);w&&w.focus()}},d.RasterDEMTileSource=rt,d.RasterTileSource=Be,d.ScaleControl=class{constructor(w){this._onMove=()=>{Wn(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Wn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},hl),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Ku,d.Style=Lu,d.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=D.create("button","maplibregl-ctrl-terrain",this._container),D.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Yh,d.TwoFingersTouchRotateHandler=Jp,d.TwoFingersTouchZoomHandler=Yl,d.TwoFingersTouchZoomRotateHandler=Ls,d.VectorTileSource=Ii,d.VideoSource=ze,d.addSourceType=(w,i)=>o._(void 0,void 0,void 0,(function*(){if(pe(w))throw new Error(`A source type called "${w}" already exists.`);((c,m)=>{le[c]=m})(w,i)})),d.clearPrewarmedResources=function(){const w=Ft;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Dt),Ft=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=Lc,d.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Ze().getRTLTextPluginStatus()},d.getVersion=function(){return tc},d.getWorkerCount=function(){return Ke.workerCount},d.getWorkerUrl=function(){return o.c.WORKER_URL},d.importScriptInWorkers=function(w){return ir().broadcast("IS",w)},d.isTimeFrozen=function(){return F.isFrozen()},d.now=B,d.prewarm=function(){ct().acquire(Dt)},d.restoreNow=function(){F.restoreNow()},d.setMaxParallelImageRequests=function(w){o.c.MAX_PARALLEL_IMAGE_REQUESTS=w},d.setNow=function(w){F.setNow(w)},d.setRTLTextPlugin=function(w,i){return Ze().setRTLTextPlugin(w,i)},d.setWorkerCount=function(w){Ke.workerCount=w},d.setWorkerUrl=function(w){o.c.WORKER_URL=w}}));var h=r;return h}))})(zx)),zx.exports}var DH=LH();const mN=Sh(DH);function gN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(r=gN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ti(){for(var e,t,r=0,n="",u=arguments.length;r<u;r++)(e=arguments[r])&&(t=gN(e))&&(n&&(n+=" "),n+=t);return n}const RH=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},jH=(e,t)=>({classGroupId:e,validator:t}),yN=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),lb="-",gI=[],zH="arbitrary..",NH=e=>{const t=BH(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return FH(d);const o=d.split(lb),_=o[0]===""&&o.length>1?1:0;return vN(o,_,t)},getConflictingClassGroupIds:(d,o)=>{if(o){const _=n[d],P=r[d];return _?P?RH(P,_):_:P||gI}return r[d]||gI}}},vN=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const u=e[t],h=r.nextPart.get(u);if(h){const P=vN(e,t+1,h);if(P)return P}const d=r.validators;if(d===null)return;const o=t===0?e.join(lb):e.slice(t).join(lb),_=d.length;for(let P=0;P<_;P++){const S=d[P];if(S.validator(o))return S.classGroupId}},FH=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?zH+n:void 0})(),BH=e=>{const{theme:t,classGroups:r}=e;return VH(r,t)},VH=(e,t)=>{const r=yN();for(const n in e){const u=e[n];EC(u,r,n,t)}return r},EC=(e,t,r,n)=>{const u=e.length;for(let h=0;h<u;h++){const d=e[h];$H(d,t,r,n)}},$H=(e,t,r,n)=>{if(typeof e=="string"){UH(e,t,r);return}if(typeof e=="function"){qH(e,t,r,n);return}GH(e,t,r,n)},UH=(e,t,r)=>{const n=e===""?t:_N(t,e);n.classGroupId=r},qH=(e,t,r,n)=>{if(WH(e)){EC(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(jH(r,e))},GH=(e,t,r,n)=>{const u=Object.entries(e),h=u.length;for(let d=0;d<h;d++){const[o,_]=u[d];EC(_,_N(t,o),r,n)}},_N=(e,t)=>{let r=e;const n=t.split(lb),u=n.length;for(let h=0;h<u;h++){const d=n[h];let o=r.nextPart.get(d);o||(o=yN(),r.nextPart.set(d,o)),r=o}return r},WH=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,HH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const u=(h,d)=>{r[h]=d,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(h){let d=r[h];if(d!==void 0)return d;if((d=n[h])!==void 0)return u(h,d),d},set(h,d){h in r?r[h]=d:u(h,d)}}},H2="!",yI=":",ZH=[],vI=(e,t,r,n,u)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:u}),KH=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=u=>{const h=[];let d=0,o=0,_=0,P;const S=u.length;for(let B=0;B<S;B++){const D=u[B];if(d===0&&o===0){if(D===yI){h.push(u.slice(_,B)),_=B+1;continue}if(D==="/"){P=B;continue}}D==="["?d++:D==="]"?d--:D==="("?o++:D===")"&&o--}const M=h.length===0?u:u.slice(_);let O=M,z=!1;M.endsWith(H2)?(O=M.slice(0,-1),z=!0):M.startsWith(H2)&&(O=M.slice(1),z=!0);const F=P&&P>_?P-_:void 0;return vI(h,z,O,F)};if(t){const u=t+yI,h=n;n=d=>d.startsWith(u)?h(d.slice(u.length)):vI(ZH,!1,d,void 0,!0)}if(r){const u=n;n=h=>r({className:h,parseClassName:u})}return n},XH=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let u=[];for(let h=0;h<r.length;h++){const d=r[h],o=d[0]==="[",_=t.has(d);o||_?(u.length>0&&(u.sort(),n.push(...u),u=[]),n.push(d)):u.push(d)}return u.length>0&&(u.sort(),n.push(...u)),n}},YH=e=>({cache:HH(e.cacheSize),parseClassName:KH(e),sortModifiers:XH(e),...NH(e)}),QH=/\s+/,JH=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:u,sortModifiers:h}=t,d=[],o=e.trim().split(QH);let _="";for(let P=o.length-1;P>=0;P-=1){const S=o[P],{isExternal:M,modifiers:O,hasImportantModifier:z,baseClassName:F,maybePostfixModifierPosition:B}=r(S);if(M){_=S+(_.length>0?" "+_:_);continue}let D=!!B,H=n(D?F.substring(0,B):F);if(!H){if(!D){_=S+(_.length>0?" "+_:_);continue}if(H=n(F),!H){_=S+(_.length>0?" "+_:_);continue}D=!1}const Q=O.length===0?"":O.length===1?O[0]:h(O).join(":"),te=z?Q+H2:Q,ie=te+H;if(d.indexOf(ie)>-1)continue;d.push(ie);const ae=u(H,D);for(let he=0;he<ae.length;++he){const re=ae[he];d.push(te+re)}_=S+(_.length>0?" "+_:_)}return _},eZ=(...e)=>{let t=0,r,n,u="";for(;t<e.length;)(r=e[t++])&&(n=xN(r))&&(u&&(u+=" "),u+=n);return u},xN=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=xN(e[n]))&&(r&&(r+=" "),r+=t);return r},tZ=(e,...t)=>{let r,n,u,h;const d=_=>{const P=t.reduce((S,M)=>M(S),e());return r=YH(P),n=r.cache.get,u=r.cache.set,h=o,o(_)},o=_=>{const P=n(_);if(P)return P;const S=JH(_,r);return u(_,S),S};return h=d,(..._)=>h(eZ(..._))},rZ=[],qa=e=>{const t=r=>r[e]||rZ;return t.isThemeGetter=!0,t},bN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nZ=/^\d+\/\d+$/,iZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,sZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zg=e=>nZ.test(e),hn=e=>!!e&&!Number.isNaN(Number(e)),Zf=e=>!!e&&Number.isInteger(Number(e)),ES=e=>e.endsWith("%")&&hn(e.slice(0,-1)),fd=e=>iZ.test(e),uZ=()=>!0,cZ=e=>aZ.test(e)&&!oZ.test(e),SN=()=>!1,hZ=e=>sZ.test(e),dZ=e=>lZ.test(e),fZ=e=>!Er(e)&&!Cr(e),pZ=e=>By(e,CN,SN),Er=e=>bN.test(e),bm=e=>By(e,TN,cZ),CS=e=>By(e,_Z,hn),_I=e=>By(e,PN,SN),mZ=e=>By(e,EN,dZ),ux=e=>By(e,MN,hZ),Cr=e=>wN.test(e),zv=e=>Vy(e,TN),gZ=e=>Vy(e,xZ),xI=e=>Vy(e,PN),yZ=e=>Vy(e,CN),vZ=e=>Vy(e,EN),cx=e=>Vy(e,MN,!0),By=(e,t,r)=>{const n=bN.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Vy=(e,t,r=!1)=>{const n=wN.exec(e);return n?n[1]?t(n[1]):r:!1},PN=e=>e==="position"||e==="percentage",EN=e=>e==="image"||e==="url",CN=e=>e==="length"||e==="size"||e==="bg-size",TN=e=>e==="length",_Z=e=>e==="number",xZ=e=>e==="family-name",MN=e=>e==="shadow",bZ=()=>{const e=qa("color"),t=qa("font"),r=qa("text"),n=qa("font-weight"),u=qa("tracking"),h=qa("leading"),d=qa("breakpoint"),o=qa("container"),_=qa("spacing"),P=qa("radius"),S=qa("shadow"),M=qa("inset-shadow"),O=qa("text-shadow"),z=qa("drop-shadow"),F=qa("blur"),B=qa("perspective"),D=qa("aspect"),H=qa("ease"),Q=qa("animate"),te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ae=()=>[...ie(),Cr,Er],he=()=>["auto","hidden","clip","visible","scroll"],re=()=>["auto","contain","none"],be=()=>[Cr,Er,_],xe=()=>[Zg,"full","auto",...be()],$e=()=>[Zf,"none","subgrid",Cr,Er],Ee=()=>["auto",{span:["full",Zf,Cr,Er]},Zf,Cr,Er],Ne=()=>[Zf,"auto",Cr,Er],Xe=()=>["auto","min","max","fr",Cr,Er],ut=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],pt=()=>["start","end","center","stretch","center-safe","end-safe"],gt=()=>["auto",...be()],wt=()=>[Zg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...be()],je=()=>[e,Cr,Er],Qe=()=>[...ie(),xI,_I,{position:[Cr,Er]}],yt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Oe=()=>["auto","cover","contain",yZ,pZ,{size:[Cr,Er]}],et=()=>[ES,zv,bm],Mt=()=>["","none","full",P,Cr,Er],Dt=()=>["",hn,zv,bm],Ke=()=>["solid","dashed","dotted","double"],tr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ft=()=>[hn,ES,xI,_I],$t=()=>["","none",F,Cr,Er],ct=()=>["none",hn,Cr,Er],Lt=()=>["none",hn,Cr,Er],ir=()=>[hn,Cr,Er],St=()=>[Zg,"full",...be()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fd],breakpoint:[fd],color:[uZ],container:[fd],"drop-shadow":[fd],ease:["in","out","in-out"],font:[fZ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fd],shadow:[fd],spacing:["px",hn],text:[fd],"text-shadow":[fd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zg,Er,Cr,D]}],container:["container"],columns:[{columns:[hn,Er,Cr,o]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ae()}],overflow:[{overflow:he()}],"overflow-x":[{"overflow-x":he()}],"overflow-y":[{"overflow-y":he()}],overscroll:[{overscroll:re()}],"overscroll-x":[{"overscroll-x":re()}],"overscroll-y":[{"overscroll-y":re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:xe()}],"inset-x":[{"inset-x":xe()}],"inset-y":[{"inset-y":xe()}],start:[{start:xe()}],end:[{end:xe()}],top:[{top:xe()}],right:[{right:xe()}],bottom:[{bottom:xe()}],left:[{left:xe()}],visibility:["visible","invisible","collapse"],z:[{z:[Zf,"auto",Cr,Er]}],basis:[{basis:[Zg,"full","auto",o,...be()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[hn,Zg,"auto","initial","none",Er]}],grow:[{grow:["",hn,Cr,Er]}],shrink:[{shrink:["",hn,Cr,Er]}],order:[{order:[Zf,"first","last","none",Cr,Er]}],"grid-cols":[{"grid-cols":$e()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":Ne()}],"col-end":[{"col-end":Ne()}],"grid-rows":[{"grid-rows":$e()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":Ne()}],"row-end":[{"row-end":Ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Xe()}],"auto-rows":[{"auto-rows":Xe()}],gap:[{gap:be()}],"gap-x":[{"gap-x":be()}],"gap-y":[{"gap-y":be()}],"justify-content":[{justify:[...ut(),"normal"]}],"justify-items":[{"justify-items":[...pt(),"normal"]}],"justify-self":[{"justify-self":["auto",...pt()]}],"align-content":[{content:["normal",...ut()]}],"align-items":[{items:[...pt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...pt(),{baseline:["","last"]}]}],"place-content":[{"place-content":ut()}],"place-items":[{"place-items":[...pt(),"baseline"]}],"place-self":[{"place-self":["auto",...pt()]}],p:[{p:be()}],px:[{px:be()}],py:[{py:be()}],ps:[{ps:be()}],pe:[{pe:be()}],pt:[{pt:be()}],pr:[{pr:be()}],pb:[{pb:be()}],pl:[{pl:be()}],m:[{m:gt()}],mx:[{mx:gt()}],my:[{my:gt()}],ms:[{ms:gt()}],me:[{me:gt()}],mt:[{mt:gt()}],mr:[{mr:gt()}],mb:[{mb:gt()}],ml:[{ml:gt()}],"space-x":[{"space-x":be()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":be()}],"space-y-reverse":["space-y-reverse"],size:[{size:wt()}],w:[{w:[o,"screen",...wt()]}],"min-w":[{"min-w":[o,"screen","none",...wt()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[d]},...wt()]}],h:[{h:["screen","lh",...wt()]}],"min-h":[{"min-h":["screen","lh","none",...wt()]}],"max-h":[{"max-h":["screen","lh",...wt()]}],"font-size":[{text:["base",r,zv,bm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Cr,CS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ES,Er]}],"font-family":[{font:[gZ,Er,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,Cr,Er]}],"line-clamp":[{"line-clamp":[hn,"none",Cr,CS]}],leading:[{leading:[h,...be()]}],"list-image":[{"list-image":["none",Cr,Er]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Cr,Er]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:je()}],"text-color":[{text:je()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[hn,"from-font","auto",Cr,bm]}],"text-decoration-color":[{decoration:je()}],"underline-offset":[{"underline-offset":[hn,"auto",Cr,Er]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:be()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Cr,Er]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Cr,Er]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Qe()}],"bg-repeat":[{bg:yt()}],"bg-size":[{bg:Oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zf,Cr,Er],radial:["",Cr,Er],conic:[Zf,Cr,Er]},vZ,mZ]}],"bg-color":[{bg:je()}],"gradient-from-pos":[{from:et()}],"gradient-via-pos":[{via:et()}],"gradient-to-pos":[{to:et()}],"gradient-from":[{from:je()}],"gradient-via":[{via:je()}],"gradient-to":[{to:je()}],rounded:[{rounded:Mt()}],"rounded-s":[{"rounded-s":Mt()}],"rounded-e":[{"rounded-e":Mt()}],"rounded-t":[{"rounded-t":Mt()}],"rounded-r":[{"rounded-r":Mt()}],"rounded-b":[{"rounded-b":Mt()}],"rounded-l":[{"rounded-l":Mt()}],"rounded-ss":[{"rounded-ss":Mt()}],"rounded-se":[{"rounded-se":Mt()}],"rounded-ee":[{"rounded-ee":Mt()}],"rounded-es":[{"rounded-es":Mt()}],"rounded-tl":[{"rounded-tl":Mt()}],"rounded-tr":[{"rounded-tr":Mt()}],"rounded-br":[{"rounded-br":Mt()}],"rounded-bl":[{"rounded-bl":Mt()}],"border-w":[{border:Dt()}],"border-w-x":[{"border-x":Dt()}],"border-w-y":[{"border-y":Dt()}],"border-w-s":[{"border-s":Dt()}],"border-w-e":[{"border-e":Dt()}],"border-w-t":[{"border-t":Dt()}],"border-w-r":[{"border-r":Dt()}],"border-w-b":[{"border-b":Dt()}],"border-w-l":[{"border-l":Dt()}],"divide-x":[{"divide-x":Dt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Dt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ke(),"hidden","none"]}],"divide-style":[{divide:[...Ke(),"hidden","none"]}],"border-color":[{border:je()}],"border-color-x":[{"border-x":je()}],"border-color-y":[{"border-y":je()}],"border-color-s":[{"border-s":je()}],"border-color-e":[{"border-e":je()}],"border-color-t":[{"border-t":je()}],"border-color-r":[{"border-r":je()}],"border-color-b":[{"border-b":je()}],"border-color-l":[{"border-l":je()}],"divide-color":[{divide:je()}],"outline-style":[{outline:[...Ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[hn,Cr,Er]}],"outline-w":[{outline:["",hn,zv,bm]}],"outline-color":[{outline:je()}],shadow:[{shadow:["","none",S,cx,ux]}],"shadow-color":[{shadow:je()}],"inset-shadow":[{"inset-shadow":["none",M,cx,ux]}],"inset-shadow-color":[{"inset-shadow":je()}],"ring-w":[{ring:Dt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:je()}],"ring-offset-w":[{"ring-offset":[hn,bm]}],"ring-offset-color":[{"ring-offset":je()}],"inset-ring-w":[{"inset-ring":Dt()}],"inset-ring-color":[{"inset-ring":je()}],"text-shadow":[{"text-shadow":["none",O,cx,ux]}],"text-shadow-color":[{"text-shadow":je()}],opacity:[{opacity:[hn,Cr,Er]}],"mix-blend":[{"mix-blend":[...tr(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":tr()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[hn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ft()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ft()}],"mask-image-linear-from-color":[{"mask-linear-from":je()}],"mask-image-linear-to-color":[{"mask-linear-to":je()}],"mask-image-t-from-pos":[{"mask-t-from":Ft()}],"mask-image-t-to-pos":[{"mask-t-to":Ft()}],"mask-image-t-from-color":[{"mask-t-from":je()}],"mask-image-t-to-color":[{"mask-t-to":je()}],"mask-image-r-from-pos":[{"mask-r-from":Ft()}],"mask-image-r-to-pos":[{"mask-r-to":Ft()}],"mask-image-r-from-color":[{"mask-r-from":je()}],"mask-image-r-to-color":[{"mask-r-to":je()}],"mask-image-b-from-pos":[{"mask-b-from":Ft()}],"mask-image-b-to-pos":[{"mask-b-to":Ft()}],"mask-image-b-from-color":[{"mask-b-from":je()}],"mask-image-b-to-color":[{"mask-b-to":je()}],"mask-image-l-from-pos":[{"mask-l-from":Ft()}],"mask-image-l-to-pos":[{"mask-l-to":Ft()}],"mask-image-l-from-color":[{"mask-l-from":je()}],"mask-image-l-to-color":[{"mask-l-to":je()}],"mask-image-x-from-pos":[{"mask-x-from":Ft()}],"mask-image-x-to-pos":[{"mask-x-to":Ft()}],"mask-image-x-from-color":[{"mask-x-from":je()}],"mask-image-x-to-color":[{"mask-x-to":je()}],"mask-image-y-from-pos":[{"mask-y-from":Ft()}],"mask-image-y-to-pos":[{"mask-y-to":Ft()}],"mask-image-y-from-color":[{"mask-y-from":je()}],"mask-image-y-to-color":[{"mask-y-to":je()}],"mask-image-radial":[{"mask-radial":[Cr,Er]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ft()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ft()}],"mask-image-radial-from-color":[{"mask-radial-from":je()}],"mask-image-radial-to-color":[{"mask-radial-to":je()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ie()}],"mask-image-conic-pos":[{"mask-conic":[hn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ft()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ft()}],"mask-image-conic-from-color":[{"mask-conic-from":je()}],"mask-image-conic-to-color":[{"mask-conic-to":je()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Qe()}],"mask-repeat":[{mask:yt()}],"mask-size":[{mask:Oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Cr,Er]}],filter:[{filter:["","none",Cr,Er]}],blur:[{blur:$t()}],brightness:[{brightness:[hn,Cr,Er]}],contrast:[{contrast:[hn,Cr,Er]}],"drop-shadow":[{"drop-shadow":["","none",z,cx,ux]}],"drop-shadow-color":[{"drop-shadow":je()}],grayscale:[{grayscale:["",hn,Cr,Er]}],"hue-rotate":[{"hue-rotate":[hn,Cr,Er]}],invert:[{invert:["",hn,Cr,Er]}],saturate:[{saturate:[hn,Cr,Er]}],sepia:[{sepia:["",hn,Cr,Er]}],"backdrop-filter":[{"backdrop-filter":["","none",Cr,Er]}],"backdrop-blur":[{"backdrop-blur":$t()}],"backdrop-brightness":[{"backdrop-brightness":[hn,Cr,Er]}],"backdrop-contrast":[{"backdrop-contrast":[hn,Cr,Er]}],"backdrop-grayscale":[{"backdrop-grayscale":["",hn,Cr,Er]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[hn,Cr,Er]}],"backdrop-invert":[{"backdrop-invert":["",hn,Cr,Er]}],"backdrop-opacity":[{"backdrop-opacity":[hn,Cr,Er]}],"backdrop-saturate":[{"backdrop-saturate":[hn,Cr,Er]}],"backdrop-sepia":[{"backdrop-sepia":["",hn,Cr,Er]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":be()}],"border-spacing-x":[{"border-spacing-x":be()}],"border-spacing-y":[{"border-spacing-y":be()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Cr,Er]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[hn,"initial",Cr,Er]}],ease:[{ease:["linear","initial",H,Cr,Er]}],delay:[{delay:[hn,Cr,Er]}],animate:[{animate:["none",Q,Cr,Er]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,Cr,Er]}],"perspective-origin":[{"perspective-origin":ae()}],rotate:[{rotate:ct()}],"rotate-x":[{"rotate-x":ct()}],"rotate-y":[{"rotate-y":ct()}],"rotate-z":[{"rotate-z":ct()}],scale:[{scale:Lt()}],"scale-x":[{"scale-x":Lt()}],"scale-y":[{"scale-y":Lt()}],"scale-z":[{"scale-z":Lt()}],"scale-3d":["scale-3d"],skew:[{skew:ir()}],"skew-x":[{"skew-x":ir()}],"skew-y":[{"skew-y":ir()}],transform:[{transform:[Cr,Er,"","none","gpu","cpu"]}],"transform-origin":[{origin:ae()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:St()}],"translate-x":[{"translate-x":St()}],"translate-y":[{"translate-y":St()}],"translate-z":[{"translate-z":St()}],"translate-none":["translate-none"],accent:[{accent:je()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:je()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Cr,Er]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":be()}],"scroll-mx":[{"scroll-mx":be()}],"scroll-my":[{"scroll-my":be()}],"scroll-ms":[{"scroll-ms":be()}],"scroll-me":[{"scroll-me":be()}],"scroll-mt":[{"scroll-mt":be()}],"scroll-mr":[{"scroll-mr":be()}],"scroll-mb":[{"scroll-mb":be()}],"scroll-ml":[{"scroll-ml":be()}],"scroll-p":[{"scroll-p":be()}],"scroll-px":[{"scroll-px":be()}],"scroll-py":[{"scroll-py":be()}],"scroll-ps":[{"scroll-ps":be()}],"scroll-pe":[{"scroll-pe":be()}],"scroll-pt":[{"scroll-pt":be()}],"scroll-pr":[{"scroll-pr":be()}],"scroll-pb":[{"scroll-pb":be()}],"scroll-pl":[{"scroll-pl":be()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Cr,Er]}],fill:[{fill:["none",...je()]}],"stroke-w":[{stroke:[hn,zv,bm,CS]}],stroke:[{stroke:["none",...je()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wZ=tZ(bZ);function Ed(...e){return wZ(ti(e))}function TS(){return typeof document>"u"?null:document.documentElement.classList.contains("dark")?"dark":document.documentElement.classList.contains("light")?"light":null}function SZ(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function PZ(e){const[t,r]=A.useState(()=>TS()??SZ());return A.useEffect(()=>{if(e)return;const n=new MutationObserver(()=>{const d=TS();d&&r(d)});n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const u=window.matchMedia("(prefers-color-scheme: dark)"),h=d=>{TS()||r(d.matches?"dark":"light")};return u.addEventListener("change",h),()=>{n.disconnect(),u.removeEventListener("change",h)}},[e]),e??t}const kN=A.createContext(null);function kw(){const e=A.useContext(kN);if(!e)throw new Error("useMap must be used within a Map component");return e}const bI={dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",light:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json"},EZ=()=>$.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:$.jsxs("div",{className:"flex gap-1",children:[$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse"}),$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse [animation-delay:150ms]"}),$.jsx("span",{className:"size-1.5 rounded-full bg-muted-foreground/60 animate-pulse [animation-delay:300ms]"})]})}),CZ=A.forwardRef(function({children:t,theme:r,styles:n,projection:u,...h},d){const o=A.useRef(null),[_,P]=A.useState(null),[S,M]=A.useState(!1),[O,z]=A.useState(!1),F=A.useRef(null),B=A.useRef(null),D=PZ(r),H=A.useMemo(()=>({dark:(n==null?void 0:n.dark)??bI.dark,light:(n==null?void 0:n.light)??bI.light}),[n]);A.useImperativeHandle(d,()=>_,[_]);const Q=A.useCallback(()=>{B.current&&(clearTimeout(B.current),B.current=null)},[]);A.useEffect(()=>{if(!o.current)return;const ie=D==="dark"?H.dark:H.light;F.current=ie;const ae=new mN.Map({container:o.current,style:ie,renderWorldCopies:!1,attributionControl:{compact:!0},...h}),he=()=>{Q(),B.current=setTimeout(()=>{z(!0),u&&ae.setProjection(u)},100)},re=()=>M(!0);return ae.on("load",re),ae.on("styledata",he),P(ae),()=>{Q(),ae.off("load",re),ae.off("styledata",he),ae.remove(),M(!1),z(!1),P(null)}},[]),A.useEffect(()=>{if(!_||!D)return;const ie=D==="dark"?H.dark:H.light;F.current!==ie&&(Q(),F.current=ie,z(!1),_.setStyle(ie,{diff:!0}))},[_,D,H,Q]);const te=A.useMemo(()=>({map:_,isLoaded:S&&O}),[_,S,O]);return $.jsx(kN.Provider,{value:te,children:$.jsxs("div",{ref:o,className:"relative w-full h-full",children:[!S&&$.jsx(EZ,{}),_&&t]})})}),AN=A.createContext(null);function TZ(){const e=A.useContext(AN);if(!e)throw new Error("Marker components must be used within MapMarker");return e}function wI({longitude:e,latitude:t,children:r,onClick:n,onMouseEnter:u,onMouseLeave:h,onDragStart:d,onDrag:o,onDragEnd:_,draggable:P=!1,...S}){const{map:M}=kw(),O=A.useMemo(()=>{var be,xe,$e;const H=new mN.Marker({...S,element:document.createElement("div"),draggable:P}).setLngLat([e,t]),Q=Ee=>n==null?void 0:n(Ee),te=Ee=>u==null?void 0:u(Ee),ie=Ee=>h==null?void 0:h(Ee);(be=H.getElement())==null||be.addEventListener("click",Q),(xe=H.getElement())==null||xe.addEventListener("mouseenter",te),($e=H.getElement())==null||$e.addEventListener("mouseleave",ie);const ae=()=>{const Ee=H.getLngLat();d==null||d({lng:Ee.lng,lat:Ee.lat})},he=()=>{const Ee=H.getLngLat();o==null||o({lng:Ee.lng,lat:Ee.lat})},re=()=>{const Ee=H.getLngLat();_==null||_({lng:Ee.lng,lat:Ee.lat})};return H.on("dragstart",ae),H.on("drag",he),H.on("dragend",re),H},[]);A.useEffect(()=>{if(M)return O.addTo(M),()=>{O.remove()}},[M]),(O.getLngLat().lng!==e||O.getLngLat().lat!==t)&&O.setLngLat([e,t]),O.isDraggable()!==P&&O.setDraggable(P);const z=O.getOffset(),F=S.offset??[0,0],[B,D]=Array.isArray(F)?F:[F.x,F.y];return(z.x!==B||z.y!==D)&&O.setOffset(F),O.getRotation()!==S.rotation&&O.setRotation(S.rotation??0),O.getRotationAlignment()!==S.rotationAlignment&&O.setRotationAlignment(S.rotationAlignment??"auto"),O.getPitchAlignment()!==S.pitchAlignment&&O.setPitchAlignment(S.pitchAlignment??"auto"),$.jsx(AN.Provider,{value:{marker:O,map:M},children:r})}function SI({children:e,className:t}){const{marker:r}=TZ();return Cc.createPortal($.jsx("div",{className:Ed("relative cursor-pointer",t),children:e||$.jsx(MZ,{})}),r.getElement())}function MZ(){return $.jsx("div",{className:"relative h-4 w-4 rounded-full border-2 border-white bg-blue-500 shadow-lg"})}function PI({children:e,className:t,position:r="top"}){const n={top:"bottom-full mb-1",bottom:"top-full mt-1"};return $.jsx("div",{className:Ed("absolute left-1/2 -translate-x-1/2 whitespace-nowrap","text-[10px] font-medium text-foreground",n[r],t),children:e})}function kZ({id:e,coordinates:t,color:r="#4285F4",width:n=3,opacity:u=.8,dashArray:h,onClick:d,onMouseEnter:o,onMouseLeave:_,interactive:P=!0}){const{map:S,isLoaded:M}=kw(),O=A.useId(),z=e??O,F=`route-source-${z}`,B=`route-layer-${z}`;return A.useEffect(()=>{if(!(!M||!S))return S.addSource(F,{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}}}),S.addLayer({id:B,type:"line",source:F,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":r,"line-width":n,"line-opacity":u,...h&&{"line-dasharray":h}}}),()=>{try{S.getLayer(B)&&S.removeLayer(B),S.getSource(F)&&S.removeSource(F)}catch{}}},[M,S]),A.useEffect(()=>{if(!M||!S||t.length<2)return;const D=S.getSource(F);D&&D.setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}})},[M,S,t,F]),A.useEffect(()=>{!M||!S||!S.getLayer(B)||(S.setPaintProperty(B,"line-color",r),S.setPaintProperty(B,"line-width",n),S.setPaintProperty(B,"line-opacity",u),h&&S.setPaintProperty(B,"line-dasharray",h))},[M,S,B,r,n,u,h]),A.useEffect(()=>{if(!M||!S||!P)return;const D=()=>{d==null||d()},H=()=>{S.getCanvas().style.cursor="pointer",o==null||o()},Q=()=>{S.getCanvas().style.cursor="",_==null||_()};return S.on("click",B,D),S.on("mouseenter",B,H),S.on("mouseleave",B,Q),()=>{S.off("click",B,D),S.off("mouseenter",B,H),S.off("mouseleave",B,Q)}},[M,S,B,d,o,_,P]),null}function EI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function CC(...e){return t=>{let r=!1;const n=e.map(u=>{const h=EI(u,t);return!r&&typeof h=="function"&&(r=!0),h});if(r)return()=>{for(let u=0;u<n.length;u++){const h=n[u];typeof h=="function"?h():EI(e[u],null)}}}}function vp(...e){return A.useCallback(CC(...e),e)}function AZ({bounds:e}){const t=kw();return A.useEffect(()=>{if(!e||!t)return;const r=t.map||(typeof t.getMap=="function"?t.getMap():null)||t;!r||typeof r.fitBounds!="function"||r.fitBounds([[e.minLng,e.minLat],[e.maxLng,e.maxLat]],{padding:{top:50,bottom:50,left:50,right:50},maxZoom:12,duration:800})},[t,e]),null}function IZ(){const e=kw(),t=()=>(e==null?void 0:e.map)||(typeof(e==null?void 0:e.getMap)=="function"?e.getMap():null)||e,r=()=>{const u=t();u!=null&&u.zoomIn&&u.zoomIn({duration:300})},n=()=>{const u=t();u!=null&&u.zoomOut&&u.zoomOut({duration:300})};return $.jsxs("div",{className:"absolute bottom-3 right-3 flex flex-col gap-2 z-10",children:[$.jsx("button",{onClick:r,className:"w-9 h-9 bg-white rounded-md shadow border flex items-center justify-center text-lg hover:bg-gray-100 cursor-pointer",children:"+"}),$.jsx("button",{onClick:n,className:"w-9 h-9 bg-white rounded-md shadow border flex items-center justify-center text-lg hover:bg-gray-100 cursor-pointer",children:""})]})}function OZ({locationCoordinates:e}){var z,F,B,D,H,Q;const[t,r]=A.useState([]),[n,u]=A.useState(0),[h,d]=A.useState(!0),[o,_]=A.useState(null),P=A.useCallback(te=>{if(!te||te.length<2)return null;const ie=te.map(he=>he.lng),ae=te.map(he=>he.lat);return{minLng:Math.min(...ie),maxLng:Math.max(...ie),minLat:Math.min(...ae),maxLat:Math.max(...ae)}},[]);A.useEffect(()=>{e&&e.length===2&&_(P(e))},[e,P]),A.useEffect(()=>{async function te(){var ae,he,re,be,xe;if(!e||e.length<2||!((ae=e[0])!=null&&ae.lng)||!((he=e[0])!=null&&he.lat)||!((re=e[1])!=null&&re.lng)||!((be=e[1])!=null&&be.lat)){d(!1),r([]);return}try{d(!0);const $e=e[0],Ee=e[1],Ne=await fetch(`https://router.project-osrm.org/route/v1/driving/${$e.lng},${$e.lat};${Ee.lng},${Ee.lat}?overview=full&geometries=geojson&alternatives=true`);if(!Ne.ok)throw new Error("Route fetch failed");const Xe=await Ne.json();Xe.code==="Ok"&&((xe=Xe.routes)==null?void 0:xe.length)>0?r(Xe.routes.map((ut,pt)=>({coordinates:ut.geometry.coordinates,duration:ut.duration,distance:ut.distance,index:pt}))):r([])}catch{r([])}finally{d(!1)}}const ie=setTimeout(te,300);return()=>clearTimeout(ie)},[e]);const S=()=>{if(!o)return{center:[4.9,52.3],zoom:1};const te=(o.minLng+o.maxLng)/2,ie=(o.minLat+o.maxLat)/2;return{center:[te,ie],zoom:7}},M=t.slice().sort((te,ie)=>te.index===n?-1:ie.index===n?1:0),O=S();return $.jsx("div",{children:$.jsxs("div",{className:"bg-white p-8 rounded-2xl border",children:[$.jsx("h1",{className:"title",children:"Route Map"}),$.jsxs("div",{className:"h-[500px] w-full relative mt-4 rounded-lg overflow-hidden border border-gray-200",children:[$.jsxs(CZ,{center:O.center,zoom:O.zoom,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",children:[o&&$.jsx(AZ,{bounds:o}),$.jsx(IZ,{}),M.map(te=>{const ie=te.index===n;return $.jsx(kZ,{coordinates:te.coordinates,color:ie?"#6366f1":"#94a3b8",width:ie?6:4,opacity:ie?1:.5,onClick:()=>u(te.index)},te.index)}),((z=e==null?void 0:e[0])==null?void 0:z.lng)&&((F=e==null?void 0:e[0])==null?void 0:F.lat)&&$.jsx(wI,{longitude:e[0].lng,latitude:e[0].lat,children:$.jsxs(SI,{children:[$.jsxs("div",{className:"relative",children:[$.jsx("div",{className:"size-5 rounded-full bg-green-500 border-2 border-white shadow-lg"}),$.jsx("div",{className:"absolute -top-2 -left-2 size-9 rounded-full bg-green-500/20 animate-ping "})]}),$.jsx(PI,{position:"top",children:e[0].name||"Origin"})]})}),((B=e==null?void 0:e[1])==null?void 0:B.lng)&&((D=e==null?void 0:e[1])==null?void 0:D.lat)&&$.jsx(wI,{longitude:e[1].lng,latitude:e[1].lat,children:$.jsxs(SI,{children:[$.jsxs("div",{className:"relative",children:[$.jsx("div",{className:"size-5 rounded-full bg-red-500 border-2 border-white shadow-lg"}),$.jsx("div",{className:"absolute -top-2 -left-2 size-9 rounded-full bg-red-500/20 animate-ping"})]}),$.jsx(PI,{position:"bottom",children:e[1].name||"Destination"})]})})]}),h&&(e==null?void 0:e.length)===2&&$.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80",children:$.jsx(O7,{className:"size-8 animate-spin text-blue-600"})}),(e==null?void 0:e.length)===2&&$.jsx("div",{className:"absolute bottom-3 left-3 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg border",children:$.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[$.jsxs("div",{className:"flex items-center gap-1.5",children:[$.jsx("div",{className:"size-3 rounded-full bg-green-500"}),$.jsx("span",{className:"font-medium",children:((H=e[0])==null?void 0:H.name)||"Origin"})]}),$.jsx("span",{className:"text-gray-400",children:""}),$.jsxs("div",{className:"flex items-center gap-1.5",children:[$.jsx("div",{className:"size-3 rounded-full bg-red-500"}),$.jsx("span",{className:"font-medium",children:((Q=e[1])==null?void 0:Q.name)||"Destination"})]})]})})]})]})})}function LZ(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:$.jsx("path",{d:"M6.66667 9.33333C7.37391 9.33333 8.05219 9.05238 8.55229 8.55229C9.05238 8.05219 9.33333 7.37391 9.33333 6.66667C9.33333 5.95942 9.05238 5.28115 8.55229 4.78105C8.05219 4.28095 7.37391 4 6.66667 4C5.95942 4 5.28115 4.28095 4.78105 4.78105C4.28095 5.28115 4 5.95942 4 6.66667C4 7.37391 4.28095 8.05219 4.78105 8.55229C5.28115 9.05238 5.95942 9.33333 6.66667 9.33333ZM6.66667 9.33333V22C6.66667 23.2377 7.15833 24.4247 8.0335 25.2998C8.90867 26.175 10.0957 26.6667 11.3333 26.6667C12.571 26.6667 13.758 26.175 14.6332 25.2998C15.5083 24.4247 16 23.2377 16 22V10C16 8.76232 16.4917 7.57534 17.3668 6.70017C18.242 5.825 19.429 5.33333 20.6667 5.33333C21.9043 5.33333 23.0913 5.825 23.9665 6.70017C24.8417 7.57534 25.3333 8.76232 25.3333 10V28M25.3333 28L21.3333 24M25.3333 28L29.3333 24",stroke:"#637381",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function IN(e,[t,r]){return Math.min(r,Math.max(t,e))}function ry(e,t,{checkForDefaultPrevented:r=!0}={}){return function(u){if(e==null||e(u),r===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function ON(e,t=[]){let r=[];function n(h,d){const o=A.createContext(d),_=r.length;r=[...r,d];const P=M=>{var H;const{scope:O,children:z,...F}=M,B=((H=O==null?void 0:O[e])==null?void 0:H[_])||o,D=A.useMemo(()=>F,Object.values(F));return $.jsx(B.Provider,{value:D,children:z})};P.displayName=h+"Provider";function S(M,O){var B;const z=((B=O==null?void 0:O[e])==null?void 0:B[_])||o,F=A.useContext(z);if(F)return F;if(d!==void 0)return d;throw new Error(`\`${M}\` must be used within \`${h}\``)}return[P,S]}const u=()=>{const h=r.map(d=>A.createContext(d));return function(o){const _=(o==null?void 0:o[e])||h;return A.useMemo(()=>({[`__scope${e}`]:{...o,[e]:_}}),[o,_])}};return u.scopeName=e,[n,DZ(u,...t)]}function DZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(h){const d=n.reduce((o,{useScope:_,scopeName:P})=>{const M=_(h)[`__scope${P}`];return{...o,...M}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}var LN=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},RZ=GE[" useInsertionEffect ".trim().toString()]||LN;function jZ({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[u,h,d]=zZ({defaultProp:t,onChange:r}),o=e!==void 0,_=o?e:u;{const S=A.useRef(e!==void 0);A.useEffect(()=>{const M=S.current;M!==o&&console.warn(`${n} is changing from ${M?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=o},[o,n])}const P=A.useCallback(S=>{var M;if(o){const O=NZ(S)?S(e):S;O!==e&&((M=d.current)==null||M.call(d,O))}else h(S)},[o,e,h,d]);return[_,P]}function zZ({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),u=A.useRef(r),h=A.useRef(t);return RZ(()=>{h.current=t},[t]),A.useEffect(()=>{var d;u.current!==r&&((d=h.current)==null||d.call(h,r),u.current=r)},[r,u]),[r,n,h]}function NZ(e){return typeof e=="function"}var FZ=A.createContext(void 0);function BZ(e){const t=A.useContext(FZ);return e||t||"ltr"}function VZ(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function $Z(e){const[t,r]=A.useState(void 0);return LN(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const h=u[0];let d,o;if("borderBoxSize"in h){const _=h.borderBoxSize,P=Array.isArray(_)?_[0]:_;d=P.inlineSize,o=P.blockSize}else d=e.offsetWidth,o=e.offsetHeight;r({width:d,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}function UZ(e){const t=qZ(e),r=A.forwardRef((n,u)=>{const{children:h,...d}=n,o=A.Children.toArray(h),_=o.find(WZ);if(_){const P=_.props.children,S=o.map(M=>M===_?A.Children.count(P)>1?A.Children.only(null):A.isValidElement(P)?P.props.children:null:M);return $.jsx(t,{...d,ref:u,children:A.isValidElement(P)?A.cloneElement(P,void 0,S):null})}return $.jsx(t,{...d,ref:u,children:h})});return r.displayName=`${e}.Slot`,r}function qZ(e){const t=A.forwardRef((r,n)=>{const{children:u,...h}=r;if(A.isValidElement(u)){const d=ZZ(u),o=HZ(h,u.props);return u.type!==A.Fragment&&(o.ref=n?CC(n,d):d),A.cloneElement(u,o)}return A.Children.count(u)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GZ=Symbol("radix.slottable");function WZ(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GZ}function HZ(e,t){const r={...t};for(const n in t){const u=e[n],h=t[n];/^on[A-Z]/.test(n)?u&&h?r[n]=(...o)=>{const _=h(...o);return u(...o),_}:u&&(r[n]=u):n==="style"?r[n]={...u,...h}:n==="className"&&(r[n]=[u,h].filter(Boolean).join(" "))}return{...e,...r}}function ZZ(e){var n,u;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var KZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],U_=KZ.reduce((e,t)=>{const r=UZ(`Primitive.${t}`),n=A.forwardRef((u,h)=>{const{asChild:d,...o}=u,_=d?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(_,{...o,ref:h})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function CI(e){const t=XZ(e),r=A.forwardRef((n,u)=>{const{children:h,...d}=n,o=A.Children.toArray(h),_=o.find(QZ);if(_){const P=_.props.children,S=o.map(M=>M===_?A.Children.count(P)>1?A.Children.only(null):A.isValidElement(P)?P.props.children:null:M);return $.jsx(t,{...d,ref:u,children:A.isValidElement(P)?A.cloneElement(P,void 0,S):null})}return $.jsx(t,{...d,ref:u,children:h})});return r.displayName=`${e}.Slot`,r}function XZ(e){const t=A.forwardRef((r,n)=>{const{children:u,...h}=r;if(A.isValidElement(u)){const d=eK(u),o=JZ(h,u.props);return u.type!==A.Fragment&&(o.ref=n?CC(n,d):d),A.cloneElement(u,o)}return A.Children.count(u)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var YZ=Symbol("radix.slottable");function QZ(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===YZ}function JZ(e,t){const r={...t};for(const n in t){const u=e[n],h=t[n];/^on[A-Z]/.test(n)?u&&h?r[n]=(...o)=>{const _=h(...o);return u(...o),_}:u&&(r[n]=u):n==="style"?r[n]={...u,...h}:n==="className"&&(r[n]=[u,h].filter(Boolean).join(" "))}return{...e,...r}}function eK(e){var n,u;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function tK(e){const t=e+"CollectionProvider",[r,n]=ON(t),[u,h]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=B=>{const{scope:D,children:H}=B,Q=Jn.useRef(null),te=Jn.useRef(new Map).current;return $.jsx(u,{scope:D,itemMap:te,collectionRef:Q,children:H})};d.displayName=t;const o=e+"CollectionSlot",_=CI(o),P=Jn.forwardRef((B,D)=>{const{scope:H,children:Q}=B,te=h(o,H),ie=vp(D,te.collectionRef);return $.jsx(_,{ref:ie,children:Q})});P.displayName=o;const S=e+"CollectionItemSlot",M="data-radix-collection-item",O=CI(S),z=Jn.forwardRef((B,D)=>{const{scope:H,children:Q,...te}=B,ie=Jn.useRef(null),ae=vp(D,ie),he=h(S,H);return Jn.useEffect(()=>(he.itemMap.set(ie,{ref:ie,...te}),()=>void he.itemMap.delete(ie))),$.jsx(O,{[M]:"",ref:ae,children:Q})});z.displayName=S;function F(B){const D=h(e+"CollectionConsumer",B);return Jn.useCallback(()=>{const Q=D.collectionRef.current;if(!Q)return[];const te=Array.from(Q.querySelectorAll(`[${M}]`));return Array.from(D.itemMap.values()).sort((he,re)=>te.indexOf(he.ref.current)-te.indexOf(re.ref.current))},[D.collectionRef,D.itemMap])}return[{Provider:d,Slot:P,ItemSlot:z},F,n]}var DN=["PageUp","PageDown"],RN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],jN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$y="Slider",[Z2,rK,nK]=tK($y),[zN]=ON($y,[nK]),[iK,Aw]=zN($y),NN=A.forwardRef((e,t)=>{const{name:r,min:n=0,max:u=100,step:h=1,orientation:d="horizontal",disabled:o=!1,minStepsBetweenThumbs:_=0,defaultValue:P=[n],value:S,onValueChange:M=()=>{},onValueCommit:O=()=>{},inverted:z=!1,form:F,...B}=e,D=A.useRef(new Set),H=A.useRef(0),te=d==="horizontal"?aK:oK,[ie=[],ae]=jZ({prop:S,defaultProp:P,onChange:Ee=>{var Xe;(Xe=[...D.current][H.current])==null||Xe.focus(),M(Ee)}}),he=A.useRef(ie);function re(Ee){const Ne=hK(ie,Ee);$e(Ee,Ne)}function be(Ee){$e(Ee,H.current)}function xe(){const Ee=he.current[H.current];ie[H.current]!==Ee&&O(ie)}function $e(Ee,Ne,{commit:Xe}={commit:!1}){const ut=mK(h),pt=gK(Math.round((Ee-n)/h)*h+n,ut),gt=IN(pt,[n,u]);ae((wt=[])=>{const je=uK(wt,gt,Ne);if(pK(je,_*h)){H.current=je.indexOf(gt);const Qe=String(je)!==String(wt);return Qe&&Xe&&O(je),Qe?je:wt}else return wt})}return $.jsx(iK,{scope:e.__scopeSlider,name:r,disabled:o,min:n,max:u,valueIndexToChangeRef:H,thumbs:D.current,values:ie,orientation:d,form:F,children:$.jsx(Z2.Provider,{scope:e.__scopeSlider,children:$.jsx(Z2.Slot,{scope:e.__scopeSlider,children:$.jsx(te,{"aria-disabled":o,"data-disabled":o?"":void 0,...B,ref:t,onPointerDown:ry(B.onPointerDown,()=>{o||(he.current=ie)}),min:n,max:u,inverted:z,onSlideStart:o?void 0:re,onSlideMove:o?void 0:be,onSlideEnd:o?void 0:xe,onHomeKeyDown:()=>!o&&$e(n,0,{commit:!0}),onEndKeyDown:()=>!o&&$e(u,ie.length-1,{commit:!0}),onStepKeyDown:({event:Ee,direction:Ne})=>{if(!o){const pt=DN.includes(Ee.key)||Ee.shiftKey&&RN.includes(Ee.key)?10:1,gt=H.current,wt=ie[gt],je=h*pt*Ne;$e(wt+je,gt,{commit:!0})}}})})})})});NN.displayName=$y;var[FN,BN]=zN($y,{startEdge:"left",endEdge:"right",size:"width",direction:1}),aK=A.forwardRef((e,t)=>{const{min:r,max:n,dir:u,inverted:h,onSlideStart:d,onSlideMove:o,onSlideEnd:_,onStepKeyDown:P,...S}=e,[M,O]=A.useState(null),z=vp(t,te=>O(te)),F=A.useRef(void 0),B=BZ(u),D=B==="ltr",H=D&&!h||!D&&h;function Q(te){const ie=F.current||M.getBoundingClientRect(),ae=[0,ie.width],re=TC(ae,H?[r,n]:[n,r]);return F.current=ie,re(te-ie.left)}return $.jsx(FN,{scope:e.__scopeSlider,startEdge:H?"left":"right",endEdge:H?"right":"left",direction:H?1:-1,size:"width",children:$.jsx(VN,{dir:B,"data-orientation":"horizontal",...S,ref:z,style:{...S.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:te=>{const ie=Q(te.clientX);d==null||d(ie)},onSlideMove:te=>{const ie=Q(te.clientX);o==null||o(ie)},onSlideEnd:()=>{F.current=void 0,_==null||_()},onStepKeyDown:te=>{const ae=jN[H?"from-left":"from-right"].includes(te.key);P==null||P({event:te,direction:ae?-1:1})}})})}),oK=A.forwardRef((e,t)=>{const{min:r,max:n,inverted:u,onSlideStart:h,onSlideMove:d,onSlideEnd:o,onStepKeyDown:_,...P}=e,S=A.useRef(null),M=vp(t,S),O=A.useRef(void 0),z=!u;function F(B){const D=O.current||S.current.getBoundingClientRect(),H=[0,D.height],te=TC(H,z?[n,r]:[r,n]);return O.current=D,te(B-D.top)}return $.jsx(FN,{scope:e.__scopeSlider,startEdge:z?"bottom":"top",endEdge:z?"top":"bottom",size:"height",direction:z?1:-1,children:$.jsx(VN,{"data-orientation":"vertical",...P,ref:M,style:{...P.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:B=>{const D=F(B.clientY);h==null||h(D)},onSlideMove:B=>{const D=F(B.clientY);d==null||d(D)},onSlideEnd:()=>{O.current=void 0,o==null||o()},onStepKeyDown:B=>{const H=jN[z?"from-bottom":"from-top"].includes(B.key);_==null||_({event:B,direction:H?-1:1})}})})}),VN=A.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:u,onSlideEnd:h,onHomeKeyDown:d,onEndKeyDown:o,onStepKeyDown:_,...P}=e,S=Aw($y,r);return $.jsx(U_.span,{...P,ref:t,onKeyDown:ry(e.onKeyDown,M=>{M.key==="Home"?(d(M),M.preventDefault()):M.key==="End"?(o(M),M.preventDefault()):DN.concat(RN).includes(M.key)&&(_(M),M.preventDefault())}),onPointerDown:ry(e.onPointerDown,M=>{const O=M.target;O.setPointerCapture(M.pointerId),M.preventDefault(),S.thumbs.has(O)?O.focus():n(M)}),onPointerMove:ry(e.onPointerMove,M=>{M.target.hasPointerCapture(M.pointerId)&&u(M)}),onPointerUp:ry(e.onPointerUp,M=>{const O=M.target;O.hasPointerCapture(M.pointerId)&&(O.releasePointerCapture(M.pointerId),h(M))})})}),$N="SliderTrack",UN=A.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,u=Aw($N,r);return $.jsx(U_.span,{"data-disabled":u.disabled?"":void 0,"data-orientation":u.orientation,...n,ref:t})});UN.displayName=$N;var K2="SliderRange",qN=A.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,u=Aw(K2,r),h=BN(K2,r),d=A.useRef(null),o=vp(t,d),_=u.values.length,P=u.values.map(O=>HN(O,u.min,u.max)),S=_>1?Math.min(...P):0,M=100-Math.max(...P);return $.jsx(U_.span,{"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,...n,ref:o,style:{...e.style,[h.startEdge]:S+"%",[h.endEdge]:M+"%"}})});qN.displayName=K2;var X2="SliderThumb",GN=A.forwardRef((e,t)=>{const r=rK(e.__scopeSlider),[n,u]=A.useState(null),h=vp(t,o=>u(o)),d=A.useMemo(()=>n?r().findIndex(o=>o.ref.current===n):-1,[r,n]);return $.jsx(sK,{...e,ref:h,index:d})}),sK=A.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:u,...h}=e,d=Aw(X2,r),o=BN(X2,r),[_,P]=A.useState(null),S=vp(t,Q=>P(Q)),M=_?d.form||!!_.closest("form"):!0,O=$Z(_),z=d.values[n],F=z===void 0?0:HN(z,d.min,d.max),B=cK(n,d.values.length),D=O==null?void 0:O[o.size],H=D?dK(D,F,o.direction):0;return A.useEffect(()=>{if(_)return d.thumbs.add(_),()=>{d.thumbs.delete(_)}},[_,d.thumbs]),$.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${F}% + ${H}px)`},children:[$.jsx(Z2.ItemSlot,{scope:e.__scopeSlider,children:$.jsx(U_.span,{role:"slider","aria-label":e["aria-label"]||B,"aria-valuemin":d.min,"aria-valuenow":z,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...h,ref:S,style:z===void 0?{display:"none"}:e.style,onFocus:ry(e.onFocus,()=>{d.valueIndexToChangeRef.current=n})})}),M&&$.jsx(WN,{name:u??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:z},n)]})});GN.displayName=X2;var lK="RadioBubbleInput",WN=A.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const u=A.useRef(null),h=vp(u,n),d=VZ(t);return A.useEffect(()=>{const o=u.current;if(!o)return;const _=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(_,"value").set;if(d!==t&&S){const M=new Event("input",{bubbles:!0});S.call(o,t),o.dispatchEvent(M)}},[d,t]),$.jsx(U_.input,{style:{display:"none"},...r,ref:h,defaultValue:t})});WN.displayName=lK;function uK(e=[],t,r){const n=[...e];return n[r]=t,n.sort((u,h)=>u-h)}function HN(e,t,r){const h=100/(r-t)*(e-t);return IN(h,[0,100])}function cK(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function hK(e,t){if(e.length===1)return 0;const r=e.map(u=>Math.abs(u-t)),n=Math.min(...r);return r.indexOf(n)}function dK(e,t,r){const n=e/2,h=TC([0,50],[0,n]);return(n-h(t)*r)*r}function fK(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function pK(e,t){if(t>0){const r=fK(e);return Math.min(...r)>=t}return!0}function TC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function mK(e){return(String(e).split(".")[1]||"").length}function gK(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var yK=NN,vK=UN,_K=qN,xK=GN;function TI({className:e,defaultValue:t,value:r,min:n=0,max:u=100,...h}){const d=A.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[n,u],[r,t,n,u]);return $.jsxs(yK,{"data-slot":"slider",defaultValue:t,value:r,min:n,max:u,className:Ed("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...h,children:[$.jsx(vK,{"data-slot":"slider-track",className:Ed("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-2 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:$.jsx(_K,{"data-slot":"slider-range",className:Ed("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(o,_)=>$.jsx(xK,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},_))]})}function bK({onSuccess:e,onError:t}){const r=Mc();return ig({mutationKey:["calculateRoute"],mutationFn:async n=>{const u=await r.post("/plan-trip/",n);return u==null?void 0:u.data},onSuccess:e,onError:t})}const MS={name:"Amsterdam",lng:4.9041,lat:52.3676,address:"Amsterdam, Netherlands"},kS={name:"Rotterdam",lng:4.4777,lat:51.9244,address:"Rotterdam, Netherlands"};function wK({vehicleData:e,setLocationCoordinates:t}){const r=Sp(),[n,u]=A.useState({startingCharge:80,minArrivalCharge:50}),{register:h,control:d,handleSubmit:o,setValue:_,watch:P,formState:{errors:S}}=$_({defaultValues:{origin:null,destination:null,originCoordinates:null,destinationCoordinates:null}}),{mutate:M,isPending:O}=bK({onSuccess:re=>{r("/route-analysis-results",{state:re})},onError:re=>{console.log(re)}}),z=A.useRef(null),F=A.useRef(null),B=P("origin"),D=P("destination"),H=P("originCoordinates"),Q=P("destinationCoordinates"),te=re=>!re||!re.geometry?null:{name:re.name||re.formatted_address,address:re.formatted_address,lng:re.geometry.location.lng(),lat:re.geometry.location.lat()},ie=async re=>!window.google||!re?null:new Promise(be=>{new window.google.maps.Geocoder().geocode({address:re},($e,Ee)=>{if(Ee==="OK"&&$e[0]){const Ne=$e[0].geometry.location;be({name:re,address:re,lng:Ne.lng(),lat:Ne.lat()})}else console.warn("Geocode was not successful for the following reason:",Ee),be(null)})});A.useEffect(()=>{H&&Q&&t([H,Q])},[H,Q,t]),A.useEffect(()=>{const be=setTimeout(async()=>{if(B&&B.trim()!==""){if(B===MS.address){_("originCoordinates",MS);return}const xe=await ie(B);xe&&_("originCoordinates",xe)}},1e3);return()=>clearTimeout(be)},[B,_]),A.useEffect(()=>{const be=setTimeout(async()=>{if(D&&D.trim()!==""){if(D===kS.address){_("destinationCoordinates",kS);return}const xe=await ie(D);xe&&_("destinationCoordinates",xe)}},1e3);return()=>clearTimeout(be)},[D,_]),A.useEffect(()=>{if(window.google){if(z.current){const re=new window.google.maps.places.Autocomplete(z.current,{types:["(cities)"]});re.addListener("place_changed",()=>{const be=re.getPlace();if(be!=null&&be.formatted_address){_("origin",be.formatted_address);const xe=te(be);xe&&_("originCoordinates",xe)}})}if(F.current){const re=new window.google.maps.places.Autocomplete(F.current,{types:["(cities)"]});re.addListener("place_changed",()=>{const be=re.getPlace();if(be!=null&&be.formatted_address){_("destination",be.formatted_address);const xe=te(be);xe&&_("destinationCoordinates",xe)}})}}},[_]);const ae=async re=>{let be=re.originCoordinates,xe=re.destinationCoordinates;t([be,xe]),(!be||be.address!==re.origin)&&(be=await ie(re.origin)||MS),(!xe||xe.address!==re.destination)&&(xe=await ie(re.destination)||kS);const $e={vehicle_id:e==null?void 0:e.id,origin:re.origin,destination:re.destination,start_soc:n.startingCharge,min_arrival_soc:n.minArrivalCharge};M($e)},he=(re,be)=>{u(xe=>({...xe,[be]:re[0]}))};return $.jsxs("div",{className:"bg-white p-8 rounded-2xl border",children:[$.jsxs("form",{onSubmit:o(ae),children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title",children:"Route Planning"}),$.jsx("p",{className:"paragraph mt-2",children:"Enter your journey details and we'll calculate optimal charging stop"})]}),$.jsxs("div",{className:"mt-6 border rounded-2xl p-4",children:[$.jsx("h1",{className:"title",children:"Trip Details"}),$.jsxs("div",{className:"mt-4",children:[$.jsx("h1",{className:"paragraph text-[#212B36]!",children:"Origin"}),$.jsxs("div",{className:"flex items-center text-base bg-white border border-gray-500/30 rounded-lg p-3 mt-2",children:[$.jsx(iN,{strokeWidth:1.5,className:"text-[#637381] mr-3"}),$.jsx("input",{...h("origin",{required:!0}),ref:z,className:"outline-none text-gray-500 bg-transparent w-full",type:"text",placeholder:"Enter your origin"})]})]}),$.jsxs("div",{className:"mt-4",children:[$.jsxs("div",{className:"relative flex items-center",children:[$.jsx("h1",{className:"paragraph text-[#212B36]!",children:"Destination"}),$.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-y-1/2",children:$.jsx(LZ,{})})]}),$.jsxs("div",{className:"flex items-center text-base bg-white border border-gray-500/30 rounded-lg p-3 mt-2",children:[$.jsx(W7,{strokeWidth:1.5,className:"text-[#637381] mr-3"}),$.jsx("input",{...h("destination",{required:!0}),ref:F,className:"outline-none text-gray-500 bg-transparent w-full",type:"text",placeholder:"Enter your destination"})]})]})]}),$.jsxs("div",{className:"my-6 border p-3 rounded-lg",children:[$.jsxs("h1",{className:"title flex items-center gap-2",children:[$.jsx(y7,{strokeWidth:1.5})," Battery Constraints"]}),$.jsxs("div",{className:"mt-6",children:[$.jsx("h1",{className:"title2 font-medium",children:"Starting Charge"}),$.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[$.jsx(TI,{value:[n.startingCharge],max:100,step:1,onValueChange:re=>he(re,"startingCharge")}),$.jsxs("span",{translate:"no",className:"w-[5ch]",children:[n.startingCharge,"%"]})]})]}),$.jsxs("div",{className:"mt-6",children:[$.jsx("h1",{className:"title2 font-medium",children:"Min. Arrival Charge"}),$.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[$.jsx(TI,{value:[n.minArrivalCharge],max:100,step:1,onValueChange:re=>he(re,"minArrivalCharge")}),$.jsxs("span",{translate:"no",className:"w-[5ch]",children:[n.minArrivalCharge,"%"]})]})]})]}),$.jsxs("div",{className:"bg-[#e5ecfa] p-3 rounded-lg",children:[$.jsxs("h1",{className:"title text-black! flex items-center gap-2",children:[$.jsx(rN,{size:30,strokeWidth:1})," Selected Vehicle"]}),$.jsxs("div",{className:"mt-3 flex justify-between",children:[$.jsxs("div",{className:"space-y-2",children:[$.jsxs("h1",{className:"title2",children:["Model:"," ",$.jsx("span",{className:"text-[#637381]",children:e==null?void 0:e.name})]}),$.jsxs("h1",{className:"title2",children:["Power:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.power_kw," KWh"]})]}),$.jsxs("h1",{className:"title2",children:["Battery:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.nominal_battery_capacity_kwh," kWh"]})]})]}),$.jsxs("div",{className:"space-y-2 text-end",children:[$.jsxs("h1",{className:"title2",children:["Type:"," ",$.jsx("span",{className:"text-[#637381] capitalize",children:e==null?void 0:e.vehicle_type})]}),$.jsxs("h1",{className:"title2",children:["Weight:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.weight_kg," kg"]})]}),$.jsxs("h1",{className:"title2",children:["Frontal Area:"," ",$.jsxs("span",{className:"text-[#637381]",children:[e==null?void 0:e.frontal_area_m2," m"]})]})]})]})]}),$.jsx(wy,{type:"submit",className:"w-full bg-[#212B36] text-white py-3 rounded-lg mt-4 flex justify-center items-center",disabled:O,children:O?"Calculating...":$.jsxs($.Fragment,{children:["Calculate Route ",$.jsx(R7,{})]})})]}),O&&$.jsx(kd,{})]})}function d_(e){"@babel/helpers - typeof";return d_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d_(e)}function SK(e,t){if(d_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(d_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PK(e){var t=SK(e,"string");return d_(t)=="symbol"?t:t+""}function jt(e,t,r){return(t=PK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var AS,MI;function EK(){if(MI)return AS;MI=1;var e=function(r,n,u,h,d,o,_,P){if(!r){var S;if(n===void 0)S=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var M=[u,h,d,o,_,P],O=0;S=new Error(n.replace(/%s/g,function(){return M[O++]})),S.name="Invariant Violation"}throw S.framesToPop=1,S}};return AS=e,AS}var CK=EK(),Za=ZN(CK),on=A.createContext(null);function TK(){Za(!!A.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=A.useContext(on);return Za(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}function MK(e,t,r){return Object.keys(e).reduce(function(u,h){return t(u,e[h],h)},r)}function kK(e,t){Object.keys(e).forEach(r=>t(e[r],r))}function AK(e,t,r,n){var u={},h=(d,o)=>{var _=r[o];_!==t[o]&&(u[o]=_,d(n,_))};return kK(e,h),u}function IK(e,t,r){var n=MK(r,function(h,d,o){return typeof e[o]=="function"&&h.push(google.maps.event.addListener(t,d,e[o])),h},[]);return n}function OK(e){google.maps.event.removeListener(e)}function Cn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];e.forEach(OK)}function xn(e){var{updaterMap:t,eventMap:r,prevProps:n,nextProps:u,instance:h}=e,d=IK(u,h,r);return AK(t,n,u,h),d}function LK(e){var{children:t,options:r,id:n,mapContainerStyle:u,mapContainerClassName:h,center:d,onClick:o,onDblClick:_,onDrag:P,onDragEnd:S,onDragStart:M,onMouseMove:O,onMouseOut:z,onMouseOver:F,onMouseDown:B,onMouseUp:D,onRightClick:H,onCenterChanged:Q,onLoad:te,onUnmount:ie}=e,[ae,he]=A.useState(null),re=A.useRef(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null),[Lt,ir]=A.useState(null);return A.useEffect(()=>{r&&ae!==null&&ae.setOptions(r)},[ae,r]),A.useEffect(()=>{ae!==null&&typeof d<"u"&&ae.setCenter(d)},[ae,d]),A.useEffect(()=>{ae&&_&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(ae,"dblclick",_)))},[_]),A.useEffect(()=>{ae&&S&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(ae,"dragend",S)))},[S]),A.useEffect(()=>{ae&&M&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(ae,"dragstart",M)))},[M]),A.useEffect(()=>{ae&&B&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(ae,"mousedown",B)))},[B]),A.useEffect(()=>{ae&&O&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(ae,"mousemove",O)))},[O]),A.useEffect(()=>{ae&&z&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(ae,"mouseout",z)))},[z]),A.useEffect(()=>{ae&&F&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(ae,"mouseover",F)))},[F]),A.useEffect(()=>{ae&&D&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(ae,"mouseup",D)))},[D]),A.useEffect(()=>{ae&&H&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(ae,"rightclick",H)))},[H]),A.useEffect(()=>{ae&&o&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(ae,"click",o)))},[o]),A.useEffect(()=>{ae&&P&&(Lt!==null&&google.maps.event.removeListener(Lt),ir(google.maps.event.addListener(ae,"drag",P)))},[P]),A.useEffect(()=>{ae&&Q&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(ae,"center_changed",Q)))},[o]),A.useEffect(()=>{var St=re.current===null?null:new google.maps.Map(re.current,r);return he(St),St!==null&&te&&te(St),()=>{St!==null&&ie&&ie(St)}},[]),$.jsx("div",{id:n,ref:re,style:u,className:h,children:$.jsx(on.Provider,{value:ae,children:ae!==null?t:null})})}A.memo(LK);function kI(e,t,r,n,u,h,d){try{var o=e[h](d),_=o.value}catch(P){return void r(P)}o.done?t(_):Promise.resolve(_).then(n,u)}function KN(e){return function(){var t=this,r=arguments;return new Promise(function(n,u){var h=e.apply(t,r);function d(_){kI(h,n,u,d,o,"next",_)}function o(_){kI(h,n,u,d,o,"throw",_)}d(void 0)})}}function XN(e){var{googleMapsApiKey:t,googleMapsClientId:r,version:n="weekly",language:u,region:h,libraries:d,channel:o,mapIds:_,authReferrerPolicy:P,apiUrl:S="https://maps.googleapis.com"}=e,M=[];return Za(t&&r||!(t&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?M.push("key=".concat(t)):r&&M.push("client=".concat(r)),n&&M.push("v=".concat(n)),u&&M.push("language=".concat(u)),h&&M.push("region=".concat(h)),d&&d.length&&M.push("libraries=".concat(d.sort().join(","))),o&&M.push("channel=".concat(o)),_&&_.length&&M.push("map_ids=".concat(_.join(","))),P&&M.push("auth_referrer_policy=".concat(P)),M.push("loading=async"),M.push("callback=initMap"),"".concat(S,"/maps/api/js?").concat(M.join("&"))}var Am=typeof document<"u";function YN(e){var{url:t,id:r,nonce:n}=e;return Am?new Promise(function(h,d){var o=document.getElementById(r),_=window;if(o){var P=o.getAttribute("data-state");if(o.src===t&&P!=="error"){if(P==="ready")return h(r);var S=_.initMap,M=o.onerror;_.initMap=function(){S&&S(),h(r)},o.onerror=function(z){M&&M(z),d(z)};return}else o.remove()}var O=document.createElement("script");O.type="text/javascript",O.src=t,O.id=r,O.async=!0,O.nonce=n||"",O.onerror=function(F){O.setAttribute("data-state","error"),d(F)},_.initMap=function(){O.setAttribute("data-state","ready"),h(r)},document.head.appendChild(O)}).catch(u=>{throw console.error("injectScript error: ",u),u}):Promise.reject(new Error("document is undefined"))}function AI(e){var t=e.href;return t&&(t.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:e.tagName.toLowerCase()==="style"&&e.styleSheet&&e.styleSheet.cssText&&e.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(e.styleSheet.cssText="",!0):e.tagName.toLowerCase()==="style"&&e.innerHTML&&e.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(e.innerHTML="",!0):e.tagName.toLowerCase()==="style"&&!e.styleSheet&&!e.innerHTML}function QN(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(u,h){return AI(u)||Reflect.apply(t,e,[u,h]),u};var r=e.appendChild.bind(e);e.appendChild=function(u){return AI(u)||Reflect.apply(r,e,[u]),u}}}var Nv=!1;function JN(){return $.jsx("div",{children:"Loading..."})}var Y2={id:"script-loader",version:"weekly"};class eF extends A.PureComponent{constructor(){super(...arguments),jt(this,"check",null),jt(this,"state",{loaded:!1}),jt(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),jt(this,"isCleaningUp",KN(function*(){function t(r){if(!Nv)r();else if(Am)var n=window.setInterval(function(){Nv||(window.clearInterval(n),r())},1)}return new Promise(t)})),jt(this,"cleanup",()=>{Nv=!0;var t=document.getElementById(this.props.id);t&&t.parentNode&&t.parentNode.removeChild(t),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),jt(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&QN(),Za(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var t={id:this.props.id,nonce:this.props.nonce,url:XN(this.props)};YN(t).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),jt(this,"getRef",t=>{this.check=t})}componentDidMount(){if(Am){if(window.google&&window.google.maps&&!Nv){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(t){this.props.libraries!==t.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Am&&t.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Am){this.cleanup();var t=()=>{this.check||(delete window.google,Nv=!1)};window.setTimeout(t,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return $.jsxs($.Fragment,{children:[$.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||$.jsx(JN,{})]})}}jt(eF,"defaultProps",Y2);function DK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function MC(e,t){if(e==null)return{};var r,n,u=DK(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}var II;function RK(e){var{id:t=Y2.id,version:r=Y2.version,nonce:n,googleMapsApiKey:u,googleMapsClientId:h,language:d,region:o,libraries:_,preventGoogleFontsLoading:P,channel:S,mapIds:M,authReferrerPolicy:O,apiUrl:z="https://maps.googleapis.com"}=e,F=A.useRef(!1),[B,D]=A.useState(!1),[H,Q]=A.useState(void 0);A.useEffect(function(){return F.current=!0,()=>{F.current=!1}},[]),A.useEffect(function(){Am&&P&&QN()},[P]),A.useEffect(function(){B&&Za(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[B]);var te=XN({version:r,googleMapsApiKey:u,googleMapsClientId:h,language:d,region:o,libraries:_,channel:S,mapIds:M,authReferrerPolicy:O,apiUrl:z});A.useEffect(function(){if(!Am)return;function he(){F.current&&(D(!0),II=te)}if(window.google&&window.google.maps&&II===te){he();return}YN({id:t,url:te,nonce:n}).then(he).catch(function(be){F.current&&Q(be),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(u||"-",") or Client ID (").concat(h||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(be)})},[t,te,n]);var ie=A.useRef(void 0);return A.useEffect(function(){ie.current&&_!==ie.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ie.current=_},[_]),{isLoaded:B,loadError:H,url:te}}var jK=["loadingElement","onLoad","onError","onUnmount","children"],zK=$.jsx(JN,{});function NK(e){var{loadingElement:t,onLoad:r,onError:n,onUnmount:u,children:h}=e,d=MC(e,jK),{isLoaded:o,loadError:_}=RK(d);return A.useEffect(function(){o&&typeof r=="function"&&r()},[o,r]),A.useEffect(function(){_&&typeof n=="function"&&n(_)},[_,n]),A.useEffect(function(){return()=>{u&&u()}},[u]),o?h:t||zK}A.memo(NK);var OI;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(OI||(OI={}));function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ub(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var DI={},RI={options(e,t){e.setOptions(t)}};function FK(e){var{options:t,onLoad:r,onUnmount:n}=e,u=A.useContext(on),[h,d]=A.useState(null);return A.useEffect(()=>{h!==null&&h.setMap(u)},[u]),A.useEffect(()=>{t&&h!==null&&h.setOptions(t)},[h,t]),A.useEffect(()=>{var o=new google.maps.TrafficLayer(ub(ub({},t),{},{map:u}));return d(o),r&&r(o),()=>{h!==null&&(n&&n(h),h.setMap(null))}},[]),null}A.memo(FK);class BK extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{trafficLayer:null}),jt(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),jt(this,"registeredEvents",[])}componentDidMount(){var t=new google.maps.TrafficLayer(ub(ub({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:RI,eventMap:DI,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{trafficLayer:t}},this.setTrafficLayerCallback)}componentDidUpdate(t){this.state.trafficLayer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:RI,eventMap:DI,prevProps:t,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Cn(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}jt(BK,"contextType",on);function VK(e){var{onLoad:t,onUnmount:r}=e,n=A.useContext(on),[u,h]=A.useState(null);return A.useEffect(()=>{u!==null&&u.setMap(n)},[n]),A.useEffect(()=>{var d=new google.maps.BicyclingLayer;return h(d),d.setMap(n),t&&t(d),()=>{d!==null&&(r&&r(d),d.setMap(null))}},[]),null}A.memo(VK);class $K extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{bicyclingLayer:null}),jt(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var t=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:t}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}jt($K,"contextType",on);function UK(e){var{onLoad:t,onUnmount:r}=e,n=A.useContext(on),[u,h]=A.useState(null);return A.useEffect(()=>{u!==null&&u.setMap(n)},[n]),A.useEffect(()=>{var d=new google.maps.TransitLayer;return h(d),d.setMap(n),t&&t(d),()=>{u!==null&&(r&&r(u),u.setMap(null))}},[]),null}A.memo(UK);class qK extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{transitLayer:null}),jt(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var t=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:t}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}jt(qK,"contextType",on);function jI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function cb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var zI={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},NI={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};function GK(e){var{options:t,drawingMode:r,onCircleComplete:n,onMarkerComplete:u,onOverlayComplete:h,onPolygonComplete:d,onPolylineComplete:o,onRectangleComplete:_,onLoad:P,onUnmount:S}=e,M=A.useContext(on),[O,z]=A.useState(null),[F,B]=A.useState(null),[D,H]=A.useState(null),[Q,te]=A.useState(null),[ie,ae]=A.useState(null),[he,re]=A.useState(null),[be,xe]=A.useState(null);return A.useEffect(()=>{O!==null&&O.setMap(M)},[M]),A.useEffect(()=>{t&&O!==null&&O.setOptions(t)},[O,t]),A.useEffect(()=>{O!==null&&O.setDrawingMode(r??null)},[O,r]),A.useEffect(()=>{O&&n&&(F!==null&&google.maps.event.removeListener(F),B(google.maps.event.addListener(O,"circlecomplete",n)))},[O,n]),A.useEffect(()=>{O&&u&&(D!==null&&google.maps.event.removeListener(D),H(google.maps.event.addListener(O,"markercomplete",u)))},[O,u]),A.useEffect(()=>{O&&h&&(Q!==null&&google.maps.event.removeListener(Q),te(google.maps.event.addListener(O,"overlaycomplete",h)))},[O,h]),A.useEffect(()=>{O&&d&&(ie!==null&&google.maps.event.removeListener(ie),ae(google.maps.event.addListener(O,"polygoncomplete",d)))},[O,d]),A.useEffect(()=>{O&&o&&(he!==null&&google.maps.event.removeListener(he),re(google.maps.event.addListener(O,"polylinecomplete",o)))},[O,o]),A.useEffect(()=>{O&&_&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(O,"rectanglecomplete",_)))},[O,_]),A.useEffect(()=>{Za(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var $e=new google.maps.drawing.DrawingManager(cb(cb({},t),{},{map:M}));return r&&$e.setDrawingMode(r),n&&B(google.maps.event.addListener($e,"circlecomplete",n)),u&&H(google.maps.event.addListener($e,"markercomplete",u)),h&&te(google.maps.event.addListener($e,"overlaycomplete",h)),d&&ae(google.maps.event.addListener($e,"polygoncomplete",d)),o&&re(google.maps.event.addListener($e,"polylinecomplete",o)),_&&xe(google.maps.event.addListener($e,"rectanglecomplete",_)),z($e),P&&P($e),()=>{O!==null&&(F&&google.maps.event.removeListener(F),D&&google.maps.event.removeListener(D),Q&&google.maps.event.removeListener(Q),ie&&google.maps.event.removeListener(ie),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),S&&S(O),O.setMap(null))}},[]),null}A.memo(GK);class WK extends A.PureComponent{constructor(t){super(t),jt(this,"registeredEvents",[]),jt(this,"state",{drawingManager:null}),jt(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Za(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var t=new google.maps.drawing.DrawingManager(cb(cb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:NI,eventMap:zI,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{drawingManager:t}},this.setDrawingManagerCallback)}componentDidUpdate(t){this.state.drawingManager!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:NI,eventMap:zI,prevProps:t,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Cn(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}jt(WK,"contextType",on);function FI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var BI={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},VI={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},hb={};function HK(e){var{position:t,options:r,clusterer:n,noClustererRedraw:u,children:h,draggable:d,visible:o,animation:_,clickable:P,cursor:S,icon:M,label:O,opacity:z,shape:F,title:B,zIndex:D,onClick:H,onDblClick:Q,onDrag:te,onDragEnd:ie,onDragStart:ae,onMouseOut:he,onMouseOver:re,onMouseUp:be,onMouseDown:xe,onRightClick:$e,onClickableChanged:Ee,onCursorChanged:Ne,onAnimationChanged:Xe,onDraggableChanged:ut,onFlatChanged:pt,onIconChanged:gt,onPositionChanged:wt,onShapeChanged:je,onTitleChanged:Qe,onVisibleChanged:yt,onZindexChanged:Oe,onLoad:et,onUnmount:Mt}=e,Dt=A.useContext(on),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null),[ir,St]=A.useState(null),[Gr,Tr]=A.useState(null),[wr,tn]=A.useState(null),[Wr,Xi]=A.useState(null),[Ii,Be]=A.useState(null),[rt,bt]=A.useState(null),[rr,Wt]=A.useState(null),[zt,ze]=A.useState(null),[ue,le]=A.useState(null),[pe,Me]=A.useState(null),[Ae,Je]=A.useState(null),[Ze,Ve]=A.useState(null),[it,At]=A.useState(null),[Pt,Xt]=A.useState(null),[or,Mr]=A.useState(null),[Kr,Ur]=A.useState(null),[tt,sn]=A.useState(null),[ri,Ir]=A.useState(null),[Zr,Vn]=A.useState(null);A.useEffect(()=>{Ke!==null&&Ke.setMap(Dt)},[Dt]),A.useEffect(()=>{typeof r<"u"&&Ke!==null&&Ke.setOptions(r)},[Ke,r]),A.useEffect(()=>{typeof d<"u"&&Ke!==null&&Ke.setDraggable(d)},[Ke,d]),A.useEffect(()=>{t&&Ke!==null&&Ke.setPosition(t)},[Ke,t]),A.useEffect(()=>{typeof o<"u"&&Ke!==null&&Ke.setVisible(o)},[Ke,o]),A.useEffect(()=>{Ke==null||Ke.setAnimation(_)},[Ke,_]),A.useEffect(()=>{Ke&&P!==void 0&&Ke.setClickable(P)},[Ke,P]),A.useEffect(()=>{Ke&&S!==void 0&&Ke.setCursor(S)},[Ke,S]),A.useEffect(()=>{Ke&&M!==void 0&&Ke.setIcon(M)},[Ke,M]),A.useEffect(()=>{Ke&&O!==void 0&&Ke.setLabel(O)},[Ke,O]),A.useEffect(()=>{Ke&&z!==void 0&&Ke.setOpacity(z)},[Ke,z]),A.useEffect(()=>{Ke&&F!==void 0&&Ke.setShape(F)},[Ke,F]),A.useEffect(()=>{Ke&&B!==void 0&&Ke.setTitle(B)},[Ke,B]),A.useEffect(()=>{Ke&&D!==void 0&&Ke.setZIndex(D)},[Ke,D]),A.useEffect(()=>{Ke&&Q&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(Ke,"dblclick",Q)))},[Q]),A.useEffect(()=>{Ke&&ie&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(Ke,"dragend",ie)))},[ie]),A.useEffect(()=>{Ke&&ae&&(ir!==null&&google.maps.event.removeListener(ir),St(google.maps.event.addListener(Ke,"dragstart",ae)))},[ae]),A.useEffect(()=>{Ke&&xe&&(Gr!==null&&google.maps.event.removeListener(Gr),Tr(google.maps.event.addListener(Ke,"mousedown",xe)))},[xe]),A.useEffect(()=>{Ke&&he&&(wr!==null&&google.maps.event.removeListener(wr),tn(google.maps.event.addListener(Ke,"mouseout",he)))},[he]),A.useEffect(()=>{Ke&&re&&(Wr!==null&&google.maps.event.removeListener(Wr),Xi(google.maps.event.addListener(Ke,"mouseover",re)))},[re]),A.useEffect(()=>{Ke&&be&&(Ii!==null&&google.maps.event.removeListener(Ii),Be(google.maps.event.addListener(Ke,"mouseup",be)))},[be]),A.useEffect(()=>{Ke&&$e&&(rt!==null&&google.maps.event.removeListener(rt),bt(google.maps.event.addListener(Ke,"rightclick",$e)))},[$e]),A.useEffect(()=>{Ke&&H&&(rr!==null&&google.maps.event.removeListener(rr),Wt(google.maps.event.addListener(Ke,"click",H)))},[H]),A.useEffect(()=>{Ke&&te&&(zt!==null&&google.maps.event.removeListener(zt),ze(google.maps.event.addListener(Ke,"drag",te)))},[te]),A.useEffect(()=>{Ke&&Ee&&(ue!==null&&google.maps.event.removeListener(ue),le(google.maps.event.addListener(Ke,"clickable_changed",Ee)))},[Ee]),A.useEffect(()=>{Ke&&Ne&&(pe!==null&&google.maps.event.removeListener(pe),Me(google.maps.event.addListener(Ke,"cursor_changed",Ne)))},[Ne]),A.useEffect(()=>{Ke&&Xe&&(Ae!==null&&google.maps.event.removeListener(Ae),Je(google.maps.event.addListener(Ke,"animation_changed",Xe)))},[Xe]),A.useEffect(()=>{Ke&&ut&&(Ze!==null&&google.maps.event.removeListener(Ze),Ve(google.maps.event.addListener(Ke,"draggable_changed",ut)))},[ut]),A.useEffect(()=>{Ke&&pt&&(it!==null&&google.maps.event.removeListener(it),At(google.maps.event.addListener(Ke,"flat_changed",pt)))},[pt]),A.useEffect(()=>{Ke&&gt&&(Pt!==null&&google.maps.event.removeListener(Pt),Xt(google.maps.event.addListener(Ke,"icon_changed",gt)))},[gt]),A.useEffect(()=>{Ke&&wt&&(or!==null&&google.maps.event.removeListener(or),Mr(google.maps.event.addListener(Ke,"position_changed",wt)))},[wt]),A.useEffect(()=>{Ke&&je&&(Kr!==null&&google.maps.event.removeListener(Kr),Ur(google.maps.event.addListener(Ke,"shape_changed",je)))},[je]),A.useEffect(()=>{Ke&&Qe&&(tt!==null&&google.maps.event.removeListener(tt),sn(google.maps.event.addListener(Ke,"title_changed",Qe)))},[Qe]),A.useEffect(()=>{Ke&&yt&&(ri!==null&&google.maps.event.removeListener(ri),Ir(google.maps.event.addListener(Ke,"visible_changed",yt)))},[yt]),A.useEffect(()=>{Ke&&Oe&&(Zr!==null&&google.maps.event.removeListener(Zr),Vn(google.maps.event.addListener(Ke,"zindex_changed",Oe)))},[Oe]),A.useEffect(()=>{var ln=ly(ly(ly({},r||hb),n?hb:{map:Dt}),{},{position:t}),ur=new google.maps.Marker(ln);return n?n.addMarker(ur,!!u):ur.setMap(Dt),t&&ur.setPosition(t),typeof o<"u"&&ur.setVisible(o),typeof d<"u"&&ur.setDraggable(d),typeof P<"u"&&ur.setClickable(P),typeof S=="string"&&ur.setCursor(S),M&&ur.setIcon(M),typeof O<"u"&&ur.setLabel(O),typeof z<"u"&&ur.setOpacity(z),F&&ur.setShape(F),typeof B=="string"&&ur.setTitle(B),typeof D=="number"&&ur.setZIndex(D),Q&&$t(google.maps.event.addListener(ur,"dblclick",Q)),ie&&Lt(google.maps.event.addListener(ur,"dragend",ie)),ae&&St(google.maps.event.addListener(ur,"dragstart",ae)),xe&&Tr(google.maps.event.addListener(ur,"mousedown",xe)),he&&tn(google.maps.event.addListener(ur,"mouseout",he)),re&&Xi(google.maps.event.addListener(ur,"mouseover",re)),be&&Be(google.maps.event.addListener(ur,"mouseup",be)),$e&&bt(google.maps.event.addListener(ur,"rightclick",$e)),H&&Wt(google.maps.event.addListener(ur,"click",H)),te&&ze(google.maps.event.addListener(ur,"drag",te)),Ee&&le(google.maps.event.addListener(ur,"clickable_changed",Ee)),Ne&&Me(google.maps.event.addListener(ur,"cursor_changed",Ne)),Xe&&Je(google.maps.event.addListener(ur,"animation_changed",Xe)),ut&&Ve(google.maps.event.addListener(ur,"draggable_changed",ut)),pt&&At(google.maps.event.addListener(ur,"flat_changed",pt)),gt&&Xt(google.maps.event.addListener(ur,"icon_changed",gt)),wt&&Mr(google.maps.event.addListener(ur,"position_changed",wt)),je&&Ur(google.maps.event.addListener(ur,"shape_changed",je)),Qe&&sn(google.maps.event.addListener(ur,"title_changed",Qe)),yt&&Ir(google.maps.event.addListener(ur,"visible_changed",yt)),Oe&&Vn(google.maps.event.addListener(ur,"zindex_changed",Oe)),tr(ur),et&&et(ur),()=>{Ft!==null&&google.maps.event.removeListener(Ft),ct!==null&&google.maps.event.removeListener(ct),ir!==null&&google.maps.event.removeListener(ir),Gr!==null&&google.maps.event.removeListener(Gr),wr!==null&&google.maps.event.removeListener(wr),Wr!==null&&google.maps.event.removeListener(Wr),Ii!==null&&google.maps.event.removeListener(Ii),rt!==null&&google.maps.event.removeListener(rt),rr!==null&&google.maps.event.removeListener(rr),ue!==null&&google.maps.event.removeListener(ue),pe!==null&&google.maps.event.removeListener(pe),Ae!==null&&google.maps.event.removeListener(Ae),Ze!==null&&google.maps.event.removeListener(Ze),it!==null&&google.maps.event.removeListener(it),Pt!==null&&google.maps.event.removeListener(Pt),or!==null&&google.maps.event.removeListener(or),tt!==null&&google.maps.event.removeListener(tt),ri!==null&&google.maps.event.removeListener(ri),Zr!==null&&google.maps.event.removeListener(Zr),Mt&&Mt(ur),n?n.removeMarker(ur,!!u):ur&&ur.setMap(null)}},[]);var yn=A.useMemo(()=>h?A.Children.map(h,ln=>{if(!A.isValidElement(ln))return ln;var ur=ln;return A.cloneElement(ur,{anchor:Ke})}):null,[h,Ke]);return $.jsx($.Fragment,{children:yn})||null}A.memo(HK);class ZK extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[])}componentDidMount(){var t=this;return KN(function*(){var r=ly(ly(ly({},t.props.options||hb),t.props.clusterer?hb:{map:t.context}),{},{position:t.props.position});t.marker=new google.maps.Marker(r),t.props.clusterer?t.props.clusterer.addMarker(t.marker,!!t.props.noClustererRedraw):t.marker.setMap(t.context),t.registeredEvents=xn({updaterMap:VI,eventMap:BI,prevProps:{},nextProps:t.props,instance:t.marker}),t.props.onLoad&&t.props.onLoad(t.marker)})()}componentDidUpdate(t){this.marker&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:VI,eventMap:BI,prevProps:t,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Cn(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var t=this.props.children?A.Children.map(this.props.children,r=>{if(!A.isValidElement(r))return r;var n=r;return A.cloneElement(n,{anchor:this.marker})}):null;return t||null}}jt(ZK,"contextType",on);var KK=(function(){function e(t,r){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(t){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var n=r.getMaxZoom(),u=this.cluster.getBounds(),h=r.getMap();h!==null&&"fitBounds"in h&&h.fitBounds(u),this.timeOut=window.setTimeout(function(){var d=r.getMap();if(d!==null){"fitBounds"in d&&d.fitBounds(u);var o=d.getZoom()||0;n!==null&&o>n&&d.setZoom(n+1)}},100)}t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var t;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(t=this.getPanes())===null||t===void 0||t.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var t=this.getPosFromLatLng(this.center);this.div.style.top=t!==null?"".concat(t.y,"px"):"0",this.div.style.left=t!==null?"".concat(t.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var t,r,n,u,h,d;if(this.div&&this.center){var o=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,_=this.backgroundPosition.split(" "),P=parseInt(((t=_[0])===null||t===void 0?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),S=parseInt(((r=_[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),M=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(M!==null?"".concat(M.y,"px"):"0","; left: ").concat(M!==null?"".concat(M.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var O=document.createElement("img");O.alt=o,O.src=this.url,O.width=this.width,O.height=this.height,O.setAttribute("style","position: absolute; top: ".concat(S,"px; left: ").concat(P,"px")),this.cluster.getClusterer().enableRetinaIcons||(O.style.clip="rect(-".concat(S,"px, -").concat(P+this.width,"px, -").concat(S+this.height,", -").concat(P,")"));var z=document.createElement("div");z.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(z.innerText="".concat((u=this.sums)===null||u===void 0?void 0:u.text)),!((h=this.sums)===null||h===void 0)&&h.html&&(z.innerHTML="".concat((d=this.sums)===null||d===void 0?void 0:d.html)),this.div.innerHTML="",this.div.appendChild(O),this.div.appendChild(z),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(t){this.sums=t;var r=this.cluster.getClusterer().getStyles(),n=r[Math.min(r.length-1,Math.max(0,t.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(t){this.center=t},e.prototype.getPosFromLatLng=function(t){var r=this.getProjection().fromLatLngToDivPixel(t);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},e})(),XK=(function(){function e(t){this.markerClusterer=t,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new KK(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),n=0,u=r;n<u.length;n++){var h=u[n],d=h.getPosition();d&&t.extend(d)}return t},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(t){var r;if(this.isMarkerAlreadyAdded(t))return!1;if(this.center){if(this.averageCenter){var n=t.getPosition();if(n){var u=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(u-1)+n.lat())/u,(this.center.lng()*(u-1)+n.lng())/u),this.calculateBounds()}}}else{var n=t.getPosition();n&&(this.center=n,this.calculateBounds())}t.isAdded=!0,this.markers.push(t);var h=this.markers.length,d=this.markerClusterer.getMaxZoom(),o=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(d!==null&&typeof o<"u"&&o>d)t.getMap()!==this.map&&t.setMap(this.map);else if(h<this.minClusterSize)t.getMap()!==this.map&&t.setMap(this.map);else if(h===this.minClusterSize)for(var _=0,P=this.markers;_<P.length;_++){var S=P[_];S.setMap(null)}else t.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(t){if(this.bounds!==null){var r=t.getPosition();if(r)return this.bounds.contains(r)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var t,r=this.markers.length,n=this.markerClusterer.getMaxZoom(),u=(t=this.map)===null||t===void 0?void 0:t.getZoom();if(n!==null&&typeof u<"u"&&u>n){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},e.prototype.isMarkerAlreadyAdded=function(t){if(this.markers.includes)return this.markers.includes(t);for(var r=0;r<this.markers.length;r++)if(t===this.markers[r])return!0;return!1},e})();function YK(e,t){var r=e.length,n=r.toString().length,u=Math.min(n,t);return{text:r.toString(),index:u,title:""}}var QK=2e3,JK=500,eX="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",tX="png",rX=[53,56,66,78,90],nX="cluster",tF=(function(){function e(t,r,n){r===void 0&&(r=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||eX,this.imageExtension=n.imageExtension||tX,this.imageSizes=n.imageSizes||rX,this.calculator=n.calculator||YK,this.batchSize=n.batchSize||QK,this.batchSizeIE=n.batchSizeIE||JK,this.clusterClass=n.clusterClass||nX,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var t,r;this.resetViewport(!1),(((t=this.getMap())===null||t===void 0?void 0:t.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var t=this.getMap();this.activeMap=t,this.ready=!0,this.repaint(),t!==null&&(this.listeners=[google.maps.event.addListener(t,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(t,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var t=0,r=this.markers;t<r.length;t++){var n=r[t];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var u=0,h=this.clusters;u<h.length;u++){var d=h[u];d.remove()}this.clusters=[];for(var o=0,_=this.listeners;o<_.length;o++){var P=_[o];google.maps.event.removeListener(P)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var t=0;t<this.imageSizes.length;t++)this.styles.push({url:"".concat(this.imagePath+(t+1),".").concat(this.imageExtension),height:this.imageSizes[t]||0,width:this.imageSizes[t]||0})},e.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),r=new google.maps.LatLngBounds,n=0,u=t;n<u.length;n++){var h=u[n],d=h.getPosition();d&&r.extend(d)}var o=this.getMap();o!==null&&"fitBounds"in o&&o.fitBounds(r)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(t){this.gridSize=t},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(t){this.minClusterSize=t},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(t){this.maxZoom=t},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(t){this.styles=t},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(t){this.title=t},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(t){this.zoomOnClick=t},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(t){this.averageCenter=t},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(t){this.ignoreHidden=t},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons=t},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(t){this.imageExtension=t},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(t){this.imagePath=t},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(t){this.imageSizes=t},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(t){this.calculator=t},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(t){this.batchSizeIE=t},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(t){this.clusterClass=t},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(t,r){this.pushMarkerTo(t),r||this.redraw()},e.prototype.addMarkers=function(t,r){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var u=t[n];u&&this.pushMarkerTo(u)}r||this.redraw()},e.prototype.pushMarkerTo=function(t){var r=this;t.getDraggable()&&google.maps.event.addListener(t,"dragend",function(){r.ready&&(t.isAdded=!1,r.repaint())}),t.isAdded=!1,this.markers.push(t)},e.prototype.removeMarker_=function(t){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(t);else for(var n=0;n<this.markers.length;n++)if(t===this.markers[n]){r=n;break}return r===-1?!1:(t.setMap(null),this.markers.splice(r,1),!0)},e.prototype.removeMarker=function(t,r){var n=this.removeMarker_(t);return!r&&n&&this.repaint(),n},e.prototype.removeMarkers=function(t,r){for(var n=!1,u=0,h=t;u<h.length;u++){var d=h[u];n=n||this.removeMarker_(d)}return!r&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var t=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,u=t;n<u.length;n++){var h=u[n];h.remove()}},0)},e.prototype.getExtendedBounds=function(t){var r=this.getProjection(),n=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var u=r.fromLatLngToDivPixel(new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()));if(u!==null&&(u.x-=this.gridSize,u.y+=this.gridSize),n!==null){var h=r.fromDivPixelToLatLng(n);h!==null&&t.extend(h)}if(u!==null){var d=r.fromDivPixelToLatLng(u);d!==null&&t.extend(d)}return t},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(t){for(var r=0,n=this.clusters;r<n.length;r++){var u=n[r];u.remove()}this.clusters=[];for(var h=0,d=this.markers;h<d.length;h++){var o=d[h];o.isAdded=!1,t&&o.setMap(null)}},e.prototype.distanceBetweenPoints=function(t,r){var n=6371,u=(r.lat()-t.lat())*Math.PI/180,h=(r.lng()-t.lng())*Math.PI/180,d=Math.sin(u/2)*Math.sin(u/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(h/2)*Math.sin(h/2);return n*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))},e.prototype.isMarkerInBounds=function(t,r){var n=t.getPosition();return n?r.contains(n):!1},e.prototype.addToClosestCluster=function(t){for(var r,n=4e4,u=null,h=0,d=this.clusters;h<d.length;h++){var o=d[h];r=o;var _=r.getCenter(),P=t.getPosition();if(_&&P){var S=this.distanceBetweenPoints(_,P);S<n&&(n=S,u=r)}}u&&u.isMarkerInClusterBounds(t)?u.addMarker(t):(r=new XK(this),r.addMarker(t),this.clusters.push(r))},e.prototype.createClusters=function(t){var r=this;if(this.ready){t===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),u=n!==null&&("getBounds"in n)?n.getBounds():null,h=(n==null?void 0:n.getZoom())||0,d=h>3?new google.maps.LatLngBounds(u==null?void 0:u.getSouthWest(),u==null?void 0:u.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(d),_=Math.min(t+this.batchSize,this.markers.length),P=t;P<_;P++){var S=this.markers[P];S&&!S.isAdded&&this.isMarkerInBounds(S,o)&&(!this.ignoreHidden||this.ignoreHidden&&S.getVisible())&&this.addToClosestCluster(S)}if(_<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(_)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var M=0,O=this.clusters;M<O.length;M++){var z=O[M];z.updateIcon()}}}},e.prototype.extend=function(t,r){return(function(u){for(var h in u.prototype){var d=h;this.prototype[d]=u.prototype[d]}return this}).apply(t,[r])},e})();function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function iX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var uu={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Nn={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},aX={};function oX(e){var{children:t,options:r,averageCenter:n,batchSizeIE:u,calculator:h,clusterClass:d,enableRetinaIcons:o,gridSize:_,ignoreHidden:P,imageExtension:S,imagePath:M,imageSizes:O,maxZoom:z,minimumClusterSize:F,styles:B,title:D,zoomOnClick:H,onClick:Q,onClusteringBegin:te,onClusteringEnd:ie,onMouseOver:ae,onMouseOut:he,onLoad:re,onUnmount:be}=e,[xe,$e]=A.useState(null),Ee=A.useContext(on),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null);return A.useEffect(()=>{xe&&he&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(xe,uu.onMouseOut,he)))},[he]),A.useEffect(()=>{xe&&ae&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(xe,uu.onMouseOver,ae)))},[ae]),A.useEffect(()=>{xe&&Q&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(xe,uu.onClick,Q)))},[Q]),A.useEffect(()=>{xe&&te&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(xe,uu.onClusteringBegin,te)))},[te]),A.useEffect(()=>{xe&&ie&&(gt!==null&&google.maps.event.removeListener(gt),pt(google.maps.event.addListener(xe,uu.onClusteringEnd,ie)))},[ie]),A.useEffect(()=>{typeof n<"u"&&xe!==null&&Nn.averageCenter(xe,n)},[xe,n]),A.useEffect(()=>{typeof u<"u"&&xe!==null&&Nn.batchSizeIE(xe,u)},[xe,u]),A.useEffect(()=>{typeof h<"u"&&xe!==null&&Nn.calculator(xe,h)},[xe,h]),A.useEffect(()=>{typeof d<"u"&&xe!==null&&Nn.clusterClass(xe,d)},[xe,d]),A.useEffect(()=>{typeof o<"u"&&xe!==null&&Nn.enableRetinaIcons(xe,o)},[xe,o]),A.useEffect(()=>{typeof _<"u"&&xe!==null&&Nn.gridSize(xe,_)},[xe,_]),A.useEffect(()=>{typeof P<"u"&&xe!==null&&Nn.ignoreHidden(xe,P)},[xe,P]),A.useEffect(()=>{typeof S<"u"&&xe!==null&&Nn.imageExtension(xe,S)},[xe,S]),A.useEffect(()=>{typeof M<"u"&&xe!==null&&Nn.imagePath(xe,M)},[xe,M]),A.useEffect(()=>{typeof O<"u"&&xe!==null&&Nn.imageSizes(xe,O)},[xe,O]),A.useEffect(()=>{typeof z<"u"&&xe!==null&&Nn.maxZoom(xe,z)},[xe,z]),A.useEffect(()=>{typeof F<"u"&&xe!==null&&Nn.minimumClusterSize(xe,F)},[xe,F]),A.useEffect(()=>{typeof B<"u"&&xe!==null&&Nn.styles(xe,B)},[xe,B]),A.useEffect(()=>{typeof D<"u"&&xe!==null&&Nn.title(xe,D)},[xe,D]),A.useEffect(()=>{typeof H<"u"&&xe!==null&&Nn.zoomOnClick(xe,H)},[xe,H]),A.useEffect(()=>{if(Ee){var et=iX({},r||aX),Mt=new tF(Ee,[],et);return n&&Nn.averageCenter(Mt,n),u&&Nn.batchSizeIE(Mt,u),h&&Nn.calculator(Mt,h),d&&Nn.clusterClass(Mt,d),o&&Nn.enableRetinaIcons(Mt,o),_&&Nn.gridSize(Mt,_),P&&Nn.ignoreHidden(Mt,P),S&&Nn.imageExtension(Mt,S),M&&Nn.imagePath(Mt,M),O&&Nn.imageSizes(Mt,O),z&&Nn.maxZoom(Mt,z),F&&Nn.minimumClusterSize(Mt,F),B&&Nn.styles(Mt,B),D&&Nn.title(Mt,D),H&&Nn.zoomOnClick(Mt,H),he&&Qe(google.maps.event.addListener(Mt,uu.onMouseOut,he)),ae&&Oe(google.maps.event.addListener(Mt,uu.onMouseOver,ae)),Q&&Xe(google.maps.event.addListener(Mt,uu.onClick,Q)),te&&pt(google.maps.event.addListener(Mt,uu.onClusteringBegin,te)),ie&&wt(google.maps.event.addListener(Mt,uu.onClusteringEnd,ie)),$e(Mt),re&&re(Mt),()=>{je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),be&&be(Mt)}}},[]),xe!==null&&t(xe)||null}A.memo(oX);class sX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{markerClusterer:null}),jt(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var t=new tF(this.context,[],this.props.options);this.registeredEvents=xn({updaterMap:Nn,eventMap:uu,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({markerClusterer:t}),this.setClustererCallback)}}componentDidUpdate(t){this.state.markerClusterer&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:Nn,eventMap:uu,prevProps:t,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Cn(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}jt(sX,"contextType",on);function UI(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var rF=(function(){function e(t){t===void 0&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",t.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),typeof t.visible>"u"&&(typeof t.isHidden>"u"?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var t=this,r=function(S){S.returnValue=!1,S.preventDefault&&S.preventDefault(),t.enableEventPropagation||UI(S)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var u=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-u.left-u.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var h=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],d=0,o=h;d<o.length;d++){var _=o[d];this.eventListeners.push(google.maps.event.addListener(this.div,_,UI))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){t.div&&(t.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var t="";return this.closeBoxURL!==""&&(t='<img alt=""',t+=' aria-hidden="true"',t+=" src='"+this.closeBoxURL+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin+";",t+="'>"),t},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(t){if(this.div&&!t){var r=this.getMap();if(r instanceof google.maps.Map){var n=0,u=0,h=r.getBounds();h&&!h.contains(this.position)&&r.setCenter(this.position);var d=r.getDiv(),o=d.offsetWidth,_=d.offsetHeight,P=this.pixelOffset.width,S=this.pixelOffset.height,M=this.div.offsetWidth,O=this.div.offsetHeight,z=this.infoBoxClearance.width,F=this.infoBoxClearance.height,B=this.getProjection(),D=B.fromLatLngToContainerPixel(this.position);D!==null&&(D.x<-P+z?n=D.x+P-z:D.x+M+P+z>o&&(n=D.x+M+P+z-o),this.alignBottom?D.y<-S+F+O?u=D.y+S-F-O:D.y+S+F>_&&(u=D.y+S+F-_):D.y<-S+F?u=D.y+S-F:D.y+O+S+F>_&&(u=D.y+O+S+F-_)),n===0&&u===0||r.panBy(n,u)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var t=this.boxStyle;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(this.div.style[r]=t[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var t={top:0,bottom:0,left:0,right:0};if(!this.div)return t;if(document.defaultView){var r=this.div.ownerDocument,n=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;n&&(t.top=parseInt(n.borderTopWidth||"",10)||0,t.bottom=parseInt(n.borderBottomWidth||"",10)||0,t.left=parseInt(n.borderLeftWidth||"",10)||0,t.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var u=this.div.currentStyle;u&&(t.top=parseInt(u.borderTopWidth||"",10)||0,t.bottom=parseInt(u.borderBottomWidth||"",10)||0,t.left=parseInt(u.borderLeftWidth||"",10)||0,t.right=parseInt(u.borderRightWidth||"",10)||0)}return t},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var t=this.getProjection(),r=t.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(t){t===void 0&&(t={}),typeof t.boxClass<"u"&&(this.boxClass=t.boxClass,this.setBoxStyle()),typeof t.boxStyle<"u"&&(this.boxStyle=t.boxStyle,this.setBoxStyle()),typeof t.content<"u"&&this.setContent(t.content),typeof t.disableAutoPan<"u"&&(this.disableAutoPan=t.disableAutoPan),typeof t.maxWidth<"u"&&(this.maxWidth=t.maxWidth),typeof t.pixelOffset<"u"&&(this.pixelOffset=t.pixelOffset),typeof t.alignBottom<"u"&&(this.alignBottom=t.alignBottom),typeof t.position<"u"&&this.setPosition(t.position),typeof t.zIndex<"u"&&this.setZIndex(t.zIndex),typeof t.closeBoxMargin<"u"&&(this.closeBoxMargin=t.closeBoxMargin),typeof t.closeBoxURL<"u"&&(this.closeBoxURL=t.closeBoxURL),typeof t.infoBoxClearance<"u"&&(this.infoBoxClearance=t.infoBoxClearance),typeof t.isHidden<"u"&&(this.isHidden=t.isHidden),typeof t.visible<"u"&&(this.isHidden=!t.visible),typeof t.enableEventPropagation<"u"&&(this.enableEventPropagation=t.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(t){this.content=t,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof t=="string"?this.div.innerHTML=this.getCloseBoxImg()+t:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(t))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position=t,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(t){this.isHidden=!t,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(t){this.zIndex=t,this.div&&(this.div.style.zIndex=t+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var t=this.getMap();return typeof t>"u"||t===null?!1:!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(t,r){var n=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var u=r.getPosition();n.setPosition(u)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){n.setMap(r.map)})),this.setMap(t),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var t=0,r=this.eventListeners;t<r.length;t++){var n=r[t];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(t,r){return(function(u){for(var h in u.prototype)Object.prototype.hasOwnProperty.call(this,h)||(this.prototype[h]=u.prototype[h]);return this}).apply(t,[r])},e})(),lX=["position"],uX=["position"];function qI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var GI={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},WI={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},cX={};function hX(e){var{children:t,anchor:r,options:n,position:u,zIndex:h,onCloseClick:d,onDomReady:o,onContentChanged:_,onPositionChanged:P,onZindexChanged:S,onLoad:M,onUnmount:O}=e,z=A.useContext(on),[F,B]=A.useState(null),[D,H]=A.useState(null),[Q,te]=A.useState(null),[ie,ae]=A.useState(null),[he,re]=A.useState(null),[be,xe]=A.useState(null),$e=A.useRef(null);return A.useEffect(()=>{z&&F!==null&&(F.close(),r?F.open(z,r):F.getPosition()&&F.open(z))},[z,F,r]),A.useEffect(()=>{n&&F!==null&&F.setOptions(n)},[F,n]),A.useEffect(()=>{if(u&&F!==null){var Ee=u instanceof google.maps.LatLng?u:new google.maps.LatLng(u.lat,u.lng);F.setPosition(Ee)}},[u]),A.useEffect(()=>{typeof h=="number"&&F!==null&&F.setZIndex(h)},[h]),A.useEffect(()=>{F&&d&&(D!==null&&google.maps.event.removeListener(D),H(google.maps.event.addListener(F,"closeclick",d)))},[d]),A.useEffect(()=>{F&&o&&(Q!==null&&google.maps.event.removeListener(Q),te(google.maps.event.addListener(F,"domready",o)))},[o]),A.useEffect(()=>{F&&_&&(ie!==null&&google.maps.event.removeListener(ie),ae(google.maps.event.addListener(F,"content_changed",_)))},[_]),A.useEffect(()=>{F&&P&&(he!==null&&google.maps.event.removeListener(he),re(google.maps.event.addListener(F,"position_changed",P)))},[P]),A.useEffect(()=>{F&&S&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(F,"zindex_changed",S)))},[S]),A.useEffect(()=>{if(z){var Ee=n||cX,{position:Ne}=Ee,Xe=MC(Ee,lX),ut;Ne&&!(Ne instanceof google.maps.LatLng)&&(ut=new google.maps.LatLng(Ne.lat,Ne.lng));var pt=new rF(db(db({},Xe),ut?{position:ut}:{}));$e.current=document.createElement("div"),B(pt),d&&H(google.maps.event.addListener(pt,"closeclick",d)),o&&te(google.maps.event.addListener(pt,"domready",o)),_&&ae(google.maps.event.addListener(pt,"content_changed",_)),P&&re(google.maps.event.addListener(pt,"position_changed",P)),S&&xe(google.maps.event.addListener(pt,"zindex_changed",S)),pt.setContent($e.current),r?pt.open(z,r):pt.getPosition()?pt.open(z):Za(!1,"You must provide either an anchor or a position prop for <InfoBox>."),M&&M(pt)}return()=>{F!==null&&(D&&google.maps.event.removeListener(D),ie&&google.maps.event.removeListener(ie),Q&&google.maps.event.removeListener(Q),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),O&&O(F),F.close())}},[]),$e.current?Cc.createPortal(A.Children.only(t),$e.current):null}A.memo(hX);class dX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",null),jt(this,"state",{infoBox:null}),jt(this,"open",(t,r)=>{r?this.context!==null&&t.open(this.context,r):t.getPosition()?this.context!==null&&t.open(this.context):Za(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),jt(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var t=this.props.options||{},{position:r}=t,n=MC(t,uX),u;r&&!(r instanceof google.maps.LatLng)&&(u=new google.maps.LatLng(r.lat,r.lng));var h=new rF(db(db({},n),u?{position:u}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=xn({updaterMap:WI,eventMap:GI,prevProps:{},nextProps:this.props,instance:h}),this.setState({infoBox:h},this.setInfoBoxCallback)}componentDidUpdate(t){var{infoBox:r}=this.state;r!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:WI,eventMap:GI,prevProps:t,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:t}=this.props,{infoBox:r}=this.state;r!==null&&(t&&t(r),Cn(this.registeredEvents),r.close())}render(){return this.containerElement?Cc.createPortal(A.Children.only(this.props.children),this.containerElement):null}}jt(dX,"contextType",on);var IS,HI;function fX(){return HI||(HI=1,IS=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,u,h;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(u=n;u--!==0;)if(!e(t[u],r[u]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(h=Object.keys(t),n=h.length,n!==Object.keys(r).length)return!1;for(u=n;u--!==0;)if(!Object.prototype.hasOwnProperty.call(r,h[u]))return!1;for(u=n;u--!==0;){var d=h[u];if(!e(t[d],r[d]))return!1}return!0}return t!==t&&r!==r}),IS}var pX=fX(),ZI=ZN(pX),KI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],OS=1,Fv=8;class kC{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,n]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var u=n>>4;if(u!==OS)throw new Error("Got v".concat(u," data when expected v").concat(OS,"."));var h=KI[n&15];if(!h)throw new Error("Unrecognized array type.");var[d]=new Uint16Array(t,2,1),[o]=new Uint32Array(t,4,1);return new kC(o,d,h,t)}constructor(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,u=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var h=KI.indexOf(this.ArrayType),d=t*2*this.ArrayType.BYTES_PER_ELEMENT,o=t*this.IndexArrayType.BYTES_PER_ELEMENT,_=(8-o%8)%8;if(h<0)throw new Error("Unexpected typed array class: ".concat(n,"."));u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,Fv,t),this.coords=new this.ArrayType(this.data,Fv+o+_,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(Fv+d+o+_),this.ids=new this.IndexArrayType(this.data,Fv,t),this.coords=new this.ArrayType(this.data,Fv+o+_,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(OS<<4)+h]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=r,n}finish(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return Q2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,n,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:h,coords:d,nodeSize:o}=this,_=[0,h.length-1,0],P=[];_.length;){var S=_.pop()||0,M=_.pop()||0,O=_.pop()||0;if(M-O<=o){for(var z=O;z<=M;z++){var F=d[2*z],B=d[2*z+1];F>=t&&F<=n&&B>=r&&B<=u&&P.push(h[z])}continue}var D=O+M>>1,H=d[2*D],Q=d[2*D+1];H>=t&&H<=n&&Q>=r&&Q<=u&&P.push(h[D]),(S===0?t<=H:r<=Q)&&(_.push(O),_.push(D-1),_.push(1-S)),(S===0?n>=H:u>=Q)&&(_.push(D+1),_.push(M),_.push(1-S))}return P}within(t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:u,coords:h,nodeSize:d}=this,o=[0,u.length-1,0],_=[],P=n*n;o.length;){var S=o.pop()||0,M=o.pop()||0,O=o.pop()||0;if(M-O<=d){for(var z=O;z<=M;z++)XI(h[2*z],h[2*z+1],t,r)<=P&&_.push(u[z]);continue}var F=O+M>>1,B=h[2*F],D=h[2*F+1];XI(B,D,t,r)<=P&&_.push(u[F]),(S===0?t-n<=B:r-n<=D)&&(o.push(O),o.push(F-1),o.push(1-S)),(S===0?t+n>=B:r+n>=D)&&(o.push(F+1),o.push(M),o.push(1-S))}return _}}function Q2(e,t,r,n,u,h){if(!(u-n<=r)){var d=n+u>>1;nF(e,t,d,n,u,h),Q2(e,t,r,n,d-1,1-h),Q2(e,t,r,d+1,u,1-h)}}function nF(e,t,r,n,u,h){for(;u>n;){if(u-n>600){var d=u-n+1,o=r-n+1,_=Math.log(d),P=.5*Math.exp(2*_/3),S=.5*Math.sqrt(_*P*(d-P)/d)*(o-d/2<0?-1:1),M=Math.max(n,Math.floor(r-o*P/d+S)),O=Math.min(u,Math.floor(r+(d-o)*P/d+S));nF(e,t,r,M,O,h)}var z=t[2*r+h],F=n,B=u;for(Bv(e,t,n,r),t[2*u+h]>z&&Bv(e,t,n,u);F<B;){for(Bv(e,t,F,B),F++,B--;t[2*F+h]<z;)F++;for(;t[2*B+h]>z;)B--}t[2*n+h]===z?Bv(e,t,n,B):(B++,Bv(e,t,B,u)),B<=r&&(n=B+1),r<=B&&(u=B-1)}}function Bv(e,t,r,n){LS(e,r,n),LS(t,2*r,2*n),LS(t,2*r+1,2*n+1)}function LS(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function XI(e,t,r,n){var u=e-r,h=t-n;return u*u+h*h}var mX={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},YI=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),wm=2,Yf=3,DS=4,Xf=5,iF=6;class gX{constructor(t){this.options=Object.assign(Object.create(mX),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){var{log:r,minZoom:n,maxZoom:u}=this.options;r&&console.time("total time");var h="prepare ".concat(t.length," points");r&&console.time(h),this.points=t;for(var d=[],o=0;o<t.length;o++){var _=t[o];if(_.geometry){var[P,S]=_.geometry.coordinates,M=YI(hx(P)),O=YI(dx(S));d.push(M,O,1/0,o,-1,1),this.options.reduce&&d.push(0)}}var z=this.trees[u+1]=this._createTree(d);r&&console.timeEnd(h);for(var F=u;F>=n;F--){var B=+Date.now();z=this.trees[F]=this._createTree(this._cluster(z,F)),r&&console.log("z%d: %d clusters in %dms",F,z.numItems,+Date.now()-B)}return r&&console.timeEnd("total time"),this}getClusters(t,r){var n=((t[0]+180)%360+360)%360-180,u=Math.max(-90,Math.min(90,t[1])),h=t[2]===180?180:((t[2]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,h=180;else if(n>h){var o=this.getClusters([n,u,180,d],r),_=this.getClusters([-180,u,h,d],r);return o.concat(_)}var P=this.trees[this._limitZoom(r)],S=P.range(hx(n),dx(d),hx(h),dx(u)),M=P.data,O=[];for(var z of S){var F=this.stride*z;O.push(M[F+Xf]>1?QI(M,F,this.clusterProps):this.points[M[F+Yf]])}return O}getChildren(t){var r=this._getOriginId(t),n=this._getOriginZoom(t),u="No cluster with the specified id.",h=this.trees[n];if(!h)throw new Error(u);var d=h.data;if(r*this.stride>=d.length)throw new Error(u);var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),_=d[r*this.stride],P=d[r*this.stride+1],S=h.within(_,P,o),M=[];for(var O of S){var z=O*this.stride;d[z+DS]===t&&M.push(d[z+Xf]>1?QI(d,z,this.clusterProps):this.points[d[z+Yf]])}if(M.length===0)throw new Error(u);return M}getLeaves(t,r,n){r=r||10,n=n||0;var u=[];return this._appendLeaves(u,t,r,n,0),u}getTile(t,r,n){var u=this.trees[this._limitZoom(t)],h=Math.pow(2,t),{extent:d,radius:o}=this.options,_=o/d,P=(n-_)/h,S=(n+1+_)/h,M={features:[]};return this._addTileFeatures(u.range((r-_)/h,P,(r+1+_)/h,S),u.data,r,n,h,M),r===0&&this._addTileFeatures(u.range(1-_/h,P,1,S),u.data,h,n,h,M),r===h-1&&this._addTileFeatures(u.range(0,P,_/h,S),u.data,-1,n,h,M),M.features.length?M:null}getClusterExpansionZoom(t){for(var r=this._getOriginZoom(t)-1;r<=this.options.maxZoom;){var n=this.getChildren(t);if(r++,n.length!==1)break;t=n[0].properties.cluster_id}return r}_appendLeaves(t,r,n,u,h){var d=this.getChildren(r);for(var o of d){var _=o.properties;if(_&&_.cluster?h+_.point_count<=u?h+=_.point_count:h=this._appendLeaves(t,_.cluster_id,n,u,h):h<u?h++:t.push(o),t.length===n)break}return h}_createTree(t){for(var r=new kC(t.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<t.length;n+=this.stride)r.add(t[n],t[n+1]);return r.finish(),r.data=t,r}_addTileFeatures(t,r,n,u,h,d){for(var o of t){var _=o*this.stride,P=r[_+Xf]>1,S=void 0,M=void 0,O=void 0;if(P)S=aF(r,_,this.clusterProps),M=r[_],O=r[_+1];else{var z=this.points[r[_+Yf]];S=z.properties;var[F,B]=z.geometry.coordinates;M=hx(F),O=dx(B)}var D={type:1,geometry:[[Math.round(this.options.extent*(M*h-n)),Math.round(this.options.extent*(O*h-u))]],tags:S},H=void 0;P||this.options.generateId?H=r[_+Yf]:H=this.points[r[_+Yf]].id,H!==void 0&&(D.id=H),d.features.push(D)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,r){for(var{radius:n,extent:u,reduce:h,minPoints:d}=this.options,o=n/(u*Math.pow(2,r)),_=t.data,P=[],S=this.stride,M=0;M<_.length;M+=S)if(!(_[M+wm]<=r)){_[M+wm]=r;var O=_[M],z=_[M+1],F=t.within(_[M],_[M+1],o),B=_[M+Xf],D=B;for(var H of F){var Q=H*S;_[Q+wm]>r&&(D+=_[Q+Xf])}if(D>B&&D>=d){var te=O*B,ie=z*B,ae=void 0,he=-1,re=((M/S|0)<<5)+(r+1)+this.points.length;for(var be of F){var xe=be*S;if(!(_[xe+wm]<=r)){_[xe+wm]=r;var $e=_[xe+Xf];te+=_[xe]*$e,ie+=_[xe+1]*$e,_[xe+DS]=re,h&&(ae||(ae=this._map(_,M,!0),he=this.clusterProps.length,this.clusterProps.push(ae)),h(ae,this._map(_,xe)))}}_[M+DS]=re,P.push(te/D,ie/D,1/0,re,-1,D),h&&P.push(he)}else{for(var Ee=0;Ee<S;Ee++)P.push(_[M+Ee]);if(D>1)for(var Ne of F){var Xe=Ne*S;if(!(_[Xe+wm]<=r)){_[Xe+wm]=r;for(var ut=0;ut<S;ut++)P.push(_[Xe+ut])}}}}return P}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,r,n){if(t[r+Xf]>1){var u=this.clusterProps[t[r+iF]];return n?Object.assign({},u):u}var h=this.points[t[r+Yf]].properties,d=this.options.map(h);return n&&d===h?Object.assign({},d):d}}function QI(e,t,r){return{type:"Feature",id:e[t+Yf],properties:aF(e,t,r),geometry:{type:"Point",coordinates:[yX(e[t]),vX(e[t+1])]}}}function aF(e,t,r){var n=e[t+Xf],u=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,h=e[t+iF],d=h===-1?{}:Object.assign({},r[h]);return Object.assign(d,{cluster:!0,cluster_id:e[t+Yf],point_count:n,point_count_abbreviated:u})}function hx(e){return e/360+.5}function dx(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function yX(e){return(e-.5)*360}function vX(e){var t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _X(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(r[n[u]]=e[n[u]]);return r}class Cl{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,r){this.isAdvancedMarker(t)?t.map=r:t.setMap(r)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class J2{constructor(t){var{markers:r,position:n}=t;this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var t=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)t.extend(Cl.getPosition(r));return t}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>Cl.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(Cl.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class xX{constructor(t){var{maxZoom:r=16}=t;this.maxZoom=r}noop(t){var{markers:r}=t;return bX(r)}}var bX=e=>{var t=e.map(r=>new J2({position:Cl.getPosition(r),markers:[r]}));return t};class wX extends xX{constructor(t){var{maxZoom:r,radius:n=60}=t,u=_X(t,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new gX(Object.assign({maxZoom:this.maxZoom,radius:n},u))}calculate(t){var r=!1,n={zoom:t.map.getZoom()};if(!ZI(t.markers,this.markers)){r=!0,this.markers=[...t.markers];var u=this.markers.map(h=>{var d=Cl.getPosition(h),o=[d.lng(),d.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:o},properties:{marker:h}}});this.superCluster.load(u)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!ZI(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:r}}cluster(t){var{map:r}=t;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(n=>this.transformCluster(n))}transformCluster(t){var{geometry:{coordinates:[r,n]},properties:u}=t;if(u.cluster)return new J2({markers:this.superCluster.getLeaves(u.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:n,lng:r}});var h=u.marker;return new J2({markers:[h],position:Cl.getPosition(h)})}}class SX{constructor(t,r){this.markers={sum:t.length};var n=r.map(h=>h.count),u=n.reduce((h,d)=>h+d,0);this.clusters={count:r.length,markers:{mean:u/r.length,sum:u,min:Math.min(...n),max:Math.max(...n)}}}}class PX{render(t,r,n){var{count:u,position:h}=t,d=u>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(d,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(u,`</text>
</svg>`),_="Cluster of ".concat(u," markers"),P=Number(google.maps.Marker.MAX_ZINDEX)+u;if(Cl.isAdvancedMarkerAvailable(n)){var S=new DOMParser,M=S.parseFromString(o,"image/svg+xml").documentElement;M.setAttribute("transform","translate(0 25)");var O={map:n,position:h,zIndex:P,title:_,content:M};return new google.maps.marker.AdvancedMarkerElement(O)}var z={position:h,zIndex:P,title:_,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(z)}}function EX(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}class AC{constructor(){EX(AC,google.maps.OverlayView)}}var r_;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"})(r_||(r_={}));var CX=(e,t,r)=>{r.fitBounds(t.bounds)};class TX extends AC{constructor(t){var{map:r,markers:n=[],algorithmOptions:u={},algorithm:h=new wX(u),renderer:d=new PX,onClusterClick:o=CX}=t;super(),this.markers=[...n],this.clusters=[],this.algorithm=h,this.renderer=d,this.onClusterClick=o,r&&this.setMap(r)}addMarker(t,r){this.markers.includes(t)||(this.markers.push(t),r||this.render())}addMarkers(t,r){t.forEach(n=>{this.addMarker(n,!0)}),r||this.render()}removeMarker(t,r){var n=this.markers.indexOf(t);return n===-1?!1:(Cl.setMap(t,null),this.markers.splice(n,1),r||this.render(),!0)}removeMarkers(t,r){var n=!1;return t.forEach(u=>{n=this.removeMarker(u,!0)||n}),n&&!r&&this.render(),n}clearMarkers(t){this.markers.length=0,t||this.render()}render(){var t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,r_.CLUSTERING_BEGIN,this);var{clusters:r,changed:n}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(n||n==null){var u=new Set;for(var h of r)h.markers.length==1&&u.add(h.markers[0]);var d=[];for(var o of this.clusters)o.marker!=null&&(o.markers.length==1?u.has(o.marker)||Cl.setMap(o.marker,null):d.push(o.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>d.forEach(_=>Cl.setMap(_,null)))}google.maps.event.trigger(this,r_.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>Cl.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){var t=new SX(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,t,r),n.markers.forEach(u=>Cl.setMap(u,null)),this.onClusterClick&&n.marker.addListener("click",u=>{google.maps.event.trigger(this,r_.CLUSTER_CLICK,n),this.onClusterClick(u,n,r)})),Cl.setMap(n.marker,r)})}}function JI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MX(e){var t=TK(),[r,n]=A.useState(null);return A.useEffect(()=>{if(t&&r===null){var u=new TX(eO(eO({},e),{},{map:t}));n(u)}},[t]),r}function kX(e){var{children:t,options:r}=e,n=MX(r);return n!==null?t(n):null}A.memo(kX);var tO={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},rO={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};function AX(e){var{children:t,anchor:r,options:n,position:u,zIndex:h,onCloseClick:d,onDomReady:o,onContentChanged:_,onPositionChanged:P,onZindexChanged:S,onLoad:M,onUnmount:O}=e,z=A.useContext(on),[F,B]=A.useState(null),[D,H]=A.useState(null),[Q,te]=A.useState(null),[ie,ae]=A.useState(null),[he,re]=A.useState(null),[be,xe]=A.useState(null),$e=A.useRef(null);return A.useEffect(()=>{F!==null&&(F.close(),r?F.open(z,r):F.getPosition()&&F.open(z))},[z,F,r]),A.useEffect(()=>{n&&F!==null&&F.setOptions(n)},[F,n]),A.useEffect(()=>{u&&F!==null&&F.setPosition(u)},[u]),A.useEffect(()=>{typeof h=="number"&&F!==null&&F.setZIndex(h)},[h]),A.useEffect(()=>{F&&d&&(D!==null&&google.maps.event.removeListener(D),H(google.maps.event.addListener(F,"closeclick",d)))},[d]),A.useEffect(()=>{F&&o&&(Q!==null&&google.maps.event.removeListener(Q),te(google.maps.event.addListener(F,"domready",o)))},[o]),A.useEffect(()=>{F&&_&&(ie!==null&&google.maps.event.removeListener(ie),ae(google.maps.event.addListener(F,"content_changed",_)))},[_]),A.useEffect(()=>{F&&P&&(he!==null&&google.maps.event.removeListener(he),re(google.maps.event.addListener(F,"position_changed",P)))},[P]),A.useEffect(()=>{F&&S&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(F,"zindex_changed",S)))},[S]),A.useEffect(()=>{var Ee=new google.maps.InfoWindow(n);return B(Ee),$e.current=document.createElement("div"),d&&H(google.maps.event.addListener(Ee,"closeclick",d)),o&&te(google.maps.event.addListener(Ee,"domready",o)),_&&ae(google.maps.event.addListener(Ee,"content_changed",_)),P&&re(google.maps.event.addListener(Ee,"position_changed",P)),S&&xe(google.maps.event.addListener(Ee,"zindex_changed",S)),Ee.setContent($e.current),u&&Ee.setPosition(u),h&&Ee.setZIndex(h),r?Ee.open(z,r):Ee.getPosition()?Ee.open(z):Za(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),M&&M(Ee),()=>{D&&google.maps.event.removeListener(D),ie&&google.maps.event.removeListener(ie),Q&&google.maps.event.removeListener(Q),he&&google.maps.event.removeListener(he),be&&google.maps.event.removeListener(be),O&&O(Ee),Ee.close()}},[]),$e.current?Cc.createPortal(A.Children.only(t),$e.current):null}A.memo(AX);class IX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",null),jt(this,"state",{infoWindow:null}),jt(this,"open",(t,r)=>{r?t.open(this.context,r):t.getPosition()?t.open(this.context):Za(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),jt(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var t=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=xn({updaterMap:rO,eventMap:tO,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({infoWindow:t}),this.setInfoWindowCallback)}componentDidUpdate(t){this.state.infoWindow!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:rO,eventMap:tO,prevProps:t,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Cn(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Cc.createPortal(A.Children.only(this.props.children),this.containerElement):null}}jt(IX,"contextType",on);function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var iO={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},aO={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},OX={};function LX(e){var{options:t,draggable:r,editable:n,visible:u,path:h,onDblClick:d,onDragEnd:o,onDragStart:_,onMouseDown:P,onMouseMove:S,onMouseOut:M,onMouseOver:O,onMouseUp:z,onRightClick:F,onClick:B,onDrag:D,onLoad:H,onUnmount:Q}=e,te=A.useContext(on),[ie,ae]=A.useState(null),[he,re]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null);return A.useEffect(()=>{ie!==null&&ie.setMap(te)},[te]),A.useEffect(()=>{typeof t<"u"&&ie!==null&&ie.setOptions(t)},[ie,t]),A.useEffect(()=>{typeof r<"u"&&ie!==null&&ie.setDraggable(r)},[ie,r]),A.useEffect(()=>{typeof n<"u"&&ie!==null&&ie.setEditable(n)},[ie,n]),A.useEffect(()=>{typeof u<"u"&&ie!==null&&ie.setVisible(u)},[ie,u]),A.useEffect(()=>{typeof h<"u"&&ie!==null&&ie.setPath(h)},[ie,h]),A.useEffect(()=>{ie&&d&&(he!==null&&google.maps.event.removeListener(he),re(google.maps.event.addListener(ie,"dblclick",d)))},[d]),A.useEffect(()=>{ie&&o&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(ie,"dragend",o)))},[o]),A.useEffect(()=>{ie&&_&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(ie,"dragstart",_)))},[_]),A.useEffect(()=>{ie&&P&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(ie,"mousedown",P)))},[P]),A.useEffect(()=>{ie&&S&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(ie,"mousemove",S)))},[S]),A.useEffect(()=>{ie&&M&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(ie,"mouseout",M)))},[M]),A.useEffect(()=>{ie&&O&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(ie,"mouseover",O)))},[O]),A.useEffect(()=>{ie&&z&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(ie,"mouseup",z)))},[z]),A.useEffect(()=>{ie&&F&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(ie,"rightclick",F)))},[F]),A.useEffect(()=>{ie&&B&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(ie,"click",B)))},[B]),A.useEffect(()=>{ie&&D&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(ie,"drag",D)))},[D]),A.useEffect(()=>{var $t=new google.maps.Polyline(fb(fb({},t||OX),{},{map:te}));return h&&$t.setPath(h),typeof u<"u"&&$t.setVisible(u),typeof n<"u"&&$t.setEditable(n),typeof r<"u"&&$t.setDraggable(r),d&&re(google.maps.event.addListener($t,"dblclick",d)),o&&xe(google.maps.event.addListener($t,"dragend",o)),_&&Ee(google.maps.event.addListener($t,"dragstart",_)),P&&Xe(google.maps.event.addListener($t,"mousedown",P)),S&&pt(google.maps.event.addListener($t,"mousemove",S)),M&&wt(google.maps.event.addListener($t,"mouseout",M)),O&&Qe(google.maps.event.addListener($t,"mouseover",O)),z&&Oe(google.maps.event.addListener($t,"mouseup",z)),F&&Mt(google.maps.event.addListener($t,"rightclick",F)),B&&Ke(google.maps.event.addListener($t,"click",B)),D&&Ft(google.maps.event.addListener($t,"drag",D)),ae($t),H&&H($t),()=>{he!==null&&google.maps.event.removeListener(he),be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),Q&&Q($t),$t.setMap(null)}},[]),null}A.memo(LX);class DX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{polyline:null}),jt(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var t=new google.maps.Polyline(fb(fb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:aO,eventMap:iO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{polyline:t}},this.setPolylineCallback)}componentDidUpdate(t){this.state.polyline!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:aO,eventMap:iO,prevProps:t,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Cn(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}jt(DX,"contextType",on);function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function sO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var lO={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},uO={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};function RX(e){var{options:t,draggable:r,editable:n,visible:u,path:h,paths:d,onDblClick:o,onDragEnd:_,onDragStart:P,onMouseDown:S,onMouseMove:M,onMouseOut:O,onMouseOver:z,onMouseUp:F,onRightClick:B,onClick:D,onDrag:H,onLoad:Q,onUnmount:te,onEdit:ie}=e,ae=A.useContext(on),[he,re]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null);return A.useEffect(()=>{he!==null&&he.setMap(ae)},[ae]),A.useEffect(()=>{typeof t<"u"&&he!==null&&he.setOptions(t)},[he,t]),A.useEffect(()=>{typeof r<"u"&&he!==null&&he.setDraggable(r)},[he,r]),A.useEffect(()=>{typeof n<"u"&&he!==null&&he.setEditable(n)},[he,n]),A.useEffect(()=>{typeof u<"u"&&he!==null&&he.setVisible(u)},[he,u]),A.useEffect(()=>{typeof h<"u"&&he!==null&&he.setPath(h)},[he,h]),A.useEffect(()=>{typeof d<"u"&&he!==null&&he.setPaths(d)},[he,d]),A.useEffect(()=>{he&&typeof o=="function"&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(he,"dblclick",o)))},[o]),A.useEffect(()=>{he&&(google.maps.event.addListener(he.getPath(),"insert_at",()=>{ie==null||ie(he)}),google.maps.event.addListener(he.getPath(),"set_at",()=>{ie==null||ie(he)}),google.maps.event.addListener(he.getPath(),"remove_at",()=>{ie==null||ie(he)}))},[he,ie]),A.useEffect(()=>{he&&typeof _=="function"&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(he,"dragend",_)))},[_]),A.useEffect(()=>{he&&typeof P=="function"&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(he,"dragstart",P)))},[P]),A.useEffect(()=>{he&&typeof S=="function"&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(he,"mousedown",S)))},[S]),A.useEffect(()=>{he&&typeof M=="function"&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(he,"mousemove",M)))},[M]),A.useEffect(()=>{he&&typeof O=="function"&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(he,"mouseout",O)))},[O]),A.useEffect(()=>{he&&typeof z=="function"&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(he,"mouseover",z)))},[z]),A.useEffect(()=>{he&&typeof F=="function"&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(he,"mouseup",F)))},[F]),A.useEffect(()=>{he&&typeof B=="function"&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(he,"rightclick",B)))},[B]),A.useEffect(()=>{he&&typeof D=="function"&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(he,"click",D)))},[D]),A.useEffect(()=>{he&&typeof H=="function"&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(he,"drag",H)))},[H]),A.useEffect(()=>{var Lt=new google.maps.Polygon(sO(sO({},t),{},{map:ae}));return h&&Lt.setPath(h),d&&Lt.setPaths(d),typeof u<"u"&&Lt.setVisible(u),typeof n<"u"&&Lt.setEditable(n),typeof r<"u"&&Lt.setDraggable(r),o&&xe(google.maps.event.addListener(Lt,"dblclick",o)),_&&Ee(google.maps.event.addListener(Lt,"dragend",_)),P&&Xe(google.maps.event.addListener(Lt,"dragstart",P)),S&&pt(google.maps.event.addListener(Lt,"mousedown",S)),M&&wt(google.maps.event.addListener(Lt,"mousemove",M)),O&&Qe(google.maps.event.addListener(Lt,"mouseout",O)),z&&Oe(google.maps.event.addListener(Lt,"mouseover",z)),F&&Mt(google.maps.event.addListener(Lt,"mouseup",F)),B&&Ke(google.maps.event.addListener(Lt,"rightclick",B)),D&&Ft(google.maps.event.addListener(Lt,"click",D)),H&&ct(google.maps.event.addListener(Lt,"drag",H)),re(Lt),Q&&Q(Lt),()=>{be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),tr!==null&&google.maps.event.removeListener(tr),te&&te(Lt),Lt.setMap(null)}},[]),null}A.memo(RX);class jX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[])}componentDidMount(){var t=this.props.options||{};this.polygon=new google.maps.Polygon(t),this.polygon.setMap(this.context),this.registeredEvents=xn({updaterMap:uO,eventMap:lO,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(t){this.polygon&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:uO,eventMap:lO,prevProps:t,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Cn(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}jt(jX,"contextType",on);function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var hO={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},dO={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};function zX(e){var{options:t,bounds:r,draggable:n,editable:u,visible:h,onDblClick:d,onDragEnd:o,onDragStart:_,onMouseDown:P,onMouseMove:S,onMouseOut:M,onMouseOver:O,onMouseUp:z,onRightClick:F,onClick:B,onDrag:D,onBoundsChanged:H,onLoad:Q,onUnmount:te}=e,ie=A.useContext(on),[ae,he]=A.useState(null),[re,be]=A.useState(null),[xe,$e]=A.useState(null),[Ee,Ne]=A.useState(null),[Xe,ut]=A.useState(null),[pt,gt]=A.useState(null),[wt,je]=A.useState(null),[Qe,yt]=A.useState(null),[Oe,et]=A.useState(null),[Mt,Dt]=A.useState(null),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null);return A.useEffect(()=>{ae!==null&&ae.setMap(ie)},[ie]),A.useEffect(()=>{typeof t<"u"&&ae!==null&&ae.setOptions(t)},[ae,t]),A.useEffect(()=>{typeof n<"u"&&ae!==null&&ae.setDraggable(n)},[ae,n]),A.useEffect(()=>{typeof u<"u"&&ae!==null&&ae.setEditable(u)},[ae,u]),A.useEffect(()=>{typeof h<"u"&&ae!==null&&ae.setVisible(h)},[ae,h]),A.useEffect(()=>{typeof r<"u"&&ae!==null&&ae.setBounds(r)},[ae,r]),A.useEffect(()=>{ae&&d&&(re!==null&&google.maps.event.removeListener(re),be(google.maps.event.addListener(ae,"dblclick",d)))},[d]),A.useEffect(()=>{ae&&o&&(xe!==null&&google.maps.event.removeListener(xe),$e(google.maps.event.addListener(ae,"dragend",o)))},[o]),A.useEffect(()=>{ae&&_&&(Ee!==null&&google.maps.event.removeListener(Ee),Ne(google.maps.event.addListener(ae,"dragstart",_)))},[_]),A.useEffect(()=>{ae&&P&&(Xe!==null&&google.maps.event.removeListener(Xe),ut(google.maps.event.addListener(ae,"mousedown",P)))},[P]),A.useEffect(()=>{ae&&S&&(pt!==null&&google.maps.event.removeListener(pt),gt(google.maps.event.addListener(ae,"mousemove",S)))},[S]),A.useEffect(()=>{ae&&M&&(wt!==null&&google.maps.event.removeListener(wt),je(google.maps.event.addListener(ae,"mouseout",M)))},[M]),A.useEffect(()=>{ae&&O&&(Qe!==null&&google.maps.event.removeListener(Qe),yt(google.maps.event.addListener(ae,"mouseover",O)))},[O]),A.useEffect(()=>{ae&&z&&(Oe!==null&&google.maps.event.removeListener(Oe),et(google.maps.event.addListener(ae,"mouseup",z)))},[z]),A.useEffect(()=>{ae&&F&&(Mt!==null&&google.maps.event.removeListener(Mt),Dt(google.maps.event.addListener(ae,"rightclick",F)))},[F]),A.useEffect(()=>{ae&&B&&(Ke!==null&&google.maps.event.removeListener(Ke),tr(google.maps.event.addListener(ae,"click",B)))},[B]),A.useEffect(()=>{ae&&D&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(ae,"drag",D)))},[D]),A.useEffect(()=>{ae&&H&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(ae,"bounds_changed",H)))},[H]),A.useEffect(()=>{var ir=new google.maps.Rectangle(pb(pb({},t),{},{map:ie}));return typeof h<"u"&&ir.setVisible(h),typeof u<"u"&&ir.setEditable(u),typeof n<"u"&&ir.setDraggable(n),typeof r<"u"&&ir.setBounds(r),d&&be(google.maps.event.addListener(ir,"dblclick",d)),o&&$e(google.maps.event.addListener(ir,"dragend",o)),_&&Ne(google.maps.event.addListener(ir,"dragstart",_)),P&&ut(google.maps.event.addListener(ir,"mousedown",P)),S&&gt(google.maps.event.addListener(ir,"mousemove",S)),M&&je(google.maps.event.addListener(ir,"mouseout",M)),O&&yt(google.maps.event.addListener(ir,"mouseover",O)),z&&et(google.maps.event.addListener(ir,"mouseup",z)),F&&Dt(google.maps.event.addListener(ir,"rightclick",F)),B&&tr(google.maps.event.addListener(ir,"click",B)),D&&$t(google.maps.event.addListener(ir,"drag",D)),H&&Lt(google.maps.event.addListener(ir,"bounds_changed",H)),he(ir),Q&&Q(ir),()=>{re!==null&&google.maps.event.removeListener(re),xe!==null&&google.maps.event.removeListener(xe),Ee!==null&&google.maps.event.removeListener(Ee),Xe!==null&&google.maps.event.removeListener(Xe),pt!==null&&google.maps.event.removeListener(pt),wt!==null&&google.maps.event.removeListener(wt),Qe!==null&&google.maps.event.removeListener(Qe),Oe!==null&&google.maps.event.removeListener(Oe),Mt!==null&&google.maps.event.removeListener(Mt),Ke!==null&&google.maps.event.removeListener(Ke),Ft!==null&&google.maps.event.removeListener(Ft),ct!==null&&google.maps.event.removeListener(ct),te&&te(ir),ir.setMap(null)}},[]),null}A.memo(zX);let NX=class extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{rectangle:null}),jt(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var t=new google.maps.Rectangle(pb(pb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:dO,eventMap:hO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{rectangle:t}},this.setRectangleCallback)}componentDidUpdate(t){this.state.rectangle!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:dO,eventMap:hO,prevProps:t,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Cn(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}};jt(NX,"contextType",on);function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function mb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var pO={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},mO={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},FX={};function BX(e){var{options:t,center:r,radius:n,draggable:u,editable:h,visible:d,onDblClick:o,onDragEnd:_,onDragStart:P,onMouseDown:S,onMouseMove:M,onMouseOut:O,onMouseOver:z,onMouseUp:F,onRightClick:B,onClick:D,onDrag:H,onCenterChanged:Q,onRadiusChanged:te,onLoad:ie,onUnmount:ae}=e,he=A.useContext(on),[re,be]=A.useState(null),[xe,$e]=A.useState(null),[Ee,Ne]=A.useState(null),[Xe,ut]=A.useState(null),[pt,gt]=A.useState(null),[wt,je]=A.useState(null),[Qe,yt]=A.useState(null),[Oe,et]=A.useState(null),[Mt,Dt]=A.useState(null),[Ke,tr]=A.useState(null),[Ft,$t]=A.useState(null),[ct,Lt]=A.useState(null),[ir,St]=A.useState(null),[Gr,Tr]=A.useState(null);return A.useEffect(()=>{re!==null&&re.setMap(he)},[he]),A.useEffect(()=>{typeof t<"u"&&re!==null&&re.setOptions(t)},[re,t]),A.useEffect(()=>{typeof u<"u"&&re!==null&&re.setDraggable(u)},[re,u]),A.useEffect(()=>{typeof h<"u"&&re!==null&&re.setEditable(h)},[re,h]),A.useEffect(()=>{typeof d<"u"&&re!==null&&re.setVisible(d)},[re,d]),A.useEffect(()=>{typeof n=="number"&&re!==null&&re.setRadius(n)},[re,n]),A.useEffect(()=>{typeof r<"u"&&re!==null&&re.setCenter(r)},[re,r]),A.useEffect(()=>{re&&o&&(xe!==null&&google.maps.event.removeListener(xe),$e(google.maps.event.addListener(re,"dblclick",o)))},[o]),A.useEffect(()=>{re&&_&&(Ee!==null&&google.maps.event.removeListener(Ee),Ne(google.maps.event.addListener(re,"dragend",_)))},[_]),A.useEffect(()=>{re&&P&&(Xe!==null&&google.maps.event.removeListener(Xe),ut(google.maps.event.addListener(re,"dragstart",P)))},[P]),A.useEffect(()=>{re&&S&&(pt!==null&&google.maps.event.removeListener(pt),gt(google.maps.event.addListener(re,"mousedown",S)))},[S]),A.useEffect(()=>{re&&M&&(wt!==null&&google.maps.event.removeListener(wt),je(google.maps.event.addListener(re,"mousemove",M)))},[M]),A.useEffect(()=>{re&&O&&(Qe!==null&&google.maps.event.removeListener(Qe),yt(google.maps.event.addListener(re,"mouseout",O)))},[O]),A.useEffect(()=>{re&&z&&(Oe!==null&&google.maps.event.removeListener(Oe),et(google.maps.event.addListener(re,"mouseover",z)))},[z]),A.useEffect(()=>{re&&F&&(Mt!==null&&google.maps.event.removeListener(Mt),Dt(google.maps.event.addListener(re,"mouseup",F)))},[F]),A.useEffect(()=>{re&&B&&(Ke!==null&&google.maps.event.removeListener(Ke),tr(google.maps.event.addListener(re,"rightclick",B)))},[B]),A.useEffect(()=>{re&&D&&(Ft!==null&&google.maps.event.removeListener(Ft),$t(google.maps.event.addListener(re,"click",D)))},[D]),A.useEffect(()=>{re&&H&&(ct!==null&&google.maps.event.removeListener(ct),Lt(google.maps.event.addListener(re,"drag",H)))},[H]),A.useEffect(()=>{re&&Q&&(ir!==null&&google.maps.event.removeListener(ir),St(google.maps.event.addListener(re,"center_changed",Q)))},[D]),A.useEffect(()=>{re&&te&&(Gr!==null&&google.maps.event.removeListener(Gr),Tr(google.maps.event.addListener(re,"radius_changed",te)))},[te]),A.useEffect(()=>{var wr=new google.maps.Circle(mb(mb({},t||FX),{},{map:he}));return typeof n=="number"&&wr.setRadius(n),typeof r<"u"&&wr.setCenter(r),typeof n=="number"&&wr.setRadius(n),typeof d<"u"&&wr.setVisible(d),typeof h<"u"&&wr.setEditable(h),typeof u<"u"&&wr.setDraggable(u),o&&$e(google.maps.event.addListener(wr,"dblclick",o)),_&&Ne(google.maps.event.addListener(wr,"dragend",_)),P&&ut(google.maps.event.addListener(wr,"dragstart",P)),S&&gt(google.maps.event.addListener(wr,"mousedown",S)),M&&je(google.maps.event.addListener(wr,"mousemove",M)),O&&yt(google.maps.event.addListener(wr,"mouseout",O)),z&&et(google.maps.event.addListener(wr,"mouseover",z)),F&&Dt(google.maps.event.addListener(wr,"mouseup",F)),B&&tr(google.maps.event.addListener(wr,"rightclick",B)),D&&$t(google.maps.event.addListener(wr,"click",D)),H&&Lt(google.maps.event.addListener(wr,"drag",H)),Q&&St(google.maps.event.addListener(wr,"center_changed",Q)),te&&Tr(google.maps.event.addListener(wr,"radius_changed",te)),be(wr),ie&&ie(wr),()=>{xe!==null&&google.maps.event.removeListener(xe),Ee!==null&&google.maps.event.removeListener(Ee),Xe!==null&&google.maps.event.removeListener(Xe),pt!==null&&google.maps.event.removeListener(pt),wt!==null&&google.maps.event.removeListener(wt),Qe!==null&&google.maps.event.removeListener(Qe),Oe!==null&&google.maps.event.removeListener(Oe),Mt!==null&&google.maps.event.removeListener(Mt),Ke!==null&&google.maps.event.removeListener(Ke),Ft!==null&&google.maps.event.removeListener(Ft),ir!==null&&google.maps.event.removeListener(ir),Gr!==null&&google.maps.event.removeListener(Gr),ae&&ae(wr),wr.setMap(null)}},[]),null}A.memo(BX);class VX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{circle:null}),jt(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var t=new google.maps.Circle(mb(mb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:mO,eventMap:pO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{circle:t}},this.setCircleCallback)}componentDidUpdate(t){this.state.circle!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:mO,eventMap:pO,prevProps:t,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var t;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Cn(this.registeredEvents),(t=this.state.circle)===null||t===void 0||t.setMap(null)}}render(){return null}}jt(VX,"contextType",on);function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function gb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var yO={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},vO={add(e,t){e.add(t)},addgeojson(e,t,r){e.addGeoJson(t,r)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,r,n){e.loadGeoJson(t,r,n)},overridestyle(e,t,r){e.overrideStyle(t,r)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};function $X(e){var{options:t,onClick:r,onDblClick:n,onMouseDown:u,onMouseMove:h,onMouseOut:d,onMouseOver:o,onMouseUp:_,onRightClick:P,onAddFeature:S,onRemoveFeature:M,onRemoveProperty:O,onSetGeometry:z,onSetProperty:F,onLoad:B,onUnmount:D}=e,H=A.useContext(on),[Q,te]=A.useState(null),[ie,ae]=A.useState(null),[he,re]=A.useState(null),[be,xe]=A.useState(null),[$e,Ee]=A.useState(null),[Ne,Xe]=A.useState(null),[ut,pt]=A.useState(null),[gt,wt]=A.useState(null),[je,Qe]=A.useState(null),[yt,Oe]=A.useState(null),[et,Mt]=A.useState(null),[Dt,Ke]=A.useState(null),[tr,Ft]=A.useState(null),[$t,ct]=A.useState(null);return A.useEffect(()=>{Q!==null&&Q.setMap(H)},[H]),A.useEffect(()=>{Q&&n&&(ie!==null&&google.maps.event.removeListener(ie),ae(google.maps.event.addListener(Q,"dblclick",n)))},[n]),A.useEffect(()=>{Q&&u&&(he!==null&&google.maps.event.removeListener(he),re(google.maps.event.addListener(Q,"mousedown",u)))},[u]),A.useEffect(()=>{Q&&h&&(be!==null&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(Q,"mousemove",h)))},[h]),A.useEffect(()=>{Q&&d&&($e!==null&&google.maps.event.removeListener($e),Ee(google.maps.event.addListener(Q,"mouseout",d)))},[d]),A.useEffect(()=>{Q&&o&&(Ne!==null&&google.maps.event.removeListener(Ne),Xe(google.maps.event.addListener(Q,"mouseover",o)))},[o]),A.useEffect(()=>{Q&&_&&(ut!==null&&google.maps.event.removeListener(ut),pt(google.maps.event.addListener(Q,"mouseup",_)))},[_]),A.useEffect(()=>{Q&&P&&(gt!==null&&google.maps.event.removeListener(gt),wt(google.maps.event.addListener(Q,"rightclick",P)))},[P]),A.useEffect(()=>{Q&&r&&(je!==null&&google.maps.event.removeListener(je),Qe(google.maps.event.addListener(Q,"click",r)))},[r]),A.useEffect(()=>{Q&&S&&(yt!==null&&google.maps.event.removeListener(yt),Oe(google.maps.event.addListener(Q,"addfeature",S)))},[S]),A.useEffect(()=>{Q&&M&&(et!==null&&google.maps.event.removeListener(et),Mt(google.maps.event.addListener(Q,"removefeature",M)))},[M]),A.useEffect(()=>{Q&&O&&(Dt!==null&&google.maps.event.removeListener(Dt),Ke(google.maps.event.addListener(Q,"removeproperty",O)))},[O]),A.useEffect(()=>{Q&&z&&(tr!==null&&google.maps.event.removeListener(tr),Ft(google.maps.event.addListener(Q,"setgeometry",z)))},[z]),A.useEffect(()=>{Q&&F&&($t!==null&&google.maps.event.removeListener($t),ct(google.maps.event.addListener(Q,"setproperty",F)))},[F]),A.useEffect(()=>{if(H!==null){var Lt=new google.maps.Data(gb(gb({},t),{},{map:H}));n&&ae(google.maps.event.addListener(Lt,"dblclick",n)),u&&re(google.maps.event.addListener(Lt,"mousedown",u)),h&&xe(google.maps.event.addListener(Lt,"mousemove",h)),d&&Ee(google.maps.event.addListener(Lt,"mouseout",d)),o&&Xe(google.maps.event.addListener(Lt,"mouseover",o)),_&&pt(google.maps.event.addListener(Lt,"mouseup",_)),P&&wt(google.maps.event.addListener(Lt,"rightclick",P)),r&&Qe(google.maps.event.addListener(Lt,"click",r)),S&&Oe(google.maps.event.addListener(Lt,"addfeature",S)),M&&Mt(google.maps.event.addListener(Lt,"removefeature",M)),O&&Ke(google.maps.event.addListener(Lt,"removeproperty",O)),z&&Ft(google.maps.event.addListener(Lt,"setgeometry",z)),F&&ct(google.maps.event.addListener(Lt,"setproperty",F)),te(Lt),B&&B(Lt)}return()=>{Q&&(ie!==null&&google.maps.event.removeListener(ie),he!==null&&google.maps.event.removeListener(he),be!==null&&google.maps.event.removeListener(be),$e!==null&&google.maps.event.removeListener($e),Ne!==null&&google.maps.event.removeListener(Ne),ut!==null&&google.maps.event.removeListener(ut),gt!==null&&google.maps.event.removeListener(gt),je!==null&&google.maps.event.removeListener(je),yt!==null&&google.maps.event.removeListener(yt),et!==null&&google.maps.event.removeListener(et),Dt!==null&&google.maps.event.removeListener(Dt),tr!==null&&google.maps.event.removeListener(tr),$t!==null&&google.maps.event.removeListener($t),D&&D(Q),Q.setMap(null))}},[]),null}A.memo($X);class UX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{data:null}),jt(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var t=new google.maps.Data(gb(gb({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:vO,eventMap:yO,prevProps:{},nextProps:this.props,instance:t}),this.setState(()=>({data:t}),this.setDataCallback)}}componentDidUpdate(t){this.state.data!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:vO,eventMap:yO,prevProps:t,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Cn(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}jt(UX,"contextType",on);function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var bO={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},wO={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class qX extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{kmlLayer:null}),jt(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var t=new google.maps.KmlLayer(xO(xO({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:wO,eventMap:bO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{kmlLayer:t}},this.setKmlLayerCallback)}componentDidUpdate(t){this.state.kmlLayer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:wO,eventMap:bO,prevProps:t,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Cn(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}jt(qX,"contextType",on);function oF(e,t){return typeof t=="function"?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function GX(e,t){return new t(e.lat,e.lng)}function WX(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function HX(e,t,r){return e instanceof t?e:r(e,t)}function ZX(e,t,r){return e instanceof t?e:r(e,t)}function KX(e,t,r){var n=e&&e.fromLatLngToDivPixel(r.getNorthEast()),u=e&&e.fromLatLngToDivPixel(r.getSouthWest());return n&&u?{left:"".concat(u.x+t.x,"px"),top:"".concat(n.y+t.y,"px"),width:"".concat(n.x-u.x-t.x,"px"),height:"".concat(u.y-n.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}function XX(e,t,r){var n=e&&e.fromLatLngToDivPixel(r);if(n){var{x:u,y:h}=n;return{left:"".concat(u+t.x,"px"),top:"".concat(h+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}function sF(e,t,r,n){return r!==void 0?KX(e,t,ZX(r,google.maps.LatLngBounds,WX)):XX(e,t,HX(n,google.maps.LatLng,GX))}function YX(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function QX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JX(e,t,r,n,u){class h extends google.maps.OverlayView{constructor(o,_,P,S){super(),this.container=o,this.pane=_,this.position=P,this.bounds=S}onAdd(){var o,_=(o=this.getPanes())===null||o===void 0?void 0:o[this.pane];_==null||_.appendChild(this.container)}draw(){var o=this.getProjection(),_=QX({},this.container?oF(this.container,u):{x:0,y:0}),P=sF(o,_,this.bounds,this.position);for(var[S,M]of Object.entries(P))this.container.style[S]=M}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new h(e,t,r,n)}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function eY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EO(e){if(!e)return"";var t=e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng);return t+""}function CO(e){if(!e)return"";var t=e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west));return t+""}function tY(e){var{position:t,bounds:r,mapPaneName:n,zIndex:u,onLoad:h,onUnmount:d,getPixelPositionOffset:o,children:_}=e,P=A.useContext(on),S=A.useMemo(()=>{var O=document.createElement("div");return O.style.position="absolute",O},[]),M=A.useMemo(()=>JX(S,n,t,r,o),[S,n,t,r]);return A.useEffect(()=>(h==null||h(M),M==null||M.setMap(P),()=>{d==null||d(M),M==null||M.setMap(null)}),[P,M]),A.useEffect(()=>{S.style.zIndex="".concat(u)},[u,S]),Cc.createPortal(_,S)}A.memo(tY);class Uy extends A.PureComponent{constructor(t){super(t),jt(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),jt(this,"updatePane",()=>{var n=this.props.mapPaneName,u=this.overlayView.getPanes();Za(!!n,"OverlayView requires props.mapPaneName but got %s",n),u?this.setState({paneEl:u[n]}):this.setState({paneEl:null})}),jt(this,"onAdd",()=>{var n,u;this.updatePane(),(n=(u=this.props).onLoad)===null||n===void 0||n.call(u,this.overlayView)}),jt(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),u=eY({x:0,y:0},this.containerRef.current?oF(this.containerRef.current,this.props.getPixelPositionOffset):{}),h=sF(n,u,this.props.bounds,this.props.position);if(!YX(h,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var d,o,_,P;this.setState({containerStyle:{top:(d=h.top)!==null&&d!==void 0?d:0,left:(o=h.left)!==null&&o!==void 0?o:0,width:(_=h.width)!==null&&_!==void 0?_:0,height:(P=h.height)!==null&&P!==void 0?P:0,position:"absolute"}})}}),jt(this,"draw",()=>{this.onPositionElement()}),jt(this,"onRemove",()=>{var n,u;this.setState(()=>({paneEl:null})),(n=(u=this.props).onUnmount)===null||n===void 0||n.call(u,this.overlayView)}),this.containerRef=A.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(t){var r=EO(t.position),n=EO(this.props.position),u=CO(t.bounds),h=CO(this.props.bounds);(r!==n||u!==h)&&this.overlayView.draw(),t.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var t=this.state.paneEl;return t?Cc.createPortal($.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:A.Children.only(this.props.children)}),t):null}}jt(Uy,"FLOAT_PANE","floatPane");jt(Uy,"MAP_PANE","mapPane");jt(Uy,"MARKER_LAYER","markerLayer");jt(Uy,"OVERLAY_LAYER","overlayLayer");jt(Uy,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");jt(Uy,"contextType",on);function rY(){}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var kO={onDblClick:"dblclick",onClick:"click"},AO={opacity(e,t){e.setOpacity(t)}};function nY(e){var{url:t,bounds:r,options:n,visible:u}=e,h=A.useContext(on),d=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),o=A.useMemo(()=>new google.maps.GroundOverlay(t,d,n),[]);return A.useEffect(()=>{o!==null&&o.setMap(h)},[h]),A.useEffect(()=>{typeof t<"u"&&o!==null&&(o.set("url",t),o.setMap(h))},[o,t]),A.useEffect(()=>{typeof u<"u"&&o!==null&&o.setOpacity(u?1:0)},[o,u]),A.useEffect(()=>{var _=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&o!==null&&(o.set("bounds",_),o.setMap(h))},[o,r]),null}A.memo(nY);class lF extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{groundOverlay:null}),jt(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Za(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var t=new google.maps.GroundOverlay(this.props.url,this.props.bounds,MO(MO({},this.props.options),{},{map:this.context}));this.registeredEvents=xn({updaterMap:AO,eventMap:kO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{groundOverlay:t}},this.setGroundOverlayCallback)}componentDidUpdate(t){this.state.groundOverlay!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:AO,eventMap:kO,prevProps:t,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}jt(lF,"defaultProps",{onLoad:rY});jt(lF,"contextType",on);function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var OO={},LO={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};function iY(e){var{data:t,onLoad:r,onUnmount:n,options:u}=e,h=A.useContext(on),[d,o]=A.useState(null);return A.useEffect(()=>{google.maps.visualization||Za(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),A.useEffect(()=>{Za(!!t,"data property is required in HeatmapLayer %s",t)},[t]),A.useEffect(()=>{d!==null&&d.setMap(h)},[h]),A.useEffect(()=>{u&&d!==null&&d.setOptions(u)},[d,u]),A.useEffect(()=>{var _=new google.maps.visualization.HeatmapLayer(yb(yb({},u),{},{data:t,map:h}));return o(_),r&&r(_),()=>{d!==null&&(n&&n(d),d.setMap(null))}},[]),null}A.memo(iY);class aY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{heatmapLayer:null}),jt(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Za(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Za(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var t=new google.maps.visualization.HeatmapLayer(yb(yb({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=xn({updaterMap:LO,eventMap:OO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{heatmapLayer:t}},this.setHeatmapLayerCallback)}componentDidUpdate(t){Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:LO,eventMap:OO,prevProps:t,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Cn(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}jt(aY,"contextType",on);var DO={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},RO={register(e,t,r){e.registerPanoProvider(t,r)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class oY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{streetViewPanorama:null}),jt(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var t,r,n=(t=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&t!==void 0?t:null;this.registeredEvents=xn({updaterMap:RO,eventMap:DO,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(t){this.state.streetViewPanorama!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:RO,eventMap:DO,prevProps:t,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Cn(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}jt(oY,"contextType",on);class sY extends A.PureComponent{constructor(){super(...arguments),jt(this,"state",{streetViewService:null}),jt(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var t=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:t}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}jt(sY,"contextType",on);var jO={onDirectionsChanged:"directions_changed"},zO={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class lY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"state",{directionsRenderer:null}),jt(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var t=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=xn({updaterMap:zO,eventMap:jO,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{directionsRenderer:t}},this.setDirectionsRendererCallback)}componentDidUpdate(t){this.state.directionsRenderer!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:zO,eventMap:jO,prevProps:t,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Cn(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}jt(lY,"contextType",on);var NO={onPlacesChanged:"places_changed"},FO={bounds(e,t){e.setBounds(t)}};class uY extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",A.createRef()),jt(this,"state",{searchBox:null}),jt(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Za(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var t=this.containerElement.current.querySelector("input");if(t!==null){var r=new google.maps.places.SearchBox(t,this.props.options);this.registeredEvents=xn({updaterMap:FO,eventMap:NO,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(t){this.state.searchBox!==null&&(Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:FO,eventMap:NO,prevProps:t,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Cn(this.registeredEvents))}render(){return $.jsx("div",{ref:this.containerElement,children:A.Children.only(this.props.children)})}}jt(uY,"contextType",on);var BO={onPlaceChanged:"place_changed"},VO={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class uF extends A.PureComponent{constructor(){super(...arguments),jt(this,"registeredEvents",[]),jt(this,"containerElement",A.createRef()),jt(this,"state",{autocomplete:null}),jt(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var t;Za(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(t=this.containerElement.current)===null||t===void 0?void 0:t.querySelector("input");if(r){var n=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=xn({updaterMap:VO,eventMap:BO,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(t){Cn(this.registeredEvents),this.registeredEvents=xn({updaterMap:VO,eventMap:BO,prevProps:t,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Cn(this.registeredEvents)}render(){return $.jsx("div",{ref:this.containerElement,className:this.props.className,children:A.Children.only(this.props.children)})}}jt(uF,"defaultProps",{className:""});jt(uF,"contextType",on);function cY(){var u;const e=(u=tl().state)==null?void 0:u.data,[t,r]=A.useState();e||(window.location.href="/vechile");const n=["places"];return $.jsxs("div",{className:"grid grid-cols-8 p-10 gap-8",children:[$.jsx("div",{className:"col-span-3 ",children:$.jsx(eF,{googleMapsApiKey:"AIzaSyA58I9jdRgr0_yQC8jG23iFIjK7w5wY_pA",libraries:n,children:$.jsx(wK,{vehicleData:e,setLocationCoordinates:r})})}),$.jsx("div",{className:"col-span-5",children:$.jsx(OZ,{locationCoordinates:t})})]})}function hY(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["vehicles"],queryFn:async()=>(await e.get("/history/")).data});return{allHistory:t,isAllHistoryLoading:r,isAllHistoryError:n}}function dY(){return $.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-24 animate-pulse"})}),$.jsx("td",{className:"px-6 py-4",children:$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"}),$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"})]})})]})}function cF({id:e}){const t=Mc(),{data:r,isLoading:n,isError:u}=zy({queryKey:["pdfExport"],queryFn:async()=>(await t.get(`/history/${e}/download/?type=pdf`)).data,enabled:!!e});return{pdfExport:r,isPdfExportLoading:n,isPdfExportError:u}}function fY({id:e}){const t=Mc(),{data:r,isLoading:n,isError:u}=zy({queryKey:["singleHistoryDetails"],queryFn:async()=>(await t.get(`/history/${e}/`)).data,enabled:!!e});return{singleHistoryDetails:r,isSingleHistoryDetailsLoading:n,isSingleHistoryDetailsError:u}}function pY(){return $.jsxs("div",{className:"p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-8",children:[$.jsx("div",{className:"h-8 bg-gray-200 rounded-full w-32 animate-pulse"}),$.jsx("div",{className:"h-4 bg-gray-200 rounded w-40 animate-pulse"})]}),$.jsxs("div",{className:"mb-8",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full animate-pulse"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-100 mt-1"})]}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-48 animate-pulse"})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full animate-pulse"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-100 mt-1"})]}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-56 animate-pulse"})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("div",{className:"flex flex-col items-center",children:$.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded animate-pulse"})}),$.jsxs("div",{className:"flex-1",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-32 animate-pulse"})]})]})]})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[$.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-16 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-40 animate-pulse"})]}),$.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-48 animate-pulse"})]})]})]}),$.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl",children:[$.jsx("div",{className:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mb-2 animate-pulse"}),$.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 animate-pulse"})]}),$.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[$.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mb-2 animate-pulse"}),$.jsx("div",{className:"h-5 bg-gray-200 rounded w-36 animate-pulse"})]})]})]})]})]})}function mY({itemData:e,onClose:t}){const{singleHistoryDetails:r,isSingleHistoryDetailsLoading:n,isSingleHistoryDetailsError:u}=fY({id:e==null?void 0:e.id}),h=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=P=>{switch(P){case"completed":return"bg-green-100 text-green-800";case"running":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},o=P=>{switch(P){case"completed":return $.jsx(P7,{className:"w-5 h-5"});case"running":return $.jsx(ab,{className:"w-5 h-5"});case"pending":return $.jsx(ab,{className:"w-5 h-5"});default:return null}},_=P=>{const S=(P*.621371).toFixed(2);return`${P.toFixed(2)} km (${S} mi)`};return $.jsx("div",{className:"w-full h-full fixed top-0 left-0 backdrop-blur-[10px] bg-black/30 z-50 flex items-center justify-center p-4",children:$.jsxs("div",{className:"w-full max-w-[800px] bg-white border border-gray-200 rounded-2xl shadow-2xl",children:[$.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Trip Details"}),$.jsx("p",{className:"text-gray-500 mt-1",children:"Complete journey information"})]}),$.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:$.jsx(Y7,{className:"w-6 h-6 text-gray-500"})})]}),n?$.jsx(pY,{}):$.jsxs("div",{className:"p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-8",children:[$.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${d(r==null?void 0:r.status)}`,children:[o(r==null?void 0:r.status),$.jsx("span",{className:"font-semibold capitalize",children:r==null?void 0:r.status})]}),$.jsxs("div",{className:"text-gray-500 text-sm",children:[$.jsx(b7,{className:"w-4 h-4 inline mr-2"}),h(r==null?void 0:r.created_at)]})]}),$.jsxs("div",{className:"mb-8",children:[$.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(z7,{className:"w-5 h-5"}),"Route"]}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-200 mt-1"})]}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Origin"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.origin})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsxs("div",{className:"flex flex-col items-center",children:[$.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),$.jsx("div",{className:"w-0.5 h-10 bg-gray-200 mt-1"})]}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Destination"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.destination})]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("div",{className:"flex flex-col items-center",children:$.jsx(iN,{className:"w-5 h-5 text-red-500"})}),$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Total Distance"}),$.jsx("p",{className:"font-medium",children:_(r==null?void 0:r.total_distance_km)})]})]})]})]}),$.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[$.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl",children:[$.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(rN,{className:"w-5 h-5"}),"Vehicle Details"]}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Model"}),$.jsx("p",{className:"font-medium",children:r==null?void 0:r.vehicle})]}),$.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle Type"}),$.jsx("p",{className:"font-medium",children:"Electric Vehicle (EV)"})]})]})]}),$.jsxs("div",{className:"bg-blue-50 p-5 rounded-xl",children:[$.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[$.jsx(_7,{className:"w-5 h-5"}),"Energy Consumption"]}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Energy Used"}),$.jsxs("p",{className:"font-medium text-2xl text-blue-600",children:[r==null?void 0:r.energy_used_kwh.toFixed(2)," kWh"]})]}),$.jsxs("div",{className:"pt-3 border-t border-blue-200",children:[$.jsx("p",{className:"text-sm text-gray-500",children:"Efficiency"}),$.jsxs("p",{className:"font-medium",children:[((r==null?void 0:r.total_distance_km)/(r==null?void 0:r.energy_used_kwh)).toFixed(2)," ","km/kWh"]})]})]})]})]})]}),u&&$.jsx("div",{className:"py-20 text-center text-black text-lg font-semibold",children:"Something went wrong! Please try again"})]})})}function gY(){var B;const[e,t]=A.useState(""),[r,n]=A.useState({show:!1,data:null}),{allHistory:u,isAllHistoryLoading:h,isAllHistoryError:d}=hY(),o=D=>{switch(D){case"running":return"bg-blue-100 text-blue-700 border border-blue-300";case"pending":return"bg-yellow-100 text-yellow-700 border border-yellow-300";case"completed":return"bg-green-100 text-green-700 border border-green-300";default:return"bg-gray-100 text-gray-700"}},_=(B=u==null?void 0:u.results)==null?void 0:B.filter(D=>(D==null?void 0:D.route_name.toLowerCase().includes(e.toLowerCase()))||(D==null?void 0:D.vehicle.toLowerCase().includes(e.toLowerCase()))),P=D=>{n({show:!0,data:D})},[S,M]=A.useState(null),{pdfExport:O,isPdfExportLoading:z}=cF({id:S});O&&O.download_url&&window.open(O.download_url,"_blank","noopener,noreferrer");const F=D=>{M(D==null?void 0:D.id)};return $.jsxs("div",{className:" bg-white rounded-lg mt-8 border p-8",children:[$.jsxs("div",{className:"",children:[$.jsxs("div",{className:"flex justify-between items-start mb-6",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Route Calculations History"}),$.jsx("p",{className:"text-gray-500",children:"View and manage EV route simulations"})]}),$.jsx(wc,{to:"/vechile",children:$.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium shadow-sm transition-colors",children:[$.jsx(V7,{size:20}),"New Ev Route Simulation"]})})]}),$.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6 p-4 flex gap-4",children:$.jsxs("div",{className:"flex-1 relative",children:[$.jsx(q7,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),$.jsx("input",{type:"text",placeholder:"Search the route name and vehicle",value:e,onChange:D=>t(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),$.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:$.jsxs("div",{className:"overflow-x-auto",children:[$.jsxs("table",{className:"w-full",children:[$.jsx("thead",{children:$.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Route Name"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Vehicle"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Date"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Distance"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Energy Usage"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),$.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),$.jsxs("tbody",{className:"divide-y divide-gray-200",children:[_==null?void 0:_.map((D,H)=>$.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D==null?void 0:D.route_name}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D==null?void 0:D.vehicle}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D==null?void 0:D.date}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D==null?void 0:D.distance_km}),$.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D==null?void 0:D.energy_kwh}),$.jsx("td",{className:"px-6 py-4",children:$.jsx("span",{className:`inline-block px-4 py-1.5 rounded-md text-sm font-medium capitalize ${o(D==null?void 0:D.status)}`,children:D==null?void 0:D.status})}),$.jsx("td",{className:"px-6 py-4",children:$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("button",{onClick:()=>P(D),type:"button",className:"text-gray-600 hover:text-gray-900 transition-colors",children:$.jsx(k7,{size:20})}),$.jsx("button",{onClick:()=>F(D),type:"button",className:"text-gray-600 hover:text-gray-900 transition-colors",children:$.jsx(T7,{size:20})})]})})]},H)),(_==null?void 0:_.length)===0&&!h&&$.jsx("tr",{children:$.jsx("td",{colSpan:7,className:"px-6 py-10 text-sm text-gray-600 text-center",children:"No History Found!"})}),h&&!d&&$.jsx($.Fragment,{children:[...Array(5)].map((D,H)=>$.jsx(dY,{},H))})]})]}),d&&!h&&$.jsx("div",{className:"flex items-center justify-center py-20",children:$.jsx("p",{className:"text-xl text-black/60 font-semibold",children:"Something Went Wrong! Please Try Again!"})})]})})]}),z&&$.jsx(kd,{}),(r==null?void 0:r.show)&&$.jsx(mY,{itemData:r==null?void 0:r.data,onClose:()=>n({show:!1,data:null})})]})}function yY(){const e=Mc(),{data:t,isLoading:r,isError:n}=zy({queryKey:["historyAnalytics"],queryFn:async()=>(await e.get("/history/analytics/")).data});return{historyAnalytics:t,isHistoryAnalyticsLoading:r,isHistoryAnalyticsError:n}}function vY(){const{historyAnalytics:e}=yY(),t=[{id:1,title:"Total Distance",value:(e==null?void 0:e.total_distance_mi)||0,unit:"mi",extraInfo:"Route Optimized for efficiency",icon:aN},{id:2,title:"Energy Consumed",value:(e==null?void 0:e.total_energy_kwh)||0,unit:"kWh",extraInfo:`Avg. ${(e==null?void 0:e.avg_consumption_wh_per_mi)||0} Wh/mi`,icon:tN},{id:3,title:"Trip Duration",value:(e==null?void 0:e.avg_trip_duration)||0,icon:ab},{id:4,title:"Arrival SoC",value:(e==null?void 0:e.avg_arrival_soc)||0,icon:nN}];return $.jsx("div",{children:$.jsx("div",{className:"grid lg:grid-cols-4 gap-6",children:t==null?void 0:t.map(r=>$.jsxs("div",{className:"bg-white p-6 rounded-2xl border  space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-2 justify-between ",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title text-[#4F586D]!",children:r==null?void 0:r.title}),$.jsxs("p",{className:"paragraph mt-4 text-lg font-medium",children:[$.jsx("span",{className:"text-[32px] text-black",children:r==null?void 0:r.value})," ",r==null?void 0:r.unit]})]}),$.jsx("div",{className:"bg-gray-200 p-2 rounded-full flex items-center justify-center",children:$.jsx(r.icon,{size:24})})]}),(r==null?void 0:r.extraInfo)&&$.jsxs("p",{className:"paragraph mt-2 flex items-center gap-2",children:[$.jsx("span",{className:"text-[#20A157]",children:$.jsx(oN,{})})," ",r==null?void 0:r.extraInfo]})]},r==null?void 0:r.id))})})}function _Y(){return $.jsxs("div",{className:"p-10",children:[$.jsx(vY,{}),$.jsx(gY,{})]})}function xY(e){return Tw({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M133,124.64a6,6,0,0,1,.6,5.59l-16,40a6,6,0,1,1-11.14-4.46L119.14,134H96a6,6,0,0,1-5.57-8.23l16-40a6,6,0,0,1,11.14,4.46L104.86,122H128A6,6,0,0,1,133,124.64Zm113-38V168a22,22,0,0,1-44,0V128a10,10,0,0,0-10-10H174v92h18a6,6,0,0,1,0,12H32a6,6,0,0,1,0-12H50V56A22,22,0,0,1,72,34h80a22,22,0,0,1,22,22v50h18a22,22,0,0,1,22,22v40a10,10,0,0,0,20,0V86.63a9.93,9.93,0,0,0-2.93-7.07L211.76,60.24a6,6,0,0,1,8.48-8.48l19.32,19.31A21.88,21.88,0,0,1,246,86.63ZM162,210V56a10,10,0,0,0-10-10H72A10,10,0,0,0,62,56V210Z"},child:[]}]})(e)}function bY({ChargingStops:e}){return $.jsxs("div",{className:"w-full bg-white p-6 rounded-lg border",children:[$.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[$.jsx(xY,{size:26,className:"text-gray-600"}),$.jsx("h2",{className:"title",children:"Charging Stops"})]}),$.jsxs("div",{className:"w-full h-full space-y-4",children:[e==null?void 0:e.map((t,r)=>$.jsxs("div",{className:"rounded-xl border p-4 bg-[#F1FAF7] flex flex-col gap-2",children:[$.jsxs("p",{className:"font-semibold text-gray-800",children:["Station name: ",t==null?void 0:t.name]}),$.jsxs("div",{className:"flex items-start justify-between text-sm text-gray-700",children:[$.jsxs("div",{children:[$.jsxs("p",{children:["Charger power: ",t==null?void 0:t.charger_power_kw," KW"]}),$.jsxs("p",{className:"text-[#4CBF82] font-medium",children:["Arrival Battery: ",t==null?void 0:t.arrival_soc]})]}),$.jsxs("div",{className:"text-right",children:[$.jsxs("p",{children:["Distance: ",t==null?void 0:t.distance_from_route_km," km"]}),$.jsxs("p",{children:["Charging Time: ",t==null?void 0:t.charge_time_min," min"]})]})]})]},r)),(e==null?void 0:e.length)===0&&$.jsx("div",{className:"w-full h-full flex items-center justify-center text-lg font-medium",children:"No charging stops found."})]})]})}var wY=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IC(e){if(typeof e!="string")return!1;var t=wY;return t.includes(e)}var SY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PY=new Set(SY);function hF(e){return typeof e!="string"?!1:PY.has(e)}function dF(e){return typeof e=="string"&&e.startsWith("data-")}function vu(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(hF(r)||dF(r))&&(t[r]=e[r]);return t}function q_(e){if(e==null)return null;if(A.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vu(t)}return typeof e=="object"&&!Array.isArray(e)?vu(e):null}function Ps(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(hF(r)||dF(r)||IC(r))&&(t[r]=e[r]);return t}function EY(e){return e==null?null:A.isValidElement(e)?Ps(e.props):typeof e=="object"&&!Array.isArray(e)?Ps(e):null}var CY=["children","width","height","viewBox","className","style","title","desc"];function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eE.apply(null,arguments)}function TY(e,t){if(e==null)return{};var r,n,u=MY(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function MY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OC=A.forwardRef((e,t)=>{var{children:r,width:n,height:u,viewBox:h,className:d,style:o,title:_,desc:P}=e,S=TY(e,CY),M=h||{width:n,height:u,x:0,y:0},O=ti("recharts-surface",d);return A.createElement("svg",eE({},Ps(S),{className:O,width:n,height:u,style:o,viewBox:"".concat(M.x," ").concat(M.y," ").concat(M.width," ").concat(M.height),ref:t}),A.createElement("title",null,_),A.createElement("desc",null,P),r)}),kY=["children","className"];function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tE.apply(null,arguments)}function AY(e,t){if(e==null)return{};var r,n,u=IY(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function IY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Es=A.forwardRef((e,t)=>{var{children:r,className:n}=e,u=AY(e,kY),h=ti("recharts-layer",n);return A.createElement("g",tE({className:h},Ps(u),{ref:t}),r)}),fF=A.createContext(null),OY=()=>A.useContext(fF);function wi(e){return function(){return e}}const pF=Math.cos,vb=Math.sin,kc=Math.sqrt,_b=Math.PI,Iw=2*_b,rE=Math.PI,nE=2*rE,Sm=1e-6,LY=nE-Sm;function mF(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function DY(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mF;const r=10**t;return function(n){this._+=n[0];for(let u=1,h=n.length;u<h;++u)this._+=Math.round(arguments[u]*r)/r+n[u]}}class RY{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mF:DY(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,u){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+u}`}bezierCurveTo(t,r,n,u,h,d){this._append`C${+t},${+r},${+n},${+u},${this._x1=+h},${this._y1=+d}`}arcTo(t,r,n,u,h){if(t=+t,r=+r,n=+n,u=+u,h=+h,h<0)throw new Error(`negative radius: ${h}`);let d=this._x1,o=this._y1,_=n-t,P=u-r,S=d-t,M=o-r,O=S*S+M*M;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(O>Sm)if(!(Math.abs(M*_-P*S)>Sm)||!h)this._append`L${this._x1=t},${this._y1=r}`;else{let z=n-d,F=u-o,B=_*_+P*P,D=z*z+F*F,H=Math.sqrt(B),Q=Math.sqrt(O),te=h*Math.tan((rE-Math.acos((B+O-D)/(2*H*Q)))/2),ie=te/Q,ae=te/H;Math.abs(ie-1)>Sm&&this._append`L${t+ie*S},${r+ie*M}`,this._append`A${h},${h},0,0,${+(M*z>S*F)},${this._x1=t+ae*_},${this._y1=r+ae*P}`}}arc(t,r,n,u,h,d){if(t=+t,r=+r,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(u),_=n*Math.sin(u),P=t+o,S=r+_,M=1^d,O=d?u-h:h-u;this._x1===null?this._append`M${P},${S}`:(Math.abs(this._x1-P)>Sm||Math.abs(this._y1-S)>Sm)&&this._append`L${P},${S}`,n&&(O<0&&(O=O%nE+nE),O>LY?this._append`A${n},${n},0,1,${M},${t-o},${r-_}A${n},${n},0,1,${M},${this._x1=P},${this._y1=S}`:O>Sm&&this._append`A${n},${n},0,${+(O>=rE)},${M},${this._x1=t+n*Math.cos(h)},${this._y1=r+n*Math.sin(h)}`)}rect(t,r,n,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+u}h${-n}Z`}toString(){return this._}}function LC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new RY(t)}function DC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gF(e){this._context=e}gF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ow(e){return new gF(e)}function yF(e){return e[0]}function vF(e){return e[1]}function _F(e,t){var r=wi(!0),n=null,u=Ow,h=null,d=LC(o);e=typeof e=="function"?e:e===void 0?yF:wi(e),t=typeof t=="function"?t:t===void 0?vF:wi(t);function o(_){var P,S=(_=DC(_)).length,M,O=!1,z;for(n==null&&(h=u(z=d())),P=0;P<=S;++P)!(P<S&&r(M=_[P],P,_))===O&&((O=!O)?h.lineStart():h.lineEnd()),O&&h.point(+e(M,P,_),+t(M,P,_));if(z)return h=null,z+""||null}return o.x=function(_){return arguments.length?(e=typeof _=="function"?_:wi(+_),o):e},o.y=function(_){return arguments.length?(t=typeof _=="function"?_:wi(+_),o):t},o.defined=function(_){return arguments.length?(r=typeof _=="function"?_:wi(!!_),o):r},o.curve=function(_){return arguments.length?(u=_,n!=null&&(h=u(n)),o):u},o.context=function(_){return arguments.length?(_==null?n=h=null:h=u(n=_),o):n},o}function fx(e,t,r){var n=null,u=wi(!0),h=null,d=Ow,o=null,_=LC(P);e=typeof e=="function"?e:e===void 0?yF:wi(+e),t=typeof t=="function"?t:wi(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vF:wi(+r);function P(M){var O,z,F,B=(M=DC(M)).length,D,H=!1,Q,te=new Array(B),ie=new Array(B);for(h==null&&(o=d(Q=_())),O=0;O<=B;++O){if(!(O<B&&u(D=M[O],O,M))===H)if(H=!H)z=O,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),F=O-1;F>=z;--F)o.point(te[F],ie[F]);o.lineEnd(),o.areaEnd()}H&&(te[O]=+e(D,O,M),ie[O]=+t(D,O,M),o.point(n?+n(D,O,M):te[O],r?+r(D,O,M):ie[O]))}if(Q)return o=null,Q+""||null}function S(){return _F().defined(u).curve(d).context(h)}return P.x=function(M){return arguments.length?(e=typeof M=="function"?M:wi(+M),n=null,P):e},P.x0=function(M){return arguments.length?(e=typeof M=="function"?M:wi(+M),P):e},P.x1=function(M){return arguments.length?(n=M==null?null:typeof M=="function"?M:wi(+M),P):n},P.y=function(M){return arguments.length?(t=typeof M=="function"?M:wi(+M),r=null,P):t},P.y0=function(M){return arguments.length?(t=typeof M=="function"?M:wi(+M),P):t},P.y1=function(M){return arguments.length?(r=M==null?null:typeof M=="function"?M:wi(+M),P):r},P.lineX0=P.lineY0=function(){return S().x(e).y(t)},P.lineY1=function(){return S().x(e).y(r)},P.lineX1=function(){return S().x(n).y(t)},P.defined=function(M){return arguments.length?(u=typeof M=="function"?M:wi(!!M),P):u},P.curve=function(M){return arguments.length?(d=M,h!=null&&(o=d(h)),P):d},P.context=function(M){return arguments.length?(M==null?h=o=null:o=d(h=M),P):h},P}class xF{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function jY(e){return new xF(e,!0)}function zY(e){return new xF(e,!1)}const RC={draw(e,t){const r=kc(t/_b);e.moveTo(r,0),e.arc(0,0,r,0,Iw)}},NY={draw(e,t){const r=kc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},bF=kc(1/3),FY=bF*2,BY={draw(e,t){const r=kc(t/FY),n=r*bF;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},VY={draw(e,t){const r=kc(t),n=-r/2;e.rect(n,n,r,r)}},$Y=.8908130915292852,wF=vb(_b/10)/vb(7*_b/10),UY=vb(Iw/10)*wF,qY=-pF(Iw/10)*wF,GY={draw(e,t){const r=kc(t*$Y),n=UY*r,u=qY*r;e.moveTo(0,-r),e.lineTo(n,u);for(let h=1;h<5;++h){const d=Iw*h/5,o=pF(d),_=vb(d);e.lineTo(_*r,-o*r),e.lineTo(o*n-_*u,_*n+o*u)}e.closePath()}},RS=kc(3),WY={draw(e,t){const r=-kc(t/(RS*3));e.moveTo(0,r*2),e.lineTo(-RS*r,-r),e.lineTo(RS*r,-r),e.closePath()}},ou=-.5,su=kc(3)/2,iE=1/kc(12),HY=(iE/2+1)*3,ZY={draw(e,t){const r=kc(t/HY),n=r/2,u=r*iE,h=n,d=r*iE+r,o=-h,_=d;e.moveTo(n,u),e.lineTo(h,d),e.lineTo(o,_),e.lineTo(ou*n-su*u,su*n+ou*u),e.lineTo(ou*h-su*d,su*h+ou*d),e.lineTo(ou*o-su*_,su*o+ou*_),e.lineTo(ou*n+su*u,ou*u-su*n),e.lineTo(ou*h+su*d,ou*d-su*h),e.lineTo(ou*o+su*_,ou*_-su*o),e.closePath()}};function KY(e,t){let r=null,n=LC(u);e=typeof e=="function"?e:wi(e||RC),t=typeof t=="function"?t:wi(t===void 0?64:+t);function u(){let h;if(r||(r=h=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),h)return r=null,h+""||null}return u.type=function(h){return arguments.length?(e=typeof h=="function"?h:wi(h),u):e},u.size=function(h){return arguments.length?(t=typeof h=="function"?h:wi(+h),u):t},u.context=function(h){return arguments.length?(r=h??null,u):r},u}function xb(){}function bb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function SF(e){this._context=e}SF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XY(e){return new SF(e)}function PF(e){this._context=e}PF.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:bb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YY(e){return new PF(e)}function EF(e){this._context=e}EF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:bb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function QY(e){return new EF(e)}function CF(e){this._context=e}CF.prototype={areaStart:xb,areaEnd:xb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JY(e){return new CF(e)}function $O(e){return e<0?-1:1}function UO(e,t,r){var n=e._x1-e._x0,u=t-e._x1,h=(e._y1-e._y0)/(n||u<0&&-0),d=(r-e._y1)/(u||n<0&&-0),o=(h*u+d*n)/(n+u);return($O(h)+$O(d))*Math.min(Math.abs(h),Math.abs(d),.5*Math.abs(o))||0}function qO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function jS(e,t,r){var n=e._x0,u=e._y0,h=e._x1,d=e._y1,o=(h-n)/3;e._context.bezierCurveTo(n+o,u+o*t,h-o,d-o*r,h,d)}function wb(e){this._context=e}wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jS(this,this._t0,qO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jS(this,qO(this,r=UO(this,e,t)),r);break;default:jS(this,this._t0,r=UO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function TF(e){this._context=new MF(e)}(TF.prototype=Object.create(wb.prototype)).point=function(e,t){wb.prototype.point.call(this,t,e)};function MF(e){this._context=e}MF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,u,h){this._context.bezierCurveTo(t,e,n,r,h,u)}};function eQ(e){return new wb(e)}function tQ(e){return new TF(e)}function kF(e){this._context=e}kF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=GO(e),u=GO(t),h=0,d=1;d<r;++h,++d)this._context.bezierCurveTo(n[0][h],u[0][h],n[1][h],u[1][h],e[d],t[d]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GO(e){var t,r=e.length-1,n,u=new Array(r),h=new Array(r),d=new Array(r);for(u[0]=0,h[0]=2,d[0]=e[0]+2*e[1],t=1;t<r-1;++t)u[t]=1,h[t]=4,d[t]=4*e[t]+2*e[t+1];for(u[r-1]=2,h[r-1]=7,d[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=u[t]/h[t-1],h[t]-=n,d[t]-=n*d[t-1];for(u[r-1]=d[r-1]/h[r-1],t=r-2;t>=0;--t)u[t]=(d[t]-u[t+1])/h[t];for(h[r-1]=(e[r]+u[r-1])/2,t=0;t<r-1;++t)h[t]=2*e[t+1]-u[t+1];return[u,h]}function rQ(e){return new kF(e)}function Lw(e,t){this._context=e,this._t=t}Lw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function nQ(e){return new Lw(e,.5)}function iQ(e){return new Lw(e,0)}function aQ(e){return new Lw(e,1)}function Cy(e,t){if((d=e.length)>1)for(var r=1,n,u,h=e[t[0]],d,o=h.length;r<d;++r)for(u=h,h=e[t[r]],n=0;n<o;++n)h[n][1]+=h[n][0]=isNaN(u[n][1])?u[n][0]:u[n][1]}function aE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function oQ(e,t){return e[t]}function sQ(e){const t=[];return t.key=e,t}function lQ(){var e=wi([]),t=aE,r=Cy,n=oQ;function u(h){var d=Array.from(e.apply(this,arguments),sQ),o,_=d.length,P=-1,S;for(const M of h)for(o=0,++P;o<_;++o)(d[o][P]=[0,+n(M,d[o].key,P,h)]).data=M;for(o=0,S=DC(t(d));o<_;++o)d[S[o]].index=o;return r(d,S),d}return u.keys=function(h){return arguments.length?(e=typeof h=="function"?h:wi(Array.from(h)),u):e},u.value=function(h){return arguments.length?(n=typeof h=="function"?h:wi(+h),u):n},u.order=function(h){return arguments.length?(t=h==null?aE:typeof h=="function"?h:wi(Array.from(h)),u):t},u.offset=function(h){return arguments.length?(r=h??Cy,u):r},u}function uQ(e,t){if((n=e.length)>0){for(var r,n,u=0,h=e[0].length,d;u<h;++u){for(d=r=0;r<n;++r)d+=e[r][u][1]||0;if(d)for(r=0;r<n;++r)e[r][u][1]/=d}Cy(e,t)}}function cQ(e,t){if((u=e.length)>0){for(var r=0,n=e[t[0]],u,h=n.length;r<h;++r){for(var d=0,o=0;d<u;++d)o+=e[d][r][1]||0;n[r][1]+=n[r][0]=-o/2}Cy(e,t)}}function hQ(e,t){if(!(!((d=e.length)>0)||!((h=(u=e[t[0]]).length)>0))){for(var r=0,n=1,u,h,d;n<h;++n){for(var o=0,_=0,P=0;o<d;++o){for(var S=e[t[o]],M=S[n][1]||0,O=S[n-1][1]||0,z=(M-O)/2,F=0;F<o;++F){var B=e[t[F]],D=B[n][1]||0,H=B[n-1][1]||0;z+=D-H}_+=M,P+=z*M}u[n-1][1]+=u[n-1][0]=r,_&&(r-=P/_)}u[n-1][1]+=u[n-1][0]=r,Cy(e,t)}}var zS={},NS={},WO;function dQ(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(NS)),NS}var FS={},HO;function AF(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(FS)),FS}var BS={},ZO;function jC(){return ZO||(ZO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(BS)),BS}var VS={},$S={},KO;function fQ(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})($S)),$S}var XO;function zC(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fQ(),r=jC();function n(u){if(Array.isArray(u))return u.map(r.toKey);if(typeof u=="symbol")return[u];u=t.toString(u);const h=[],d=u.length;if(d===0)return h;let o=0,_="",P="",S=!1;for(u.charCodeAt(0)===46&&(h.push(""),o++);o<d;){const M=u[o];P?M==="\\"&&o+1<d?(o++,_+=u[o]):M===P?P="":_+=M:S?M==='"'||M==="'"?P=M:M==="]"?(S=!1,h.push(_),_=""):_+=M:M==="["?(S=!0,_&&(h.push(_),_="")):M==="."?_&&(h.push(_),_=""):_+=M,o++}return _&&h.push(_),h}e.toPath=n})(VS)),VS}var YO;function NC(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dQ(),r=AF(),n=jC(),u=zC();function h(o,_,P){if(o==null)return P;switch(typeof _){case"string":{if(t.isUnsafeProperty(_))return P;const S=o[_];return S===void 0?r.isDeepKey(_)?h(o,u.toPath(_),P):P:S}case"number":case"symbol":{typeof _=="number"&&(_=n.toKey(_));const S=o[_];return S===void 0?P:S}default:{if(Array.isArray(_))return d(o,_,P);if(Object.is(_==null?void 0:_.valueOf(),-0)?_="-0":_=String(_),t.isUnsafeProperty(_))return P;const S=o[_];return S===void 0?P:S}}}function d(o,_,P){if(_.length===0)return P;let S=o;for(let M=0;M<_.length;M++){if(S==null||t.isUnsafeProperty(_[M]))return P;S=S[_[M]]}return S===void 0?P:S}e.get=h})(zS)),zS}var US,QO;function pQ(){return QO||(QO=1,US=NC().get),US}var mQ=pQ();const Ty=Sh(mQ);var Ys=e=>e===0?0:e>0?1:-1,_u=e=>typeof e=="number"&&e!=+e,Od=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_r=e=>(typeof e=="number"||e instanceof Number)&&!_u(e),xh=e=>_r(e)||typeof e=="string",gQ=0,f_=e=>{var t=++gQ;return"".concat(e||"").concat(t)},Pc=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_r(t)&&typeof t!="string")return n;var h;if(Od(t)){if(r==null)return n;var d=t.indexOf("%");h=r*parseFloat(t.slice(0,d))/100}else h=+t;return _u(h)&&(h=n),u&&r!=null&&h>r&&(h=r),h},IF=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Hi(e,t,r){return _r(e)&&_r(t)?e+r*(t-e):t}function OF(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ty(n,t))===r)}var Zi=e=>e===null||typeof e>"u",G_=e=>Zi(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function yQ(e){return e!=null}function W_(){}var vQ=["type","size","sizeType"];function oE(){return oE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oE.apply(null,arguments)}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function eL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(n){_Q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Q(e,t,r){return(t=xQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQ(e){var t=bQ(e,"string");return typeof t=="symbol"?t:t+""}function bQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wQ(e,t){if(e==null)return{};var r,n,u=SQ(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function SQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LF={symbolCircle:RC,symbolCross:NY,symbolDiamond:BY,symbolSquare:VY,symbolStar:GY,symbolTriangle:WY,symbolWye:ZY},PQ=Math.PI/180,EQ=e=>{var t="symbol".concat(G_(e));return LF[t]||RC},CQ=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*PQ;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},TQ=(e,t)=>{LF["symbol".concat(G_(e))]=t},FC=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,u=wQ(e,vQ),h=eL(eL({},u),{},{type:t,size:r,sizeType:n}),d="circle";typeof t=="string"&&(d=t);var o=()=>{var O=EQ(d),z=KY().type(O).size(CQ(r,n,d)),F=z();if(F!==null)return F},{className:_,cx:P,cy:S}=h,M=Ps(h);return _r(P)&&_r(S)&&_r(r)?A.createElement("path",oE({},M,{className:ti("recharts-symbols",_),transform:"translate(".concat(P,", ").concat(S,")"),d:o()})):null};FC.registerSymbol=TQ;var DF=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,BC=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(u=>{IC(u)&&(n[u]=(h=>r[u](r,h)))}),n},MQ=(e,t,r)=>n=>(e(t,r,n),null),Dw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(u=>{var h=e[u];IC(u)&&typeof h=="function"&&(n||(n={}),n[u]=MQ(h,t,r))}),n};function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function kQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(n){AQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=OQ(e,"string");return typeof t=="symbol"?t:t+""}function OQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(e,t){var r=kQ({},e),n=t,u=Object.keys(t),h=u.reduce((d,o)=>(d[o]===void 0&&n[o]!==void 0&&(d[o]=n[o]),d),r);return h}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function LQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){DQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DQ(e,t,r){return(t=RQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RQ(e){var t=jQ(e,"string");return typeof t=="symbol"?t:t+""}function jQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cu=32,zQ={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function NQ(e){var{data:t,iconType:r,inactiveColor:n}=e,u=cu/2,h=cu/6,d=cu/3,o=t.inactive?n:t.color,_=r??t.type;if(_==="none")return null;if(_==="plainline"){var P;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(P=t.payload)===null||P===void 0?void 0:P.strokeDasharray,x1:0,y1:u,x2:cu,y2:u,className:"recharts-legend-icon"})}if(_==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(u,"h").concat(d,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*d,",").concat(u,`
            H`).concat(cu,"M").concat(2*d,",").concat(u,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(d,",").concat(u),className:"recharts-legend-icon"});if(_==="rect")return A.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(cu/8,"h").concat(cu,"v").concat(cu*3/4,"h").concat(-cu,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var S=LQ({},t);return delete S.legendIcon,A.cloneElement(t.legendIcon,S)}return A.createElement(FC,{fill:o,cx:u,cy:u,size:cu,sizeType:"diameter",type:_})}function FQ(e){var{payload:t,iconSize:r,layout:n,formatter:u,inactiveColor:h,iconType:d}=e,o={x:0,y:0,width:cu,height:cu},_={display:n==="horizontal"?"inline-block":"block",marginRight:10},P={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((S,M)=>{var O=S.formatter||u,z=ti({"recharts-legend-item":!0,["legend-item-".concat(M)]:!0,inactive:S.inactive});if(S.type==="none")return null;var F=S.inactive?h:S.color,B=O?O(S.value,S,M):S.value;return A.createElement("li",Sb({className:z,style:_,key:"legend-item-".concat(M)},Dw(e,S,M)),A.createElement(OC,{width:r,height:r,viewBox:o,style:P,"aria-label":"".concat(B," legend icon")},A.createElement(NQ,{data:S,iconType:d,inactiveColor:h})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:F}},B))})}var BQ=e=>{var t=Ao(e,zQ),{payload:r,layout:n,align:u}=t;if(!r||!r.length)return null;var h={padding:0,margin:0,textAlign:n==="horizontal"?u:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:h},A.createElement(FQ,Sb({},t,{payload:r})))},qS={},GS={},nL;function VQ(){return nL||(nL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const u=new Map;for(let h=0;h<r.length;h++){const d=r[h],o=n(d);u.has(o)||u.set(o,d)}return Array.from(u.values())}e.uniqBy=t})(GS)),GS}var WS={},iL;function RF(){return iL||(iL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(WS)),WS}var HS={},ZS={},KS={},aL;function $Q(){return aL||(aL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(KS)),KS}var oL;function VC(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$Q();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(ZS)),ZS}var XS={},sL;function UQ(){return sL||(sL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(XS)),XS}var lL;function qQ(){return lL||(lL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VC(),r=UQ();function n(u){return r.isObjectLike(u)&&t.isArrayLike(u)}e.isArrayLikeObject=n})(HS)),HS}var YS={},QS={},uL;function GQ(){return uL||(uL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NC();function r(n){return function(u){return t.get(u,n)}}e.property=r})(QS)),QS}var JS={},eP={},tP={},rP={},cL;function jF(){return cL||(cL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(rP)),rP}var nP={},hL;function zF(){return hL||(hL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(nP)),nP}var iP={},dL;function NF(){return dL||(dL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(iP)),iP}var fL;function WQ(){return fL||(fL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jF(),r=zF(),n=NF();function u(S,M,O){return typeof O!="function"?u(S,M,()=>{}):h(S,M,function z(F,B,D,H,Q,te){const ie=O(F,B,D,H,Q,te);return ie!==void 0?!!ie:h(F,B,z,te)},new Map)}function h(S,M,O,z){if(M===S)return!0;switch(typeof M){case"object":return d(S,M,O,z);case"function":return Object.keys(M).length>0?h(S,{...M},O,z):n.eq(S,M);default:return t.isObject(S)?typeof M=="string"?M==="":!0:n.eq(S,M)}}function d(S,M,O,z){if(M==null)return!0;if(Array.isArray(M))return _(S,M,O,z);if(M instanceof Map)return o(S,M,O,z);if(M instanceof Set)return P(S,M,O,z);const F=Object.keys(M);if(S==null)return F.length===0;if(F.length===0)return!0;if(z!=null&&z.has(M))return z.get(M)===S;z==null||z.set(M,S);try{for(let B=0;B<F.length;B++){const D=F[B];if(!r.isPrimitive(S)&&!(D in S)||M[D]===void 0&&S[D]!==void 0||M[D]===null&&S[D]!==null||!O(S[D],M[D],D,S,M,z))return!1}return!0}finally{z==null||z.delete(M)}}function o(S,M,O,z){if(M.size===0)return!0;if(!(S instanceof Map))return!1;for(const[F,B]of M.entries()){const D=S.get(F);if(O(D,B,F,S,M,z)===!1)return!1}return!0}function _(S,M,O,z){if(M.length===0)return!0;if(!Array.isArray(S))return!1;const F=new Set;for(let B=0;B<M.length;B++){const D=M[B];let H=!1;for(let Q=0;Q<S.length;Q++){if(F.has(Q))continue;const te=S[Q];let ie=!1;if(O(te,D,B,S,M,z)&&(ie=!0),ie){F.add(Q),H=!0;break}}if(!H)return!1}return!0}function P(S,M,O,z){return M.size===0?!0:S instanceof Set?_([...S],[...M],O,z):!1}e.isMatchWith=u,e.isSetMatch=P})(tP)),tP}var pL;function FF(){return pL||(pL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WQ();function r(n,u){return t.isMatchWith(n,u,()=>{})}e.isMatch=r})(eP)),eP}var aP={},oP={},sP={},mL;function HQ(){return mL||(mL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(sP)),sP}var lP={},gL;function BF(){return gL||(gL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(lP)),lP}var uP={},yL;function VF(){return yL||(yL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",u="[object Boolean]",h="[object Arguments]",d="[object Symbol]",o="[object Date]",_="[object Map]",P="[object Set]",S="[object Array]",M="[object Function]",O="[object ArrayBuffer]",z="[object Object]",F="[object Error]",B="[object DataView]",D="[object Uint8Array]",H="[object Uint8ClampedArray]",Q="[object Uint16Array]",te="[object Uint32Array]",ie="[object BigUint64Array]",ae="[object Int8Array]",he="[object Int16Array]",re="[object Int32Array]",be="[object BigInt64Array]",xe="[object Float32Array]",$e="[object Float64Array]";e.argumentsTag=h,e.arrayBufferTag=O,e.arrayTag=S,e.bigInt64ArrayTag=be,e.bigUint64ArrayTag=ie,e.booleanTag=u,e.dataViewTag=B,e.dateTag=o,e.errorTag=F,e.float32ArrayTag=xe,e.float64ArrayTag=$e,e.functionTag=M,e.int16ArrayTag=he,e.int32ArrayTag=re,e.int8ArrayTag=ae,e.mapTag=_,e.numberTag=n,e.objectTag=z,e.regexpTag=t,e.setTag=P,e.stringTag=r,e.symbolTag=d,e.uint16ArrayTag=Q,e.uint32ArrayTag=te,e.uint8ArrayTag=D,e.uint8ClampedArrayTag=H})(uP)),uP}var cP={},vL;function ZQ(){return vL||(vL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(cP)),cP}var _L;function $F(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HQ(),r=BF(),n=VF(),u=zF(),h=ZQ();function d(S,M){return o(S,void 0,S,new Map,M)}function o(S,M,O,z=new Map,F=void 0){const B=F==null?void 0:F(S,M,O,z);if(B!==void 0)return B;if(u.isPrimitive(S))return S;if(z.has(S))return z.get(S);if(Array.isArray(S)){const D=new Array(S.length);z.set(S,D);for(let H=0;H<S.length;H++)D[H]=o(S[H],H,O,z,F);return Object.hasOwn(S,"index")&&(D.index=S.index),Object.hasOwn(S,"input")&&(D.input=S.input),D}if(S instanceof Date)return new Date(S.getTime());if(S instanceof RegExp){const D=new RegExp(S.source,S.flags);return D.lastIndex=S.lastIndex,D}if(S instanceof Map){const D=new Map;z.set(S,D);for(const[H,Q]of S)D.set(H,o(Q,H,O,z,F));return D}if(S instanceof Set){const D=new Set;z.set(S,D);for(const H of S)D.add(o(H,void 0,O,z,F));return D}if(typeof Buffer<"u"&&Buffer.isBuffer(S))return S.subarray();if(h.isTypedArray(S)){const D=new(Object.getPrototypeOf(S)).constructor(S.length);z.set(S,D);for(let H=0;H<S.length;H++)D[H]=o(S[H],H,O,z,F);return D}if(S instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&S instanceof SharedArrayBuffer)return S.slice(0);if(S instanceof DataView){const D=new DataView(S.buffer.slice(0),S.byteOffset,S.byteLength);return z.set(S,D),_(D,S,O,z,F),D}if(typeof File<"u"&&S instanceof File){const D=new File([S],S.name,{type:S.type});return z.set(S,D),_(D,S,O,z,F),D}if(typeof Blob<"u"&&S instanceof Blob){const D=new Blob([S],{type:S.type});return z.set(S,D),_(D,S,O,z,F),D}if(S instanceof Error){const D=new S.constructor;return z.set(S,D),D.message=S.message,D.name=S.name,D.stack=S.stack,D.cause=S.cause,_(D,S,O,z,F),D}if(S instanceof Boolean){const D=new Boolean(S.valueOf());return z.set(S,D),_(D,S,O,z,F),D}if(S instanceof Number){const D=new Number(S.valueOf());return z.set(S,D),_(D,S,O,z,F),D}if(S instanceof String){const D=new String(S.valueOf());return z.set(S,D),_(D,S,O,z,F),D}if(typeof S=="object"&&P(S)){const D=Object.create(Object.getPrototypeOf(S));return z.set(S,D),_(D,S,O,z,F),D}return S}function _(S,M,O=S,z,F){const B=[...Object.keys(M),...t.getSymbols(M)];for(let D=0;D<B.length;D++){const H=B[D],Q=Object.getOwnPropertyDescriptor(S,H);(Q==null||Q.writable)&&(S[H]=o(M[H],H,O,z,F))}}function P(S){switch(r.getTag(S)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=o,e.copyProperties=_})(oP)),oP}var xL;function KQ(){return xL||(xL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$F();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(aP)),aP}var bL;function XQ(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FF(),r=KQ();function n(u){return u=r.cloneDeep(u),h=>t.isMatch(h,u)}e.matches=n})(JS)),JS}var hP={},dP={},fP={},wL;function YQ(){return wL||(wL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$F(),r=VF();function n(u,h){return t.cloneDeepWith(u,(d,o,_,P)=>{const S=h==null?void 0:h(d,o,_,P);if(S!==void 0)return S;if(typeof u=="object")switch(Object.prototype.toString.call(u)){case r.numberTag:case r.stringTag:case r.booleanTag:{const M=new u.constructor(u==null?void 0:u.valueOf());return t.copyProperties(M,u),M}case r.argumentsTag:{const M={};return t.copyProperties(M,u),M.length=u.length,M[Symbol.iterator]=u[Symbol.iterator],M}default:return}})}e.cloneDeepWith=n})(fP)),fP}var SL;function QQ(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YQ();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(dP)),dP}var pP={},mP={},PL;function UF(){return PL||(PL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,u=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<u;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(mP)),mP}var gP={},EL;function JQ(){return EL||(EL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BF();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(gP)),gP}var CL;function eJ(){return CL||(CL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AF(),r=UF(),n=JQ(),u=zC();function h(d,o){let _;if(Array.isArray(o)?_=o:typeof o=="string"&&t.isDeepKey(o)&&(d==null?void 0:d[o])==null?_=u.toPath(o):_=[o],_.length===0)return!1;let P=d;for(let S=0;S<_.length;S++){const M=_[S];if((P==null||!Object.hasOwn(P,M))&&!((Array.isArray(P)||n.isArguments(P))&&r.isIndex(M)&&M<P.length))return!1;P=P[M]}return!0}e.has=h})(pP)),pP}var TL;function tJ(){return TL||(TL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FF(),r=jC(),n=QQ(),u=NC(),h=eJ();function d(o,_){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return _=n.cloneDeep(_),function(P){const S=u.get(P,o);return S===void 0?h.has(P,o):_===void 0?S===void 0:t.isMatch(S,_)}}e.matchesProperty=d})(hP)),hP}var ML;function rJ(){return ML||(ML=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RF(),r=GQ(),n=XQ(),u=tJ();function h(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?u.matchesProperty(d[0],d[1]):n.matches(d);case"string":case"symbol":case"number":return r.property(d)}}e.iteratee=h})(YS)),YS}var kL;function nJ(){return kL||(kL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VQ(),r=RF(),n=qQ(),u=rJ();function h(d,o=r.identity){return n.isArrayLikeObject(d)?t.uniqBy(Array.from(d),u.iteratee(o)):[]}e.uniqBy=h})(qS)),qS}var yP,AL;function iJ(){return AL||(AL=1,yP=nJ().uniqBy),yP}var aJ=iJ();const IL=Sh(aJ);function qF(e,t,r){return t===!0?IL(e,r):typeof t=="function"?IL(e,t):e}var vP={exports:{}},_P={},xP={exports:{}},bP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OL;function oJ(){if(OL)return bP;OL=1;var e=Dy();function t(M,O){return M===O&&(M!==0||1/M===1/O)||M!==M&&O!==O}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,u=e.useEffect,h=e.useLayoutEffect,d=e.useDebugValue;function o(M,O){var z=O(),F=n({inst:{value:z,getSnapshot:O}}),B=F[0].inst,D=F[1];return h(function(){B.value=z,B.getSnapshot=O,_(B)&&D({inst:B})},[M,z,O]),u(function(){return _(B)&&D({inst:B}),M(function(){_(B)&&D({inst:B})})},[M]),d(z),z}function _(M){var O=M.getSnapshot;M=M.value;try{var z=O();return!r(M,z)}catch{return!0}}function P(M,O){return O()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:o;return bP.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:S,bP}var LL;function sJ(){return LL||(LL=1,xP.exports=oJ()),xP.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DL;function lJ(){if(DL)return _P;DL=1;var e=Dy(),t=sJ();function r(P,S){return P===S&&(P!==0||1/P===1/S)||P!==P&&S!==S}var n=typeof Object.is=="function"?Object.is:r,u=t.useSyncExternalStore,h=e.useRef,d=e.useEffect,o=e.useMemo,_=e.useDebugValue;return _P.useSyncExternalStoreWithSelector=function(P,S,M,O,z){var F=h(null);if(F.current===null){var B={hasValue:!1,value:null};F.current=B}else B=F.current;F=o(function(){function H(he){if(!Q){if(Q=!0,te=he,he=O(he),z!==void 0&&B.hasValue){var re=B.value;if(z(re,he))return ie=re}return ie=he}if(re=ie,n(te,he))return re;var be=O(he);return z!==void 0&&z(re,be)?(te=he,re):(te=he,ie=be)}var Q=!1,te,ie,ae=M===void 0?null:M;return[function(){return H(S())},ae===null?void 0:function(){return H(ae())}]},[S,M,O,z]);var D=u(P,F[0],F[1]);return d(function(){B.hasValue=!0,B.value=D},[D]),_(D),D},_P}var RL;function uJ(){return RL||(RL=1,vP.exports=lJ()),vP.exports}var cJ=uJ(),$C=A.createContext(null),hJ=e=>e,Ki=()=>{var e=A.useContext($C);return e?e.store.dispatch:hJ},Nx=()=>{},dJ=()=>Nx,fJ=(e,t)=>e===t;function Or(e){var t=A.useContext($C);return cJ.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:dJ,t?t.store.getState:Nx,t?t.store.getState:Nx,t?e:Nx,fJ)}var wP={},SP={},PP={},jL;function pJ(){return jL||(jL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,u,h)=>{if(n!==u){const d=t(n),o=t(u);if(d===o&&d===0){if(n<u)return h==="desc"?1:-1;if(n>u)return h==="desc"?-1:1}return h==="desc"?o-d:d-o}return 0};e.compareValues=r})(PP)),PP}var EP={},CP={},zL;function GF(){return zL||(zL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(CP)),CP}var NL;function mJ(){return NL||(NL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function u(h,d){return Array.isArray(h)?!1:typeof h=="number"||typeof h=="boolean"||h==null||t.isSymbol(h)?!0:typeof h=="string"&&(n.test(h)||!r.test(h))||d!=null&&Object.hasOwn(d,h)}e.isKey=u})(EP)),EP}var FL;function gJ(){return FL||(FL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pJ(),r=mJ(),n=zC();function u(h,d,o,_){if(h==null)return[];o=_?void 0:o,Array.isArray(h)||(h=Object.values(h)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(z=>String(z));const P=(z,F)=>{let B=z;for(let D=0;D<F.length&&B!=null;++D)B=B[F[D]];return B},S=(z,F)=>F==null||z==null?F:typeof z=="object"&&"key"in z?Object.hasOwn(F,z.key)?F[z.key]:P(F,z.path):typeof z=="function"?z(F):Array.isArray(z)?P(F,z):typeof F=="object"?F[z]:F,M=d.map(z=>(Array.isArray(z)&&z.length===1&&(z=z[0]),z==null||typeof z=="function"||Array.isArray(z)||r.isKey(z)?z:{key:z,path:n.toPath(z)}));return h.map(z=>({original:z,criteria:M.map(F=>S(F,z))})).slice().sort((z,F)=>{for(let B=0;B<M.length;B++){const D=t.compareValues(z.criteria[B],F.criteria[B],o[B]);if(D!==0)return D}return 0}).map(z=>z.original)}e.orderBy=u})(SP)),SP}var TP={},BL;function yJ(){return BL||(BL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const u=[],h=Math.floor(n),d=(o,_)=>{for(let P=0;P<o.length;P++){const S=o[P];Array.isArray(S)&&_<h?d(S,_+1):u.push(S)}};return d(r,0),u}e.flatten=t})(TP)),TP}var MP={},VL;function WF(){return VL||(VL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UF(),r=VC(),n=jF(),u=NF();function h(d,o,_){return n.isObject(_)&&(typeof o=="number"&&r.isArrayLike(_)&&t.isIndex(o)&&o<_.length||typeof o=="string"&&o in _)?u.eq(_[o],d):!1}e.isIterateeCall=h})(MP)),MP}var $L;function vJ(){return $L||($L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gJ(),r=yJ(),n=WF();function u(h,...d){const o=d.length;return o>1&&n.isIterateeCall(h,d[0],d[1])?d=[]:o>2&&n.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(h,r.flatten(d),["asc"])}e.sortBy=u})(wP)),wP}var kP,UL;function _J(){return UL||(UL=1,kP=vJ().sortBy),kP}var xJ=_J();const Rw=Sh(xJ);var HF=e=>e.legend.settings,bJ=e=>e.legend.size,wJ=e=>e.legend.payload,SJ=Tt([wJ,HF],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rw(n,r):n});function PJ(){return Or(SJ)}var px=1;function ZF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=A.useState({height:0,left:0,top:0,width:0}),n=A.useCallback(u=>{if(u!=null){var h=u.getBoundingClientRect(),d={height:h.height,left:h.left,top:h.top,width:h.width};(Math.abs(d.height-t.height)>px||Math.abs(d.left-t.left)>px||Math.abs(d.top-t.top)>px||Math.abs(d.width-t.width)>px)&&r({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}var EJ={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KF=Yo({name:"chartLayout",initialState:EJ,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,u,h;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(u=t.payload.bottom)!==null&&u!==void 0?u:0,e.margin.left=(h=t.payload.left)!==null&&h!==void 0?h:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:CJ,setLayout:TJ,setChartSize:MJ,setScale:kJ}=KF.actions,AJ=KF.reducer;function XF(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function qL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qL(Object(r),!0).forEach(function(n){IJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IJ(e,t,r){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OJ(e){var t=LJ(e,"string");return typeof t=="symbol"?t:t+""}function LJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(e,t,r){return Zi(e)||Zi(t)?r:xh(t)?Ty(e,t,r):typeof t=="function"?t(e):r}var DJ=(e,t,r)=>{if(t&&r){var{width:n,height:u}=r,{align:h,verticalAlign:d,layout:o}=t;if((o==="vertical"||o==="horizontal"&&d==="middle")&&h!=="center"&&_r(e[h]))return ny(ny({},e),{},{[h]:e[h]+(n||0)});if((o==="horizontal"||o==="vertical"&&h==="center")&&d!=="middle"&&_r(e[d]))return ny(ny({},e),{},{[d]:e[d]+(u||0)})}return e},Nd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",YF=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var u,h,d=e.map(o=>(o.coordinate===t&&(u=!0),o.coordinate===r&&(h=!0),o.coordinate));return u||d.push(t),h||d.push(r),d},QF=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:u,range:h,scale:d,realScaleType:o,isCategorical:_,categoricalDomain:P,tickCount:S,ticks:M,niceTicks:O,axisType:z}=e;if(!d)return null;var F=o==="scaleBand"&&d.bandwidth?d.bandwidth()/2:2,B=u==="category"&&d.bandwidth?d.bandwidth()/F:0;if(B=z==="angleAxis"&&h&&h.length>=2?Ys(h[0]-h[1])*2*B:B,M||O){var D=(M||O||[]).map((H,Q)=>{var te=n?n.indexOf(H):H;return{coordinate:d(te)+B,value:H,offset:B,index:Q}});return D.filter(H=>!_u(H.coordinate))}return _&&P?P.map((H,Q)=>({coordinate:d(H)+B,value:H,index:Q,offset:B})):d.ticks&&S!=null?d.ticks(S).map((H,Q)=>({coordinate:d(H)+B,value:H,offset:B,index:Q})):d.domain().map((H,Q)=>({coordinate:d(H)+B,value:n?n[H]:H,index:Q,offset:B}))},GL=1e-4,RJ=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),u=Math.min(n[0],n[1])-GL,h=Math.max(n[0],n[1])+GL,d=e(t[0]),o=e(t[r-1]);(d<u||d>h||o<u||o>h)&&e.domain([t[0],t[r-1]])}},jJ=(e,t)=>{if(!t||t.length!==2||!_r(t[0])||!_r(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),u=[e[0],e[1]];return(!_r(e[0])||e[0]<r)&&(u[0]=r),(!_r(e[1])||e[1]>n)&&(u[1]=n),u[0]>n&&(u[0]=n),u[1]<r&&(u[1]=r),u},zJ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var u=0,h=0,d=0;d<t;++d){var o=_u(e[d][r][1])?e[d][r][0]:e[d][r][1];o>=0?(e[d][r][0]=u,e[d][r][1]=u+o,u=e[d][r][1]):(e[d][r][0]=h,e[d][r][1]=h+o,h=e[d][r][1])}},NJ=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var u=0,h=0;h<t;++h){var d=_u(e[h][r][1])?e[h][r][0]:e[h][r][1];d>=0?(e[h][r][0]=u,e[h][r][1]=u+d,u=e[h][r][1]):(e[h][r][0]=0,e[h][r][1]=0)}},FJ={sign:zJ,expand:uQ,none:Cy,silhouette:cQ,wiggle:hQ,positive:NJ},BJ=(e,t,r)=>{var n=FJ[r],u=lQ().keys(t).value((h,d)=>Number(Ha(h,d,0))).order(aE).offset(n);return u(e)};function JF(e){return e==null?void 0:String(e)}function WL(e){var{axis:t,ticks:r,bandSize:n,entry:u,index:h,dataKey:d}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Zi(u[t.dataKey])){var o=OF(r,"value",u[t.dataKey]);if(o)return o.coordinate+n/2}return r[h]?r[h].coordinate+n/2:null}var _=Ha(u,Zi(d)?t.dataKey:d);return Zi(_)?null:t.scale(_)}var HL=e=>{var{axis:t,ticks:r,offset:n,bandSize:u,entry:h,index:d}=e;if(t.type==="category")return r[d]?r[d].coordinate+n:null;var o=Ha(h,t.dataKey,t.scale.domain()[d]);return Zi(o)?null:t.scale(o)-u/2+n},VJ=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),u=Math.max(r[0],r[1]);return n<=0&&u>=0?0:u<0?u:n}return r[0]},$J=e=>{var t=e.flat(2).filter(_r);return[Math.min(...t),Math.max(...t)]},UJ=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],qJ=(e,t,r)=>{if(e!=null)return UJ(Object.keys(e).reduce((n,u)=>{var h=e[u],{stackedData:d}=h,o=d.reduce((_,P)=>{var S=XF(P,t,r),M=$J(S);return[Math.min(_[0],M[0]),Math.max(_[1],M[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},ZL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,My=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var u=Rw(t,S=>S.coordinate),h=1/0,d=1,o=u.length;d<o;d++){var _=u[d],P=u[d-1];h=Math.min((_.coordinate||0)-(P.coordinate||0),h)}return h===1/0?0:h}return r?void 0:0};function XL(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:u,name:h}=e;return ny(ny({},t),{},{dataKey:r,payload:n,value:u,name:h})}function jw(e,t){if(e)return String(e);if(typeof t=="string")return t}var GJ=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},WJ=(e,t)=>t==="centric"?e.angle:e.radius,Fd=e=>e.layout.width,Bd=e=>e.layout.height,HJ=e=>e.layout.scale,eB=e=>e.layout.margin,zw=Tt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nw=Tt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),ZJ="data-recharts-item-index",KJ="data-recharts-item-data-key",H_=60;function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(n){XJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XJ(e,t,r){return(t=YJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJ(e){var t=QJ(e,"string");return typeof t=="symbol"?t:t+""}function QJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JJ=e=>e.brush.height;function eee(e){var t=Nw(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var u=typeof n.width=="number"?n.width:H_;return r+u}return r},0)}function tee(e){var t=Nw(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var u=typeof n.width=="number"?n.width:H_;return r+u}return r},0)}function ree(e){var t=zw(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function nee(e){var t=zw(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var bo=Tt([Fd,Bd,eB,JJ,eee,tee,ree,nee,HF,bJ],(e,t,r,n,u,h,d,o,_,P)=>{var S={left:(r.left||0)+u,right:(r.right||0)+h},M={top:(r.top||0)+d,bottom:(r.bottom||0)+o},O=mx(mx({},M),S),z=O.bottom;O.bottom+=n,O=DJ(O,_,P);var F=e-O.left-O.right,B=t-O.top-O.bottom;return mx(mx({brushBottom:z},O),{},{width:Math.max(F,0),height:Math.max(B,0)})}),iee=Tt(bo,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),UC=Tt(Fd,Bd,(e,t)=>({x:0,y:0,width:e,height:t})),aee=A.createContext(null),Qo=()=>A.useContext(aee)!=null,Fw=e=>e.brush,Bw=Tt([Fw,bo,eB],(e,t,r)=>({height:e.height,x:_r(e.x)?e.x:t.left,y:_r(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:_r(e.width)?e.width:t.width})),AP={},IP={},OP={},QL;function oee(){return QL||(QL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:u,edges:h}={}){let d,o=null;const _=h!=null&&h.includes("leading"),P=h==null||h.includes("trailing"),S=()=>{o!==null&&(r.apply(d,o),d=void 0,o=null)},M=()=>{P&&S(),B()};let O=null;const z=()=>{O!=null&&clearTimeout(O),O=setTimeout(()=>{O=null,M()},n)},F=()=>{O!==null&&(clearTimeout(O),O=null)},B=()=>{F(),d=void 0,o=null},D=()=>{S()},H=function(...Q){if(u!=null&&u.aborted)return;d=this,o=Q;const te=O==null;z(),_&&te&&S()};return H.schedule=z,H.cancel=B,H.flush=D,u==null||u.addEventListener("abort",B,{once:!0}),H}e.debounce=t})(OP)),OP}var JL;function see(){return JL||(JL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oee();function r(n,u=0,h={}){typeof h!="object"&&(h={});const{leading:d=!1,trailing:o=!0,maxWait:_}=h,P=Array(2);d&&(P[0]="leading"),o&&(P[1]="trailing");let S,M=null;const O=t.debounce(function(...B){S=n.apply(this,B),M=null},u,{edges:P}),z=function(...B){return _!=null&&(M===null&&(M=Date.now()),Date.now()-M>=_)?(S=n.apply(this,B),M=Date.now(),O.cancel(),O.schedule(),S):(O.apply(this,B),S)},F=()=>(O.flush(),S);return z.cancel=O.cancel,z.flush=F,z}e.debounce=r})(IP)),IP}var eD;function lee(){return eD||(eD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=see();function r(n,u=0,h={}){const{leading:d=!0,trailing:o=!0}=h;return t.debounce(n,u,{leading:d,maxWait:u,trailing:o})}e.throttle=r})(AP)),AP}var LP,tD;function uee(){return tD||(tD=1,LP=lee().throttle),LP}var cee=uee();const hee=Sh(cee);var Pb=function(t,r){for(var n=arguments.length,u=new Array(n>2?n-2:0),h=2;h<n;h++)u[h-2]=arguments[h];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(r.replace(/%s/g,()=>u[d++]))}},tB=(e,t,r)=>{var{width:n="100%",height:u="100%",aspect:h,maxHeight:d}=r,o=Od(n)?e:Number(n),_=Od(u)?t:Number(u);return h&&h>0&&(o?_=o/h:_&&(o=_*h),d&&_!=null&&_>d&&(_=d)),{calculatedWidth:o,calculatedHeight:_}},dee={width:0,height:0,overflow:"visible"},fee={width:0,overflowX:"visible"},pee={height:0,overflowY:"visible"},mee={},gee=e=>{var{width:t,height:r}=e,n=Od(t),u=Od(r);return n&&u?dee:n?fee:u?pee:mee};function yee(e){var{width:t,height:r,aspect:n}=e,u=t,h=r;return u===void 0&&h===void 0?(u="100%",h="100%"):u===void 0?u=n&&n>0?void 0:"100%":h===void 0&&(h=n&&n>0?void 0:"100%"),{width:u,height:h}}function Ai(e){return Number.isFinite(e)}function bh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sE.apply(null,arguments)}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function nD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(n){vee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vee(e,t,r){return(t=_ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ee(e){var t=xee(e,"string");return typeof t=="symbol"?t:t+""}function xee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rB=A.createContext({width:-1,height:-1});function bee(e){return bh(e.width)&&bh(e.height)}function nB(e){var{children:t,width:r,height:n}=e,u=A.useMemo(()=>({width:r,height:n}),[r,n]);return bee(u)?A.createElement(rB.Provider,{value:u},t):null}var qC=()=>A.useContext(rB),wee=A.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:u,height:h,minWidth:d=0,minHeight:o,maxHeight:_,children:P,debounce:S=0,id:M,className:O,onResize:z,style:F={}}=e,B=A.useRef(null),D=A.useRef();D.current=z,A.useImperativeHandle(t,()=>B.current);var[H,Q]=A.useState({containerWidth:n.width,containerHeight:n.height}),te=A.useCallback((be,xe)=>{Q($e=>{var Ee=Math.round(be),Ne=Math.round(xe);return $e.containerWidth===Ee&&$e.containerHeight===Ne?$e:{containerWidth:Ee,containerHeight:Ne}})},[]);A.useEffect(()=>{if(B.current==null||typeof ResizeObserver>"u")return W_;var be=Ne=>{var Xe,{width:ut,height:pt}=Ne[0].contentRect;te(ut,pt),(Xe=D.current)===null||Xe===void 0||Xe.call(D,ut,pt)};S>0&&(be=hee(be,S,{trailing:!0,leading:!1}));var xe=new ResizeObserver(be),{width:$e,height:Ee}=B.current.getBoundingClientRect();return te($e,Ee),xe.observe(B.current),()=>{xe.disconnect()}},[te,S]);var{containerWidth:ie,containerHeight:ae}=H;Pb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:he,calculatedHeight:re}=tB(ie,ae,{width:u,height:h,aspect:r,maxHeight:_});return Pb(he!=null&&he>0||re!=null&&re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,he,re,u,h,d,o,r),A.createElement("div",{id:M?"".concat(M):void 0,className:ti("recharts-responsive-container",O),style:nD(nD({},F),{},{width:u,height:h,minWidth:d,minHeight:o,maxHeight:_}),ref:B},A.createElement("div",{style:gee({width:u,height:h})},A.createElement(nB,{width:he,height:re},P)))}),iB=A.forwardRef((e,t)=>{var r=qC();if(bh(r.width)&&bh(r.height))return e.children;var{width:n,height:u}=yee({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:h,calculatedHeight:d}=tB(void 0,void 0,{width:n,height:u,aspect:e.aspect,maxHeight:e.maxHeight});return _r(h)&&_r(d)?A.createElement(nB,{width:h,height:d},e.children):A.createElement(wee,sE({},e,{width:n,height:u,ref:t}))});function aB(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Vw=()=>{var e,t=Qo(),r=Or(iee),n=Or(Bw),u=(e=Or(Fw))===null||e===void 0?void 0:e.padding;return!t||!n||!u?r:{width:n.width-u.left-u.right,height:n.height-u.top-u.bottom,x:u.left,y:u.top}},See={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},oB=()=>{var e;return(e=Or(bo))!==null&&e!==void 0?e:See},GC=()=>Or(Fd),WC=()=>Or(Bd),Pee=()=>Or(e=>e.layout.margin),Bn=e=>e.layout.layoutType,qy=()=>Or(Bn),Eee=()=>{var e=qy();if(e==="horizontal"||e==="vertical")return e},Cee=()=>{var e=qy();return e!==void 0},$w=e=>{var t=Ki(),r=Qo(),{width:n,height:u}=e,h=qC(),d=n,o=u;return h&&(d=h.width>0?h.width:n,o=h.height>0?h.height:u),A.useEffect(()=>{!r&&bh(d)&&bh(o)&&t(MJ({width:d,height:o}))},[t,r,d,o]),null},sB=Symbol.for("immer-nothing"),iD=Symbol.for("immer-draftable"),Il=Symbol.for("immer-state");function _c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var p_=Object.getPrototypeOf;function ky(e){return!!e&&!!e[Il]}function Ym(e){var t;return e?lB(e)||Array.isArray(e)||!!e[iD]||!!((t=e.constructor)!=null&&t[iD])||Z_(e)||qw(e):!1}var Tee=Object.prototype.constructor.toString(),aD=new WeakMap;function lB(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=aD.get(r);return n===void 0&&(n=Function.toString.call(r),aD.set(r,n)),n===Tee}function Eb(e,t,r=!0){Uw(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(u=>{t(u,e[u],e)}):e.forEach((n,u)=>t(u,n,e))}function Uw(e){const t=e[Il];return t?t.type_:Array.isArray(e)?1:Z_(e)?2:qw(e)?3:0}function lE(e,t){return Uw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uB(e,t,r){const n=Uw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Mee(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Z_(e){return e instanceof Map}function qw(e){return e instanceof Set}function Pm(e){return e.copy_||e.base_}function uE(e,t){if(Z_(e))return new Map(e);if(qw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=lB(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Il];let u=Reflect.ownKeys(n);for(let h=0;h<u.length;h++){const d=u[h],o=n[d];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[d]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[d]})}return Object.create(p_(e),n)}else{const n=p_(e);if(n!==null&&r)return{...e};const u=Object.create(n);return Object.assign(u,e)}}function HC(e,t=!1){return Gw(e)||ky(e)||!Ym(e)||(Uw(e)>1&&Object.defineProperties(e,{set:gx,add:gx,clear:gx,delete:gx}),Object.freeze(e),t&&Object.values(e).forEach(r=>HC(r,!0))),e}function kee(){_c(2)}var gx={value:kee};function Gw(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Aee={};function Qm(e){const t=Aee[e];return t||_c(0,e),t}var m_;function cB(){return m_}function Iee(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oD(e,t){t&&(Qm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cE(e){hE(e),e.drafts_.forEach(Oee),e.drafts_=null}function hE(e){e===m_&&(m_=e.parent_)}function sD(e){return m_=Iee(m_,e)}function Oee(e){const t=e[Il];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lD(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Il].modified_&&(cE(t),_c(4)),Ym(e)&&(e=Cb(t,e),t.parent_||Tb(t,e)),t.patches_&&Qm("Patches").generateReplacementPatches_(r[Il].base_,e,t.patches_,t.inversePatches_)):e=Cb(t,r,[]),cE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sB?e:void 0}function Cb(e,t,r){if(Gw(t))return t;const n=e.immer_.shouldUseStrictIteration(),u=t[Il];if(!u)return Eb(t,(h,d)=>uD(e,u,t,h,d,r),n),t;if(u.scope_!==e)return t;if(!u.modified_)return Tb(e,u.base_,!0),u.base_;if(!u.finalized_){u.finalized_=!0,u.scope_.unfinalizedDrafts_--;const h=u.copy_;let d=h,o=!1;u.type_===3&&(d=new Set(h),h.clear(),o=!0),Eb(d,(_,P)=>uD(e,u,h,_,P,r,o),n),Tb(e,h,!1),r&&e.patches_&&Qm("Patches").generatePatches_(u,r,e.patches_,e.inversePatches_)}return u.copy_}function uD(e,t,r,n,u,h,d){if(u==null||typeof u!="object"&&!d)return;const o=Gw(u);if(!(o&&!d)){if(ky(u)){const _=h&&t&&t.type_!==3&&!lE(t.assigned_,n)?h.concat(n):void 0,P=Cb(e,u,_);if(uB(r,n,P),ky(P))e.canAutoFreeze_=!1;else return}else d&&r.add(u);if(Ym(u)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===u&&o)return;Cb(e,u),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Z_(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Tb(e,u)}}}function Tb(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&HC(t,r)}function Lee(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:cB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=n,h=ZC;r&&(u=[n],h=g_);const{revoke:d,proxy:o}=Proxy.revocable(u,h);return n.draft_=o,n.revoke_=d,o}var ZC={get(e,t){if(t===Il)return e;const r=Pm(e);if(!lE(r,t))return Dee(e,r,t);const n=r[t];return e.finalized_||!Ym(n)?n:n===DP(e.base_,t)?(RP(e),e.copy_[t]=fE(n,e)):n},has(e,t){return t in Pm(e)},ownKeys(e){return Reflect.ownKeys(Pm(e))},set(e,t,r){const n=hB(Pm(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const u=DP(Pm(e),t),h=u==null?void 0:u[Il];if(h&&h.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Mee(r,u)&&(r!==void 0||lE(e.base_,t)))return!0;RP(e),dE(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return DP(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,RP(e),dE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Pm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){_c(11)},getPrototypeOf(e){return p_(e.base_)},setPrototypeOf(){_c(12)}},g_={};Eb(ZC,(e,t)=>{g_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});g_.deleteProperty=function(e,t){return g_.set.call(this,e,t,void 0)};g_.set=function(e,t,r){return ZC.set.call(this,e[0],t,r,e[0])};function DP(e,t){const r=e[Il];return(r?Pm(r):e)[t]}function Dee(e,t,r){var u;const n=hB(t,r);return n?"value"in n?n.value:(u=n.get)==null?void 0:u.call(e.draft_):void 0}function hB(e,t){if(!(t in e))return;let r=p_(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=p_(r)}}function dE(e){e.modified_||(e.modified_=!0,e.parent_&&dE(e.parent_))}function RP(e){e.copy_||(e.copy_=uE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ree=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const h=r;r=t;const d=this;return function(_=h,...P){return d.produce(_,S=>r.call(this,S,...P))}}typeof r!="function"&&_c(6),n!==void 0&&typeof n!="function"&&_c(7);let u;if(Ym(t)){const h=sD(this),d=fE(t,void 0);let o=!0;try{u=r(d),o=!1}finally{o?cE(h):hE(h)}return oD(h,n),lD(u,h)}else if(!t||typeof t!="object"){if(u=r(t),u===void 0&&(u=t),u===sB&&(u=void 0),this.autoFreeze_&&HC(u,!0),n){const h=[],d=[];Qm("Patches").generateReplacementPatches_(t,u,h,d),n(h,d)}return u}else _c(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(d,...o)=>this.produceWithPatches(d,_=>t(_,...o));let n,u;return[this.produce(t,r,(d,o)=>{n=d,u=o}),n,u]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ym(e)||_c(8),ky(e)&&(e=jee(e));const t=sD(this),r=fE(e,void 0);return r[Il].isManual_=!0,hE(t),r}finishDraft(e,t){const r=e&&e[Il];(!r||!r.isManual_)&&_c(9);const{scope_:n}=r;return oD(n,t),lD(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const u=t[r];if(u.path.length===0&&u.op==="replace"){e=u.value;break}}r>-1&&(t=t.slice(r+1));const n=Qm("Patches").applyPatches_;return ky(e)?n(e,t):this.produce(e,u=>n(u,t))}};function fE(e,t){const r=Z_(e)?Qm("MapSet").proxyMap_(e,t):qw(e)?Qm("MapSet").proxySet_(e,t):Lee(e,t);return(t?t.scope_:cB()).drafts_.push(r),r}function jee(e){return ky(e)||_c(10,e),dB(e)}function dB(e){if(!Ym(e)||Gw(e))return e;const t=e[Il];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=uE(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=uE(e,!0);return Eb(r,(u,h)=>{uB(r,u,dB(h))},n),t&&(t.finalized_=!1),r}var zee=new Ree;zee.produce;var Nee={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},fB=Yo({name:"legend",initialState:Nee,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Bi()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,u=bc(e).payload.indexOf(r);u>-1&&(e.payload[u]=n)},prepare:Bi()},removeLegendPayload:{reducer(e,t){var r=bc(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Bi()}}}),{setLegendSize:cD,setLegendSettings:Fee,addLegendPayload:Bee,replaceLegendPayload:Vee,removeLegendPayload:$ee}=fB.actions,Uee=fB.reducer,qee=["contextPayload"];function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pE.apply(null,arguments)}function hD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hD(Object(r),!0).forEach(function(n){Gee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gee(e,t,r){return(t=Wee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wee(e){var t=Hee(e,"string");return typeof t=="symbol"?t:t+""}function Hee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zee(e,t){if(e==null)return{};var r,n,u=Kee(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Kee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xee(e){return e.value}function Yee(e){var{contextPayload:t}=e,r=Zee(e,qee),n=qF(t,e.payloadUniqBy,Xee),u=Ay(Ay({},r),{},{payload:n});return A.isValidElement(e.content)?A.cloneElement(e.content,u):typeof e.content=="function"?A.createElement(e.content,u):A.createElement(BQ,u)}function Qee(e,t,r,n,u,h){var{layout:d,align:o,verticalAlign:_}=t,P,S;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&d==="vertical"?P={left:((n||0)-h.width)/2}:P=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(_==="middle"?S={top:((u||0)-h.height)/2}:S=_==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ay(Ay({},P),S)}function Jee(e){var t=Ki();return A.useEffect(()=>{t(Fee(e))},[t,e]),null}function ete(e){var t=Ki();return A.useEffect(()=>(t(cD(e)),()=>{t(cD({width:0,height:0}))}),[t,e]),null}function tte(e,t,r,n){return e==="vertical"&&_r(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var rte={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function pB(e){var t=Ao(e,rte),r=PJ(),n=OY(),u=Pee(),{width:h,height:d,wrapperStyle:o,portal:_}=t,[P,S]=ZF([r]),M=GC(),O=WC();if(M==null||O==null)return null;var z=M-((u==null?void 0:u.left)||0)-((u==null?void 0:u.right)||0),F=tte(t.layout,d,h,z),B=_?o:Ay(Ay({position:"absolute",width:(F==null?void 0:F.width)||h||"auto",height:(F==null?void 0:F.height)||d||"auto"},Qee(o,t,u,M,O,P)),o),D=_??n;if(D==null||r==null)return null;var H=A.createElement("div",{className:"recharts-legend-wrapper",style:B,ref:S},A.createElement(Jee,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!_&&A.createElement(ete,{width:P.width,height:P.height}),A.createElement(Yee,pE({},t,F,{margin:u,chartWidth:M,chartHeight:O,contextPayload:r})));return Cc.createPortal(H,D)}pB.displayName="Legend";function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mE.apply(null,arguments)}function dD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function jP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dD(Object(r),!0).forEach(function(n){nte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nte(e,t,r){return(t=ite(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ite(e){var t=ate(e,"string");return typeof t=="symbol"?t:t+""}function ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ote(e){return Array.isArray(e)&&xh(e[0])&&xh(e[1])?e.join(" ~ "):e}var ste=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:u={},payload:h,formatter:d,itemSorter:o,wrapperClassName:_,labelClassName:P,label:S,labelFormatter:M,accessibilityLayer:O=!1}=e,z=()=>{if(h&&h.length){var ae={padding:0,margin:0},he=(o?Rw(h,o):h).map((re,be)=>{if(re.type==="none")return null;var xe=re.formatter||d||ote,{value:$e,name:Ee}=re,Ne=$e,Xe=Ee;if(xe){var ut=xe($e,Ee,re,be,h);if(Array.isArray(ut))[Ne,Xe]=ut;else if(ut!=null)Ne=ut;else return null}var pt=jP({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},n);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(be),style:pt},xh(Xe)?A.createElement("span",{className:"recharts-tooltip-item-name"},Xe):null,xh(Xe)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},Ne),A.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:ae},he)}return null},F=jP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),B=jP({margin:0},u),D=!Zi(S),H=D?S:"",Q=ti("recharts-default-tooltip",_),te=ti("recharts-tooltip-label",P);D&&M&&h!==void 0&&h!==null&&(H=M(S,h));var ie=O?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",mE({className:Q,style:F},ie),A.createElement("p",{className:te,style:B},A.isValidElement(H)?H:"".concat(H)),z())},Vv="recharts-tooltip-wrapper",lte={visibility:"hidden"};function ute(e){var{coordinate:t,translateX:r,translateY:n}=e;return ti(Vv,{["".concat(Vv,"-right")]:_r(r)&&t&&_r(t.x)&&r>=t.x,["".concat(Vv,"-left")]:_r(r)&&t&&_r(t.x)&&r<t.x,["".concat(Vv,"-bottom")]:_r(n)&&t&&_r(t.y)&&n>=t.y,["".concat(Vv,"-top")]:_r(n)&&t&&_r(t.y)&&n<t.y})}function fD(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:u,position:h,reverseDirection:d,tooltipDimension:o,viewBox:_,viewBoxDimension:P}=e;if(h&&_r(h[n]))return h[n];var S=r[n]-o-(u>0?u:0),M=r[n]+u;if(t[n])return d[n]?S:M;var O=_[n];if(O==null)return 0;if(d[n]){var z=S,F=O;return z<F?Math.max(M,O):Math.max(S,O)}if(P==null)return 0;var B=M+o,D=O+P;return B>D?Math.max(S,O):Math.max(M,O)}function cte(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function hte(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:u,reverseDirection:h,tooltipBox:d,useTranslate3d:o,viewBox:_}=e,P,S,M;return d.height>0&&d.width>0&&r?(S=fD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:u,reverseDirection:h,tooltipDimension:d.width,viewBox:_,viewBoxDimension:_.width}),M=fD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:u,reverseDirection:h,tooltipDimension:d.height,viewBox:_,viewBoxDimension:_.height}),P=cte({translateX:S,translateY:M,useTranslate3d:o})):P=lte,{cssProperties:P,cssClasses:ute({translateX:S,translateY:M,coordinate:r})}}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function yx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){gE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gE(e,t,r){return(t=dte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dte(e){var t=fte(e,"string");return typeof t=="symbol"?t:t+""}function fte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pte extends A.PureComponent{constructor(){super(...arguments),gE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),gE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,u,h;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(u=(h=this.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:u,children:h,coordinate:d,hasPayload:o,isAnimationActive:_,offset:P,position:S,reverseDirection:M,useTranslate3d:O,viewBox:z,wrapperStyle:F,lastBoundingBox:B,innerRef:D,hasPortalFromProps:H}=this.props,{cssClasses:Q,cssProperties:te}=hte({allowEscapeViewBox:r,coordinate:d,offsetTopLeft:P,position:S,reverseDirection:M,tooltipBox:{height:B.height,width:B.width},useTranslate3d:O,viewBox:z}),ie=H?{}:yx(yx({transition:_&&t?"transform ".concat(n,"ms ").concat(u):void 0},te),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),ae=yx(yx({},ie),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},F);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:Q,style:ae,ref:D},h)}}var mB=()=>{var e;return(e=Or(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yE.apply(null,arguments)}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function gD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){mte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mte(e,t,r){return(t=gte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=yte(e,"string");return typeof t=="symbol"?t:t+""}function yte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yD={curveBasisClosed:YY,curveBasisOpen:QY,curveBasis:XY,curveBumpX:jY,curveBumpY:zY,curveLinearClosed:JY,curveLinear:Ow,curveMonotoneX:eQ,curveMonotoneY:tQ,curveNatural:rQ,curveStep:nQ,curveStepAfter:aQ,curveStepBefore:iQ},Mb=e=>Ai(e.x)&&Ai(e.y),vD=e=>e.base!=null&&Mb(e.base)&&Mb(e),$v=e=>e.x,Uv=e=>e.y,vte=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(G_(e));return(r==="curveMonotone"||r==="curveBump")&&t?yD["".concat(r).concat(t==="vertical"?"Y":"X")]:yD[r]||Ow},_te=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:u,connectNulls:h=!1}=e,d=vte(t,u),o=h?r.filter(Mb):r,_;if(Array.isArray(n)){var P=r.map((z,F)=>gD(gD({},z),{},{base:n[F]}));u==="vertical"?_=fx().y(Uv).x1($v).x0(z=>z.base.x):_=fx().x($v).y1(Uv).y0(z=>z.base.y);var S=_.defined(vD).curve(d),M=h?P.filter(vD):P;return S(M)}u==="vertical"&&_r(n)?_=fx().y(Uv).x1($v).x0(n):_r(n)?_=fx().x($v).y1(Uv).y0(n):_=_F().x($v).y(Uv);var O=_.defined(Mb).curve(d);return O(o)},n_=e=>{var{className:t,points:r,path:n,pathRef:u}=e;if((!r||!r.length)&&!n)return null;var h=r&&r.length?_te(e):n;return A.createElement("path",yE({},vu(e),BC(e),{className:ti("recharts-curve",t),d:h===null?void 0:h,ref:u}))},xte=["x","y","top","left","width","height","className"];function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vE.apply(null,arguments)}function _D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function bte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_D(Object(r),!0).forEach(function(n){wte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wte(e,t,r){return(t=Ste(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ste(e){var t=Pte(e,"string");return typeof t=="symbol"?t:t+""}function Pte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ete(e,t){if(e==null)return{};var r,n,u=Cte(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Cte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tte=(e,t,r,n,u,h)=>"M".concat(e,",").concat(u,"v").concat(n,"M").concat(h,",").concat(t,"h").concat(r),Mte=e=>{var{x:t=0,y:r=0,top:n=0,left:u=0,width:h=0,height:d=0,className:o}=e,_=Ete(e,xte),P=bte({x:t,y:r,top:n,left:u,width:h,height:d},_);return!_r(t)||!_r(r)||!_r(h)||!_r(d)||!_r(n)||!_r(u)?null:A.createElement("path",vE({},Ps(P),{className:ti("recharts-cross",o),d:Tte(t,r,h,d,n,u)}))};function kte(e,t,r,n){var u=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-u,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function bD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xD(Object(r),!0).forEach(function(n){Ate(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ate(e,t,r){return(t=Ite(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ite(e){var t=Ote(e,"string");return typeof t=="symbol"?t:t+""}function Ote(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lte=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gB=(e,t,r)=>e.map(n=>"".concat(Lte(n)," ").concat(t,"ms ").concat(r)).join(","),Dte=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(u=>n.includes(u))),y_=(e,t)=>Object.keys(t).reduce((r,n)=>bD(bD({},r),{},{[n]:e(n,t[n])}),{});function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(n){Rte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rte(e,t,r){return(t=jte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jte(e){var t=zte(e,"string");return typeof t=="symbol"?t:t+""}function zte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kb=(e,t,r)=>e+(t-e)*r,_E=e=>{var{from:t,to:r}=e;return t!==r},yB=(e,t,r)=>{var n=y_((u,h)=>{if(_E(h)){var[d,o]=e(h.from,h.to,h.velocity);return Ga(Ga({},h),{},{from:d,velocity:o})}return h},t);return r<1?y_((u,h)=>_E(h)?Ga(Ga({},h),{},{velocity:kb(h.velocity,n[u].velocity,r),from:kb(h.from,n[u].from,r)}):h,t):yB(e,n,r-1)};function Nte(e,t,r,n,u,h){var d,o=n.reduce((O,z)=>Ga(Ga({},O),{},{[z]:{from:e[z],velocity:0,to:t[z]}}),{}),_=()=>y_((O,z)=>z.from,o),P=()=>!Object.values(o).filter(_E).length,S=null,M=O=>{d||(d=O);var z=O-d,F=z/r.dt;o=yB(r,o,F),u(Ga(Ga(Ga({},e),t),_())),d=O,P()||(S=h.setTimeout(M))};return()=>(S=h.setTimeout(M),()=>{var O;(O=S)===null||O===void 0||O()})}function Fte(e,t,r,n,u,h,d){var o=null,_=u.reduce((M,O)=>Ga(Ga({},M),{},{[O]:[e[O],t[O]]}),{}),P,S=M=>{P||(P=M);var O=(M-P)/n,z=y_((B,D)=>kb(...D,r(O)),_);if(h(Ga(Ga(Ga({},e),t),z)),O<1)o=d.setTimeout(S);else{var F=y_((B,D)=>kb(...D,r(1)),_);h(Ga(Ga(Ga({},e),t),F))}};return()=>(o=d.setTimeout(S),()=>{var M;(M=o)===null||M===void 0||M()})}const Bte=(e,t,r,n,u,h)=>{var d=Dte(e,t);return r==null?()=>(u(Ga(Ga({},e),t)),()=>{}):r.isStepper===!0?Nte(e,t,r,d,u,h):Fte(e,t,r,n,d,u,h)};var Ab=1e-4,vB=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],_B=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),SD=(e,t)=>r=>{var n=vB(e,t);return _B(n,r)},Vte=(e,t)=>r=>{var n=vB(e,t),u=[...n.map((h,d)=>h*d).slice(1),0];return _B(u,r)},$te=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var u,h=r[0].split("(");if(h[0]==="cubic-bezier"&&((u=h[1])===null||u===void 0?void 0:u.split(")")[0].split(",").length)===4){var d=h[1].split(")")[0].split(",").map(o=>parseFloat(o));return[d[0],d[1],d[2],d[3]]}}}return r.length===4?r:[0,0,1,1]},Ute=(e,t,r,n)=>{var u=SD(e,r),h=SD(t,n),d=Vte(e,r),o=P=>P>1?1:P<0?0:P,_=P=>{for(var S=P>1?1:P,M=S,O=0;O<8;++O){var z=u(M)-S,F=d(M);if(Math.abs(z-S)<Ab||F<Ab)return h(M);M=o(M-z/F)}return h(M)};return _.isStepper=!1,_},PD=function(){return Ute(...$te(...arguments))},qte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:u=17}=t,h=(d,o,_)=>{var P=-(d-o)*r,S=_*n,M=_+(P-S)*u/1e3,O=_*u/1e3+d;return Math.abs(O-o)<Ab&&Math.abs(M)<Ab?[o,0]:[O,M]};return h.isStepper=!0,h.dt=u,h},Gte=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PD(e);case"spring":return qte();default:if(e.split("(")[0]==="cubic-bezier")return PD(e)}return typeof e=="function"?e:null};function Wte(e){var t,r=()=>null,n=!1,u=null,h=d=>{if(!n){if(Array.isArray(d)){if(!d.length)return;var o=d,[_,...P]=o;if(typeof _=="number"){u=e.setTimeout(h.bind(null,P),_);return}h(_),u=e.setTimeout(h.bind(null,P));return}typeof d=="string"&&(t=d,r(t)),typeof d=="object"&&(t=d,r(t)),typeof d=="function"&&d()}};return{stop:()=>{n=!0},start:d=>{n=!1,u&&(u(),u=null),h(d)},subscribe:d=>(r=d,()=>{r=()=>null}),getTimeoutController:()=>e}}class Hte{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),u=null,h=d=>{d-n>=r?t(d):typeof requestAnimationFrame=="function"&&(u=requestAnimationFrame(h))};return u=requestAnimationFrame(h),()=>{u!=null&&cancelAnimationFrame(u)}}}function Zte(){return Wte(new Hte)}var Kte=A.createContext(Zte);function Xte(e,t){var r=A.useContext(Kte);return A.useMemo(()=>t??r(e),[e,t,r])}var Yte=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Gy={devToolsEnabled:!1,isSsr:Yte()},Qte={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ED={t:0},zP={t:1};function Ww(e){var t=Ao(e,Qte),{isActive:r,canBegin:n,duration:u,easing:h,begin:d,onAnimationEnd:o,onAnimationStart:_,children:P}=t,S=r==="auto"?!Gy.isSsr:r,M=Xte(t.animationId,t.animationManager),[O,z]=A.useState(S?ED:zP),F=A.useRef(null);return A.useEffect(()=>{S||z(zP)},[S]),A.useEffect(()=>{if(!S||!n)return W_;var B=Bte(ED,zP,Gte(h),u,z,M.getTimeoutController()),D=()=>{F.current=B()};return M.start([_,d,D,u,o]),()=>{M.stop(),F.current&&F.current(),o()}},[S,n,u,h,d,_,o,M]),P(O.t)}function Hw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=A.useRef(f_(t)),n=A.useRef(e);return n.current!==e&&(r.current=f_(t),n.current=e),r.current}var Jte=["radius"],ere=["radius"];function CD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function TD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CD(Object(r),!0).forEach(function(n){tre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tre(e,t,r){return(t=rre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rre(e){var t=nre(e,"string");return typeof t=="symbol"?t:t+""}function nre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ib.apply(null,arguments)}function MD(e,t){if(e==null)return{};var r,n,u=ire(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function ire(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kD=(e,t,r,n,u)=>{var h=Math.min(Math.abs(r)/2,Math.abs(n)/2),d=n>=0?1:-1,o=r>=0?1:-1,_=n>=0&&r>=0||n<0&&r<0?1:0,P;if(h>0&&u instanceof Array){for(var S=[0,0,0,0],M=0,O=4;M<O;M++)S[M]=u[M]>h?h:u[M];P="M".concat(e,",").concat(t+d*S[0]),S[0]>0&&(P+="A ".concat(S[0],",").concat(S[0],",0,0,").concat(_,",").concat(e+o*S[0],",").concat(t)),P+="L ".concat(e+r-o*S[1],",").concat(t),S[1]>0&&(P+="A ".concat(S[1],",").concat(S[1],",0,0,").concat(_,`,
        `).concat(e+r,",").concat(t+d*S[1])),P+="L ".concat(e+r,",").concat(t+n-d*S[2]),S[2]>0&&(P+="A ".concat(S[2],",").concat(S[2],",0,0,").concat(_,`,
        `).concat(e+r-o*S[2],",").concat(t+n)),P+="L ".concat(e+o*S[3],",").concat(t+n),S[3]>0&&(P+="A ".concat(S[3],",").concat(S[3],",0,0,").concat(_,`,
        `).concat(e,",").concat(t+n-d*S[3])),P+="Z"}else if(h>0&&u===+u&&u>0){var z=Math.min(h,u);P="M ".concat(e,",").concat(t+d*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+o*z,",").concat(t,`
            L `).concat(e+r-o*z,",").concat(t,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+r,",").concat(t+d*z,`
            L `).concat(e+r,",").concat(t+n-d*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e+r-o*z,",").concat(t+n,`
            L `).concat(e+o*z,",").concat(t+n,`
            A `).concat(z,",").concat(z,",0,0,").concat(_,",").concat(e,",").concat(t+n-d*z," Z")}else P="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return P},AD={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xB=e=>{var t=Ao(e,AD),r=A.useRef(null),[n,u]=A.useState(-1);A.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var wt=r.current.getTotalLength();wt&&u(wt)}catch{}},[]);var{x:h,y:d,width:o,height:_,radius:P,className:S}=t,{animationEasing:M,animationDuration:O,animationBegin:z,isAnimationActive:F,isUpdateAnimationActive:B}=t,D=A.useRef(o),H=A.useRef(_),Q=A.useRef(h),te=A.useRef(d),ie=A.useMemo(()=>({x:h,y:d,width:o,height:_,radius:P}),[h,d,o,_,P]),ae=Hw(ie,"rectangle-");if(h!==+h||d!==+d||o!==+o||_!==+_||o===0||_===0)return null;var he=ti("recharts-rectangle",S);if(!B){var re=Ps(t),{radius:be}=re,xe=MD(re,Jte);return A.createElement("path",Ib({},xe,{radius:typeof P=="number"?P:void 0,className:he,d:kD(h,d,o,_,P)}))}var $e=D.current,Ee=H.current,Ne=Q.current,Xe=te.current,ut="0px ".concat(n===-1?1:n,"px"),pt="".concat(n,"px 0px"),gt=gB(["strokeDasharray"],O,typeof M=="string"?M:AD.animationEasing);return A.createElement(Ww,{animationId:ae,key:ae,canBegin:n>0,duration:O,easing:M,isActive:B,begin:z},wt=>{var je=Hi($e,o,wt),Qe=Hi(Ee,_,wt),yt=Hi(Ne,h,wt),Oe=Hi(Xe,d,wt);r.current&&(D.current=je,H.current=Qe,Q.current=yt,te.current=Oe);var et;F?wt>0?et={transition:gt,strokeDasharray:pt}:et={strokeDasharray:ut}:et={strokeDasharray:pt};var Mt=Ps(t),{radius:Dt}=Mt,Ke=MD(Mt,ere);return A.createElement("path",Ib({},Ke,{radius:typeof P=="number"?P:void 0,className:he,d:kD(yt,Oe,je,Qe,P),ref:r,style:TD(TD({},et),t.style)}))})};function ID(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function OD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ID(Object(r),!0).forEach(function(n){are(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ID(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function are(e,t,r){return(t=ore(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ore(e){var t=sre(e,"string");return typeof t=="symbol"?t:t+""}function sre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ob=Math.PI/180,lre=e=>e*180/Math.PI,ko=(e,t,r,n)=>({x:e+Math.cos(-Ob*n)*r,y:t+Math.sin(-Ob*n)*r}),ure=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},cre=(e,t)=>{var{x:r,y:n}=e,{x:u,y:h}=t;return Math.sqrt((r-u)**2+(n-h)**2)},hre=(e,t)=>{var{x:r,y:n}=e,{cx:u,cy:h}=t,d=cre({x:r,y:n},{x:u,y:h});if(d<=0)return{radius:d,angle:0};var o=(r-u)/d,_=Math.acos(o);return n>h&&(_=2*Math.PI-_),{radius:d,angle:lre(_),angleInRadian:_}},dre=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),u=Math.floor(r/360),h=Math.min(n,u);return{startAngle:t-h*360,endAngle:r-h*360}},fre=(e,t)=>{var{startAngle:r,endAngle:n}=t,u=Math.floor(r/360),h=Math.floor(n/360),d=Math.min(u,h);return e+d*360},pre=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:u,angle:h}=hre({x:r,y:n},t),{innerRadius:d,outerRadius:o}=t;if(u<d||u>o||u===0)return null;var{startAngle:_,endAngle:P}=dre(t),S=h,M;if(_<=P){for(;S>P;)S-=360;for(;S<_;)S+=360;M=S>=_&&S<=P}else{for(;S>_;)S-=360;for(;S<P;)S+=360;M=S>=P&&S<=_}return M?OD(OD({},t),{},{radius:u,angle:fre(S,t)}):null};function bB(e){var{cx:t,cy:r,radius:n,startAngle:u,endAngle:h}=e,d=ko(t,r,n,u),o=ko(t,r,n,h);return{points:[d,o],cx:t,cy:r,radius:n,startAngle:u,endAngle:h}}function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xE.apply(null,arguments)}var mre=(e,t)=>{var r=Ys(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},vx=e=>{var{cx:t,cy:r,radius:n,angle:u,sign:h,isExternal:d,cornerRadius:o,cornerIsExternal:_}=e,P=o*(d?1:-1)+n,S=Math.asin(o/P)/Ob,M=_?u:u+h*S,O=ko(t,r,P,M),z=ko(t,r,n,M),F=_?u-h*S:u,B=ko(t,r,P*Math.cos(S*Ob),F);return{center:O,circleTangency:z,lineTangency:B,theta:S}},wB=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:u,startAngle:h,endAngle:d}=e,o=mre(h,d),_=h+o,P=ko(t,r,u,h),S=ko(t,r,u,_),M="M ".concat(P.x,",").concat(P.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(h>_),`,
    `).concat(S.x,",").concat(S.y,`
  `);if(n>0){var O=ko(t,r,n,h),z=ko(t,r,n,_);M+="L ".concat(z.x,",").concat(z.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(h<=_),`,
            `).concat(O.x,",").concat(O.y," Z")}else M+="L ".concat(t,",").concat(r," Z");return M},gre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:u,cornerRadius:h,forceCornerRadius:d,cornerIsExternal:o,startAngle:_,endAngle:P}=e,S=Ys(P-_),{circleTangency:M,lineTangency:O,theta:z}=vx({cx:t,cy:r,radius:u,angle:_,sign:S,cornerRadius:h,cornerIsExternal:o}),{circleTangency:F,lineTangency:B,theta:D}=vx({cx:t,cy:r,radius:u,angle:P,sign:-S,cornerRadius:h,cornerIsExternal:o}),H=o?Math.abs(_-P):Math.abs(_-P)-z-D;if(H<0)return d?"M ".concat(O.x,",").concat(O.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):wB({cx:t,cy:r,innerRadius:n,outerRadius:u,startAngle:_,endAngle:P});var Q="M ".concat(O.x,",").concat(O.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(H>180),",").concat(+(S<0),",").concat(F.x,",").concat(F.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(B.x,",").concat(B.y,`
  `);if(n>0){var{circleTangency:te,lineTangency:ie,theta:ae}=vx({cx:t,cy:r,radius:n,angle:_,sign:S,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),{circleTangency:he,lineTangency:re,theta:be}=vx({cx:t,cy:r,radius:n,angle:P,sign:-S,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),xe=o?Math.abs(_-P):Math.abs(_-P)-ae-be;if(xe<0&&h===0)return"".concat(Q,"L").concat(t,",").concat(r,"Z");Q+="L".concat(re.x,",").concat(re.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(he.x,",").concat(he.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(xe>180),",").concat(+(S>0),",").concat(te.x,",").concat(te.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(ie.x,",").concat(ie.y,"Z")}else Q+="L".concat(t,",").concat(r,"Z");return Q},yre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SB=e=>{var t=Ao(e,yre),{cx:r,cy:n,innerRadius:u,outerRadius:h,cornerRadius:d,forceCornerRadius:o,cornerIsExternal:_,startAngle:P,endAngle:S,className:M}=t;if(h<u||P===S)return null;var O=ti("recharts-sector",M),z=h-u,F=Pc(d,z,0,!0),B;return F>0&&Math.abs(P-S)<360?B=gre({cx:r,cy:n,innerRadius:u,outerRadius:h,cornerRadius:Math.min(F,z/2),forceCornerRadius:o,cornerIsExternal:_,startAngle:P,endAngle:S}):B=wB({cx:r,cy:n,innerRadius:u,outerRadius:h,startAngle:P,endAngle:S}),A.createElement("path",xE({},Ps(t),{className:O,d:B}))};function vre(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(DF(t)){if(e==="centric"){var{cx:n,cy:u,innerRadius:h,outerRadius:d,angle:o}=t,_=ko(n,u,h,o),P=ko(n,u,d,o);return[{x:_.x,y:_.y},{x:P.x,y:P.y}]}return bB(t)}}var NP={},FP={},BP={},LD;function _re(){return LD||(LD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(BP)),BP}var DD;function xre(){return DD||(DD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_re();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(FP)),FP}var RD;function bre(){return RD||(RD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WF(),r=xre();function n(u,h,d){d&&typeof d!="number"&&t.isIterateeCall(u,h,d)&&(h=d=void 0),u=r.toFinite(u),h===void 0?(h=u,u=0):h=r.toFinite(h),d=d===void 0?u<h?1:-1:r.toFinite(d);const o=Math.max(Math.ceil((h-u)/(d||1)),0),_=new Array(o);for(let P=0;P<o;P++)_[P]=u,u+=d;return _}e.range=n})(NP)),NP}var VP,jD;function wre(){return jD||(jD=1,VP=bre().range),VP}var Sre=wre();const PB=Sh(Sre);function gp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pre(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KC(e){let t,r,n;e.length!==2?(t=gp,r=(o,_)=>gp(e(o),_),n=(o,_)=>e(o)-_):(t=e===gp||e===Pre?e:Ere,r=e,n=e);function u(o,_,P=0,S=o.length){if(P<S){if(t(_,_)!==0)return S;do{const M=P+S>>>1;r(o[M],_)<0?P=M+1:S=M}while(P<S)}return P}function h(o,_,P=0,S=o.length){if(P<S){if(t(_,_)!==0)return S;do{const M=P+S>>>1;r(o[M],_)<=0?P=M+1:S=M}while(P<S)}return P}function d(o,_,P=0,S=o.length){const M=u(o,_,P,S-1);return M>P&&n(o[M-1],_)>-n(o[M],_)?M-1:M}return{left:u,center:d,right:h}}function Ere(){return 0}function EB(e){return e===null?NaN:+e}function*Cre(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Tre=KC(gp),K_=Tre.right;KC(EB).center;class zD extends Map{constructor(t,r=Are){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,u]of t)this.set(n,u)}get(t){return super.get(ND(this,t))}has(t){return super.has(ND(this,t))}set(t,r){return super.set(Mre(this,t),r)}delete(t){return super.delete(kre(this,t))}}function ND({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Mre({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function kre({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Are(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ire(e=gp){if(e===gp)return CB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function CB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ore=Math.sqrt(50),Lre=Math.sqrt(10),Dre=Math.sqrt(2);function Lb(e,t,r){const n=(t-e)/Math.max(0,r),u=Math.floor(Math.log10(n)),h=n/Math.pow(10,u),d=h>=Ore?10:h>=Lre?5:h>=Dre?2:1;let o,_,P;return u<0?(P=Math.pow(10,-u)/d,o=Math.round(e*P),_=Math.round(t*P),o/P<e&&++o,_/P>t&&--_,P=-P):(P=Math.pow(10,u)*d,o=Math.round(e/P),_=Math.round(t/P),o*P<e&&++o,_*P>t&&--_),_<o&&.5<=r&&r<2?Lb(e,t,r*2):[o,_,P]}function bE(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[u,h,d]=n?Lb(t,e,r):Lb(e,t,r);if(!(h>=u))return[];const o=h-u+1,_=new Array(o);if(n)if(d<0)for(let P=0;P<o;++P)_[P]=(h-P)/-d;else for(let P=0;P<o;++P)_[P]=(h-P)*d;else if(d<0)for(let P=0;P<o;++P)_[P]=(u+P)/-d;else for(let P=0;P<o;++P)_[P]=(u+P)*d;return _}function wE(e,t,r){return t=+t,e=+e,r=+r,Lb(e,t,r)[2]}function SE(e,t,r){t=+t,e=+e,r=+r;const n=t<e,u=n?wE(t,e,r):wE(e,t,r);return(n?-1:1)*(u<0?1/-u:u)}function FD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function BD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function TB(e,t,r=0,n=1/0,u){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(u=u===void 0?CB:Ire(u);n>r;){if(n-r>600){const _=n-r+1,P=t-r+1,S=Math.log(_),M=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*M*(_-M)/_)*(P-_/2<0?-1:1),z=Math.max(r,Math.floor(t-P*M/_+O)),F=Math.min(n,Math.floor(t+(_-P)*M/_+O));TB(e,t,z,F,u)}const h=e[t];let d=r,o=n;for(qv(e,r,t),u(e[n],h)>0&&qv(e,r,n);d<o;){for(qv(e,d,o),++d,--o;u(e[d],h)<0;)++d;for(;u(e[o],h)>0;)--o}u(e[r],h)===0?qv(e,r,o):(++o,qv(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function qv(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Rre(e,t,r){if(e=Float64Array.from(Cre(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return BD(e);if(t>=1)return FD(e);var n,u=(n-1)*t,h=Math.floor(u),d=FD(TB(e,h).subarray(0,h+1)),o=BD(e.subarray(h+1));return d+(o-d)*(u-h)}}function jre(e,t,r=EB){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,u=(n-1)*t,h=Math.floor(u),d=+r(e[h],h,e),o=+r(e[h+1],h+1,e);return d+(o-d)*(u-h)}}function zre(e,t,r){e=+e,t=+t,r=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+r;for(var n=-1,u=Math.max(0,Math.ceil((t-e)/r))|0,h=new Array(u);++n<u;)h[n]=e+n*r;return h}function wu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const PE=Symbol("implicit");function XC(){var e=new zD,t=[],r=[],n=PE;function u(h){let d=e.get(h);if(d===void 0){if(n!==PE)return n;e.set(h,d=t.push(h)-1)}return r[d%r.length]}return u.domain=function(h){if(!arguments.length)return t.slice();t=[],e=new zD;for(const d of h)e.has(d)||e.set(d,t.push(d)-1);return u},u.range=function(h){return arguments.length?(r=Array.from(h),u):r.slice()},u.unknown=function(h){return arguments.length?(n=h,u):n},u.copy=function(){return XC(t,r).unknown(n)},wu.apply(u,arguments),u}function YC(){var e=XC().unknown(void 0),t=e.domain,r=e.range,n=0,u=1,h,d,o=!1,_=0,P=0,S=.5;delete e.unknown;function M(){var O=t().length,z=u<n,F=z?u:n,B=z?n:u;h=(B-F)/Math.max(1,O-_+P*2),o&&(h=Math.floor(h)),F+=(B-F-h*(O-_))*S,d=h*(1-_),o&&(F=Math.round(F),d=Math.round(d));var D=zre(O).map(function(H){return F+h*H});return r(z?D.reverse():D)}return e.domain=function(O){return arguments.length?(t(O),M()):t()},e.range=function(O){return arguments.length?([n,u]=O,n=+n,u=+u,M()):[n,u]},e.rangeRound=function(O){return[n,u]=O,n=+n,u=+u,o=!0,M()},e.bandwidth=function(){return d},e.step=function(){return h},e.round=function(O){return arguments.length?(o=!!O,M()):o},e.padding=function(O){return arguments.length?(_=Math.min(1,P=+O),M()):_},e.paddingInner=function(O){return arguments.length?(_=Math.min(1,O),M()):_},e.paddingOuter=function(O){return arguments.length?(P=+O,M()):P},e.align=function(O){return arguments.length?(S=Math.max(0,Math.min(1,O)),M()):S},e.copy=function(){return YC(t(),[n,u]).round(o).paddingInner(_).paddingOuter(P).align(S)},wu.apply(M(),arguments)}function MB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return MB(t())},e}function Nre(){return MB(YC.apply(null,arguments).paddingInner(1))}function QC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kB(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function X_(){}var v_=.7,Db=1/v_,uy="\\s*([+-]?\\d+)\\s*",__="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fre=/^#([0-9a-f]{3,8})$/,Bre=new RegExp(`^rgb\\(${uy},${uy},${uy}\\)$`),Vre=new RegExp(`^rgb\\(${vh},${vh},${vh}\\)$`),$re=new RegExp(`^rgba\\(${uy},${uy},${uy},${__}\\)$`),Ure=new RegExp(`^rgba\\(${vh},${vh},${vh},${__}\\)$`),qre=new RegExp(`^hsl\\(${__},${vh},${vh}\\)$`),Gre=new RegExp(`^hsla\\(${__},${vh},${vh},${__}\\)$`),VD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};QC(X_,x_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$D,formatHex:$D,formatHex8:Wre,formatHsl:Hre,formatRgb:UD,toString:UD});function $D(){return this.rgb().formatHex()}function Wre(){return this.rgb().formatHex8()}function Hre(){return AB(this).formatHsl()}function UD(){return this.rgb().formatRgb()}function x_(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Fre.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qD(t):r===3?new Qs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?_x(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?_x(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bre.exec(e))?new Qs(t[1],t[2],t[3],1):(t=Vre.exec(e))?new Qs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$re.exec(e))?_x(t[1],t[2],t[3],t[4]):(t=Ure.exec(e))?_x(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qre.exec(e))?HD(t[1],t[2]/100,t[3]/100,1):(t=Gre.exec(e))?HD(t[1],t[2]/100,t[3]/100,t[4]):VD.hasOwnProperty(e)?qD(VD[e]):e==="transparent"?new Qs(NaN,NaN,NaN,0):null}function qD(e){return new Qs(e>>16&255,e>>8&255,e&255,1)}function _x(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qs(e,t,r,n)}function Zre(e){return e instanceof X_||(e=x_(e)),e?(e=e.rgb(),new Qs(e.r,e.g,e.b,e.opacity)):new Qs}function EE(e,t,r,n){return arguments.length===1?Zre(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}QC(Qs,EE,kB(X_,{brighter(e){return e=e==null?Db:Math.pow(Db,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?v_:Math.pow(v_,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(Gm(this.r),Gm(this.g),Gm(this.b),Rb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GD,formatHex:GD,formatHex8:Kre,formatRgb:WD,toString:WD}));function GD(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}`}function Kre(){return`#${Im(this.r)}${Im(this.g)}${Im(this.b)}${Im((isNaN(this.opacity)?1:this.opacity)*255)}`}function WD(){const e=Rb(this.opacity);return`${e===1?"rgb(":"rgba("}${Gm(this.r)}, ${Gm(this.g)}, ${Gm(this.b)}${e===1?")":`, ${e})`}`}function Rb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Im(e){return e=Gm(e),(e<16?"0":"")+e.toString(16)}function HD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xc(e,t,r,n)}function AB(e){if(e instanceof xc)return new xc(e.h,e.s,e.l,e.opacity);if(e instanceof X_||(e=x_(e)),!e)return new xc;if(e instanceof xc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,u=Math.min(t,r,n),h=Math.max(t,r,n),d=NaN,o=h-u,_=(h+u)/2;return o?(t===h?d=(r-n)/o+(r<n)*6:r===h?d=(n-t)/o+2:d=(t-r)/o+4,o/=_<.5?h+u:2-h-u,d*=60):o=_>0&&_<1?0:d,new xc(d,o,_,e.opacity)}function Xre(e,t,r,n){return arguments.length===1?AB(e):new xc(e,t,r,n??1)}function xc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}QC(xc,Xre,kB(X_,{brighter(e){return e=e==null?Db:Math.pow(Db,e),new xc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?v_:Math.pow(v_,e),new xc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,u=2*r-n;return new Qs($P(e>=240?e-240:e+120,u,n),$P(e,u,n),$P(e<120?e+240:e-120,u,n),this.opacity)},clamp(){return new xc(ZD(this.h),xx(this.s),xx(this.l),Rb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rb(this.opacity);return`${e===1?"hsl(":"hsla("}${ZD(this.h)}, ${xx(this.s)*100}%, ${xx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZD(e){return e=(e||0)%360,e<0?e+360:e}function xx(e){return Math.max(0,Math.min(1,e||0))}function $P(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const JC=e=>()=>e;function Yre(e,t){return function(r){return e+r*t}}function Qre(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Jre(e){return(e=+e)==1?IB:function(t,r){return r-t?Qre(t,r,e):JC(isNaN(t)?r:t)}}function IB(e,t){var r=t-e;return r?Yre(e,r):JC(isNaN(e)?t:e)}const KD=(function e(t){var r=Jre(t);function n(u,h){var d=r((u=EE(u)).r,(h=EE(h)).r),o=r(u.g,h.g),_=r(u.b,h.b),P=IB(u.opacity,h.opacity);return function(S){return u.r=d(S),u.g=o(S),u.b=_(S),u.opacity=P(S),u+""}}return n.gamma=e,n})(1);function ene(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),u;return function(h){for(u=0;u<r;++u)n[u]=e[u]*(1-h)+t[u]*h;return n}}function tne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function rne(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,u=new Array(n),h=new Array(r),d;for(d=0;d<n;++d)u[d]=Wy(e[d],t[d]);for(;d<r;++d)h[d]=t[d];return function(o){for(d=0;d<n;++d)h[d]=u[d](o);return h}}function nne(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function jb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ine(e,t){var r={},n={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?r[u]=Wy(e[u],t[u]):n[u]=t[u];return function(h){for(u in r)n[u]=r[u](h);return n}}var CE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UP=new RegExp(CE.source,"g");function ane(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function sne(e,t){var r=CE.lastIndex=UP.lastIndex=0,n,u,h,d=-1,o=[],_=[];for(e=e+"",t=t+"";(n=CE.exec(e))&&(u=UP.exec(t));)(h=u.index)>r&&(h=t.slice(r,h),o[d]?o[d]+=h:o[++d]=h),(n=n[0])===(u=u[0])?o[d]?o[d]+=u:o[++d]=u:(o[++d]=null,_.push({i:d,x:jb(n,u)})),r=UP.lastIndex;return r<t.length&&(h=t.slice(r),o[d]?o[d]+=h:o[++d]=h),o.length<2?_[0]?one(_[0].x):ane(t):(t=_.length,function(P){for(var S=0,M;S<t;++S)o[(M=_[S]).i]=M.x(P);return o.join("")})}function Wy(e,t){var r=typeof t,n;return t==null||r==="boolean"?JC(t):(r==="number"?jb:r==="string"?(n=x_(t))?(t=n,KD):sne:t instanceof x_?KD:t instanceof Date?nne:tne(t)?ene:Array.isArray(t)?rne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ine:jb)(e,t)}function eT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function lne(e,t){t===void 0&&(t=e,e=Wy);for(var r=0,n=t.length-1,u=t[0],h=new Array(n<0?0:n);r<n;)h[r]=e(u,u=t[++r]);return function(d){var o=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return h[o](d-o)}}function une(e){return function(){return e}}function zb(e){return+e}var XD=[0,1];function ws(e){return e}function TE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:une(isNaN(t)?NaN:.5)}function cne(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function hne(e,t,r){var n=e[0],u=e[1],h=t[0],d=t[1];return u<n?(n=TE(u,n),h=r(d,h)):(n=TE(n,u),h=r(h,d)),function(o){return h(n(o))}}function dne(e,t,r){var n=Math.min(e.length,t.length)-1,u=new Array(n),h=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<n;)u[d]=TE(e[d],e[d+1]),h[d]=r(t[d],t[d+1]);return function(o){var _=K_(e,o,1,n)-1;return h[_](u[_](o))}}function Y_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zw(){var e=XD,t=XD,r=Wy,n,u,h,d=ws,o,_,P;function S(){var O=Math.min(e.length,t.length);return d!==ws&&(d=cne(e[0],e[O-1])),o=O>2?dne:hne,_=P=null,M}function M(O){return O==null||isNaN(O=+O)?h:(_||(_=o(e.map(n),t,r)))(n(d(O)))}return M.invert=function(O){return d(u((P||(P=o(t,e.map(n),jb)))(O)))},M.domain=function(O){return arguments.length?(e=Array.from(O,zb),S()):e.slice()},M.range=function(O){return arguments.length?(t=Array.from(O),S()):t.slice()},M.rangeRound=function(O){return t=Array.from(O),r=eT,S()},M.clamp=function(O){return arguments.length?(d=O?!0:ws,S()):d!==ws},M.interpolate=function(O){return arguments.length?(r=O,S()):r},M.unknown=function(O){return arguments.length?(h=O,M):h},function(O,z){return n=O,u=z,S()}}function tT(){return Zw()(ws,ws)}function fne(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Nb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Iy(e){return e=Nb(Math.abs(e)),e?e[1]:NaN}function pne(e,t){return function(r,n){for(var u=r.length,h=[],d=0,o=e[0],_=0;u>0&&o>0&&(_+o+1>n&&(o=Math.max(1,n-_)),h.push(r.substring(u-=o,u+o)),!((_+=o+1)>n));)o=e[d=(d+1)%e.length];return h.reverse().join(t)}}function mne(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var gne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function b_(e){if(!(t=gne.exec(e)))throw new Error("invalid format: "+e);var t;return new rT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}b_.prototype=rT.prototype;function rT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yne(e){e:for(var t=e.length,r=1,n=-1,u;r<t;++r)switch(e[r]){case".":n=u=r;break;case"0":n===0&&(n=r),u=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(u+1):e}var OB;function vne(e,t){var r=Nb(e,t);if(!r)return e+"";var n=r[0],u=r[1],h=u-(OB=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,d=n.length;return h===d?n:h>d?n+new Array(h-d+1).join("0"):h>0?n.slice(0,h)+"."+n.slice(h):"0."+new Array(1-h).join("0")+Nb(e,Math.max(0,t+h-1))[0]}function YD(e,t){var r=Nb(e,t);if(!r)return e+"";var n=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+n:n.length>u+1?n.slice(0,u+1)+"."+n.slice(u+1):n+new Array(u-n.length+2).join("0")}const QD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:fne,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YD(e*100,t),r:YD,s:vne,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JD(e){return e}var eR=Array.prototype.map,tR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _ne(e){var t=e.grouping===void 0||e.thousands===void 0?JD:pne(eR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?JD:mne(eR.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function P(M){M=b_(M);var O=M.fill,z=M.align,F=M.sign,B=M.symbol,D=M.zero,H=M.width,Q=M.comma,te=M.precision,ie=M.trim,ae=M.type;ae==="n"?(Q=!0,ae="g"):QD[ae]||(te===void 0&&(te=12),ie=!0,ae="g"),(D||O==="0"&&z==="=")&&(D=!0,O="0",z="=");var he=B==="$"?r:B==="#"&&/[boxX]/.test(ae)?"0"+ae.toLowerCase():"",re=B==="$"?n:/[%p]/.test(ae)?d:"",be=QD[ae],xe=/[defgprs%]/.test(ae);te=te===void 0?6:/[gprs]/.test(ae)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te));function $e(Ee){var Ne=he,Xe=re,ut,pt,gt;if(ae==="c")Xe=be(Ee)+Xe,Ee="";else{Ee=+Ee;var wt=Ee<0||1/Ee<0;if(Ee=isNaN(Ee)?_:be(Math.abs(Ee),te),ie&&(Ee=yne(Ee)),wt&&+Ee==0&&F!=="+"&&(wt=!1),Ne=(wt?F==="("?F:o:F==="-"||F==="("?"":F)+Ne,Xe=(ae==="s"?tR[8+OB/3]:"")+Xe+(wt&&F==="("?")":""),xe){for(ut=-1,pt=Ee.length;++ut<pt;)if(gt=Ee.charCodeAt(ut),48>gt||gt>57){Xe=(gt===46?u+Ee.slice(ut+1):Ee.slice(ut))+Xe,Ee=Ee.slice(0,ut);break}}}Q&&!D&&(Ee=t(Ee,1/0));var je=Ne.length+Ee.length+Xe.length,Qe=je<H?new Array(H-je+1).join(O):"";switch(Q&&D&&(Ee=t(Qe+Ee,Qe.length?H-Xe.length:1/0),Qe=""),z){case"<":Ee=Ne+Ee+Xe+Qe;break;case"=":Ee=Ne+Qe+Ee+Xe;break;case"^":Ee=Qe.slice(0,je=Qe.length>>1)+Ne+Ee+Xe+Qe.slice(je);break;default:Ee=Qe+Ne+Ee+Xe;break}return h(Ee)}return $e.toString=function(){return M+""},$e}function S(M,O){var z=P((M=b_(M),M.type="f",M)),F=Math.max(-8,Math.min(8,Math.floor(Iy(O)/3)))*3,B=Math.pow(10,-F),D=tR[8+F/3];return function(H){return z(B*H)+D}}return{format:P,formatPrefix:S}}var bx,nT,LB;xne({thousands:",",grouping:[3],currency:["$",""]});function xne(e){return bx=_ne(e),nT=bx.format,LB=bx.formatPrefix,bx}function bne(e){return Math.max(0,-Iy(Math.abs(e)))}function wne(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Iy(t)/3)))*3-Iy(Math.abs(e)))}function Sne(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Iy(t)-Iy(e))+1}function DB(e,t,r,n){var u=SE(e,t,r),h;switch(n=b_(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(h=wne(u,d))&&(n.precision=h),LB(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(h=Sne(u,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=h-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(h=bne(u))&&(n.precision=h-(n.type==="%")*2);break}}return nT(n)}function Ep(e){var t=e.domain;return e.ticks=function(r){var n=t();return bE(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var u=t();return DB(u[0],u[u.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),u=0,h=n.length-1,d=n[u],o=n[h],_,P,S=10;for(o<d&&(P=d,d=o,o=P,P=u,u=h,h=P);S-- >0;){if(P=wE(d,o,r),P===_)return n[u]=d,n[h]=o,t(n);if(P>0)d=Math.floor(d/P)*P,o=Math.ceil(o/P)*P;else if(P<0)d=Math.ceil(d*P)/P,o=Math.floor(o*P)/P;else break;_=P}return e},e}function RB(){var e=tT();return e.copy=function(){return Y_(e,RB())},wu.apply(e,arguments),Ep(e)}function jB(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,zb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return jB(e).unknown(t)},e=arguments.length?Array.from(e,zb):[0,1],Ep(r)}function zB(e,t){e=e.slice();var r=0,n=e.length-1,u=e[r],h=e[n],d;return h<u&&(d=r,r=n,n=d,d=u,u=h,h=d),e[r]=t.floor(u),e[n]=t.ceil(h),e}function rR(e){return Math.log(e)}function nR(e){return Math.exp(e)}function Pne(e){return-Math.log(-e)}function Ene(e){return-Math.exp(-e)}function Cne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tne(e){return e===10?Cne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Mne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iR(e){return(t,r)=>-e(-t,r)}function iT(e){const t=e(rR,nR),r=t.domain;let n=10,u,h;function d(){return u=Mne(n),h=Tne(n),r()[0]<0?(u=iR(u),h=iR(h),e(Pne,Ene)):e(rR,nR),t}return t.base=function(o){return arguments.length?(n=+o,d()):n},t.domain=function(o){return arguments.length?(r(o),d()):r()},t.ticks=o=>{const _=r();let P=_[0],S=_[_.length-1];const M=S<P;M&&([P,S]=[S,P]);let O=u(P),z=u(S),F,B;const D=o==null?10:+o;let H=[];if(!(n%1)&&z-O<D){if(O=Math.floor(O),z=Math.ceil(z),P>0){for(;O<=z;++O)for(F=1;F<n;++F)if(B=O<0?F/h(-O):F*h(O),!(B<P)){if(B>S)break;H.push(B)}}else for(;O<=z;++O)for(F=n-1;F>=1;--F)if(B=O>0?F/h(-O):F*h(O),!(B<P)){if(B>S)break;H.push(B)}H.length*2<D&&(H=bE(P,S,D))}else H=bE(O,z,Math.min(z-O,D)).map(h);return M?H.reverse():H},t.tickFormat=(o,_)=>{if(o==null&&(o=10),_==null&&(_=n===10?"s":","),typeof _!="function"&&(!(n%1)&&(_=b_(_)).precision==null&&(_.trim=!0),_=nT(_)),o===1/0)return _;const P=Math.max(1,n*o/t.ticks().length);return S=>{let M=S/h(Math.round(u(S)));return M*n<n-.5&&(M*=n),M<=P?_(S):""}},t.nice=()=>r(zB(r(),{floor:o=>h(Math.floor(u(o))),ceil:o=>h(Math.ceil(u(o)))})),t}function NB(){const e=iT(Zw()).domain([1,10]);return e.copy=()=>Y_(e,NB()).base(e.base()),wu.apply(e,arguments),e}function aR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function oR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function aT(e){var t=1,r=e(aR(t),oR(t));return r.constant=function(n){return arguments.length?e(aR(t=+n),oR(t)):t},Ep(r)}function FB(){var e=aT(Zw());return e.copy=function(){return Y_(e,FB()).constant(e.constant())},wu.apply(e,arguments)}function sR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ane(e){return e<0?-e*e:e*e}function oT(e){var t=e(ws,ws),r=1;function n(){return r===1?e(ws,ws):r===.5?e(kne,Ane):e(sR(r),sR(1/r))}return t.exponent=function(u){return arguments.length?(r=+u,n()):r},Ep(t)}function sT(){var e=oT(Zw());return e.copy=function(){return Y_(e,sT()).exponent(e.exponent())},wu.apply(e,arguments),e}function Ine(){return sT.apply(null,arguments).exponent(.5)}function lR(e){return Math.sign(e)*e*e}function One(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function BB(){var e=tT(),t=[0,1],r=!1,n;function u(h){var d=One(e(h));return isNaN(d)?n:r?Math.round(d):d}return u.invert=function(h){return e.invert(lR(h))},u.domain=function(h){return arguments.length?(e.domain(h),u):e.domain()},u.range=function(h){return arguments.length?(e.range((t=Array.from(h,zb)).map(lR)),u):t.slice()},u.rangeRound=function(h){return u.range(h).round(!0)},u.round=function(h){return arguments.length?(r=!!h,u):r},u.clamp=function(h){return arguments.length?(e.clamp(h),u):e.clamp()},u.unknown=function(h){return arguments.length?(n=h,u):n},u.copy=function(){return BB(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},wu.apply(u,arguments),Ep(u)}function VB(){var e=[],t=[],r=[],n;function u(){var d=0,o=Math.max(1,t.length);for(r=new Array(o-1);++d<o;)r[d-1]=jre(e,d/o);return h}function h(d){return d==null||isNaN(d=+d)?n:t[K_(r,d)]}return h.invertExtent=function(d){var o=t.indexOf(d);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},h.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let o of d)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(gp),u()},h.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},h.unknown=function(d){return arguments.length?(n=d,h):n},h.quantiles=function(){return r.slice()},h.copy=function(){return VB().domain(e).range(t).unknown(n)},wu.apply(h,arguments)}function $B(){var e=0,t=1,r=1,n=[.5],u=[0,1],h;function d(_){return _!=null&&_<=_?u[K_(n,_,0,r)]:h}function o(){var _=-1;for(n=new Array(r);++_<r;)n[_]=((_+1)*t-(_-r)*e)/(r+1);return d}return d.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,o()):[e,t]},d.range=function(_){return arguments.length?(r=(u=Array.from(_)).length-1,o()):u.slice()},d.invertExtent=function(_){var P=u.indexOf(_);return P<0?[NaN,NaN]:P<1?[e,n[0]]:P>=r?[n[r-1],t]:[n[P-1],n[P]]},d.unknown=function(_){return arguments.length&&(h=_),d},d.thresholds=function(){return n.slice()},d.copy=function(){return $B().domain([e,t]).range(u).unknown(h)},wu.apply(Ep(d),arguments)}function UB(){var e=[.5],t=[0,1],r,n=1;function u(h){return h!=null&&h<=h?t[K_(e,h,0,n)]:r}return u.domain=function(h){return arguments.length?(e=Array.from(h),n=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),n=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(h){var d=t.indexOf(h);return[e[d-1],e[d]]},u.unknown=function(h){return arguments.length?(r=h,u):r},u.copy=function(){return UB().domain(e).range(t).unknown(r)},wu.apply(u,arguments)}const qP=new Date,GP=new Date;function Ka(e,t,r,n){function u(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return u.floor=h=>(e(h=new Date(+h)),h),u.ceil=h=>(e(h=new Date(h-1)),t(h,1),e(h),h),u.round=h=>{const d=u(h),o=u.ceil(h);return h-d<o-h?d:o},u.offset=(h,d)=>(t(h=new Date(+h),d==null?1:Math.floor(d)),h),u.range=(h,d,o)=>{const _=[];if(h=u.ceil(h),o=o==null?1:Math.floor(o),!(h<d)||!(o>0))return _;let P;do _.push(P=new Date(+h)),t(h,o),e(h);while(P<h&&h<d);return _},u.filter=h=>Ka(d=>{if(d>=d)for(;e(d),!h(d);)d.setTime(d-1)},(d,o)=>{if(d>=d)if(o<0)for(;++o<=0;)for(;t(d,-1),!h(d););else for(;--o>=0;)for(;t(d,1),!h(d););}),r&&(u.count=(h,d)=>(qP.setTime(+h),GP.setTime(+d),e(qP),e(GP),Math.floor(r(qP,GP))),u.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?u.filter(n?d=>n(d)%h===0:d=>u.count(0,d)%h===0):u)),u}const Fb=Ka(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Fb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ka(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Fb);Fb.range;const Sd=1e3,mu=Sd*60,Pd=mu*60,Ld=Pd*24,lT=Ld*7,uR=Ld*30,WP=Ld*365,Om=Ka(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Sd)},(e,t)=>(t-e)/Sd,e=>e.getUTCSeconds());Om.range;const uT=Ka(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sd)},(e,t)=>{e.setTime(+e+t*mu)},(e,t)=>(t-e)/mu,e=>e.getMinutes());uT.range;const cT=Ka(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mu)},(e,t)=>(t-e)/mu,e=>e.getUTCMinutes());cT.range;const hT=Ka(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sd-e.getMinutes()*mu)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getHours());hT.range;const dT=Ka(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pd)},(e,t)=>(t-e)/Pd,e=>e.getUTCHours());dT.range;const Q_=Ka(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mu)/Ld,e=>e.getDate()-1);Q_.range;const Kw=Ka(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ld,e=>e.getUTCDate()-1);Kw.range;const qB=Ka(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ld,e=>Math.floor(e/Ld));qB.range;function ag(e){return Ka(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*mu)/lT)}const Xw=ag(0),Bb=ag(1),Lne=ag(2),Dne=ag(3),Oy=ag(4),Rne=ag(5),jne=ag(6);Xw.range;Bb.range;Lne.range;Dne.range;Oy.range;Rne.range;jne.range;function og(e){return Ka(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/lT)}const Yw=og(0),Vb=og(1),zne=og(2),Nne=og(3),Ly=og(4),Fne=og(5),Bne=og(6);Yw.range;Vb.range;zne.range;Nne.range;Ly.range;Fne.range;Bne.range;const fT=Ka(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fT.range;const pT=Ka(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());pT.range;const Dd=Ka(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Dd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ka(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Dd.range;const Rd=Ka(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ka(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Rd.range;function GB(e,t,r,n,u,h){const d=[[Om,1,Sd],[Om,5,5*Sd],[Om,15,15*Sd],[Om,30,30*Sd],[h,1,mu],[h,5,5*mu],[h,15,15*mu],[h,30,30*mu],[u,1,Pd],[u,3,3*Pd],[u,6,6*Pd],[u,12,12*Pd],[n,1,Ld],[n,2,2*Ld],[r,1,lT],[t,1,uR],[t,3,3*uR],[e,1,WP]];function o(P,S,M){const O=S<P;O&&([P,S]=[S,P]);const z=M&&typeof M.range=="function"?M:_(P,S,M),F=z?z.range(P,+S+1):[];return O?F.reverse():F}function _(P,S,M){const O=Math.abs(S-P)/M,z=KC(([,,D])=>D).right(d,O);if(z===d.length)return e.every(SE(P/WP,S/WP,M));if(z===0)return Fb.every(Math.max(SE(P,S,M),1));const[F,B]=d[O/d[z-1][2]<d[z][2]/O?z-1:z];return F.every(B)}return[o,_]}const[Vne,$ne]=GB(Rd,pT,Yw,qB,dT,cT),[Une,qne]=GB(Dd,fT,Xw,Q_,hT,uT);function HP(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ZP(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Gne(e){var t=e.dateTime,r=e.date,n=e.time,u=e.periods,h=e.days,d=e.shortDays,o=e.months,_=e.shortMonths,P=Wv(u),S=Hv(u),M=Wv(h),O=Hv(h),z=Wv(d),F=Hv(d),B=Wv(o),D=Hv(o),H=Wv(_),Q=Hv(_),te={a:wt,A:je,b:Qe,B:yt,c:null,d:mR,e:mR,f:pie,g:Pie,G:Cie,H:hie,I:die,j:fie,L:WB,m:mie,M:gie,p:Oe,q:et,Q:vR,s:_R,S:yie,u:vie,U:_ie,V:xie,w:bie,W:wie,x:null,X:null,y:Sie,Y:Eie,Z:Tie,"%":yR},ie={a:Mt,A:Dt,b:Ke,B:tr,c:null,d:gR,e:gR,f:Iie,g:Vie,G:Uie,H:Mie,I:kie,j:Aie,L:ZB,m:Oie,M:Lie,p:Ft,q:$t,Q:vR,s:_R,S:Die,u:Rie,U:jie,V:zie,w:Nie,W:Fie,x:null,X:null,y:Bie,Y:$ie,Z:qie,"%":yR},ae={a:$e,A:Ee,b:Ne,B:Xe,c:ut,d:fR,e:fR,f:sie,g:dR,G:hR,H:pR,I:pR,j:nie,L:oie,m:rie,M:iie,p:xe,q:tie,Q:uie,s:cie,S:aie,u:Xne,U:Yne,V:Qne,w:Kne,W:Jne,x:pt,X:gt,y:dR,Y:hR,Z:eie,"%":lie};te.x=he(r,te),te.X=he(n,te),te.c=he(t,te),ie.x=he(r,ie),ie.X=he(n,ie),ie.c=he(t,ie);function he(ct,Lt){return function(ir){var St=[],Gr=-1,Tr=0,wr=ct.length,tn,Wr,Xi;for(ir instanceof Date||(ir=new Date(+ir));++Gr<wr;)ct.charCodeAt(Gr)===37&&(St.push(ct.slice(Tr,Gr)),(Wr=cR[tn=ct.charAt(++Gr)])!=null?tn=ct.charAt(++Gr):Wr=tn==="e"?" ":"0",(Xi=Lt[tn])&&(tn=Xi(ir,Wr)),St.push(tn),Tr=Gr+1);return St.push(ct.slice(Tr,Gr)),St.join("")}}function re(ct,Lt){return function(ir){var St=Gv(1900,void 0,1),Gr=be(St,ct,ir+="",0),Tr,wr;if(Gr!=ir.length)return null;if("Q"in St)return new Date(St.Q);if("s"in St)return new Date(St.s*1e3+("L"in St?St.L:0));if(Lt&&!("Z"in St)&&(St.Z=0),"p"in St&&(St.H=St.H%12+St.p*12),St.m===void 0&&(St.m="q"in St?St.q:0),"V"in St){if(St.V<1||St.V>53)return null;"w"in St||(St.w=1),"Z"in St?(Tr=ZP(Gv(St.y,0,1)),wr=Tr.getUTCDay(),Tr=wr>4||wr===0?Vb.ceil(Tr):Vb(Tr),Tr=Kw.offset(Tr,(St.V-1)*7),St.y=Tr.getUTCFullYear(),St.m=Tr.getUTCMonth(),St.d=Tr.getUTCDate()+(St.w+6)%7):(Tr=HP(Gv(St.y,0,1)),wr=Tr.getDay(),Tr=wr>4||wr===0?Bb.ceil(Tr):Bb(Tr),Tr=Q_.offset(Tr,(St.V-1)*7),St.y=Tr.getFullYear(),St.m=Tr.getMonth(),St.d=Tr.getDate()+(St.w+6)%7)}else("W"in St||"U"in St)&&("w"in St||(St.w="u"in St?St.u%7:"W"in St?1:0),wr="Z"in St?ZP(Gv(St.y,0,1)).getUTCDay():HP(Gv(St.y,0,1)).getDay(),St.m=0,St.d="W"in St?(St.w+6)%7+St.W*7-(wr+5)%7:St.w+St.U*7-(wr+6)%7);return"Z"in St?(St.H+=St.Z/100|0,St.M+=St.Z%100,ZP(St)):HP(St)}}function be(ct,Lt,ir,St){for(var Gr=0,Tr=Lt.length,wr=ir.length,tn,Wr;Gr<Tr;){if(St>=wr)return-1;if(tn=Lt.charCodeAt(Gr++),tn===37){if(tn=Lt.charAt(Gr++),Wr=ae[tn in cR?Lt.charAt(Gr++):tn],!Wr||(St=Wr(ct,ir,St))<0)return-1}else if(tn!=ir.charCodeAt(St++))return-1}return St}function xe(ct,Lt,ir){var St=P.exec(Lt.slice(ir));return St?(ct.p=S.get(St[0].toLowerCase()),ir+St[0].length):-1}function $e(ct,Lt,ir){var St=z.exec(Lt.slice(ir));return St?(ct.w=F.get(St[0].toLowerCase()),ir+St[0].length):-1}function Ee(ct,Lt,ir){var St=M.exec(Lt.slice(ir));return St?(ct.w=O.get(St[0].toLowerCase()),ir+St[0].length):-1}function Ne(ct,Lt,ir){var St=H.exec(Lt.slice(ir));return St?(ct.m=Q.get(St[0].toLowerCase()),ir+St[0].length):-1}function Xe(ct,Lt,ir){var St=B.exec(Lt.slice(ir));return St?(ct.m=D.get(St[0].toLowerCase()),ir+St[0].length):-1}function ut(ct,Lt,ir){return be(ct,t,Lt,ir)}function pt(ct,Lt,ir){return be(ct,r,Lt,ir)}function gt(ct,Lt,ir){return be(ct,n,Lt,ir)}function wt(ct){return d[ct.getDay()]}function je(ct){return h[ct.getDay()]}function Qe(ct){return _[ct.getMonth()]}function yt(ct){return o[ct.getMonth()]}function Oe(ct){return u[+(ct.getHours()>=12)]}function et(ct){return 1+~~(ct.getMonth()/3)}function Mt(ct){return d[ct.getUTCDay()]}function Dt(ct){return h[ct.getUTCDay()]}function Ke(ct){return _[ct.getUTCMonth()]}function tr(ct){return o[ct.getUTCMonth()]}function Ft(ct){return u[+(ct.getUTCHours()>=12)]}function $t(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var Lt=he(ct+="",te);return Lt.toString=function(){return ct},Lt},parse:function(ct){var Lt=re(ct+="",!1);return Lt.toString=function(){return ct},Lt},utcFormat:function(ct){var Lt=he(ct+="",ie);return Lt.toString=function(){return ct},Lt},utcParse:function(ct){var Lt=re(ct+="",!0);return Lt.toString=function(){return ct},Lt}}}var cR={"-":"",_:" ",0:"0"},wo=/^\s*\d+/,Wne=/^%/,Hne=/[\\^$*+?|[\]().{}]/g;function Fn(e,t,r){var n=e<0?"-":"",u=(n?-e:e)+"",h=u.length;return n+(h<r?new Array(r-h+1).join(t)+u:u)}function Zne(e){return e.replace(Hne,"\\$&")}function Wv(e){return new RegExp("^(?:"+e.map(Zne).join("|")+")","i")}function Hv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Kne(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Xne(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Yne(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Qne(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Jne(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function hR(e,t,r){var n=wo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function dR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function eie(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function tie(e,t,r){var n=wo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function rie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function fR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function nie(e,t,r){var n=wo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function pR(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function iie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function aie(e,t,r){var n=wo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function oie(e,t,r){var n=wo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function sie(e,t,r){var n=wo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function lie(e,t,r){var n=Wne.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function uie(e,t,r){var n=wo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function cie(e,t,r){var n=wo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function mR(e,t){return Fn(e.getDate(),t,2)}function hie(e,t){return Fn(e.getHours(),t,2)}function die(e,t){return Fn(e.getHours()%12||12,t,2)}function fie(e,t){return Fn(1+Q_.count(Dd(e),e),t,3)}function WB(e,t){return Fn(e.getMilliseconds(),t,3)}function pie(e,t){return WB(e,t)+"000"}function mie(e,t){return Fn(e.getMonth()+1,t,2)}function gie(e,t){return Fn(e.getMinutes(),t,2)}function yie(e,t){return Fn(e.getSeconds(),t,2)}function vie(e){var t=e.getDay();return t===0?7:t}function _ie(e,t){return Fn(Xw.count(Dd(e)-1,e),t,2)}function HB(e){var t=e.getDay();return t>=4||t===0?Oy(e):Oy.ceil(e)}function xie(e,t){return e=HB(e),Fn(Oy.count(Dd(e),e)+(Dd(e).getDay()===4),t,2)}function bie(e){return e.getDay()}function wie(e,t){return Fn(Bb.count(Dd(e)-1,e),t,2)}function Sie(e,t){return Fn(e.getFullYear()%100,t,2)}function Pie(e,t){return e=HB(e),Fn(e.getFullYear()%100,t,2)}function Eie(e,t){return Fn(e.getFullYear()%1e4,t,4)}function Cie(e,t){var r=e.getDay();return e=r>=4||r===0?Oy(e):Oy.ceil(e),Fn(e.getFullYear()%1e4,t,4)}function Tie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fn(t/60|0,"0",2)+Fn(t%60,"0",2)}function gR(e,t){return Fn(e.getUTCDate(),t,2)}function Mie(e,t){return Fn(e.getUTCHours(),t,2)}function kie(e,t){return Fn(e.getUTCHours()%12||12,t,2)}function Aie(e,t){return Fn(1+Kw.count(Rd(e),e),t,3)}function ZB(e,t){return Fn(e.getUTCMilliseconds(),t,3)}function Iie(e,t){return ZB(e,t)+"000"}function Oie(e,t){return Fn(e.getUTCMonth()+1,t,2)}function Lie(e,t){return Fn(e.getUTCMinutes(),t,2)}function Die(e,t){return Fn(e.getUTCSeconds(),t,2)}function Rie(e){var t=e.getUTCDay();return t===0?7:t}function jie(e,t){return Fn(Yw.count(Rd(e)-1,e),t,2)}function KB(e){var t=e.getUTCDay();return t>=4||t===0?Ly(e):Ly.ceil(e)}function zie(e,t){return e=KB(e),Fn(Ly.count(Rd(e),e)+(Rd(e).getUTCDay()===4),t,2)}function Nie(e){return e.getUTCDay()}function Fie(e,t){return Fn(Vb.count(Rd(e)-1,e),t,2)}function Bie(e,t){return Fn(e.getUTCFullYear()%100,t,2)}function Vie(e,t){return e=KB(e),Fn(e.getUTCFullYear()%100,t,2)}function $ie(e,t){return Fn(e.getUTCFullYear()%1e4,t,4)}function Uie(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ly(e):Ly.ceil(e),Fn(e.getUTCFullYear()%1e4,t,4)}function qie(){return"+0000"}function yR(){return"%"}function vR(e){return+e}function _R(e){return Math.floor(+e/1e3)}var Kg,XB,YB;Gie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gie(e){return Kg=Gne(e),XB=Kg.format,Kg.parse,YB=Kg.utcFormat,Kg.utcParse,Kg}function Wie(e){return new Date(e)}function Hie(e){return e instanceof Date?+e:+new Date(+e)}function mT(e,t,r,n,u,h,d,o,_,P){var S=tT(),M=S.invert,O=S.domain,z=P(".%L"),F=P(":%S"),B=P("%I:%M"),D=P("%I %p"),H=P("%a %d"),Q=P("%b %d"),te=P("%B"),ie=P("%Y");function ae(he){return(_(he)<he?z:o(he)<he?F:d(he)<he?B:h(he)<he?D:n(he)<he?u(he)<he?H:Q:r(he)<he?te:ie)(he)}return S.invert=function(he){return new Date(M(he))},S.domain=function(he){return arguments.length?O(Array.from(he,Hie)):O().map(Wie)},S.ticks=function(he){var re=O();return e(re[0],re[re.length-1],he??10)},S.tickFormat=function(he,re){return re==null?ae:P(re)},S.nice=function(he){var re=O();return(!he||typeof he.range!="function")&&(he=t(re[0],re[re.length-1],he??10)),he?O(zB(re,he)):S},S.copy=function(){return Y_(S,mT(e,t,r,n,u,h,d,o,_,P))},S}function Zie(){return wu.apply(mT(Une,qne,Dd,fT,Xw,Q_,hT,uT,Om,XB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Kie(){return wu.apply(mT(Vne,$ne,Rd,pT,Yw,Kw,dT,cT,Om,YB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qw(){var e=0,t=1,r,n,u,h,d=ws,o=!1,_;function P(M){return M==null||isNaN(M=+M)?_:d(u===0?.5:(M=(h(M)-r)*u,o?Math.max(0,Math.min(1,M)):M))}P.domain=function(M){return arguments.length?([e,t]=M,r=h(e=+e),n=h(t=+t),u=r===n?0:1/(n-r),P):[e,t]},P.clamp=function(M){return arguments.length?(o=!!M,P):o},P.interpolator=function(M){return arguments.length?(d=M,P):d};function S(M){return function(O){var z,F;return arguments.length?([z,F]=O,d=M(z,F),P):[d(0),d(1)]}}return P.range=S(Wy),P.rangeRound=S(eT),P.unknown=function(M){return arguments.length?(_=M,P):_},function(M){return h=M,r=M(e),n=M(t),u=r===n?0:1/(n-r),P}}function Cp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QB(){var e=Ep(Qw()(ws));return e.copy=function(){return Cp(e,QB())},Vd.apply(e,arguments)}function JB(){var e=iT(Qw()).domain([1,10]);return e.copy=function(){return Cp(e,JB()).base(e.base())},Vd.apply(e,arguments)}function e5(){var e=aT(Qw());return e.copy=function(){return Cp(e,e5()).constant(e.constant())},Vd.apply(e,arguments)}function gT(){var e=oT(Qw());return e.copy=function(){return Cp(e,gT()).exponent(e.exponent())},Vd.apply(e,arguments)}function Xie(){return gT.apply(null,arguments).exponent(.5)}function t5(){var e=[],t=ws;function r(n){if(n!=null&&!isNaN(n=+n))return t((K_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let u of n)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(gp),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,u)=>t(u/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(u,h)=>Rre(e,h/n))},r.copy=function(){return t5(t).domain(e)},Vd.apply(r,arguments)}function Jw(){var e=0,t=.5,r=1,n=1,u,h,d,o,_,P=ws,S,M=!1,O;function z(B){return isNaN(B=+B)?O:(B=.5+((B=+S(B))-h)*(n*B<n*h?o:_),P(M?Math.max(0,Math.min(1,B)):B))}z.domain=function(B){return arguments.length?([e,t,r]=B,u=S(e=+e),h=S(t=+t),d=S(r=+r),o=u===h?0:.5/(h-u),_=h===d?0:.5/(d-h),n=h<u?-1:1,z):[e,t,r]},z.clamp=function(B){return arguments.length?(M=!!B,z):M},z.interpolator=function(B){return arguments.length?(P=B,z):P};function F(B){return function(D){var H,Q,te;return arguments.length?([H,Q,te]=D,P=lne(B,[H,Q,te]),z):[P(0),P(.5),P(1)]}}return z.range=F(Wy),z.rangeRound=F(eT),z.unknown=function(B){return arguments.length?(O=B,z):O},function(B){return S=B,u=B(e),h=B(t),d=B(r),o=u===h?0:.5/(h-u),_=h===d?0:.5/(d-h),n=h<u?-1:1,z}}function r5(){var e=Ep(Jw()(ws));return e.copy=function(){return Cp(e,r5())},Vd.apply(e,arguments)}function n5(){var e=iT(Jw()).domain([.1,1,10]);return e.copy=function(){return Cp(e,n5()).base(e.base())},Vd.apply(e,arguments)}function i5(){var e=aT(Jw());return e.copy=function(){return Cp(e,i5()).constant(e.constant())},Vd.apply(e,arguments)}function yT(){var e=oT(Jw());return e.copy=function(){return Cp(e,yT()).exponent(e.exponent())},Vd.apply(e,arguments)}function Yie(){return yT.apply(null,arguments).exponent(.5)}const Jv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:YC,scaleDiverging:r5,scaleDivergingLog:n5,scaleDivergingPow:yT,scaleDivergingSqrt:Yie,scaleDivergingSymlog:i5,scaleIdentity:jB,scaleImplicit:PE,scaleLinear:RB,scaleLog:NB,scaleOrdinal:XC,scalePoint:Nre,scalePow:sT,scaleQuantile:VB,scaleQuantize:$B,scaleRadial:BB,scaleSequential:QB,scaleSequentialLog:JB,scaleSequentialPow:gT,scaleSequentialQuantile:t5,scaleSequentialSqrt:Xie,scaleSequentialSymlog:e5,scaleSqrt:Ine,scaleSymlog:FB,scaleThreshold:UB,scaleTime:Zie,scaleUtc:Kie,tickFormat:DB},Symbol.toStringTag,{value:"Module"}));var Tp=e=>e.chartData,Qie=Tt([Tp],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),e1=(e,t,r,n)=>n?Qie(e):Tp(e);function _p(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ai(t)&&Ai(r))return!0}return!1}function xR(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function a5(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,u,h;if(Ai(r))u=r;else if(typeof r=="function")return;if(Ai(n))h=n;else if(typeof n=="function")return;var d=[u,h];if(_p(d))return d}}function Jie(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(_p(n))return xR(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[u,h]=e,d,o;if(u==="auto")t!=null&&(d=Math.min(...t));else if(_r(u))d=u;else if(typeof u=="function")try{t!=null&&(d=u(t==null?void 0:t[0]))}catch{}else if(typeof u=="string"&&ZL.test(u)){var _=ZL.exec(u);if(_==null||t==null)d=void 0;else{var P=+_[1];d=t[0]-P}}else d=t==null?void 0:t[0];if(h==="auto")t!=null&&(o=Math.max(...t));else if(_r(h))o=h;else if(typeof h=="function")try{t!=null&&(o=h(t==null?void 0:t[1]))}catch{}else if(typeof h=="string"&&KL.test(h)){var S=KL.exec(h);if(S==null||t==null)o=void 0;else{var M=+S[1];o=t[1]+M}}else o=t==null?void 0:t[1];var O=[d,o];if(_p(O))return t==null?O:xR(O,t,r)}}}var Hy=1e9,eae={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_T,Vi=!0,xu="[DecimalError] ",Wm=xu+"Invalid argument: ",vT=xu+"Exponent out of range: ",Zy=Math.floor,Em=Math.pow,tae=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ml,_o=1e7,Mi=7,o5=9007199254740991,$b=Zy(o5/Mi),br={};br.absoluteValue=br.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};br.comparedTo=br.cmp=function(e){var t,r,n,u,h=this;if(e=new h.constructor(e),h.s!==e.s)return h.s||-e.s;if(h.e!==e.e)return h.e>e.e^h.s<0?1:-1;for(n=h.d.length,u=e.d.length,t=0,r=n<u?n:u;t<r;++t)if(h.d[t]!==e.d[t])return h.d[t]>e.d[t]^h.s<0?1:-1;return n===u?0:n>u^h.s<0?1:-1};br.decimalPlaces=br.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mi;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};br.dividedBy=br.div=function(e){return Cd(this,new this.constructor(e))};br.dividedToIntegerBy=br.idiv=function(e){var t=this,r=t.constructor;return _i(Cd(t,new r(e),0,1),r.precision)};br.equals=br.eq=function(e){return!this.cmp(e)};br.exponent=function(){return Oa(this)};br.greaterThan=br.gt=function(e){return this.cmp(e)>0};br.greaterThanOrEqualTo=br.gte=function(e){return this.cmp(e)>=0};br.isInteger=br.isint=function(){return this.e>this.d.length-2};br.isNegative=br.isneg=function(){return this.s<0};br.isPositive=br.ispos=function(){return this.s>0};br.isZero=function(){return this.s===0};br.lessThan=br.lt=function(e){return this.cmp(e)<0};br.lessThanOrEqualTo=br.lte=function(e){return this.cmp(e)<1};br.logarithm=br.log=function(e){var t,r=this,n=r.constructor,u=n.precision,h=u+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ml))throw Error(xu+"NaN");if(r.s<1)throw Error(xu+(r.s?"NaN":"-Infinity"));return r.eq(Ml)?new n(0):(Vi=!1,t=Cd(w_(r,h),w_(e,h),h),Vi=!0,_i(t,u))};br.minus=br.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u5(t,e):s5(t,(e.s=-e.s,e))};br.modulo=br.mod=function(e){var t,r=this,n=r.constructor,u=n.precision;if(e=new n(e),!e.s)throw Error(xu+"NaN");return r.s?(Vi=!1,t=Cd(r,e,0,1).times(e),Vi=!0,r.minus(t)):_i(new n(r),u)};br.naturalExponential=br.exp=function(){return l5(this)};br.naturalLogarithm=br.ln=function(){return w_(this)};br.negated=br.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};br.plus=br.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?s5(t,e):u5(t,(e.s=-e.s,e))};br.precision=br.sd=function(e){var t,r,n,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Wm+e);if(t=Oa(u)+1,n=u.d.length-1,r=n*Mi+1,n=u.d[n],n){for(;n%10==0;n/=10)r--;for(n=u.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};br.squareRoot=br.sqrt=function(){var e,t,r,n,u,h,d,o=this,_=o.constructor;if(o.s<1){if(!o.s)return new _(0);throw Error(xu+"NaN")}for(e=Oa(o),Vi=!1,u=Math.sqrt(+o),u==0||u==1/0?(t=gh(o.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=Zy((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new _(t)):n=new _(u.toString()),r=_.precision,u=d=r+3;;)if(h=n,n=h.plus(Cd(o,h,d+2)).times(.5),gh(h.d).slice(0,d)===(t=gh(n.d)).slice(0,d)){if(t=t.slice(d-3,d+1),u==d&&t=="4999"){if(_i(h,r+1,0),h.times(h).eq(o)){n=h;break}}else if(t!="9999")break;d+=4}return Vi=!0,_i(n,r)};br.times=br.mul=function(e){var t,r,n,u,h,d,o,_,P,S=this,M=S.constructor,O=S.d,z=(e=new M(e)).d;if(!S.s||!e.s)return new M(0);for(e.s*=S.s,r=S.e+e.e,_=O.length,P=z.length,_<P&&(h=O,O=z,z=h,d=_,_=P,P=d),h=[],d=_+P,n=d;n--;)h.push(0);for(n=P;--n>=0;){for(t=0,u=_+n;u>n;)o=h[u]+z[n]*O[u-n-1]+t,h[u--]=o%_o|0,t=o/_o|0;h[u]=(h[u]+t)%_o|0}for(;!h[--d];)h.pop();return t?++r:h.shift(),e.d=h,e.e=r,Vi?_i(e,M.precision):e};br.toDecimalPlaces=br.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(wh(e,0,Hy),t===void 0?t=n.rounding:wh(t,0,8),_i(r,e+Oa(r)+1,t))};br.toExponential=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=Jm(n,!0):(wh(e,0,Hy),t===void 0?t=u.rounding:wh(t,0,8),n=_i(new u(n),e+1,t),r=Jm(n,!0,e+1)),r};br.toFixed=function(e,t){var r,n,u=this,h=u.constructor;return e===void 0?Jm(u):(wh(e,0,Hy),t===void 0?t=h.rounding:wh(t,0,8),n=_i(new h(u),e+Oa(u)+1,t),r=Jm(n.abs(),!1,e+Oa(n)+1),u.isneg()&&!u.isZero()?"-"+r:r)};br.toInteger=br.toint=function(){var e=this,t=e.constructor;return _i(new t(e),Oa(e)+1,t.rounding)};br.toNumber=function(){return+this};br.toPower=br.pow=function(e){var t,r,n,u,h,d,o=this,_=o.constructor,P=12,S=+(e=new _(e));if(!e.s)return new _(Ml);if(o=new _(o),!o.s){if(e.s<1)throw Error(xu+"Infinity");return o}if(o.eq(Ml))return o;if(n=_.precision,e.eq(Ml))return _i(o,n);if(t=e.e,r=e.d.length-1,d=t>=r,h=o.s,d){if((r=S<0?-S:S)<=o5){for(u=new _(Ml),t=Math.ceil(n/Mi+4),Vi=!1;r%2&&(u=u.times(o),wR(u.d,t)),r=Zy(r/2),r!==0;)o=o.times(o),wR(o.d,t);return Vi=!0,e.s<0?new _(Ml).div(u):_i(u,n)}}else if(h<0)throw Error(xu+"NaN");return h=h<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Vi=!1,u=e.times(w_(o,n+P)),Vi=!0,u=l5(u),u.s=h,u};br.toPrecision=function(e,t){var r,n,u=this,h=u.constructor;return e===void 0?(r=Oa(u),n=Jm(u,r<=h.toExpNeg||r>=h.toExpPos)):(wh(e,1,Hy),t===void 0?t=h.rounding:wh(t,0,8),u=_i(new h(u),e,t),r=Oa(u),n=Jm(u,e<=r||r<=h.toExpNeg,e)),n};br.toSignificantDigits=br.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(wh(e,1,Hy),t===void 0?t=n.rounding:wh(t,0,8)),_i(new n(r),e,t)};br.toString=br.valueOf=br.val=br.toJSON=br[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Oa(e),r=e.constructor;return Jm(e,t<=r.toExpNeg||t>=r.toExpPos)};function s5(e,t){var r,n,u,h,d,o,_,P,S=e.constructor,M=S.precision;if(!e.s||!t.s)return t.s||(t=new S(e)),Vi?_i(t,M):t;if(_=e.d,P=t.d,d=e.e,u=t.e,_=_.slice(),h=d-u,h){for(h<0?(n=_,h=-h,o=P.length):(n=P,u=d,o=_.length),d=Math.ceil(M/Mi),o=d>o?d+1:o+1,h>o&&(h=o,n.length=1),n.reverse();h--;)n.push(0);n.reverse()}for(o=_.length,h=P.length,o-h<0&&(h=o,n=P,P=_,_=n),r=0;h;)r=(_[--h]=_[h]+P[h]+r)/_o|0,_[h]%=_o;for(r&&(_.unshift(r),++u),o=_.length;_[--o]==0;)_.pop();return t.d=_,t.e=u,Vi?_i(t,M):t}function wh(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Wm+e)}function gh(e){var t,r,n,u=e.length-1,h="",d=e[0];if(u>0){for(h+=d,t=1;t<u;t++)n=e[t]+"",r=Mi-n.length,r&&(h+=Qf(r)),h+=n;d=e[t],n=d+"",r=Mi-n.length,r&&(h+=Qf(r))}else if(d===0)return"0";for(;d%10===0;)d/=10;return h+d}var Cd=(function(){function e(n,u){var h,d=0,o=n.length;for(n=n.slice();o--;)h=n[o]*u+d,n[o]=h%_o|0,d=h/_o|0;return d&&n.unshift(d),n}function t(n,u,h,d){var o,_;if(h!=d)_=h>d?1:-1;else for(o=_=0;o<h;o++)if(n[o]!=u[o]){_=n[o]>u[o]?1:-1;break}return _}function r(n,u,h){for(var d=0;h--;)n[h]-=d,d=n[h]<u[h]?1:0,n[h]=d*_o+n[h]-u[h];for(;!n[0]&&n.length>1;)n.shift()}return function(n,u,h,d){var o,_,P,S,M,O,z,F,B,D,H,Q,te,ie,ae,he,re,be,xe=n.constructor,$e=n.s==u.s?1:-1,Ee=n.d,Ne=u.d;if(!n.s)return new xe(n);if(!u.s)throw Error(xu+"Division by zero");for(_=n.e-u.e,re=Ne.length,ae=Ee.length,z=new xe($e),F=z.d=[],P=0;Ne[P]==(Ee[P]||0);)++P;if(Ne[P]>(Ee[P]||0)&&--_,h==null?Q=h=xe.precision:d?Q=h+(Oa(n)-Oa(u))+1:Q=h,Q<0)return new xe(0);if(Q=Q/Mi+2|0,P=0,re==1)for(S=0,Ne=Ne[0],Q++;(P<ae||S)&&Q--;P++)te=S*_o+(Ee[P]||0),F[P]=te/Ne|0,S=te%Ne|0;else{for(S=_o/(Ne[0]+1)|0,S>1&&(Ne=e(Ne,S),Ee=e(Ee,S),re=Ne.length,ae=Ee.length),ie=re,B=Ee.slice(0,re),D=B.length;D<re;)B[D++]=0;be=Ne.slice(),be.unshift(0),he=Ne[0],Ne[1]>=_o/2&&++he;do S=0,o=t(Ne,B,re,D),o<0?(H=B[0],re!=D&&(H=H*_o+(B[1]||0)),S=H/he|0,S>1?(S>=_o&&(S=_o-1),M=e(Ne,S),O=M.length,D=B.length,o=t(M,B,O,D),o==1&&(S--,r(M,re<O?be:Ne,O))):(S==0&&(o=S=1),M=Ne.slice()),O=M.length,O<D&&M.unshift(0),r(B,M,D),o==-1&&(D=B.length,o=t(Ne,B,re,D),o<1&&(S++,r(B,re<D?be:Ne,D))),D=B.length):o===0&&(S++,B=[0]),F[P++]=S,o&&B[0]?B[D++]=Ee[ie]||0:(B=[Ee[ie]],D=1);while((ie++<ae||B[0]!==void 0)&&Q--)}return F[0]||F.shift(),z.e=_,_i(z,d?h+Oa(z)+1:h)}})();function l5(e,t){var r,n,u,h,d,o,_=0,P=0,S=e.constructor,M=S.precision;if(Oa(e)>16)throw Error(vT+Oa(e));if(!e.s)return new S(Ml);for(Vi=!1,o=M,d=new S(.03125);e.abs().gte(.1);)e=e.times(d),P+=5;for(n=Math.log(Em(2,P))/Math.LN10*2+5|0,o+=n,r=u=h=new S(Ml),S.precision=o;;){if(u=_i(u.times(e),o),r=r.times(++_),d=h.plus(Cd(u,r,o)),gh(d.d).slice(0,o)===gh(h.d).slice(0,o)){for(;P--;)h=_i(h.times(h),o);return S.precision=M,t==null?(Vi=!0,_i(h,M)):h}h=d}}function Oa(e){for(var t=e.e*Mi,r=e.d[0];r>=10;r/=10)t++;return t}function KP(e,t,r){if(t>e.LN10.sd())throw Vi=!0,r&&(e.precision=r),Error(xu+"LN10 precision limit exceeded");return _i(new e(e.LN10),t)}function Qf(e){for(var t="";e--;)t+="0";return t}function w_(e,t){var r,n,u,h,d,o,_,P,S,M=1,O=10,z=e,F=z.d,B=z.constructor,D=B.precision;if(z.s<1)throw Error(xu+(z.s?"NaN":"-Infinity"));if(z.eq(Ml))return new B(0);if(t==null?(Vi=!1,P=D):P=t,z.eq(10))return t==null&&(Vi=!0),KP(B,P);if(P+=O,B.precision=P,r=gh(F),n=r.charAt(0),h=Oa(z),Math.abs(h)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)z=z.times(e),r=gh(z.d),n=r.charAt(0),M++;h=Oa(z),n>1?(z=new B("0."+r),h++):z=new B(n+"."+r.slice(1))}else return _=KP(B,P+2,D).times(h+""),z=w_(new B(n+"."+r.slice(1)),P-O).plus(_),B.precision=D,t==null?(Vi=!0,_i(z,D)):z;for(o=d=z=Cd(z.minus(Ml),z.plus(Ml),P),S=_i(z.times(z),P),u=3;;){if(d=_i(d.times(S),P),_=o.plus(Cd(d,new B(u),P)),gh(_.d).slice(0,P)===gh(o.d).slice(0,P))return o=o.times(2),h!==0&&(o=o.plus(KP(B,P+2,D).times(h+""))),o=Cd(o,new B(M),P),B.precision=D,t==null?(Vi=!0,_i(o,D)):o;o=_,u+=2}}function bR(e,t){var r,n,u;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(n,u),t){if(u-=n,r=r-n-1,e.e=Zy(r/Mi),e.d=[],n=(r+1)%Mi,r<0&&(n+=Mi),n<u){for(n&&e.d.push(+t.slice(0,n)),u-=Mi;n<u;)e.d.push(+t.slice(n,n+=Mi));t=t.slice(n),n=Mi-t.length}else n-=u;for(;n--;)t+="0";if(e.d.push(+t),Vi&&(e.e>$b||e.e<-$b))throw Error(vT+r)}else e.s=0,e.e=0,e.d=[0];return e}function _i(e,t,r){var n,u,h,d,o,_,P,S,M=e.d;for(d=1,h=M[0];h>=10;h/=10)d++;if(n=t-d,n<0)n+=Mi,u=t,P=M[S=0];else{if(S=Math.ceil((n+1)/Mi),h=M.length,S>=h)return e;for(P=h=M[S],d=1;h>=10;h/=10)d++;n%=Mi,u=n-Mi+d}if(r!==void 0&&(h=Em(10,d-u-1),o=P/h%10|0,_=t<0||M[S+1]!==void 0||P%h,_=r<4?(o||_)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||_||r==6&&(n>0?u>0?P/Em(10,d-u):0:M[S-1])%10&1||r==(e.s<0?8:7))),t<1||!M[0])return _?(h=Oa(e),M.length=1,t=t-h-1,M[0]=Em(10,(Mi-t%Mi)%Mi),e.e=Zy(-t/Mi)||0):(M.length=1,M[0]=e.e=e.s=0),e;if(n==0?(M.length=S,h=1,S--):(M.length=S+1,h=Em(10,Mi-n),M[S]=u>0?(P/Em(10,d-u)%Em(10,u)|0)*h:0),_)for(;;)if(S==0){(M[0]+=h)==_o&&(M[0]=1,++e.e);break}else{if(M[S]+=h,M[S]!=_o)break;M[S--]=0,h=1}for(n=M.length;M[--n]===0;)M.pop();if(Vi&&(e.e>$b||e.e<-$b))throw Error(vT+Oa(e));return e}function u5(e,t){var r,n,u,h,d,o,_,P,S,M,O=e.constructor,z=O.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new O(e),Vi?_i(t,z):t;if(_=e.d,M=t.d,n=t.e,P=e.e,_=_.slice(),d=P-n,d){for(S=d<0,S?(r=_,d=-d,o=M.length):(r=M,n=P,o=_.length),u=Math.max(Math.ceil(z/Mi),o)+2,d>u&&(d=u,r.length=1),r.reverse(),u=d;u--;)r.push(0);r.reverse()}else{for(u=_.length,o=M.length,S=u<o,S&&(o=u),u=0;u<o;u++)if(_[u]!=M[u]){S=_[u]<M[u];break}d=0}for(S&&(r=_,_=M,M=r,t.s=-t.s),o=_.length,u=M.length-o;u>0;--u)_[o++]=0;for(u=M.length;u>d;){if(_[--u]<M[u]){for(h=u;h&&_[--h]===0;)_[h]=_o-1;--_[h],_[u]+=_o}_[u]-=M[u]}for(;_[--o]===0;)_.pop();for(;_[0]===0;_.shift())--n;return _[0]?(t.d=_,t.e=n,Vi?_i(t,z):t):new O(0)}function Jm(e,t,r){var n,u=Oa(e),h=gh(e.d),d=h.length;return t?(r&&(n=r-d)>0?h=h.charAt(0)+"."+h.slice(1)+Qf(n):d>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(u<0?"e":"e+")+u):u<0?(h="0."+Qf(-u-1)+h,r&&(n=r-d)>0&&(h+=Qf(n))):u>=d?(h+=Qf(u+1-d),r&&(n=r-u-1)>0&&(h=h+"."+Qf(n))):((n=u+1)<d&&(h=h.slice(0,n)+"."+h.slice(n)),r&&(n=r-d)>0&&(u+1===d&&(h+="."),h+=Qf(n))),e.s<0?"-"+h:h}function wR(e,t){if(e.length>t)return e.length=t,!0}function c5(e){var t,r,n;function u(h){var d=this;if(!(d instanceof u))return new u(h);if(d.constructor=u,h instanceof u){d.s=h.s,d.e=h.e,d.d=(h=h.d)?h.slice():h;return}if(typeof h=="number"){if(h*0!==0)throw Error(Wm+h);if(h>0)d.s=1;else if(h<0)h=-h,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(h===~~h&&h<1e7){d.e=0,d.d=[h];return}return bR(d,h.toString())}else if(typeof h!="string")throw Error(Wm+h);if(h.charCodeAt(0)===45?(h=h.slice(1),d.s=-1):d.s=1,tae.test(h))bR(d,h);else throw Error(Wm+h)}if(u.prototype=br,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=c5,u.config=u.set=rae,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return u.config(e),u}function rae(e){if(!e||typeof e!="object")throw Error(xu+"Object expected");var t,r,n,u=["precision",1,Hy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((n=e[r=u[t]])!==void 0)if(Zy(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(Wm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Wm+r+": "+n);return this}var _T=c5(eae);Ml=new _T(1);const ci=_T;var nae=e=>e,h5={},d5=e=>e===h5,SR=e=>function t(){return arguments.length===0||arguments.length===1&&d5(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},f5=(e,t)=>e===1?t:SR(function(){for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];var h=n.filter(d=>d!==h5).length;return h>=e?t(...n):f5(e-h,SR(function(){for(var d=arguments.length,o=new Array(d),_=0;_<d;_++)o[_]=arguments[_];var P=n.map(S=>d5(S)?o.shift():S);return t(...P,...o)}))}),iae=e=>f5(e.length,e),ME=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},aae=iae((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),oae=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return nae;var u=r.reverse(),h=u[0],d=u.slice(1);return function(){return d.reduce((o,_)=>_(o),h(...arguments))}},kE=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function p5(e){var t;return e===0?t=1:t=Math.floor(new ci(e).abs().log(10).toNumber())+1,t}function m5(e,t,r){for(var n=new ci(e),u=0,h=[];n.lt(t)&&u<1e5;)h.push(n.toNumber()),n=n.add(r),u++;return h}var g5=e=>{var[t,r]=e,[n,u]=[t,r];return t>r&&([n,u]=[r,t]),[n,u]},y5=(e,t,r)=>{if(e.lte(0))return new ci(0);var n=p5(e.toNumber()),u=new ci(10).pow(n),h=e.div(u),d=n!==1?.05:.1,o=new ci(Math.ceil(h.div(d).toNumber())).add(r).mul(d),_=o.mul(u);return t?new ci(_.toNumber()):new ci(Math.ceil(_.toNumber()))},sae=(e,t,r)=>{var n=new ci(1),u=new ci(e);if(!u.isint()&&r){var h=Math.abs(e);h<1?(n=new ci(10).pow(p5(e)-1),u=new ci(Math.floor(u.div(n).toNumber())).mul(n)):h>1&&(u=new ci(Math.floor(e)))}else e===0?u=new ci(Math.floor((t-1)/2)):r||(u=new ci(Math.floor(e)));var d=Math.floor((t-1)/2),o=oae(aae(_=>u.add(new ci(_-d).mul(n)).toNumber()),ME);return o(0,t)},v5=function(t,r,n,u){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ci(0),tickMin:new ci(0),tickMax:new ci(0)};var d=y5(new ci(r).sub(t).div(n-1),u,h),o;t<=0&&r>=0?o=new ci(0):(o=new ci(t).add(r).div(2),o=o.sub(new ci(o).mod(d)));var _=Math.ceil(o.sub(t).div(d).toNumber()),P=Math.ceil(new ci(r).sub(o).div(d).toNumber()),S=_+P+1;return S>n?v5(t,r,n,u,h+1):(S<n&&(P=r>0?P+(n-S):P,_=r>0?_:_+(n-S)),{step:d,tickMin:o.sub(new ci(_).mul(d)),tickMax:o.add(new ci(P).mul(d))})},lae=function(t){var[r,n]=t,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(u,2),[o,_]=g5([r,n]);if(o===-1/0||_===1/0){var P=_===1/0?[o,...ME(0,u-1).map(()=>1/0)]:[...ME(0,u-1).map(()=>-1/0),_];return r>n?kE(P):P}if(o===_)return sae(o,u,h);var{step:S,tickMin:M,tickMax:O}=v5(o,_,d,h,0),z=m5(M,O.add(new ci(.1).mul(S)),S);return r>n?kE(z):z},uae=function(t,r){var[n,u]=t,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,o]=g5([n,u]);if(d===-1/0||o===1/0)return[n,u];if(d===o)return[d];var _=Math.max(r,2),P=y5(new ci(o).sub(d).div(_-1),h,0),S=[...m5(new ci(d),new ci(o),P),o];return h===!1&&(S=S.map(M=>Math.round(M))),n>u?kE(S):S},_5=e=>e.rootProps.maxBarSize,cae=e=>e.rootProps.barGap,x5=e=>e.rootProps.barCategoryGap,hae=e=>e.rootProps.barSize,t1=e=>e.rootProps.stackOffset,b5=e=>e.rootProps.reverseStackOrder,xT=e=>e.options.chartName,bT=e=>e.rootProps.syncId,w5=e=>e.rootProps.syncMethod,wT=e=>e.options.eventEmitter,dae=e=>e.rootProps.baseValue,xo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},bd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},El={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},r1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},fae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:bd.angleAxisId,includeHidden:!1,name:void 0,reversed:bd.reversed,scale:bd.scale,tick:bd.tick,tickCount:void 0,ticks:void 0,type:bd.type,unit:void 0},pae={allowDataOverflow:El.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:El.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:El.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:El.scale,tick:El.tick,tickCount:El.tickCount,ticks:void 0,type:El.type,unit:void 0},mae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:bd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bd.scale,tick:bd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},gae={allowDataOverflow:El.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:El.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:El.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:El.scale,tick:El.tick,tickCount:El.tickCount,ticks:void 0,type:"category",unit:void 0},ST=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?mae:fae,PT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?gae:pae,n1=e=>e.polarOptions,ET=Tt([Fd,Bd,bo],ure),S5=Tt([n1,ET],(e,t)=>{if(e!=null)return Pc(e.innerRadius,t,0)}),P5=Tt([n1,ET],(e,t)=>{if(e!=null)return Pc(e.outerRadius,t,t*.8)}),yae=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},E5=Tt([n1],yae);Tt([ST,E5],r1);var C5=Tt([ET,S5,P5],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Tt([PT,C5],r1);var T5=Tt([Bn,n1,S5,P5,Fd,Bd],(e,t,r,n,u,h)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:d,cy:o,startAngle:_,endAngle:P}=t;return{cx:Pc(d,u,u/2),cy:Pc(o,h,h/2),innerRadius:r,outerRadius:n,startAngle:_,endAngle:P,clockWise:!1}}}),Xa=(e,t)=>t,i1=(e,t,r)=>r;function a1(e){return e==null?void 0:e.id}function M5(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:u,dataKey:h}=r,d=new Map;return e.forEach(o=>{var _,P=(_=o.data)!==null&&_!==void 0?_:n;if(!(P==null||P.length===0)){var S=a1(o);P.forEach((M,O)=>{var z=h==null||u?O:String(Ha(M,h,null)),F=Ha(M,o.dataKey,0),B;d.has(z)?B=d.get(z):B={},Object.assign(B,{[S]:F}),d.set(z,B)})}}),Array.from(d.values())}function o1(e){return e.stackId!=null&&e.dataKey!=null}var s1=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function l1(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function vae(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Ya=e=>{var t=Bn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ky=e=>e.tooltip.settings.axisId;function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ub(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(n){_ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ae(e,t,r){return(t=xae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xae(e){var t=bae(e,"string");return typeof t=="symbol"?t:t+""}function bae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AE=[0,"auto"],go={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},k5=(e,t)=>e.cartesianAxis.xAxis[t],$d=(e,t)=>{var r=k5(e,t);return r??go},yo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:AE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:H_},A5=(e,t)=>e.cartesianAxis.yAxis[t],Ud=(e,t)=>{var r=A5(e,t);return r??yo},wae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},CT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??wae},Cs=(e,t,r)=>{switch(t){case"xAxis":return $d(e,r);case"yAxis":return Ud(e,r);case"zAxis":return CT(e,r);case"angleAxis":return ST(e,r);case"radiusAxis":return PT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Sae=(e,t,r)=>{switch(t){case"xAxis":return $d(e,r);case"yAxis":return Ud(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},J_=(e,t,r)=>{switch(t){case"xAxis":return $d(e,r);case"yAxis":return Ud(e,r);case"angleAxis":return ST(e,r);case"radiusAxis":return PT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},I5=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function O5(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var u1=e=>e.graphicalItems.cartesianItems,Pae=Tt([Xa,i1],O5),L5=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),e0=Tt([u1,Cs,Pae],L5,{memoizeOptions:{resultEqualityCheck:l1}}),D5=Tt([e0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(o1)),R5=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Eae=Tt([e0],R5),j5=e=>e.map(t=>t.data).filter(Boolean).flat(1),Cae=Tt([e0],j5,{memoizeOptions:{resultEqualityCheck:l1}}),z5=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:u}=t;return e.length>0?e:r.slice(n,u+1)},TT=Tt([Cae,e1],z5),N5=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ha(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(u=>({value:Ha(u,n)}))):e.map(n=>({value:n})),c1=Tt([TT,Cs,e0],N5);function F5(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Fx(e){if(xh(e)||e instanceof Date){var t=Number(e);if(Ai(t))return t}}function ER(e){if(Array.isArray(e)){var t=[Fx(e[0]),Fx(e[1])];return _p(t)?t:void 0}var r=Fx(e);if(r!=null)return[r,r]}function jd(e){return e.map(Fx).filter(yQ)}function Tae(e,t,r){return!r||typeof t!="number"||_u(t)?[]:r.length?jd(r.flatMap(n=>{var u=Ha(e,n.dataKey),h,d;if(Array.isArray(u)?[h,d]=u:h=d=u,!(!Ai(h)||!Ai(d)))return[t-h,t+d]})):[]}var Qa=e=>{var t=Ya(e),r=Ky(e);return J_(e,t,r)},t0=Tt([Qa],e=>e==null?void 0:e.dataKey),Mae=Tt([D5,e1,Qa],M5),B5=(e,t,r,n)=>{var u={},h=t.reduce((d,o)=>(o.stackId==null||(d[o.stackId]==null&&(d[o.stackId]=[]),d[o.stackId].push(o)),d),u);return Object.fromEntries(Object.entries(h).map(d=>{var[o,_]=d,P=n?[..._].reverse():_,S=P.map(a1);return[o,{stackedData:BJ(e,S,r),graphicalItems:P}]}))},S_=Tt([Mae,D5,t1,b5],B5),V5=(e,t,r,n)=>{var{dataStartIndex:u,dataEndIndex:h}=t;if(n==null&&r!=="zAxis"){var d=qJ(e,u,h);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},kae=Tt([Cs],e=>e.allowDataOverflow),MT=e=>{var t;if(e==null||!("domain"in e))return AE;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=jd(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:AE},$5=Tt([Cs],MT),U5=Tt([$5,kae],a5),Aae=Tt([S_,Tp,Xa,U5],V5,{memoizeOptions:{resultEqualityCheck:s1}}),kT=e=>e.errorBars,Iae=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>F5(r,n)),qb=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var u=r.filter(Boolean);if(u.length!==0){var h=u.flat(),d=Math.min(...h),o=Math.max(...h);return[d,o]}},q5=(e,t,r,n,u)=>{var h,d;if(r.length>0&&e.forEach(o=>{r.forEach(_=>{var P,S,M=(P=n[_.id])===null||P===void 0?void 0:P.filter(H=>F5(u,H)),O=Ha(o,(S=t.dataKey)!==null&&S!==void 0?S:_.dataKey),z=Tae(o,O,M);if(z.length>=2){var F=Math.min(...z),B=Math.max(...z);(h==null||F<h)&&(h=F),(d==null||B>d)&&(d=B)}var D=ER(O);D!=null&&(h=h==null?D[0]:Math.min(h,D[0]),d=d==null?D[1]:Math.max(d,D[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var _=ER(Ha(o,t.dataKey));_!=null&&(h=h==null?_[0]:Math.min(h,_[0]),d=d==null?_[1]:Math.max(d,_[1]))}),Ai(h)&&Ai(d))return[h,d]},Oae=Tt([TT,Cs,Eae,kT,Xa],q5,{memoizeOptions:{resultEqualityCheck:s1}});function Lae(e){var{value:t}=e;if(xh(t)||t instanceof Date)return t}var Dae=(e,t,r)=>{var n=e.map(Lae).filter(u=>u!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&IF(n))?PB(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},G5=e=>e.referenceElements.dots,Xy=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Rae=Tt([G5,Xa,i1],Xy),W5=e=>e.referenceElements.areas,jae=Tt([W5,Xa,i1],Xy),H5=e=>e.referenceElements.lines,zae=Tt([H5,Xa,i1],Xy),Z5=(e,t)=>{var r=jd(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Nae=Tt(Rae,Xa,Z5),K5=(e,t)=>{var r=jd(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Fae=Tt([jae,Xa],K5);function Bae(e){var t;if(e.x!=null)return jd([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:jd(r)}function Vae(e){var t;if(e.y!=null)return jd([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:jd(r)}var X5=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Bae(n):Vae(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$ae=Tt([zae,Xa],X5),Uae=Tt(Nae,$ae,Fae,(e,t,r)=>qb(e,r,t)),Y5=(e,t,r,n,u,h,d,o)=>{if(r!=null)return r;var _=d==="vertical"&&o==="xAxis"||d==="horizontal"&&o==="yAxis",P=_?qb(n,h,u):qb(h,u);return Jie(t,P,e.allowDataOverflow)},qae=Tt([Cs,$5,U5,Aae,Oae,Uae,Bn,Xa],Y5,{memoizeOptions:{resultEqualityCheck:s1}}),Gae=[0,1],Q5=(e,t,r,n,u,h,d)=>{if(!((e==null||r==null||r.length===0)&&d===void 0)){var{dataKey:o,type:_}=e,P=Nd(t,h);if(P&&o==null){var S;return PB(0,(S=r==null?void 0:r.length)!==null&&S!==void 0?S:0)}return _==="category"?Dae(n,e,P):u==="expand"?Gae:d}},AT=Tt([Cs,Bn,TT,c1,t1,Xa,qae],Q5),J5=(e,t,r,n,u)=>{if(e!=null){var{scale:h,type:d}=e;if(h==="auto")return t==="radial"&&u==="radiusAxis"?"band":t==="radial"&&u==="angleAxis"?"linear":d==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":d==="category"?"band":"linear";if(typeof h=="string"){var o="scale".concat(G_(h));return o in Jv?o:"point"}}},r0=Tt([Cs,Bn,I5,xT,Xa],J5);function Wae(e){if(e!=null){if(e in Jv)return Jv[e]();var t="scale".concat(G_(e));if(t in Jv)return Jv[t]()}}function IT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var u=Wae(t);if(u!=null){var h=u.domain(r).range(n);return RJ(h),h}}}var e4=(e,t,r)=>{var n=MT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&_p(e))return lae(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&_p(e))return uae(e,t.tickCount,t.allowDecimals)}},OT=Tt([AT,J_,r0],e4),t4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&_p(t)&&Array.isArray(r)&&r.length>0){var u=t[0],h=r[0],d=t[1],o=r[r.length-1];return[Math.min(u,h),Math.max(d,o)]}return t},Hae=Tt([Cs,AT,OT,Xa],t4),Zae=Tt(c1,Cs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(jd(e.map(o=>o.value))).sort((o,_)=>o-_);if(n.length<2)return 1/0;var u=n[n.length-1]-n[0];if(u===0)return 1/0;for(var h=0;h<n.length-1;h++){var d=n[h+1]-n[h];r=Math.min(r,d)}return r/u}}),r4=Tt(Zae,Bn,x5,bo,(e,t,r,n)=>n,(e,t,r,n,u)=>{if(!Ai(e))return 0;var h=t==="vertical"?n.height:n.width;if(u==="gap")return e*h/2;if(u==="no-gap"){var d=Pc(r,e*h),o=e*h/2;return o-d-(o-d)/h*d}return 0}),Kae=(e,t)=>{var r=$d(e,t);return r==null||typeof r.padding!="string"?0:r4(e,"xAxis",t,r.padding)},Xae=(e,t)=>{var r=Ud(e,t);return r==null||typeof r.padding!="string"?0:r4(e,"yAxis",t,r.padding)},Yae=Tt($d,Kae,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:u}=e;return typeof u=="string"?{left:t,right:t}:{left:((r=u.left)!==null&&r!==void 0?r:0)+t,right:((n=u.right)!==null&&n!==void 0?n:0)+t}}),Qae=Tt(Ud,Xae,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:u}=e;return typeof u=="string"?{top:t,bottom:t}:{top:((r=u.top)!==null&&r!==void 0?r:0)+t,bottom:((n=u.bottom)!==null&&n!==void 0?n:0)+t}}),Jae=Tt([bo,Yae,Bw,Fw,(e,t,r)=>r],(e,t,r,n,u)=>{var{padding:h}=n;return u?[h.left,r.width-h.right]:[e.left+t.left,e.left+e.width-t.right]}),eoe=Tt([bo,Bn,Qae,Bw,Fw,(e,t,r)=>r],(e,t,r,n,u,h)=>{var{padding:d}=u;return h?[n.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),n0=(e,t,r,n)=>{var u;switch(t){case"xAxis":return Jae(e,r,n);case"yAxis":return eoe(e,r,n);case"zAxis":return(u=CT(e,r))===null||u===void 0?void 0:u.range;case"angleAxis":return E5(e);case"radiusAxis":return C5(e,r);default:return}},n4=Tt([Cs,n0],r1),Yy=Tt([Cs,r0,Hae,n4],IT);Tt([e0,kT,Xa],Iae);function i4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var h1=(e,t)=>t,d1=(e,t,r)=>r,toe=Tt(zw,h1,d1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(i4)),roe=Tt(Nw,h1,d1,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(i4)),a4=(e,t)=>({width:e.width,height:t.height}),noe=(e,t)=>{var r=typeof t.width=="number"?t.width:H_;return{width:r,height:e.height}},o4=Tt(bo,$d,a4),ioe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},aoe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},ooe=Tt(Bd,bo,toe,h1,d1,(e,t,r,n,u)=>{var h={},d;return r.forEach(o=>{var _=a4(t,o);d==null&&(d=ioe(t,n,e));var P=n==="top"&&!u||n==="bottom"&&u;h[o.id]=d-Number(P)*_.height,d+=(P?-1:1)*_.height}),h}),soe=Tt(Fd,bo,roe,h1,d1,(e,t,r,n,u)=>{var h={},d;return r.forEach(o=>{var _=noe(t,o);d==null&&(d=aoe(t,n,e));var P=n==="left"&&!u||n==="right"&&u;h[o.id]=d-Number(P)*_.width,d+=(P?-1:1)*_.width}),h}),loe=(e,t)=>{var r=$d(e,t);if(r!=null)return ooe(e,r.orientation,r.mirror)},uoe=Tt([bo,$d,loe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var u=r==null?void 0:r[n];return u==null?{x:e.left,y:0}:{x:e.left,y:u}}}),coe=(e,t)=>{var r=Ud(e,t);if(r!=null)return soe(e,r.orientation,r.mirror)},hoe=Tt([bo,Ud,coe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var u=r==null?void 0:r[n];return u==null?{x:0,y:e.top}:{x:u,y:e.top}}}),s4=Tt(bo,Ud,(e,t)=>{var r=typeof t.width=="number"?t.width:H_;return{width:r,height:e.height}}),CR=(e,t,r)=>{switch(t){case"xAxis":return o4(e,r).width;case"yAxis":return s4(e,r).height;default:return}},l4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:u,type:h,dataKey:d}=r,o=Nd(e,n),_=t.map(P=>P.value);if(d&&o&&h==="category"&&u&&IF(_))return _}},LT=Tt([Bn,c1,Cs,Xa],l4),u4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:u,scale:h}=r,d=Nd(e,n);if(d&&(u==="number"||h!=="auto"))return t.map(o=>o.value)}},DT=Tt([Bn,c1,J_,Xa],u4),TR=Tt([Bn,Sae,r0,Yy,LT,DT,n0,OT,Xa],(e,t,r,n,u,h,d,o,_)=>{if(t!=null){var P=Nd(e,_);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:_,categoricalDomain:h,duplicateDomain:u,isCategorical:P,niceTicks:o,range:d,realScaleType:r,scale:n}}}),doe=(e,t,r,n,u,h,d,o,_)=>{if(!(t==null||n==null)){var P=Nd(e,_),{type:S,ticks:M,tickCount:O}=t,z=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,F=S==="category"&&n.bandwidth?n.bandwidth()/z:0;F=_==="angleAxis"&&h!=null&&h.length>=2?Ys(h[0]-h[1])*2*F:F;var B=M||u;if(B){var D=B.map((H,Q)=>{var te=d?d.indexOf(H):H;return{index:Q,coordinate:n(te)+F,value:H,offset:F}});return D.filter(H=>Ai(H.coordinate))}return P&&o?o.map((H,Q)=>({coordinate:n(H)+F,value:H,index:Q,offset:F})).filter(H=>Ai(H.coordinate)):n.ticks?n.ticks(O).map(H=>({coordinate:n(H)+F,value:H,offset:F})):n.domain().map((H,Q)=>({coordinate:n(H)+F,value:d?d[H]:H,index:Q,offset:F}))}},c4=Tt([Bn,J_,r0,Yy,OT,n0,LT,DT,Xa],doe),foe=(e,t,r,n,u,h,d)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Nd(e,d),{tickCount:_}=t,P=0;return P=d==="angleAxis"&&(n==null?void 0:n.length)>=2?Ys(n[0]-n[1])*2*P:P,o&&h?h.map((S,M)=>({coordinate:r(S)+P,value:S,index:M,offset:P})):r.ticks?r.ticks(_).map(S=>({coordinate:r(S)+P,value:S,offset:P})):r.domain().map((S,M)=>({coordinate:r(S)+P,value:u?u[S]:S,index:M,offset:P}))}},xp=Tt([Bn,J_,Yy,n0,LT,DT,Xa],foe),bp=Tt(Cs,Yy,(e,t)=>{if(!(e==null||t==null))return Ub(Ub({},e),{},{scale:t})}),poe=Tt([Cs,r0,AT,n4],IT);Tt((e,t,r)=>CT(e,r),poe,(e,t)=>{if(!(e==null||t==null))return Ub(Ub({},e),{},{scale:t})});var moe=Tt([Bn,zw,Nw],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),h4=e=>e.options.defaultTooltipEventType,d4=e=>e.options.validateTooltipEventTypes;function f4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function RT(e,t){var r=h4(e),n=d4(e);return f4(t,r,n)}function goe(e){return Or(t=>RT(t,e))}var p4=(e,t)=>{var r,n=Number(t);if(!(_u(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},yoe=e=>e.tooltip.settings,ip={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},voe={itemInteraction:{click:ip,hover:ip},axisInteraction:{click:ip,hover:ip},keyboardInteraction:ip,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},m4=Yo({name:"tooltip",initialState:voe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Bi()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,u=bc(e).tooltipItemPayloads.indexOf(r);u>-1&&(e.tooltipItemPayloads[u]=n)},prepare:Bi()},removeTooltipEntrySettings:{reducer(e,t){var r=bc(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Bi()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:_oe,replaceTooltipEntrySettings:xoe,removeTooltipEntrySettings:boe,setTooltipSettingsState:woe,setActiveMouseOverItemIndex:g4,mouseLeaveItem:Soe,mouseLeaveChart:y4,setActiveClickItemIndex:Poe,setMouseOverAxisIndex:v4,setMouseClickAxisIndex:Eoe,setSyncInteraction:IE,setKeyboardInteraction:OE}=m4.actions,Coe=m4.reducer;function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function wx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){Toe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Toe(e,t,r){return(t=Moe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Moe(e){var t=koe(e,"string");return typeof t=="symbol"?t:t+""}function koe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aoe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Ioe(e){return e.index!=null}var _4=(e,t,r,n)=>{if(t==null)return ip;var u=Aoe(e,t,r);if(u==null)return ip;if(u.active)return u;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var h=e.settings.active===!0;if(Ioe(u)){if(h)return wx(wx({},u),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return wx(wx({},ip),{},{coordinate:u.coordinate})};function Ooe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Loe(e,t){var r=Ooe(e),n=t[0],u=t[1];if(r===void 0)return!1;var h=Math.min(n,u),d=Math.max(n,u);return r>=h&&r<=d}function Doe(e,t,r){if(r==null||t==null)return!0;var n=Ha(e,t);return n==null||!_p(r)?!0:Loe(n,r)}var jT=(e,t,r,n)=>{var u=e==null?void 0:e.index;if(u==null)return null;var h=Number(u);if(!Ai(h))return u;var d=0,o=1/0;t.length>0&&(o=t.length-1);var _=Math.max(d,Math.min(h,o)),P=t[_];return P==null||Doe(P,r,n)?String(_):null},x4=(e,t,r,n,u,h,d,o)=>{if(!(h==null||o==null)){var _=d[0],P=_==null?void 0:o(_.positions,h);if(P!=null)return P;var S=u==null?void 0:u[Number(h)];if(S)switch(r){case"horizontal":return{x:S.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:S.coordinate}}}},b4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var u;return r==="hover"?u=e.itemInteraction.hover.dataKey:u=e.itemInteraction.click.dataKey,u==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(h=>{var d;return((d=h.settings)===null||d===void 0?void 0:d.dataKey)===u})},i0=e=>e.options.tooltipPayloadSearcher,Qy=e=>e.tooltip;function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function AR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(n){Roe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Roe(e,t,r){return(t=joe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function joe(e){var t=zoe(e,"string");return typeof t=="symbol"?t:t+""}function zoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Noe(e,t){return e??t}var w4=(e,t,r,n,u,h,d)=>{if(!(t==null||h==null)){var{chartData:o,computedData:_,dataStartIndex:P,dataEndIndex:S}=r,M=[];return e.reduce((O,z)=>{var F,{dataDefinedOnItem:B,settings:D}=z,H=Noe(B,o),Q=Array.isArray(H)?XF(H,P,S):H,te=(F=D==null?void 0:D.dataKey)!==null&&F!==void 0?F:n,ie=D==null?void 0:D.nameKey,ae;if(n&&Array.isArray(Q)&&!Array.isArray(Q[0])&&d==="axis"?ae=OF(Q,n,u):ae=h(Q,t,_,ie),Array.isArray(ae))ae.forEach(re=>{var be=AR(AR({},D),{},{name:re.name,unit:re.unit,color:void 0,fill:void 0});O.push(XL({tooltipEntrySettings:be,dataKey:re.dataKey,payload:re.payload,value:Ha(re.payload,re.dataKey),name:re.name}))});else{var he;O.push(XL({tooltipEntrySettings:D,dataKey:te,payload:ae,value:Ha(ae,te),name:(he=Ha(ae,ie))!==null&&he!==void 0?he:D==null?void 0:D.name}))}return O},M)}},zT=Tt([Qa,Bn,I5,xT,Ya],J5),Foe=Tt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Boe=Tt([Ya,Ky],O5),a0=Tt([Foe,Qa,Boe],L5,{memoizeOptions:{resultEqualityCheck:l1}}),Voe=Tt([a0],e=>e.filter(o1)),$oe=Tt([a0],j5,{memoizeOptions:{resultEqualityCheck:l1}}),Jy=Tt([$oe,Tp],z5),Uoe=Tt([Voe,Tp,Qa],M5),NT=Tt([Jy,Qa,a0],N5),S4=Tt([Qa],MT),qoe=Tt([Qa],e=>e.allowDataOverflow),P4=Tt([S4,qoe],a5),Goe=Tt([a0],e=>e.filter(o1)),Woe=Tt([Uoe,Goe,t1,b5],B5),Hoe=Tt([Woe,Tp,Ya,P4],V5),Zoe=Tt([a0],R5),Koe=Tt([Jy,Qa,Zoe,kT,Ya],q5,{memoizeOptions:{resultEqualityCheck:s1}}),Xoe=Tt([G5,Ya,Ky],Xy),Yoe=Tt([Xoe,Ya],Z5),Qoe=Tt([W5,Ya,Ky],Xy),Joe=Tt([Qoe,Ya],K5),ese=Tt([H5,Ya,Ky],Xy),tse=Tt([ese,Ya],X5),rse=Tt([Yoe,tse,Joe],qb),nse=Tt([Qa,S4,P4,Hoe,Koe,rse,Bn,Ya],Y5),o0=Tt([Qa,Bn,Jy,NT,t1,Ya,nse],Q5),ise=Tt([o0,Qa,zT],e4),ase=Tt([Qa,o0,ise,Ya],t4),E4=e=>{var t=Ya(e),r=Ky(e),n=!1;return n0(e,t,r,n)},C4=Tt([Qa,E4],r1),T4=Tt([Qa,zT,ase,C4],IT),ose=Tt([Bn,NT,Qa,Ya],l4),sse=Tt([Bn,NT,Qa,Ya],u4),lse=(e,t,r,n,u,h,d,o)=>{if(t){var{type:_}=t,P=Nd(e,o);if(n){var S=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,M=_==="category"&&n.bandwidth?n.bandwidth()/S:0;return M=o==="angleAxis"&&u!=null&&(u==null?void 0:u.length)>=2?Ys(u[0]-u[1])*2*M:M,P&&d?d.map((O,z)=>({coordinate:n(O)+M,value:O,index:z,offset:M})):n.domain().map((O,z)=>({coordinate:n(O)+M,value:h?h[O]:O,index:z,offset:M}))}}},qd=Tt([Bn,Qa,zT,T4,E4,ose,sse,Ya],lse),FT=Tt([h4,d4,yoe],(e,t,r)=>f4(r.shared,e,t)),M4=e=>e.tooltip.settings.trigger,BT=e=>e.tooltip.settings.defaultIndex,s0=Tt([Qy,FT,M4,BT],_4),eg=Tt([s0,Jy,t0,o0],jT),k4=Tt([qd,eg],p4),A4=Tt([s0],e=>{if(e)return e.dataKey});Tt([s0],e=>{if(e)return e.graphicalItemId});var I4=Tt([Qy,FT,M4,BT],b4),use=Tt([Fd,Bd,Bn,bo,qd,BT,I4,i0],x4),cse=Tt([s0,use],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),hse=Tt([s0],e=>e.active),dse=Tt([I4,eg,Tp,t0,k4,i0,FT],w4),fse=Tt([dse],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function OR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){pse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=gse(e,"string");return typeof t=="symbol"?t:t+""}function gse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yse=()=>Or(Qa),vse=()=>{var e=yse(),t=Or(qd),r=Or(T4);return My(!e||!r?void 0:OR(OR({},e),{},{scale:r}),t)};function LR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Xg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(r),!0).forEach(function(n){_se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _se(e,t,r){return(t=xse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xse(e){var t=bse(e,"string");return typeof t=="symbol"?t:t+""}function bse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wse=(e,t,r,n)=>{var u=t.find(h=>h&&h.index===r);if(u){if(e==="horizontal")return{x:u.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:u.coordinate}}return{x:0,y:0}},Sse=(e,t,r,n)=>{var u=t.find(P=>P&&P.index===r);if(u){if(e==="centric"){var h=u.coordinate,{radius:d}=n;return Xg(Xg(Xg({},n),ko(n.cx,n.cy,d,h)),{},{angle:h,radius:d})}var o=u.coordinate,{angle:_}=n;return Xg(Xg(Xg({},n),ko(n.cx,n.cy,o,_)),{},{angle:_,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Pse(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var O4=(e,t,r,n,u)=>{var h,d=-1,o=(h=t==null?void 0:t.length)!==null&&h!==void 0?h:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&u!=null&&Math.abs(Math.abs(u[1]-u[0])-360)<=1e-6)for(var _=0;_<o;_++){var P=_>0?r[_-1].coordinate:r[o-1].coordinate,S=r[_].coordinate,M=_>=o-1?r[0].coordinate:r[_+1].coordinate,O=void 0;if(Ys(S-P)!==Ys(M-S)){var z=[];if(Ys(M-S)===Ys(u[1]-u[0])){O=M;var F=S+u[1]-u[0];z[0]=Math.min(F,(F+P)/2),z[1]=Math.max(F,(F+P)/2)}else{O=P;var B=M+u[1]-u[0];z[0]=Math.min(S,(B+S)/2),z[1]=Math.max(S,(B+S)/2)}var D=[Math.min(S,(O+S)/2),Math.max(S,(O+S)/2)];if(e>D[0]&&e<=D[1]||e>=z[0]&&e<=z[1]){({index:d}=r[_]);break}}else{var H=Math.min(P,M),Q=Math.max(P,M);if(e>(H+S)/2&&e<=(Q+S)/2){({index:d}=r[_]);break}}}else if(t){for(var te=0;te<o;te++)if(te===0&&e<=(t[te].coordinate+t[te+1].coordinate)/2||te>0&&te<o-1&&e>(t[te].coordinate+t[te-1].coordinate)/2&&e<=(t[te].coordinate+t[te+1].coordinate)/2||te===o-1&&e>(t[te].coordinate+t[te-1].coordinate)/2){({index:d}=t[te]);break}}return d},L4=()=>Or(xT),VT=(e,t)=>t,D4=(e,t,r)=>r,$T=(e,t,r,n)=>n,Ese=Tt(qd,e=>Rw(e,t=>t.coordinate)),UT=Tt([Qy,VT,D4,$T],_4),qT=Tt([UT,Jy,t0,o0],jT),Cse=(e,t,r)=>{if(t!=null){var n=Qy(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},R4=Tt([Qy,VT,D4,$T],b4),Gb=Tt([Fd,Bd,Bn,bo,qd,$T,R4,i0],x4),Tse=Tt([UT,Gb],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),j4=Tt([qd,qT],p4),Mse=Tt([R4,qT,Tp,t0,j4,i0,VT],w4),kse=Tt([UT,qT],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Ase=(e,t,r,n,u,h,d)=>{if(!(!e||!r||!n||!u)&&Pse(e,d)){var o=GJ(e,t),_=O4(o,h,u,r,n),P=wse(t,u,_,e);return{activeIndex:String(_),activeCoordinate:P}}},Ise=(e,t,r,n,u,h,d)=>{if(!(!e||!n||!u||!h||!r)){var o=pre(e,r);if(o){var _=WJ(o,t),P=O4(_,d,h,n,u),S=Sse(t,h,P,o);return{activeIndex:String(P),activeCoordinate:S}}}},Ose=(e,t,r,n,u,h,d,o)=>{if(!(!e||!t||!n||!u||!h))return t==="horizontal"||t==="vertical"?Ase(e,t,n,u,h,d,o):Ise(e,t,r,n,u,h,d)},Lse=Tt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),Dse=Tt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(xo)),r=Array.from(new Set(t));return r.sort((n,u)=>n-u)},{memoizeOptions:{resultEqualityCheck:vae}});function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function RR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){Rse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rse(e,t,r){return(t=jse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jse(e){var t=zse(e,"string");return typeof t=="symbol"?t:t+""}function zse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nse={},Fse={zIndexMap:Object.values(xo).reduce((e,t)=>RR(RR({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Nse)},Bse=new Set(Object.values(xo));function Vse(e){return Bse.has(e)}var z4=Yo({name:"zIndex",initialState:Fse,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Bi()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Vse(r)&&delete e.zIndexMap[r])},prepare:Bi()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:u}=t.payload;e.zIndexMap[r]?u?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:u?void 0:n,panoramaElementId:u?n:void 0}},prepare:Bi()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Bi()}}}),{registerZIndexPortal:$se,unregisterZIndexPortal:Use,registerZIndexPortalId:qse,unregisterZIndexPortalId:Gse}=z4.actions,Wse=z4.reducer;function Su(e){var{zIndex:t,children:r}=e,n=Cee(),u=n&&t!==void 0&&t!==0,h=Qo(),d=Ki();A.useLayoutEffect(()=>u?(d($se({zIndex:t})),()=>{d(Use({zIndex:t}))}):W_,[d,t,u]);var o=Or(P=>Lse(P,t,h));if(!u)return r;if(!o)return null;var _=document.getElementById(o);return _?Cc.createPortal(r,_):null}function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LE.apply(null,arguments)}function jR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Sx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(r),!0).forEach(function(n){Hse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hse(e,t,r){return(t=Zse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zse(e){var t=Kse(e,"string");return typeof t=="symbol"?t:t+""}function Kse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xse(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return A.isValidElement(t)?A.cloneElement(t,n):A.createElement(r,n)}function Yse(e){var t,{coordinate:r,payload:n,index:u,offset:h,tooltipAxisBandSize:d,layout:o,cursor:_,tooltipEventType:P,chartName:S}=e,M=r,O=n,z=u;if(!_||!M||S!=="ScatterChart"&&P!=="axis")return null;var F,B,D;if(S==="ScatterChart")F=M,B=Mte,D=xo.cursorLine;else if(S==="BarChart")F=kte(o,M,h,d),B=xB,D=xo.cursorRectangle;else if(o==="radial"&&DF(M)){var{cx:H,cy:Q,radius:te,startAngle:ie,endAngle:ae}=bB(M);F={cx:H,cy:Q,startAngle:ie,endAngle:ae,innerRadius:te,outerRadius:te},B=SB,D=xo.cursorLine}else F={points:vre(o,M,h)},B=n_,D=xo.cursorLine;var he=typeof _=="object"&&"className"in _?_.className:void 0,re=Sx(Sx(Sx(Sx({stroke:"#ccc",pointerEvents:"none"},h),F),q_(_)),{},{payload:O,payloadIndex:z,className:ti("recharts-tooltip-cursor",he)});return A.createElement(Su,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:D},A.createElement(Xse,{cursor:_,cursorComp:B,cursorProps:re}))}function Qse(e){var t=vse(),r=oB(),n=qy(),u=L4();return t==null||r==null||n==null||u==null?null:A.createElement(Yse,LE({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:u}))}var N4=A.createContext(null),Jse=()=>A.useContext(N4),XP={exports:{}},zR;function ele(){return zR||(zR=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function u(_,P,S){this.fn=_,this.context=P,this.once=S||!1}function h(_,P,S,M,O){if(typeof S!="function")throw new TypeError("The listener must be a function");var z=new u(S,M||_,O),F=r?r+P:P;return _._events[F]?_._events[F].fn?_._events[F]=[_._events[F],z]:_._events[F].push(z):(_._events[F]=z,_._eventsCount++),_}function d(_,P){--_._eventsCount===0?_._events=new n:delete _._events[P]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var P=[],S,M;if(this._eventsCount===0)return P;for(M in S=this._events)t.call(S,M)&&P.push(r?M.slice(1):M);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(S)):P},o.prototype.listeners=function(P){var S=r?r+P:P,M=this._events[S];if(!M)return[];if(M.fn)return[M.fn];for(var O=0,z=M.length,F=new Array(z);O<z;O++)F[O]=M[O].fn;return F},o.prototype.listenerCount=function(P){var S=r?r+P:P,M=this._events[S];return M?M.fn?1:M.length:0},o.prototype.emit=function(P,S,M,O,z,F){var B=r?r+P:P;if(!this._events[B])return!1;var D=this._events[B],H=arguments.length,Q,te;if(D.fn){switch(D.once&&this.removeListener(P,D.fn,void 0,!0),H){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,S),!0;case 3:return D.fn.call(D.context,S,M),!0;case 4:return D.fn.call(D.context,S,M,O),!0;case 5:return D.fn.call(D.context,S,M,O,z),!0;case 6:return D.fn.call(D.context,S,M,O,z,F),!0}for(te=1,Q=new Array(H-1);te<H;te++)Q[te-1]=arguments[te];D.fn.apply(D.context,Q)}else{var ie=D.length,ae;for(te=0;te<ie;te++)switch(D[te].once&&this.removeListener(P,D[te].fn,void 0,!0),H){case 1:D[te].fn.call(D[te].context);break;case 2:D[te].fn.call(D[te].context,S);break;case 3:D[te].fn.call(D[te].context,S,M);break;case 4:D[te].fn.call(D[te].context,S,M,O);break;default:if(!Q)for(ae=1,Q=new Array(H-1);ae<H;ae++)Q[ae-1]=arguments[ae];D[te].fn.apply(D[te].context,Q)}}return!0},o.prototype.on=function(P,S,M){return h(this,P,S,M,!1)},o.prototype.once=function(P,S,M){return h(this,P,S,M,!0)},o.prototype.removeListener=function(P,S,M,O){var z=r?r+P:P;if(!this._events[z])return this;if(!S)return d(this,z),this;var F=this._events[z];if(F.fn)F.fn===S&&(!O||F.once)&&(!M||F.context===M)&&d(this,z);else{for(var B=0,D=[],H=F.length;B<H;B++)(F[B].fn!==S||O&&!F[B].once||M&&F[B].context!==M)&&D.push(F[B]);D.length?this._events[z]=D.length===1?D[0]:D:d(this,z)}return this},o.prototype.removeAllListeners=function(P){var S;return P?(S=r?r+P:P,this._events[S]&&d(this,S)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(XP)),XP.exports}var tle=ele();const rle=Sh(tle);var P_=new rle,DE="recharts.syncEvent.tooltip",NR="recharts.syncEvent.brush";function F4(e,t){if(t){var r=Number.parseInt(t,10);if(!_u(r))return e==null?void 0:e[r]}}var nle={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},B4=Yo({name:"options",initialState:nle,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ile=B4.reducer,{createEventEmitter:ale}=B4.actions;function ole(e){return e.tooltip.syncInteraction}var sle={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},V4=Yo({name:"chartData",initialState:sle,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:FR,setDataStartEndIndexes:lle,setComputedData:lme}=V4.actions,ule=V4.reducer,cle=["x","y"];function BR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(r),!0).forEach(function(n){hle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hle(e,t,r){return(t=dle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dle(e){var t=fle(e,"string");return typeof t=="symbol"?t:t+""}function fle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ple(e,t){if(e==null)return{};var r,n,u=mle(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function mle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gle(){var e=Or(bT),t=Or(wT),r=Ki(),n=Or(w5),u=Or(qd),h=qy(),d=Vw(),o=Or(_=>_.rootProps.className);A.useEffect(()=>{if(e==null)return W_;var _=(P,S,M)=>{if(t!==M&&e===P){if(n==="index"){var O;if(d&&S!==null&&S!==void 0&&(O=S.payload)!==null&&O!==void 0&&O.coordinate&&S.payload.sourceViewBox){var z=S.payload.coordinate,{x:F,y:B}=z,D=ple(z,cle),{x:H,y:Q,width:te,height:ie}=S.payload.sourceViewBox,ae=Yg(Yg({},D),{},{x:d.x+(te?(F-H)/te:0)*d.width,y:d.y+(ie?(B-Q)/ie:0)*d.height});r(Yg(Yg({},S),{},{payload:Yg(Yg({},S.payload),{},{coordinate:ae})}))}else r(S);return}if(u!=null){var he;if(typeof n=="function"){var re={activeTooltipIndex:S.payload.index==null?void 0:Number(S.payload.index),isTooltipActive:S.payload.active,activeIndex:S.payload.index==null?void 0:Number(S.payload.index),activeLabel:S.payload.label,activeDataKey:S.payload.dataKey,activeCoordinate:S.payload.coordinate},be=n(u,re);he=u[be]}else n==="value"&&(he=u.find(gt=>String(gt.value)===S.payload.label));var{coordinate:xe}=S.payload;if(he==null||S.payload.active===!1||xe==null||d==null){r(IE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$e,y:Ee}=xe,Ne=Math.min($e,d.x+d.width),Xe=Math.min(Ee,d.y+d.height),ut={x:h==="horizontal"?he.coordinate:Ne,y:h==="horizontal"?Xe:he.coordinate},pt=IE({active:S.payload.active,coordinate:ut,dataKey:S.payload.dataKey,index:String(he.index),label:S.payload.label,sourceViewBox:S.payload.sourceViewBox,graphicalItemId:S.payload.graphicalItemId});r(pt)}}};return P_.on(DE,_),()=>{P_.off(DE,_)}},[o,r,t,e,n,u,h,d])}function yle(){var e=Or(bT),t=Or(wT),r=Ki();A.useEffect(()=>{if(e==null)return W_;var n=(u,h,d)=>{t!==d&&e===u&&r(lle(h))};return P_.on(NR,n),()=>{P_.off(NR,n)}},[r,t,e])}function vle(){var e=Ki();A.useEffect(()=>{e(ale())},[e]),gle(),yle()}function _le(e,t,r,n,u,h){var d=Or(z=>Cse(z,e,t)),o=Or(wT),_=Or(bT),P=Or(w5),S=Or(ole),M=S==null?void 0:S.active,O=Vw();A.useEffect(()=>{if(!M&&_!=null&&o!=null){var z=IE({active:h,coordinate:r,dataKey:d,index:u,label:typeof n=="number"?String(n):n,sourceViewBox:O,graphicalItemId:void 0});P_.emit(DE,_,z,o)}},[M,r,d,u,n,o,_,P,h,O])}function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function $R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){xle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xle(e,t,r){return(t=ble(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ble(e){var t=wle(e,"string");return typeof t=="symbol"?t:t+""}function wle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sle(e){return e.dataKey}function Ple(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(ste,t)}var UR=[],Ele={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function $4(e){var t,r,n=Ao(e,Ele),{active:u,allowEscapeViewBox:h,animationDuration:d,animationEasing:o,content:_,filterNull:P,isAnimationActive:S,offset:M,payloadUniqBy:O,position:z,reverseDirection:F,useTranslate3d:B,wrapperStyle:D,cursor:H,shared:Q,trigger:te,defaultIndex:ie,portal:ae,axisId:he}=n,re=Ki(),be=typeof ie=="number"?String(ie):ie;A.useEffect(()=>{re(woe({shared:Q,trigger:te,axisId:he,active:u,defaultIndex:be}))},[re,Q,te,he,u,be]);var xe=Vw(),$e=mB(),Ee=goe(Q),{activeIndex:Ne,isActive:Xe}=(t=Or(Ft=>kse(Ft,Ee,te,be)))!==null&&t!==void 0?t:{},ut=Or(Ft=>Mse(Ft,Ee,te,be)),pt=Or(Ft=>j4(Ft,Ee,te,be)),gt=Or(Ft=>Tse(Ft,Ee,te,be)),wt=ut,je=Jse(),Qe=(r=u??Xe)!==null&&r!==void 0?r:!1,[yt,Oe]=ZF([wt,Qe]),et=Ee==="axis"?pt:void 0;_le(Ee,te,gt,et,Ne,Qe);var Mt=ae??je;if(Mt==null||xe==null||Ee==null)return null;var Dt=wt??UR;Qe||(Dt=UR),P&&Dt.length&&(Dt=qF(Dt.filter(Ft=>Ft.value!=null&&(Ft.hide!==!0||n.includeHidden)),O,Sle));var Ke=Dt.length>0,tr=A.createElement(pte,{allowEscapeViewBox:h,animationDuration:d,animationEasing:o,isAnimationActive:S,active:Qe,coordinate:gt,hasPayload:Ke,offset:M,position:z,reverseDirection:F,useTranslate3d:B,viewBox:xe,wrapperStyle:D,lastBoundingBox:yt,innerRef:Oe,hasPortalFromProps:!!ae},Ple(_,$R($R({},n),{},{payload:Dt,label:et,active:Qe,activeIndex:Ne,coordinate:gt,accessibilityLayer:$e})));return A.createElement(A.Fragment,null,Cc.createPortal(tr,Mt),Qe&&A.createElement(Qse,{cursor:H,tooltipEventType:Ee,coordinate:gt,payload:Dt,index:Ne}))}var U4=e=>null;U4.displayName="Cell";function Cle(e,t,r){return(t=Tle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tle(e){var t=Mle(e,"string");return typeof t=="symbol"?t:t+""}function Mle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kle{constructor(t){Cle(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ale(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){Ile(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ile(e,t,r){return(t=Ole(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ole(e){var t=Lle(e,"string");return typeof t=="symbol"?t:t+""}function Lle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dle={cacheSize:2e3,enableCache:!0},q4=Ale({},Dle),GR=new kle(q4.cacheSize),Rle={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WR="recharts_measurement_span";function jle(e,t){var r=t.fontSize||"",n=t.fontFamily||"",u=t.fontWeight||"",h=t.fontStyle||"",d=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(u,"|").concat(h,"|").concat(d,"|").concat(o)}var HR=(e,t)=>{try{var r=document.getElementById(WR);r||(r=document.createElement("span"),r.setAttribute("id",WR),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Rle,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},i_=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Gy.isSsr)return{width:0,height:0};if(!q4.enableCache)return HR(t,r);var n=jle(t,r),u=GR.get(n);if(u)return u;var h=HR(t,r);return GR.set(n,h),h},ZR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zle=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nle=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,G4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Fle=Object.keys(G4),iy="NaN";function Ble(e,t){return e*G4[t]}class Ks{static parse(t){var r,[,n,u]=(r=Nle.exec(t))!==null&&r!==void 0?r:[];return new Ks(parseFloat(n),u??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,_u(t)&&(this.unit=""),r!==""&&!zle.test(r)&&(this.num=NaN,this.unit=""),Fle.includes(r)&&(this.num=Ble(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ks(NaN,""):new Ks(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _u(this.num)}}function W4(e){if(e.includes(iy))return iy;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,u,h]=(r=ZR.exec(t))!==null&&r!==void 0?r:[],d=Ks.parse(n??""),o=Ks.parse(h??""),_=u==="*"?d.multiply(o):d.divide(o);if(_.isNaN())return iy;t=t.replace(ZR,_.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,[,S,M,O]=(P=KR.exec(t))!==null&&P!==void 0?P:[],z=Ks.parse(S??""),F=Ks.parse(O??""),B=M==="+"?z.add(F):z.subtract(F);if(B.isNaN())return iy;t=t.replace(KR,B.toString())}return t}var XR=/\(([^()]*)\)/;function Vle(e){for(var t=e,r;(r=XR.exec(t))!=null;){var[,n]=r;t=t.replace(XR,W4(n))}return t}function $le(e){var t=e.replace(/\s+/g,"");return t=Vle(t),t=W4(t),t}function Ule(e){try{return $le(e)}catch{return iy}}function YP(e){var t=Ule(e.slice(5,-1));return t===iy?"":t}var qle=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Gle=["dx","dy","angle","className","breakAll"];function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RE.apply(null,arguments)}function YR(e,t){if(e==null)return{};var r,n,u=Wle(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Wle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var H4=/[ \f\n\r\t\v\u2028\u2029]+/,Z4=e=>{var{children:t,breakAll:r,style:n}=e;try{var u=[];Zi(t)||(r?u=t.toString().split(""):u=t.toString().split(H4));var h=u.map(o=>({word:o,width:i_(o,n).width})),d=r?0:i_("",n).width;return{wordsWithComputedWidth:h,spaceWidth:d}}catch{return null}};function Hle(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var K4=(e,t,r,n)=>e.reduce((u,h)=>{var{word:d,width:o}=h,_=u[u.length-1];if(_&&o!=null&&(t==null||n||_.width+o+r<Number(t)))_.words.push(d),_.width+=o+r;else{var P={words:[d],width:o};u.push(P)}return u},[]),X4=e=>e.reduce((t,r)=>t.width>r.width?t:r),Zle="",QR=(e,t,r,n,u,h,d,o)=>{var _=e.slice(0,t),P=Z4({breakAll:r,style:n,children:_+Zle});if(!P)return[!1,[]];var S=K4(P.wordsWithComputedWidth,h,d,o),M=S.length>u||X4(S).width>Number(h);return[M,S]},Kle=(e,t,r,n,u)=>{var{maxLines:h,children:d,style:o,breakAll:_}=e,P=_r(h),S=String(d),M=K4(t,n,r,u);if(!P||u)return M;var O=M.length>h||X4(M).width>Number(n);if(!O)return M;for(var z=0,F=S.length-1,B=0,D;z<=F&&B<=S.length-1;){var H=Math.floor((z+F)/2),Q=H-1,[te,ie]=QR(S,Q,_,o,h,n,r,u),[ae]=QR(S,H,_,o,h,n,r,u);if(!te&&!ae&&(z=H+1),te&&ae&&(F=H-1),!te&&ae){D=ie;break}B++}return D||M},JR=e=>{var t=Zi(e)?[]:e.toString().split(H4);return[{words:t,width:void 0}]},Xle=e=>{var{width:t,scaleToFit:r,children:n,style:u,breakAll:h,maxLines:d}=e;if((t||r)&&!Gy.isSsr){var o,_,P=Z4({breakAll:h,children:n,style:u});if(P){var{wordsWithComputedWidth:S,spaceWidth:M}=P;o=S,_=M}else return JR(n);return Kle({breakAll:h,children:n,maxLines:d,style:u},o,_,t,!!r)}return JR(n)},Y4="#808080",Yle={angle:0,breakAll:!1,capHeight:"0.71em",fill:Y4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},GT=A.forwardRef((e,t)=>{var r=Ao(e,Yle),{x:n,y:u,lineHeight:h,capHeight:d,fill:o,scaleToFit:_,textAnchor:P,verticalAnchor:S}=r,M=YR(r,qle),O=A.useMemo(()=>Xle({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:_,style:M.style,width:M.width}),[M.breakAll,M.children,M.maxLines,_,M.style,M.width]),{dx:z,dy:F,angle:B,className:D,breakAll:H}=M,Q=YR(M,Gle);if(!xh(n)||!xh(u)||O.length===0)return null;var te=Number(n)+(_r(z)?z:0),ie=Number(u)+(_r(F)?F:0);if(!Ai(te)||!Ai(ie))return null;var ae;switch(S){case"start":ae=YP("calc(".concat(d,")"));break;case"middle":ae=YP("calc(".concat((O.length-1)/2," * -").concat(h," + (").concat(d," / 2))"));break;default:ae=YP("calc(".concat(O.length-1," * -").concat(h,")"));break}var he=[];if(_){var re=O[0].width,{width:be}=M;he.push("scale(".concat(_r(be)&&_r(re)?be/re:1,")"))}return B&&he.push("rotate(".concat(B,", ").concat(te,", ").concat(ie,")")),he.length&&(Q.transform=he.join(" ")),A.createElement("text",RE({},Ps(Q),{ref:t,x:te,y:ie,className:ti("recharts-text",D),textAnchor:P,fill:o.includes("url")?Y4:o}),O.map((xe,$e)=>{var Ee=xe.words.join(H?"":" ");return A.createElement("tspan",{x:te,dy:$e===0?ae:h,key:"".concat(Ee,"-").concat($e)},Ee)}))});GT.displayName="Text";var Qle=["labelRef"];function Jle(e,t){if(e==null)return{};var r,n,u=eue(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function eue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ej(Object(r),!0).forEach(function(n){tue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tue(e,t,r){return(t=rue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rue(e){var t=nue(e,"string");return typeof t=="symbol"?t:t+""}function nue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wd.apply(null,arguments)}var Q4=A.createContext(null),iue=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:u,width:h,height:d,children:o}=e,_=A.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:u,width:h,height:d}),[t,r,n,u,h,d]);return A.createElement(Q4.Provider,{value:_},o)},J4=()=>{var e=A.useContext(Q4),t=Vw();return e||aB(t)},aue=A.createContext(null),oue=()=>{var e=A.useContext(aue),t=Or(T5);return e||t},sue=e=>{var{value:t,formatter:r}=e,n=Zi(e.children)?t:e.children;return typeof r=="function"?r(n):n},WT=e=>e!=null&&typeof e=="function",lue=(e,t)=>{var r=Ys(t-e),n=Math.min(Math.abs(t-e),360);return r*n},uue=(e,t,r,n,u)=>{var{offset:h,className:d}=e,{cx:o,cy:_,innerRadius:P,outerRadius:S,startAngle:M,endAngle:O,clockWise:z}=u,F=(P+S)/2,B=lue(M,O),D=B>=0?1:-1,H,Q;switch(t){case"insideStart":H=M+D*h,Q=z;break;case"insideEnd":H=O-D*h,Q=!z;break;case"end":H=O+D*h,Q=z;break;default:throw new Error("Unsupported position ".concat(t))}Q=B<=0?Q:!Q;var te=ko(o,_,F,H),ie=ko(o,_,F,H+(Q?1:-1)*359),ae="M".concat(te.x,",").concat(te.y,`
    A`).concat(F,",").concat(F,",0,1,").concat(Q?0:1,`,
    `).concat(ie.x,",").concat(ie.y),he=Zi(e.id)?f_("recharts-radial-line-"):e.id;return A.createElement("text",wd({},n,{dominantBaseline:"central",className:ti("recharts-radial-bar-label",d)}),A.createElement("defs",null,A.createElement("path",{id:he,d:ae})),A.createElement("textPath",{xlinkHref:"#".concat(he)},r))},cue=(e,t,r)=>{var{cx:n,cy:u,innerRadius:h,outerRadius:d,startAngle:o,endAngle:_}=e,P=(o+_)/2;if(r==="outside"){var{x:S,y:M}=ko(n,u,d+t,P);return{x:S,y:M,textAnchor:S>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:u,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:u,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:u,textAnchor:"middle",verticalAnchor:"end"};var O=(h+d)/2,{x:z,y:F}=ko(n,u,O,P);return{x:z,y:F,textAnchor:"middle",verticalAnchor:"middle"}},jE=e=>"cx"in e&&_r(e.cx),hue=(e,t)=>{var{parentViewBox:r,offset:n,position:u}=e,h;r!=null&&!jE(r)&&(h=r);var{x:d,y:o,upperWidth:_,lowerWidth:P,height:S}=t,M=d,O=d+(_-P)/2,z=(M+O)/2,F=(_+P)/2,B=M+_/2,D=S>=0?1:-1,H=D*n,Q=D>0?"end":"start",te=D>0?"start":"end",ie=_>=0?1:-1,ae=ie*n,he=ie>0?"end":"start",re=ie>0?"start":"end";if(u==="top"){var be={x:M+_/2,y:o-H,textAnchor:"middle",verticalAnchor:Q};return ya(ya({},be),h?{height:Math.max(o-h.y,0),width:_}:{})}if(u==="bottom"){var xe={x:O+P/2,y:o+S+H,textAnchor:"middle",verticalAnchor:te};return ya(ya({},xe),h?{height:Math.max(h.y+h.height-(o+S),0),width:P}:{})}if(u==="left"){var $e={x:z-ae,y:o+S/2,textAnchor:he,verticalAnchor:"middle"};return ya(ya({},$e),h?{width:Math.max($e.x-h.x,0),height:S}:{})}if(u==="right"){var Ee={x:z+F+ae,y:o+S/2,textAnchor:re,verticalAnchor:"middle"};return ya(ya({},Ee),h?{width:Math.max(h.x+h.width-Ee.x,0),height:S}:{})}var Ne=h?{width:F,height:S}:{};return u==="insideLeft"?ya({x:z+ae,y:o+S/2,textAnchor:re,verticalAnchor:"middle"},Ne):u==="insideRight"?ya({x:z+F-ae,y:o+S/2,textAnchor:he,verticalAnchor:"middle"},Ne):u==="insideTop"?ya({x:M+_/2,y:o+H,textAnchor:"middle",verticalAnchor:te},Ne):u==="insideBottom"?ya({x:O+P/2,y:o+S-H,textAnchor:"middle",verticalAnchor:Q},Ne):u==="insideTopLeft"?ya({x:M+ae,y:o+H,textAnchor:re,verticalAnchor:te},Ne):u==="insideTopRight"?ya({x:M+_-ae,y:o+H,textAnchor:he,verticalAnchor:te},Ne):u==="insideBottomLeft"?ya({x:O+ae,y:o+S-H,textAnchor:re,verticalAnchor:Q},Ne):u==="insideBottomRight"?ya({x:O+P-ae,y:o+S-H,textAnchor:he,verticalAnchor:Q},Ne):u&&typeof u=="object"&&(_r(u.x)||Od(u.x))&&(_r(u.y)||Od(u.y))?ya({x:d+Pc(u.x,F),y:o+Pc(u.y,S),textAnchor:"end",verticalAnchor:"end"},Ne):ya({x:B,y:o+S/2,textAnchor:"middle",verticalAnchor:"middle"},Ne)},due={angle:0,offset:5,zIndex:xo.label,position:"middle",textBreakAll:!1};function Jf(e){var t=Ao(e,due),{viewBox:r,position:n,value:u,children:h,content:d,className:o="",textBreakAll:_,labelRef:P}=t,S=oue(),M=J4(),O=n==="center"?M:S??M,z,F,B;if(r==null?z=O:jE(r)?z=r:z=aB(r),!z||Zi(u)&&Zi(h)&&!A.isValidElement(d)&&typeof d!="function")return null;var D=ya(ya({},t),{},{viewBox:z});if(A.isValidElement(d)){var{labelRef:H}=D,Q=Jle(D,Qle);return A.cloneElement(d,Q)}if(typeof d=="function"){if(F=A.createElement(d,D),A.isValidElement(F))return F}else F=sue(t);var te=Ps(t);if(jE(z)){if(n==="insideStart"||n==="insideEnd"||n==="end")return uue(t,n,F,te,z);B=cue(z,t.offset,t.position)}else B=hue(t,z);return A.createElement(Su,{zIndex:t.zIndex},A.createElement(GT,wd({ref:P,className:ti("recharts-label",o)},te,B,{textAnchor:Hle(te.textAnchor)?te.textAnchor:B.textAnchor,breakAll:_}),F))}Jf.displayName="Label";var fue=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?A.createElement(Jf,wd({key:"label-implicit"},n)):xh(e)?A.createElement(Jf,wd({key:"label-implicit",value:e},n)):A.isValidElement(e)?e.type===Jf?A.cloneElement(e,ya({key:"label-implicit"},n)):A.createElement(Jf,wd({key:"label-implicit",content:e},n)):WT(e)?A.createElement(Jf,wd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?A.createElement(Jf,wd({},e,{key:"label-implicit"},n)):null};function pue(e){var{label:t,labelRef:r}=e,n=J4();return fue(t,n,r)||null}var QP={},JP={},tj;function mue(){return tj||(tj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(JP)),JP}var e2={},rj;function gue(){return rj||(rj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(e2)),e2}var nj;function yue(){return nj||(nj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mue(),r=gue(),n=VC();function u(h){if(n.isArrayLike(h))return t.last(r.toArray(h))}e.last=u})(QP)),QP}var t2,ij;function vue(){return ij||(ij=1,t2=yue().last),t2}var _ue=vue();const xue=Sh(_ue);var bue=["valueAccessor"],wue=["dataKey","clockWise","id","textBreakAll","zIndex"];function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wb.apply(null,arguments)}function aj(e,t){if(e==null)return{};var r,n,u=Sue(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Sue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Pue=e=>Array.isArray(e.value)?xue(e.value):e.value,e6=A.createContext(void 0),t6=e6.Provider,r6=A.createContext(void 0);r6.Provider;function Eue(){return A.useContext(e6)}function Cue(){return A.useContext(r6)}function Bx(e){var{valueAccessor:t=Pue}=e,r=aj(e,bue),{dataKey:n,clockWise:u,id:h,textBreakAll:d,zIndex:o}=r,_=aj(r,wue),P=Eue(),S=Cue(),M=P||S;return!M||!M.length?null:A.createElement(Su,{zIndex:o??xo.label},A.createElement(Es,{className:"recharts-label-list"},M.map((O,z)=>{var F,B=Zi(n)?t(O,z):Ha(O&&O.payload,n),D=Zi(h)?{}:{id:"".concat(h,"-").concat(z)};return A.createElement(Jf,Wb({key:"label-".concat(z)},Ps(O),_,D,{fill:(F=r.fill)!==null&&F!==void 0?F:O.fill,parentViewBox:O.parentViewBox,value:B,textBreakAll:d,viewBox:O.viewBox,index:z,zIndex:0}))})))}Bx.displayName="LabelList";function n6(e){var{label:t}=e;return t?t===!0?A.createElement(Bx,{key:"labelList-implicit"}):A.isValidElement(t)||WT(t)?A.createElement(Bx,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement(Bx,Wb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zE.apply(null,arguments)}var i6=e=>{var{cx:t,cy:r,r:n,className:u}=e,h=ti("recharts-dot",u);return _r(t)&&_r(r)&&_r(n)?A.createElement("circle",zE({},vu(e),BC(e),{className:h,cx:t,cy:r,r:n})):null},Tue={radiusAxis:{},angleAxis:{}},a6=Yo({name:"polarAxis",initialState:Tue,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ume,removeRadiusAxis:cme,addAngleAxis:hme,removeAngleAxis:dme}=a6.actions,Mue=a6.reducer,r2={exports:{}},fi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj;function kue(){if(oj)return fi;oj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.view_transition"),z=Symbol.for("react.client.reference");function F(B){if(typeof B=="object"&&B!==null){var D=B.$$typeof;switch(D){case e:switch(B=B.type,B){case r:case u:case n:case _:case P:case O:return B;default:switch(B=B&&B.$$typeof,B){case d:case o:case M:case S:return B;case h:return B;default:return D}}case t:return D}}}return fi.ContextConsumer=h,fi.ContextProvider=d,fi.Element=e,fi.ForwardRef=o,fi.Fragment=r,fi.Lazy=M,fi.Memo=S,fi.Portal=t,fi.Profiler=u,fi.StrictMode=n,fi.Suspense=_,fi.SuspenseList=P,fi.isContextConsumer=function(B){return F(B)===h},fi.isContextProvider=function(B){return F(B)===d},fi.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===e},fi.isForwardRef=function(B){return F(B)===o},fi.isFragment=function(B){return F(B)===r},fi.isLazy=function(B){return F(B)===M},fi.isMemo=function(B){return F(B)===S},fi.isPortal=function(B){return F(B)===t},fi.isProfiler=function(B){return F(B)===u},fi.isStrictMode=function(B){return F(B)===n},fi.isSuspense=function(B){return F(B)===_},fi.isSuspenseList=function(B){return F(B)===P},fi.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===r||B===u||B===n||B===_||B===P||typeof B=="object"&&B!==null&&(B.$$typeof===M||B.$$typeof===S||B.$$typeof===d||B.$$typeof===h||B.$$typeof===o||B.$$typeof===z||B.getModuleId!==void 0)},fi.typeOf=F,fi}var sj;function Aue(){return sj||(sj=1,r2.exports=kue()),r2.exports}var Iue=Aue(),lj=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uj=null,n2=null,o6=e=>{if(e===uj&&Array.isArray(n2))return n2;var t=[];return A.Children.forEach(e,r=>{Zi(r)||(Iue.isFragment(r)?t=t.concat(o6(r.props.children)):t.push(r))}),n2=t,uj=e,t};function Oue(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(u=>lj(u)):n=[lj(t)],o6(e).forEach(u=>{var h=Ty(u,"type.displayName")||Ty(u,"type.name");h&&n.indexOf(h)!==-1&&r.push(u)}),r}var s6=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,i2={},cj;function Lue(){return cj||(cj=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var u;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const h=r[Symbol.toStringTag];return h==null||!((u=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&u.writable)?!1:r.toString()===`[object ${h}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(i2)),i2}var a2,hj;function Due(){return hj||(hj=1,a2=Lue().isPlainObject),a2}var Rue=Due();const jue=Sh(Rue);function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(r),!0).forEach(function(n){zue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zue(e,t,r){return(t=Nue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nue(e){var t=Fue(e,"string");return typeof t=="symbol"?t:t+""}function Fue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hb.apply(null,arguments)}var pj=(e,t,r,n,u)=>{var h=r-n,d;return d="M ".concat(e,",").concat(t),d+="L ".concat(e+r,",").concat(t),d+="L ".concat(e+r-h/2,",").concat(t+u),d+="L ".concat(e+r-h/2-n,",").concat(t+u),d+="L ".concat(e,",").concat(t," Z"),d},Bue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vue=e=>{var t=Ao(e,Bue),{x:r,y:n,upperWidth:u,lowerWidth:h,height:d,className:o}=t,{animationEasing:_,animationDuration:P,animationBegin:S,isUpdateAnimationActive:M}=t,O=A.useRef(null),[z,F]=A.useState(-1),B=A.useRef(u),D=A.useRef(h),H=A.useRef(d),Q=A.useRef(r),te=A.useRef(n),ie=Hw(e,"trapezoid-");if(A.useEffect(()=>{if(O.current&&O.current.getTotalLength)try{var ut=O.current.getTotalLength();ut&&F(ut)}catch{}},[]),r!==+r||n!==+n||u!==+u||h!==+h||d!==+d||u===0&&h===0||d===0)return null;var ae=ti("recharts-trapezoid",o);if(!M)return A.createElement("g",null,A.createElement("path",Hb({},Ps(t),{className:ae,d:pj(r,n,u,h,d)})));var he=B.current,re=D.current,be=H.current,xe=Q.current,$e=te.current,Ee="0px ".concat(z===-1?1:z,"px"),Ne="".concat(z,"px 0px"),Xe=gB(["strokeDasharray"],P,_);return A.createElement(Ww,{animationId:ie,key:ie,canBegin:z>0,duration:P,easing:_,isActive:M,begin:S},ut=>{var pt=Hi(he,u,ut),gt=Hi(re,h,ut),wt=Hi(be,d,ut),je=Hi(xe,r,ut),Qe=Hi($e,n,ut);O.current&&(B.current=pt,D.current=gt,H.current=wt,Q.current=je,te.current=Qe);var yt=ut>0?{transition:Xe,strokeDasharray:Ne}:{strokeDasharray:Ee};return A.createElement("path",Hb({},Ps(t),{className:ae,d:pj(je,Qe,pt,gt,wt),ref:O,style:fj(fj({},yt),t.style)}))})},$ue=["option","shapeType","propTransformer","activeClassName"];function Uue(e,t){if(e==null)return{};var r,n,u=que(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function que(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Zb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){Gue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gue(e,t,r){return(t=Wue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wue(e){var t=Hue(e,"string");return typeof t=="symbol"?t:t+""}function Hue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zue(e,t){return Zb(Zb({},t),e)}function Kue(e,t){return e==="symbols"}function gj(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return A.createElement(xB,r);case"trapezoid":return A.createElement(Vue,r);case"sector":return A.createElement(SB,r);case"symbols":if(Kue(t))return A.createElement(FC,r);break;case"curve":return A.createElement(n_,r);default:return null}}function Xue(e){return A.isValidElement(e)?e.props:e}function Yue(e){var{option:t,shapeType:r,propTransformer:n=Zue,activeClassName:u="recharts-active-shape"}=e,h=Uue(e,$ue),d;if(A.isValidElement(t))d=A.cloneElement(t,Zb(Zb({},h),Xue(t)));else if(typeof t=="function")d=t(h,h.index);else if(jue(t)&&typeof t!="boolean"){var o=n(t,h);d=A.createElement(gj,{shapeType:r,elementProps:o})}else{var _=h;d=A.createElement(gj,{shapeType:r,elementProps:_})}return h.isActive?A.createElement(Es,{className:u},d):d}var l6=(e,t,r)=>{var n=Ki();return(u,h)=>d=>{e==null||e(u,h,d),n(g4({activeIndex:String(h),activeDataKey:t,activeCoordinate:u.tooltipPosition,activeGraphicalItemId:r}))}},u6=e=>{var t=Ki();return(r,n)=>u=>{e==null||e(r,n,u),t(Soe())}},c6=(e,t,r)=>{var n=Ki();return(u,h)=>d=>{e==null||e(u,h,d),n(Poe({activeIndex:String(h),activeDataKey:t,activeCoordinate:u.tooltipPosition,activeGraphicalItemId:r}))}};function h6(e){var{tooltipEntrySettings:t}=e,r=Ki(),n=Qo(),u=A.useRef(null);return A.useLayoutEffect(()=>{n||(u.current===null?r(_oe(t)):u.current!==t&&r(xoe({prev:u.current,next:t})),u.current=t)},[t,r,n]),A.useLayoutEffect(()=>()=>{u.current&&(r(boe(u.current)),u.current=null)},[r]),null}function d6(e){var{legendPayload:t}=e,r=Ki(),n=Qo(),u=A.useRef(null);return A.useLayoutEffect(()=>{n||(u.current===null?r(Bee(t)):u.current!==t&&r(Vee({prev:u.current,next:t})),u.current=t)},[r,n,t]),A.useLayoutEffect(()=>()=>{u.current&&(r($ee(u.current)),u.current=null)},[r]),null}var o2,Que=()=>{var[e]=A.useState(()=>f_("uid-"));return e},Jue=(o2=GE.useId)!==null&&o2!==void 0?o2:Que;function f6(e,t){var r=Jue();return t||(e?"".concat(e,"-").concat(r):r)}var ece=A.createContext(void 0),p6=e=>{var{id:t,type:r,children:n}=e,u=f6("recharts-".concat(r),t);return A.createElement(ece.Provider,{value:u},n(u))},tce={cartesianItems:[],polarItems:[]},m6=Yo({name:"graphicalItems",initialState:tce,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Bi()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,u=bc(e).cartesianItems.indexOf(r);u>-1&&(e.cartesianItems[u]=n)},prepare:Bi()},removeCartesianGraphicalItem:{reducer(e,t){var r=bc(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Bi()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Bi()},removePolarGraphicalItem:{reducer(e,t){var r=bc(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Bi()}}}),{addCartesianGraphicalItem:rce,replaceCartesianGraphicalItem:nce,removeCartesianGraphicalItem:ice,addPolarGraphicalItem:fme,removePolarGraphicalItem:pme}=m6.actions,ace=m6.reducer,oce=e=>{var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(rce(e)):r.current!==e&&t(nce({prev:r.current,next:e})),r.current=e},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(t(ice(r.current)),r.current=null)},[t]),null},g6=A.memo(oce),sce=["points"];function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function s2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yj(Object(r),!0).forEach(function(n){lce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lce(e,t,r){return(t=uce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uce(e){var t=cce(e,"string");return typeof t=="symbol"?t:t+""}function cce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kb.apply(null,arguments)}function hce(e,t){if(e==null)return{};var r,n,u=dce(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function dce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fce(e){var{option:t,dotProps:r,className:n}=e;if(A.isValidElement(t))return A.cloneElement(t,r);if(typeof t=="function")return t(r);var u=ti(n,typeof t!="boolean"?t.className:""),h=r??{},{points:d}=h,o=hce(h,sce);return A.createElement(i6,Kb({},o,{className:u}))}function pce(e,t){return e==null?!1:t?!0:e.length===1}function mce(e){var{points:t,dot:r,className:n,dotClassName:u,dataKey:h,baseProps:d,needClip:o,clipPathId:_,zIndex:P=xo.scatter}=e;if(!pce(t,r))return null;var S=s6(r),M=EY(r),O=t.map((F,B)=>{var D,H,Q=s2(s2(s2({r:3},d),M),{},{index:B,cx:(D=F.x)!==null&&D!==void 0?D:void 0,cy:(H=F.y)!==null&&H!==void 0?H:void 0,dataKey:h,value:F.value,payload:F.payload,points:t});return A.createElement(fce,{key:"dot-".concat(B),option:r,dotProps:Q,className:u})}),z={};return o&&_!=null&&(z.clipPath="url(#clipPath-".concat(S?"":"dots-").concat(_,")")),A.createElement(Su,{zIndex:P},A.createElement(Es,Kb({className:n},z),O))}function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){gce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gce(e,t,r){return(t=yce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yce(e){var t=vce(e,"string");return typeof t=="symbol"?t:t+""}function vce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ce={xAxis:{},yAxis:{},zAxis:{}},y6=Yo({name:"cartesianAxis",initialState:_ce,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Bi()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Bi()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Bi()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Bi()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Bi()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Bi()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Bi()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Bi()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Bi()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,u=e.yAxis[r];if(u){var h=u.widthHistory||[];if(h.length===3&&h[0]===h[2]&&n===h[1]&&n!==u.width&&Math.abs(n-h[0])<=1)return;var d=[...h,n].slice(-3);e.yAxis[r]=_j(_j({},e.yAxis[r]),{},{width:n,widthHistory:d})}}}}),{addXAxis:xce,replaceXAxis:bce,removeXAxis:wce,addYAxis:Sce,replaceYAxis:Pce,removeYAxis:Ece,addZAxis:mme,replaceZAxis:gme,removeZAxis:yme,updateYAxisWidth:Cce}=y6.actions,Tce=y6.reducer,Mce=Tt([bo],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),kce=Tt([Mce,Fd,Bd],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),HT=()=>Or(kce),Ace=()=>Or(fse);function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function l2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){Ice(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ice(e,t,r){return(t=Oce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oce(e){var t=Lce(e,"string");return typeof t=="symbol"?t:t+""}function Lce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dce=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:u,dataKey:h,clipPath:d}=e;if(u===!1||t.x==null||t.y==null)return null;var o={index:r,dataKey:h,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},_=l2(l2(l2({},o),q_(u)),BC(u)),P;return A.isValidElement(u)?P=A.cloneElement(u,_):typeof u=="function"?P=u(_):P=A.createElement(i6,_),A.createElement(Es,{className:"recharts-active-dot",clipPath:d},P)};function bj(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:u,clipPath:h,zIndex:d=xo.activeDot}=e,o=Or(eg),_=Ace();if(t==null||_==null)return null;var P=t.find(S=>_.includes(S.payload));return Zi(P)?null:A.createElement(Su,{zIndex:d},A.createElement(Dce,{point:P,childIndex:Number(o),mainColor:r,dataKey:u,activeDot:n,clipPath:h}))}var Rce="Invariant failed";function jce(e,t){throw new Error(Rce)}var zce=["x","y"];function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NE.apply(null,arguments)}function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Zv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){Nce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nce(e,t,r){return(t=Fce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fce(e){var t=Bce(e,"string");return typeof t=="symbol"?t:t+""}function Bce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vce(e,t){if(e==null)return{};var r,n,u=$ce(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function $ce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uce(e,t){var{x:r,y:n}=e,u=Vce(e,zce),h="".concat(r),d=parseInt(h,10),o="".concat(n),_=parseInt(o,10),P="".concat(t.height||u.height),S=parseInt(P,10),M="".concat(t.width||u.width),O=parseInt(M,10);return Zv(Zv(Zv(Zv(Zv({},t),u),d?{x:d}:{}),_?{y:_}:{}),{},{height:S,width:O,name:t.name,radius:t.radius})}function Xb(e){return A.createElement(Yue,NE({shapeType:"rectangle",propTransformer:Uce,activeClassName:"recharts-active-bar"},e))}var qce=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,u)=>{if(_r(t))return t;var h=_r(n)||Zi(n);return h?t(n,u):(h||jce(),r)}},Gce={},v6=Yo({name:"errorBars",initialState:Gce,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:u}=t.payload;e[r]&&(e[r]=e[r].map(h=>h.dataKey===n.dataKey&&h.direction===n.direction?u:h))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(u=>u.dataKey!==n.dataKey||u.direction!==n.direction))}}}),{addErrorBar:vme,replaceErrorBar:_me,removeErrorBar:xme}=v6.actions,Wce=v6.reducer,Hce=["children"];function Zce(e,t){if(e==null)return{};var r,n,u=Kce(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Kce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xce={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Yce=A.createContext(Xce);function Qce(e){var{children:t}=e,r=Zce(e,Hce);return A.createElement(Yce.Provider,{value:r},t)}function ZT(e,t){var r,n,u=Or(P=>$d(P,e)),h=Or(P=>Ud(P,t)),d=(r=u==null?void 0:u.allowDataOverflow)!==null&&r!==void 0?r:go.allowDataOverflow,o=(n=h==null?void 0:h.allowDataOverflow)!==null&&n!==void 0?n:yo.allowDataOverflow,_=d||o;return{needClip:_,needClipX:d,needClipY:o}}function _6(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,u=HT(),{needClipX:h,needClipY:d,needClip:o}=ZT(t,r);if(!o||!u)return null;var{x:_,y:P,width:S,height:M}=u;return A.createElement("clipPath",{id:"clipPath-".concat(n)},A.createElement("rect",{x:h?_:_-S/2,y:d?P:P-M/2,width:h?S:S*2,height:d?M:M*2}))}function Jce(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ai(e.zIndex)?e.zIndex:t}var ehe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function the(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function f1(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(ehe.has(n)){if(e[n]==null&&t[n]==null)continue;if(!UW(e[n],t[n]))return!1}else if(!the(e[n],t[n]))return!1;return!0}var rhe=["onMouseEnter","onMouseLeave","onClick"],nhe=["value","background","tooltipPosition"],ihe=["id"],ahe=["onMouseEnter","onClick","onMouseLeave"];function zd(){return zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zd.apply(null,arguments)}function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){ohe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ohe(e,t,r){return(t=she(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function she(e){var t=lhe(e,"string");return typeof t=="symbol"?t:t+""}function lhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yb(e,t){if(e==null)return{};var r,n,u=uhe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function uhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var che=e=>{var{dataKey:t,name:r,fill:n,legendType:u,hide:h}=e;return[{inactive:h,dataKey:t,type:u,color:n,value:jw(r,t),payload:e}]},hhe=A.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:u,name:h,hide:d,unit:o,tooltipType:_}=e,P={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:u,dataKey:t,nameKey:void 0,name:jw(h,t),hide:d,type:_,color:u,unit:o}};return A.createElement(h6,{tooltipEntrySettings:P})});function dhe(e){var t=Or(eg),{data:r,dataKey:n,background:u,allOtherBarProps:h}=e,{onMouseEnter:d,onMouseLeave:o,onClick:_}=h,P=Yb(h,rhe),S=l6(d,n),M=u6(o),O=c6(_,n);if(!u||r==null)return null;var z=q_(u);return A.createElement(Su,{zIndex:Jce(u,xo.barBackground)},r.map((F,B)=>{var{value:D,background:H,tooltipPosition:Q}=F,te=Yb(F,nhe);if(!H)return null;var ie=S(F,B),ae=M(F,B),he=O(F,B),re=bs(bs(bs(bs(bs({option:u,isActive:String(B)===t},te),{},{fill:"#eee"},H),z),Dw(P,F,B)),{},{onMouseEnter:ie,onMouseLeave:ae,onClick:he,dataKey:n,index:B,className:"recharts-bar-background-rectangle"});return A.createElement(Xb,zd({key:"background-bar-".concat(B)},re))}))}function fhe(e){var{showLabels:t,children:r,rects:n}=e,u=n==null?void 0:n.map(h=>{var d={x:h.x,y:h.y,width:h.width,lowerWidth:h.width,upperWidth:h.width,height:h.height};return bs(bs({},d),{},{value:h.value,payload:h.payload,parentViewBox:h.parentViewBox,viewBox:d,fill:h.fill})});return A.createElement(t6,{value:t?u:void 0},r)}function phe(e){var{shape:t,activeBar:r,baseProps:n,entry:u,index:h,dataKey:d}=e,o=Or(eg),_=Or(A4),P=r&&String(h)===o&&(_==null||d===_),S=P?r:t;return P?A.createElement(Su,{zIndex:xo.activeBar},A.createElement(Xb,zd({},n,{name:String(n.name)},u,{isActive:P,option:S,index:h,dataKey:d}))):A.createElement(Xb,zd({},n,{name:String(n.name)},u,{isActive:P,option:S,index:h,dataKey:d}))}function mhe(e){var{shape:t,baseProps:r,entry:n,index:u,dataKey:h}=e;return A.createElement(Xb,zd({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:u,dataKey:h}))}function ghe(e){var t,{data:r,props:n}=e,u=(t=vu(n))!==null&&t!==void 0?t:{},{id:h}=u,d=Yb(u,ihe),{shape:o,dataKey:_,activeBar:P}=n,{onMouseEnter:S,onClick:M,onMouseLeave:O}=n,z=Yb(n,ahe),F=l6(S,_),B=u6(O),D=c6(M,_);return r?A.createElement(A.Fragment,null,r.map((H,Q)=>A.createElement(Es,zd({key:"rectangle-".concat(H==null?void 0:H.x,"-").concat(H==null?void 0:H.y,"-").concat(H==null?void 0:H.value,"-").concat(Q),className:"recharts-bar-rectangle"},Dw(z,H,Q),{onMouseEnter:F(H,Q),onMouseLeave:B(H,Q),onClick:D(H,Q)}),P?A.createElement(phe,{shape:o,activeBar:P,baseProps:d,entry:H,index:Q,dataKey:_}):A.createElement(mhe,{shape:o,baseProps:d,entry:H,index:Q,dataKey:_})))):null}function yhe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:u,isAnimationActive:h,animationBegin:d,animationDuration:o,animationEasing:_,onAnimationEnd:P,onAnimationStart:S}=t,M=r.current,O=Hw(t,"recharts-bar-"),[z,F]=A.useState(!1),B=!z,D=A.useCallback(()=>{typeof P=="function"&&P(),F(!1)},[P]),H=A.useCallback(()=>{typeof S=="function"&&S(),F(!0)},[S]);return A.createElement(fhe,{showLabels:B,rects:n},A.createElement(Ww,{animationId:O,begin:d,duration:o,isActive:h,easing:_,onAnimationEnd:D,onAnimationStart:H,key:O},Q=>{var te=Q===1?n:n==null?void 0:n.map((ie,ae)=>{var he=M&&M[ae];if(he)return bs(bs({},ie),{},{x:Hi(he.x,ie.x,Q),y:Hi(he.y,ie.y,Q),width:Hi(he.width,ie.width,Q),height:Hi(he.height,ie.height,Q)});if(u==="horizontal"){var re=Hi(0,ie.height,Q),be=Hi(ie.stackedBarStart,ie.y,Q);return bs(bs({},ie),{},{y:be,height:re})}var xe=Hi(0,ie.width,Q),$e=Hi(ie.stackedBarStart,ie.x,Q);return bs(bs({},ie),{},{width:xe,x:$e})});return Q>0&&(r.current=te??null),te==null?null:A.createElement(Es,null,A.createElement(ghe,{props:t,data:te}))}),A.createElement(n6,{label:t.label}),t.children)}function vhe(e){var t=A.useRef(null);return A.createElement(yhe,{previousRectanglesRef:t,props:e})}var x6=0,_he=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ha(e,t)}};class xhe extends A.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:u,xAxisId:h,yAxisId:d,needClip:o,background:_,id:P}=this.props;if(t||r==null)return null;var S=ti("recharts-bar",u),M=P;return A.createElement(Es,{className:S,id:P},o&&A.createElement("defs",null,A.createElement(_6,{clipPathId:M,xAxisId:h,yAxisId:d})),A.createElement(Es,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(M,")"):void 0},A.createElement(dhe,{data:r,dataKey:n,background:_,allOtherBarProps:this.props}),A.createElement(vhe,this.props)))}}var bhe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:x6,xAxisId:0,yAxisId:0,zIndex:xo.bar};function whe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:u,minPointSize:h,activeBar:d,animationBegin:o,animationDuration:_,animationEasing:P,isAnimationActive:S}=e,{needClip:M}=ZT(t,r),O=qy(),z=Qo(),F=Oue(e.children,U4),B=Or(Q=>Xhe(Q,t,r,z,e.id,F));if(O!=="vertical"&&O!=="horizontal")return null;var D,H=B==null?void 0:B[0];return H==null||H.height==null||H.width==null?D=0:D=O==="vertical"?H.height/2:H.width/2,A.createElement(Qce,{xAxisId:t,yAxisId:r,data:B,dataPointFormatter:_he,errorBarOffset:D},A.createElement(xhe,zd({},e,{layout:O,needClip:M,data:B,xAxisId:t,yAxisId:r,hide:n,legendType:u,minPointSize:h,activeBar:d,animationBegin:o,animationDuration:_,animationEasing:P,isAnimationActive:S})))}function She(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:u,bandSize:h,xAxis:d,yAxis:o,xAxisTicks:_,yAxisTicks:P,stackedData:S,displayedData:M,offset:O,cells:z,parentViewBox:F,dataStartIndex:B}=e,D=t==="horizontal"?o:d,H=S?D.scale.domain():null,Q=VJ({numericAxis:D}),te=D.scale(Q);return M.map((ie,ae)=>{var he,re,be,xe,$e,Ee;S?he=jJ(S[ae+B],H):(he=Ha(ie,r),Array.isArray(he)||(he=[Q,he]));var Ne=qce(n,x6)(he[1],ae);if(t==="horizontal"){var Xe,[ut,pt]=[o.scale(he[0]),o.scale(he[1])];re=HL({axis:d,ticks:_,bandSize:h,offset:u.offset,entry:ie,index:ae}),be=(Xe=pt??ut)!==null&&Xe!==void 0?Xe:void 0,xe=u.size;var gt=ut-pt;if($e=_u(gt)?0:gt,Ee={x:re,y:O.top,width:xe,height:O.height},Math.abs(Ne)>0&&Math.abs($e)<Math.abs(Ne)){var wt=Ys($e||Ne)*(Math.abs(Ne)-Math.abs($e));be-=wt,$e+=wt}}else{var[je,Qe]=[d.scale(he[0]),d.scale(he[1])];if(re=je,be=HL({axis:o,ticks:P,bandSize:h,offset:u.offset,entry:ie,index:ae}),xe=Qe-je,$e=u.size,Ee={x:O.left,y:be,width:O.width,height:$e},Math.abs(Ne)>0&&Math.abs(xe)<Math.abs(Ne)){var yt=Ys(xe||Ne)*(Math.abs(Ne)-Math.abs(xe));xe+=yt}}if(re==null||be==null||xe==null||$e==null)return null;var Oe=bs(bs({},ie),{},{stackedBarStart:te,x:re,y:be,width:xe,height:$e,value:S?he:he[1],payload:ie,background:Ee,tooltipPosition:{x:re+xe/2,y:be+$e/2},parentViewBox:F},z&&z[ae]&&z[ae].props);return Oe}).filter(Boolean)}function Phe(e){var t=Ao(e,bhe),r=Qo();return A.createElement(p6,{id:t.id,type:"bar"},n=>A.createElement(A.Fragment,null,A.createElement(d6,{legendPayload:che(t)}),A.createElement(hhe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),A.createElement(g6,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:JF(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),A.createElement(Su,{zIndex:t.zIndex},A.createElement(whe,zd({},t,{id:n})))))}var Vx=A.memo(Phe,f1);Vx.displayName="Bar";function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Px(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){Ehe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ehe(e,t,r){return(t=Che(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Che(e){var t=The(e,"string");return typeof t=="symbol"?t:t+""}function The(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mhe=(e,t)=>t,khe=(e,t,r)=>r,Ahe=(e,t,r,n)=>n,Ihe=(e,t,r,n,u)=>u,l0=Tt([u1,Ihe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Ohe=Tt([l0],e=>e==null?void 0:e.maxBarSize),Lhe=(e,t,r,n,u,h)=>h,Ej=(e,t,r)=>{var n=r??e;if(!Zi(n))return Pc(n,t,0)},Dhe=Tt([Bn,u1,Mhe,khe,Ahe],(e,t,r,n,u)=>t.filter(h=>e==="horizontal"?h.xAxisId===r:h.yAxisId===n).filter(h=>h.isPanorama===u).filter(h=>h.hide===!1).filter(h=>h.type==="bar")),Rhe=(e,t,r,n)=>{var u=Bn(e);return u==="horizontal"?S_(e,"yAxis",r,n):S_(e,"xAxis",t,n)},jhe=(e,t,r)=>{var n=Bn(e);return n==="horizontal"?CR(e,"xAxis",t):CR(e,"yAxis",r)},zhe=(e,t,r)=>{var n={},u=e.filter(o1),h=e.filter(P=>P.stackId==null),d=u.reduce((P,S)=>(P[S.stackId]||(P[S.stackId]=[]),P[S.stackId].push(S),P),n),o=Object.entries(d).map(P=>{var[S,M]=P,O=M.map(F=>F.dataKey),z=Ej(t,r,M[0].barSize);return{stackId:S,dataKeys:O,barSize:z}}),_=h.map(P=>{var S=[P.dataKey].filter(O=>O!=null),M=Ej(t,r,P.barSize);return{stackId:void 0,dataKeys:S,barSize:M}});return[...o,..._]},Nhe=Tt([Dhe,hae,jhe],zhe),Fhe=(e,t,r,n,u)=>{var h,d,o=l0(e,t,r,n,u);if(o!=null){var _=Bn(e),P=_5(e),{maxBarSize:S}=o,M=Zi(S)?P:S,O,z;return _==="horizontal"?(O=bp(e,"xAxis",t,n),z=xp(e,"xAxis",t,n)):(O=bp(e,"yAxis",r,n),z=xp(e,"yAxis",r,n)),(h=(d=My(O,z,!0))!==null&&d!==void 0?d:M)!==null&&h!==void 0?h:0}},b6=(e,t,r,n)=>{var u=Bn(e),h,d;return u==="horizontal"?(h=bp(e,"xAxis",t,n),d=xp(e,"xAxis",t,n)):(h=bp(e,"yAxis",r,n),d=xp(e,"yAxis",r,n)),My(h,d)};function Bhe(e,t,r,n,u){var h=n.length;if(!(h<1)){var d=Pc(e,r,0,!0),o,_=[];if(Ai(n[0].barSize)){var P=!1,S=r/h,M=n.reduce((H,Q)=>H+(Q.barSize||0),0);M+=(h-1)*d,M>=r&&(M-=(h-1)*d,d=0),M>=r&&S>0&&(P=!0,S*=.9,M=h*S);var O=(r-M)/2>>0,z={offset:O-d,size:0};o=n.reduce((H,Q)=>{var te,ie={stackId:Q.stackId,dataKeys:Q.dataKeys,position:{offset:z.offset+z.size+d,size:P?S:(te=Q.barSize)!==null&&te!==void 0?te:0}},ae=[...H,ie];return z=ae[ae.length-1].position,ae},_)}else{var F=Pc(t,r,0,!0);r-2*F-(h-1)*d<=0&&(d=0);var B=(r-2*F-(h-1)*d)/h;B>1&&(B>>=0);var D=Ai(u)?Math.min(B,u):B;o=n.reduce((H,Q,te)=>[...H,{stackId:Q.stackId,dataKeys:Q.dataKeys,position:{offset:F+(B+d)*te+(B-D)/2,size:D}}],_)}return o}}var Vhe=(e,t,r,n,u,h,d)=>{var o=Zi(d)?t:d,_=Bhe(r,n,u!==h?u:h,e,o);return u!==h&&_!=null&&(_=_.map(P=>Px(Px({},P),{},{position:Px(Px({},P.position),{},{offset:P.position.offset-u/2})}))),_},$he=Tt([Nhe,_5,cae,x5,Fhe,b6,Ohe],Vhe),Uhe=(e,t,r,n)=>bp(e,"xAxis",t,n),qhe=(e,t,r,n)=>bp(e,"yAxis",r,n),Ghe=(e,t,r,n)=>xp(e,"xAxis",t,n),Whe=(e,t,r,n)=>xp(e,"yAxis",r,n),Hhe=Tt([$he,l0],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Zhe=(e,t)=>{var r=a1(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var u=e[n];if(u){var{stackedData:h}=u;if(h)return h.find(d=>d.key===r)}}}},Khe=Tt([Rhe,l0],Zhe),Xhe=Tt([bo,UC,Uhe,qhe,Ghe,Whe,Hhe,Bn,e1,b6,Khe,l0,Lhe],(e,t,r,n,u,h,d,o,_,P,S,M,O)=>{var{chartData:z,dataStartIndex:F,dataEndIndex:B}=_;if(!(M==null||d==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||u==null||h==null||P==null)){var{data:D}=M,H;if(D!=null&&D.length>0?H=D:H=z==null?void 0:z.slice(F,B+1),H!=null)return She({layout:o,barSettings:M,pos:d,parentViewBox:t,bandSize:P,xAxis:r,yAxis:n,xAxisTicks:u,yAxisTicks:h,stackedData:S,displayedData:H,offset:e,cells:O,dataStartIndex:F})}}),Yhe=e=>{var{chartData:t}=e,r=Ki(),n=Qo();return A.useEffect(()=>n?()=>{}:(r(FR(t)),()=>{r(FR(void 0))}),[t,r,n]),null},Cj={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},w6=Yo({name:"brush",initialState:Cj,reducers:{setBrushSettings(e,t){return t.payload==null?Cj:t.payload}}}),{setBrushSettings:bme}=w6.actions,Qhe=w6.reducer;function Jhe(e,t,r){return(t=ede(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ede(e){var t=tde(e,"string");return typeof t=="symbol"?t:t+""}function tde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class KT{static create(t){return new KT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+u}case"end":{var h=this.bandwidth?this.bandwidth():0;return this.scale(t)+h}default:return this.scale(t)}if(r){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+d}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],u=r[r.length-1];return n<=u?t>=n&&t<=u:t>=u&&t<=n}}Jhe(KT,"EPS",1e-4);function rde(e){return(e%180+180)%180}var nde=function(t){var{width:r,height:n}=t,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=rde(u),d=h*Math.PI/180,o=Math.atan(n/r),_=d>o&&d<Math.PI-o?n/Math.sin(d):r/Math.cos(d);return Math.abs(_)},ide={dots:[],areas:[],lines:[]},S6=Yo({name:"referenceElements",initialState:ide,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=bc(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=bc(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=bc(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:wme,removeDot:Sme,addArea:Pme,removeArea:Eme,addLine:Cme,removeLine:Tme}=S6.actions,ade=S6.reducer,ode=A.createContext(void 0),sde=e=>{var{children:t}=e,[r]=A.useState("".concat(f_("recharts"),"-clip")),n=HT();if(n==null)return null;var{x:u,y:h,width:d,height:o}=n;return A.createElement(ode.Provider,{value:r},A.createElement("defs",null,A.createElement("clipPath",{id:r},A.createElement("rect",{x:u,y:h,height:o,width:d}))),t)};function P6(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function lde(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return nde(n,r)}function ude(e,t,r){var n=r==="width",{x:u,y:h,width:d,height:o}=e;return t===1?{start:n?u:h,end:n?u+d:h+o}:{start:n?u+d:h+o,end:n?u:h}}function Qb(e,t,r,n,u){if(e*t<e*n||e*t>e*u)return!1;var h=r();return e*(t-e*h/2-n)>=0&&e*(t+e*h/2-u)<=0}function cde(e,t){return P6(e,t+1)}function hde(e,t,r,n,u){for(var h=(n||[]).slice(),{start:d,end:o}=t,_=0,P=1,S=d,M=function(){var F=n==null?void 0:n[_];if(F===void 0)return{v:P6(n,P)};var B=_,D,H=()=>(D===void 0&&(D=r(F,B)),D),Q=F.coordinate,te=_===0||Qb(e,Q,H,S,o);te||(_=0,S=d,P+=1),te&&(S=Q+e*(H()/2+u),_+=P)},O;P<=h.length;)if(O=M(),O)return O.v;return[]}function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){dde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dde(e,t,r){return(t=fde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fde(e){var t=pde(e,"string");return typeof t=="symbol"?t:t+""}function pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mde(e,t,r,n,u){for(var h=(n||[]).slice(),d=h.length,{start:o}=t,{end:_}=t,P=function(O){var z=h[O],F,B=()=>(F===void 0&&(F=r(z,O)),F);if(O===d-1){var D=e*(z.coordinate+e*B()/2-_);h[O]=z=Zo(Zo({},z),{},{tickCoord:D>0?z.coordinate-D*e:z.coordinate})}else h[O]=z=Zo(Zo({},z),{},{tickCoord:z.coordinate});if(z.tickCoord!=null){var H=Qb(e,z.tickCoord,B,o,_);H&&(_=z.tickCoord-e*(B()/2+u),h[O]=Zo(Zo({},z),{},{isShow:!0}))}},S=d-1;S>=0;S--)P(S);return h}function gde(e,t,r,n,u,h){var d=(n||[]).slice(),o=d.length,{start:_,end:P}=t;if(h){var S=n[o-1],M=r(S,o-1),O=e*(S.coordinate+e*M/2-P);if(d[o-1]=S=Zo(Zo({},S),{},{tickCoord:O>0?S.coordinate-O*e:S.coordinate}),S.tickCoord!=null){var z=Qb(e,S.tickCoord,()=>M,_,P);z&&(P=S.tickCoord-e*(M/2+u),d[o-1]=Zo(Zo({},S),{},{isShow:!0}))}}for(var F=h?o-1:o,B=function(Q){var te=d[Q],ie,ae=()=>(ie===void 0&&(ie=r(te,Q)),ie);if(Q===0){var he=e*(te.coordinate-e*ae()/2-_);d[Q]=te=Zo(Zo({},te),{},{tickCoord:he<0?te.coordinate-he*e:te.coordinate})}else d[Q]=te=Zo(Zo({},te),{},{tickCoord:te.coordinate});if(te.tickCoord!=null){var re=Qb(e,te.tickCoord,ae,_,P);re&&(_=te.tickCoord+e*(ae()/2+u),d[Q]=Zo(Zo({},te),{},{isShow:!0}))}},D=0;D<F;D++)B(D);return d}function XT(e,t,r){var{tick:n,ticks:u,viewBox:h,minTickGap:d,orientation:o,interval:_,tickFormatter:P,unit:S,angle:M}=e;if(!u||!u.length||!n)return[];if(_r(_)||Gy.isSsr){var O;return(O=cde(u,_r(_)?_:0))!==null&&O!==void 0?O:[]}var z=[],F=o==="top"||o==="bottom"?"width":"height",B=S&&F==="width"?i_(S,{fontSize:t,letterSpacing:r}):{width:0,height:0},D=(te,ie)=>{var ae=typeof P=="function"?P(te.value,ie):te.value;return F==="width"?lde(i_(ae,{fontSize:t,letterSpacing:r}),B,M):i_(ae,{fontSize:t,letterSpacing:r})[F]},H=u.length>=2?Ys(u[1].coordinate-u[0].coordinate):1,Q=ude(h,H,F);return _==="equidistantPreserveStart"?hde(H,Q,D,u,d):(_==="preserveStart"||_==="preserveStartEnd"?z=gde(H,Q,D,u,d,_==="preserveStartEnd"):z=mde(H,Q,D,u,d),z.filter(te=>te.isShow))}var yde=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:u=0,tickMargin:h=0}=e,d=0;if(t){Array.from(t).forEach(S=>{if(S){var M=S.getBoundingClientRect();M.width>d&&(d=M.width)}});var o=r?r.getBoundingClientRect().width:0,_=u+h,P=d+_+o+(r?n:0);return Math.round(P)}return 0},vde=["axisLine","width","height","className","hide","ticks","axisType"];function _de(e,t){if(e==null)return{};var r,n,u=xde(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function xde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(null,arguments)}function Mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mj(Object(r),!0).forEach(function(n){bde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bde(e,t,r){return(t=wde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wde(e){var t=Sde(e,"string");return typeof t=="symbol"?t:t+""}function Sde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Td={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:xo.axis};function Pde(e){var{x:t,y:r,width:n,height:u,orientation:h,mirror:d,axisLine:o,otherSvgProps:_}=e;if(!o)return null;var P=Aa(Aa(Aa({},_),vu(o)),{},{fill:"none"});if(h==="top"||h==="bottom"){var S=+(h==="top"&&!d||h==="bottom"&&d);P=Aa(Aa({},P),{},{x1:t,y1:r+S*u,x2:t+n,y2:r+S*u})}else{var M=+(h==="left"&&!d||h==="right"&&d);P=Aa(Aa({},P),{},{x1:t+M*n,y1:r,x2:t+M*n,y2:r+u})}return A.createElement("line",tg({},P,{className:ti("recharts-cartesian-axis-line",Ty(o,"className"))}))}function Ede(e,t,r,n,u,h,d,o,_){var P,S,M,O,z,F,B=o?-1:1,D=e.tickSize||d,H=_r(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":P=S=e.coordinate,O=r+ +!o*u,M=O-B*D,F=M-B*_,z=H;break;case"left":M=O=e.coordinate,S=t+ +!o*n,P=S-B*D,z=P-B*_,F=H;break;case"right":M=O=e.coordinate,S=t+ +o*n,P=S+B*D,z=P+B*_,F=H;break;default:P=S=e.coordinate,O=r+ +o*u,M=O+B*D,F=M+B*_,z=H;break}return{line:{x1:P,y1:M,x2:S,y2:O},tick:{x:z,y:F}}}function Cde(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Tde(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Mde(e){var{option:t,tickProps:r,value:n}=e,u,h=ti(r.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))u=A.cloneElement(t,Aa(Aa({},r),{},{className:h}));else if(typeof t=="function")u=t(Aa(Aa({},r),{},{className:h}));else{var d="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(d=ti(d,t==null?void 0:t.className)),u=A.createElement(GT,tg({},r,{className:d}),n)}return u}var kde=A.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:u,stroke:h,tickFormatter:d,unit:o,padding:_,tickTextProps:P,orientation:S,mirror:M,x:O,y:z,width:F,height:B,tickSize:D,tickMargin:H,fontSize:Q,letterSpacing:te,getTicksConfig:ie,events:ae,axisType:he}=e,re=XT(Aa(Aa({},ie),{},{ticks:r}),Q,te),be=Cde(S,M),xe=Tde(S,M),$e=vu(ie),Ee=q_(n),Ne={};typeof u=="object"&&(Ne=u);var Xe=Aa(Aa({},$e),{},{fill:"none"},Ne),ut=re.map(wt=>Aa({entry:wt},Ede(wt,O,z,F,B,S,D,M,H))),pt=ut.map(wt=>{var{entry:je,line:Qe}=wt;return A.createElement(Es,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(je.value,"-").concat(je.coordinate,"-").concat(je.tickCoord)},u&&A.createElement("line",tg({},Xe,Qe,{className:ti("recharts-cartesian-axis-tick-line",Ty(u,"className"))})))}),gt=ut.map((wt,je)=>{var{entry:Qe,tick:yt}=wt,Oe=Aa(Aa(Aa(Aa({textAnchor:be,verticalAnchor:xe},$e),{},{stroke:"none",fill:h},Ee),yt),{},{index:je,payload:Qe,visibleTicksCount:re.length,tickFormatter:d,padding:_},P);return A.createElement(Es,tg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Qe.value,"-").concat(Qe.coordinate,"-").concat(Qe.tickCoord)},Dw(ae,Qe,je)),n&&A.createElement(Mde,{option:n,tickProps:Oe,value:"".concat(typeof d=="function"?d(Qe.value,je):Qe.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(he,"-ticks")},gt.length>0&&A.createElement(Su,{zIndex:xo.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(he,"-tick-labels"),ref:t},gt)),pt.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(he,"-tick-lines")},pt))}),Ade=A.forwardRef((e,t)=>{var{axisLine:r,width:n,height:u,className:h,hide:d,ticks:o,axisType:_}=e,P=_de(e,vde),[S,M]=A.useState(""),[O,z]=A.useState(""),F=A.useRef(null);A.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var D;return yde({ticks:F.current,label:(D=e.labelRef)===null||D===void 0?void 0:D.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var B=A.useCallback(D=>{if(D){var H=D.getElementsByClassName("recharts-cartesian-axis-tick-value");F.current=H;var Q=H[0];if(Q){var te=window.getComputedStyle(Q),ie=te.fontSize,ae=te.letterSpacing;(ie!==S||ae!==O)&&(M(ie),z(ae))}}},[S,O]);return d||n!=null&&n<=0||u!=null&&u<=0?null:A.createElement(Su,{zIndex:e.zIndex},A.createElement(Es,{className:ti("recharts-cartesian-axis",h)},A.createElement(Pde,{x:e.x,y:e.y,width:n,height:u,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vu(e)}),A.createElement(kde,{ref:B,axisType:_,events:P,fontSize:S,getTicksConfig:e,height:e.height,letterSpacing:O,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),A.createElement(iue,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},A.createElement(pue,{label:e.label,labelRef:e.labelRef}),e.children)))}),YT=A.forwardRef((e,t)=>{var r=Ao(e,Td);return A.createElement(Ade,tg({},r,{ref:t}))});YT.displayName="CartesianAxis";var Ide=["x1","y1","x2","y2","key"],Ode=["offset"],Lde=["xAxisId","yAxisId"],Dde=["xAxisId","yAxisId"];function kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kj(Object(r),!0).forEach(function(n){Rde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rde(e,t,r){return(t=jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jde(e){var t=zde(e,"string");return typeof t=="symbol"?t:t+""}function zde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(null,arguments)}function Jb(e,t){if(e==null)return{};var r,n,u=Nde(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Nde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Fde=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:u,width:h,height:d,ry:o}=e;return A.createElement("rect",{x:n,y:u,ry:o,width:h,height:d,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function E6(e){var{option:t,lineItemProps:r}=e,n;if(A.isValidElement(t))n=A.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var u,{x1:h,y1:d,x2:o,y2:_,key:P}=r,S=Jb(r,Ide),M=(u=vu(S))!==null&&u!==void 0?u:{},{offset:O}=M,z=Jb(M,Ode);n=A.createElement("line",Lm({},z,{x1:h,y1:d,x2:o,y2:_,fill:"none",key:P}))}return n}function Bde(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:u}=e;if(!n||!u||!u.length)return null;var{xAxisId:h,yAxisId:d}=e,o=Jb(e,Lde),_=u.map((P,S)=>{var M=Ko(Ko({},o),{},{x1:t,y1:P,x2:t+r,y2:P,key:"line-".concat(S),index:S});return A.createElement(E6,{key:"line-".concat(S),option:n,lineItemProps:M})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},_)}function Vde(e){var{y:t,height:r,vertical:n=!0,verticalPoints:u}=e;if(!n||!u||!u.length)return null;var{xAxisId:h,yAxisId:d}=e,o=Jb(e,Dde),_=u.map((P,S)=>{var M=Ko(Ko({},o),{},{x1:P,y1:t,x2:P,y2:t+r,key:"line-".concat(S),index:S});return A.createElement(E6,{option:n,lineItemProps:M,key:"line-".concat(S)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},_)}function $de(e){var{horizontalFill:t,fillOpacity:r,x:n,y:u,width:h,height:d,horizontalPoints:o,horizontal:_=!0}=e;if(!_||!t||!t.length||o==null)return null;var P=o.map(M=>Math.round(M+u-u)).sort((M,O)=>M-O);u!==P[0]&&P.unshift(0);var S=P.map((M,O)=>{var z=!P[O+1],F=z?u+d-M:P[O+1]-M;if(F<=0)return null;var B=O%t.length;return A.createElement("rect",{key:"react-".concat(O),y:M,x:n,height:F,width:h,stroke:"none",fill:t[B],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},S)}function Ude(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:u,y:h,width:d,height:o,verticalPoints:_}=e;if(!t||!r||!r.length)return null;var P=_.map(M=>Math.round(M+u-u)).sort((M,O)=>M-O);u!==P[0]&&P.unshift(0);var S=P.map((M,O)=>{var z=!P[O+1],F=z?u+d-M:P[O+1]-M;if(F<=0)return null;var B=O%r.length;return A.createElement("rect",{key:"react-".concat(O),x:M,y:h,width:F,height:o,stroke:"none",fill:r[B],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},S)}var qde=(e,t)=>{var{xAxis:r,width:n,height:u,offset:h}=e;return YF(XT(Ko(Ko(Ko({},Td),r),{},{ticks:QF(r),viewBox:{x:0,y:0,width:n,height:u}})),h.left,h.left+h.width,t)},Gde=(e,t)=>{var{yAxis:r,width:n,height:u,offset:h}=e;return YF(XT(Ko(Ko(Ko({},Td),r),{},{ticks:QF(r),viewBox:{x:0,y:0,width:n,height:u}})),h.top,h.top+h.height,t)},Wde={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:xo.grid};function QT(e){var t=GC(),r=WC(),n=oB(),u=Ko(Ko({},Ao(e,Wde)),{},{x:_r(e.x)?e.x:n.left,y:_r(e.y)?e.y:n.top,width:_r(e.width)?e.width:n.width,height:_r(e.height)?e.height:n.height}),{xAxisId:h,yAxisId:d,x:o,y:_,width:P,height:S,syncWithTicks:M,horizontalValues:O,verticalValues:z}=u,F=Qo(),B=Or(xe=>TR(xe,"xAxis",h,F)),D=Or(xe=>TR(xe,"yAxis",d,F));if(!bh(P)||!bh(S)||!_r(o)||!_r(_))return null;var H=u.verticalCoordinatesGenerator||qde,Q=u.horizontalCoordinatesGenerator||Gde,{horizontalPoints:te,verticalPoints:ie}=u;if((!te||!te.length)&&typeof Q=="function"){var ae=O&&O.length,he=Q({yAxis:D?Ko(Ko({},D),{},{ticks:ae?O:D.ticks}):void 0,width:t??P,height:r??S,offset:n},ae?!0:M);Pb(Array.isArray(he),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof he,"]")),Array.isArray(he)&&(te=he)}if((!ie||!ie.length)&&typeof H=="function"){var re=z&&z.length,be=H({xAxis:B?Ko(Ko({},B),{},{ticks:re?z:B.ticks}):void 0,width:t??P,height:r??S,offset:n},re?!0:M);Pb(Array.isArray(be),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof be,"]")),Array.isArray(be)&&(ie=be)}return A.createElement(Su,{zIndex:u.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(Fde,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),A.createElement($de,Lm({},u,{horizontalPoints:te})),A.createElement(Ude,Lm({},u,{verticalPoints:ie})),A.createElement(Bde,Lm({},u,{offset:n,horizontalPoints:te,xAxis:B,yAxis:D})),A.createElement(Vde,Lm({},u,{offset:n,verticalPoints:ie,xAxis:B,yAxis:D}))))}QT.displayName="CartesianGrid";function Hde(e){var t=q_(e),r=3,n=2;if(t!=null){var{r:u,strokeWidth:h}=t,d=Number(u),o=Number(h);return(Number.isNaN(d)||d<0)&&(d=r),(Number.isNaN(o)||o<0)&&(o=n),{r:d,strokeWidth:o}}return{r,strokeWidth:n}}var C6=(e,t,r,n)=>bp(e,"xAxis",t,n),T6=(e,t,r,n)=>xp(e,"xAxis",t,n),M6=(e,t,r,n)=>bp(e,"yAxis",r,n),k6=(e,t,r,n)=>xp(e,"yAxis",r,n),Zde=Tt([Bn,C6,M6,T6,k6],(e,t,r,n,u)=>Nd(e,"xAxis")?My(t,n,!1):My(r,u,!1)),Kde=(e,t,r,n,u)=>u,A6=Tt([u1,Kde],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),Xde=(e,t,r,n,u)=>{var h,d=A6(e,t,r,n,u);if(d!=null){var o=Bn(e),_=Nd(o,"xAxis"),P;if(_?P=S_(e,"yAxis",r,n):P=S_(e,"xAxis",t,n),P!=null){var{stackId:S}=d,M=a1(d);if(!(S==null||M==null)){var O=(h=P[S])===null||h===void 0?void 0:h.stackedData;return O==null?void 0:O.find(z=>z.key===M)}}}},Yde=Tt([Bn,C6,M6,T6,k6,Xde,e1,Zde,A6,dae],(e,t,r,n,u,h,d,o,_,P)=>{var{chartData:S,dataStartIndex:M,dataEndIndex:O}=d;if(!(_==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||u==null||n.length===0||u.length===0||o==null)){var{data:z}=_,F;if(z&&z.length>0?F=z:F=S==null?void 0:S.slice(M,O+1),F!=null)return gfe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:u,dataStartIndex:M,areaSettings:_,stackedData:h,displayedData:F,chartBaseValue:P,bandSize:o})}}),Qde=["id"],Jde=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hm.apply(null,arguments)}function I6(e,t){if(e==null)return{};var r,n,u=efe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function efe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function ay(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){tfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tfe(e,t,r){return(t=rfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rfe(e){var t=nfe(e,"string");return typeof t=="symbol"?t:t+""}function nfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ew(e,t){return e&&e!=="none"?e:t}var ife=e=>{var{dataKey:t,name:r,stroke:n,fill:u,legendType:h,hide:d}=e;return[{inactive:d,dataKey:t,type:h,color:ew(n,u),value:jw(r,t),payload:e}]},afe=A.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:u,fill:h,name:d,hide:o,unit:_,tooltipType:P}=e,S={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:u,fill:h,dataKey:t,nameKey:void 0,name:jw(d,t),hide:o,type:P,color:ew(n,h),unit:_}};return A.createElement(h6,{tooltipEntrySettings:S})});function ofe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:u,dot:h,dataKey:d}=n,o=vu(n);return A.createElement(mce,{points:r,dot:h,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:d,baseProps:o,needClip:u,clipPathId:t})}function sfe(e){var{showLabels:t,children:r,points:n}=e,u=n.map(h=>{var d,o,_={x:(d=h.x)!==null&&d!==void 0?d:0,y:(o=h.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ay(ay({},_),{},{value:h.value,payload:h.payload,parentViewBox:void 0,viewBox:_,fill:void 0})});return A.createElement(t6,{value:t?u:void 0},r)}function Ij(e){var{points:t,baseLine:r,needClip:n,clipPathId:u,props:h}=e,{layout:d,type:o,stroke:_,connectNulls:P,isRange:S}=h,{id:M}=h,O=I6(h,Qde),z=vu(O),F=Ps(O);return A.createElement(A.Fragment,null,(t==null?void 0:t.length)>1&&A.createElement(Es,{clipPath:n?"url(#clipPath-".concat(u,")"):void 0},A.createElement(n_,Hm({},F,{id:M,points:t,connectNulls:P,type:o,baseLine:r,layout:d,stroke:"none",className:"recharts-area-area"})),_!=="none"&&A.createElement(n_,Hm({},z,{className:"recharts-area-curve",layout:d,type:o,connectNulls:P,fill:"none",points:t})),_!=="none"&&S&&A.createElement(n_,Hm({},z,{className:"recharts-area-curve",layout:d,type:o,connectNulls:P,fill:"none",points:r}))),A.createElement(ofe,{points:t,props:O,clipPathId:u}))}function lfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:u}=e,h=n[0].y,d=n[n.length-1].y;if(!Ai(h)||!Ai(d))return null;var o=t*Math.abs(h-d),_=Math.max(...n.map(P=>P.x||0));return _r(r)?_=Math.max(r,_):r&&Array.isArray(r)&&r.length&&(_=Math.max(...r.map(P=>P.x||0),_)),_r(_)?A.createElement("rect",{x:0,y:h<d?h:h-o,width:_+(u?parseInt("".concat(u),10):1),height:Math.floor(o)}):null}function ufe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:u}=e,h=n[0].x,d=n[n.length-1].x;if(!Ai(h)||!Ai(d))return null;var o=t*Math.abs(h-d),_=Math.max(...n.map(P=>P.y||0));return _r(r)?_=Math.max(r,_):r&&Array.isArray(r)&&r.length&&(_=Math.max(...r.map(P=>P.y||0),_)),_r(_)?A.createElement("rect",{x:h<d?h:h-o,y:0,width:o,height:Math.floor(_+(u?parseInt("".concat(u),10):1))}):null}function cfe(e){var{alpha:t,layout:r,points:n,baseLine:u,strokeWidth:h}=e;return r==="vertical"?A.createElement(lfe,{alpha:t,points:n,baseLine:u,strokeWidth:h}):A.createElement(ufe,{alpha:t,points:n,baseLine:u,strokeWidth:h})}function hfe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:u,previousBaselineRef:h}=e,{points:d,baseLine:o,isAnimationActive:_,animationBegin:P,animationDuration:S,animationEasing:M,onAnimationStart:O,onAnimationEnd:z}=n,F=A.useMemo(()=>({points:d,baseLine:o}),[d,o]),B=Hw(F,"recharts-area-"),D=Eee(),[H,Q]=A.useState(!1),te=!H,ie=A.useCallback(()=>{typeof z=="function"&&z(),Q(!1)},[z]),ae=A.useCallback(()=>{typeof O=="function"&&O(),Q(!0)},[O]);if(D==null)return null;var he=u.current,re=h.current;return A.createElement(sfe,{showLabels:te,points:d},n.children,A.createElement(Ww,{animationId:B,begin:P,duration:S,isActive:_,easing:M,onAnimationEnd:ie,onAnimationStart:ae,key:B},be=>{if(he){var xe=he.length/d.length,$e=be===1?d:d.map((Ne,Xe)=>{var ut=Math.floor(Xe*xe);if(he[ut]){var pt=he[ut];return ay(ay({},Ne),{},{x:Hi(pt.x,Ne.x,be),y:Hi(pt.y,Ne.y,be)})}return Ne}),Ee;return _r(o)?Ee=Hi(re,o,be):Zi(o)||_u(o)?Ee=Hi(re,0,be):Ee=o.map((Ne,Xe)=>{var ut=Math.floor(Xe*xe);if(Array.isArray(re)&&re[ut]){var pt=re[ut];return ay(ay({},Ne),{},{x:Hi(pt.x,Ne.x,be),y:Hi(pt.y,Ne.y,be)})}return Ne}),be>0&&(u.current=$e,h.current=Ee),A.createElement(Ij,{points:$e,baseLine:Ee,needClip:t,clipPathId:r,props:n})}return be>0&&(u.current=d,h.current=o),A.createElement(Es,null,_&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(r)},A.createElement(cfe,{alpha:be,points:d,baseLine:o,layout:D,strokeWidth:n.strokeWidth}))),A.createElement(Es,{clipPath:"url(#animationClipPath-".concat(r,")")},A.createElement(Ij,{points:d,baseLine:o,needClip:t,clipPathId:r,props:n})))}),A.createElement(n6,{label:n.label}))}function dfe(e){var{needClip:t,clipPathId:r,props:n}=e,u=A.useRef(null),h=A.useRef();return A.createElement(hfe,{needClip:t,clipPathId:r,props:n,previousPointsRef:u,previousBaselineRef:h})}class ffe extends A.PureComponent{render(){var{hide:t,dot:r,points:n,className:u,top:h,left:d,needClip:o,xAxisId:_,yAxisId:P,width:S,height:M,id:O,baseLine:z,zIndex:F}=this.props;if(t)return null;var B=ti("recharts-area",u),D=O,{r:H,strokeWidth:Q}=Hde(r),te=s6(r),ie=H*2+Q,ae=o?"url(#clipPath-".concat(te?"":"dots-").concat(D,")"):void 0;return A.createElement(Su,{zIndex:F},A.createElement(Es,{className:B},o&&A.createElement("defs",null,A.createElement(_6,{clipPathId:D,xAxisId:_,yAxisId:P}),!te&&A.createElement("clipPath",{id:"clipPath-dots-".concat(D)},A.createElement("rect",{x:d-ie/2,y:h-ie/2,width:S+ie,height:M+ie}))),A.createElement(dfe,{needClip:o,clipPathId:D,props:this.props})),A.createElement(bj,{points:n,mainColor:ew(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ae}),this.props.isRange&&Array.isArray(z)&&A.createElement(bj,{points:z,mainColor:ew(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ae}))}}var O6={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:xo.area};function pfe(e){var t,r=Ao(e,O6),{activeDot:n,animationBegin:u,animationDuration:h,animationEasing:d,connectNulls:o,dot:_,fill:P,fillOpacity:S,hide:M,isAnimationActive:O,legendType:z,stroke:F,xAxisId:B,yAxisId:D}=r,H=I6(r,Jde),Q=qy(),te=L4(),{needClip:ie}=ZT(B,D),ae=Qo(),{points:he,isRange:re,baseLine:be}=(t=Or(ut=>Yde(ut,B,D,ae,e.id)))!==null&&t!==void 0?t:{},xe=HT();if(Q!=="horizontal"&&Q!=="vertical"||xe==null||te!=="AreaChart"&&te!=="ComposedChart")return null;var{height:$e,width:Ee,x:Ne,y:Xe}=xe;return!he||!he.length?null:A.createElement(ffe,Hm({},H,{activeDot:n,animationBegin:u,animationDuration:h,animationEasing:d,baseLine:be,connectNulls:o,dot:_,fill:P,fillOpacity:S,height:$e,hide:M,layout:Q,isAnimationActive:O==="auto"?!Gy.isSsr:O,isRange:re,legendType:z,needClip:ie,points:he,stroke:F,width:Ee,left:Ne,top:Xe,xAxisId:B,yAxisId:D}))}var mfe=(e,t,r,n,u)=>{var h=r??t;if(_r(h))return h;var d=e==="horizontal"?u:n,o=d.scale.domain();if(d.type==="number"){var _=Math.max(o[0],o[1]),P=Math.min(o[0],o[1]);return h==="dataMin"?P:h==="dataMax"||_<0?_:Math.max(Math.min(o[0],o[1]),0)}return h==="dataMin"?o[0]:h==="dataMax"?o[1]:o[0]};function gfe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:u,layout:h,chartBaseValue:d,xAxis:o,yAxis:_,displayedData:P,dataStartIndex:S,xAxisTicks:M,yAxisTicks:O,bandSize:z}=e,F=u&&u.length,B=mfe(h,d,r,o,_),D=h==="horizontal",H=!1,Q=P.map((ie,ae)=>{var he;F?he=u[S+ae]:(he=Ha(ie,n),Array.isArray(he)?H=!0:he=[B,he]);var re=he[1]==null||F&&!t&&Ha(ie,n)==null;return D?{x:WL({axis:o,ticks:M,bandSize:z,entry:ie,index:ae}),y:re?null:_.scale(he[1]),value:he,payload:ie}:{x:re?null:o.scale(he[1]),y:WL({axis:_,ticks:O,bandSize:z,entry:ie,index:ae}),value:he,payload:ie}}),te;return F||H?te=Q.map(ie=>{var ae=Array.isArray(ie.value)?ie.value[0]:null;return D?{x:ie.x,y:ae!=null&&ie.y!=null?_.scale(ae):null,payload:ie.payload}:{x:ae!=null?o.scale(ae):null,y:ie.y,payload:ie.payload}}):te=D?_.scale(B):o.scale(B),{points:Q,baseLine:te,isRange:H}}function yfe(e){var t=Ao(e,O6),r=Qo();return A.createElement(p6,{id:t.id,type:"area"},n=>A.createElement(A.Fragment,null,A.createElement(d6,{legendPayload:ife(t)}),A.createElement(afe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),A.createElement(g6,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:JF(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),A.createElement(pfe,Hm({},t,{id:n}))))}var FE=A.memo(yfe,f1);FE.displayName="Area";var vfe=["domain","range"],_fe=["domain","range"];function Oj(e,t){if(e==null)return{};var r,n,u=xfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function xfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lj(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function L6(e,t){if(e===t)return!0;var{domain:r,range:n}=e,u=Oj(e,vfe),{domain:h,range:d}=t,o=Oj(t,_fe);return!Lj(r,h)||!Lj(n,d)?!1:f1(u,o)}var bfe=["dangerouslySetInnerHTML","ticks"],wfe=["id"];function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BE.apply(null,arguments)}function Dj(e,t){if(e==null)return{};var r,n,u=Sfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Sfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pfe(e){var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(xce(e)):r.current!==e&&t(bce({prev:r.current,next:e})),r.current=e},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(t(wce(r.current)),r.current=null)},[t]),null}var Efe=e=>{var{xAxisId:t,className:r}=e,n=Or(UC),u=Qo(),h="xAxis",d=Or(D=>Yy(D,h,t,u)),o=Or(D=>c4(D,h,t,u)),_=Or(D=>o4(D,t)),P=Or(D=>uoe(D,t)),S=Or(D=>k5(D,t));if(_==null||P==null||S==null)return null;var{dangerouslySetInnerHTML:M,ticks:O}=e,z=Dj(e,bfe),{id:F}=S,B=Dj(S,wfe);return A.createElement(YT,BE({},z,B,{scale:d,x:P.x,y:P.y,width:_.width,height:_.height,className:ti("recharts-".concat(h," ").concat(h),r),viewBox:n,ticks:o,axisType:h}))},Cfe={allowDataOverflow:go.allowDataOverflow,allowDecimals:go.allowDecimals,allowDuplicatedCategory:go.allowDuplicatedCategory,angle:go.angle,axisLine:Td.axisLine,height:go.height,hide:!1,includeHidden:go.includeHidden,interval:go.interval,minTickGap:go.minTickGap,mirror:go.mirror,orientation:go.orientation,padding:go.padding,reversed:go.reversed,scale:go.scale,tick:go.tick,tickCount:go.tickCount,tickLine:Td.tickLine,tickSize:Td.tickSize,type:go.type,xAxisId:0},Tfe=e=>{var t=Ao(e,Cfe);return A.createElement(A.Fragment,null,A.createElement(Pfe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),A.createElement(Efe,t))},JT=A.memo(Tfe,L6);JT.displayName="XAxis";var Mfe=["dangerouslySetInnerHTML","ticks"],kfe=["id"];function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VE.apply(null,arguments)}function Rj(e,t){if(e==null)return{};var r,n,u=Afe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Afe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ife(e){var t=Ki(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(Sce(e)):r.current!==e&&t(Pce({prev:r.current,next:e})),r.current=e},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(t(Ece(r.current)),r.current=null)},[t]),null}var Ofe=e=>{var{yAxisId:t,className:r,width:n,label:u}=e,h=A.useRef(null),d=A.useRef(null),o=Or(UC),_=Qo(),P=Ki(),S="yAxis",M=Or(ae=>Yy(ae,S,t,_)),O=Or(ae=>s4(ae,t)),z=Or(ae=>hoe(ae,t)),F=Or(ae=>c4(ae,S,t,_)),B=Or(ae=>A5(ae,t));if(A.useLayoutEffect(()=>{if(!(n!=="auto"||!O||WT(u)||A.isValidElement(u)||B==null)){var ae=h.current;if(ae){var he=ae.getCalculatedWidth();Math.round(O.width)!==Math.round(he)&&P(Cce({id:t,width:he}))}}},[F,O,P,u,t,n,B]),O==null||z==null||B==null)return null;var{dangerouslySetInnerHTML:D,ticks:H}=e,Q=Rj(e,Mfe),{id:te}=B,ie=Rj(B,kfe);return A.createElement(YT,VE({},Q,ie,{ref:h,labelRef:d,scale:M,x:z.x,y:z.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:O.width,height:O.height,className:ti("recharts-".concat(S," ").concat(S),r),viewBox:o,ticks:F,axisType:S}))},Lfe={allowDataOverflow:yo.allowDataOverflow,allowDecimals:yo.allowDecimals,allowDuplicatedCategory:yo.allowDuplicatedCategory,angle:yo.angle,axisLine:Td.axisLine,hide:!1,includeHidden:yo.includeHidden,interval:yo.interval,minTickGap:yo.minTickGap,mirror:yo.mirror,orientation:yo.orientation,padding:yo.padding,reversed:yo.reversed,scale:yo.scale,tick:yo.tick,tickCount:yo.tickCount,tickLine:Td.tickLine,tickSize:Td.tickSize,type:yo.type,width:yo.width,yAxisId:0},Dfe=e=>{var t=Ao(e,Lfe);return A.createElement(A.Fragment,null,A.createElement(Ife,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),A.createElement(Ofe,t))},tw=A.memo(Dfe,L6);tw.displayName="YAxis";var Rfe=(e,t)=>t,eM=Tt([Rfe,Bn,T5,Ya,C4,qd,Ese,bo],Ose),tM=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},D6=yu("mouseClick"),R6=R_();R6.startListening({actionCreator:D6,effect:(e,t)=>{var r=e.payload,n=eM(t.getState(),tM(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Eoe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var $E=yu("mouseMove"),j6=R_(),Ex=null;j6.startListening({actionCreator:$E,effect:(e,t)=>{var r=e.payload;Ex!==null&&cancelAnimationFrame(Ex);var n=tM(r);Ex=requestAnimationFrame(()=>{var u=t.getState(),h=RT(u,u.tooltip.settings.shared);if(h==="axis"){var d=eM(u,n);(d==null?void 0:d.activeIndex)!=null?t.dispatch(v4({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(y4())}Ex=null})}});var jj={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},z6=Yo({name:"rootProps",initialState:jj,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:jj.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),jfe=z6.reducer,{updateOptions:zfe}=z6.actions,N6=Yo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Mme}=N6.actions,Nfe=N6.reducer,F6=yu("keyDown"),B6=yu("focus"),rM=R_();rM.startListening({actionCreator:F6,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:u}=r.tooltip,h=e.payload;if(!(h!=="ArrowRight"&&h!=="ArrowLeft"&&h!=="Enter")){var d=jT(u,Jy(r),t0(r),o0(r)),o=d==null?-1:Number(d);if(!(!Number.isFinite(o)||o<0)){var _=qd(r);if(h==="Enter"){var P=Gb(r,"axis","hover",String(u.index));t.dispatch(OE({active:!u.active,activeIndex:u.index,activeDataKey:u.dataKey,activeCoordinate:P}));return}var S=moe(r),M=S==="left-to-right"?1:-1,O=h==="ArrowRight"?1:-1,z=o+O*M;if(!(_==null||z>=_.length||z<0)){var F=Gb(r,"axis","hover",String(z));t.dispatch(OE({active:!0,activeIndex:z.toString(),activeDataKey:void 0,activeCoordinate:F}))}}}}}});rM.startListening({actionCreator:B6,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:u}=r.tooltip;if(!u.active&&u.index==null){var h="0",d=Gb(r,"axis","hover",String(h));t.dispatch(OE({activeDataKey:void 0,active:!0,activeIndex:h,activeCoordinate:d}))}}}});var lu=yu("externalEvent"),V6=R_(),u2=new Map;V6.startListening({actionCreator:lu,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var u=n.type,h=u2.get(u);h!==void 0&&cancelAnimationFrame(h);var d=requestAnimationFrame(()=>{try{var o=t.getState(),_={activeCoordinate:cse(o),activeDataKey:A4(o),activeIndex:eg(o),activeLabel:k4(o),activeTooltipIndex:eg(o),isTooltipActive:hse(o)};r(_,n)}finally{u2.delete(u)}});u2.set(u,d)}}});var Ffe=Tt([Qy],e=>e.tooltipItemPayloads),Bfe=Tt([Ffe,i0,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var u=e.find(o=>o.settings.dataKey===n);if(u!=null){var{positions:h}=u;if(h!=null){var d=t(h,r);return d}}}),$6=yu("touchMove"),U6=R_();U6.startListening({actionCreator:$6,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),u=RT(n,n.tooltip.settings.shared);if(u==="axis"){var h=eM(n,tM({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(h==null?void 0:h.activeIndex)!=null&&t.dispatch(v4({activeIndex:h.activeIndex,activeDataKey:void 0,activeCoordinate:h.activeCoordinate}))}else if(u==="item"){var d,o=r.touches[0];if(document.elementFromPoint==null)return;var _=document.elementFromPoint(o.clientX,o.clientY);if(!_||!_.getAttribute)return;var P=_.getAttribute(ZJ),S=(d=_.getAttribute(KJ))!==null&&d!==void 0?d:void 0,M=Bfe(t.getState(),P,S);t.dispatch(g4({activeDataKey:S,activeIndex:P,activeCoordinate:M}))}}}});var Vfe=Vz({brush:Qhe,cartesianAxis:Tce,chartData:ule,errorBars:Wce,graphicalItems:ace,layout:AJ,legend:Uee,options:ile,polarAxis:Mue,polarOptions:Nfe,referenceElements:ade,rootProps:jfe,tooltip:Coe,zIndex:Wse}),$fe=function(t){return i3({reducer:Vfe,preloadedState:t,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([R6.middleware,j6.middleware,rM.middleware,V6.middleware,U6.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(n3({type:"raf"}))},devTools:Gy.devToolsEnabled})};function Ufe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,u=Qo(),h=A.useRef(null);if(u)return r;h.current==null&&(h.current=$fe(t));var d=$C;return A.createElement(K3,{context:d,store:h.current},r)}function qfe(e){var{layout:t,margin:r}=e,n=Ki(),u=Qo();return A.useEffect(()=>{u||(n(TJ(t)),n(CJ(r)))},[n,u,t,r]),null}var Gfe=A.memo(qfe,f1);function Wfe(e){var t=Ki();return A.useEffect(()=>{t(zfe(e))},[t,e]),null}function zj(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",u=f6("".concat(n).concat(t)),h=Ki();return A.useLayoutEffect(()=>(h(qse({zIndex:t,elementId:u,isPanorama:r})),()=>{h(Gse({zIndex:t,isPanorama:r}))}),[h,t,u,r]),A.createElement("g",{tabIndex:-1,id:u})}function Nj(e){var{children:t,isPanorama:r}=e,n=Or(Dse);if(!n||n.length===0)return t;var u=n.filter(d=>d<0),h=n.filter(d=>d>0);return A.createElement(A.Fragment,null,u.map(d=>A.createElement(zj,{key:d,zIndex:d,isPanorama:r})),t,h.map(d=>A.createElement(zj,{key:d,zIndex:d,isPanorama:r})))}var Hfe=["children"];function Zfe(e,t){if(e==null)return{};var r,n,u=Kfe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function Kfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rw(){return rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rw.apply(null,arguments)}var Xfe={width:"100%",height:"100%",display:"block"},Yfe=A.forwardRef((e,t)=>{var r=GC(),n=WC(),u=mB();if(!bh(r)||!bh(n))return null;var{children:h,otherAttributes:d,title:o,desc:_}=e,P,S;return d!=null&&(typeof d.tabIndex=="number"?P=d.tabIndex:P=u?0:void 0,typeof d.role=="string"?S=d.role:S=u?"application":void 0),A.createElement(OC,rw({},d,{title:o,desc:_,role:S,tabIndex:P,width:r,height:n,style:Xfe,ref:t}),h)}),Qfe=e=>{var{children:t}=e,r=Or(Bw);if(!r)return null;var{width:n,height:u,y:h,x:d}=r;return A.createElement(OC,{width:n,height:u,x:d,y:h},t)},Fj=A.forwardRef((e,t)=>{var{children:r}=e,n=Zfe(e,Hfe),u=Qo();return u?A.createElement(Qfe,null,A.createElement(Nj,{isPanorama:!0},r)):A.createElement(Yfe,rw({ref:t},n),A.createElement(Nj,{isPanorama:!1},r))});function Jfe(){var e=Ki(),[t,r]=A.useState(null),n=Or(HJ);return A.useEffect(()=>{if(t!=null){var u=t.getBoundingClientRect(),h=u.width/t.offsetWidth;Ai(h)&&h!==n&&e(kJ(h))}},[t,e,n]),r}function Bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,n)}return r}function epe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bj(Object(r),!0).forEach(function(n){tpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tpe(e,t,r){return(t=rpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rpe(e){var t=npe(e,"string");return typeof t=="symbol"?t:t+""}function npe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rg.apply(null,arguments)}var ipe=()=>(vle(),null);function nw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ape=A.forwardRef((e,t)=>{var r,n,u=A.useRef(null),[h,d]=A.useState({containerWidth:nw((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:nw((n=e.style)===null||n===void 0?void 0:n.height)}),o=A.useCallback((P,S)=>{d(M=>{var O=Math.round(P),z=Math.round(S);return M.containerWidth===O&&M.containerHeight===z?M:{containerWidth:O,containerHeight:z}})},[]),_=A.useCallback(P=>{if(typeof t=="function"&&t(P),P!=null&&typeof ResizeObserver<"u"){var{width:S,height:M}=P.getBoundingClientRect();o(S,M);var O=F=>{var{width:B,height:D}=F[0].contentRect;o(B,D)},z=new ResizeObserver(O);z.observe(P),u.current=z}},[t,o]);return A.useEffect(()=>()=>{var P=u.current;P!=null&&P.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement($w,{width:h.containerWidth,height:h.containerHeight}),A.createElement("div",rg({ref:_},e)))}),ope=A.forwardRef((e,t)=>{var{width:r,height:n}=e,[u,h]=A.useState({containerWidth:nw(r),containerHeight:nw(n)}),d=A.useCallback((_,P)=>{h(S=>{var M=Math.round(_),O=Math.round(P);return S.containerWidth===M&&S.containerHeight===O?S:{containerWidth:M,containerHeight:O}})},[]),o=A.useCallback(_=>{if(typeof t=="function"&&t(_),_!=null){var{width:P,height:S}=_.getBoundingClientRect();d(P,S)}},[t,d]);return A.createElement(A.Fragment,null,A.createElement($w,{width:u.containerWidth,height:u.containerHeight}),A.createElement("div",rg({ref:o},e)))}),spe=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return A.createElement(A.Fragment,null,A.createElement($w,{width:r,height:n}),A.createElement("div",rg({ref:t},e)))}),lpe=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return Od(r)||Od(n)?A.createElement(ope,rg({},e,{ref:t})):A.createElement(spe,rg({},e,{ref:t}))});function upe(e){return e===!0?ape:lpe}var cpe=A.forwardRef((e,t)=>{var{children:r,className:n,height:u,onClick:h,onContextMenu:d,onDoubleClick:o,onMouseDown:_,onMouseEnter:P,onMouseLeave:S,onMouseMove:M,onMouseUp:O,onTouchEnd:z,onTouchMove:F,onTouchStart:B,style:D,width:H,responsive:Q,dispatchTouchEvents:te=!0}=e,ie=A.useRef(null),ae=Ki(),[he,re]=A.useState(null),[be,xe]=A.useState(null),$e=Jfe(),Ee=qC(),Ne=(Ee==null?void 0:Ee.width)>0?Ee.width:H,Xe=(Ee==null?void 0:Ee.height)>0?Ee.height:u,ut=A.useCallback(ct=>{$e(ct),typeof t=="function"&&t(ct),re(ct),xe(ct),ct!=null&&(ie.current=ct)},[$e,t,re,xe]),pt=A.useCallback(ct=>{ae(D6(ct)),ae(lu({handler:h,reactEvent:ct}))},[ae,h]),gt=A.useCallback(ct=>{ae($E(ct)),ae(lu({handler:P,reactEvent:ct}))},[ae,P]),wt=A.useCallback(ct=>{ae(y4()),ae(lu({handler:S,reactEvent:ct}))},[ae,S]),je=A.useCallback(ct=>{ae($E(ct)),ae(lu({handler:M,reactEvent:ct}))},[ae,M]),Qe=A.useCallback(()=>{ae(B6())},[ae]),yt=A.useCallback(ct=>{ae(F6(ct.key))},[ae]),Oe=A.useCallback(ct=>{ae(lu({handler:d,reactEvent:ct}))},[ae,d]),et=A.useCallback(ct=>{ae(lu({handler:o,reactEvent:ct}))},[ae,o]),Mt=A.useCallback(ct=>{ae(lu({handler:_,reactEvent:ct}))},[ae,_]),Dt=A.useCallback(ct=>{ae(lu({handler:O,reactEvent:ct}))},[ae,O]),Ke=A.useCallback(ct=>{ae(lu({handler:B,reactEvent:ct}))},[ae,B]),tr=A.useCallback(ct=>{te&&ae($6(ct)),ae(lu({handler:F,reactEvent:ct}))},[ae,te,F]),Ft=A.useCallback(ct=>{ae(lu({handler:z,reactEvent:ct}))},[ae,z]),$t=upe(Q);return A.createElement(N4.Provider,{value:he},A.createElement(fF.Provider,{value:be},A.createElement($t,{width:Ne??(D==null?void 0:D.width),height:Xe??(D==null?void 0:D.height),className:ti("recharts-wrapper",n),style:epe({position:"relative",cursor:"default",width:Ne,height:Xe},D),onClick:pt,onContextMenu:Oe,onDoubleClick:et,onFocus:Qe,onKeyDown:yt,onMouseDown:Mt,onMouseEnter:gt,onMouseLeave:wt,onMouseMove:je,onMouseUp:Dt,onTouchEnd:Ft,onTouchMove:tr,onTouchStart:Ke,ref:ut},A.createElement(ipe,null),r)))}),hpe=["width","height","responsive","children","className","style","compact","title","desc"];function dpe(e,t){if(e==null)return{};var r,n,u=fpe(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(n=0;n<h.length;n++)r=h[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function fpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ppe=A.forwardRef((e,t)=>{var{width:r,height:n,responsive:u,children:h,className:d,style:o,compact:_,title:P,desc:S}=e,M=dpe(e,hpe),O=vu(M);return _?A.createElement(A.Fragment,null,A.createElement($w,{width:r,height:n}),A.createElement(Fj,{otherAttributes:O,title:P,desc:S},h)):A.createElement(cpe,{className:d,style:o,width:r,height:n,responsive:u??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement(Fj,{otherAttributes:O,title:P,desc:S,ref:t},A.createElement(sde,null,h)))});function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UE.apply(null,arguments)}var mpe={top:5,right:5,bottom:5,left:5},gpe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:mpe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},q6=A.forwardRef(function(t,r){var n,u=Ao(t.categoricalChartProps,gpe),{chartName:h,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:_,categoricalChartProps:P}=t,S={chartName:h,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:_,eventEmitter:void 0};return A.createElement(Ufe,{preloadedState:{options:S},reduxStoreName:(n=P.id)!==null&&n!==void 0?n:h},A.createElement(Yhe,{chartData:P.data}),A.createElement(Gfe,{layout:u.layout,margin:u.margin}),A.createElement(Wfe,{baseValue:u.baseValue,accessibilityLayer:u.accessibilityLayer,barCategoryGap:u.barCategoryGap,maxBarSize:u.maxBarSize,stackOffset:u.stackOffset,barGap:u.barGap,barSize:u.barSize,syncId:u.syncId,syncMethod:u.syncMethod,className:u.className,reverseStackOrder:u.reverseStackOrder}),A.createElement(ppe,UE({},u,{ref:r})))}),ype=["axis","item"],vpe=A.forwardRef((e,t)=>A.createElement(q6,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ype,tooltipPayloadSearcher:F4,categoricalChartProps:e,ref:t})),_pe=["axis"],xpe=A.forwardRef((e,t)=>A.createElement(q6,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_pe,tooltipPayloadSearcher:F4,categoricalChartProps:e,ref:t}));function bpe({elevationData:e}){const n=(()=>{if(!e||e.length===0)return[{distance:0,elevation:10,battery:100},{distance:20,elevation:35,battery:92},{distance:40,elevation:60,battery:85},{distance:60,elevation:45,battery:78}];if(e.length<=15)return e.map(_=>({distance:Math.round(_.x_km),elevation:Math.round(_.elevation??20+_.soc*.6+_.x_km%80*.3),battery:Math.max(0,Math.min(100,Math.round(_.soc*10)/10))}));const h=Math.floor(e.length/14),d=[];for(let _=0;_<14;_++){const P=_*h,S=e[P];d.push({distance:Math.round(S.x_km),elevation:Math.round(S.elevation??20+S.soc*.6+S.x_km%80*.3),battery:Math.max(0,Math.min(100,Math.round(S.soc*10)/10))})}const o=e[e.length-1];return d.push({distance:Math.round(o.x_km),elevation:Math.round(o.elevation??20+o.soc*.6+o.x_km%80*.3),battery:Math.max(0,Math.min(100,Math.round(o.soc*10)/10))}),d})();(e==null?void 0:e.length)>15;const u=({active:h,payload:d,label:o})=>{var _,P;return!h||!d||!d.length?null:$.jsxs("div",{className:"bg-white/95 backdrop-blur-sm px-5 py-4 rounded-xl border border-gray-200 shadow-xl min-w-60 text-sm",children:[$.jsxs("div",{className:"font-bold text-gray-900 mb-2.5",children:[o," km"]}),$.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-x-4 gap-y-2",children:[$.jsx("span",{className:"text-blue-600 font-medium",children:""}),$.jsxs("span",{className:"text-gray-800",children:["Elevation: ",$.jsxs("strong",{children:[(_=d[0])==null?void 0:_.value," m"]})]}),$.jsx("span",{className:"text-green-600 font-medium",children:"Battery"}),$.jsx("span",{className:"text-gray-800",children:$.jsxs("strong",{children:[(P=d[1])==null?void 0:P.value,"%"]})})]})]})};return $.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-2xl border border-gray-200 shadow-sm",children:[$.jsxs("div",{className:"mb-6",children:[$.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Energy Profile & Elevation"}),$.jsx("p",{className:"text-gray-600 mt-3",children:"Projected battery consumption vs route elevation"})]}),$.jsx("div",{className:"w-full",style:{height:420},children:$.jsx(iB,{width:"100%",height:"100%",children:$.jsxs(xpe,{data:n,margin:{top:10,right:35,left:10,bottom:45},children:[$.jsxs("defs",{children:[$.jsxs("linearGradient",{id:"elevationGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"0%",stopColor:"rgba(41,128,185,0.38)"}),$.jsx("stop",{offset:"100%",stopColor:"rgba(41,128,185,0)"})]}),$.jsxs("linearGradient",{id:"batteryGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[$.jsx("stop",{offset:"0%",stopColor:"rgba(39,174,96,0.32)"}),$.jsx("stop",{offset:"100%",stopColor:"rgba(39,174,96,0)"})]})]}),$.jsx(QT,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),$.jsx(JT,{dataKey:"distance",label:{value:"Distance (km)",position:"insideBottom",offset:-5,dy:20,fontSize:13},tick:{fill:"#6b7280",fontSize:12},axisLine:!1,tickLine:!1}),$.jsx(tw,{yAxisId:"left",domain:[0,100],tick:{fill:"#27ae60",fontSize:12},label:{value:"Battery %",angle:-90,position:"insideLeft",fill:"#27ae60",offset:0,dy:-10,fontSize:13},axisLine:!1,tickLine:!1}),$.jsx(tw,{yAxisId:"right",orientation:"right",domain:[0,"dataMax + 40"],tick:{fill:"#2980b9",fontSize:12},label:{value:"Elevation (m)",angle:90,position:"insideRight",fill:"#2980b9",offset:0,dy:-15,fontSize:13},axisLine:!1,tickLine:!1}),$.jsx($4,{content:$.jsx(u,{})}),$.jsx(FE,{yAxisId:"right",type:"monotone",dataKey:"elevation",name:"Elevation",stroke:"#2980b9",strokeWidth:2.8,fill:"url(#elevationGrad)",activeDot:{r:9,strokeWidth:2.5}}),$.jsx(FE,{yAxisId:"left",type:"monotone",dataKey:"battery",name:"Battery",stroke:"#27ae60",strokeWidth:2.8,fill:"url(#batteryGrad)",activeDot:{r:9,strokeWidth:2.5}}),$.jsx(pB,{verticalAlign:"top",height:45,iconType:"plainline",iconSize:16,wrapperStyle:{fontSize:13,color:"#4b5563",paddingTop:8}})]})})})]})}const wpe=({powerBreakdown:e})=>{const r=Jn.useMemo(()=>{if(!(e!=null&&e.length))return[];if(e.length<=9)return e.map(d=>({segment:d.range,"Aerodynamic Drag":d.aero||0,"Rolling Resistance":d.rolling||0,"Elevation/Climbing":d.climb||0}));const n=e.slice(0,8),u=e.slice(8),h={"Aerodynamic Drag":u.reduce((d,o)=>d+(o.aero||0),0),"Rolling Resistance":u.reduce((d,o)=>d+(o.rolling||0),0),"Elevation/Climbing":u.reduce((d,o)=>d+(o.climb||0),0)};return[...n.map(d=>({segment:d.range,"Aerodynamic Drag":d.aero||0,"Rolling Resistance":d.rolling||0,"Elevation/Climbing":d.climb||0})),{segment:"Others","Aerodynamic Drag":h["Aerodynamic Drag"],"Rolling Resistance":h["Rolling Resistance"],"Elevation/Climbing":h["Elevation/Climbing"]}]},[e]);return $.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6 bg-white rounded-xl border border-gray-200 shadow-sm",children:[$.jsxs("div",{className:"mb-6",children:[$.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1",children:"Power Consumption Breakdown"}),$.jsxs("p",{className:"text-gray-600",children:["Energy/power usage by source across route segments",(e==null?void 0:e.length)>9&&` (${e.length} segments)`]})]}),$.jsx("div",{className:"w-full h-[420px]",children:$.jsx(iB,{width:"100%",height:"100%",children:$.jsxs(vpe,{data:r,margin:{top:20,right:30,left:10,bottom:50},barCategoryGap:"22%",children:[$.jsx(QT,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),$.jsx(JT,{dataKey:"segment",axisLine:!1,tickLine:!1,angle:-35,textAnchor:"end",height:70,tick:{fill:"#4b5563",fontSize:13},interval:0}),$.jsx(tw,{axisLine:!1,tickLine:!1,tick:{fill:"#4b5563",fontSize:13},label:{value:"Power (kW)",angle:-90,position:"insideLeft",fill:"#6b7280",fontSize:14}}),$.jsx($4,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},labelStyle:{fontWeight:600,color:"#111827"}}),$.jsx(Vx,{dataKey:"Aerodynamic Drag",stackId:"a",fill:"#d946ef",radius:[6,6,0,0],maxBarSize:72}),$.jsx(Vx,{dataKey:"Rolling Resistance",stackId:"a",fill:"#3b82f6",radius:0,maxBarSize:72}),$.jsx(Vx,{dataKey:"Elevation/Climbing",stackId:"a",fill:"#22c55e",radius:[0,0,6,6],maxBarSize:72})]})})}),$.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mt-8",children:[$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("div",{className:"w-5 h-5 rounded bg-[#d946ef] shadow-sm"}),$.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aerodynamic Drag"})]}),$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("div",{className:"w-5 h-5 rounded bg-[#3b82f6] shadow-sm"}),$.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rolling Resistance"})]}),$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("div",{className:"w-5 h-5 rounded bg-[#22c55e] shadow-sm"}),$.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Elevation / Climbing"})]})]})]})};function Spe(e){return Tw({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(e)}function Ppe({analysisData:e,locationData:t,tripId:r}){const n=[{id:1,title:"Total Distance",value:e==null?void 0:e.total_distance_km,unit:"km",extraInfo:"Route Optimized for efficiency",icon:aN},{id:2,title:"Energy Consumed",value:e==null?void 0:e.energy_kwh,unit:"kWh",extraInfo:`Avg. ${(e==null?void 0:e.avg_consumption_wh_per_km)+" per km"}`,icon:tN},{id:3,title:"Trip Duration",value:(e==null?void 0:e.trip_duration_min)+" min",extraInfo:`Includes ${e==null?void 0:e.charging_stop_count} charging stops`,icon:ab},{id:4,title:"Arrival SoC",value:(e==null?void 0:e.arrival_soc)+"%",extraInfo:"Started at "+(e==null?void 0:e.start_soc)+"%",icon:nN}],[u,h]=A.useState(!1),[d,o]=A.useState("Export File"),_=["Export PDF"],[P,S]=A.useState(!1),{pdfExport:M,isPdfExportLoading:O}=cF({id:r});A.useEffect(()=>{P&&(M!=null&&M.download_url)&&(window.open(M.download_url,"_blank","noopener,noreferrer"),S(!1))},[P,M]);const z=F=>{o(F),h(!1),S(!0)};return $.jsxs("div",{children:[$.jsxs("div",{className:"flex items-center justify-between",children:[$.jsxs("div",{className:"",children:[$.jsx("h1",{className:"text-[#212B36] font-roboto text-[32px] font-semibold leading-[38.4px]",children:"Route Analysis Results"}),$.jsxs("p",{className:"paragraph mt-2",children:[t==null?void 0:t.origin," To ",t==null?void 0:t.destination]})]}),$.jsxs("div",{className:"flex items-center gap-5",children:[$.jsxs("div",{className:"flex flex-col w-44 text-sm relative",children:[$.jsxs("button",{type:"button",onClick:()=>h(!u),className:"w-full text-left px-4 pr-2 py-2.5 rounded-lg border border-[#2FA75F] text-[#2FA75F] text-lg flex items-center justify-between cursor-pointer",children:[$.jsx("span",{children:d}),$.jsx(Spe,{className:`w-5 h-5 inline float-right transition-transform duration-200 ${u?"rotate-0":"-rotate-90"}`})]}),u&&$.jsx("ul",{className:"absolute top-full left-0 w-full bg-white border border-gray-300 rounded shadow-md mt-1 py-2 z-50",children:_.map(F=>$.jsx("li",{className:"px-4 py-2 hover:bg-[#2FA75F] hover:text-white cursor-pointer",onClick:()=>z(F),children:F},F))})]}),$.jsx(wy,{to:"/result",children:"Save & Close"})]})]}),$.jsx("div",{className:"grid lg:grid-cols-4 gap-6",children:n==null?void 0:n.map(F=>$.jsxs("div",{className:"bg-white p-6 rounded-2xl border mt-8 space-y-4",children:[$.jsxs("div",{className:"flex items-start gap-2 justify-between ",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"title text-[#4F586D]! ",children:F==null?void 0:F.title}),$.jsxs("p",{className:"paragraph mt-4 text-lg font-medium",children:[$.jsx("span",{className:"text-[32px] text-black",children:F==null?void 0:F.value})," ",F==null?void 0:F.unit]})]}),$.jsx("div",{className:"bg-gray-200 p-2 rounded-full flex items-center justify-center",children:$.jsx(F.icon,{size:24})})]}),(F==null?void 0:F.extraInfo)&&$.jsxs("p",{className:"paragraph mt-2 flex items-center gap-2",children:[$.jsx("span",{className:"text-[#20A157]",children:$.jsx(oN,{})})," ",F==null?void 0:F.extraInfo]})]},F==null?void 0:F.id))}),O&&$.jsx(kd,{})]})}function Vj({className:e,...t}){return $.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:$.jsx("table",{"data-slot":"table",className:Ed("w-full caption-bottom text-sm",e),...t})})}function $j({className:e,...t}){return $.jsx("tbody",{"data-slot":"table-body",className:Ed("[&_tr:last-child]:border-0",e),...t})}function fc({className:e,...t}){return $.jsx("tr",{"data-slot":"table-row",className:Ed("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function la({className:e,...t}){return $.jsx("td",{"data-slot":"table-cell",className:Ed("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Epe({vehicle_summary:e,route_summary:t}){return $.jsxs("div",{className:"rounded-2xl  p-6 bg-white border",children:[$.jsxs("div",{className:"mb-6",children:[$.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Route Summary"}),$.jsx("p",{className:"text-base text-gray-600",children:"Energy loss by source across route segments."})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[$.jsxs("div",{children:[$.jsx("h2",{className:"title2 mb-4",children:"Vehicle Information"}),$.jsx("div",{className:"border rounded-lg ",children:$.jsx(Vj,{children:$.jsxs($j,{children:[$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Model"}),$.jsx(la,{className:"text-right paragraph",children:e==null?void 0:e.model})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Type"}),$.jsx(la,{className:"text-right paragraph capitalize",children:e==null?void 0:e.type})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Battery Capacity"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.battery_kwh," kWh"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Power"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.power_kw," kW"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Weight"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.weight_kg," kg"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Efficiency"}),$.jsxs(la,{className:"text-right paragraph",children:[e==null?void 0:e.efficiency_percent,"%"]})]})]})})})]}),$.jsxs("div",{children:[$.jsx("h2",{className:"title2 mb-4",children:"Route Information"}),$.jsx("div",{className:"border rounded-md",children:$.jsx(Vj,{children:$.jsxs($j,{children:[$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Origin"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.origin})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Destination"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.destination})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Total Distance"}),$.jsxs(la,{className:"text-right paragraph",children:[t==null?void 0:t.total_distance_km," km"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Avg. Consumption"}),$.jsxs(la,{className:"text-right paragraph",children:[t==null?void 0:t.avg_consumption_kwh_100km," kWh/100km"]})]}),$.jsxs(fc,{children:[$.jsx(la,{className:"font-medium paragraph text-black!",children:"Charging Stops"}),$.jsx(la,{className:"text-right paragraph",children:t==null?void 0:t.charging_stop_count})]})]})})})]})]}),$.jsxs("div",{className:"border p-4 rounded-2xl",children:[$.jsx("h2",{className:"title mb-3",children:"Weather & Wind Impact"}),$.jsx("p",{className:"paragraph",children:"Current conditions are optimal. No significant headwind or temperature effects on battery performance. Energy consumption estimates are based on standard conditions (20C, 0 m/s wind)."})]})]})}function Cpe(){const e=tl().state;return $.jsxs("div",{className:"p-10",children:[$.jsx(Ppe,{locationData:e==null?void 0:e.route_summary,analysisData:e==null?void 0:e.summary_cards,tripId:e==null?void 0:e.trip_id}),$.jsxs("div",{className:"grid grid-cols-2 mt-6 gap-6",children:[$.jsx(bpe,{elevationData:e==null?void 0:e.soc_profile_graph}),$.jsx(Epe,{vehicle_summary:e==null?void 0:e.vehicle_summary,route_summary:e==null?void 0:e.route_summary})]}),$.jsxs("div",{className:"grid grid-cols-2 mt-6 gap-6",children:[$.jsx(bY,{ChargingStops:e==null?void 0:e.charging_stops}),$.jsx(wpe,{powerBreakdown:e==null?void 0:e.power_breakdown_chart})]})]})}const Tpe="/assets/auth-bg-DATug2Bs.png";function Mpe(){return Cw(t=>{var r;return(r=t==null?void 0:t.userToken)==null?void 0:r.tokens})?$.jsx(QE,{to:"/"}):$.jsxs("main",{className:"w-full h-screen flex items-center gap-5 p-[0.5%]",children:[$.jsx("div",{className:"w-5/12 h-full",children:$.jsx("img",{src:Tpe,alt:"Authentication Background Image",className:"w-full max-w-full h-full object-cover"})}),$.jsx("div",{className:"w-7/12 flex items-center pl-[8%]",children:$.jsx(wz,{})})]})}const G6=()=>{const t=ha.create({baseURL:"https://electric-vehicle-route-energy-calculation.onrender.com/api/v1",timeout:3e4});return t.interceptors.response.use(r=>r,r=>{let n;return r.response?(r.response.status===500&&(n="Internal server error, try again",ki.error(n)),console.error("API Error:",r)):r.request&&(n="Network issue, try again.",ki.error(n),console.error("Network Error:",r==null?void 0:r.message)),Promise.reject(r)}),t};function kpe({onSuccess:e,onError:t}){const r=G6();return ig({mutationKey:["userLogin"],mutationFn:async n=>{const u=await r.post("/login/",n);return u==null?void 0:u.data},onSuccess:n=>{e&&e(n)},onError:n=>{t&&t(n)}})}function Ape(){const e=_C(),t=Sp(),{register:r,handleSubmit:n,formState:{errors:u}}=$_(),{mutate:h,isPending:d}=kpe({onSuccess:_=>{e(eb(_==null?void 0:_.data)),pu.success((_==null?void 0:_.message)||"Login Successful!"),setTimeout(()=>{t("/")},500)},onError:_=>{var P,S;pu.error(((S=(P=_==null?void 0:_.response)==null?void 0:P.data)==null?void 0:S.message)||"Something went wrong!"),console.log(_)}}),o=_=>{h(_)};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"Login to your account"}),$.jsxs("p",{className:"text-[#637381] text-lg mt-4",children:["Dontt have an account?"," ",$.jsx(wc,{to:"/auth/register",className:"text-primary",children:"Sign up"})]})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:n(o),children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Email Address*"}),$.jsx("input",{type:"email",placeholder:"Email",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-primary ${u.email?"border-red-500":"border-[#D5DAE1]"}`,...r("email",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Password*"}),$.jsx("input",{type:"password",placeholder:"Password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${u.password?"border-red-500":"border-[#D5DAE1]"}`,...r("password",{required:!0})})]}),$.jsx("div",{className:"w-full flex justify-end mt-5",children:$.jsx(wc,{to:"#",className:"text-primary text-lg font-medium font-roboto",children:"Forget Password?"})}),$.jsx("div",{children:$.jsx("button",{type:"submit",className:"w-full px-5 py-3 bg-primary rounded-xl text-white text-xl font-medium font-roboto mt-6 cursor-pointer hover:bg-primary/90 transition-all",children:"Login"})})]})}),d&&$.jsx(kd,{})]})}function Ipe({onSuccess:e,onError:t}){const r=G6();return ig({mutationKey:["registerUser"],mutationFn:async n=>{const u=await r.post("/signup/",n);return u==null?void 0:u.data},onSuccess:n=>{e&&e(n)},onError:n=>{t&&t(n)}})}function Ope(){const e=Sp(),{register:t,handleSubmit:r,watch:n,formState:{errors:u}}=$_(),h=n("terms"),{mutate:d,isPending:o}=Ipe({onSuccess:P=>{pu.success("Registration successful!"),setTimeout(()=>{e("/auth/login")},1e3)},onError:P=>{var S,M;pu.error(((M=(S=P==null?void 0:P.response)==null?void 0:S.data)==null?void 0:M.message)||"Something went wrong!!!"),console.log(P)}}),_=P=>{const S={email:P==null?void 0:P.email,password:P==null?void 0:P.password,confirm_password:P==null?void 0:P.passwordConfirm};d(S)};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"Create an account"}),$.jsxs("p",{className:"text-[#637381] text-lg mt-4",children:["Already have an account?"," ",$.jsx(wc,{to:"/auth/login",className:"text-primary",children:"Log in"})]})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:r(_),children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Email Address*"}),$.jsx("input",{type:"email",placeholder:"Email",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-primary ${u.email?"border-red-500":"border-[#D5DAE1]"}`,...t("email",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Password*"}),$.jsx("input",{type:"password",placeholder:"Password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${u!=null&&u.password?"border-red-500":"border-[#D5DAE1]"}`,...t("password",{required:!0})})]}),$.jsxs("div",{className:"mt-5",children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Confirm Password*"}),$.jsx("input",{type:"password",placeholder:"Confirm password",className:`w-full px-4 py-3.5 border rounded mt-2 focus-visible:outline-none focus-visible:border-primary ${u!=null&&u.passwordConfirm?"border-red-500":"border-[#D5DAE1]"}`,...t("passwordConfirm",{required:!0})})]}),$.jsxs("label",{className:"w-full mt-5 flex items-center gap-3 cursor-pointer",children:[$.jsx("input",{type:"checkbox",className:"w-5 h-5",...t("terms",{required:!0})}),$.jsxs("span",{className:"text-[#637381] text-lg font-roboto",children:["I agree to the"," ",$.jsx(wc,{to:"/",className:"text-primary",onClick:P=>P.stopPropagation(),children:"Terms & Conditions"})]})]}),$.jsx("div",{children:$.jsx("button",{type:"submit",disabled:!h,className:`w-full px-5 py-3 bg-primary rounded-xl text-white text-xl font-medium font-roboto mt-6 cursor-pointer transition-all ${h?"hover:bg-primary/90":"opacity-50 cursor-pointer"}`,children:"Create Account"})})]})}),o&&$.jsx(kd,{})]})}function Lpe(){const e=Sp(),[t,r]=A.useState(["","","","","",""]),n=A.useRef([]),u=(_,P)=>{var M;if(P.length>1)return;const S=[...t];S[_]=P,r(S),P&&_<5&&((M=n.current[_+1])==null||M.focus())},h=(_,P)=>{var S;P.key==="Backspace"&&!t[_]&&_>0&&((S=n.current[_-1])==null||S.focus())},d=t.every(_=>_!==""),o=_=>{if(_.preventDefault(),d){const P=t.join("");console.log("OTP:",P),pu.success("OTP Verification Successful!"),setTimeout(()=>{e("/auth/register-success")},500)}};return $.jsxs("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:[$.jsxs("div",{children:[$.jsx("h1",{className:"text-[#212B36] text-[40px] font-semibold font-roboto",children:"OTP Verification"}),$.jsx("p",{className:"text-[#637381] text-lg mt-4",children:"We sent a 6 digit verification code to your email ra*********t2025@gmail.com"})]}),$.jsx("div",{children:$.jsxs("form",{onSubmit:o,children:[$.jsxs("div",{children:[$.jsx("label",{className:"text-[#212B36] text-lg font-medium font-roboto",children:"Enter 6 digit code"}),$.jsx("div",{className:"flex gap-3 mt-2",children:t==null?void 0:t.map((_,P)=>$.jsx("input",{type:"text",inputMode:"numeric",maxLength:1,value:_,onChange:S=>u(P,S.target.value),onKeyDown:S=>h(P,S),ref:S=>n.current[P]=S,className:`w-14 h-14 text-center text-2xl border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary ${_?"border-green-500":"border-[#D5DAE1]"}`},P))})]}),$.jsxs("p",{className:"text-[#637381] text-base my-10",children:["Didn't receive the code?"," ",$.jsx(wc,{to:"#",className:"text-primary",children:"Resend Code"})]}),$.jsxs("div",{className:"w-full flex items-center gap-8 mt-6",children:[$.jsx(wc,{to:-1,className:"w-full px-5 py-3 bg-white rounded-xl text-primary border border-primary text-xl font-medium font-roboto cursor-pointer inline-block text-center hover:opacity-65 transition-all",children:"Back"}),$.jsx("button",{type:"submit",disabled:!d,className:`w-full px-5 py-3 rounded-xl text-white text-xl font-medium font-roboto cursor-pointer transition-all ${d?"bg-primary hover:bg-primary/90":"bg-primary/50 opacity-50 cursor-not-allowed"}`,children:"Submit"})]})]})})]})}const Dpe="/assets/success-frame-DruIkaLO.png";function Rpe(){return $.jsx("div",{className:"w-full max-w-[600px] py-6 flex flex-col gap-10",children:$.jsxs("div",{className:"space-y-10 text-center",children:[$.jsx("div",{children:$.jsx("img",{src:Dpe,alt:"",className:"w-full max-w-full object-contain"})}),$.jsx("h1",{className:"text-[#212B36] text-2xl font-semibold font-roboto",children:"Successfully Create an your account"}),$.jsx(wc,{to:"/auth/login",className:"w-full px-5 py-3 rounded-xl text-white text-xl font-medium font-roboto bg-primary inline-block text-center cursor-pointer transition-all",children:"Go to login"})]})})}const jpe=h8([{path:"*",element:$.jsx(s7,{})},{path:"/auth",element:$.jsx(Mpe,{}),children:[{index:!0,element:$.jsx(QE,{to:"login"})},{path:"login",element:$.jsx(Ape,{})},{path:"register",element:$.jsx(Ope,{})},{path:"otp-verify",element:$.jsx(Lpe,{})},{path:"register-success",element:$.jsx(Rpe,{})}]},{path:"/",element:$.jsx(QW,{}),children:[{index:!0,element:$.jsx(u7,{})},{path:"vechile",element:$.jsx(IH,{})},{path:"route",element:$.jsx(cY,{})},{path:"result",element:$.jsx(_Y,{})},{path:"route-analysis-results",element:$.jsx(Cpe,{})}]}]);var zpe=function(){return null};const Npe=i3({reducer:{userData:g3.reducer,userToken:y3.reducer}}),Fpe=new X8,Uj=sessionStorage.redirect;Uj&&(sessionStorage.removeItem("redirect"),window.history.replaceState(null,null,Uj));i$.createRoot(document.getElementById("root")).render($.jsx(A.StrictMode,{children:$.jsx(Y8,{client:Fpe,children:$.jsxs(K3,{store:Npe,children:[$.jsx(AW,{position:"top-center",reverseOrder:!1}),$.jsx(w8,{router:jpe}),$.jsx(zpe,{initialIsOpen:!1})]})})}));
